{"version":3,"sources":["PCR/PriceCalculator.js","Gynae/PriceCalculator.js","GP/PriceCalculator.js","STD/PriceCalculator.js","Admin/DateFormatter.js","Admin/PriceCalculator.js","PCR/DateFormatter.js","theme.js","GlobalStyles.js","serviceWorker.js","GlobalState.js","CopyRight.js","GlobalPath.js","services/api.js","services/UserService.js","PCR/services/api.js","PCR/services/BookService.js","PCR/services/PDFService.js","PCR/PersonsBox.js","PCR/FindByRef.js","PCR/ResendEmailsDialog.js","PCR/Corporates.js","PCR/PayDialog.js","PCR/TimeStampDialog.js","Admin/calendar-admin/colors.js","PCR/BookingDialog.js","PCR/BookingTable.js","PCR/Title.js","PCR/Chart.js","PCR/CurrentVisits.js","PCR/BookingView.js","PCR/ResultsTimeReport.js","PCR/DashboardPreview.js","PCR/UnmatchedRecords.js","PCR/calendar-admin/MonthViewCell.js","PCR/calendar-admin/calendar-util.js","PCR/calendar-admin/MonthView.js","PCR/calendar-admin/WeekViewCell.js","PCR/calendar-admin/WeekView.js","PCR/calendar-admin/DayViewCell.js","PCR/calendar-admin/DayView.js","PCR/calendar-admin/CalendarView.js","Gynae/services/api.js","Gynae/services/BookService.js","Gynae/services/PDFService.js","Gynae/Corporates.js","Gynae/PayDialog.js","Gynae/BookingDialog.js","Gynae/BookingTable.js","Gynae/Title.js","Gynae/Chart.js","Gynae/CurrentVisits.js","Gynae/BookingView.js","Gynae/DashboardPreview.js","Gynae/PersonsBox.js","Gynae/FindByRef.js","Gynae/calendar-admin/MonthViewCell.js","Gynae/calendar-admin/calendar-util.js","Gynae/calendar-admin/MonthView.js","Gynae/calendar-admin/WeekViewCell.js","Gynae/calendar-admin/WeekView.js","Gynae/NewBookingDialog.js","Gynae/calendar-admin/DayViewCell.js","Gynae/calendar-admin/DayView.js","Gynae/calendar-admin/CalendarView.js","GP/services/api.js","GP/services/BookService.js","GP/services/PDFService.js","GP/Corporates.js","GP/PayDialog.js","services/InvoiceService.js","InvoiceDialog.js","GP/BookingDialog.js","GP/BookingTable.js","GP/Title.js","GP/Chart.js","GP/CurrentVisits.js","GP/BookingView.js","GP/DashboardPreview.js","GP/PersonsBox.js","GP/FindByRef.js","GP/calendar-admin/MonthViewCell.js","GP/calendar-admin/calendar-util.js","GP/calendar-admin/MonthView.js","GP/calendar-admin/WeekViewCell.js","GP/calendar-admin/WeekView.js","GP/NewBookingDialog.js","GP/calendar-admin/DayViewCell.js","GP/calendar-admin/DayView.js","GP/calendar-admin/CalendarView.js","STD/services/api.js","STD/services/BookService.js","STD/services/PDFService.js","STD/Corporates.js","STD/PayDialog.js","STD/BookingDialog.js","STD/BookingTable.js","STD/Title.js","STD/Chart.js","STD/CurrentVisits.js","STD/BookingView.js","STD/DashboardPreview.js","STD/PersonsBox.js","STD/FindByRef.js","STD/calendar-admin/MonthViewCell.js","STD/calendar-admin/calendar-util.js","STD/calendar-admin/MonthView.js","STD/calendar-admin/WeekViewCell.js","STD/calendar-admin/WeekView.js","STD/NewBookingDialog.js","STD/calendar-admin/DayViewCell.js","STD/calendar-admin/DayView.js","STD/calendar-admin/CalendarView.js","Title.js","TodayBookingView.js","TomorrowBookingView.js","TotalBookingView.js","LateBookingView.js","UnmatchedBookingView.js","ShouldRefundBookingView.js","Role.js","DashboardPreview.js","Admin/services/api.js","Admin/services/BookService.js","Admin/FindByRef.js","Admin/BookingDialog.js","Admin/Corporates.js","Admin/BookingTable.js","Admin/calendar-admin/MonthViewCell.js","Admin/calendar-admin/calendar-util.js","Admin/calendar-admin/MonthView.js","Admin/calendar-admin/WeekViewCell.js","Admin/calendar-admin/WeekView.js","Admin/NewBookingDialog.js","Admin/calendar-admin/DayViewCell.js","Admin/calendar-admin/DayView.js","Admin/calendar-admin/CalendarView.js","MenuList.js","SignIn.js","Menu.js","Dashboard.js","TokenVerifier.js","Navigator.js","App.js","index.js","Gynae/DateFormatter.js","GP/DateFormatter.js","STD/DateFormatter.js"],"names":["calculatePrice","person","price","tr","certificate","antiBodyTest","module","exports","calculateTotalPrice","persons","totalPrice","i","length","FormatDateFromString","str","substr","FormatDateFromStringShortYear","RevertFormatDateFromString","FormatDateFromStringWithSlash","darkBlack","borderColor","theme","createMuiTheme","palette","primary","main","light","secondary","contrastText","common","black","warning","dark","tonalOffset","background","default","spacing","breakpoints","values","xl","lg","md","sm","xs","border","borderWidth","overrides","MuiExpansionPanel","root","position","MuiTableCell","paddingLeft","paddingRight","borderBottom","MuiDivider","backgroundColor","height","MuiPrivateNotchedOutline","MuiListItem","divider","MuiDialog","paper","width","maxWidth","marginLeft","marginRight","MuiTooltip","tooltip","fontSize","MuiExpansionPanelDetails","enGB","responsiveFontSizes","withStyles","outline","color","white","paddingTop","paddingBottom","down","up","display","flexWrap","marginTop","marginBottom","withTheme","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","GlobalState","React","createContext","Copyright","Typography","variant","align","Link","href","Date","getFullYear","authToken","backendAPI","getGlobalPath","path","axios","create","baseURL","headers","UserService","setToken","token","signIn","payload","API","post","checkToken","BookService","payBooking","bookingId","paymentMethod","corporate","unPayBooking","getTestsTimeReport","axiosRetry","retries","retryDelay","retryCount","get","getBookingsStatsByDateStr","dateStr","getBookingsCountByDateStr","getAllBookingsCountAll","getBookingsCountByDateStrandTime","time","source","cancelToken","getBookingsByDateStrandTime","getAllBookingsCountByDateStr","getAllBookingsCountByDateStrandTime","getAllBookingsByDateStrandTime","changeBackToBookingMade","id","resendEmailsWithBookingId","regenerateFilesWithBookingId","resendEmails","linkId","regenerateFiles","matchRecords","findBestMatches","getLinkDetails","getLinkDetailsWithBookingId","findBookingByRefBirthDate","bookingRef","birthDate","updateBooking","updateBookingTime","deleteBooking","unDeleteBooking","getBookingsByRef","ref","getBookingById","getAllBookings","limit","getAllTRBookings","getLateBookings","getDeletedBookings","getLiveBookings","getCompletedBookings","getPositiveBookings","getTodayBookings","getOldBookings","getFutureBookings","getRecentBookings","getRecentBookingsAll","getUnmatchedRecords","getUnmatchedRecordsArchived","archiveRecord","unArchiveRecord","PDFService","downloadCovidForm1","responseType","Accept","downloadCovidForm2","downloadPdfResult","downloadPdfCert","downloadPdfLabReport","useStyles","makeStyles","box","padding","borderRadius","textAlign","boxRed","boxInfo","ul","listStyle","margin","li","icon","lineThrough","textDecoration","heading","typography","pxToRem","flexBasis","flexShrink","text","secondaryHeading","infoDetails","infoTitle","fontWeight","infoData","title","Accordion","AccordionDeleted","DownloadForm","infoDataCharges","infoDataChargesHigher","BookedLabel","borderLeft","PatientAttendedLabel","SampleTakenLabel","ReportSentLabel","ReportCertSentLabel","PositiveLabel","EditButton","RestoreButton","DeleteButton","SaveButton","CancelButton","TextBox","checkIcon","closeIcon","centeredLabel","alignItems","PersonsBox","classes","useContext","setState","useState","expanded","setExpanded","edit","editMode","setEditMode","delete","deleteMode","setDeleteMode","restore","restoreMode","setRestoreMode","saving","setSaving","deleting","setDeleting","restoring","setRestoring","validationError","setValidationError","bookingDate","setBookingDate","bookingTime","setBookingTime","gender","setGender","setTitle","forename","setForename","surname","setSurnme","email","setEmail","dob","setDOB","tel","setTel","postCode","setPostCode","address","setAddress","notes","setNotes","passport","setPassport","passport2","setPassport2","setCertificate","setAntiBodyTest","bookingDateChanged","event","target","value","bookingDateError","bookingTimeChanged","bookingTimeError","genderChanged","titleChanged","forenameChanged","surnameChanged","emailChanged","dobChanged","dobError","telChanged","postCodeChanged","addressChanged","passportChanged","passport2Changed","certificateChanged","checked","antiBodyTestChanged","handleEditModeChanged","forenameCapital","surnameCapital","toUpperCase","phone","passportNumber","passportNumber2","booking","_id","validateBooking","validateDate","charAt","test","year","parseInt","month","day","err","hour","minute","validateTime","bookingService","res","RefreshPersonInfo","handleDeleteModeChanged","del","handleRestoreModeChanged","Fragment","Grid","container","direction","justify","className","foundRecords","map","index","status","panel","item","deleted","onChange","isExpanded","AccordionSummary","expandIcon","aria-controls","Tooltip","style","AccordionDetails","hidden","Button","type","fullWidth","onClick","disabled","TextField","inputProps","FormControlLabel","formControl","control","Checkbox","name","label","startIcon","file","Blob","data","fileURL","URL","createObjectURL","open","isBoolean","param","TextMaskCustom","props","inputRef","other","inputElement","mask","showMask","flexDirection","avatar","form","Find","Clear","NoRecordsFound","FindByRef","initialFocus","focus","setFocus","autoFocus","key","onFocus","onBlur","useFocus","focusProps","useEffect","clearField","refError","findRecords","indexOf","submiting","CssBaseline","component","FormControl","pattern","helperText","size","InputProps","inputComponent","onKeyPress","onTouchTap","Alert","severity","interval","refreshButton","RefLink","cursor","archiveButton","smartMatchButton","matchButton","resendButton","resendFilesButton","cancelButton","BorderLinearProgress","colorPrimary","bar","LinearProgress","LinearProgressWithLabel","Box","mr","minWidth","Math","round","PaperComponent","handle","cancel","Paper","ResendEmailsDialog","sending","setSending","sent","setSent","sendJustToPCR","setSendJustToPCR","sendingStatus","setSendingStatus","sendingProgress","setSendingProgress","setError","prevProgress","Dialog","onClose","clearInterval","handleClose","aria-labelledby","DialogTitle","Divider","DialogContent","setInterval","link","setTimeout","corporates","backdrop","zIndex","drawer","PayDialog","setPaymentMethod","setCorporate","payClicked","a","bookingPayChanged","RadioGroup","aria-label","Radio","Select","labelId","element","MenuItem","bottom","right","Backdrop","CircularProgress","addMinutes","date","minutes","getTime","itemTitle","itemData","TimeStampDialog","linkTimeStamp","setLinkTimeStamp","filename","timeStamp","dateformat","setHours","bookingTimeNormalized","setMinutes","setSeconds","setMilliseconds","getDateFromBooking","samplingTimeStamp","DialogActions","CalendarColors","ResendEmailsButton","PayButton","PayLabel","checkIconSmall","Transition","forwardRef","Slide","BookingDialog","copied","setCopied","openResendDialog","setOpenResendDialog","openPayDialog","setOpenPayDialog","selectedBooking","setSelectedBooking","refreshData","setRefreshData","setBooking","recordChanged","setRecordChanged","fieldChanged","setFieldChanged","openUndoPayDialog","setOpenUndoPayDialog","openTimeStampDialog","setOpenTimeStampDialog","handleCloseUndoPayDialog","isChanged","bookingDialogDataChanged","undoPaymentClicked","TransitionComponent","keepMounted","aria-describedby","top","left","IconButton","clipboard","writeText","transition","minHeight","maxHeight","deleteButtonDisabled","selfIsolate","postCodeSI","addressSI","NHSNumber","ethnicity","arrivalDate","flightNumber","lastDepartedDate","travellingFrom","paid","paidBy","DialogContentText","HideNowRows","justifyItems","ExportToExcelButton","ExportToExcelButtonInline","table","borderCollapse","th","verticalAlign","fontcolor","td","topSelect","getTableTitle","BookingTable","topCount","setTopCount","openDialogExcel","setOpenDialogExcel","fromDate","setFromDate","untilDate","setUntilDate","fromDateStr","setFromDateStr","untilDateStr","seUntilDateStr","justCorporate","setJustCorporate","chkDate","setChkDate","chkForename","setChkForename","chkSurname","setChkSurname","chkDOB","setChkDOB","chkEmail","setChkEmail","chkTel","setChkTel","chkCertificate","setChkCertidicate","chkAntiBodyTest","setChkAntiBodyTest","chkextRef","setChkExtRef","chkPrice","setChkPrice","columns","field","headerName","renderCell","params","getValue","openDetailsDialog","valueFormatter","formatTimeStamp","valueGetter","placement","bookings","cachedBookings","isFetching","setData","setSelectedRow","seeDetailsDialogOpen","setSeeDetailsDialogOpen","filter","setFilter","useRef","todayStr","timeStampStr","loadData","api","trim","filteredData","toLowerCase","find","page","setPage","userId","username","faFileExcel","autoComplete","InputLabel","rows","autoPageSize","onPageChange","onSelectionChange","newSelection","row","Switch","utils","DateFnsUtils","autoOk","disableToolbar","format","KeyboardButtonProps","sheet","buttonText","extRef","PriceCalculator","Title","gutterBottom","children","createData","amount","emptyData","undefined","getCount","count","Chart","useTheme","loading","setLoading","result","push","fetchData","ResponsiveContainer","LineChart","XAxis","dataKey","stroke","YAxis","Label","angle","textAnchor","fill","Line","dot","depositContext","flex","bookingBox","boxShadow","getCurrentTimeSlot","now","min","getMinutes","getHours","pm","minStr","hourStr","pmStr","timeStr","getDay","getCurrentTimeSlotLabel","endTimeStr","CurrentVisits","current","setCurrent","setBookings","openDialog","setOpenDialog","currentTimeSlot","bookingCliked","_bookings","substring","getBookingsBox","seeMore","BookingView","refresh","setRefresh","Table","TableHead","TableRow","TableCell","TableBody","preventDefault","currentMenuIndex","getMenuIndex","COLORS","RADIAN","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","radius","x","cos","y","sin","dominantBaseline","ReportLabels","AverageLabel","less12Label","less24Label","less36Label","ResultsTimeReport","report","setReport","setOpen","lessThan12","lessThan24","lessThan36","PieChart","Pie","labelLine","entry","Cell","avg","lessThan12Percent","lessThan24Percent","lessThan36Percent","lessThan48","lessThan48Percent","overflow","fixedHeight","DashboardPreview","fixedHeightPaper","clsx","downloadPDFButton","UnmatchedRecords","selectedTab","disableId","smartMatchClicked","downloadLabReport","setDisableId","setSeletedTab","smartLinkId","setSmartLinkId","smartLinkDetails","setSmartLinkDetails","likelyBookings","setLikelyBookings","seeDetailsBooking","setSeeDetailsBooking","matching","setMatching","matched","setMatched","matchedBookings","lastPromise","currentPromise","e","ToggleButtonGroup","exclusive","ToggleButton","timeout","testDate","handleCheckChanged","likelihood","seeDetailsClicked","Container","ContainerPast","DayLabel","DayLabelToday","lineHight","DayLabelDisabled","BookingCountLabel","BookingCountLabelBusy","LoadingProgress","BookingCountGauge","MonthViewCell","cellIndex","daysInMonth","dayClicked","setDateStr","cellDate","setCellDate","bookingsCount","setBookingsCount","disableDay","setDisableDay","setIsPast","getMonth","AdminCalendarCache","record","method","query","fecthData","_bookingsCount","_cellIndex","_month","_daysInMonth","getDate","_day","isToday","getDayLabel","disableShrink","MAX_BOOKING_COUNT","percent","getBookingsCountGauge","CalendarUtil","getMonthRange","calendar","Calendar","SUNDAY","itermonthdates","dayLables","days","MonthView","WeekViewCell","isPast","CancelToken","overflowY","WeekView","dates","replace","overflowX","bookingBoxSampleTaken","bookingBoxPositive","bookingBoxReportSent","DayViewCell","filteredBookings","setFilteredBookings","dayViewCalFilter","search","getBookingClass","borderTop","titleLabel","titleLabelToday","DayView","monthNames","fontColor","CalendarView","setMonth","setYear","setDay","firstDayofWeek","setFirstDayofWeek","weekDates","setWeekDates","mode","setMode","removeFilter","today","dayofWeek","firstdayofweek","_mode","newDay","justifyContent","newMonth","newFirstDayofWeek","endOfWeek","endofWeekStr","getCalendarTitleFromMode","endAdornment","InputAdornment","onMouseDown","changeDepositBooking","deposit","addNewBooking","sendRegFormEmail","getShouldRefundsCount","manualRefundBooking","refundBooking","changeToPatientAttended","downloadGynaeRegForm","NumberFormatCustom","getInputRef","onValueChange","thousandSeparator","isNumericString","prefix","setPrice","priceError","setPriceError","required","startAdornment","PriceLabelPaid","PriceLabelNotPaid","emailSent","setEmailSent","openRefundDialog","setOpenRefundDialog","fullname","setFullname","service","setService","handleCloseRefundDialog","refundPaymentClicked","updateShouldRefundsCount","shouldRefunsCount","manualRefund","depositChanged","OTCCharges","formData","paymentInfo","toLocaleString","textTransform","refund","notifyIcon","showCreateExcel","isThursday","isFriday","slotMinStr","slotHourStr","fullnameChanged","serviceChanged","notesChanged","CalendarIcon","DateTimeLabel","Packages","packageName","NewBookingDialog","fullnameError","setFullnameError","setPhone","setDeposit","saveClicked","otem","bookingBoxNew","openDialogAddNew","setOpenDialogAddNew","addNewBookingClicked","downloadGPRegForm","downloadInvoice","InvoiceService","createInvoice","updateInvoice","invoiceNumber","deleteinvoice","getInvoiceByBookingId","getInvoiceByInvoiceNumber","getCodeDetails","code","InvoiceDialog","setCode","codeError","setCodeError","description","setDescription","descriptionError","setDescriptionError","items","setItems","invoice","fetchCodeDetails","validateItem","getGrandTotal","_items","total","forEach","parseFloat","saveClikced","dateAttended","grandTotal","currency","temp","splice","removeItem","printInvoiceButton","editInvoiceButton","openInvoiceDialog","setOpenInvoiceDialog","setInvoice","invoiceLoaded","setInvoiceLoaded","fetchInvoice","OpenInvoiceDialog","downloadSTDRegForm","estimatedPrice","IndivisualTests","comboSTDChecks","serviceError","setServiceError","indivisualArray","setIndivisualArray","comboArray","setComboArray","findIndex","IndivisualTestsChanged","comboSTDChecksChanged","TodayBookingView","PCRBookService","res1","GynaeBookService","res2","GPBookService","res3","STDBookService","res4","pcr","gynae","gp","std","clinic","TomorrowBookingView","tomorrow","tomorrowStr","TotalBookingView","countLabel","countLabelRed","Icon","IconRed","TitleRed","LateBookingView","UnmatchedBookingView","ShouldRefundBookingView","getRole","sessionStorage","getItem","setRole","role","setItem","fixedHeightSmall","fixedHeightPaperSmall","history","useHistory","getMenuId","boxTitle","getPersonBox","clinicTitle","PCRLabel","GynaeLabel","GPLabel","STDLabel","getClassforClinic","PCRGauge","GynaeGauge","GPGauge","STDGauge","DayLabelContainer","getPCRClinicBar","getGynaeClinicBar","getGPClinicBar","getSTDClinicBar","selectedClinics","getClinicBar","BoxDisabled","BoxGynae","BoxGP","BoxSTD","timeDisabled","clinicClicked","BookingBorderPCR","BookingBorderGynae","BookingBorderGP","BookingBorderSTD","openDialogGP","setOpenDialogGP","openDialogGynae","setOpenDialogGynae","openDialogSTD","setOpenDialogSTD","getBookingBorderClass","Clinics","MenuList_Admin","MenuList_Gynae","MenuList_GP","MenuList_STD","MenuList_PCR","getMenuContent","getMenuRole","MenuList","image","backgroundImage","backgroundRepeat","grey","backgroundSize","backgroundPosition","submit","alert","pageBg","appbarCenter","logoImage","appbarTitle","adminPanelLabel","SignIn","useMediaQuery","password","setPassword","setUsername","saveChecked","setSaveChecked","showPassword","setShowPassword","setSubmiting","localStorage","signedIn","roles","elevation","src","alt","Avatar","lineHeight","on","textField","htmlFor","OutlinedInput","tabindex","Visibility","VisibilityOff","labelWidth","mt","iconSelected","menuText","Badge","MyMenu","selectedIndex","setSelectedIndex","GyaneBookService","List","StyledMenu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuApps","toolbar","toolbarIcon","mixins","appBar","transitions","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","menuButtonHidden","flexGrow","drawerPaper","whiteSpace","opacity","drawerPaperClose","appBarSpacer","content","userAvatar","userAvatarSelected","userAvatarBig","appBarText","appBarAppsIcon","appBarAppsIconSelected","usernameLabel","lastLoginLabel","appsLogo","appsBox","appsBoxSelected","appsAdminLabel","appsPCRLabel","appsGynaeLabel","appsGPLabel","appsSTDLabel","appsInToolbar","Dashboard","isMobile","setCurrentMenuIndex","anchorUserAvatar","setAnchorUserAvatar","anchorApps","setAnchorApps","handleAppsClose","useLocation","globalPath","split","getMenuIdFromGlobalPath","pathname","scrollTo","appsClicked","getAppsLogo","getAppsLabel","AppBar","Toolbar","edge","currentTarget","anchorEl","lastLoginTimeStamp","Drawer","getUserIdFromToken","signOutButton","Navigator","loaded","setLoaded","signedUp","forgotPassword","startsWith","process","origin","addEventListener","fetch","response","contentType","ready","unregister","reload","checkValidServiceWorker","App","Provider","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a75fe5f9.chunk.js","sourcesContent":["\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}","\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}","import { createMuiTheme, responsiveFontSizes } from \"@material-ui/core\";\r\nimport { enGB } from '@material-ui/core/locale';\r\n\r\n\r\nconst black = \"#212121\";\r\nconst darkBlack = \"rgb(36, 40, 44)\";\r\nconst background = \"#f9f9f9\";\r\n\r\nconst warningLight = \"rgba(253, 200, 69, .3)\";\r\nconst warningMain = \"rgba(253, 200, 69, .5)\";\r\nconst warningDark = \"rgba(253, 200, 69, .7)\";\r\n\r\n// border\r\nconst borderWidth = 2;\r\nconst borderColor = \"rgba(0, 0, 0, 0.13)\";\r\n\r\n// breakpoints\r\nconst xl = 1920;\r\nconst lg = 1280;\r\nconst md = 960;\r\nconst sm = 600;\r\nconst xs = 0;\r\n\r\n// spacing\r\nconst spacing = 8;\r\n\r\nconst theme = createMuiTheme({\r\n\r\n  palette: {\r\n\r\n    primary: { main: \"#00a1c5\",\r\n               light: \"#5bd5f0\"\r\n              //  dark: \"#0288D1\",\r\n              //  light: \"#B3E5FC\"\r\n\r\n      },\r\n    secondary: { main: \"#f68529\", contrastText:\"#fff\" },\r\n    common: {\r\n      black,\r\n      darkBlack\r\n    },\r\n    warning: {\r\n      light: warningLight,\r\n      main: warningMain,\r\n      dark: warningDark\r\n    },\r\n    // Used to shift a color's luminance by approximately\r\n    // two indexes within its tonal palette.\r\n    // E.g., shift from Red 500 to Red 300 or Red 700.\r\n    tonalOffset: 0.2,\r\n    background: {\r\n      default: background\r\n    },\r\n    spacing\r\n  },\r\n  breakpoints: {\r\n    // Define custom breakpoint values.\r\n    // These will apply to Material-UI components that use responsive\r\n    // breakpoints, such as `Grid` and `Hidden`. You can also use the\r\n    // theme breakpoint functions `up`, `down`, and `between` to create\r\n    // media queries for these breakpoints\r\n    values: {\r\n      xl,\r\n      lg,\r\n      md,\r\n      sm,\r\n      xs\r\n    }\r\n  },\r\n  border: {\r\n    borderColor: borderColor,\r\n    borderWidth: borderWidth\r\n  },\r\n  overrides: {\r\n    MuiExpansionPanel: {\r\n      root: {\r\n        position: \"static\"\r\n      }\r\n    },\r\n    MuiTableCell: {\r\n      root: {\r\n        paddingLeft: spacing * 2,\r\n        paddingRight: spacing * 2,\r\n        borderBottom: `${borderWidth}px solid ${borderColor}`,\r\n        [`@media (max-width:  ${sm}px)`]: {\r\n          paddingLeft: spacing,\r\n          paddingRight: spacing\r\n        }\r\n      }\r\n    },\r\n    MuiDivider: {\r\n      root: {\r\n        backgroundColor: borderColor,\r\n        height: borderWidth\r\n      }\r\n    },\r\n    MuiPrivateNotchedOutline: {\r\n      root: {\r\n        borderWidth: borderWidth\r\n      }\r\n    },\r\n    MuiListItem: {\r\n      divider: {\r\n        borderBottom: `${borderWidth}px solid ${borderColor}`\r\n      }\r\n    },\r\n    MuiDialog: {\r\n      paper: {\r\n        width: \"100%\",\r\n        maxWidth: 430,\r\n        marginLeft: spacing,\r\n        marginRight: spacing\r\n      }\r\n    },\r\n    MuiTooltip: {\r\n      tooltip: {\r\n        backgroundColor: darkBlack,\r\n        fontSize: \"0.7rem\"\r\n      }\r\n    },\r\n    MuiExpansionPanelDetails: {\r\n      root: {\r\n        [`@media (max-width:  ${sm}px)`]: {\r\n          paddingLeft: spacing,\r\n          paddingRight: spacing\r\n        }\r\n      }\r\n    }\r\n  },\r\n \r\n}, enGB);\r\n\r\nexport default responsiveFontSizes(theme);\r\n","import { withStyles } from \"@material-ui/core\";\r\n\r\nconst styles = theme => ({\r\n  \"@global\": {\r\n    /**\r\n     * Disable the focus outline, which is default on some browsers like\r\n     * chrome when focusing elements\r\n     */\r\n    \"*:focus\": {\r\n      outline: 0\r\n    },\r\n    \".text-white\": {\r\n      color: theme.palette.common.white\r\n    },\r\n    \".listItemLeftPadding\": {\r\n      paddingTop: `${theme.spacing(1.75)}px !important`,\r\n      paddingBottom: `${theme.spacing(1.75)}px !important`,\r\n      paddingLeft: `${theme.spacing(4)}px !important`,\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        paddingLeft: `${theme.spacing(4)}px !important`\r\n      },\r\n      \"@media (max-width:  420px)\": {\r\n        paddingLeft: `${theme.spacing(1)}px !important`\r\n      }\r\n    },\r\n    \".container\": {\r\n      width: \"100%\",\r\n      paddingRight: theme.spacing(4),\r\n      paddingLeft: theme.spacing(4),\r\n      marginRight: \"auto\",\r\n      marginLeft: \"auto\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        maxWidth: 540\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        maxWidth: 720\r\n      },\r\n      [theme.breakpoints.up(\"lg\")]: {\r\n        maxWidth: 1170\r\n      }\r\n    },\r\n    \".row\": {\r\n      display: \"flex\",\r\n      flexWrap: \"wrap\",\r\n      marginRight: -theme.spacing(2),\r\n      marginLeft: -theme.spacing(2)\r\n    },\r\n    \".container-fluid\": {\r\n      width: \"100%\",\r\n      paddingRight: theme.spacing(2),\r\n      paddingLeft: theme.spacing(2),\r\n      marginRight: \"auto\",\r\n      marginLeft: \"auto\",\r\n      maxWidth: 1370\r\n    },\r\n    \".lg-mg-top\": {\r\n      marginTop: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        marginTop: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        marginTop: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        marginTop: `${theme.spacing(14)}px !important`\r\n      }\r\n    },\r\n    \".lg-mg-bottom\": {\r\n      marginBottom: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        marginBottom: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        marginBottom: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        marginBottom: `${theme.spacing(14)}px !important`\r\n      }\r\n    },\r\n    \".lg-p-top\": {\r\n      paddingTop: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        paddingTop: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        paddingTop: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        paddingTop: `${theme.spacing(14)}px !important`\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nfunction globalStyles() {\r\n  return null;\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(globalStyles);\r\n","/* eslint-disable */\r\n\r\n// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'; \r\nconst GlobalState = React.createContext([{}, () => {}]); \r\nexport default GlobalState;","import Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nexport default function Copyright() {\r\n    return (\r\n      <Typography variant=\"body2\" align=\"center\">\r\n        {'Copyright © '}\r\n        <Link color=\"inherit\" href=\"#\">\r\n          Medical Express Clinic\r\n        </Link>{' '}\r\n        {new Date().getFullYear()}\r\n        {'.'}\r\n      </Typography>\r\n    );\r\n  }\r\n  ","\r\n\r\nexport const authToken = 'Basic QXp1cmXEaWFtb45kOmh1bnRlcjO='\r\n\r\nexport const backendAPI = 'https://www.travelpcrtest.com/'\r\n// export const backendAPI = 'http://localhost:9090/'\r\n\r\nexport function getGlobalPath(path){\r\n    return '/medicalexpressclinic/admin' + path\r\n    // return path\r\n}\r\n\r\nexport function getMenuIdFromGlobalPath(globalPath){\r\n    try{\r\n       \r\n        var split = globalPath.split('/')\r\n        if (split && split.length > 0)\r\n        {\r\n            return split[split.length - 1].length > 0 ?  split[split.length - 1] :  split[split.length - 2]\r\n        }\r\n        else\r\n        {\r\n            return ''\r\n        }\r\n    }\r\n    catch(err)\r\n    {\r\n        return ''\r\n    }\r\n}","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n\r\n  headers : {\r\n      'Authorization' : authToken\r\n  }\r\n});","import API from './api';\r\n\r\nexport default class UserService{\r\n\r\n    static setToken = (token) =>\r\n    {\r\n        this.token = token\r\n    }\r\n  \r\n    static signIn = (payload) =>\r\n    {\r\n        return  API.post('/api/medex/user/signin', payload)\r\n    }\r\n\r\n    static checkToken = (payload) =>\r\n    {\r\n        return  API.post('/api/medex/user/checktoken', payload)\r\n    }\r\n\r\n}\r\n","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n  headers : {\r\n      'Authorization' : authToken\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n\r\n   static payBooking = (bookingId, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getTestsTimeReport = () =>\r\n   {\r\n      axiosRetry( API, { retries: 3,  retryDelay: (retryCount) => {\r\n         return retryCount * 1000;\r\n       } });\r\n      return API.get(`/api/book/getteststimereport`);\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountAll = () =>\r\n   {\r\n      return API.get(`/api/book/getallbookingscountall`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static resendEmailsWithBookingId = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/resendemailswithbookingid?id=${bookingId}`);\r\n   }\r\n\r\n   static regenerateFilesWithBookingId  = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/regeneratefileswithbookingid?id=${bookingId}`);\r\n   }\r\n\r\n\r\n   static resendEmails  = (linkId) =>\r\n   {\r\n      return API.post(`/api/book/resendemails?id=${linkId}`);\r\n   }\r\n\r\n   static regenerateFiles  = (linkId) =>\r\n   {\r\n      return API.post(`/api/book/regeneratefiles?id=${linkId}`);\r\n   }\r\n\r\n   static matchRecords  = (bookingId, linkId) =>\r\n   {\r\n      return API.post(`/api/book/matchrecords?bookingid=${bookingId}&linkid=${linkId}`);\r\n   }\r\n\r\n   static findBestMatches = (id) =>\r\n   {\r\n      return API.get(`/api/book/getbestmatchedbookings?id=${id}`);\r\n   } \r\n\r\n   static getLinkDetails = (id) =>\r\n   {\r\n      return API.get(`/api/book/getlinkdetails?id=${id}`);\r\n   } \r\n\r\n   static getLinkDetailsWithBookingId = (id) =>\r\n   {\r\n      return API.get(`/api/book/getlinkdetailswithbookingid?id=${id}`);\r\n   } \r\n\r\n\r\n\r\n   static findBookingByRefBirthDate = (bookingRef, birthDate) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsbyrefandbirthdate?ref=${bookingRef}&birthdate=${birthDate}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getAllTRBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/book/getalltrbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getLateBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getlatebookings`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getLiveBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getlivebookings`);\r\n    }\r\n\r\n    static getCompletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getcompletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getPositiveBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getpositivebookings`);\r\n    }\r\n\r\n\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n\r\n    static getUnmatchedRecords= () =>\r\n    {\r\n       return API.get(`/api/book/getunmatchedrecords`);\r\n    }\r\n\r\n    static getUnmatchedRecordsArchived= () =>\r\n    {\r\n       return API.get(`/api/book/getunmatchedrecordsarchived`);\r\n    }\r\n\r\n    static archiveRecord = (id) =>\r\n    {\r\n       return API.post(`/api/book/archiverecord?id=${id}`);\r\n    }\r\n\r\n    static unArchiveRecord = (id) =>\r\n    {\r\n       return API.post(`/api/book/unarchiverecord?id=${id}`);\r\n    }\r\n\r\n\r\n}","import API from './api';\r\n\r\nexport default class PDFService {\r\n\r\n    static downloadCovidForm1 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform1?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadCovidForm2 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform2?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfResult = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfresult?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfCert = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfcert?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfLabReport = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdflabreport?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Button, Checkbox, FormControlLabel, Link, TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    // textAlign : \"center\",\r\n    // fontWeight : \"500\",\r\n    // margin: \"10px\",\r\n    // backgroundColor : \"#eee\",\r\n    // padding : \"10px\",\r\n    // borderRadius : \"4px\"\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#555\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\"\r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\nexport default function PersonsBox() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [expanded, setExpanded] = React.useState('panel0');\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [gender, setGender] = React.useState('');\r\n    const [title, setTitle] = React.useState('');\r\n    const [forename, setForename] = React.useState('');\r\n    const [surname, setSurnme] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [dob, setDOB] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [postCode, setPostCode] = React.useState('');\r\n    const [address, setAddress] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n    const [passport, setPassport] = React.useState('');\r\n    const [passport2, setPassport2] = React.useState('');\r\n    const [certificate, setCertificate] = React.useState(false);\r\n    const [antiBodyTest, setAntiBodyTest] = React.useState(false);\r\n\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n    }\r\n\r\n    const genderChanged = (event) =>\r\n    {\r\n      setGender(event.target.value);\r\n    }\r\n\r\n    const titleChanged = (event) =>\r\n    {\r\n      setTitle(event.target.value);\r\n    }\r\n\r\n    const forenameChanged = (event) =>\r\n    {\r\n      setForename(event.target.value);\r\n    }\r\n\r\n    const surnameChanged = (event) =>\r\n    {\r\n      setSurnme(event.target.value);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n    }\r\n\r\n    const dobChanged = (event) =>\r\n    {\r\n      setDOB(event.target.value);\r\n      setValidationError({...validationError, dobError : false});\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n    }\r\n\r\n    const postCodeChanged = (event) =>\r\n    {\r\n      setPostCode(event.target.value);\r\n    }\r\n\r\n    const addressChanged = (event) =>\r\n    {\r\n      setAddress(event.target.value);\r\n    }\r\n\r\n    const passportChanged = (event) =>\r\n    {\r\n      setPassport(event.target.value);\r\n    }\r\n\r\n    const passport2Changed = (event) =>\r\n    {\r\n      setPassport2(event.target.value);\r\n    }\r\n\r\n    const certificateChanged = (event) =>\r\n    {\r\n      setCertificate(event.target.checked);\r\n    }\r\n\r\n    const antiBodyTestChanged = (event) =>\r\n    {\r\n      setAntiBodyTest(event.target.checked);\r\n    }\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n      setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }else if (status === 'sample_taken')\r\n      {\r\n        return (\r\n          <span  className={classes.SampleTakenLabel}> Sample Taken </span>\r\n        );\r\n    \r\n      }else if (status === 'report_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportSentLabel}> Report Sent </span>\r\n        );\r\n    \r\n      }else if (status === 'report_cert_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportCertSentLabel}> {`Report & Certificate Sent`} </span>\r\n        );\r\n      }\r\n      else if (status === 'positive')\r\n      {\r\n        return (\r\n          <span  className={classes.PositiveLabel}> {`POSITIVE`} </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n   const downloadForm1 = (id) =>\r\n   {\r\n       PDFService.downloadCovidForm1(id).then( (res) => \r\n       {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n   }\r\n\r\n   const downloadForm2 = (id) =>\r\n   {\r\n        PDFService.downloadCovidForm2(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadLabResults = (id) =>\r\n   {\r\n        PDFService.downloadPdfResult(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadCertificate = (id) =>\r\n   {\r\n        PDFService.downloadPdfCert(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setForename(person.forenameCapital);\r\n         setSurnme(person.surnameCapital);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime.toUpperCase());\r\n         setGender(person.gender.toUpperCase());\r\n         setTitle(person.title.toUpperCase());\r\n         setEmail(person.email.toUpperCase());\r\n         setDOB(FormatDateFromString(person.birthDate));\r\n         setTel(person.phone.toUpperCase());\r\n         setPostCode(person.postCode.toUpperCase());\r\n         setAddress(person.address.toUpperCase());\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber)\r\n         {\r\n           setPassport(person.passportNumber.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber2)\r\n         {\r\n           setPassport2(person.passportNumber2.toUpperCase());\r\n         }\r\n        \r\n         setCertificate(person.certificate);\r\n         setAntiBodyTest(person.antiBodyTest);\r\n\r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.certificate = certificate;\r\n          booking.antiBodyTest = antiBodyTest;\r\n          booking.gender = gender;\r\n          booking.title = title;\r\n          booking.birthDate = RevertFormatDateFromString(dob);\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.postCode = postCode;\r\n          booking.address = address;\r\n          booking.passportNumber = passport;\r\n          booking.passportNumber2 = passport2;\r\n          booking.forename = forename;\r\n          booking.surname = surname;\r\n          booking.notes = notes;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateDate(booking.birthDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, dobError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const changeBackToBookingMade = (event, id) =>\r\n   {\r\n     setSaving(true);\r\n     bookingService.changeBackToBookingMade(id).then(res => {\r\n       setSaving(false);\r\n       setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n     }).catch(err => {\r\n       console.log(err);\r\n       setSaving(false);\r\n     })\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n          \r\n      <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"stretch\">\r\n          <div className={classes.title}> Following Records Found :</div>\r\n\r\n          {state.foundRecords.map((person,index) => (\r\n   \r\n                <Grid item xs={12} md={12} key={`panel${index}`}>\r\n                <div className={classes.root}>\r\n                    <Accordion className={person.deleted ? classes.AccordionDeleted : classes.Accordion} expanded={expanded === `panel${index}`} onChange={handleChange(`panel${index}`)}>\r\n                    <AccordionSummary className={person.deleted ? classes.lineThrough : ''}\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls=\"panel1bh-content\"\r\n                        id={`panel${index}bh-header`}\r\n                    >\r\n                      {person.deleted && (\r\n                          <Tooltip  title=\"This record has been deleted.\">\r\n                            <DeleteIcon  style={{padding: 0, margin: 0,  color: \"#fff\", fontSize: 25 }}/>\r\n                        </Tooltip>\r\n                      )}\r\n\r\n                        <Typography className={classes.heading}> {`#${index+1}`} </Typography>\r\n                        <Typography className={classes.secondaryHeading}>\r\n                        {`${person.forenameCapital} ${person.surnameCapital}`}\r\n                        </Typography>\r\n                    </AccordionSummary>\r\n\r\n                    <AccordionDetails className={classes.infoDetails}>\r\n                        \r\n\r\n\r\n                        <ul className={classes.ul}>\r\n\r\n                        {/* Restore Functionality ******************************************* */}  \r\n                        <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"500\", paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\" , color:\"#fff\"}}>\r\n                                Are you sure you want to restore this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={!person.deleted || (restoreMode.restore && restoreMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleRestoreModeChanged(true, person)}}\r\n                                    className={classes.RestoreButton}\r\n                                 >\r\n                                   Restore This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Restore this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n\r\n                           {/*  ******************************************************************* */}\r\n\r\n                              {/* Edit Functionality ******************************************* */}\r\n\r\n                            <li hidden={person.deleted || deleteMode.delete || (editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleEditModeChanged(true, person)}}\r\n                                    className={classes.EditButton}\r\n                                 >\r\n                                    Edit Booking Info\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    Save Changes\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                            \r\n                            {/* ****************************************************************************************** */}\r\n\r\n\r\n                            {/* Delete Functionality ******************************************* */}\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"600\",  paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\"}}>\r\n                                Are you sure you want to delete this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted ||  editMode.edit || (deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleDeleteModeChanged(true, person)}}\r\n                                    className={classes.DeleteButton}\r\n                                 >\r\n                                   Delete This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Delete this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                                 \r\n                            {/* ****************************************************************************************** */}\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED DATE</span> \r\n                            \r\n\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                   {FormatDateFromString(person.bookingDate) }\r\n                                  </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingDateError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingDate}\r\n                                                      onChange = {bookingDateChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED TIME</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.bookingTime.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingTimeError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingTime}\r\n                                                      onChange = {bookingTimeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>GENDER</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.gender?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={gender}\r\n                                                      onChange = {genderChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>TITLE</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.title?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={title}\r\n                                                      onChange = {titleChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                             \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>FORENAME</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.forenameCapital}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={forename}\r\n                                                      onChange = {forenameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SURNAME</span>\r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.surnameCapital}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={surname}\r\n                                                      onChange = {surnameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>EMAIL</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.email?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={email}\r\n                                                      onChange = {emailChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>D.O.B</span>\r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                            {FormatDateFromString(person.birthDate) }\r\n                                          </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.dobError} \r\n                                                      className={classes.TextBox} \r\n                                                      value={dob}\r\n                                                      onChange = {dobChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TEL</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.phone?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={tel}\r\n                                                      onChange = {telChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>POST CODE</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.postCode?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={postCode}\r\n                                                      onChange = {postCodeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>ADDRESS</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.address?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={address}\r\n                                                      onChange = {addressChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>PASSPORT NO.</span>\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.passportNumber?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={passport}\r\n                                                      onChange = {passportChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SECOND PASSPORT NO.</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.passportNumber2?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={passport2}\r\n                                                      onChange = {passport2Changed}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>REQUEST FOR CERTIFICATE</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.certificate ? ( <CheckIcon className={classes.checkIcon}/> ) :  <CloseIcon className={classes.closeIcon}/> }</span>\r\n                                <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                    <FormControlLabel className={classes.formControl} \r\n                                          control={<Checkbox className={classes.formControl}  color=\"secondary\" name=\"certificate\" checked={certificate} onChange={certificateChanged} />}\r\n                                          label=''\r\n                                        />\r\n                                </span>    \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>REQUEST FOR ANTIBODY TEST</span>\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.antiBodyTest ? <CheckIcon className={classes.checkIcon}/> :  <CloseIcon className={classes.closeIcon}/> }</span>  \r\n                                <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                    <FormControlLabel className={classes.formControl} \r\n                                          control={<Checkbox className={classes.formControl}  color=\"secondary\" name=\"certificate\" checked={antiBodyTest} onChange={antiBodyTestChanged} />}\r\n                                          label=''\r\n                                        />\r\n                                </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>STATUS</span> \r\n                                {getStatusLabel(person.status)} \r\n                                \r\n                                {person.status === \"sample_taken\" &&\r\n                                          !(\r\n                                            editMode.edit && editMode.person._id === person._id\r\n                                          ) && (\r\n                                            <Button \r\n                                                  variant=\"outlined\"\r\n                                                  color=\"primary\"\r\n                                                  disabled = {saving}\r\n                                                  onClick = {event => changeBackToBookingMade(event,person._id)}\r\n\r\n                                                    >\r\n                                              Change Back To Booking Made\r\n                                            </Button>\r\n                                          )}\r\n\r\n                            </li>\r\n      \r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TOTAL CHARGES</span> <span className={calculatePrice(person) <= 199 ? classes.infoDataCharges : classes.infoDataChargesHigher}>{`£${calculatePrice(person)}`}</span>  \r\n                            </li>\r\n\r\n                            <li  hidden={person.deleted} >\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadForm1(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Registration Form\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li  hidden={person.deleted}>\r\n                                  <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadForm2(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm2(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                    >\r\n                                    Download Lab Form\r\n                                 </Button>\r\n                            </li>\r\n\r\n                            <li hidden={ person.deleted || (person.status !== 'report_sent' && person.status !== 'report_cert_sent') }>\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadLabResults(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Lab Results\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted || person.status !== 'report_cert_sent'}>\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadCertificate(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Certificate\r\n                                </Button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </AccordionDetails>\r\n                    </Accordion>\r\n                </div>\r\n            </Grid> \r\n          ))}\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport PropTypes from 'prop-types';\r\nimport MaskedInput from 'react-text-mask';\r\nimport { FormControl, Grid, Input, InputLabel } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\nimport PersonsBox from './PersonsBox';\r\n\r\n\r\nconst isBoolean = (param) => typeof(param) === \"boolean\"\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n    const [focus, setFocus] = React.useState(initialFocus)\r\n    const setFocusWithTrueDefault = (param) => setFocus(isBoolean(param)? param : true)\r\n    return ([\r\n        setFocusWithTrueDefault, {\r\n            autoFocus: focus,\r\n            key: `${id}${focus}`,\r\n            onFocus: () => setFocus(true),\r\n            onBlur: () => setFocus(false),\r\n        },\r\n    ])\r\n}\r\n\r\n\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n  \r\n    return (\r\n      <MaskedInput\r\n        {...other}\r\n        ref={(ref) => {\r\n          inputRef(ref ? ref.inputElement : null);\r\n        }}\r\n        mask={[/\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/]}\r\n        // placeholderChar={'\\u2000'}\r\n        showMask\r\n      />\r\n    );\r\n  }\r\n  \r\n  TextMaskCustom.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    root: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n        marginTop: \"20px\"\r\n      },  \r\n\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n\r\n    Find: {\r\n        width: \"80px\"\r\n    },\r\n\r\n    Clear:{\r\n        marginRight: \"20px\"\r\n    },\r\n\r\n    title:{\r\n        marginTop : \"20px\"\r\n    },\r\n\r\n    TextBox:{\r\n        marginTop: \"30px\",\r\n        \"& > *\" :\r\n        {\r\n            textAlign: \"center\"\r\n        },\r\n  \r\n    },\r\n\r\n    TextField:{\r\n\r\n    },\r\n\r\n    NoRecordsFound:{\r\n        marginTop: \"20px\",\r\n        color: \"red\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"14px\",\r\n    },\r\n\r\n    PersonsBox:{\r\n        marginTop : \"20px\",\r\n        marginBottom: \"50px\"\r\n    }\r\n\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  \r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n//   useEffect( () =>\r\n//   {\r\n//      findRecords();\r\n//   }, [state.findRecords]);\r\n\r\n useEffect ( () => {\r\n    setState(state => ({...state, foundRecords : []}));\r\n }, [])\r\n\r\n  useEffect( () => {\r\n    BookService.getBookingsByRef(state.ref).then( (res)=>\r\n    {\r\n        if (res.data.length > 0)\r\n        {\r\n            setState(state => ({...state, foundRecords : res.data}));\r\n        }\r\n    });\r\n    }, [state.RefreshPersonInfo]);\r\n\r\n    const handleChange = (event) =>\r\n    {\r\n        setState(state => ({...state, ref : event.target.value}));\r\n        setState(state => ({...state, refError : false})); \r\n    }\r\n\r\n    const clearField = () =>\r\n    {\r\n        setState(state => ({...state, refError : false})); \r\n        setState(state => ({...state, ref : '___-___-___'}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n        setFocus();\r\n    }\r\n\r\n    const findRecords = () =>\r\n    {\r\n        if (!state.ref || state.ref.indexOf('_') >= 0)\r\n        {\r\n            setState(state => ({...state, refError : true}));  \r\n            return;\r\n        }\r\n\r\n        setState(state => ({...state, submiting : true}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n\r\n        BookService.getBookingsByRef(state.ref).then( (res)=>\r\n        {\r\n            setState(state => ({...state, submiting : false}));\r\n            if (res.data.length > 0)\r\n            {\r\n                setState(state => ({...state, foundRecords : res.data}));\r\n            }\r\n            else\r\n            {\r\n                setState(state => ({...state, foundRecords : null}));\r\n            }\r\n            \r\n            console.log(res.data);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setState(state => ({...state, submiting : false}));\r\n        });\r\n    }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <CssBaseline />\r\n        <div className={classes.title}>\r\n            <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n                Find Booking Appoinments\r\n            </Typography>  \r\n        </div> \r\n\r\n        <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"center\">\r\n\r\n        <Grid item xs={12} md={12}>\r\n            <FormControl className={classes.TextBox}>\r\n                <TextField\r\n                    {...focusProps}\r\n                    autoFocus \r\n                    pattern=\"[0-9]*\"\r\n                    error = {state.refError ? true : false} \r\n                    value = {state.ref}\r\n                    className = {classes.TextField}\r\n                    width = \"50px\"\r\n                    onChange={handleChange}\r\n                    label=\"Reference No.\"\r\n                    helperText=\"Enter Your 9-digits Reference No.\"\r\n                    name=\"refNo\"\r\n                    id=\"refNo\"\r\n                    variant=\"outlined\"\r\n                    \r\n                    size=\"medium\"\r\n                    margin=\"normal\"\r\n                    fullWidth = {true}\r\n                    InputProps={{\r\n                        inputComponent: TextMaskCustom,\r\n                        style: { textAlign: 'center', fontSize:\"24px\", width: \"210px\", paddingLeft: \"20px\" }\r\n                    }}\r\n\r\n                    onKeyPress= {event => {\r\n                        if (event.key === 'Enter') {\r\n                            findRecords();\r\n                        }\r\n                      }}\r\n                />         \r\n            </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n               \r\n                <Button\r\n                    disabled = {state.submiting}\r\n                    color=\"default\"\r\n                    onClick = {clearField}\r\n                    onTouchTap = {clearField}\r\n                    className={classes.Clear}\r\n                >\r\n                    Clear \r\n                </Button>  \r\n            \r\n                <Button\r\n                    type=\"button\"\r\n                    disabled = {state.submiting}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = {findRecords}\r\n                    onTouchTap = {findRecords}\r\n                    className={classes.Find}\r\n                >\r\n                    Find \r\n                </Button>  \r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n\r\n                    \r\n\r\n            {state.foundRecords && state.foundRecords.length > 0 && (\r\n                <React.Fragment>\r\n\r\n                    <div className={classes.PersonsBox}>\r\n                          <PersonsBox/>\r\n                    </div>\r\n                    \r\n\r\n\r\n                </React.Fragment>\r\n            )}   \r\n\r\n            {!state.foundRecords && (\r\n                <React.Fragment>\r\n\r\n                <div className={classes.root}>\r\n                    <Alert severity=\"error\"> <strong>No Records Found !</strong> <br/> Please check you reference number again.</Alert>\r\n                </div> \r\n                   \r\n                </React.Fragment>\r\n            )}\r\n\r\n        </Grid>\r\n        \r\n        \r\n        </Grid>\r\n        \r\n    </React.Fragment>\r\n   \r\n  );\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  Link,\r\n  makeStyles,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function ResendEmailsDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [sending, setSending] = React.useState(false);\r\n  const [sent, setSent] = React.useState(false);\r\n\r\n  const [sendJustToPCR, setSendJustToPCR] = React.useState(false);\r\n\r\n  const [sendingStatus, setSendingStatus] = React.useState(\"\");\r\n\r\n  const [sendingProgress, setSendingProgress] = React.useState(10);\r\n\r\n  const [error, setError] = React.useState(false);\r\n\r\n  const getProgress = (status) => {\r\n    console.log(`status : ${status}`);\r\n\r\n    if (status === \"downloadFailed\") return 10;\r\n    else if (status === \"downloading\") return 30;\r\n    else if (status === \"downloadSuccess\") return 70;\r\n    else if (status === \"sent\") return 100;\r\n    else return 0;\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSending(false);\r\n    setSent(false);\r\n    setError(false);\r\n    clearInterval(interval);\r\n    props.handleClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSendingProgress((prevProgress) =>\r\n      prevProgress >= 100 ? 100 : getProgress(sendingStatus)\r\n    );\r\n  }, [sendingStatus]);\r\n\r\n  const resendFilesClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus(\"downloadFailed\");\r\n    setSendJustToPCR(true);\r\n\r\n    BookService.regenerateFilesWithBookingId(props.booking._id)\r\n      .then((res) => {\r\n        interval = setInterval(() => {\r\n          BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n            (res) => {\r\n              if (res.data.status === \"OK\") {\r\n                setSendingStatus(res.data.link.status);\r\n\r\n                if (res.data.link.status === \"sent\") {\r\n                  setSending(false);\r\n                  setSent(true);\r\n                  clearInterval(interval);\r\n                }\r\n              } else if (res.data.status === \"FAILED\") {\r\n                setSending(false);\r\n                setSent(false);\r\n                clearInterval(interval);\r\n                setError(true);\r\n              }\r\n            }\r\n          );\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n          setError(true);\r\n          clearInterval(interval);\r\n        }, 60000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSending(false);\r\n      });\r\n  };\r\n\r\n  const resendEmailsClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus(\"downloadFailed\");\r\n\r\n    BookService.resendEmailsWithBookingId(props.booking._id)\r\n      .then((res) => {\r\n        interval = setInterval(() => {\r\n          BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n            (res) => {\r\n              if (res.data.status === \"OK\") {\r\n                setSendingStatus(res.data.link.status);\r\n\r\n                if (res.data.link.status === \"sent\") {\r\n                  setSending(false);\r\n                  setSent(true);\r\n                  clearInterval(interval);\r\n                }\r\n              } else if (res.data.status === \"FAILED\") {\r\n                setSending(false);\r\n                setSent(false);\r\n                clearInterval(interval);\r\n                setError(true);\r\n              }\r\n            }\r\n          );\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n          setError(true);\r\n          clearInterval(interval);\r\n        }, 60000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSending(false);\r\n      });\r\n  };\r\n\r\n  const cancelResendEmailsClicked = (event) => {\r\n    props.handleClose();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"md\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <SendIcon style={{ color: \"#2f942e\", fontSize: \"2rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#2f942e\",\r\n                      paddingBottom: \"12px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    RESEND EMAILS{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"230px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  spacing={1}\r\n                  alignItems=\"center\"\r\n                >\r\n                  {!sent && !sending && (\r\n                    <React.Fragment>\r\n                      <Grid item>\r\n                        <div\r\n                          style={{\r\n                            paddingTop: \"5px\",\r\n                            fontSize: \"1rem\",\r\n                            fontWeight: \"500\",\r\n                            color: \"#555\",\r\n                          }}\r\n                        >\r\n                          Do you want to Resend the LAB Report{\" \"}\r\n                          {props.booking.certificate ? \" and Certificate\" : \"\"}{\" \"}\r\n                          Now?\r\n                        </div>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.resendButton}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={resendEmailsClicked}\r\n                        >\r\n                          YES ! RESEND THE EMAILS\r\n                        </Button>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.cancelButton}\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          onClick={cancelResendEmailsClicked}\r\n                        >\r\n                          NO ! NOT NOW\r\n                        </Button>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.resendFilesButton}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={resendFilesClicked}\r\n                        >\r\n                          Just Generate The Files and send to\r\n                          pcrresults@medicalexpressclinic.co.uk\r\n                        </Button>\r\n                      </Grid>\r\n                    </React.Fragment>\r\n                  )}\r\n\r\n                  {error && !sending && !sent && (\r\n                    <Grid item>\r\n                      <Alert\r\n                        style={{\r\n                          marginTop: \"10px\",\r\n                          paddingLeft: \"50px\",\r\n                          paddingRight: \"50px\",\r\n                        }}\r\n                        severity=\"error\"\r\n                      >\r\n                        Error! — Something is wrong with this record!\r\n                      </Alert>\r\n                    </Grid>\r\n                  )}\r\n\r\n                  {(sending || sent) && (\r\n                    <Grid item>\r\n                      <div\r\n                        style={{\r\n                          paddingTop: \"50px\",\r\n                          color: \"#2f942e\",\r\n                          fontWeight: \"600\",\r\n                          fontSize: \"1rem\",\r\n                        }}\r\n                      >\r\n                        {sending && !sent && \"Sending ...\"}\r\n\r\n                        {sent && !sendJustToPCR && (\r\n                          <Alert\r\n                            style={{\r\n                              marginTop: \"10px\",\r\n                              paddingLeft: \"50px\",\r\n                              paddingRight: \"50px\",\r\n                            }}\r\n                            severity=\"success\"\r\n                          >\r\n                            Success! — The LAB Report{\" \"}\r\n                            {props.booking.certificate\r\n                              ? \" and Certificate \"\r\n                              : \" \"}{\" \"}\r\n                            Successfully Sent.\r\n                          </Alert>\r\n                        )}\r\n\r\n                        {sent && sendJustToPCR && (\r\n                          <Alert\r\n                            style={{\r\n                              marginTop: \"10px\",\r\n                              paddingLeft: \"50px\",\r\n                              paddingRight: \"50px\",\r\n                            }}\r\n                            severity=\"success\"\r\n                          >\r\n                            Success! — The LAB Report{\" \"}\r\n                            {props.booking.certificate\r\n                              ? \" and Certificate \"\r\n                              : \" \"}{\" \"}\r\n                            Successfully Sent Just to\r\n                            pcrresults@medicalexpressclinic.co.uk .\r\n                          </Alert>\r\n                        )}\r\n                      </div>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                {(sending || sent) && (\r\n                  <React.Fragment>\r\n                    <div\r\n                      style={{\r\n                        marginTop: \"10px\",\r\n                        width: \"50%\",\r\n                        marginLeft: \"27%\",\r\n                      }}\r\n                    >\r\n                      <LinearProgressWithLabel\r\n                        variant=\"determinate\"\r\n                        color=\"primary\"\r\n                        value={sendingProgress}\r\n                      />\r\n                    </div>\r\n\r\n                    <div\r\n                      style={{\r\n                        paddingTop: \"30px\",\r\n                        color: \"#2f942e\",\r\n                        fontWeight: \"600\",\r\n                        fontSize: \"1rem\",\r\n                        marginLeft: \"45%\",\r\n                      }}\r\n                    >\r\n                      {sending && !sent && \"PLEASE WAIT ...\"}\r\n                    </div>\r\n                  </React.Fragment>\r\n                )}\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, {useEffect, useRef, useState} from 'react';\r\nimport BookService from './services/BookService';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Backdrop, Button, Checkbox, CircularProgress, Divider, FormControlLabel, Grid, InputLabel, Link, makeStyles, MenuItem, Select, TextField, Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\n\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport { corporates } from './Corporates';\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  archiveButton: {\r\n\r\n  },\r\n\r\n  smartMatchButton: {\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    marginRight : \"10px\"\r\n    // padding: \"10px\"  \r\n  },\r\n\r\n  infoTitle:  {\r\n    fontWeight: \"400\"\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\"\r\n  },\r\n\r\n  matchButton:\r\n  {\r\n    marginTop: \"30px\",\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendButton:\r\n  {\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendFilesButton:{\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  cancelButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"90px\",\r\n    paddingRight: \"90px\"   \r\n  },\r\n  \r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n  \r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\" //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: '#2f942e',\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography style={{fontWeight:\"800\", color :  \"#5e855e\"  }} variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value,\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default function PayDialog(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n  const [paymentMethod, setPaymentMethod] = useState('credit card');\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const paymentMethodChanged = (event) =>\r\n  {\r\n    setPaymentMethod(event.target.value);\r\n  }\r\n\r\n  const handleClose = () =>\r\n  {\r\n      if (saving)\r\n        return;\r\n\r\n      props.handleClose();  \r\n      setPaymentMethod('credit card');\r\n      setCorporate(corporates[0]);\r\n      setSaving(false);\r\n  }\r\n\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n\r\n  const payClicked = async () =>\r\n  {\r\n    setSaving(true);\r\n\r\n    try\r\n    {\r\n         await BookService.payBooking(props.booking._id,paymentMethod, paymentMethod === 'corporate' ? corporate : '');\r\n         setSaving(false);\r\n         setState(state => ({...state, bookingPayChanged : !state.bookingPayChanged ? true : false}));\r\n         handleClose();\r\n    }\r\n    catch(err)\r\n    {\r\n        console.error(err);\r\n        setSaving(false);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n        {props.booking && ( \r\n\r\n                <React.Fragment>\r\n<Dialog\r\nmaxWidth=\"800px\"\r\nopen={props.open}\r\nonClose={handleClose}\r\nPaperComponent={PaperComponent}\r\naria-labelledby=\"form-dialog-title\"\r\n>\r\n<DialogTitle id=\"draggable-dialog-title\">\r\n  <Grid\r\n    container\r\n    spacing={2}\r\n    direction=\"row\"\r\n    justify=\"center\"\r\n    alignItems=\"center\"\r\n  >\r\n    <Grid item>\r\n      <CreditCardIcon\r\n        style={{ color: \"#f50057\", fontSize: \"3rem\" }}\r\n      />\r\n    </Grid>\r\n\r\n    <Grid item>\r\n      <div\r\n        style={{\r\n          color: \"#f50057\",\r\n          paddingBottom: \"10px\",\r\n          fontWeight: \"800\",\r\n        }}\r\n      >\r\n        {\" \"}\r\n        PAY the CHARGE{\" \"}\r\n      </div>\r\n    </Grid>\r\n  </Grid>\r\n\r\n  <Divider />\r\n</DialogTitle>\r\n<DialogContent>\r\n  <div\r\n    style={{\r\n      height: \"270px\",\r\n    \r\n    }}\r\n  >\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          justify=\"space-between\"\r\n          spacing = {2}\r\n          alignItems=\"flex-start\"\r\n        >\r\n            <Grid item>\r\n               <div style={{fontSize: \"17px\"}}> How do you want to pay? </div> \r\n            </Grid>\r\n\r\n            <Grid item>\r\n      \r\n            <FormControl component=\"fieldset\">\r\n                \r\n                <RadioGroup aria-label=\"paymentMethod\" name=\"paymentMethod\" value={paymentMethod} onChange={paymentMethodChanged}>\r\n                    <FormControlLabel value=\"credit card\" control={<Radio />} label=\"Credit Card\" />\r\n                    <FormControlLabel value=\"cash\" control={<Radio />} label=\"Cash\" />\r\n                    <FormControlLabel value=\"corporate\" control={<Radio />} label=\"Corporate\" />\r\n                </RadioGroup>\r\n\r\n                { paymentMethod === 'corporate' && (\r\n\r\n                        <FormControl style={{marginTop: \"10px\"}} className={classes.formControl}>\r\n                        <Select\r\n                            labelId=\"select-corporate\"\r\n                            id=\"select-corporate-id\"\r\n                            value={corporate}\r\n                            onChange={corporateChanged}\r\n                        >\r\n                        {\r\n                        corporates.map(element => (\r\n                                    <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                        ))\r\n                        }     \r\n\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                )}\r\n              \r\n\r\n                </FormControl>\r\n            </Grid>\r\n\r\n\r\n        </Grid>\r\n\r\n        <Grid item>\r\n           \r\n    </Grid>\r\n\r\n    <div style={{position:\"absolute\", bottom:\"20px\", right:\"20px\"}}>\r\n            <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"flex-end\"\r\n                alignItems=\"center\"\r\n                spacing = {1}\r\n            >\r\n               \r\n                <Grid item>\r\n                    <Button onClick={handleClose}  style= {{width : '100px'}} disabled={saving}>\r\n                        back\r\n                    </Button>\r\n                        \r\n                </Grid>\r\n                <Grid item>\r\n                    <Button \r\n                        onClick = {payClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style= {{width : '100px'}}\r\n                        disabled={saving}\r\n                    >\r\n                        Pay\r\n                    </Button>\r\n                </Grid>  \r\n          </Grid>\r\n\r\n    </div>\r\n\r\n    \r\n  </div>\r\n\r\n             <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n\r\n</DialogContent>\r\n</Dialog>\r\n\r\n\r\n\r\n\r\n</React.Fragment>\r\n\r\n\r\n        )}\r\n  \r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  DialogActions,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  Link,\r\n  makeStyles,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport dateformat from \"dateformat\";\r\n\r\nconst addMinutes = (date, minutes) => {\r\n  date = new Date(date);\r\n  return new Date(date.getTime() + minutes * 60 * 1000);\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  itemTitle: {\r\n    fontWeight: \"500\",\r\n    color: \"#555\",\r\n  },\r\n\r\n  itemData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"600\",\r\n    color: \"#127512\",\r\n  },\r\n}));\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function TimeStampDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [linkTimeStamp, setLinkTimeStamp] = React.useState(null);\r\n\r\n  const handleClose = () => {\r\n    setLinkTimeStamp(null);\r\n\r\n    props.handleClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      if (props.booking.filename && props.booking.filename.length > 0) {\r\n        BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n          (res) => {\r\n            if (res.data.status === \"OK\") {\r\n              setLinkTimeStamp(res.data.link.timeStamp);\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }, [props.booking]);\r\n\r\n  const getDateFromBooking = (booking) => {\r\n    let date = new Date(booking.bookingDate);\r\n    date.setHours(booking.bookingTimeNormalized.substr(0, 2));\r\n    date.setMinutes(booking.bookingTimeNormalized.substr(3, 2));\r\n    date.setSeconds(0);\r\n    date.setMilliseconds(0);\r\n    return date;\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"sm\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <HistoryIcon style={{ color: \"#f50057\", fontSize: \"2rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"12px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    Audit Trail{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"370px\",\r\n              \r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"flex-start\"\r\n                  spacing={4}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      PATIENT BOOKING TIMESTAMP :{\" \"}\r\n                    </span>\r\n                    <span className={classes.itemData}>\r\n                      {\" \"}\r\n                      {dateformat(props.booking.timeStamp, \"isoDateTime\")}{\" \"}\r\n                    </span>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      BOOKED DATE AND TIME :{\" \"}\r\n                    </span>\r\n                    <span className={classes.itemData}>\r\n                      {dateformat(\r\n                        getDateFromBooking(props.booking),\r\n                        \"isoDateTime\"\r\n                      )}\r\n                    </span>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP ATTENDED :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          props.booking.samplingTimeStamp,\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - SAMPLE TAKEN :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(props.booking.samplingTimeStamp, 5),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - COLLECTED BY COURIER :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(props.booking.samplingTimeStamp, 35),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - RESULTS RECEIVED :{\" \"}\r\n                    </span>\r\n                    {linkTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(linkTimeStamp, \"isoDateTime\")}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - SENT TO PATIENT :{\" \"}\r\n                    </span>\r\n                    {linkTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(linkTimeStamp, 5),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleClose} color=\"default\">\r\n                Back\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","\r\n\r\nexport const CalendarColors = {\r\n    PCR_COLOR : \"#4faef7\",\r\n    GYNAE_COLOR : \"#e83caf\",\r\n    GP_COLOR :  \"#ff4f14\",\r\n    STD_COLOR : \"#d6733a\"\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Button, Checkbox, DialogActions, DialogContentText, FormControlLabel, IconButton,  TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Slide from '@material-ui/core/Slide'  \r\n\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport BookService from './services/BookService';\r\n\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\nimport ResendEmailsDialog from './ResendEmailsDialog';\r\nimport PayDialog from './PayDialog';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport UndoIcon from '@material-ui/icons/Undo';\r\n\r\nimport HistoryIcon from '@material-ui/icons/History';\r\n\r\n\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport TimeStampDialog from './TimeStampDialog';\r\nimport { CalendarColors } from '../Admin/calendar-admin/colors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n  ResendEmailsButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  PayButton:\r\n  {\r\n    marginLeft : \"83px\",\r\n    paddingLeft: \"30px\",\r\n    paddingRight: \"30px\"   \r\n  },\r\n\r\n  PayLabel:\r\n  {\r\n    marginLeft : \"20px\",\r\n    \r\n    color : \"#2f942e\",\r\n    fontWeight : \"500\",\r\n    textAlign: 'center'\r\n\r\n  },\r\n\r\n\r\n\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#eee\",\r\n    color: \"#333\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\"\r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  checkIconSmall:{\r\n    color: \"green\",\r\n    paddingTop: \"5px\"   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#alert-dialog-slide-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default function BookingDialog(props) {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [copied, setCopied] = useState(false);\r\n  \r\n    const [openResendDialog, setOpenResendDialog] = React.useState(false);\r\n    const [openPayDialog, setOpenPayDialog] = React.useState(false);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [gender, setGender] = React.useState('');\r\n    const [title, setTitle] = React.useState('');\r\n    const [forename, setForename] = React.useState('');\r\n    const [surname, setSurnme] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [dob, setDOB] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [postCode, setPostCode] = React.useState('');\r\n    const [address, setAddress] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n    const [passport, setPassport] = React.useState('');\r\n    const [passport2, setPassport2] = React.useState('');\r\n    const [certificate, setCertificate] = React.useState(false);\r\n    const [antiBodyTest, setAntiBodyTest] = React.useState(false);\r\n\r\n    const [refreshData, setRefreshData] = React.useState(false);\r\n\r\n    const [booking, setBooking] = React.useState(null);\r\n\r\n    const [recordChanged, setRecordChanged] = React.useState(false);\r\n\r\n    const [fieldChanged, setFieldChanged] = React.useState(false);\r\n\r\n    const [openUndoPayDialog, setOpenUndoPayDialog] = React.useState(false);\r\n\r\n    const [openTimeStampDialog, setOpenTimeStampDialog] = React.useState(false);\r\n\r\n    const handleCloseTimeStampDialog = () =>\r\n    {\r\n      setOpenTimeStampDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    const handleCloseUndoPayDialog = () =>\r\n    {\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n\r\n    const handleCloseResendDialog = () =>\r\n    {\r\n      setOpenResendDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    const handleClosePayDialog = () =>\r\n    {\r\n      setOpenPayDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    useEffect( () => {\r\n\r\n      if (booking)\r\n      {\r\n        const isChanged = (             \r\n           bookingDate !== FormatDateFromString(booking.bookingDate) \r\n        || bookingTime !== booking.bookingTime\r\n        || gender !== booking.gender\r\n        || forename !== booking.forenameCapital\r\n        || surname !== booking.surnameCapital\r\n        || title !== booking.title\r\n        || email !== booking.email\r\n        || dob !== FormatDateFromString(booking.birthDate)\r\n        || tel !== booking.phone\r\n        || postCode !== booking.postCode\r\n        || address !== booking.address\r\n        || passport !== booking.passportNumber\r\n        || passport2 !== booking.passportNumber2\r\n        || certificate !== booking.certificate\r\n        || antiBodyTest !== booking.antiBodyTest\r\n        );\r\n\r\n        setRecordChanged(isChanged);\r\n\r\n  \r\n\r\n      }\r\n    }, [fieldChanged]);\r\n\r\n    useEffect( () => {\r\n      if (!props.open)\r\n      {\r\n        setTimeout(() => {\r\n          setEditMode({edit: false, person: null});\r\n          setRecordChanged(false);\r\n        }, 500);\r\n       \r\n      }\r\n    }, [props.open])\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const genderChanged = (event) =>\r\n    {\r\n      setGender(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const titleChanged = (event) =>\r\n    {\r\n      setTitle(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const forenameChanged = (event) =>\r\n    {\r\n      setForename(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const surnameChanged = (event) =>\r\n    {\r\n      setSurnme(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const dobChanged = (event) =>\r\n    {\r\n      setDOB(event.target.value);\r\n      setValidationError({...validationError, dobError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const postCodeChanged = (event) =>\r\n    {\r\n      setPostCode(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const addressChanged = (event) =>\r\n    {\r\n      setAddress(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const passportChanged = (event) =>\r\n    {\r\n      setPassport(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const passport2Changed = (event) =>\r\n    {\r\n      setPassport2(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const certificateChanged = (event) =>\r\n    {\r\n      setCertificate(event.target.checked);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const antiBodyTestChanged = (event) =>\r\n    {\r\n      setAntiBodyTest(event.target.checked);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }else if (status === 'sample_taken')\r\n      {\r\n        return (\r\n          <span  className={classes.SampleTakenLabel}> Sample Taken </span>\r\n        );\r\n    \r\n      }else if (status === 'report_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportSentLabel}> Report Sent </span>\r\n        );\r\n    \r\n      }else if (status === 'report_cert_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportCertSentLabel}> {`Report & Certificate Sent`} </span>\r\n        );\r\n      }\r\n      else if (status === 'positive')\r\n      {\r\n        return (\r\n          <span  className={classes.PositiveLabel}> {`POSITIVE`} </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n   const downloadForm1 = (id) =>\r\n   {\r\n       PDFService.downloadCovidForm1(id).then( (res) => \r\n       {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n   }\r\n\r\n   const downloadForm2 = (id) =>\r\n   {\r\n        PDFService.downloadCovidForm2(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        setRefreshData(!refreshData);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadLabResults = (id) =>\r\n   {\r\n        PDFService.downloadPdfResult(id).then( (res) => \r\n        {       \r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        \r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadCertificate = (id) =>\r\n   {\r\n        PDFService.downloadPdfCert(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n      \r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setForename(person.forenameCapital);\r\n         setSurnme(person.surnameCapital);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime.toUpperCase());\r\n         setGender(person.gender.toUpperCase());\r\n         setTitle(person.title.toUpperCase());\r\n         setEmail(person.email.toUpperCase());\r\n         setDOB(FormatDateFromString(person.birthDate));\r\n         setTel(person.phone.toUpperCase());\r\n         setPostCode(person.postCode.toUpperCase());\r\n         setAddress(person.address.toUpperCase());\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber)\r\n         {\r\n           setPassport(person.passportNumber.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber2)\r\n         {\r\n           setPassport2(person.passportNumber2.toUpperCase());\r\n         }\r\n        \r\n         setCertificate(person.certificate);\r\n         setAntiBodyTest(person.antiBodyTest);\r\n\r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n         setRecordChanged(false);\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.certificate = certificate;\r\n          booking.antiBodyTest = antiBodyTest;\r\n          booking.gender = gender;\r\n          booking.title = title;\r\n          booking.birthDate = RevertFormatDateFromString(dob);\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.postCode = postCode;\r\n          booking.address = address;\r\n          booking.passportNumber = passport;\r\n          booking.passportNumber2 = passport2;\r\n          booking.forename = forename;\r\n          booking.surname = surname;\r\n          booking.notes = notes;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateDate(booking.birthDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, dobError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setRefreshData(!refreshData);\r\n        \r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setRefreshData(!refreshData);\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setRefreshData(!refreshData);\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const changeBackToBookingMade = (event, id) =>\r\n  {\r\n    setSaving(true);\r\n    BookService.changeBackToBookingMade(id).then(res => {\r\n      setSaving(false);\r\n      setRefreshData(!refreshData);\r\n    }).catch(err => {\r\n      console.log(err);\r\n      setSaving(false);\r\n    })\r\n  }\r\n\r\n  const resendEmails = (event, id) =>\r\n  {\r\n    setSelectedBooking(booking);\r\n    setOpenResendDialog(true);\r\n  }\r\n\r\n  const Pay = (event, id) =>\r\n  {\r\n    setSelectedBooking(booking);\r\n    setOpenPayDialog(true);\r\n  }\r\n\r\n  useEffect( () => \r\n  {\r\n    if (props.booking)\r\n    {\r\n      BookService.getBookingById(props.booking._id).then( res => {\r\n        setBooking(res.data);\r\n      }).catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n      setState(state => ({...state, bookingDialogDataChanged : !state.bookingDialogDataChanged ? true : false}));\r\n    }\r\n\r\n  } , [refreshData,state.bookingPayChanged]);\r\n\r\n\r\n  useEffect( () => {\r\n    if (props.booking)\r\n    {\r\n      setBooking(props.booking);\r\n    }\r\n\r\n  }, [props.booking]);\r\n\r\n  const undoPaymentClicked = async () =>\r\n  {\r\n    setSaving(true);\r\n    try{\r\n      await BookService.unPayBooking(booking._id);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n      setRefreshData(!refreshData);\r\n    }\r\n    catch(err)\r\n    {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n  \r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            open={props.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={props.onClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-slide-title\" style={booking.tr ? {backgroundColor:'#7e0082', color: \"#fff\"} : {}}>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", left: \"25px\"}}>\r\n                <Tooltip title=\"COPY EDIT LINK TO CLIPBOARD\">\r\n                    <IconButton onClick={() => {navigator.clipboard.writeText(`https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/pcr/${booking._id}`); setCopied(true); setTimeout(() => { \r\n                      setCopied(false)\r\n                    }, 1500);}}\r\n\r\n                           aria-label=\"delete\" \r\n                           className={classes.margin} \r\n                           size=\"small\">\r\n                          <FileCopyOutlinedIcon style={booking.tr ? { color: \"#ddd\"} : {}} fontSize=\"14px\" />\r\n                    </IconButton>\r\n                </Tooltip>\r\n          \r\n                  <span hidden={!copied} style={{fontSize:\"12px\", transition: \"all 1s ease-in\"}}> Copied </span>\r\n               \r\n              </div>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", right: \"60px\", backgroundColor:CalendarColors.PCR_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\"}}>\r\n                    PCR\r\n              </div>\r\n              \r\n              {booking.tr && (\r\n                <div style={{position:\"absolute\",  right: \"15px\"}}>\r\n                     TR\r\n                </div>\r\n\r\n              )}\r\n              \r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                spacing={2}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <div\r\n                    style={\r\n                      booking.deleted\r\n                        ? {\r\n                            paddingBottom: \"5px\",\r\n                            textDecoration: \"line-through\",\r\n                          }\r\n                        : {}\r\n                    }\r\n                  >\r\n                    {`${booking.forenameCapital} ${booking.surnameCapital}`}\r\n                  </div>\r\n                </Grid>\r\n\r\n                {booking.deleted && (\r\n                  <Grid item>\r\n                    <Tooltip title=\"This record has been deleted.\">\r\n                      <DeleteIcon\r\n                        style={booking.tr ? \r\n                          {\r\n                            padding: 0,\r\n                            margin: 0,\r\n                            color: \"#fff\",\r\n                            fontSize: 25,\r\n                          }\r\n                          \r\n                          : {\r\n                          padding: 0,\r\n                          margin: 0,\r\n                          color: \"#333\",\r\n                          fontSize: 25,\r\n                        }}\r\n                      />\r\n                    </Tooltip>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  minHeight: \"600px\",\r\n                  maxHeight: \"600px\",\r\n                  minWidth: \"500px\",\r\n                  maxWidth: \"800px\",\r\n                  paddingTop: \"20px\",\r\n                }}\r\n              >\r\n                <Grid item xs={12} md={12} key={`panel0`}>\r\n                  <div className={classes.infoDetails}>\r\n                    <ul className={classes.ul}>\r\n                      {/* Restore Functionality ******************************************* */}\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"500\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                            color: \"#333\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to restore this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !booking.deleted ||\r\n                          (restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.RestoreButton}\r\n                        >\r\n                          Restore This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Restore this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/*  ******************************************************************* */}\r\n\r\n                      {/* Edit Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          deleteMode.delete ||\r\n                          (editMode.edit && editMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleEditModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.EditButton}\r\n                        >\r\n                          Edit Booking Info\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={saving || !recordChanged}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          Save Changes\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={saving}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      {/* Delete Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"600\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to delete this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          props.deleteButtonDisabled ||\r\n                          booking.deleted ||\r\n                          editMode.edit ||\r\n                          (deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.DeleteButton}\r\n                        >\r\n                          Delete This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Delete this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED DATE</span>\r\n\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.bookingDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingDateError}\r\n                            className={classes.TextBox}\r\n                            value={bookingDate}\r\n                            onChange={bookingDateChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED TIME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.bookingTime.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingTimeError}\r\n                            className={classes.TextBox}\r\n                            value={bookingTime}\r\n                            onChange={bookingTimeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>GENDER</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.gender?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={gender}\r\n                            onChange={genderChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TITLE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.title?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={title}\r\n                            onChange={titleChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>FORENAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.forenameCapital}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={forename}\r\n                            onChange={forenameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>SURNAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.surnameCapital}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={surname}\r\n                            onChange={surnameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>EMAIL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.email?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={email}\r\n                            onChange={emailChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>D.O.B</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.birthDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.dobError}\r\n                            className={classes.TextBox}\r\n                            value={dob}\r\n                            onChange={dobChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TEL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.phone?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={tel}\r\n                            onChange={telChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>POST CODE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.postCode?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={postCode}\r\n                            onChange={postCodeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>ADDRESS</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.address?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={address}\r\n                            onChange={addressChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      {booking.selfIsolate && (\r\n                                    <React.Fragment>\r\n                                            <li className={classes.li}>\r\n                                            <span className={classes.infoTitle}>Self-Isolate Post Code</span> <span className={classes.infoData}>{booking.postCodeSI}</span>  \r\n                                            </li>\r\n                                            <li className={classes.li}>\r\n                                            <span className={classes.infoTitle}>Self-Isolate Address</span> <span className={classes.infoData}>{booking.addressSI}</span>  \r\n                                            </li>\r\n                                    </React.Fragment>\r\n                      )}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>PASSPORT NO.</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.passportNumber?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={passport}\r\n                            onChange={passportChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                                     <span className={classes.infoTitle}>NHS Number</span> <span className={classes.infoData}>{booking.NHSNumber ?? '-'}</span>  \r\n                                  </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Ethnicity</span> <span className={classes.infoData}>{booking.ethnicity}</span>  \r\n                      </li>\r\n\r\n                    \r\n\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Arrival Date</span> <span className={classes.infoData}>{booking.arrivalDate}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Flight Number</span> <span className={classes.infoData}>{booking.flightNumber}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Last Departed Date</span> <span className={classes.infoData}>{booking.lastDepartedDate}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Travelling From</span> <span className={classes.infoData}>{booking.travellingFrom}</span>  \r\n                      </li>\r\n\r\n\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          SECOND PASSPORT NO.\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.passportNumber2?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={passport2}\r\n                            onChange={passport2Changed}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          REQUEST FOR CERTIFICATE\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.certificate ? (\r\n                            <CheckIcon className={classes.checkIcon} />\r\n                          ) : (\r\n                            <CloseIcon className={classes.closeIcon} />\r\n                          )}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <FormControlLabel\r\n                            className={classes.formControl}\r\n                            control={\r\n                              <Checkbox\r\n                                className={classes.formControl}\r\n                                color=\"secondary\"\r\n                                name=\"certificate\"\r\n                                checked={certificate}\r\n                                onChange={certificateChanged}\r\n                              />\r\n                            }\r\n                            label=\"\"\r\n                          />\r\n                        </span>\r\n                      </li>\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          REQUEST FOR ANTIBODY TEST\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.antiBodyTest ? (\r\n                            <CheckIcon className={classes.checkIcon} />\r\n                          ) : (\r\n                            <CloseIcon className={classes.closeIcon} />\r\n                          )}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <FormControlLabel\r\n                            className={classes.formControl}\r\n                            control={\r\n                              <Checkbox\r\n                                className={classes.formControl}\r\n                                color=\"secondary\"\r\n                                name=\"certificate\"\r\n                                checked={antiBodyTest}\r\n                                onChange={antiBodyTestChanged}\r\n                              />\r\n                            }\r\n                            label=\"\"\r\n                          />\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>STATUS</span>{\" \"}\r\n                        {getStatusLabel(booking.status)}\r\n                        {booking.status === \"sample_taken\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"primary\"\r\n                                  disabled = {saving}\r\n                                  onClick = {event => changeBackToBookingMade(event,booking._id)}\r\n\r\n                                     >\r\n                              Change Back To Booking Made\r\n                            </Button>\r\n                          )}\r\n\r\n                          {(booking.status === \"report_sent\" || booking.status === \"report_cert_sent\" ||  booking.status === \"positive\") &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"primary\"\r\n                                  className = {classes.ResendEmailsButton}\r\n                                  onClick = {event => resendEmails(event,booking._id)}\r\n\r\n                                     >\r\n                              Resend emails\r\n                            </Button>\r\n                          )}\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TOTAL CHARGES</span>{\" \"}\r\n                        <span\r\n                          className={\r\n                            calculatePrice(booking) <= 199\r\n                              ? classes.infoDataCharges\r\n                              : classes.infoDataChargesHigher\r\n                          }\r\n                        >{`£${calculatePrice(booking)}`}</span>\r\n\r\n                          {\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (!booking.paid) && (!booking.deleted) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"secondary\"\r\n                                  className = {classes.PayButton}\r\n                                  onClick = {event => Pay(event,booking._id)}\r\n\r\n                                     >\r\n                              Pay\r\n                            </Button>\r\n                          )}\r\n\r\n                          {\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (booking.paid) && (\r\n                                 <React.Fragment>\r\n                                      <span className={classes.PayLabel}>  <CheckIcon className={classes.checkIconSmall} /> Paid by {booking.paidBy} \r\n                                         {booking.paidBy === 'corporate' ? ` \"${booking.corporate}\" ` : ''}\r\n                                      </span>\r\n\r\n                                      <Tooltip title='Undo Payment'>\r\n                                          <IconButton onClick={() => setOpenUndoPayDialog(true)}>\r\n                                            <UndoIcon style={{color: 'red'}}/>\r\n                                          </IconButton>\r\n                                      </Tooltip>\r\n\r\n                                </React.Fragment>                    \r\n                          )}\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted}>\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadForm1(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Registration Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted}>\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadForm2(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm2(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Lab Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          (booking.status !== \"report_sent\" &&\r\n                            booking.status !== \"report_cert_sent\" &&\r\n                            booking.status !== \"positive\"\r\n                            )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadLabResults(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Lab Results\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          (booking.status !== \"report_cert_sent\" && booking.status !== \"positive\")\r\n                        }\r\n                      >\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadCertificate(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Certificate\r\n                        </Button>\r\n                      </li>\r\n\r\n\r\n                      <li>\r\n\r\n                        <Button\r\n                          startIcon = {<HistoryIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"secondary\"\r\n                          onClick={() => {\r\n                            setSelectedBooking(booking);\r\n                            setOpenTimeStampDialog(true);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Show Audit Trail\r\n                        </Button>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </Grid>\r\n              </div>\r\n              <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving || deleting || restoring}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n\r\n\r\n            <ResendEmailsDialog booking={selectedBooking} open={openResendDialog} handleClose={handleCloseResendDialog} />\r\n            <PayDialog booking={selectedBooking} open={openPayDialog} handleClose={handleClosePayDialog} />\r\n            <TimeStampDialog booking={selectedBooking} open={openTimeStampDialog} handleClose={handleCloseTimeStampDialog} />\r\n\r\n          </Dialog>\r\n\r\n\r\n          <Dialog\r\n              open={openUndoPayDialog}\r\n              onClose={handleCloseUndoPayDialog}\r\n              aria-labelledby=\"alert-dialog-title\"\r\n              aria-describedby=\"alert-dialog-description\"\r\n            >\r\n              <DialogTitle style={{color:\"#999\"}} id=\"alert-dialog-title\">{\"Undo Payment\"}</DialogTitle>\r\n              <DialogContent>\r\n                <DialogContentText style={{color:\"#333\", fontWeight:\"400\"}} id=\"alert-dialog-description\">\r\n                  Are you sure you want to undo payment for this booking?  \r\n                </DialogContentText>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={handleCloseUndoPayDialog} color=\"default\">\r\n                  Back\r\n                </Button>\r\n                <Button onClick={undoPaymentClicked} color=\"secondary\" autoFocus>\r\n                  Yes, Undo Payment\r\n                </Button>\r\n              </DialogActions>\r\n      </Dialog>\r\n\r\n        \r\n\r\n        </React.Fragment>\r\n      )}\r\n\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport { Button, Checkbox, CircularProgress, Dialog, DialogContent, DialogTitle, Divider, FormControl, FormControlLabel, Grid, Icon, InputLabel, LinearProgress, Link, makeStyles, MenuItem, Paper, Select, SvgIcon, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport BookingDialog from './BookingDialog';\r\n\r\nimport NewReleasesIcon from '@material-ui/icons/NewReleases';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from 'react-draggable';\r\n\r\nimport * as dateformat from 'dateformat';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\n\r\n\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport PriceCalculator from './PriceCalculator';\r\nimport { corporates } from './Corporates';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel:{\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color : \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\"\r\n  },\r\n\r\n  ExportToExcelButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n   \r\n  },\r\n\r\n  ExportToExcelButtonInline:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n    cursor: \"pointer\",\r\n    padding: \"10px\"\r\n   \r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n},\r\n\r\nth: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntd: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntopSelect: {\r\n  margin: theme.spacing(1),\r\n  minWidth: 80,\r\n}\r\n\r\n}));\r\n\r\nconst getTableTitle = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return `Today's Bookings`;\r\n  }else if (str === 'old')\r\n  {\r\n    return `Old Bookings`;\r\n  }else if (str === 'future')\r\n  {\r\n    return `Future Bookings`;\r\n  }else if (str === 'recent')\r\n  {\r\n    return `Recent Bookings`;\r\n  }else if (str === 'live')\r\n  {\r\n    return `Live Bookings`;\r\n  }else if (str === 'completed')\r\n  {\r\n    return `Completed Bookings`;\r\n  }else if (str === 'positive')\r\n  {\r\n    return `Positive Results`;\r\n  }else if (str === 'deleted')\r\n  {\r\n    return `Deleted Records`;\r\n  }else if (str === 'late')\r\n  {\r\n    return `40 Hours Late`;\r\n  }else if (str === 'tr')\r\n  {\r\n    return `Test & Release Bookings`;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return `All Bookings`;\r\n  }\r\n\r\n}\r\n\r\nconst getTableIcon = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return <NewReleasesIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'old')\r\n  {\r\n    return <HistoryIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'future')\r\n  {\r\n    return <TimelineIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'recent')\r\n  {\r\n    return <AutorenewIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'live')\r\n  {\r\n    return <LiveTvIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'completed')\r\n  {\r\n    return  <PlaylistAddCheckIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'positive')\r\n  {\r\n    return <AddCircleOutlineIcon style={{fontSize:\"2.2rem\"}} />\r\n  }else if (str === 'deleted')\r\n  {\r\n    return <DeleteIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'late')\r\n  {\r\n    return <HourglassEmptyIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return <DescriptionIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n\r\n}\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [topCount, setTopCount] = React.useState(25)\r\n  const topCountChanged = (event) =>\r\n  {\r\n    setTopCount(event.target.value)\r\n    loadData(event.target.value)\r\n  }\r\n  \r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () =>\r\n  {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  }\r\n\r\n\r\n  const [fromDate, setFromDate] = React.useState(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ));\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ));\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(dateformat(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n  const [untilDateStr, seUntilDateStr] = useState(dateformat(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const[chkDate, setChkDate] = useState(true);\r\n  const[chkForename, setChkForename] = useState(true);\r\n  const[chkSurname, setChkSurname] = useState(true);\r\n  const[chkDOB, setChkDOB] = useState(true);\r\n  const[chkEmail, setChkEmail] = useState(true);\r\n  const[chkTel, setChkTel] = useState(true);\r\n  const[chkCertificate, setChkCertidicate] = useState(true);\r\n  const[chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const[chkextRef, setChkExtRef] = useState(true);\r\n  const[chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) =>\r\n  {\r\n    setJustCorporate(event.target.checked);\r\n  }\r\n  \r\n\r\n  const chkDateChanged = (event) =>\r\n  {\r\n    setChkDate(event.target.checked);\r\n  }\r\n\r\n  const chkForenameChanged = (event) =>\r\n  {\r\n    setChkForename(event.target.checked);\r\n  }\r\n\r\n  const chkSurnameChanged = (event) =>\r\n  {\r\n    setChkSurname(event.target.checked);\r\n  }\r\n\r\n  const chkDOBChanged = (event) =>\r\n  {\r\n    setChkDOB(event.target.checked);\r\n  }\r\n\r\n  const chkEmailChanged = (event) =>\r\n  {\r\n    setChkEmail(event.target.checked);\r\n  }\r\n\r\n  const chkTelChanged = (event) =>\r\n  {\r\n    setChkTel(event.target.checked);\r\n  }\r\n\r\n  const chkCertificateChanged = (event) =>\r\n  {\r\n    setChkCertidicate(event.target.checked);\r\n  }\r\n\r\n  const chkAntiBodyTestChanged = (event) =>\r\n  {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  }\r\n\r\n  const chkextRefChanged = (event) =>\r\n  {\r\n    setChkExtRef(event.target.checked);\r\n  }\r\n\r\n  const chkPriceChanged = (event) =>\r\n  {\r\n    setChkPrice(event.target.checked);\r\n  }\r\n\r\n\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === 'recent')\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n\r\n           <React.Fragment>\r\n\r\n                {params.getValue('tr') ? \r\n                \r\n                  <span style={{ position:\"absolute\", fontSize:\"12px\", fontWeight:\"600\", color:\"#7e0082\"}}>\r\n                    TR\r\n                  </span> \r\n                \r\n                : \r\n                \r\n                ''}\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n\r\n          \r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'timeStamp', headerName: 'TimeStamp', width: 200, valueFormatter: (params) => { \r\n        return formatTimeStamp(params.value);\r\n        }\r\n      },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n  \r\n          }else if (params.value === 'sample_taken')\r\n          {\r\n            return (\r\n              <span  className={classes.SampleTakenLabel}>  ST </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportSentLabel}>  RS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_cert_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportCertSentLabel}>  RCS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'positive')\r\n          {\r\n            return (\r\n              <span  className={classes.PositiveLabel}> POS </span>\r\n            );\r\n          }\r\n          \r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink}\r\n              //  onClick={\r\n              //   () => {\r\n              //     console.log(params.value);\r\n  \r\n              //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n              //     setState(state => ({...state, ref : params.value}));\r\n              //     setState(state => ({...state, refError : false})); \r\n              //     setState(state => ({...state, foundRecords : []}));\r\n              //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n              //   }\r\n              // }\r\n              \r\n              >\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'forenameCapital', headerName: 'Forename', width: 150 },\r\n      { field: 'surnameCapital', headerName: 'Surname', width: 150 },\r\n      { field: 'birthDate', headerName: 'D.O.B', width: 110, valueFormatter: (params) => { \r\n        return FormatDateFromString(params.value);\r\n         }\r\n      },\r\n      { field: 'email', headerName: 'Email', width: 200 , valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      }},\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'passportNumber', headerName: 'Passport No.', width: 250, \r\n      //  valueGetter: (params) => {\r\n      //   const pass2 = params.getValue('passportNumber2');\r\n      //   if (pass2 && pass2.length > 0 && pass2.trim().length > 0)\r\n      //   {\r\n      //     return `${params.getValue('passportNumber')?.toUpperCase()} - ${params.getValue('passportNumber2')?.toUpperCase()}`\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     return params.getValue('passportNumber')?.toUpperCase();\r\n      //   }\r\n      // }\r\n    },\r\n      { field: 'certificate', headerName: 'Certificate', width: 120,  renderCell: (params) => {\r\n          return params.value ? (\r\n            <CheckIcon className={classes.checkIcon}/>\r\n          ) :\r\n          (\r\n            <CloseIcon className={classes.closeIcon}/> \r\n          );\r\n      } },\r\n      { field: 'antiBodyTest', headerName: 'Antibody Test', width: 120,  renderCell: (params) => {\r\n        return params.value ? (\r\n          <CheckIcon className={classes.checkIcon}/>\r\n        ) :\r\n        (\r\n        <  CloseIcon className={classes.closeIcon}/> \r\n        );\r\n    } },\r\n      { field: 'postCode', headerName: 'Post Code', width: 150, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      { field: 'address', headerName: 'Address', width: 500, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      // { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n\r\n  }\r\n  else\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n            <React.Fragment>\r\n\r\n                {params.getValue('tr') ? \r\n                \r\n                  <span style={{ position:\"absolute\", fontSize:\"12px\", fontWeight:\"600\", color:\"#7e0082\"}}>\r\n                    TR\r\n                  </span> \r\n                \r\n                : \r\n                \r\n                ''}\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n               if (!params.value)\r\n               {\r\n                  return ( <CloseIcon className={classes.closeIcon}/> );\r\n               }\r\n               else\r\n               {\r\n                  if (params.getValue('paidBy') === 'credit card')\r\n                  {\r\n                    return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'cash')\r\n                  {\r\n                    return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'corporate')\r\n                  {\r\n                    return ( <BusinessIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else\r\n                  {\r\n                    return '';  \r\n                  }\r\n               }\r\n         }\r\n        },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n  \r\n          }else if (params.value === 'sample_taken')\r\n          {\r\n            return (\r\n              <span  className={classes.SampleTakenLabel}>  ST </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportSentLabel}>  RS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_cert_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportCertSentLabel}>  RCS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'positive')\r\n          {\r\n            return (\r\n              <span  className={classes.PositiveLabel}> POS </span>\r\n            );\r\n          }\r\n          \r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink} onClick={\r\n                () => {\r\n                  // console.log(params.value);\r\n  \r\n                  // setState(state => ({...state, currentMenuIndex: getMenuIndex(`findByRef`)}));\r\n                  // setState(state => ({...state, ref : params.value}));\r\n                  // setState(state => ({...state, refError : false})); \r\n                  // setState(state => ({...state, foundRecords : []}));\r\n                  // setState(state => ({...state, findRecords : !state.findRecords}));\r\n                }\r\n              }>\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'forenameCapital', headerName: 'Forename', width: 150 },\r\n      { field: 'surnameCapital', headerName: 'Surname', width: 150 },\r\n      { field: 'birthDate', headerName: 'D.O.B', width: 110, valueFormatter: (params) => { \r\n        return FormatDateFromString(params.value);\r\n         }\r\n      },\r\n      { field: 'email', headerName: 'Email', width: 200 , valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      }},\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'passportNumber', headerName: 'Passport No.', width: 250,  \r\n      // valueGetter: (params) => {\r\n      //   const pass2 = params.getValue('passportNumber2');\r\n      //   if (pass2 && pass2.length > 0 && pass2.trim().length > 0)\r\n      //   {\r\n      //     return `${params.getValue('passportNumber')?.toUpperCase()} - ${params.getValue('passportNumber2')?.toUpperCase()}`\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     return params.getValue('passportNumber')?.toUpperCase();\r\n      //   }\r\n      // }\r\n    },\r\n      { field: 'certificate', headerName: 'Certificate', width: 120,  renderCell: (params) => {\r\n          return params.value ? (\r\n            <CheckIcon className={classes.checkIcon}/>\r\n          ) :\r\n          (\r\n            <CloseIcon className={classes.closeIcon}/> \r\n          );\r\n      } },\r\n      { field: 'antiBodyTest', headerName: 'Antibody Test', width: 120,  renderCell: (params) => {\r\n        return params.value ? (\r\n          <CheckIcon className={classes.checkIcon}/>\r\n        ) :\r\n        (\r\n        <  CloseIcon className={classes.closeIcon}/> \r\n        );\r\n    } },\r\n      { field: 'postCode', headerName: 'Post Code', width: 150, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      { field: 'address', headerName: 'Address', width: 500, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      // { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n  \r\n\r\n  }\r\n\r\n\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : true});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const dateFormatter = str => {\r\n    return str;\r\n  };\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n  \r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) =>\r\n  {\r\n    const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n    const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n    if (todayStr === timeStampStr)\r\n    {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    }\r\n    else\r\n    {\r\n       return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  }\r\n\r\n  const loadData = (top) =>\r\n  {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === 'today')\r\n    {\r\n      api = BookService.getTodayBookings;\r\n    }else if (props.date === 'old')\r\n    {\r\n      api = BookService.getOldBookings;\r\n    }else if (props.date === 'future')\r\n    {\r\n      api = BookService.getFutureBookings;\r\n    }else if (props.date === 'recent')\r\n    {\r\n      api = BookService.getRecentBookingsAll;\r\n    }else if (props.date === 'live')\r\n    {\r\n      api = BookService.getLiveBookings;\r\n    }else if (props.date === 'completed')\r\n    {\r\n      api = BookService.getCompletedBookings;\r\n    }\r\n    else if (props.date === 'positive')\r\n    {\r\n      api = BookService.getPositiveBookings;\r\n    }\r\n    else if (props.date === 'deleted')\r\n    {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n    else if (props.date === 'late')\r\n    {\r\n      api = BookService.getLateBookings;\r\n    }\r\n    else if (props.date === 'tr')\r\n    {\r\n      api = BookService.getAllTRBookings;\r\n    }\r\n               \r\n    setData({bookings: [], cachedBookings: [], isFetching: true});\r\n   \r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top).then( (res) =>{\r\n      // console.log(res)\r\n      for (var i=0; i < res.data.length; i++)\r\n      {\r\n        res.data[i] = {...res.data[i], id : i + 1}\r\n      }  \r\n      setData({bookings: [...res.data], cachedBookings: [...res.data], isFetching: false});\r\n      // return res.data;\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n            setTopCount(25)\r\n            loadData(25)\r\n        },\r\n        [props.date]);\r\n\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => \r\n\r\n             (element.forename.toLowerCase().indexOf(filter.toLowerCase()) >= 0) ||\r\n                   (element.surname.toLowerCase().indexOf(filter.toLowerCase()) >= 0) \r\n                  || (`${element.forename} ${element.surname}`.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n          );\r\n  \r\n  \r\n          setData({bookings: [...filteredData], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n  \r\n      useEffect(() => {\r\n\r\n       loadData(topCount)\r\n    \r\n      }, [state.bookingDialogDataChanged]);    \r\n\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  }    \r\n  \r\n  const openDetailsDialog = (event, id) =>\r\n  {\r\n    const booking = data.bookings.find(element => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n\r\n  }\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    loadData(topCount)\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n    \r\n  }\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) =>\r\n  {\r\n    setOpenDialogExcel(true);\r\n  }\r\n\r\n  const isTopSelectHidden = (date)=>\r\n  {\r\n    return date === 'live' || date === 'positive' || date === 'late' || date === 'today'\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.userId.username === 'admin' && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                    <KeyboardDatePicker\r\n                        autoOk={true}\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        autoOk={true}\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price (£) </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {FormatDateFromString(booking.birthDate)}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n} ","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts';\r\nimport Title from './Title';\r\nimport dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n// Generate Sales Data\r\nfunction createData(time, amount) {\r\n  return { time, amount };\r\n}\r\n\r\n\r\nconst emptyData = [\r\n  createData('09:00', 0),\r\n  createData('10:00', 0),\r\n  createData('11:00', 0),\r\n  createData('12:00', 0),\r\n  createData('13:00', 0),\r\n  createData('14:00', 0),\r\n  createData('15:00', 0),\r\n  createData('16:00', 0),\r\n  createData('17:00', 0),\r\n  createData('18:00', undefined),\r\n\r\n];\r\n\r\nconst getCount = (data, str) =>\r\n{\r\n  if (!data)\r\n    return 0;\r\n\r\n  var count = 0;\r\n  for (var i=0; i < data.length; i++)\r\n  {\r\n    if (data[i]._id.substr(0,2) === str)\r\n    {\r\n      count += data[i].count;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nexport default function Chart() {\r\n  const theme = useTheme();\r\n\r\n  const [data, setData] = React.useState(emptyData);\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() =>\r\n  {\r\n    const fetchData = async () =>\r\n    {\r\n      const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n      var result = [];\r\n      try\r\n      {\r\n          setLoading(true)\r\n          const res = await BookService.getBookingsStatsByDateStr(todayStr);\r\n          setLoading(false)\r\n          const data = res.data.result;\r\n          result.push(createData('09:00', getCount(data,'09')));\r\n          result.push(createData('10:00', getCount(data,'10')));\r\n          result.push(createData('11:00', getCount(data,'11')));\r\n          result.push(createData('12:00', getCount(data,'12')));\r\n          result.push(createData('13:00', getCount(data,'13')));\r\n          result.push(createData('14:00', getCount(data,'14')));\r\n          result.push(createData('15:00', getCount(data,'15')));\r\n          result.push(createData('16:00', getCount(data,'16')));\r\n          result.push(createData('17:00', getCount(data,'17')));\r\n          result.push(createData('18:00', undefined));\r\n \r\n           setData(result);\r\n      }\r\n      catch(err){\r\n        setLoading(false)\r\n        console.error(err);\r\n      }\r\n\r\n    }\r\n  \r\n   fetchData();\r\n\r\n  }, [] );\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today</Title>\r\n      <ResponsiveContainer>\r\n        <LineChart\r\n          data={data}\r\n          margin={{\r\n            top: 16,\r\n            right: 16,\r\n            bottom: 0,\r\n            left: 24,\r\n          }}\r\n        >\r\n          <XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n          <YAxis stroke={theme.palette.text.secondary}>\r\n            <Label\r\n              angle={270}\r\n              position=\"left\"\r\n              style={{ textAnchor: 'middle', fill: theme.palette.text.primary }}\r\n            >\r\n              Online Bookings\r\n            </Label>\r\n          </YAxis>\r\n          <Line type=\"monotone\" dataKey=\"amount\" stroke={theme.palette.primary.main} dot={false} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Title from './Title';\r\nimport { Grid, LinearProgress, Tooltip } from '@material-ui/core';\r\nimport * as dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport BookingDialog from './BookingDialog';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    margin: \"5px\",\r\n    padding: \"5px\",\r\n    maxWidth : \"90px\",\r\n    minHeight: \"30px\",\r\n    border : \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight : \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    borderRadius : \"5px\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n    align: \"center\",\r\n\r\n    \"&:hover\": {\r\n        background: \"#3f51b5\",\r\n        color: \"#ebedf7\"\r\n      },\r\n}\r\n\r\n\r\n});\r\n\r\nconst isWeekend = (date) =>\r\n{\r\n    return (date.getDay() === 0 || date.getDay() === 6) /// Weekend\r\n}\r\n\r\nconst getCurrentTimeSlot = (now) =>\r\n{\r\n    var min = now.getMinutes();\r\n    var hour = now.getHours();\r\n    var pm = (hour >= 12);\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n\r\n    if (min >= 0 && min < 15)\r\n    {\r\n      min = 0;\r\n    }else if (min >= 15 && min < 30)\r\n    {\r\n      min = 15;\r\n    }else if (min >= 30 && min < 45)\r\n    {\r\n      min = 30;\r\n    }else if (min >= 45)\r\n    {\r\n      min = 45;\r\n    }\r\n\r\n    const minStr = min < 10 ? `0${min}` : `${min}`;\r\n    const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n    const pmStr = pm ? 'PM' : 'AM';\r\n\r\n    const timeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n    if (isWeekend(now))\r\n    {\r\n      if (now.getHours() < 10 || now.getHours() >= 14)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n    }\r\n    else\r\n    {\r\n      if (now.getHours() < 9 || now.getHours() >= 18)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n\r\n    }\r\n}\r\n\r\nconst getCurrentTimeSlotLabel = (timeStr) =>\r\n{\r\n  if (!timeStr)\r\n  {\r\n    return 'Closed';\r\n  }\r\n\r\n  var hour = parseInt(timeStr.substr(0,2));\r\n  var minute = parseInt(timeStr.substr(3,2)); \r\n  var pm = timeStr.indexOf('PM') > 0;\r\n  if (minute !== 45)\r\n  {\r\n    minute += 15;\r\n  }\r\n  else{\r\n    minute = 0;\r\n    hour += 1;\r\n    if (hour >= 12)\r\n    {\r\n      pm = true;\r\n    }\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n  }\r\n\r\n  const minStr = minute < 10 ? `0${minute}` : `${minute}`;\r\n  const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n  const pmStr = pm ? 'PM' : 'AM';\r\n\r\n  const endTimeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n  return `${timeStr} - ${endTimeStr}`;\r\n\r\n}\r\n\r\nexport default function CurrentVisits() {\r\n  const classes = useStyles();\r\n\r\n  const[current, setCurrent] = React.useState(new Date());\r\n  const [bookings, setBookings] = React.useState([]);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() => \r\n  {\r\n    const interval = setInterval(() => {  \r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval);\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect(() => \r\n  {\r\n    const currentTimeSlot = getCurrentTimeSlot(current);\r\n    if (!currentTimeSlot)\r\n      return;\r\n    const todayStr = dateformat(current, 'yyyy-mm-dd');\r\n    setLoading(true)\r\n    BookService.getBookingsByDateStrandTime(todayStr,currentTimeSlot).then(res =>\r\n      {\r\n        setLoading(false)\r\n        if (res.data.status === 'OK')\r\n        {\r\n            setBookings([...res.data.bookings]);\r\n        }   \r\n\r\n      }).catch(err =>\r\n        {\r\n          setLoading(false)\r\n          console.log(err);\r\n        });\r\n\r\n  }, [current]);\r\n\r\n  const getBookingsBox = (_bookings) =>\r\n  {\r\n      if (_bookings && _bookings.length > 0)\r\n      {\r\n         return (\r\n\r\n          <div className={classes.root}>\r\n            <Grid container justify=\"flex-start\" alignItems=\"flex-start\" spacing={0}>\r\n\r\n                  { _bookings.map(booking => (\r\n\r\n                    <Grid item>\r\n\r\n                        <div className={classes.bookingBox} onClick={event => bookingCliked(event,booking)}>\r\n\r\n                            <span style={{textAlign:\"center\"}}> {`${booking.surnameCapital}`.substring(0,10)} </span>\r\n\r\n                        </div>\r\n\r\n                  </Grid>\r\n\r\n                  ))}\r\n\r\n              \r\n            </Grid>\r\n\r\n          </div>\r\n         )\r\n             \r\n        }                   \r\n  }\r\n\r\n  const bookingCliked = (event, booking) =>\r\n  {\r\n      setSelectedBooking(booking);\r\n      setOpenDialog(true);\r\n  }\r\n\r\n  const handleCloseDialog = () =>\r\n  {\r\n      setOpenDialog(false);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>Current Visits</Title>\r\n      <Typography component=\"p\" variant=\"h6\">\r\n        {getCurrentTimeSlotLabel(getCurrentTimeSlot(current))}\r\n      </Typography>\r\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\r\n        on {dateformat(current, 'dd mmmm, yyyy') } \r\n      </Typography>\r\n     \r\n        {getBookingsBox(bookings)}\r\n      \r\n\r\n      <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n      />\r\n\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Title from './Title';\r\nimport BookService from './services/BookService';\r\nimport * as dateformat from 'dateformat';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function BookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , isFetching : false});\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const seeMoreRecords = (event) => {\r\n    event.preventDefault();\r\n    setState(state=>({...state, currentMenuIndex:getMenuIndex('pcr',`recentBookings`)}));\r\n  }\r\n\r\n  const loadData = () => \r\n  {\r\n    setData({bookings: data.bookings, isFetching: true});\r\n    setLoading(true)\r\n    BookService.getRecentBookings().then( (res) =>{\r\n      setLoading(false)\r\n        setData({bookings: res.data, isFetching: false});\r\n\r\n    }).catch( (err) => {\r\n      setLoading(false)\r\n        console.log(err);\r\n        setData({bookings: data.bookings, isFetching: false});\r\n    });\r\n  }\r\n\r\n\r\n  useEffect( () => {\r\n          loadData();\r\n        },\r\n        [refresh]);   \r\n\r\n\r\n   useEffect( () => {\r\n     loadData();\r\n     setInterval(() => {\r\n       setRefresh(refresh => !refresh);\r\n     }, 30000);\r\n   }, []) ;    \r\n\r\n   const formatTimeStamp = (timeStamp) =>\r\n   {\r\n     const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n     const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n     if (todayStr === timeStampStr)\r\n     {\r\n       return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n     }\r\n     else\r\n     {\r\n        return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Recent Bookings</Title>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>TimeStamp</TableCell>        \r\n            <TableCell>Name</TableCell>\r\n            <TableCell>Surname</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>D.O.B</TableCell>\r\n            <TableCell>Booked Date</TableCell>\r\n            <TableCell>Booked Time</TableCell> \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.bookings.map((row) => (\r\n            <TableRow key={row._id}>\r\n              <TableCell>{formatTimeStamp(row.timeStamp)}</TableCell>\r\n              <TableCell>{row.forename}</TableCell>\r\n              <TableCell>{row.surname}</TableCell>\r\n              <TableCell>{row.email}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.birthDate)}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.bookingDate)}</TableCell>\r\n              <TableCell>{row.bookingTime}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      <div className={classes.seeMore}>\r\n        <Link color=\"primary\" href=\"#\" onClick={seeMoreRecords}>\r\n          See more records\r\n        </Link>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Title from './Title';\r\nimport { Dialog, DialogContent, DialogTitle, Grid, LinearProgress, Link, Table, TableBody, TableCell, TableHead, TableRow, Tooltip } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\n\r\nimport {\r\n    PieChart, Pie, Sector, Cell,\r\n  } from 'recharts';\r\n\r\n  const COLORS = ['#00b33e', '#0070e0', '#bb00c4'];\r\n\r\n  const RADIAN = Math.PI / 180;\r\n\r\n  const renderCustomizedLabel = ({\r\n    cx, cy, midAngle, innerRadius, outerRadius, value, index,\r\n  }) => {\r\n     const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n  \r\n    return (\r\n      <text x={x} y={y} fontSize=\"14px\" fontWeight=\"500\" fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n                {`${value} `}\r\n      </text>\r\n    );\r\n  };\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  ReportLabels: {\r\n      position: \"absolute\",\r\n      top : \"80px\",\r\n      left: \"0px\"\r\n  },\r\n\r\n  AverageLabel: {\r\n    position: \"absolute\",\r\n    top : \"190px\",\r\n    right: \"30px\",\r\n    fontSize : \"12px\",\r\n    color : \"#0070e0\",\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  less12Label: {\r\n      fontSize : \"12px\",\r\n      color : \"#00b33e\",\r\n      fontWeight: \"600\",\r\n      paddingLeft : \"5px\",\r\n      borderLeft: \"5px solid #00b33e\",\r\n      marginBottom : \"10px\",\r\n  },\r\n\r\n  less24Label: {\r\n    fontSize : \"12px\",\r\n    color : \"#0070e0\",\r\n    fontWeight: \"600\",\r\n    paddingLeft : \"5px\",\r\n    borderLeft: \"5px solid #0070e0\",\r\n    marginBottom : \"10px\",\r\n    },\r\n\r\nless36Label: {\r\n    fontSize : \"12px\",\r\n    color : \"#bb00c4\",\r\n    fontWeight: \"600\",\r\n    paddingLeft : \"5px\",\r\n    borderLeft: \"5px solid #bb00c4\",\r\n    marginBottom : \"10px\",\r\n    },\r\n\r\n    seeMore :{\r\n        position: \"absolute\",\r\n        top : \"191px\",\r\n        left : \"2px\"\r\n    }\r\n\r\n});\r\n\r\n\r\nexport default function ResultsTimeReport() {\r\n  const classes = useStyles();\r\n\r\n  const[current, setCurrent] = React.useState(new Date());\r\n  const [report, setReport] = React.useState({});\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const handleClose = () =>\r\n  {\r\n      setOpen(false);\r\n  }\r\n\r\n  useEffect(() => \r\n  {\r\n    const interval = setInterval(() => {  \r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval);\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect( () => \r\n  {\r\n    \r\n    setLoading(true)\r\n    BookService.getTestsTimeReport().then(res =>\r\n      {\r\n        const result = [];  \r\n        setLoading(false)\r\n        if (res.data.status === 'OK')\r\n        {\r\n            setReport(res.data.result);\r\n            // console.log(res.data.result);\r\n            result.push({name: 'lessThan12', value : res.data.result.lessThan12 });\r\n            result.push({name: 'lessThan24', value : res.data.result.lessThan24 });\r\n            result.push({name: 'lessThan36', value : res.data.result.lessThan36 });\r\n         \r\n           // result.push({name: 'lessThan48', value : res.data.result.lessThan48 });\r\n            setData(result);\r\n        }   \r\n\r\n      }).catch(err =>\r\n        {\r\n          setLoading(false)\r\n          console.error(err);\r\n        });\r\n\r\n\r\n    } , [] );\r\n\r\n    const getReportLabels = () =>\r\n    {\r\n           return (\r\n\r\n                <div className={classes.ReportLabels}>\r\n                    <div className={classes.less12Label}> {`12 Hours`} </div>\r\n                    <div className={classes.less24Label}> {`24 Hours`} </div>\r\n                    <div className={classes.less36Label}> {`36 Hours`} </div>\r\n                </div>\r\n    \r\n            );\r\n    }\r\n\r\n    const getAverageLabel = () =>\r\n    {\r\n           return (\r\n\r\n                <div className={classes.AverageLabel}>\r\n                   avg = <span style={{fontSize:\"14px\"}}> {`${report.avg}`} </span> hours\r\n                </div>\r\n    \r\n            );\r\n    }\r\n\r\n    const seeMoreClicked = (event) => {\r\n        event.preventDefault();\r\n        setOpen(true);\r\n      }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    \r\n    <div style={{position: \"relative\"}}>\r\n    {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>PCR RESULTS SUMMARY</Title>\r\n\r\n      {data && (\r\n                <>\r\n\r\n                <PieChart width={250} height={150}>\r\n                    <Pie\r\n                        data={data}\r\n                        cx={170}\r\n                        cy={70}\r\n                        labelLine={false}\r\n                        label={renderCustomizedLabel}\r\n                        outerRadius={65}\r\n                        fill=\"#8884d8\"\r\n                        dataKey=\"value\"\r\n                        >\r\n                        {\r\n                            data.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)\r\n                        }\r\n                    </Pie>\r\n                </PieChart>\r\n                \r\n\r\n                {getReportLabels()}\r\n                {getAverageLabel()}\r\n\r\n                <div className={classes.seeMore}>\r\n                            <Link color=\"primary\" href=\"#\" onClick={seeMoreClicked}>\r\n                                  See Details\r\n                            </Link>\r\n                  </div>\r\n\r\n\r\n                  <Dialog style={{padding: \"50px\"}} onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>  \r\n                      <DialogTitle style={{textAlign: \"center\"}} id=\"simple-dialog-title\">PCR Results Time Report</DialogTitle>\r\n                            <DialogContent>\r\n                            <Table>\r\n                            <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Recieved in Less Than</TableCell>        \r\n                                <TableCell>Count</TableCell>\r\n                                <TableCell>Percent</TableCell>\r\n                            </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow key=\"row1\">\r\n                                    <TableCell>12 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan12}</TableCell>\r\n                                    <TableCell>{report.lessThan12Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row2\">\r\n                                    <TableCell>24 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan24}</TableCell>\r\n                                    <TableCell>{report.lessThan24Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row3\">\r\n                                    <TableCell>36 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan36}</TableCell>\r\n                                    <TableCell>{report.lessThan36Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row4\">\r\n                                    <TableCell>48 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan48}</TableCell>\r\n                                    <TableCell>{report.lessThan48Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row4\">\r\n                                    <TableCell style={{fontWeight:\"800\"}}>Total Results Received : </TableCell>\r\n                                    <TableCell style={{fontWeight:\"600\"}}>{report.lessThan48 + report.lessThan36 + report.lessThan24 + report.lessThan12}</TableCell>\r\n                                    <TableCell></TableCell>\r\n                                </TableRow>\r\n\r\n\r\n\r\n                            \r\n                            </TableBody>\r\n                        </Table>\r\n                            </DialogContent>\r\n                </Dialog>\r\n    \r\n\r\n\r\n\r\n                </>\r\n      )}\r\n     \r\n     </div>\r\n\r\n\r\n\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chart from './Chart';\r\nimport CurrentVisits from './CurrentVisits';\r\n\r\n\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport BookingView from './BookingView';\r\nimport ResultsTimeReport from './ResultsTimeReport';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n \r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  return (\r\n        <React.Fragment>\r\n\r\n<           Grid container spacing={3}>\r\n                    {/* Chart */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <Chart />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Tests Summary */}\r\n                    <Grid item xs={12} md={4} lg={3}>\r\n                     <Paper className={fixedHeightPaper}>\r\n                        <ResultsTimeReport />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Current Visits */}\r\n                    <Grid item xs={12} md={4} lg={3}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <CurrentVisits />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Recent Bookings */}\r\n                    <Grid item xs={12}>\r\n                    <Paper className={classes.paper}>\r\n                        <BookingView/>\r\n                    </Paper>\r\n                    </Grid>\r\n          </Grid>\r\n        </React.Fragment>\r\n  );\r\n}","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid, ROW_CLICK } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, Link, makeStyles, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport LoaderSpinner from 'react-loader-spinner';\r\nimport GlobalState from './../GlobalState';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport WbIncandescentIcon from '@material-ui/icons/WbIncandescent';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport dateformat from 'dateformat';\r\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\r\nimport BookingDialog from './BookingDialog';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\nimport PDFService from './services/PDFService';\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  archiveButton: {\r\n\r\n  },\r\n\r\n  smartMatchButton: {\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    marginRight : \"10px\"\r\n    // padding: \"10px\"  \r\n  },\r\n\r\n  infoTitle:  {\r\n    fontWeight: \"400\"\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\"\r\n  },\r\n\r\n  matchButton:\r\n  {\r\n    marginTop: \"30px\",\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendButton:\r\n  {\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendFilesButton:{\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  cancelButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"90px\",\r\n    paddingRight: \"90px\"   \r\n  },\r\n\r\n  downloadPDFButton:\r\n  {\r\n    marginLeft: \"50px\"\r\n  }\r\n  \r\n  \r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\" //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: '#2f942e',\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography style={{fontWeight:\"800\", color :  \"#5e855e\"  }} variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value,\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function UnmatchedRecords() {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const columns = [\r\n    { field: 'id', headerName: '#', width: 50 },\r\n\r\n    { field: 'testDate', headerName: 'Test Date', width: 120, valueFormatter : (params) =>\r\n      {\r\n        return FormatDateFromString(params.value);\r\n      }\r\n     },\r\n    { field: 'forename', headerName: 'Forename', width: 200 },\r\n    { field: 'surname', headerName: 'Surname', width: 200 },\r\n    { field: 'birthDate', headerName: 'D.O.B', width: 120 , valueFormatter : (params) =>\r\n    {\r\n      return FormatDateFromString(params.value);\r\n    }},\r\n    { field: '_id' , headerName:'Action', width: 500 , renderCell: (params) => {\r\n        if (selectedTab === 'unresolved')\r\n        {\r\n            return (\r\n              <React.Fragment>\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<WbIncandescentIcon />}\r\n                    onClick = { event => smartMatchClicked(event,params.value)}\r\n                    className={classes.smartMatchButton}\r\n                    >\r\n                    smart match\r\n              </Button>\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = { event => archiveRecord(event,params.value)}\r\n                    className={classes.archiveButton}\r\n                  >\r\n                    archive\r\n              </Button>\r\n\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"                   \r\n                    color=\"primary\"\r\n                    onClick = { event => downloadLabReport(params.value)}\r\n                    className={classes.downloadPDFButton}\r\n                  >\r\n                    view pdf\r\n              </Button>\r\n\r\n\r\n              </React.Fragment>\r\n\r\n            );\r\n        }else\r\n        {\r\n            return (\r\n\r\n              <React.Fragment>\r\n\r\n                  <Button\r\n                        disabled = {params.value === disableId}\r\n                        type=\"button\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        startIcon={<WbIncandescentIcon />}\r\n                        onClick = { event => smartMatchClicked(event,params.value)}\r\n                        className={classes.smartMatchButton}\r\n                        >\r\n                        smart match\r\n                  </Button>\r\n\r\n                    <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = { event => unArchiveRecord(event,params.value)}\r\n                    className={classes.archiveButton}\r\n                  >\r\n                    Undo\r\n                  </Button>\r\n\r\n                  <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"                   \r\n                    color=\"primary\"\r\n                    onClick = { event => downloadLabReport(params.value)}\r\n                    className={classes.downloadPDFButton}\r\n                  >\r\n                    view pdf\r\n                  </Button>\r\n\r\n              </React.Fragment>\r\n            );\r\n        }\r\n        \r\n    } },\r\n   \r\n  ];\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : false});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [disableId, setDisableId] = React.useState(null);\r\n\r\n  const [selectedTab, setSeletedTab] = React.useState('unresolved');\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [smartLinkId, setSmartLinkId] = React.useState(null);\r\n\r\n  const [smartLinkDetails, setSmartLinkDetails] = React.useState(null);\r\n\r\n  const [likelyBookings, setLikelyBookings] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [seeDetailsBooking, setSeeDetailsBooking] = React.useState(null);\r\n\r\n  const [matching, setMatching] = React.useState(false);\r\n\r\n  const [matched, setMatched] = React.useState(false);\r\n\r\n  const [sending, setSending] = React.useState(false);\r\n  const [sent, setSent] = React.useState(false);\r\n\r\n  const [sendJustToPCR, setSendJustToPCR] = React.useState(false);\r\n\r\n  const [sendingStatus, setSendingStatus] = React.useState('');\r\n\r\n  const [sendingProgress, setSendingProgress] = React.useState(10);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n\r\n  const handleTabChanged = (event, value) => {\r\n      if (value && value.length)\r\n      {\r\n        setSeletedTab(value);\r\n      }\r\n   \r\n  };\r\n\r\n  const handleCloseDialog = () =>\r\n  {\r\n    setOpenDialog(false);\r\n    setTimeout(() => {\r\n      setSmartLinkId(null);\r\n      setSmartLinkDetails(null);\r\n      setLikelyBookings(null);\r\n      setSelectedBooking(null);\r\n      setMatched(false);\r\n      setMatching(false);\r\n      setSendingStatus(null);\r\n      setSending(false);\r\n      setSent(false);\r\n      clearInterval(interval);\r\n      setSendJustToPCR(false);\r\n    }, 100);\r\n  }\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSeeDetailsDialogOpen(false);\r\n    setTimeout(() => {\r\n      setSeeDetailsBooking(null);\r\n    }, 500);\r\n  }\r\n\r\n  const seeDetailsClicked = (event, row) =>\r\n  {\r\n    setSeeDetailsBooking(row);\r\n    setSeeDetailsDialogOpen(true);\r\n  }\r\n\r\n  const smartMatchClicked = (event, id) =>\r\n  {\r\n    setSmartLinkId(id);\r\n    setOpenDialog(true);\r\n    findBestMatches(id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (smartLinkId)\r\n    {\r\n      findBestMatches(smartLinkId);\r\n      // console.log('refrshing....');\r\n\r\n    }\r\n\r\n\r\n  }, [state.bookingDialogDataChanged]);\r\n\r\n  const findBestMatches = (id) =>\r\n  {\r\n    BookService.getLinkDetails(id).then( res => {\r\n      setSmartLinkDetails(res.data);\r\n      console.log(res.data);\r\n    }).catch( err =>\r\n      {\r\n        console.log(err);\r\n      });\r\n\r\n    BookService.findBestMatches(id).then( res => {\r\n      setLikelyBookings(res.data.matchedBookings);\r\n    }).catch( err => {\r\n      console.log(err);\r\n      setLikelyBookings([]);\r\n    })\r\n  }\r\n\r\n  const archiveRecord = (event, id) =>\r\n  {\r\n      if (disableId)\r\n      {\r\n        return;\r\n      }\r\n        setDisableId(id);\r\n        \r\n        BookService.archiveRecord(id).then(\r\n            (res) => {\r\n                setDisableId(null);\r\n                setRefresh(!refresh);\r\n            }\r\n        ).catch( (err) => {\r\n            setDisableId(null);\r\n        })\r\n  }\r\n\r\n  const unArchiveRecord = (event, id) =>\r\n  {\r\n      if (disableId)\r\n      {\r\n        return;\r\n      }\r\n        setDisableId(id);\r\n        \r\n        BookService.unArchiveRecord(id).then(\r\n            (res) => {\r\n                setDisableId(null);\r\n                setRefresh(!refresh);\r\n            }\r\n        ).catch( (err) => {\r\n            setDisableId(null);\r\n        })\r\n  }\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  useEffect( () => {\r\n\r\n            var api = BookService.getUnmatchedRecords;\r\n            if (selectedTab === 'archived')\r\n            {\r\n                api = BookService.getUnmatchedRecordsArchived;\r\n            }\r\n            \r\n            setLoading(true)\r\n            \r\n            setData({bookings: [], cachedBookings: [], isFetching: true});\r\n            const currentPromise = api().then( (res) =>{\r\n              \r\n              for (var i=0; i < res.data.length; i++)\r\n              {\r\n                res.data[i] = {...res.data[i], id : i + 1}\r\n              }  \r\n              \r\n              return res.data;\r\n            })\r\n\r\n            lastPromise.current = currentPromise;\r\n\r\n            currentPromise.then(\r\n              result => {\r\n                if (currentPromise === lastPromise.current) {\r\n                  setLoading(false)\r\n                  setData({bookings: result, cachedBookings: [...result], isFetching: false});\r\n                }\r\n              },\r\n              e => {\r\n                if (currentPromise === lastPromise.current) {\r\n                    setLoading(false)\r\n                    console.log(e);\r\n                    setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n                }\r\n              });\r\n        },\r\n        [refresh, selectedTab]);\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => {\r\n\r\n            return (element.forename.toLowerCase().indexOf(filter.toLowerCase()) >= 0) ||\r\n                   (element.surname.toLowerCase().indexOf(filter.toLowerCase()) >= 0) \r\n            ;\r\n  \r\n          });\r\n  \r\n  \r\n          setData({bookings: filteredData, cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    setRefresh(!refresh);\r\n\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n  }\r\n\r\n  const handleCheckChanged = (event, row) =>\r\n  {\r\n    if (event.target.checked)\r\n    {\r\n      setSelectedBooking(row);\r\n    }\r\n    else\r\n    {\r\n      setSelectedBooking(null);\r\n    }\r\n  }\r\n\r\n  const matchRecords = (event) => {\r\n\r\n    setMatching(true);\r\n\r\n    BookService.getBookingById(selectedBooking._id).then(res => {\r\n      setSelectedBooking(res.data);\r\n    });\r\n\r\n    BookService.matchRecords(selectedBooking._id, smartLinkId).then (res => {\r\n\r\n      if (res.data.status === 'OK'){\r\n        setMatching(false);\r\n        setMatched(true);\r\n      }\r\n\r\n    }).catch(err =>\r\n      {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  const getProgress = (status) =>\r\n  {\r\n    console.log(`status : ${status}`);\r\n\r\n    if (status === 'downloadFailed')\r\n      return 10 ;\r\n    else if (status === 'downloading') \r\n      return 30 ;  \r\n    else if (status === 'downloadSuccess') \r\n      return 70 ;\r\n    else if (status === 'sent')\r\n      return 100;   \r\n    else\r\n      return 0;\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n\r\n    setSendingProgress((prevProgress) => (prevProgress >= 100 ? 100 : getProgress(sendingStatus)));\r\n\r\n  }, [sendingStatus]);\r\n\r\n  const resendFilesClicked = (event) =>\r\n  {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus('downloadFailed');\r\n    setSendJustToPCR(true);\r\n\r\n\r\n    BookService.regenerateFiles(smartLinkId).then( res => {\r\n\r\n      interval = setInterval(() => {\r\n             \r\n       // setProgress(sendingCounter);\r\n\r\n       // setProgress(getProgress(sendingStatus));\r\n\r\n       BookService.getLinkDetails(smartLinkId).then( res => {\r\n \r\n         setSendingStatus(res.data.status);\r\n \r\n         if (res.data.status === 'sent')\r\n         {\r\n           setSending(false);\r\n           setSent(true);\r\n           setRefresh(!refresh);\r\n           clearInterval(interval);\r\n         }\r\n       });\r\n \r\n     }, 1000);\r\n\r\n   }).catch(err => {\r\n     console.log(err);\r\n     setSending(false);\r\n   });\r\n\r\n\r\n  }\r\n \r\n  const resendEmailsClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus('downloadFailed');\r\n \r\n\r\n    BookService.resendEmails(smartLinkId).then( res => {\r\n\r\n       interval = setInterval(() => {\r\n        \r\n       \r\n\r\n        // setProgress(sendingCounter);\r\n\r\n        // setProgress(getProgress(sendingStatus));\r\n\r\n        BookService.getLinkDetails(smartLinkId).then( res => {\r\n  \r\n          setSendingStatus(res.data.status);\r\n  \r\n          if (res.data.status === 'sent')\r\n          {\r\n            setSending(false);\r\n            setSent(true);\r\n            setRefresh(!refresh);\r\n            clearInterval(interval);\r\n          }\r\n        });\r\n  \r\n      }, 1000);\r\n\r\n    }).catch(err => {\r\n      console.log(err);\r\n      setSending(false);\r\n    });\r\n\r\n  \r\n\r\n  }\r\n\r\n  const cancelResendEmailsClicked = (event) => {\r\n    setMatched(false);\r\n  }\r\n\r\n  const downloadLabReport = (id) =>\r\n  {\r\n       PDFService.downloadPdfLabReport(id).then( (res) => \r\n       {       \r\n         const file = new Blob(\r\n           [res.data], \r\n           {type: 'application/pdf'});\r\n\r\n         const fileURL = URL.createObjectURL(file);   \r\n         window.open(fileURL, \"_blank\");\r\n\r\n       \r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={5}>\r\n            <div style={{textAlign:\"left\", paddingLeft:\"10px\"}}>\r\n                <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\">\r\n                        <Grid item>\r\n                                <span style={{paddingRight: \"15px\", color: \"#555\"}}> <WarningIcon style={{fontSize:\"2.2rem\"}}/> </span>\r\n                        </Grid>\r\n                        <Grid item>\r\n                              <span style={{fontSize: '1.4rem', fontWeight:\"600\", color: \"#444\"}}> Unmatched Records </span>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Tooltip title=\"Refresh\" placement=\"right\">\r\n                                <IconButton\r\n                                  color=\"primary\"\r\n                                  className={classes.refreshButton}\r\n                                  onClick={refreshClicked}\r\n                                >\r\n                                  <RefreshIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                  </Grid>\r\n                </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          <ToggleButtonGroup\r\n            value={selectedTab}\r\n            style={{ marginBottom: \"10px\" }}\r\n            exclusive\r\n            onChange={handleTabChanged}\r\n            aria-label=\"text alignment\"\r\n          >\r\n            <ToggleButton value=\"unresolved\" aria-label=\"left aligned\">\r\n              UnResolved\r\n            </ToggleButton>\r\n            <ToggleButton value=\"archived\" aria-label=\"centered\">\r\n              Archived\r\n            </ToggleButton>\r\n          </ToggleButtonGroup>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n        PaperComponent={PaperComponent}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"draggable-dialog-title\">\r\n          <Grid\r\n            container\r\n            spacing={2}\r\n            direction=\"row\"\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <WbIncandescentIcon\r\n                style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item>\r\n              <div\r\n                style={{\r\n                  color: \"#2f942e\",\r\n                  paddingBottom: \"12px\",\r\n                  fontWeight: \"800\",\r\n                }}\r\n              >\r\n                {\" \"}\r\n                SMART MATCH{\" \"}\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Divider />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div\r\n            style={{\r\n              height: \"600px\",\r\n              // width: \"1200px\",\r\n            }}\r\n          >\r\n            {(!likelyBookings || !smartLinkDetails) && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  alignItems=\"center\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <LoaderSpinner\r\n                      style={{ marginTop: \"170px\" }}\r\n                      type=\"Grid\"\r\n                      color=\"#2f942e\"\r\n                      height={100}\r\n                      width={100}\r\n                      timeout={0} //3 secs\r\n                    />\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        color: \"#2f942e\",\r\n                        paddingBottom: \"12px\",\r\n                        fontWeight: \"800\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      SEARCHING ...{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {likelyBookings && likelyBookings.length === 0 && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  alignItems=\"center\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        color: \"#2f942e\",\r\n                        paddingBottom: \"12px\",\r\n                        fontWeight: \"800\",\r\n                        marginTop: \"230px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      SORRY, NO RECORDS FOUND !{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {likelyBookings && smartLinkDetails && likelyBookings.length > 0 && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"flex-start\"\r\n                  alignItems=\"stretch\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"1.1rem\",\r\n                        fontWeight: \"600\",\r\n                        color: \"#2f942e\",\r\n                        marginBottom: \"15px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      LAB RECORD :\r\n                    </div>\r\n\r\n                    <Grid\r\n                      style={{ paddingLeft: \"20px\", paddingBottom: \"20px\" }}\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"flex-start\"\r\n                      alignItems=\"flex-start\"\r\n                      spacing={4}\r\n                    >\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Forename:</span>\r\n                        <span className={classes.infoData}>\r\n                          {smartLinkDetails.forename}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Surname:</span>\r\n                        <span className={classes.infoData}>\r\n                          {smartLinkDetails.surname}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>D.O.B:</span>\r\n                        <span className={classes.infoData}>\r\n                          {FormatDateFromString(smartLinkDetails.birthDate)}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Test Date:</span>\r\n                        <span className={classes.infoData}>\r\n                          {FormatDateFromString(smartLinkDetails.testDate)}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n\r\n                    <Divider />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"1.1rem\",\r\n                        fontWeight: \"600\",\r\n                        color: \"#2f942e\",\r\n                        marginBottom: \"15px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      BEST MATCHES :\r\n                    </div>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Table size=\"small\">\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>Select</TableCell>\r\n                          <TableCell>Match</TableCell>\r\n                          <TableCell>Forename</TableCell>\r\n                          <TableCell>Surname</TableCell>\r\n                          <TableCell>D.O.B</TableCell>\r\n                          <TableCell>Email</TableCell>\r\n                          <TableCell>Test Date</TableCell>\r\n                          <TableCell></TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {likelyBookings.map((row) => (\r\n                          <TableRow key={row._id}>\r\n                            <TableCell>\r\n                              <Tooltip\r\n                                title={\r\n                                  row.birthDate !== smartLinkDetails.birthDate\r\n                                    ? '\"D.O.B\" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE \"D.O.B\" OF THE SELECTED BOOKING IS CORRECT !'\r\n                                    : \"\"\r\n                                }\r\n                              >\r\n                                <FormControlLabel\r\n                                  control={\r\n                                    <Checkbox\r\n                                      checked={\r\n                                        selectedBooking &&\r\n                                        selectedBooking._id === row._id\r\n                                      }\r\n                                      disabled={\r\n                                        matched || matching\r\n                                      }\r\n                                      onChange={(event) =>\r\n                                        handleCheckChanged(event, row)\r\n                                      }\r\n                                      name=\"checkedA\"\r\n                                    />\r\n                                  }\r\n                                  label=\"\"\r\n                                />\r\n                              </Tooltip>\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={{\r\n                                fontWeight: \"800\",\r\n                                color: \"#2f942e\",\r\n                                fontSize: \"1.1rem\",\r\n                              }}\r\n                            >{`${row.likelihood} %`}</TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.forenameCapital ===\r\n                                smartLinkDetails.forename\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"#ff871f\" }\r\n                              }\r\n                            >\r\n                              {row.forenameCapital}\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.surnameCapital === smartLinkDetails.surname\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"#ff871f\" }\r\n                              }\r\n                            >\r\n                              {row.surnameCapital}\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.birthDate === smartLinkDetails.birthDate\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"red\" }\r\n                              }\r\n                            >\r\n                              <Grid\r\n                                container\r\n                                direction=\"column\"\r\n                                justify=\"center\"\r\n                                alignItems=\"center\"\r\n                                spacing={1}\r\n                              >\r\n                                <Grid item>\r\n                                  {row.birthDate !==\r\n                                    smartLinkDetails.birthDate && (\r\n                                    <span style={{ textAlign: \"center\" }}>\r\n                                      <ReportProblemIcon />\r\n                                    </span>\r\n                                  )}\r\n                                </Grid>\r\n                                {FormatDateFromString(row.birthDate)}\r\n                                <Grid item></Grid>\r\n                              </Grid>\r\n                            </TableCell>\r\n                            <TableCell>{row.email?.toUpperCase()}</TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                dateformat(\r\n                                  row.samplingTimeStamp,\r\n                                  \"yyyy-mm-dd\"\r\n                                ) === smartLinkDetails.testDate\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"red\" }\r\n                              }\r\n                            >\r\n                              {FormatDateFromString(dateformat(row.samplingTimeStamp, \"yyyy-mm-dd\"))}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Button\r\n                                color=\"primary\"\r\n                                disabled = {sending}\r\n                                onClick={(event) =>\r\n                                  seeDetailsClicked(event, row)\r\n                                }\r\n                              >\r\n                                See Details\r\n                              </Button>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  spacing = {1}\r\n                  alignItems=\"center\"\r\n                >\r\n\r\n                {!matched && (\r\n                  <React.Fragment>\r\n                        <Grid item>\r\n                          <Button\r\n                            disabled = {!selectedBooking || matching}\r\n                            className={classes.matchButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {matchRecords}\r\n                          >\r\n                            GO Match THE Records\r\n                          </Button>\r\n                        </Grid>\r\n\r\n                        {!selectedBooking && (\r\n                            <Grid item>\r\n                              <Alert severity=\"warning\">No Record is Selected ! — Please select a record you think it is a match.</Alert>\r\n                          </Grid>\r\n                        )}\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n                {matched && !sent && !sending && (\r\n                  <React.Fragment>\r\n\r\n                    <Grid item>\r\n            \r\n                         <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\"> Success — The Records are Matched Now !</Alert>\r\n                    \r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n\r\n                      <div style={{paddingTop:\"5px\", fontSize:\"1rem\", fontWeight: \"500\", color: \"#555\"}}>\r\n                         Do you want to Resend the LAB Report {selectedBooking.certificate ? ' and Certificate' : ''}  Now?\r\n                      </div>\r\n\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.resendButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {resendEmailsClicked}\r\n                          >\r\n                            YES ! RESEND THE EMAILS\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.cancelButton}\r\n                            variant=\"contained\"\r\n                            color=\"default\"\r\n                            onClick = {cancelResendEmailsClicked}\r\n                          >\r\n                            NO ! NOT NOW\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    \r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.resendFilesButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {resendFilesClicked}\r\n                          >\r\n                            Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n            \r\n                         <Alert style={{marginTop:\"10px\",  paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"warning\">\r\n                            Caution! — The LAB Report and Certificate will be Sent According to the Record you have Selected !\r\n                          </Alert>\r\n       \r\n                   </Grid>\r\n\r\n\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n                        {matched && (sending || sent) && ( \r\n                          <Grid item>\r\n\r\n                            <div style={{paddingTop: \"50px\", color: \"#2f942e\" , fontWeight:\"600\", fontSize: \"1rem\"}}>\r\n                                 {sending && !sent && (\r\n                                   'Sending ...'\r\n                                 )}\r\n\r\n                                 {sent && !sendJustToPCR && (\r\n                                     <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\">\r\n                                          Success! — The LAB Report {selectedBooking.certificate? ' and Certificate ': ' ' }  Successfully Sent.\r\n                                     </Alert>\r\n                                 )}\r\n\r\n                                {sent && sendJustToPCR && (\r\n                                     <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\">\r\n                                          Success! — The LAB Report {selectedBooking.certificate? ' and Certificate ': ' ' }  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk .\r\n                                     </Alert>\r\n                                 )}\r\n\r\n\r\n\r\n                                 \r\n                            </div>\r\n                            \r\n                          </Grid>\r\n                          \r\n                        )}\r\n\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n\r\n              {matched && (sending || sent) && (\r\n                  <React.Fragment>\r\n\r\n                      <div style={{marginTop:\"10px\", width:\"50%\", marginLeft: \"27%\"}}>\r\n                        \r\n                           <LinearProgressWithLabel variant=\"determinate\" color=\"primary\"  value={sendingProgress} />     \r\n\r\n                      </div>\r\n\r\n                      <div style={{paddingTop: \"30px\", color: \"#2f942e\" , fontWeight:\"600\", fontSize: \"1rem\",  marginLeft: \"45%\"}}>\r\n                            {sending && !sent && (\r\n                                   'PLEASE WAIT ...'\r\n                                 )}     \r\n                                  \r\n                    </div>\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n\r\n          </div>\r\n\r\n          <BookingDialog\r\n            booking={seeDetailsBooking}\r\n            open={seeDetailsDialogOpen}\r\n            onClose={handleCloseSeeDetaisDialog}\r\n            deleteButtonDisabled={true}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 100;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 )\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                          {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}>\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 5;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}>\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\nimport BookingDialog from '../BookingDialog';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        height : \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        display: \"flex\",\r\n        alignItems : \"flex-start\",\r\n        justifyItems: \"flex-start\",\r\n        paddingLeft : \"10px\"\r\n\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"10%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n    bookingBox: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#ebedf7\",\r\n        color: \"#3f51b5\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#3f51b5\",\r\n            color: \"#ebedf7\"\r\n          },\r\n    },\r\n\r\n    bookingBoxSampleTaken: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#0066cc\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#0059b3\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n    bookingBoxPositive: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#d40b0b\",\r\n        color: \"#fff2f2\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#bf0000\",\r\n            color: \"#fff\"\r\n          },\r\n    },\r\n\r\n    bookingBoxReportSent: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#009900\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#006e00\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n  \r\n\r\n  }));\r\n\r\n\r\n\r\nconst DayViewCell = ({key, date, time}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookings, setBookings] = React.useState(null);\r\n    const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [refresh, setRefresh] = React.useState(true); \r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n    }, [date]);\r\n\r\n    useEffect( () => \r\n    {\r\n        if (bookings) {\r\n\r\n\r\n            if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0)\r\n            {\r\n                const search = state.dayViewCalFilter.trim().toUpperCase();\r\n                setFilteredBookings( bookings.filter(booking => booking.forenameCapital.indexOf(search) >= 0\r\n                                                            ||  booking.surnameCapital.indexOf(search) >= 0\r\n                                                            ||  `${booking.forenameCapital} ${booking.surnameCapital}`.indexOf(search) >= 0\r\n                    \r\n                    ));\r\n            }\r\n            else\r\n            {\r\n                setFilteredBookings([...bookings]);\r\n            }\r\n        }\r\n\r\n    }, [state.dayViewCalFilter, bookings]);\r\n \r\n\r\n\r\n    useEffect ( () => {\r\n       \r\n        const fetchData = async () =>\r\n        {\r\n            if (!date || date.length <= 0 || !time || time.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n         \r\n            // if (isPast)\r\n            // {\r\n            //     setBookings([]);\r\n            //     return;\r\n            // }\r\n    \r\n            setBookings(null);\r\n    \r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n            if (!res || openDialog)\r\n            {\r\n                res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }\r\n          \r\n          \r\n            if (res.data.status === 'OK')\r\n            {\r\n                setBookings(res.data.bookings);\r\n            }   \r\n        }\r\n\r\n        if (openDialog)\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStr' && record.query ===  date))}));\r\n        }\r\n\r\n         fetchData();\r\n     \r\n    }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n    const bookingCliked = (event, booking) =>\r\n    {\r\n        setSelectedBooking(booking);\r\n        setOpenDialog(true);\r\n    }\r\n\r\n    \r\n\r\n    const getBookingClass = (status) =>\r\n    {\r\n        switch (status) {\r\n\r\n            case 'sample_taken':\r\n                return classes.bookingBoxSampleTaken;\r\n            case 'positive':\r\n                return classes.bookingBoxPositive;\r\n            case 'report_sent':\r\n            case 'report_cert_sent':\r\n                return classes.bookingBoxReportSent;     \r\n\r\n            default : \r\n                return classes.bookingBox;\r\n        }\r\n    }\r\n\r\n    const getBookingsBox = (_bookings) =>\r\n    {\r\n        if (_bookings === null) \r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookings.length > 0)\r\n        {\r\n           return (\r\n                _bookings.map(booking => (\r\n\r\n                    <div style={booking.tr ? {borderTop: \"5px solid #d00fd6\"} : {} } className={getBookingClass(booking.status)} onClick={event => bookingCliked(event,booking)}>\r\n\r\n                        {`${booking.forenameCapital}-${booking.surnameCapital}`.substring(0,15)}\r\n\r\n                    </div>\r\n\r\n                ))\r\n\r\n           );\r\n        }\r\n    }\r\n\r\n\r\n    const handleCloseDialog = () =>\r\n    {\r\n        setOpenDialog(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}>\r\n\r\n              {getBookingsBox(filteredBookings)}\r\n\r\n            </div>\r\n\r\n            <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n            />\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n  };\r\n\r\n \r\n  \r\nexport default DayViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n  headers : {\r\n      'Authorization' : authToken,\r\n       'Content-Type': 'application/json',\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n   static changeDepositBooking = (bookingId, deposit) => {\r\n      return API.post(`/api/gynae/book/changedepositbooking?id=${bookingId}&deposit=${deposit}`);\r\n   }\r\n\r\n   static addNewBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gynae/book/addnewbooking`, payload);\r\n   }\r\n\r\n   static sendRegFormEmail = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gynae/book/sendregformemail?id=${bookingId}`);\r\n   }\r\n\r\n   static payBooking = (bookingId,price, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/gynae/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}&price=${price}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gynae/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getShouldRefundsCount = () =>\r\n   {\r\n      return API.get(`/api/gynae/book/getshouldrefundscount?`);\r\n   }\r\n\r\n   static manualRefundBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gynae/payment/manualrefundpayment`, {bookingId: bookingId});\r\n   }\r\n\r\n   static refundBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gynae/payment/refundpayment`, {bookingId: bookingId});\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountAll = () =>\r\n   {\r\n      return API.get(`/api/gynae/book/getallbookingscountall`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/gynae/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/gynae/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static changeToPatientAttended = (id) =>\r\n   {\r\n      return API.post(`/api/gynae/book/changetopatientattended?id=${id}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gynae/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/gynae/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gynae/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gynae/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/gynae/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/gynae/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/gynae/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gynae/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/gynae/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gynae/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gynae/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/gynae/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gynae/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n}","import API from './api';\r\n\r\nexport default class PDFService {\r\n\r\n\r\n    static downloadGynaeRegForm = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadgynaeregform?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n\r\n    static downloadCovidForm1 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform1?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadCovidForm2 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform2?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfResult = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfresult?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfCert = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfcert?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfLabReport = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdflabreport?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n\r\n}","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function PayDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [paymentMethod, setPaymentMethod] = useState(\"credit card\");\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [price, setPrice] = useState(\"\");\r\n  const [priceError, setPriceError] = useState(false);\r\n\r\n\r\n  const priceChanged = (event) =>\r\n  {\r\n    setPrice(event.target.value)\r\n    setPriceError(false)\r\n  }\r\n\r\n  const paymentMethodChanged = (event) => {\r\n    setPaymentMethod(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    props.handleClose();\r\n    setPaymentMethod(\"credit card\");\r\n    setPrice('')\r\n    setCorporate(corporates[0]);\r\n    setSaving(false);\r\n  };\r\n\r\n  const corporateChanged = (event) => {\r\n    setCorporate(event.target.value);\r\n  };\r\n\r\n  const payClicked = async () => {\r\n\r\n\r\n    if (!price || price.trim().length === 0 || price === '0')\r\n    {\r\n      setPriceError(true)\r\n      return\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n  \r\n\r\n    try {\r\n      await BookService.payBooking(\r\n        props.booking._id,\r\n        price,\r\n        paymentMethod,\r\n        paymentMethod === \"corporate\" ? corporate : \"\"\r\n      );\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingPayChanged: !state.bookingPayChanged ? true : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <CreditCardIcon\r\n                    style={{ color: \"#f50057\", fontSize: \"3rem\" }}\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    PAY the CHARGE{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"300px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"space-between\"\r\n                  spacing={2}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Grid item>\r\n                  <TextField\r\n                                autoFocus\r\n                                error={priceError}\r\n                                label=\"OTC Charges\"\r\n                                value={price}\r\n                                fullWidth\r\n                                required\r\n                                onChange={priceChanged}\r\n                                name=\"product-price\"\r\n                                id=\"product-price-id\"\r\n                                InputProps={{\r\n                                  inputComponent: NumberFormatCustom,\r\n                                  startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                      £\r\n                                    </InputAdornment>\r\n                                  ),\r\n                                }}\r\n                              />\r\n\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <div style={{ fontSize: \"17px\" }}>\r\n                      {\" \"}\r\n                      How do you want to pay?{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControl component=\"fieldset\">\r\n                      <RadioGroup\r\n                        aria-label=\"paymentMethod\"\r\n                        name=\"paymentMethod\"\r\n                        value={paymentMethod}\r\n                        onChange={paymentMethodChanged}\r\n                      >\r\n                        <FormControlLabel\r\n                          value=\"credit card\"\r\n                          control={<Radio />}\r\n                          label=\"Credit Card\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"cash\"\r\n                          control={<Radio />}\r\n                          label=\"Cash\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"corporate\"\r\n                          control={<Radio />}\r\n                          label=\"Corporate\"\r\n                        />\r\n                      </RadioGroup>\r\n\r\n                      {paymentMethod === \"corporate\" && (\r\n                        <FormControl\r\n                          style={{ marginTop: \"10px\" }}\r\n                          className={classes.formControl}\r\n                        >\r\n                          <Select\r\n                            labelId=\"select-corporate\"\r\n                            id=\"select-corporate-id\"\r\n                            value={corporate}\r\n                            onChange={corporateChanged}\r\n                          >\r\n                            {corporates.map((element) => (\r\n                              <MenuItem\r\n                                value={element}\r\n                              >{`${element}`}</MenuItem>\r\n                            ))}\r\n                          </Select>\r\n                        </FormControl>\r\n                      )}\r\n                    </FormControl>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item></Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={payClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Pay\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  DialogActions,\r\n  DialogContentText,\r\n  Divider,\r\n  FormControlLabel,\r\n  IconButton,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport PDFService from \"./services/PDFService\";\r\n\r\nimport { calculatePrice } from \"./PriceCalculator\";\r\n\r\nimport bookingService from \"./services/BookService\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport BookService from \"./services/BookService\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {\r\n  FormatDateFromString,\r\n  RevertFormatDateFromString,\r\n} from \"./DateFormatter\";\r\nimport PayDialog from \"./PayDialog\";\r\n\r\nimport PrintIcon from \"@material-ui/icons/Print\";\r\nimport UndoIcon from \"@material-ui/icons/Undo\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\n\r\nimport FileCopyOutlinedIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor: \"#373737\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor: \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#333\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n    listStyle: \"none\",\r\n    padding: \"0\",\r\n    margin: \"0\",\r\n  },\r\n\r\n  li: {\r\n    marginBottom: \"15px\",\r\n  },\r\n\r\n  icon: {\r\n    marginRight: \"8px\",\r\n  },\r\n\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n\r\n  lineThrough: {\r\n    textDecoration: \"line-through\",\r\n  },\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails: {\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\",\r\n  },\r\n\r\n  infoData: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontWeight: \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n\r\n  Accordion: {\r\n    backgroundColor: \"#f5f5f5\",\r\n    color: \"#222\",\r\n  },\r\n\r\n  AccordionDeleted: {\r\n    backgroundColor: \"#aaa\",\r\n    color: \"#555\",\r\n  },\r\n\r\n  DownloadForm: {\r\n    marginTop: \"10px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n\r\n  infoDataCharges: {\r\n    fontSize: \"18px\",\r\n    color: \"green\",\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  infoDataChargesHigher: {\r\n    fontSize: \"18px\",\r\n    color: \"red\",\r\n    fontWeight: \"600\",\r\n  },\r\n  BookedLabel: {\r\n    color: \"#606060\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    color: \"#0066aa\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  PositiveLabel: {\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\",\r\n  },\r\n\r\n  EditButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  ResendEmailsButton: {\r\n    // marginBottom : \"20px\",\r\n    color: \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  PayButton: {\r\n    marginLeft: \"70px\",\r\n    width: \"300px\",\r\n  },\r\n\r\n  PayLabel: {\r\n    marginLeft: \"20px\",\r\n\r\n    color: \"#2f942e\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  RestoreButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#eee\",\r\n    color: \"#333\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  DeleteButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\",\r\n    },\r\n\r\n    padding: \"10px\",\r\n  },\r\n\r\n  SaveButton: {\r\n    marginBottom: \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor: \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  CancelButton: {\r\n    marginBottom: \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    padding: \"0px\",\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  checkIconSmall: {\r\n    color: \"green\",\r\n    paddingTop: \"5px\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  centeredLabel: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  PriceLabelPaid:{\r\n    color: theme.palette.primary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n  PriceLabelNotPaid:{\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#alert-dialog-slide-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const [emailSent, setEmailSent] = React.useState(false);\r\n\r\n  const [openResendDialog, setOpenResendDialog] = React.useState(false);\r\n  const [openPayDialog, setOpenPayDialog] = React.useState(false);\r\n  const [openRefundDialog, setOpenRefundDialog] = React.useState(false);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [editMode, setEditMode] = React.useState({ edit: false, person: null });\r\n  const [deleteMode, setDeleteMode] = React.useState({\r\n    delete: false,\r\n    person: null,\r\n  });\r\n  const [restoreMode, setRestoreMode] = React.useState({\r\n    restore: false,\r\n    person: null,\r\n  });\r\n\r\n  const [saving, setSaving] = React.useState(false);\r\n  const [deleting, setDeleting] = React.useState(false);\r\n  const [restoring, setRestoring] = React.useState(false);\r\n\r\n  const [validationError, setValidationError] = React.useState({});\r\n\r\n  const [bookingDate, setBookingDate] = React.useState(\"\");\r\n  const [bookingTime, setBookingTime] = React.useState(\"\");\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [tel, setTel] = React.useState(\"\");\r\n  const [notes, setNotes] = React.useState(\"\");\r\n  const [service, setService] = React.useState(\"\");\r\n\r\n  const [refreshData, setRefreshData] = React.useState(false);\r\n\r\n  const [booking, setBooking] = React.useState(null);\r\n\r\n  const [recordChanged, setRecordChanged] = React.useState(false);\r\n\r\n  const [fieldChanged, setFieldChanged] = React.useState(false);\r\n\r\n  const [openUndoPayDialog, setOpenUndoPayDialog] = React.useState(false);\r\n\r\n  const [openTimeStampDialog, setOpenTimeStampDialog] = React.useState(false);\r\n\r\n  const handleCloseUndoPayDialog = () => {\r\n    setOpenUndoPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleClosePayDialog = () => {\r\n    setOpenPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseRefundDialog = () => {\r\n    setOpenRefundDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (booking) {\r\n      const isChanged =\r\n        bookingDate !== FormatDateFromString(booking.bookingDate) ||\r\n        bookingTime !== booking.bookingTime ||\r\n        fullname !== booking.fullname ||\r\n        email !== booking.email ||\r\n        tel !== booking.phone ||\r\n        service !== booking.service ||\r\n        notes !== booking.notes;\r\n\r\n      setRecordChanged(isChanged);\r\n    }\r\n  }, [fieldChanged]);\r\n\r\n  useEffect(() => {\r\n    if (!props.open) {\r\n      setTimeout(() => {\r\n        setEditMode({ edit: false, person: null });\r\n        setRecordChanged(false);\r\n      }, 500);\r\n    }\r\n  }, [props.open]);\r\n\r\n  const bookingDateChanged = (event) => {\r\n    setBookingDate(event.target.value);\r\n    setValidationError({ ...validationError, bookingDateError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const bookingTimeChanged = (event) => {\r\n    setBookingTime(event.target.value);\r\n    setValidationError({ ...validationError, bookingTimeError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const telChanged = (event) => {\r\n    setTel(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const serviceChanged = (event) => {\r\n    setService(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    if (status === \"booked\") {\r\n      return <div className={classes.BookedLabel}> Booking Made </div>;\r\n    } else if (status === \"patient_attended\") {\r\n      return (\r\n        <div className={classes.PatientAttendedLabel}> Patient Attended </div>\r\n      );\r\n    } else {\r\n      return \"Unknown\";\r\n    }\r\n  };\r\n\r\n  const handleEditModeChanged = (edit, person) => {\r\n    if (edit) {\r\n      setFullname(person.fullname);\r\n      setBookingDate(FormatDateFromString(person.bookingDate));\r\n      setBookingTime(person.bookingTime.toUpperCase());\r\n      setEmail(person.email);\r\n      setTel(person.phone);\r\n      setService(person.service);\r\n      if (person.notes) {\r\n        setNotes(person.notes);\r\n      }\r\n\r\n      setEditMode({ edit: edit, person: person });\r\n    } else if (!edit && !person) {\r\n      setEditMode({ edit: edit, person: person });\r\n      setRecordChanged(false);\r\n    } else if (!edit && person) {\r\n      const booking = {};\r\n      const bookingId = person._id;\r\n      booking.email = email;\r\n      booking.phone = tel;\r\n      booking.fullname = fullname;\r\n      booking.notes = notes;\r\n      booking.service = service;\r\n      booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n      booking.bookingTime = bookingTime;\r\n      booking.bookingRef = person.bookingRef;\r\n\r\n      if (validateBooking(booking)) {\r\n        updateBooking({ bookingId: bookingId, person: booking });\r\n      }\r\n    }\r\n  };\r\n\r\n  const validateDate = (str) => {\r\n    var error = false;\r\n    if (!str || str.length !== 10) {\r\n      error = true;\r\n    }\r\n\r\n    if (str.charAt(4) !== \"-\" || str.charAt(7) !== \"-\") {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n      if (!result) {\r\n        error = true;\r\n      }\r\n\r\n      const year = parseInt(str.substr(0, 4));\r\n      const month = parseInt(str.substr(5, 2));\r\n      const day = parseInt(str.substr(8, 2));\r\n\r\n      if (year < 1900) {\r\n        error = true;\r\n      }\r\n\r\n      if (month < 1 || month > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (day > 31) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateTime = (str) => {\r\n    var error = false;\r\n\r\n    const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n    if (!result) {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const hour = parseInt(str.substr(0, 2));\r\n      const minute = parseInt(str.substr(3, 2));\r\n\r\n      if (hour < 0 || hour > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (minute < 0 || minute > 59) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateBooking = (booking) => {\r\n    var error = false;\r\n\r\n    if (!validateDate(booking.bookingDate)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingDateError: true });\r\n    }\r\n\r\n    if (!validateTime(booking.bookingTime)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingTimeError: true });\r\n    }\r\n    return !error;\r\n  };\r\n\r\n  const updateBooking = (payload) => {\r\n    setSaving(true);\r\n    bookingService\r\n      .updateBooking(payload)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const deleteBooking = (id) => {\r\n    setDeleting(true);\r\n    bookingService\r\n      .deleteBooking(id)\r\n      .then((res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const restoreBooking = (id) => {\r\n    setRestoring(true);\r\n    bookingService\r\n      .unDeleteBooking(id)\r\n      .then((res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteModeChanged = (del, person) => {\r\n    if (del) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && !person) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && person) {\r\n      deleteBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n    if (restore) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && !person) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && person) {\r\n      restoreBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const changeBackToBookingMade = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeBackToBookingMade(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const changeToPatientAttended = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeToPatientAttended(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const Pay = (event, id) => {\r\n    setSelectedBooking(booking);\r\n    setOpenPayDialog(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      BookService.getBookingById(props.booking._id)\r\n        .then((res) => {\r\n          setBooking(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n    }\r\n  }, [refreshData, state.bookingPayChanged]);\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      setBooking(props.booking);\r\n    }\r\n  }, [props.booking]);\r\n\r\n  const undoPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.unPayBooking(booking._id);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n  };\r\n\r\n  const refundPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.refundBooking(booking._id);\r\n      setSaving(false);\r\n      updateShouldRefundsCount();\r\n      setOpenRefundDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenRefundDialog(false);\r\n    }\r\n  };\r\n\r\n  const updateShouldRefundsCount = async () => {\r\n    try {\r\n      const res = await BookService.getShouldRefundsCount();\r\n      if (res && res.data && res.data.status === \"OK\") {\r\n        setState((state) => ({ ...state, shouldRefunsCount: res.data.count }));\r\n      }\r\n    } catch (ex) {\r\n      console.error(ex);\r\n    }\r\n  };\r\n\r\n  const downloadRegForm = (id) => {\r\n    PDFService.downloadGynaeRegForm(id)\r\n      .then((res) => {\r\n        const file = new Blob([res.data], { type: \"application/pdf\" });\r\n\r\n        const fileURL = URL.createObjectURL(file);\r\n        window.open(fileURL, \"_blank\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const sendRegForm = (id) => {\r\n    setSaving(true);\r\n    setEmailSent(false);\r\n    BookService.sendRegFormEmail(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        if (res.data.status === \"OK\") {\r\n          setEmailSent(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const manualRefund = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.manualRefundBooking(booking._id);\r\n      setSaving(false);\r\n      updateShouldRefundsCount();\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenRefundDialog(false);\r\n    }\r\n  };\r\n\r\n  const depositChanged = async (event) =>\r\n  {\r\n    const checked = event.target.checked\r\n    const deposit = checked ? 100 : 0\r\n    setSaving(true);\r\n    try {\r\n      await BookService.changeDepositBooking(booking._id, deposit);\r\n      setSaving(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  const onClose = () => {\r\n    setEmailSent(false);\r\n    props.onClose();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"sm\"\r\n            open={props.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={onClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n          >\r\n            <DialogTitle\r\n              id=\"alert-dialog-slide-title\"\r\n              style={\r\n                booking.tr ? { backgroundColor: \"#7e0082\", color: \"#fff\" } : {}\r\n              }\r\n            >\r\n              <div style={{ position: \"absolute\", top: \"25x\", left: \"25px\" }}>\r\n                <Tooltip title=\"COPY EDIT LINK TO CLIPBOARD\">\r\n                  <IconButton\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(\r\n                        `https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/${booking._id}`\r\n                      );\r\n                      setCopied(true);\r\n                      setTimeout(() => {\r\n                        setCopied(false);\r\n                      }, 1500);\r\n                    }}\r\n                    aria-label=\"delete\"\r\n                    className={classes.margin}\r\n                    size=\"small\"\r\n                  >\r\n                    <FileCopyOutlinedIcon\r\n                      style={booking.tr ? { color: \"#ddd\" } : {}}\r\n                      fontSize=\"14px\"\r\n                    />\r\n                  </IconButton>\r\n                </Tooltip>\r\n\r\n                <span\r\n                  hidden={!copied}\r\n                  style={{ fontSize: \"12px\", transition: \"all 1s ease-in\" }}\r\n                >\r\n                  {\" \"}\r\n                  Copied{\" \"}\r\n                </span>\r\n              </div>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", right: \"60px\", backgroundColor:CalendarColors.GYNAE_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\"}}>\r\n                    GYNAE\r\n              </div>\r\n\r\n              {/* {booking.tr && (\r\n                <div style={{position:\"absolute\",  right: \"15px\"}}>\r\n                     TR\r\n                </div>\r\n\r\n              )} */}\r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                spacing={2}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <div\r\n                    style={\r\n                      booking.deleted\r\n                        ? {\r\n                            paddingBottom: \"5px\",\r\n                            textDecoration: \"line-through\",\r\n                          }\r\n                        : {}\r\n                    }\r\n                  >\r\n                    {`${booking.fullname}`}\r\n                  </div>\r\n                </Grid>\r\n\r\n                {booking.deleted && (\r\n                  <Grid item>\r\n                    <Tooltip title=\"This record has been deleted.\">\r\n                      <DeleteIcon\r\n                        style={\r\n                          booking.tr\r\n                            ? {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#fff\",\r\n                                fontSize: 25,\r\n                              }\r\n                            : {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#333\",\r\n                                fontSize: 25,\r\n                              }\r\n                        }\r\n                      />\r\n                    </Tooltip>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  // height: \"550px\",\r\n                  paddingTop: \"0px\",\r\n                }}\r\n              >\r\n                <Grid item xs={12} md={12} key={`panel0`}>\r\n                  <div className={classes.infoDetails}>\r\n                    <ul className={classes.ul}>\r\n                      {/* Restore Functionality ******************************************* */}\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"500\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                            color: \"#333\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to restore this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !booking.deleted ||\r\n                          (restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.RestoreButton}\r\n                        >\r\n                          Restore This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Restore this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/*  ******************************************************************* */}\r\n\r\n                      {/* Edit Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          deleteMode.delete ||\r\n                          (editMode.edit && editMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleEditModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.EditButton}\r\n                        >\r\n                          Edit Booking Info\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={saving || !recordChanged}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          Save Changes\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={saving}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      {/* Delete Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"600\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to delete this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          props.deleteButtonDisabled ||\r\n                          booking.deleted ||\r\n                          editMode.edit ||\r\n                          (deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        {booking.OTCCharges > 0 && (\r\n                          <Tooltip title={\"Paid Records Cannot be Deleted!\"}>\r\n                            <div>\r\n                              <Button\r\n                                disabled={booking.OTCCharges > 0}\r\n                                type=\"button\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={() => {\r\n                                  handleDeleteModeChanged(true, booking);\r\n                                }}\r\n                                className={classes.DeleteButton}\r\n                              >\r\n                                Delete This Record\r\n                              </Button>\r\n                            </div>\r\n                          </Tooltip>\r\n                        )}\r\n                        {booking.OTCCharges === 0 && (\r\n                          <Button\r\n                            disabled={booking.OTCCharges > 0}\r\n                            type=\"button\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={() => {\r\n                              handleDeleteModeChanged(true, booking);\r\n                            }}\r\n                            className={classes.DeleteButton}\r\n                          >\r\n                            Delete This Record\r\n                          </Button>\r\n                        )}\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Delete this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED DATE</span>\r\n\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.bookingDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingDateError}\r\n                            className={classes.TextBox}\r\n                            value={bookingDate}\r\n                            onChange={bookingDateChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED TIME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.bookingTime.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingTimeError}\r\n                            className={classes.TextBox}\r\n                            value={bookingTime}\r\n                            onChange={bookingTimeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>FULLNAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.fullname}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={fullname}\r\n                            onChange={fullnameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>EMAIL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.email}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={email}\r\n                            onChange={emailChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TEL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.phone?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={tel}\r\n                            onChange={telChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>SERVICE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.service}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={service}\r\n                            onChange={serviceChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>NOTES</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.notes}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={notes}\r\n                            onChange={notesChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>STATUS</span>{\" \"}\r\n                        {getStatusLabel(booking.status)}\r\n                        {booking.status === \"patient_attended\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"primary\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeBackToBookingMade(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change Back To Booking Made\r\n                            </Button>\r\n                          )}\r\n                        {booking.status === \"booked\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"default\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeToPatientAttended(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change To Patient Attended\r\n                            </Button>\r\n                          )}\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted || editMode.edit}>\r\n                        <Button\r\n                          disabled={!booking.formData}\r\n                          startIcon={<PrintIcon />}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Registration Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted || editMode.edit || booking.formData\r\n                        }\r\n                      >\r\n                        <Button\r\n                          disabled={!booking.email || booking.email.length < 3 }\r\n                          startIcon={<SendIcon />}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            sendRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                          style={{ position: \"relative\" }}\r\n                        >\r\n                          Send Registration Form Email\r\n                          {emailSent && (\r\n                            <div\r\n                              style={{\r\n                                position: \"absolute\",\r\n                                right: \"10px\",\r\n                                top: \"5px\",\r\n                                color: \"#05ad19\",\r\n                              }}\r\n                            >\r\n                              Email Sent\r\n                            </div>\r\n                          )}\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"20px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            {booking.paymentInfo ? \"ONLINE\" : \"PHONE\"} DEPOSIT\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.deposit || booking.deposit === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${booking.deposit.toLocaleString(\r\n                            \"en-GB\"\r\n                          )}`}</span>\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            !booking.paid &&\r\n                            booking.deleted &&\r\n                            booking.deposit > 0 &&\r\n                            booking.paymentInfo && (\r\n                              <Button\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                className={classes.PayButton}\r\n                                onClick={(event) => setOpenRefundDialog(true)}\r\n                              >\r\n                                Refund Deposit\r\n                              </Button>\r\n                            )}\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            !booking.paid &&\r\n                            booking.deleted &&\r\n                            booking.deposit > 0 &&\r\n                            !booking.paymentInfo && (\r\n                              <Button\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                className={classes.PayButton}\r\n                                onClick={(event) => manualRefund()}\r\n                              >\r\n                                <span style={{ textTransform: \"capitalize\" }}>\r\n                                  I made the refund manually\r\n                                </span>\r\n                              </Button>\r\n                            )}\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            // !booking.paid &&\r\n                            !booking.deleted &&\r\n                            // booking.deposit > 0 &&\r\n                            !booking.paymentInfo && (\r\n                              <FormControlLabel\r\n                                style={{marginLeft:\"90px\"}}\r\n                                control={\r\n                                  <Switch\r\n                                    color=\"primary\"\r\n                                    checked={booking.deposit > 0}\r\n                                    onChange={depositChanged}\r\n                                    name=\"deposit\"\r\n                                  />\r\n                                }\r\n                                label={\r\n                                  booking.deposit > 0 ? (\r\n                                    <span className={classes.PriceLabelPaid}>\r\n                                      £100 Deposit Paid\r\n                                    </span>\r\n                                  ) : (\r\n                                    <span className={classes.PriceLabelNotPaid}>\r\n                                      £100 Deposit Not Paid\r\n                                    </span>\r\n                                  )\r\n                                }\r\n                              />\r\n                            )}\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            booking.refund && (\r\n                              <React.Fragment>\r\n                                <span className={classes.PayLabel}>\r\n                                  {\" \"}\r\n                                  <CheckIcon\r\n                                    className={classes.checkIconSmall}\r\n                                  />{\" \"}\r\n                                  Refund Done\r\n                                  {booking.paidBy === \"corporate\"\r\n                                    ? ` \"${booking.corporate}\" `\r\n                                    : \"\"}\r\n                                </span>\r\n                              </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>OTC CHARGES</span>{\" \"}\r\n                        <span\r\n                          style={{ paddingLeft: \"15px\" }}\r\n                          className={\r\n                            !booking.OTCCharges || booking.OTCCharges === 0\r\n                              ? classes.infoDataChargesHigher\r\n                              : classes.infoDataCharges\r\n                          }\r\n                        >{`£${booking.OTCCharges.toLocaleString(\r\n                          \"en-GB\"\r\n                        )}`}</span>\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          !booking.paid &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"secondary\"\r\n                              className={classes.PayButton}\r\n                              onClick={(event) => Pay(event, booking._id)}\r\n                            >\r\n                              Pay\r\n                            </Button>\r\n                          )}\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          booking.paid && (\r\n                            <React.Fragment>\r\n                              <span className={classes.PayLabel}>\r\n                                {\" \"}\r\n                                <CheckIcon\r\n                                  className={classes.checkIconSmall}\r\n                                />{\" \"}\r\n                                Paid by {booking.paidBy}\r\n                                {booking.paidBy === \"corporate\"\r\n                                  ? ` \"${booking.corporate}\" `\r\n                                  : \"\"}\r\n                              </span>\r\n\r\n                              <Tooltip title=\"Undo Payment\">\r\n                                <IconButton\r\n                                  onClick={() => setOpenUndoPayDialog(true)}\r\n                                >\r\n                                  <UndoIcon style={{ color: \"red\" }} />\r\n                                </IconButton>\r\n                              </Tooltip>\r\n                            </React.Fragment>\r\n                          )}\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"10px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            TOTAL CHARGES\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.OTCCharges || booking.OTCCharges === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${(\r\n                            booking.deposit + booking.OTCCharges\r\n                          ).toLocaleString(\"en-GB\")}`}</span>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </Grid>\r\n              </div>\r\n              <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving || deleting || restoring}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n\r\n            <PayDialog\r\n              booking={selectedBooking}\r\n              open={openPayDialog}\r\n              handleClose={handleClosePayDialog}\r\n            />\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openUndoPayDialog}\r\n            onClose={handleCloseUndoPayDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Undo Payment\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to undo payment for this booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseUndoPayDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button onClick={undoPaymentClicked} color=\"secondary\" autoFocus>\r\n                Yes, Undo Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openRefundDialog}\r\n            onClose={handleCloseRefundDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Refund Deposit\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to refund deposit payment for this\r\n                booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseRefundDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button\r\n                onClick={refundPaymentClicked}\r\n                color=\"secondary\"\r\n                autoFocus\r\n              >\r\n                Yes, Refund Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport { Button, Checkbox, CircularProgress, Dialog, DialogContent, DialogTitle, Divider, FormControl, FormControlLabel, Grid, Icon, InputLabel, LinearProgress, Link, makeStyles, MenuItem, Paper, Select, SvgIcon, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport BookingDialog from './BookingDialog';\r\n\r\nimport NewReleasesIcon from '@material-ui/icons/NewReleases';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from 'react-draggable';\r\n\r\nimport * as dateformat from 'dateformat';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\n\r\n\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport PriceCalculator from './PriceCalculator';\r\nimport { corporates } from './Corporates';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel:{\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color : \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\"\r\n  },\r\n\r\n  ExportToExcelButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n   \r\n  },\r\n\r\n  ExportToExcelButtonInline:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n    cursor: \"pointer\",\r\n    padding: \"10px\"\r\n   \r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n},\r\n\r\nth: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntd: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntopSelect: {\r\n  margin: theme.spacing(1),\r\n  minWidth: 80,\r\n},\r\n\r\nnotifyIcon:{\r\n  width: \"16px\",\r\n  height: \"16px\",\r\n  borderRadius: \"50%\",\r\n  backgroundColor : \"rgb(220, 0, 78)\",\r\n  marginLeft: \"10px\"\r\n}\r\n\r\n}));\r\n\r\nconst getTableTitle = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return `Today's Bookings`;\r\n  }else if (str === 'old')\r\n  {\r\n    return `Old Bookings`;\r\n  }else if (str === 'future')\r\n  {\r\n    return `Future Bookings`;\r\n  }else if (str === 'recent')\r\n  {\r\n    return `Recent Bookings`;\r\n  }else if (str === 'live')\r\n  {\r\n    return `Live Bookings`;\r\n  }else if (str === 'completed')\r\n  {\r\n    return `Completed Bookings`;\r\n  }else if (str === 'positive')\r\n  {\r\n    return `Positive Results`;\r\n  }else if (str === 'deleted')\r\n  {\r\n    return `Deleted Records`;\r\n  }else if (str === 'late')\r\n  {\r\n    return `40 Hours Late`;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return `All Bookings`;\r\n  }\r\n\r\n}\r\n\r\nconst getTableIcon = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return <NewReleasesIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'old')\r\n  {\r\n    return <HistoryIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'future')\r\n  {\r\n    return <TimelineIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'recent')\r\n  {\r\n    return <AutorenewIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'live')\r\n  {\r\n    return <LiveTvIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'completed')\r\n  {\r\n    return  <PlaylistAddCheckIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'positive')\r\n  {\r\n    return <AddCircleOutlineIcon style={{fontSize:\"2.2rem\"}} />\r\n  }else if (str === 'deleted')\r\n  {\r\n    return <DeleteIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'late')\r\n  {\r\n    return <HourglassEmptyIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return <DescriptionIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n\r\n}\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [topCount, setTopCount] = React.useState(25)\r\n  const topCountChanged = (event) =>\r\n  {\r\n    setTopCount(event.target.value)\r\n    loadData(event.target.value)\r\n  }\r\n  \r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () =>\r\n  {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  }\r\n\r\n\r\n  const [fromDate, setFromDate] = React.useState(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ));\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ));\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(dateformat(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n  const [untilDateStr, seUntilDateStr] = useState(dateformat(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const[chkDate, setChkDate] = useState(true);\r\n  const[chkForename, setChkForename] = useState(true);\r\n  const[chkSurname, setChkSurname] = useState(true);\r\n  const[chkDOB, setChkDOB] = useState(true);\r\n  const[chkEmail, setChkEmail] = useState(true);\r\n  const[chkTel, setChkTel] = useState(true);\r\n  const[chkCertificate, setChkCertidicate] = useState(true);\r\n  const[chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const[chkextRef, setChkExtRef] = useState(true);\r\n  const[chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) =>\r\n  {\r\n    setJustCorporate(event.target.checked);\r\n  }\r\n  \r\n\r\n  const chkDateChanged = (event) =>\r\n  {\r\n    setChkDate(event.target.checked);\r\n  }\r\n\r\n  const chkForenameChanged = (event) =>\r\n  {\r\n    setChkForename(event.target.checked);\r\n  }\r\n\r\n  const chkSurnameChanged = (event) =>\r\n  {\r\n    setChkSurname(event.target.checked);\r\n  }\r\n\r\n  const chkDOBChanged = (event) =>\r\n  {\r\n    setChkDOB(event.target.checked);\r\n  }\r\n\r\n  const chkEmailChanged = (event) =>\r\n  {\r\n    setChkEmail(event.target.checked);\r\n  }\r\n\r\n  const chkTelChanged = (event) =>\r\n  {\r\n    setChkTel(event.target.checked);\r\n  }\r\n\r\n  const chkCertificateChanged = (event) =>\r\n  {\r\n    setChkCertidicate(event.target.checked);\r\n  }\r\n\r\n  const chkAntiBodyTestChanged = (event) =>\r\n  {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  }\r\n\r\n  const chkextRefChanged = (event) =>\r\n  {\r\n    setChkExtRef(event.target.checked);\r\n  }\r\n\r\n  const chkPriceChanged = (event) =>\r\n  {\r\n    setChkPrice(event.target.checked);\r\n  }\r\n\r\n\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === 'recent')\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n\r\n           <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n\r\n          \r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n        if (!params.value)\r\n        {\r\n           return ( \r\n              <React.Fragment>                    \r\n                    <CloseIcon className={classes.closeIcon}/>                        \r\n              </React.Fragment>\r\n           );\r\n        }\r\n        else\r\n        {\r\n           if (params.getValue('paidBy') === 'credit card')\r\n           {\r\n             return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'cash')\r\n           {\r\n             return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'corporate')\r\n           {\r\n             return ( <BusinessIcon className={classes.checkIcon}/> );\r\n           }\r\n           else\r\n           {\r\n             return '';  \r\n           }\r\n        }\r\n  }\r\n },\r\n\r\n\r\n      { field: 'timeStamp', headerName: 'TimeStamp', width: 200, valueFormatter: (params) => { \r\n        return formatTimeStamp(params.value);\r\n        }\r\n      },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n          }\r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink}\r\n              //  onClick={\r\n              //   () => {\r\n              //     console.log(params.value);\r\n  \r\n              //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n              //     setState(state => ({...state, ref : params.value}));\r\n              //     setState(state => ({...state, refError : false})); \r\n              //     setState(state => ({...state, foundRecords : []}));\r\n              //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n              //   }\r\n              // }\r\n              \r\n              >\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n      { field: 'email', headerName: 'Email', width: 200 },\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'service', headerName: 'Service', width: 250 },\r\n      { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n\r\n  }\r\n  else\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n            <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n               if (!params.value)\r\n               {\r\n                  return ( \r\n                    <React.Fragment>\r\n                                <CloseIcon className={classes.closeIcon}/> \r\n                                {parseInt(params.getValue('deposit')) > 0 && props.date === 'deleted' && (\r\n                                      <span className={classes.notifyIcon}>&nbsp;</span>\r\n                                )}\r\n\r\n                               \r\n                    </React.Fragment>\r\n                     \r\n                        \r\n                  \r\n                  \r\n                  );\r\n               }\r\n               else\r\n               {\r\n                  if (params.getValue('paidBy') === 'credit card')\r\n                  {\r\n                    return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'cash')\r\n                  {\r\n                    return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'corporate')\r\n                  {\r\n                    return ( <BusinessIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else\r\n                  {\r\n                    return '';  \r\n                  }\r\n               }\r\n         }\r\n        },\r\n        { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n          return FormatDateFromString(params.value);\r\n      }\r\n   },\r\n  { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n    return params.getValue('bookingTime');\r\n  }},\r\n  { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n      if (params.value === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}>  BM </span>\r\n        );\r\n    \r\n      }else if (params.value === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> PA </span>\r\n        );\r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n  },\r\n  { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n    return (\r\n      <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n          <Link className={classes.RefLink}\r\n          //  onClick={\r\n          //   () => {\r\n          //     console.log(params.value);\r\n\r\n          //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n          //     setState(state => ({...state, ref : params.value}));\r\n          //     setState(state => ({...state, refError : false})); \r\n          //     setState(state => ({...state, foundRecords : []}));\r\n          //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n          //   }\r\n          // }\r\n          \r\n          >\r\n            {params.value}\r\n          </Link>\r\n      </Tooltip>\r\n\r\n    );\r\n  }},\r\n  { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n  { field: 'email', headerName: 'Email', width: 200 },\r\n  { field: 'phone', headerName: 'Tel', width: 150 },\r\n  { field: 'service', headerName: 'Service', width: 250 },\r\n  { field: 'notes', headerName: 'Notes', width: 500 },\r\n\r\n    \r\n    ];\r\n  \r\n\r\n  }\r\n\r\n\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : true});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n  \r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) =>\r\n  {\r\n    const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n    const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n    if (todayStr === timeStampStr)\r\n    {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    }\r\n    else\r\n    {\r\n       return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  }\r\n\r\n  const loadData = (top) =>\r\n  {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === 'today')\r\n    {\r\n      api = BookService.getTodayBookings;\r\n    }else if (props.date === 'old')\r\n    {\r\n      api = BookService.getOldBookings;\r\n    }else if (props.date === 'future')\r\n    {\r\n      api = BookService.getFutureBookings;\r\n    }else if (props.date === 'recent')\r\n    {\r\n      api = BookService.getRecentBookingsAll;\r\n    }\r\n    else if (props.date === 'deleted')\r\n    {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n     \r\n    setData({bookings: [], cachedBookings: [], isFetching: true});\r\n   \r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top).then( (res) =>{\r\n      // console.log(res)\r\n      for (var i=0; i < res.data.length; i++)\r\n      {\r\n        res.data[i] = {...res.data[i], id : i + 1}\r\n      }  \r\n      setData({bookings: [...res.data], cachedBookings: [...res.data], isFetching: false});\r\n      // return res.data;\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n            setTopCount(25)\r\n            loadData(25)\r\n        },\r\n        [props.date]);\r\n\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => \r\n\r\n             (element.fullname.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n             || (element.service.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n               \r\n              \r\n          );\r\n  \r\n  \r\n          setData({bookings: [...filteredData], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n  \r\n      useEffect(() => {\r\n\r\n       loadData(topCount)\r\n    \r\n      }, [state.bookingDialogDataChanged]);    \r\n\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  }    \r\n  \r\n  const openDetailsDialog = (event, id) =>\r\n  {\r\n    const booking = data.bookings.find(element => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n\r\n  }\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    loadData(topCount)\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n    \r\n  }\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) =>\r\n  {\r\n    setOpenDialogExcel(true);\r\n  }\r\n\r\n  const isTopSelectHidden = (date)=>\r\n  {\r\n    return date === 'live' || date === 'positive' || date === 'late' || date === 'today'\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.showCreateExcel && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-from\"\r\n                        label=\"From\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price (£) </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {/* {FormatDateFromString(booking.birthDate)} */}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n} ","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts';\r\nimport Title from './Title';\r\nimport dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n// Generate Sales Data\r\nfunction createData(time, amount) {\r\n  return { time, amount };\r\n}\r\n\r\n\r\nconst emptyData = [\r\n  createData('09:00', 0),\r\n  createData('10:00', 0),\r\n  createData('11:00', 0),\r\n  createData('12:00', 0),\r\n  createData('13:00', 0),\r\n  createData('14:00', 0),\r\n  createData('15:00', 0),\r\n  createData('16:00', 0),\r\n  createData('17:00', 0),\r\n  createData('18:00', undefined),\r\n\r\n];\r\n\r\nconst getCount = (data, str) =>\r\n{\r\n  if (!data)\r\n    return 0;\r\n\r\n  var count = 0;\r\n  for (var i=0; i < data.length; i++)\r\n  {\r\n    if (data[i]._id.substr(0,2) === str)\r\n    {\r\n      count += data[i].count;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nexport default function Chart() {\r\n  const theme = useTheme();\r\n\r\n  const [data, setData] = React.useState(emptyData);\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() =>\r\n  {\r\n    const fetchData = async () =>\r\n    {\r\n      const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n      var result = [];\r\n      try\r\n      {\r\n          setLoading(true)\r\n          const res = await BookService.getBookingsStatsByDateStr(todayStr);\r\n          setLoading(false)\r\n          const data = res.data.result;\r\n          result.push(createData('09:00', getCount(data,'09')));\r\n          result.push(createData('10:00', getCount(data,'10')));\r\n          result.push(createData('11:00', getCount(data,'11')));\r\n          result.push(createData('12:00', getCount(data,'12')));\r\n          result.push(createData('13:00', getCount(data,'13')));\r\n          result.push(createData('14:00', getCount(data,'14')));\r\n          result.push(createData('15:00', getCount(data,'15')));\r\n          result.push(createData('16:00', getCount(data,'16')));\r\n          result.push(createData('17:00', getCount(data,'17')));\r\n          result.push(createData('18:00', undefined));\r\n \r\n           setData(result);\r\n      }\r\n      catch(err){\r\n        setLoading(false)\r\n        console.error(err);\r\n      }\r\n\r\n    }\r\n  \r\n   fetchData();\r\n\r\n  }, [] );\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today</Title>\r\n      <ResponsiveContainer>\r\n        <LineChart\r\n          data={data}\r\n          margin={{\r\n            top: 16,\r\n            right: 16,\r\n            bottom: 0,\r\n            left: 24,\r\n          }}\r\n        >\r\n          <XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n          <YAxis stroke={theme.palette.text.secondary}>\r\n            <Label\r\n              angle={270}\r\n              position=\"left\"\r\n              style={{ textAnchor: 'middle', fill: theme.palette.text.primary }}\r\n            >\r\n              Online Bookings\r\n            </Label>\r\n          </YAxis>\r\n          <Line type=\"monotone\" dataKey=\"amount\" stroke={theme.palette.primary.main} dot={false} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Title from \"./Title\";\r\nimport { Grid, LinearProgress, Tooltip } from \"@material-ui/core\";\r\nimport * as dateformat from \"dateformat\";\r\nimport BookService from \"./services/BookService\";\r\nimport BookingDialog from \"./BookingDialog\";\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    margin: \"5px\",\r\n    padding: \"5px\",\r\n    maxWidth: \"90px\",\r\n    minHeight: \"30px\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    borderRadius: \"5px\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n    align: \"center\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n});\r\n\r\nconst isWeekend = (date) => {\r\n  return (\r\n    date.getDay() === 1 ||\r\n    date.getDay() === 2 ||\r\n    date.getDay() === 3 ||\r\n    date.getDay() === 6 ||\r\n    date.getDay() === 0\r\n  );\r\n};\r\n\r\nconst isThursday = (date) => {\r\n  return date.getDay() === 4; /// Thursday\r\n};\r\n\r\nconst isFriday = (date) => {\r\n  return date.getDay() === 5; /// Friday\r\n};\r\n\r\nconst getCurrentTimeSlot = (now) => {\r\n  if (isWeekend(now)) {\r\n    return null;\r\n  }\r\n\r\n  var min = now.getMinutes();\r\n  var hour = now.getHours();\r\n\r\n  if (isThursday(now) && hour < 13) {\r\n    return null;\r\n  }\r\n\r\n  if (isFriday(now) && hour >= 13) {\r\n    return null;\r\n  }\r\n\r\n  if (hour < 10 || hour >= 18) return null;\r\n\r\n  const slotMinStr = min < 30 ? \"00\" : \"30\";\r\n  const pmStr = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n  if (hour > 12) hour = hour - 12;\r\n\r\n  const slotHourStr = `0${hour}`;\r\n\r\n  return `${slotHourStr}:${slotMinStr} ${pmStr}`;\r\n};\r\n\r\nconst getCurrentTimeSlotLabel = (timeStr) => {\r\n  if (!timeStr) {\r\n    return \"Closed\";\r\n  }\r\n\r\n  let endTimeStr = \"\";\r\n  switch (timeStr) {\r\n    case \"10:00 AM\":\r\n      endTimeStr = \"10:30 AM\";\r\n      break;\r\n    case \"10:30 AM\":\r\n      endTimeStr = \"11:00 AM\";\r\n      break;\r\n    case \"11:00 AM\":\r\n      endTimeStr = \"11:30 AM\";\r\n      break;\r\n    case \"11:30 AM\":\r\n      endTimeStr = \"12:00 PM\";\r\n      break;\r\n    case \"12:00 PM\":\r\n      endTimeStr = \"12:30 PM\";\r\n      break;\r\n    case \"12:30 PM\":\r\n      endTimeStr = \"01:00 PM\";\r\n      break;\r\n    case \"01:00 PM\":\r\n      endTimeStr = \"01:30 PM\";\r\n      break;\r\n    case \"01:30 PM\":\r\n      endTimeStr = \"02:00 PM\";\r\n      break;\r\n    case \"02:00 PM\":\r\n      endTimeStr = \"02:30 PM\";\r\n      break;\r\n    case \"02:30 PM\":\r\n      endTimeStr = \"03:00 PM\";\r\n      break;\r\n    case \"03:00 PM\":\r\n      endTimeStr = \"03:30 PM\";\r\n      break;\r\n    case \"03:30 PM\":\r\n      endTimeStr = \"04:00 PM\";\r\n      break;\r\n    case \"04:00 PM\":\r\n      endTimeStr = \"04:30 PM\";\r\n      break;\r\n    case \"04:30 PM\":\r\n      endTimeStr = \"05:00 PM\";\r\n      break;\r\n    case \"05:00 PM\":\r\n      endTimeStr = \"05:30 PM\";\r\n      break;\r\n    case \"05:30 PM\":\r\n      endTimeStr = \"06:00 PM\";\r\n      break;\r\n\r\n    default:\r\n      endTimeStr = \"\";\r\n      break;\r\n  }\r\n\r\n  return `${timeStr} - ${endTimeStr}`;\r\n};\r\n\r\nexport default function CurrentVisits() {\r\n  const classes = useStyles();\r\n\r\n  const [current, setCurrent] = React.useState(new Date());\r\n  const [bookings, setBookings] = React.useState([]);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const currentTimeSlot = getCurrentTimeSlot(current);\r\n    if (!currentTimeSlot) return;\r\n    const todayStr = dateformat(current, \"yyyy-mm-dd\");\r\n    setLoading(true);\r\n    BookService.getBookingsByDateStrandTime(todayStr, currentTimeSlot)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res.data.status === \"OK\") {\r\n          setBookings([...res.data.bookings]);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  }, [current]);\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings && _bookings.length > 0) {\r\n      return (\r\n        <div className={classes.root}>\r\n          <Grid\r\n            container\r\n            justify=\"flex-start\"\r\n            alignItems=\"flex-start\"\r\n            spacing={0}\r\n          >\r\n            {_bookings.map((booking) => (\r\n              <Grid item>\r\n                <div\r\n                  className={classes.bookingBox}\r\n                  onClick={(event) => bookingCliked(event, booking)}\r\n                >\r\n                  <span style={{ textAlign: \"center\" }}>\r\n                    {\" \"}\r\n                    {`${booking.surnameCapital}`.substring(0, 10)}{\" \"}\r\n                  </span>\r\n                </div>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>Current Visits</Title>\r\n      <Typography component=\"p\" variant=\"h6\">\r\n        {getCurrentTimeSlotLabel(getCurrentTimeSlot(current))}\r\n      </Typography>\r\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\r\n        on {dateformat(current, \"dd mmmm, yyyy\")}\r\n      </Typography>\r\n\r\n      {getBookingsBox(bookings)}\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Title from './Title';\r\nimport BookService from './services/BookService';\r\nimport * as dateformat from 'dateformat';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function BookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , isFetching : false});\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const seeMoreRecords = (event) => {\r\n    event.preventDefault();\r\n    setState(state=>({...state, currentMenuIndex:getMenuIndex('gynae',`recentBookings`)}));\r\n  }\r\n\r\n  const loadData = () => \r\n  {\r\n    setData({bookings: data.bookings, isFetching: true});\r\n    setLoading(true)\r\n    BookService.getRecentBookings().then( (res) =>{\r\n      setLoading(false)\r\n        setData({bookings: res.data, isFetching: false});\r\n\r\n    }).catch( (err) => {\r\n      setLoading(false)\r\n        console.log(err);\r\n        setData({bookings: data.bookings, isFetching: false});\r\n    });\r\n  }\r\n\r\n\r\n  useEffect( () => {\r\n          loadData();\r\n        },\r\n        [refresh]);   \r\n\r\n\r\n   useEffect( () => {\r\n     loadData();\r\n     const interval = setInterval(() => {\r\n       setRefresh(refresh => !refresh);\r\n     }, 30000);\r\n\r\n     return () =>\r\n     {\r\n       clearInterval(interval)\r\n     }\r\n     \r\n   }, []) ;    \r\n\r\n   const formatTimeStamp = (timeStamp) =>\r\n   {\r\n     const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n     const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n     if (todayStr === timeStampStr)\r\n     {\r\n       return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n     }\r\n     else\r\n     {\r\n        return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Recent Bookings</Title>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>TimeStamp</TableCell>        \r\n            <TableCell>Fullname</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>Tel</TableCell>\r\n            <TableCell>Service</TableCell>\r\n            <TableCell>Booked Date</TableCell>\r\n            <TableCell>Booked Time</TableCell> \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.bookings.map((row) => (\r\n            <TableRow key={row._id}>\r\n              <TableCell>{formatTimeStamp(row.timeStamp)}</TableCell>\r\n              <TableCell>{row.fullname}</TableCell>\r\n              <TableCell>{row.email}</TableCell>\r\n              <TableCell>{row.phone}</TableCell>\r\n              <TableCell>{row.service}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.bookingDate)}</TableCell>\r\n              <TableCell>{row.bookingTime}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      <div className={classes.seeMore}>\r\n        <Link color=\"primary\" href=\"#\" onClick={seeMoreRecords}>\r\n          See more records\r\n        </Link>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chart from './Chart';\r\nimport CurrentVisits from './CurrentVisits';\r\n\r\n\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport BookingView from './BookingView';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n \r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  return (\r\n        <React.Fragment>\r\n\r\n<           Grid container spacing={3}>\r\n                    {/* Chart */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <Chart />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Current Visits */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <CurrentVisits />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Recent Bookings */}\r\n                    <Grid item xs={12}>\r\n                    <Paper className={classes.paper}>\r\n                        <BookingView/>\r\n                    </Paper>\r\n                    </Grid>\r\n          </Grid>\r\n        </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Button, Checkbox, FormControlLabel, Link, TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    // textAlign : \"center\",\r\n    // fontWeight : \"500\",\r\n    // margin: \"10px\",\r\n    // backgroundColor : \"#eee\",\r\n    // padding : \"10px\",\r\n    // borderRadius : \"4px\"\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n  },\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#555\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\" ,\r\n    width: \"400px\"    \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n      \r\n    },\r\n    width: \"400px\"   \r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\nexport default function PersonsBox() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [expanded, setExpanded] = React.useState('panel0');\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [fullname, setFullname] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [service, setService] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n    }\r\n\r\n    const fullnameChanged = (event) =>\r\n    {\r\n      setFullname(event.target.value);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n    }\r\n\r\n    const serviceChanged = (event) =>\r\n    {\r\n      setService(event.target.value);\r\n    }\r\n\r\n    const notesChanged = (event) =>\r\n    {\r\n      setNotes(event.target.value);\r\n    }\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n      setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setFullname(person.fullname);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime);\r\n         setEmail(person.email);\r\n         setTel(person.phone);\r\n         setService(person.service)\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes);\r\n         }\r\n        \r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.fullname = fullname;\r\n          booking.notes = notes;\r\n          booking.service = service;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const changeBackToBookingMade = (event, id) =>\r\n   {\r\n     setSaving(true);\r\n     bookingService.changeBackToBookingMade(id).then(res => {\r\n       setSaving(false);\r\n       setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n     }).catch(err => {\r\n       console.log(err);\r\n       setSaving(false);\r\n     })\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n          \r\n      <Grid container direction=\"column\" spacing={1} justify=\"flex-start\" alignItems=\"center\">\r\n          <div className={classes.title}> Following Records Found :</div>\r\n\r\n          {state.foundRecords.map((person,index) => (\r\n   \r\n                <Grid item xs={12} md={12} key={`panel${index}`}>\r\n                <div className={classes.root}>\r\n                    <Accordion className={person.deleted ? classes.AccordionDeleted : classes.Accordion} expanded={expanded === `panel${index}`} onChange={handleChange(`panel${index}`)}>\r\n                    <AccordionSummary className={person.deleted ? classes.lineThrough : ''}\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls=\"panel1bh-content\"\r\n                        id={`panel${index}bh-header`}\r\n                    >\r\n                      {person.deleted && (\r\n                          <Tooltip  title=\"This record has been deleted.\">\r\n                            <DeleteIcon  style={{padding: 0, margin: 0,  color: \"#fff\", fontSize: 25 }}/>\r\n                        </Tooltip>\r\n                      )}\r\n\r\n                        <Typography className={classes.heading}> {`#${index+1}`} </Typography>\r\n                        <Typography className={classes.secondaryHeading}>\r\n                        {`${person.fullname}`}\r\n                        </Typography>\r\n                    </AccordionSummary>\r\n\r\n                    <AccordionDetails className={classes.infoDetails}>\r\n                        \r\n\r\n\r\n                        <ul className={classes.ul}>\r\n\r\n                        {/* Restore Functionality ******************************************* */}  \r\n                        <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"500\", paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\" , color:\"#fff\"}}>\r\n                                Are you sure you want to restore this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={!person.deleted || (restoreMode.restore && restoreMode.person._id === person._id)}>\r\n                                 <Button\r\n\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleRestoreModeChanged(true, person)}}\r\n                                    className={classes.RestoreButton}\r\n                                 >\r\n                                   Restore This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Restore this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n\r\n                           {/*  ******************************************************************* */}\r\n\r\n                              {/* Edit Functionality ******************************************* */}\r\n\r\n                            <li hidden={person.deleted || deleteMode.delete || (editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleEditModeChanged(true, person)}}\r\n                                    className={classes.EditButton}\r\n                                 >\r\n                                    Edit Booking Info\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    Save Changes\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                            \r\n                            {/* ****************************************************************************************** */}\r\n\r\n\r\n                            {/* Delete Functionality ******************************************* */}\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"600\",  paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\"}}>\r\n                                Are you sure you want to delete this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted ||  editMode.edit || (deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleDeleteModeChanged(true, person)}}\r\n                                    className={classes.DeleteButton}\r\n                                 >\r\n                                   Delete This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Delete this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                                 \r\n                            {/* ****************************************************************************************** */}\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED DATE</span> \r\n                            \r\n\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                   {FormatDateFromString(person.bookingDate) }\r\n                                  </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingDateError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingDate}\r\n                                                      onChange = {bookingDateChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED TIME</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.bookingTime}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingTimeError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingTime}\r\n                                                      onChange = {bookingTimeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>FULLNAME</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.fullname}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={fullname}\r\n                                                      onChange = {fullnameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>EMAIL</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.email}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={email}\r\n                                                      onChange = {emailChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TEL</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.phone}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={tel}\r\n                                                      onChange = {telChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SERVICE</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.service}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={service}\r\n                                                      onChange = {serviceChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>NOTES</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.notes}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={notes}\r\n                                                      onChange = {notesChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>STATUS</span> \r\n                                {getStatusLabel(person.status)} \r\n                            </li>\r\n      \r\n\r\n                        </ul>\r\n\r\n                    </AccordionDetails>\r\n                    </Accordion>\r\n                </div>\r\n            </Grid> \r\n          ))}\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport PropTypes from 'prop-types';\r\nimport MaskedInput from 'react-text-mask';\r\nimport { FormControl, Grid, Input, InputLabel } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\nimport PersonsBox from './PersonsBox';\r\nimport { width } from '@material-ui/system';\r\n\r\n\r\nconst isBoolean = (param) => typeof(param) === \"boolean\"\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n    const [focus, setFocus] = React.useState(initialFocus)\r\n    const setFocusWithTrueDefault = (param) => setFocus(isBoolean(param)? param : true)\r\n    return ([\r\n        setFocusWithTrueDefault, {\r\n            autoFocus: focus,\r\n            key: `${id}${focus}`,\r\n            onFocus: () => setFocus(true),\r\n            onBlur: () => setFocus(false),\r\n        },\r\n    ])\r\n}\r\n\r\n\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n  \r\n    return (\r\n      <MaskedInput\r\n        {...other}\r\n        ref={(ref) => {\r\n          inputRef(ref ? ref.inputElement : null);\r\n        }}\r\n        mask={[/\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/]}\r\n        // placeholderChar={'\\u2000'}\r\n        showMask\r\n      />\r\n    );\r\n  }\r\n  \r\n  TextMaskCustom.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    root: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n        marginTop: \"20px\"\r\n      },  \r\n\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n\r\n    Find: {\r\n        width: \"80px\"\r\n    },\r\n\r\n    Clear:{\r\n        marginRight: \"20px\"\r\n    },\r\n\r\n    title:{\r\n        marginTop : \"20px\"\r\n    },\r\n\r\n    TextBox:{\r\n        marginTop: \"30px\",\r\n        \"& > *\" :\r\n        {\r\n            textAlign: \"center\"\r\n        },\r\n  \r\n    },\r\n\r\n    TextField:{\r\n\r\n    },\r\n\r\n    NoRecordsFound:{\r\n        marginTop: \"20px\",\r\n        color: \"red\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"14px\",\r\n    },\r\n\r\n    PersonsBox:{\r\n        marginTop : \"20px\",\r\n        marginBottom: \"50px\",\r\n    }\r\n\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  \r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n//   useEffect( () =>\r\n//   {\r\n//      findRecords();\r\n//   }, [state.findRecords]);\r\n\r\n useEffect ( () => {\r\n    setState(state => ({...state, foundRecords : []}));\r\n }, [])\r\n\r\n  useEffect( () => {\r\n    BookService.getBookingsByRef(state.ref).then( (res)=>\r\n    {\r\n        if (res.data.length > 0)\r\n        {\r\n            setState(state => ({...state, foundRecords : res.data}));\r\n        }\r\n    });\r\n    }, [state.RefreshPersonInfo]);\r\n\r\n    const handleChange = (event) =>\r\n    {\r\n        setState(state => ({...state, ref : event.target.value}));\r\n        setState(state => ({...state, refError : false})); \r\n    }\r\n\r\n    const clearField = () =>\r\n    {\r\n        setState(state => ({...state, refError : false})); \r\n        setState(state => ({...state, ref : '___-___-___'}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n        setFocus();\r\n    }\r\n\r\n    const findRecords = () =>\r\n    {\r\n        if (!state.ref || state.ref.indexOf('_') >= 0)\r\n        {\r\n            setState(state => ({...state, refError : true}));  \r\n            return;\r\n        }\r\n\r\n        setState(state => ({...state, submiting : true}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n\r\n        BookService.getBookingsByRef(state.ref).then( (res)=>\r\n        {\r\n            setState(state => ({...state, submiting : false}));\r\n            if (res.data.length > 0)\r\n            {\r\n                setState(state => ({...state, foundRecords : res.data}));\r\n            }\r\n            else\r\n            {\r\n                setState(state => ({...state, foundRecords : null}));\r\n            }\r\n            \r\n            console.log(res.data);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setState(state => ({...state, submiting : false}));\r\n        });\r\n    }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <CssBaseline />\r\n        <div className={classes.title}>\r\n            <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n                Find Booking Appoinments\r\n            </Typography>  \r\n        </div> \r\n\r\n        <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"center\">\r\n\r\n        <Grid item xs={12} md={12}>\r\n            <FormControl className={classes.TextBox}>\r\n                <TextField\r\n                    {...focusProps}\r\n                    autoFocus \r\n                    pattern=\"[0-9]*\"\r\n                    error = {state.refError ? true : false} \r\n                    value = {state.ref}\r\n                    className = {classes.TextField}\r\n                    width = \"50px\"\r\n                    onChange={handleChange}\r\n                    label=\"Reference No.\"\r\n                    helperText=\"Enter Your 9-digits Reference No.\"\r\n                    name=\"refNo\"\r\n                    id=\"refNo\"\r\n                    variant=\"outlined\"\r\n                    \r\n                    size=\"medium\"\r\n                    margin=\"normal\"\r\n                    fullWidth = {true}\r\n                    InputProps={{\r\n                        inputComponent: TextMaskCustom,\r\n                        style: { textAlign: 'center', fontSize:\"24px\", width: \"210px\", paddingLeft: \"20px\" }\r\n                    }}\r\n\r\n                    onKeyPress= {event => {\r\n                        if (event.key === 'Enter') {\r\n                            findRecords();\r\n                        }\r\n                      }}\r\n                />         \r\n            </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n               \r\n                <Button\r\n                    disabled = {state.submiting}\r\n                    color=\"default\"\r\n                    onClick = {clearField}\r\n                    onTouchTap = {clearField}\r\n                    className={classes.Clear}\r\n                >\r\n                    Clear \r\n                </Button>  \r\n            \r\n                <Button\r\n                    type=\"button\"\r\n                    disabled = {state.submiting}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = {findRecords}\r\n                    onTouchTap = {findRecords}\r\n                    className={classes.Find}\r\n                >\r\n                    Find \r\n                </Button>  \r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n\r\n                    \r\n\r\n            {state.foundRecords && state.foundRecords.length > 0 && (\r\n                <React.Fragment>\r\n\r\n                    <div className={classes.PersonsBox}>\r\n                          <PersonsBox/>\r\n                    </div>\r\n                    \r\n\r\n\r\n                </React.Fragment>\r\n            )}   \r\n\r\n            {!state.foundRecords && (\r\n                <React.Fragment>\r\n\r\n                <div className={classes.root}>\r\n                    <Alert severity=\"error\"> <strong>No Records Found !</strong> <br/> Please check you reference number again.</Alert>\r\n                </div> \r\n                   \r\n                </React.Fragment>\r\n            )}\r\n\r\n        </Grid>\r\n        \r\n        \r\n        </Grid>\r\n        \r\n    </React.Fragment>\r\n   \r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 10;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 )\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                          {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container} onClick={(event => dayClicked(event,cellDate))}>\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 1;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                          {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container} onClick={(event => dayClicked(event,cellDate))}>\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '10:00 AM',\r\n    '10:30 AM', \r\n    '11:00 AM', \r\n    '11:30 AM', \r\n    '12:00 PM',\r\n    '12:30 PM',\r\n    '01:00 PM',\r\n    '01:30 PM',\r\n    '02:00 PM',\r\n    '02:30 PM',\r\n    '03:00 PM',\r\n    '03:30 PM',\r\n    '04:00 PM',\r\n    '04:30 PM',\r\n    '05:00 PM',\r\n    '05:30 PM',\r\n];\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { validate } from \"email-validator\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  CalendarIcon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  DateTimeLabel: {\r\n    fontWeight: \"500\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  PriceLabelPaid:{\r\n    color: theme.palette.primary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n  PriceLabelNotPaid:{\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n\r\n}));\r\n\r\nconst Packages = [\r\n  { packageName: \"Consultation with Consultant Gynaecologist\" },\r\n  { packageName: `Coil Fitting/Coil Removal` },\r\n  { packageName: `Well Woman Check` },\r\n  { packageName: `Sexual Health Screening` },\r\n  { packageName: `Pre-pregnancy/Fertility check` },\r\n  { packageName: `Gynaecological Ultrasound` },\r\n  { packageName: `HPV Vaccination` },\r\n  { packageName: `Cervical / Pap Smear` },\r\n  { packageName: `HPV Treatment / Wart Cryo-Therapy` },\r\n];\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function NewBookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [fullnameError, setFullnameError] = React.useState(false);\r\n\r\n  const [phone, setPhone] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [service, setService] = React.useState(\"\");\r\n  const [notes, setNotes] = React.useState(\"\");\r\n\r\n  const [deposit, setDeposit] = React.useState(false);\r\n\r\n  const depositChanged = (event) => {\r\n    setDeposit(event.target.checked);\r\n  };\r\n\r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFullnameError(false);\r\n  };\r\n\r\n  const phoneChanged = (event) => {\r\n    setPhone(event.target.value);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const serviceChanged = (event) => {\r\n    setService(event.target.value);\r\n  };\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    setFullname(\"\");\r\n    setFullnameError(false);\r\n    setPhone(\"\");\r\n    setEmail(\"\");\r\n    setService(\"\");\r\n    setNotes(\"\");\r\n    setDeposit(false);\r\n\r\n    props.handleClose();\r\n    setSaving(false);\r\n  };\r\n\r\n  const validateBooking = () => {\r\n    let error = false;\r\n    if (!fullname || fullname.trim().length < 1) {\r\n      setFullnameError(true);\r\n      error = true;\r\n    }\r\n    return !error;\r\n  };\r\n\r\n  const saveClicked = async () => {\r\n    if (!validateBooking()) {\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n    try {\r\n      await BookService.addNewBooking({\r\n        bookingDate: props.date,\r\n        bookingTime: props.time,\r\n        fullname: fullname,\r\n        phone: phone,\r\n        email: email,\r\n        service: service,\r\n        notes: notes,\r\n        deposit: deposit ? 100 : 0,\r\n      });\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.date && props.time && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\" style={{position:\"relative\"}}>\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <AddIcon style={{ color: \"#f50057\", fontSize: \"3rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    ADD New Booking{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <div style={{position:\"absolute\", top: \"5px\", right: \"5px\", backgroundColor:CalendarColors.GYNAE_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\", fontSize:\"1rem\"}}>\r\n                    GYNAE\r\n              </div>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"480px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"row\"\r\n                  justify=\"stretch\"\r\n                  spacing={2}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Grid item xs={12}>\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"center\"\r\n                      alignItems=\"center\"\r\n                      spacing={1}\r\n                    >\r\n                      <Grid item>\r\n                        <DateRangeIcon className={classes.CalendarIcon} />\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <span className={classes.DateTimeLabel}>\r\n                          {props.date} , {props.time}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      autoFocus\r\n                      error={fullnameError}\r\n                      label=\"Full Name\"\r\n                      value={fullname}\r\n                      required\r\n                      onChange={fullnameChanged}\r\n                      name=\"fullname\"\r\n                      id=\"fullname-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Telephone\"\r\n                      value={phone}\r\n                      onChange={phoneChanged}\r\n                      name=\"phone\"\r\n                      id=\"phone-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Email\"\r\n                      value={email}\r\n                      onChange={emailChanged}\r\n                      name=\"email\"\r\n                      id=\"email-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12} md={12}>\r\n                    <FormControl className={classes.formControl} fullWidth>\r\n                      <InputLabel id=\"service-label-id\">Service</InputLabel>\r\n                      <Select\r\n                        fullWidth\r\n                        labelId=\"service-label-id\"\r\n                        id=\"service-id\"\r\n                        value={service}\r\n                        onChange={serviceChanged}\r\n                      >\r\n                        {Packages.map((item) => (\r\n                          <MenuItem value={item.packageName}>\r\n                            {item.packageName}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Notes\"\r\n                      value={notes}\r\n                      onChange={notesChanged}\r\n                      name=\"notes\"\r\n                      id=\"notes-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid otem xs={12} style={{marginTop:\"15px\"}}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          color=\"primary\"\r\n                          checked={deposit}\r\n                          onChange={depositChanged}\r\n                          name=\"deposit\"\r\n                        />\r\n                      }\r\n                      label={deposit ? <span className={classes.PriceLabelPaid}>£100 Deposit Paid</span> : <span className={classes.PriceLabelNotPaid}>£100 Deposit Not Paid</span>}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={saveClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Save\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport dateformat from \"dateformat\";\r\nimport BookService from \"../services/BookService\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport GlobalState from \"../../GlobalState\";\r\nimport BookingDialog from \"../BookingDialog\";\r\nimport NewBookingDialog from \"../NewBookingDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  Container: {\r\n    width: \"100%\",\r\n    height: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fff\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    justifyItems: \"flex-start\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ContainerPast: {\r\n    width: \"100%\",\r\n    paddingTop: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n\r\n  DayLabel: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#555\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  DayLabelDisabled: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#ddd\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  LoadingProgress: {\r\n    position: \"absolute\",\r\n    top: \"10%\",\r\n    left: \"40%\",\r\n  },\r\n\r\n  BookingCountGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"5%\",\r\n    left: \"8%\",\r\n    width: \"85%\",\r\n    height: \"8%\",\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n\r\n  bookingBoxNew: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #ddd\",\r\n    color: \"#ccc\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#fff\",\r\n\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    transition: \"all 0.5s ease\",\r\n    borderRadius: \"4px\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#fff\",\r\n      color: theme.palette.secondary.main,\r\n      borderColor:  theme.palette.secondary.main,\r\n    },\r\n  },\r\n\r\n  bookingBoxSampleTaken: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#0059b3\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n\r\n  bookingBoxPositive: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#d40b0b\",\r\n    color: \"#fff2f2\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#bf0000\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  bookingBoxReportSent: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#009900\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#006e00\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst DayViewCell = ({ key, date, time }) => {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [bookings, setBookings] = React.useState(null);\r\n  const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(true);\r\n\r\n  const [isPast, setIsPast] = React.useState(false);\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n  const [openDialogAddNew, setOpenDialogAddNew] = React.useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n    setIsPast(date < todayStr);\r\n  }, [date]);\r\n\r\n  useEffect(() => {\r\n    if (bookings) {\r\n      if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0) {\r\n        const search = state.dayViewCalFilter.trim().toUpperCase();\r\n        setFilteredBookings(\r\n          bookings.filter(\r\n            (booking) =>\r\n              booking.fullname.toLowerCase().indexOf(search.toLowerCase()) >= 0\r\n          )\r\n        );\r\n      } else {\r\n        setFilteredBookings([...bookings]);\r\n      }\r\n    }\r\n  }, [state.dayViewCalFilter, bookings]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!date || date.length <= 0 || !time || time.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      // if (isPast)\r\n      // {\r\n      //     setBookings([]);\r\n      //     return;\r\n      // }\r\n\r\n      setBookings(null);\r\n\r\n      var res = state.AdminCalendarCache?.find(\r\n        (record) =>\r\n          record.method === \"getBookingsByDateStrandTime\" &&\r\n          record.query === `${date}${time}`\r\n      )?.res;\r\n      if (!res || openDialog || openDialogAddNew) {\r\n        res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n        setState((state) => ({\r\n          ...state,\r\n          AdminCalendarCache: [\r\n            ...state.AdminCalendarCache,\r\n            {\r\n              method: \"getBookingsByDateStrandTime\",\r\n              query: `${date}${time}`,\r\n              res: res,\r\n            },\r\n          ],\r\n        }));\r\n      }\r\n\r\n      if (res.data.status === \"OK\") {\r\n        setBookings(res.data.bookings);\r\n      }\r\n    };\r\n\r\n    if (openDialog || openDialogAddNew) {\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStr\" &&\r\n              record.query === date\r\n            )\r\n        ),\r\n      }));\r\n    }\r\n\r\n    fetchData();\r\n  }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const getBookingClass = (status) => {\r\n    switch (status) {\r\n      case \"patient_attended\":\r\n        return classes.bookingBoxSampleTaken;\r\n      default:\r\n        return classes.bookingBox;\r\n    }\r\n  };\r\n\r\n  const addNewBookingClicked = () =>\r\n  {\r\n      setOpenDialogAddNew(true)\r\n  }\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings === null) {\r\n      return (\r\n        <div className={classes.LoadingProgress}>\r\n          <CircularProgress disableShrink />\r\n        </div>\r\n      );\r\n    } else if (_bookings.length >= 0) {\r\n      return (\r\n        <React.Fragment>\r\n          {_bookings.map((booking) => (\r\n            <div\r\n              style={booking.tr ? { borderTop: \"5px solid #d00fd6\" } : {}}\r\n              className={getBookingClass(booking.status)}\r\n              onClick={(event) => bookingCliked(event, booking)}\r\n            >\r\n              {`${booking.fullname}`.substring(0, 15)}\r\n            </div>\r\n          ))}\r\n\r\n          <div className={classes.bookingBoxNew} onClick={addNewBookingClicked}> + Add New Booking</div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  const handleCloseDialogAddNew = () => {\r\n    setOpenDialogAddNew(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Container}>\r\n        {getBookingsBox(filteredBookings)}\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n\r\n      <NewBookingDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogAddNew}\r\n        handleClose={handleCloseDialogAddNew}\r\n        />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nDayViewCell.propTypes = {\r\n  key: PropTypes.string.isRequired,\r\n  date: PropTypes.string.isRequired,\r\n  time: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default DayViewCell;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\n\r\n\r\n\r\nconst rows = [\r\n    '10:00 AM',\r\n    '10:30 AM', \r\n    '11:00 AM', \r\n    '11:30 AM', \r\n    '12:00 PM',\r\n    '12:30 PM',\r\n    '01:00 PM',\r\n    '01:30 PM',\r\n    '02:00 PM',\r\n    '02:30 PM',\r\n    '03:00 PM',\r\n    '03:30 PM',\r\n    '04:00 PM',\r\n    '04:30 PM',\r\n    '05:00 PM',\r\n    '05:30 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n  headers : {\r\n      'Authorization' : authToken,\r\n       'Content-Type': 'application/json',\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n\r\n   static addNewBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/addnewbooking`, payload);\r\n   }\r\n\r\n\r\n   static sendRegFormEmail = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/book/sendregformemail?id=${bookingId}`);\r\n   }\r\n   static payBooking = (bookingId,price, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/gp/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}&price=${price}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getShouldRefundsCount = () =>\r\n   {\r\n      return API.get(`/api/gp/book/getshouldrefundscount?`);\r\n   }\r\n\r\n   \r\n\r\n   static refundBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/payment/refundpayment`, {bookingId: bookingId});\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountAll = () =>\r\n   {\r\n      return API.get(`/api/gp/book/getallbookingscountall`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gp/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/gp/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/gp/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static changeToPatientAttended = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/changetopatientattended?id=${id}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/gp/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/gp/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/gp/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gp/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/gp/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gp/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gp/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/gp/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/gp/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n}","import API from './api';\r\n\r\nexport default class PDFService {\r\n\r\n\r\n    static downloadGPRegForm = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadgpregform?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadInvoice = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadinvoice?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n}","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function PayDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [paymentMethod, setPaymentMethod] = useState(\"credit card\");\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [price, setPrice] = useState(\"\");\r\n  const [priceError, setPriceError] = useState(false);\r\n\r\n\r\n  const priceChanged = (event) =>\r\n  {\r\n    setPrice(event.target.value)\r\n    setPriceError(false)\r\n  }\r\n\r\n  const paymentMethodChanged = (event) => {\r\n    setPaymentMethod(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    props.handleClose();\r\n    setPaymentMethod(\"credit card\");\r\n    setPrice('')\r\n    setCorporate(corporates[0]);\r\n    setSaving(false);\r\n  };\r\n\r\n  const corporateChanged = (event) => {\r\n    setCorporate(event.target.value);\r\n  };\r\n\r\n  const payClicked = async () => {\r\n\r\n\r\n    if (!price || price.trim().length === 0 || price === '0')\r\n    {\r\n      setPriceError(true)\r\n      return\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n  \r\n\r\n    try {\r\n      await BookService.payBooking(\r\n        props.booking._id,\r\n        price,\r\n        paymentMethod,\r\n        paymentMethod === \"corporate\" ? corporate : \"\"\r\n      );\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingPayChanged: !state.bookingPayChanged ? true : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <CreditCardIcon\r\n                    style={{ color: \"#f50057\", fontSize: \"3rem\" }}\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    PAY the CHARGE{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"300px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"space-between\"\r\n                  spacing={2}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Grid item>\r\n                  <TextField\r\n                                autoFocus\r\n                                error={priceError}\r\n                                label=\"TOTAL Charges\"\r\n                                value={price}\r\n                                fullWidth\r\n                                required\r\n                                onChange={priceChanged}\r\n                                name=\"product-price\"\r\n                                id=\"product-price-id\"\r\n                                InputProps={{\r\n                                  inputComponent: NumberFormatCustom,\r\n                                  startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                      £\r\n                                    </InputAdornment>\r\n                                  ),\r\n                                }}\r\n                              />\r\n\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <div style={{ fontSize: \"17px\" }}>\r\n                      {\" \"}\r\n                      How do you want to pay?{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControl component=\"fieldset\">\r\n                      <RadioGroup\r\n                        aria-label=\"paymentMethod\"\r\n                        name=\"paymentMethod\"\r\n                        value={paymentMethod}\r\n                        onChange={paymentMethodChanged}\r\n                      >\r\n                        <FormControlLabel\r\n                          value=\"credit card\"\r\n                          control={<Radio />}\r\n                          label=\"Credit Card\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"cash\"\r\n                          control={<Radio />}\r\n                          label=\"Cash\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"corporate\"\r\n                          control={<Radio />}\r\n                          label=\"Corporate\"\r\n                        />\r\n                      </RadioGroup>\r\n\r\n                      {paymentMethod === \"corporate\" && (\r\n                        <FormControl\r\n                          style={{ marginTop: \"10px\" }}\r\n                          className={classes.formControl}\r\n                        >\r\n                          <Select\r\n                            labelId=\"select-corporate\"\r\n                            id=\"select-corporate-id\"\r\n                            value={corporate}\r\n                            onChange={corporateChanged}\r\n                          >\r\n                            {corporates.map((element) => (\r\n                              <MenuItem\r\n                                value={element}\r\n                              >{`${element}`}</MenuItem>\r\n                            ))}\r\n                          </Select>\r\n                        </FormControl>\r\n                      )}\r\n                    </FormControl>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item></Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={payClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Pay\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import API from './api';\r\n\r\nexport default class InvoiceService{\r\n\r\n    static createInvoice = (payload) =>\r\n    {\r\n        return  API.post('/api/medex/invoice/createinvoice', payload)\r\n    }\r\n\r\n    static updateInvoice = (invoiceNumber, payload) =>\r\n    {\r\n        return  API.post(`/api/medex/invoice/updateinvoice?invoiceNumber=${invoiceNumber}`, payload)\r\n    }\r\n\r\n    static deleteinvoice = (invoiceNumber) =>\r\n    {\r\n        return  API.post(`/api/medex/invoice/deleteinvoice?invoiceNumber=${invoiceNumber}`)\r\n    }\r\n\r\n    static getInvoiceByBookingId = (bookingId) =>\r\n    {\r\n        return  API.get(`/api/medex/invoice/getinvoicebybookingid?bookingId=${bookingId}`)\r\n    }\r\n\r\n    static getInvoiceByInvoiceNumber = (invoiceNumber) =>\r\n    {\r\n        return  API.get(`/api/medex/invoice/getinvoicebyinvoicenumber?invoiceNumber=${invoiceNumber}`)\r\n    }\r\n\r\n    static getCodeDetails = (code) =>\r\n    {\r\n        return  API.post(`/api/medex/invoice/getcodedetails`, {code: code})\r\n    }\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport InvoiceService from \"./services/InvoiceService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  DialogActions,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  IconButton,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function InvoiceDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [code, setCode] = useState(\"\");\r\n  const [codeError, setCodeError] = useState(false);\r\n\r\n  const [description, setDescription] = useState(\"\");\r\n  const [descriptionError, setDescriptionError] = useState(false);\r\n\r\n  const [items, setItems] = React.useState([]);\r\n\r\n  const [price, setPrice] = useState(\"\");\r\n  const [priceError, setPriceError] = useState(false);\r\n\r\n  const [title, setTitle] = React.useState('INVOICE ISSUANCE')\r\n\r\n\r\n  useEffect( () => {\r\n\r\n    if (props.invoice)\r\n    {\r\n     setItems(props.invoice.items)\r\n     setTitle('EDIT INVOICE')\r\n    }else\r\n    {\r\n      setTitle('INVOICE ISSUANCE')\r\n    }\r\n\r\n  }, [props.invoice])\r\n\r\n  const priceChanged = (event) => {\r\n    setPrice(event.target.value);\r\n    setPriceError(false);\r\n  };\r\n\r\n  const codeChanged = (event) => {\r\n    setCode(event.target.value?.toUpperCase());\r\n    setCodeError(false);\r\n  };\r\n\r\n  const descriptionChanged = (event) => {\r\n    setDescription(event.target.value);\r\n    setDescriptionError(false);\r\n  };\r\n\r\n  const handleClose = (refresh) => {\r\n    if (saving) return;\r\n\r\n    setPrice(\"\");\r\n    setCode(\"\");\r\n    setDescription(\"\");\r\n    setPriceError(false);\r\n    setCodeError(false);\r\n    setDescriptionError(false);\r\n    setItems([]);\r\n    setSaving(false);\r\n\r\n\r\n    props.handleClose(refresh);\r\n\r\n  };\r\n\r\n  const codeLeft = () => {\r\n    fetchCodeDetails();\r\n  };\r\n\r\n  const fetchCodeDetails = async () => {\r\n    try {\r\n      setDescription(\"...\");\r\n      const res = await InvoiceService.getCodeDetails(code);\r\n      if (res.data.status === \"OK\") {\r\n        const result = res.data.result;\r\n        if (result.length === 0) {\r\n          setCodeError(true);\r\n          setDescription(\"\");\r\n          setPrice(\"\");\r\n        } else if (result.length >= 1) {\r\n          setDescription(result[0].description);\r\n          setPrice(result[0].price);\r\n          setDescriptionError(false)\r\n          setPriceError(false)\r\n\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const addItemClicked = () => {\r\n    if (!validateItem()) {\r\n      return\r\n    }\r\n      \r\n\r\n    setItems([...items, { code, description, price }]);\r\n    setCode('')\r\n    setDescription('')\r\n    setPrice('')\r\n  };\r\n\r\n  const validateItem = () => {\r\n    let error = false;\r\n    if (!description || description.length === 0) {\r\n      setDescriptionError(true);\r\n      error = true;\r\n    }\r\n    if (!price || price.length === 0) {\r\n      setPriceError(true);\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const removeItem = (index) => {\r\n    let temp = [...items]\r\n    temp.splice(index,1)\r\n    setItems(temp) \r\n   }\r\n\r\n   const getGrandTotal = (_items) =>\r\n   {\r\n     let total = 0\r\n     _items.forEach(element => {\r\n       total += parseFloat(element.price)\r\n     });\r\n\r\n     return total\r\n   }\r\n\r\n   const saveClikced = async () => {\r\n     if (items.length === 0 && !props.invoice)\r\n     {\r\n       return\r\n     }\r\n\r\n     try{\r\n       setSaving(true)\r\n       let name = ''\r\n       let postCode = ''\r\n       let address = ''\r\n\r\n       if (props.booking.formData)\r\n       {\r\n         name = `${props.booking.formData.title} ${props.booking.forename} ${props.booking.formData.surname}`\r\n         postCode = props.booking.formData.postCode\r\n         address = props.booking.formData.address\r\n       }\r\n       else if (props.booking.forename && props.booking.surname)\r\n       {\r\n         name = `${props.booking.forename} ${props.booking.surname}`\r\n         postCode = props.booking.postCode\r\n         address = props.booking.address\r\n       }\r\n       else if (props.booking.fullname)\r\n       {\r\n         name = `${props.booking.fullname}`\r\n       }\r\n\r\n\r\n\r\n       const invoice = {\r\n         name: name,\r\n         date: new Date(),\r\n         dateAttended: new Date(props.booking.bookingDate),\r\n         items: items,\r\n         grandTotal: getGrandTotal(items),\r\n         bookingId: props.booking._id,\r\n         postCode: postCode,\r\n         address: address,\r\n       }\r\n       if (!props.invoice)\r\n       {\r\n          await InvoiceService.createInvoice(invoice)\r\n       }else if (items.length > 0)\r\n       {\r\n          await InvoiceService.updateInvoice(props.invoice.invoiceNumber ,invoice)\r\n       }else {\r\n        await InvoiceService.deleteinvoice(props.invoice.invoiceNumber)\r\n       }\r\n    \r\n       setSaving(false)\r\n       handleClose(true);\r\n     }\r\n     catch(err)\r\n     {\r\n        console.error(err)\r\n        setSaving(false)\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"md\"\r\n            open={props.open}\r\n            onClose={() => handleClose(false)}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <ReceiptIcon style={{ color: \"#1cb2c9\", fontSize: \"3rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#1cb2c9\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                  {`${title}`}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"500px\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"flex-start\"\r\n                  spacing={1}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  {/* <Grid item>\r\n                    <TextField\r\n                      autoFocus\r\n                      error={priceError}\r\n                      label=\"TOTAL Charges\"\r\n                      value={price}\r\n                      fullWidth\r\n                      required\r\n                      onChange={priceChanged}\r\n                      name=\"product-price\"\r\n                      id=\"product-price-id\"\r\n                      InputProps={{\r\n                        inputComponent: NumberFormatCustom,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">£</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid> */}\r\n\r\n                  <Grid item>\r\n                    <Grid container direction=\"row\" spacing={5}>\r\n                      <Grid item xs={2}>\r\n                        <TextField\r\n                          error={codeError}\r\n                          value={code}\r\n                          onChange={codeChanged}\r\n                          onBlur={codeLeft}\r\n                          fullWidth\r\n                          autoFocus\r\n                          label=\"Code\"\r\n                          name=\"code\"\r\n                          id=\"code-id\"\r\n                        />\r\n                      </Grid>\r\n\r\n                      <Grid item xs={6}>\r\n                        <TextField\r\n                          error={descriptionError}\r\n                          value={description}\r\n                          onChange={descriptionChanged}\r\n                          fullWidth\r\n                          label=\"Description\"\r\n                          name=\"code\"\r\n                          id=\"code-id\"\r\n                        />\r\n                      </Grid>\r\n\r\n                      <Grid item xs={2}>\r\n                        <TextField\r\n                          error={priceError}\r\n                          value={price}\r\n                          onChange={priceChanged}\r\n                          fullWidth\r\n                          label=\"Price\"\r\n                          name=\"price\"\r\n                          id=\"price-id\"\r\n                          InputProps={{\r\n                            inputComponent: NumberFormatCustom,\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                £\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={2}>\r\n                        <Button\r\n                          onClick={addItemClicked}\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          style={{ marginTop: \"12px\" }}\r\n                          disabled={saving}\r\n                        >\r\n                          + Add\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                  <div\r\n                      style={{\r\n                        backgroundColor: \"#fff\",\r\n                        color: \"#1cb2c9\",\r\n                        fontWeight: \"500\",\r\n                        fontSize: \"0.95rem\",\r\n                        padding: \"5px 8px\",                        \r\n                        marginBottom: \"-15px\",\r\n                        marginLeft: \"10px\",\r\n                        zIndex:\"99\",\r\n                        marginTop: \"30px\",\r\n                        \r\n                      }}\r\n                    >\r\n                      Invoice Items \r\n                    </div>\r\n\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"350px\",\r\n                      overflowY: \"scroll\",\r\n                      border: \"1px solid #ddd\",\r\n                      borderRadius: \"4px\",\r\n                      padding: \"25px\",\r\n                      position: \"relative\",\r\n                    }}\r\n                  >\r\n\r\n\r\n                    <Grid item>\r\n                      <Grid\r\n                        container\r\n                        direction=\"column\"\r\n                        justify=\"flex-start\"\r\n                        spacing={2}\r\n                        alignItems=\"flex-start\"\r\n                      >\r\n                        <Grid item style={{ width: \"100%\", fontWeight:\"500\" }}>\r\n                          <Grid container direction=\"row\" spacing={4}>\r\n                            <Grid item xs={2}>\r\n                              Code\r\n                            </Grid>\r\n                            <Grid item xs={5}>\r\n                              Description\r\n                            </Grid>\r\n                            <Grid item xs={2}>\r\n                              Price\r\n                            </Grid>\r\n                            <Grid item xs={3}></Grid>\r\n                          </Grid>\r\n                        </Grid>\r\n                        {items.map((item,index) => (\r\n                          <Grid item style={{ width: \"100%\" }}>\r\n                            <Grid container direction=\"row\" spacing={4}>\r\n                              <Grid item xs={2}>\r\n                                {item.code}\r\n                              </Grid>\r\n                              <Grid item xs={5}>\r\n                                {item.description}\r\n                              </Grid>\r\n                              <Grid item xs={2}>\r\n                                {parseFloat(item.price).toLocaleString('en-GB', { style: 'currency', currency: 'GBP' })}\r\n                              </Grid>\r\n                              <Grid item xs={3}>\r\n                                <Tooltip title=\"Remove Item\">\r\n                                <IconButton style={{marginTop:\"-15px\"}} onClick={() => removeItem(index)}>\r\n                                  <DeleteIcon color=\"primary\"/>\r\n                                </IconButton>\r\n                                </Tooltip>\r\n                              </Grid>\r\n                            </Grid>\r\n                          </Grid>\r\n                        ))}\r\n                      </Grid>\r\n                    </Grid>\r\n                  </div>\r\n                  \r\n                  <Grid item style={{marginTop:\"10px\"}}>\r\n                    <span style={{fontWeight:\"500\", color:\"#777\"}}>Grand Total : </span> <span style={{fontWeight:\"500\", color:\"#1cb2c9\", marginLeft:\"10px\", fontSize:\"1rem\"}}> {getGrandTotal(items).toLocaleString('en-GB', { style: 'currency', currency: 'GBP' })} </span>\r\n                  </Grid>\r\n\r\n                </Grid>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"flex-end\"\r\n                alignItems=\"center\"\r\n                spacing={1}\r\n              >\r\n                <Grid item>\r\n                  <Button\r\n                    onClick={() => handleClose(false)}\r\n                    style={{ width: \"100px\" }}\r\n                    disabled={saving}\r\n                  >\r\n                    back\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button\r\n                    onClick={saveClikced}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    style={{ width: \"100px\" }}\r\n                    disabled={saving}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  DialogActions,\r\n  DialogContentText,\r\n  Divider,\r\n  FormControlLabel,\r\n  IconButton,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport PDFService from \"./services/PDFService\";\r\n\r\nimport { calculatePrice } from \"./PriceCalculator\";\r\n\r\nimport bookingService from \"./services/BookService\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport BookService from \"./services/BookService\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {\r\n  FormatDateFromString,\r\n  RevertFormatDateFromString,\r\n} from \"./DateFormatter\";\r\nimport PayDialog from \"./PayDialog\";\r\n\r\n\r\nimport PrintIcon from \"@material-ui/icons/Print\";\r\nimport UndoIcon from \"@material-ui/icons/Undo\";\r\n\r\nimport SendIcon from '@material-ui/icons/Send';\r\n\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\n\r\nimport FileCopyOutlinedIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\nimport InvoiceDialog from \"../InvoiceDialog\";\r\nimport InvoiceService from \"../services/InvoiceService\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor: \"#373737\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor: \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#333\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n    listStyle: \"none\",\r\n    padding: \"0\",\r\n    margin: \"0\",\r\n  },\r\n\r\n  li: {\r\n    marginBottom: \"15px\",\r\n  },\r\n\r\n  icon: {\r\n    marginRight: \"8px\",\r\n  },\r\n\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n\r\n  lineThrough: {\r\n    textDecoration: \"line-through\",\r\n  },\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails: {\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\",\r\n  },\r\n\r\n  infoData: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontWeight: \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n\r\n  Accordion: {\r\n    backgroundColor: \"#f5f5f5\",\r\n    color: \"#222\",\r\n  },\r\n\r\n  AccordionDeleted: {\r\n    backgroundColor: \"#aaa\",\r\n    color: \"#555\",\r\n  },\r\n\r\n  DownloadForm: {\r\n    marginTop: \"10px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n\r\n  infoDataCharges: {\r\n    fontSize: \"18px\",\r\n    color: \"green\",\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  infoDataChargesHigher: {\r\n    fontSize: \"18px\",\r\n    color: \"red\",\r\n    fontWeight: \"600\",\r\n  },\r\n  BookedLabel: {\r\n    color: \"#606060\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    color: \"#0066aa\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  PositiveLabel: {\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\",\r\n  },\r\n\r\n  EditButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  ResendEmailsButton: {\r\n    // marginBottom : \"20px\",\r\n    color: \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  PayButton: {\r\n    marginLeft: \"70px\",\r\n    width: \"300px\",\r\n  },\r\n\r\n  printInvoiceButton: {\r\n    marginLeft: \"70px\",\r\n    fontSize:\"0.8rem\",\r\n    // width: \"300px\",\r\n  },\r\n\r\n  editInvoiceButton:{\r\n    marginLeft: \"10px\",\r\n    fontSize:\"0.8rem\",\r\n  },\r\n\r\n  PayLabel: {\r\n    marginLeft: \"20px\",\r\n\r\n    color: \"#2f942e\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  RestoreButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#eee\",\r\n    color: \"#333\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  DeleteButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\",\r\n    },\r\n\r\n    padding: \"10px\",\r\n  },\r\n\r\n  SaveButton: {\r\n    marginBottom: \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor: \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  CancelButton: {\r\n    marginBottom: \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    padding: \"0px\",\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  checkIconSmall: {\r\n    color: \"green\",\r\n    paddingTop: \"5px\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  centeredLabel: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  invoiceNumber :\r\n  {\r\n    display: \"inline-block\",\r\n    fontWeight: \"500\",\r\n    width:\"72px\",\r\n    fontSize:\"1rem\",\r\n    color: theme.palette.primary.main\r\n  },\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#alert-dialog-slide-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const [emailSent, setEmailSent] = React.useState(false)\r\n\r\n\r\n  const [openResendDialog, setOpenResendDialog] = React.useState(false);\r\n  const [openPayDialog, setOpenPayDialog] = React.useState(false);\r\n  const [openRefundDialog, setOpenRefundDialog] = React.useState(false);\r\n\r\n  const [openInvoiceDialog, setOpenInvoiceDialog] = React.useState(false);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [editMode, setEditMode] = React.useState({ edit: false, person: null });\r\n  const [deleteMode, setDeleteMode] = React.useState({\r\n    delete: false,\r\n    person: null,\r\n  });\r\n  const [restoreMode, setRestoreMode] = React.useState({\r\n    restore: false,\r\n    person: null,\r\n  });\r\n\r\n  const [saving, setSaving] = React.useState(false);\r\n  const [deleting, setDeleting] = React.useState(false);\r\n  const [restoring, setRestoring] = React.useState(false);\r\n\r\n  const [validationError, setValidationError] = React.useState({});\r\n\r\n  const [bookingDate, setBookingDate] = React.useState(\"\");\r\n  const [bookingTime, setBookingTime] = React.useState(\"\");\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [tel, setTel] = React.useState(\"\");\r\n  const [notes, setNotes] = React.useState(\"\");\r\n  const [service, setService] = React.useState(\"\");\r\n\r\n  const [refreshData, setRefreshData] = React.useState(false);\r\n\r\n  const [booking, setBooking] = React.useState(null);\r\n\r\n  const [recordChanged, setRecordChanged] = React.useState(false);\r\n\r\n  const [fieldChanged, setFieldChanged] = React.useState(false);\r\n\r\n  const [openUndoPayDialog, setOpenUndoPayDialog] = React.useState(false);\r\n\r\n  const [openTimeStampDialog, setOpenTimeStampDialog] = React.useState(false);\r\n\r\n  const [invoice, setInvoice] = React.useState(null)\r\n  const [invoiceLoaded, setInvoiceLoaded] = React.useState(false)\r\n\r\n\r\n  const fetchInvoice = async () =>\r\n  {\r\n    try{\r\n      setInvoiceLoaded(false)\r\n      const res = await InvoiceService.getInvoiceByBookingId(props.booking._id)\r\n      setInvoice(res.data.invoice)\r\n      setInvoiceLoaded(true)\r\n    }\r\n    catch(err)\r\n    {\r\n      setInvoiceLoaded(true)\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  React.useEffect( () => {\r\n\r\n    if (props.booking)\r\n    {\r\n      fetchInvoice()\r\n    }\r\n\r\n\r\n  }, [props.booking])\r\n\r\n\r\n  const handleCloseTimeStampDialog = () => {\r\n    setOpenTimeStampDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseUndoPayDialog = () => {\r\n    setOpenUndoPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseResendDialog = () => {\r\n    setOpenResendDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleClosePayDialog = () => {\r\n    setOpenPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseRefundDialog = () => {\r\n    setOpenRefundDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseInvoiceDialog = (refresh) => {\r\n    setOpenInvoiceDialog(false);\r\n    setSelectedBooking(null);\r\n    if (refresh)\r\n    {\r\n      fetchInvoice()\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (booking) {\r\n      const isChanged =\r\n        bookingDate !== FormatDateFromString(booking.bookingDate) ||\r\n        bookingTime !== booking.bookingTime ||\r\n        fullname !== booking.fullname ||\r\n        email !== booking.email ||\r\n        tel !== booking.phone ||\r\n        notes !== booking.notes;\r\n\r\n      setRecordChanged(isChanged);\r\n    }\r\n  }, [fieldChanged]);\r\n\r\n  useEffect(() => {\r\n    if (!props.open) {\r\n      setTimeout(() => {\r\n        setEditMode({ edit: false, person: null });\r\n        setRecordChanged(false);\r\n      }, 500);\r\n    }\r\n  }, [props.open]);\r\n\r\n  const bookingDateChanged = (event) => {\r\n    setBookingDate(event.target.value);\r\n    setValidationError({ ...validationError, bookingDateError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const bookingTimeChanged = (event) => {\r\n    setBookingTime(event.target.value);\r\n    setValidationError({ ...validationError, bookingTimeError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const telChanged = (event) => {\r\n    setTel(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const serviceChanged = (event) => {\r\n    setService(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    if (status === \"booked\") {\r\n      return <div className={classes.BookedLabel}> Booking Made </div>;\r\n    } else if (status === \"patient_attended\") {\r\n      return (\r\n        <div className={classes.PatientAttendedLabel}> Patient Attended </div>\r\n      );\r\n    } else {\r\n      return \"Unknown\";\r\n    }\r\n  };\r\n\r\n  const handleEditModeChanged = (edit, person) => {\r\n    if (edit) {\r\n      setFullname(person.fullname);\r\n      setBookingDate(FormatDateFromString(person.bookingDate));\r\n      setBookingTime(person.bookingTime.toUpperCase());\r\n      setEmail(person.email);\r\n      setTel(person.phone);\r\n      if (person.notes) {\r\n        setNotes(person.notes);\r\n      }\r\n\r\n      setEditMode({ edit: edit, person: person });\r\n    } else if (!edit && !person) {\r\n      setEditMode({ edit: edit, person: person });\r\n      setRecordChanged(false);\r\n    } else if (!edit && person) {\r\n      const booking = {};\r\n      const bookingId = person._id;\r\n      booking.email = email;\r\n      booking.phone = tel;\r\n      booking.fullname = fullname;\r\n      booking.notes = notes;\r\n      booking.service = service;\r\n      booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n      booking.bookingTime = bookingTime;\r\n      booking.bookingRef = person.bookingRef;\r\n\r\n      if (validateBooking(booking)) {\r\n        updateBooking({ bookingId: bookingId, person: booking });\r\n      }\r\n    }\r\n  };\r\n\r\n  const validateDate = (str) => {\r\n    var error = false;\r\n    if (!str || str.length !== 10) {\r\n      error = true;\r\n    }\r\n\r\n    if (str.charAt(4) !== \"-\" || str.charAt(7) !== \"-\") {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n      if (!result) {\r\n        error = true;\r\n      }\r\n\r\n      const year = parseInt(str.substr(0, 4));\r\n      const month = parseInt(str.substr(5, 2));\r\n      const day = parseInt(str.substr(8, 2));\r\n\r\n      if (year < 1900) {\r\n        error = true;\r\n      }\r\n\r\n      if (month < 1 || month > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (day > 31) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateTime = (str) => {\r\n    var error = false;\r\n\r\n    const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n    if (!result) {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const hour = parseInt(str.substr(0, 2));\r\n      const minute = parseInt(str.substr(3, 2));\r\n\r\n      if (hour < 0 || hour > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (minute < 0 || minute > 59) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateBooking = (booking) => {\r\n    var error = false;\r\n\r\n    if (!validateDate(booking.bookingDate)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingDateError: true });\r\n    }\r\n\r\n    if (!validateTime(booking.bookingTime)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingTimeError: true });\r\n    }\r\n    return !error;\r\n  };\r\n\r\n  const updateBooking = (payload) => {\r\n    setSaving(true);\r\n    bookingService\r\n      .updateBooking(payload)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const deleteBooking = (id) => {\r\n    setDeleting(true);\r\n    bookingService\r\n      .deleteBooking(id)\r\n      .then((res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const restoreBooking = (id) => {\r\n    setRestoring(true);\r\n    bookingService\r\n      .unDeleteBooking(id)\r\n      .then((res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteModeChanged = (del, person) => {\r\n    if (del) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && !person) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && person) {\r\n      deleteBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n    if (restore) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && !person) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && person) {\r\n      restoreBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const changeBackToBookingMade = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeBackToBookingMade(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const changeToPatientAttended = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeToPatientAttended(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const Pay = () => {\r\n    setSelectedBooking(booking);\r\n    setOpenPayDialog(true);\r\n  };\r\n\r\n  const OpenInvoiceDialog = () => {\r\n    setSelectedBooking(booking);\r\n    setOpenInvoiceDialog(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      BookService.getBookingById(props.booking._id)\r\n        .then((res) => {\r\n          setBooking(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n    }\r\n  }, [refreshData, state.bookingPayChanged]);\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      setBooking(props.booking);\r\n    }\r\n  }, [props.booking]);\r\n\r\n  const undoPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.unPayBooking(booking._id);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n  };\r\n\r\n  const refundPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.refundBooking(booking._id);\r\n      setSaving(false);\r\n      updateShouldRefundsCount()\r\n      setOpenRefundDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenRefundDialog(false);\r\n    }\r\n  };\r\n\r\n  const updateShouldRefundsCount = async () =>\r\n  {\r\n    try{\r\n      const res = await BookService.getShouldRefundsCount()\r\n      if (res && res.data && res.data.status === \"OK\")\r\n      {\r\n        setState(state => ({...state, shouldRefunsCount: res.data.count}))\r\n      }\r\n    }\r\n    catch(ex)\r\n    {\r\n      console.error(ex)\r\n    }\r\n  }\r\n\r\n  const downloadRegForm = (id) =>\r\n  {\r\n        PDFService.downloadGPRegForm(id).then( (res) => \r\n        {\r\n           const file = new Blob(\r\n             [res.data], \r\n             {type: 'application/pdf'});\r\n \r\n           const fileURL = URL.createObjectURL(file);   \r\n           window.open(fileURL, \"_blank\");\r\n \r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n  }\r\n\r\n  const downloadInvoice = (id) =>\r\n  {\r\n        PDFService.downloadInvoice(id).then( (res) => \r\n        {\r\n           const file = new Blob(\r\n             [res.data], \r\n             {type: 'application/pdf'});\r\n \r\n           const fileURL = URL.createObjectURL(file);   \r\n           window.open(fileURL, \"_blank\");\r\n \r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n  }\r\n\r\n  const sendRegForm = (id) =>\r\n  {\r\n    setSaving(true)    \r\n    setEmailSent(false)\r\n    BookService.sendRegFormEmail(id).then( (res) => \r\n        {\r\n          setSaving(false)\r\n          if (res.data.status === \"OK\")\r\n          {\r\n            setEmailSent(true)\r\n          }\r\n          \r\n \r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setSaving(false)\r\n        });\r\n  }\r\n\r\n  \r\n  const onClose = () =>\r\n  {\r\n    setEmailSent(false)\r\n    setInvoice(null)\r\n    props.onClose()\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"sm\"\r\n            open={props.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={onClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n          >\r\n            <DialogTitle\r\n              id=\"alert-dialog-slide-title\"\r\n              style={\r\n                booking.tr ? { backgroundColor: \"#7e0082\", color: \"#fff\" } : {}\r\n              }\r\n            >\r\n              <div style={{ position: \"absolute\", top: \"25x\", left: \"25px\" }}>\r\n                <Tooltip title=\"COPY EDIT LINK TO CLIPBOARD\">\r\n                  <IconButton\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(\r\n                        `https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/${booking._id}`\r\n                      );\r\n                      setCopied(true);\r\n                      setTimeout(() => {\r\n                        setCopied(false);\r\n                      }, 1500);\r\n                    }}\r\n                    aria-label=\"delete\"\r\n                    className={classes.margin}\r\n                    size=\"small\"\r\n                  >\r\n                    <FileCopyOutlinedIcon\r\n                      style={booking.tr ? { color: \"#ddd\" } : {}}\r\n                      fontSize=\"14px\"\r\n                    />\r\n                  </IconButton>\r\n                </Tooltip>\r\n\r\n                <span\r\n                  hidden={!copied}\r\n                  style={{ fontSize: \"12px\", transition: \"all 1s ease-in\" }}\r\n                >\r\n                  {\" \"}\r\n                  Copied{\" \"}\r\n                </span>\r\n              </div>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", right: \"60px\", backgroundColor:CalendarColors.GP_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\"}}>\r\n                    GP\r\n              </div>\r\n\r\n              {/* {booking.tr && (\r\n                <div style={{position:\"absolute\",  right: \"15px\"}}>\r\n                     TR\r\n                </div>\r\n\r\n              )} */}\r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                spacing={2}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <div\r\n                    style={\r\n                      booking.deleted\r\n                        ? {\r\n                            paddingBottom: \"5px\",\r\n                            textDecoration: \"line-through\",\r\n                          }\r\n                        : {}\r\n                    }\r\n                  >\r\n                    {`${booking.fullname}`}\r\n                  </div>\r\n                </Grid>\r\n\r\n                {booking.deleted && (\r\n                  <Grid item>\r\n                    <Tooltip title=\"This record has been deleted.\">\r\n                      <DeleteIcon\r\n                        style={\r\n                          booking.tr\r\n                            ? {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#fff\",\r\n                                fontSize: 25,\r\n                              }\r\n                            : {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#333\",\r\n                                fontSize: 25,\r\n                              }\r\n                        }\r\n                      />\r\n                    </Tooltip>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  // height: \"550px\",\r\n                  paddingTop: \"0px\",\r\n                }}\r\n              >\r\n                <Grid item xs={12} md={12} key={`panel0`}>\r\n                  <div className={classes.infoDetails}>\r\n                    <ul className={classes.ul}>\r\n                      {/* Restore Functionality ******************************************* */}\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"500\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                            color: \"#333\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to restore this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !booking.deleted ||\r\n                          (restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.RestoreButton}\r\n                        >\r\n                          Restore This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Restore this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/*  ******************************************************************* */}\r\n\r\n                      {/* Edit Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          deleteMode.delete ||\r\n                          (editMode.edit && editMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleEditModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.EditButton}\r\n                        >\r\n                          Edit Booking Info\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={saving || !recordChanged}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          Save Changes\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={saving}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      {/* Delete Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"600\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to delete this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          props.deleteButtonDisabled ||\r\n                          booking.deleted ||\r\n                          editMode.edit ||\r\n                          (deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        {booking.OTCCharges > 0 && (\r\n                          <Tooltip title={\"Paid Records Cannot be Deleted!\"}>\r\n                            <div>\r\n                            <Button\r\n                              disabled={booking.OTCCharges > 0}\r\n                              type=\"button\"\r\n                              fullWidth\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={() => {\r\n                                handleDeleteModeChanged(true, booking);\r\n                              }}\r\n                              className={classes.DeleteButton}\r\n                            >\r\n                              Delete This Record\r\n                            </Button>\r\n                            </div>\r\n                          </Tooltip>\r\n                        )}\r\n                        {booking.OTCCharges === 0 && (\r\n                          <Button\r\n                            disabled={booking.OTCCharges > 0}\r\n                            type=\"button\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={() => {\r\n                              handleDeleteModeChanged(true, booking);\r\n                            }}\r\n                            className={classes.DeleteButton}\r\n                          >\r\n                            Delete This Record\r\n                          </Button>\r\n                        )}\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Delete this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED DATE</span>\r\n\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.bookingDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingDateError}\r\n                            className={classes.TextBox}\r\n                            value={bookingDate}\r\n                            onChange={bookingDateChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED TIME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.bookingTime.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingTimeError}\r\n                            className={classes.TextBox}\r\n                            value={bookingTime}\r\n                            onChange={bookingTimeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>FULLNAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.fullname}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={fullname}\r\n                            onChange={fullnameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>EMAIL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.email}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={email}\r\n                            onChange={emailChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TEL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.phone?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={tel}\r\n                            onChange={telChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      {/* <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>SERVICE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.service}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={service}\r\n                            onChange={serviceChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li> */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>NOTES</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.notes}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={notes}\r\n                            onChange={notesChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>STATUS</span>{\" \"}\r\n                        {getStatusLabel(booking.status)}\r\n                        {booking.status === \"patient_attended\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"primary\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeBackToBookingMade(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change Back To Booking Made\r\n                            </Button>\r\n                          )}\r\n                        {booking.status === \"booked\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"default\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeToPatientAttended(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change To Patient Attended\r\n                            </Button>\r\n                          )}\r\n                      </li>\r\n\r\n                     \r\n\r\n                      <li hidden={booking.deleted || editMode.edit}>\r\n                        <Button\r\n                          disabled = {!booking.formData}\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Registration Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted || editMode.edit || booking.formData}>\r\n                        <Button\r\n                          disabled={!booking.email || booking.email.length < 3 }\r\n                          startIcon = {<SendIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            sendRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                          style= {{position: \"relative\"}}\r\n                        >\r\n                          Send Registration Form Email\r\n\r\n                          {emailSent && (\r\n                            <div style={{position: \"absolute\", right: \"10px\", top : \"5px\", color: \"#05ad19\"}}>\r\n                                Email Sent\r\n                            </div>\r\n                          )}\r\n\r\n                        </Button>\r\n                      </li>\r\n\r\n\r\n                      {/* <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"20px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            ONLINE DEPOSIT\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.deposit || booking.deposit === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${booking.deposit.toLocaleString(\r\n                            \"en-GB\"\r\n                          )}`}</span>\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            !booking.paid &&\r\n                            booking.deleted &&\r\n                            booking.deposit > 0 && (\r\n                              <Button\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                className={classes.PayButton}\r\n                                onClick={(event) => setOpenRefundDialog(true)}\r\n                              >\r\n                                Refund Deposit\r\n                              </Button>\r\n                            )}\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            booking.refund && (\r\n                              <React.Fragment>\r\n                                <span className={classes.PayLabel}>\r\n                                  {\" \"}\r\n                                  <CheckIcon\r\n                                    className={classes.checkIconSmall}\r\n                                  />{\" \"}\r\n                                  Refund Done\r\n                                  {booking.paidBy === \"corporate\"\r\n                                    ? ` \"${booking.corporate}\" `\r\n                                    : \"\"}\r\n                                </span>\r\n                              </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                      </li>\r\n */}\r\n                      <Divider/>\r\n\r\n                      <li className={classes.li} style={{marginTop:\"20px\"}}>\r\n                        <span className={classes.infoTitle}>INVOICE # : </span>{\" \"}\r\n                        <span\r\n                          style={{ paddingLeft: \"0px\" }}\r\n                        >\r\n                          {!invoiceLoaded && <span className={classes.invoiceNumber}> ... </span>}\r\n                          {invoiceLoaded && invoice && <span className={classes.invoiceNumber}> {invoice.invoiceNumber} </span>}\r\n                          {invoiceLoaded && !invoice && <span className={classes.invoiceNumber} style={{color:\"red\", fontSize:\"0.9rem\"}}> N/A </span>}\r\n                        </span>\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          !booking.deleted && (\r\n                            <React.Fragment>\r\n\r\n                            {invoiceLoaded && !invoice && (\r\n                                <Button\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                className={classes.PayButton}\r\n                                onClick={() => OpenInvoiceDialog()}\r\n                              >\r\n                                Issue Invoice\r\n                              </Button>\r\n                            )}\r\n\r\n                            {invoiceLoaded && invoice && (\r\n                              <React.Fragment>\r\n\r\n                              <Button\r\n                                variant=\"outlined\"\r\n                                startIcon = {<PrintIcon/>}\r\n                                color=\"primary\"\r\n                                className={classes.printInvoiceButton}\r\n                                onClick={() => downloadInvoice(invoice._id)}\r\n                              >\r\n                                Download Invoice\r\n                              </Button>\r\n\r\n                                <Button\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                className={classes.editInvoiceButton}\r\n                                onClick={() => OpenInvoiceDialog()}\r\n                              >\r\n                                Edit Invoice\r\n                              </Button>\r\n\r\n\r\n\r\n                                </React.Fragment>\r\n\r\n                            )}\r\n\r\n\r\n\r\n                            </React.Fragment>\r\n                          )\r\n                          }\r\n                      </li>\r\n\r\n\r\n\r\n                      <li className={classes.li} style={{marginTop:\"20px\"}}>\r\n                        <span className={classes.infoTitle}>TOTAL CHARGES</span>{\" \"}\r\n                        <span\r\n                          style={{ paddingLeft: \"15px\" }}\r\n                          className={\r\n                            !booking.OTCCharges || booking.OTCCharges === 0\r\n                              ? classes.infoDataChargesHigher\r\n                              : classes.infoDataCharges\r\n                          }\r\n                        >{`£${booking.OTCCharges.toLocaleString(\r\n                          \"en-GB\"\r\n                        )}`}</span>\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          !booking.paid &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"secondary\"\r\n                              className={classes.PayButton}\r\n                              onClick={(event) => Pay()}\r\n                            >\r\n                              Pay\r\n                            </Button>\r\n                          )}\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          booking.paid && (\r\n                            <React.Fragment>\r\n                              <span className={classes.PayLabel}>\r\n                                {\" \"}\r\n                                <CheckIcon\r\n                                  className={classes.checkIconSmall}\r\n                                />{\" \"}\r\n                                Paid by {booking.paidBy}\r\n                                {booking.paidBy === \"corporate\"\r\n                                  ? ` \"${booking.corporate}\" `\r\n                                  : \"\"}\r\n                              </span>\r\n\r\n                              <Tooltip title=\"Undo Payment\">\r\n                                <IconButton\r\n                                  onClick={() => setOpenUndoPayDialog(true)}\r\n                                >\r\n                                  <UndoIcon style={{ color: \"red\" }} />\r\n                                </IconButton>\r\n                              </Tooltip>\r\n                            </React.Fragment>\r\n                          )}\r\n                      </li>\r\n\r\n                      {/* <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"10px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            TOTAL CHARGES\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.OTCCharges || booking.OTCCharges === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${(\r\n                            booking.deposit + booking.OTCCharges\r\n                          ).toLocaleString(\"en-GB\")}`}</span>\r\n                        </div>\r\n                      </li> */}\r\n                    </ul>\r\n                  </div>\r\n                </Grid>\r\n              </div>\r\n              <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving || deleting || restoring}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n\r\n            <PayDialog\r\n              booking={selectedBooking}\r\n              open={openPayDialog}\r\n              handleClose={handleClosePayDialog}\r\n            />\r\n\r\n          <InvoiceDialog\r\n              booking={selectedBooking}\r\n              invoice={invoice}\r\n              open={openInvoiceDialog}\r\n              handleClose={handleCloseInvoiceDialog}\r\n            />\r\n\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openUndoPayDialog}\r\n            onClose={handleCloseUndoPayDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Undo Payment\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to undo payment for this booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseUndoPayDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button onClick={undoPaymentClicked} color=\"secondary\" autoFocus>\r\n                Yes, Undo Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openRefundDialog}\r\n            onClose={handleCloseRefundDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Refund Deposit\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to refund deposit payment for this booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseRefundDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button onClick={refundPaymentClicked} color=\"secondary\" autoFocus>\r\n                Yes, Refund Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport { Button, Checkbox, CircularProgress, Dialog, DialogContent, DialogTitle, Divider, FormControl, FormControlLabel, Grid, Icon, InputLabel, LinearProgress, Link, makeStyles, MenuItem, Paper, Select, SvgIcon, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport BookingDialog from './BookingDialog';\r\n\r\nimport NewReleasesIcon from '@material-ui/icons/NewReleases';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from 'react-draggable';\r\n\r\nimport * as dateformat from 'dateformat';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\n\r\n\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport PriceCalculator from './PriceCalculator';\r\nimport { corporates } from './Corporates';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel:{\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color : \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\"\r\n  },\r\n\r\n  ExportToExcelButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n   \r\n  },\r\n\r\n  ExportToExcelButtonInline:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n    cursor: \"pointer\",\r\n    padding: \"10px\"\r\n   \r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n},\r\n\r\nth: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntd: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntopSelect: {\r\n  margin: theme.spacing(1),\r\n  minWidth: 80,\r\n},\r\n\r\nnotifyIcon:{\r\n  width: \"16px\",\r\n  height: \"16px\",\r\n  borderRadius: \"50%\",\r\n  backgroundColor : \"rgb(220, 0, 78)\",\r\n  marginLeft: \"10px\"\r\n}\r\n\r\n}));\r\n\r\nconst getTableTitle = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return `Today's Bookings`;\r\n  }else if (str === 'old')\r\n  {\r\n    return `Old Bookings`;\r\n  }else if (str === 'future')\r\n  {\r\n    return `Future Bookings`;\r\n  }else if (str === 'recent')\r\n  {\r\n    return `Recent Bookings`;\r\n  }else if (str === 'live')\r\n  {\r\n    return `Live Bookings`;\r\n  }else if (str === 'completed')\r\n  {\r\n    return `Completed Bookings`;\r\n  }else if (str === 'positive')\r\n  {\r\n    return `Positive Results`;\r\n  }else if (str === 'deleted')\r\n  {\r\n    return `Deleted Records`;\r\n  }else if (str === 'late')\r\n  {\r\n    return `40 Hours Late`;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return `All Bookings`;\r\n  }\r\n\r\n}\r\n\r\nconst getTableIcon = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return <NewReleasesIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'old')\r\n  {\r\n    return <HistoryIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'future')\r\n  {\r\n    return <TimelineIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'recent')\r\n  {\r\n    return <AutorenewIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'live')\r\n  {\r\n    return <LiveTvIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'completed')\r\n  {\r\n    return  <PlaylistAddCheckIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'positive')\r\n  {\r\n    return <AddCircleOutlineIcon style={{fontSize:\"2.2rem\"}} />\r\n  }else if (str === 'deleted')\r\n  {\r\n    return <DeleteIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'late')\r\n  {\r\n    return <HourglassEmptyIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return <DescriptionIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n\r\n}\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [topCount, setTopCount] = React.useState(25)\r\n  const topCountChanged = (event) =>\r\n  {\r\n    setTopCount(event.target.value)\r\n    loadData(event.target.value)\r\n  }\r\n  \r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () =>\r\n  {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  }\r\n\r\n\r\n  const [fromDate, setFromDate] = React.useState(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ));\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ));\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(dateformat(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n  const [untilDateStr, seUntilDateStr] = useState(dateformat(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const[chkDate, setChkDate] = useState(true);\r\n  const[chkForename, setChkForename] = useState(true);\r\n  const[chkSurname, setChkSurname] = useState(true);\r\n  const[chkDOB, setChkDOB] = useState(true);\r\n  const[chkEmail, setChkEmail] = useState(true);\r\n  const[chkTel, setChkTel] = useState(true);\r\n  const[chkCertificate, setChkCertidicate] = useState(true);\r\n  const[chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const[chkextRef, setChkExtRef] = useState(true);\r\n  const[chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) =>\r\n  {\r\n    setJustCorporate(event.target.checked);\r\n  }\r\n  \r\n\r\n  const chkDateChanged = (event) =>\r\n  {\r\n    setChkDate(event.target.checked);\r\n  }\r\n\r\n  const chkForenameChanged = (event) =>\r\n  {\r\n    setChkForename(event.target.checked);\r\n  }\r\n\r\n  const chkSurnameChanged = (event) =>\r\n  {\r\n    setChkSurname(event.target.checked);\r\n  }\r\n\r\n  const chkDOBChanged = (event) =>\r\n  {\r\n    setChkDOB(event.target.checked);\r\n  }\r\n\r\n  const chkEmailChanged = (event) =>\r\n  {\r\n    setChkEmail(event.target.checked);\r\n  }\r\n\r\n  const chkTelChanged = (event) =>\r\n  {\r\n    setChkTel(event.target.checked);\r\n  }\r\n\r\n  const chkCertificateChanged = (event) =>\r\n  {\r\n    setChkCertidicate(event.target.checked);\r\n  }\r\n\r\n  const chkAntiBodyTestChanged = (event) =>\r\n  {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  }\r\n\r\n  const chkextRefChanged = (event) =>\r\n  {\r\n    setChkExtRef(event.target.checked);\r\n  }\r\n\r\n  const chkPriceChanged = (event) =>\r\n  {\r\n    setChkPrice(event.target.checked);\r\n  }\r\n\r\n\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === 'recent')\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n\r\n           <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n\r\n          \r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n        if (!params.value)\r\n        {\r\n           return ( \r\n              <React.Fragment>                    \r\n                    <CloseIcon className={classes.closeIcon}/>                        \r\n              </React.Fragment>\r\n           );\r\n        }\r\n        else\r\n        {\r\n           if (params.getValue('paidBy') === 'credit card')\r\n           {\r\n             return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'cash')\r\n           {\r\n             return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'corporate')\r\n           {\r\n             return ( <BusinessIcon className={classes.checkIcon}/> );\r\n           }\r\n           else\r\n           {\r\n             return '';  \r\n           }\r\n        }\r\n  }\r\n },\r\n\r\n\r\n      { field: 'timeStamp', headerName: 'TimeStamp', width: 200, valueFormatter: (params) => { \r\n        return formatTimeStamp(params.value);\r\n        }\r\n      },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n          }\r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink}\r\n              //  onClick={\r\n              //   () => {\r\n              //     console.log(params.value);\r\n  \r\n              //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n              //     setState(state => ({...state, ref : params.value}));\r\n              //     setState(state => ({...state, refError : false})); \r\n              //     setState(state => ({...state, foundRecords : []}));\r\n              //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n              //   }\r\n              // }\r\n              \r\n              >\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n      { field: 'email', headerName: 'Email', width: 200 },\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n\r\n  }\r\n  else\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n            <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n               if (!params.value)\r\n               {\r\n                  return ( \r\n                    <React.Fragment>\r\n                                <CloseIcon className={classes.closeIcon}/> \r\n                                {parseInt(params.getValue('deposit')) > 0 && props.date === 'deleted' && (\r\n                                      <span className={classes.notifyIcon}>&nbsp;</span>\r\n                                )}\r\n\r\n                               \r\n                    </React.Fragment>\r\n                     \r\n                        \r\n                  \r\n                  \r\n                  );\r\n               }\r\n               else\r\n               {\r\n                  if (params.getValue('paidBy') === 'credit card')\r\n                  {\r\n                    return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'cash')\r\n                  {\r\n                    return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'corporate')\r\n                  {\r\n                    return ( <BusinessIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else\r\n                  {\r\n                    return '';  \r\n                  }\r\n               }\r\n         }\r\n        },\r\n        { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n          return FormatDateFromString(params.value);\r\n      }\r\n   },\r\n  { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n    return params.getValue('bookingTime');\r\n  }},\r\n  { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n      if (params.value === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}>  BM </span>\r\n        );\r\n    \r\n      }else if (params.value === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> PA </span>\r\n        );\r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n  },\r\n  { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n    return (\r\n      <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n          <Link className={classes.RefLink}\r\n          //  onClick={\r\n          //   () => {\r\n          //     console.log(params.value);\r\n\r\n          //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n          //     setState(state => ({...state, ref : params.value}));\r\n          //     setState(state => ({...state, refError : false})); \r\n          //     setState(state => ({...state, foundRecords : []}));\r\n          //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n          //   }\r\n          // }\r\n          \r\n          >\r\n            {params.value}\r\n          </Link>\r\n      </Tooltip>\r\n\r\n    );\r\n  }},\r\n  { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n  { field: 'email', headerName: 'Email', width: 200 },\r\n  { field: 'phone', headerName: 'Tel', width: 150 },\r\n  { field: 'notes', headerName: 'Notes', width: 500 },\r\n\r\n    \r\n    ];\r\n  \r\n\r\n  }\r\n\r\n\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : true});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n  \r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) =>\r\n  {\r\n    const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n    const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n    if (todayStr === timeStampStr)\r\n    {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    }\r\n    else\r\n    {\r\n       return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  }\r\n\r\n  const loadData = (top) =>\r\n  {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === 'today')\r\n    {\r\n      api = BookService.getTodayBookings;\r\n    }else if (props.date === 'old')\r\n    {\r\n      api = BookService.getOldBookings;\r\n    }else if (props.date === 'future')\r\n    {\r\n      api = BookService.getFutureBookings;\r\n    }else if (props.date === 'recent')\r\n    {\r\n      api = BookService.getRecentBookingsAll;\r\n    }\r\n    else if (props.date === 'deleted')\r\n    {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n     \r\n    setData({bookings: [], cachedBookings: [], isFetching: true});\r\n   \r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top).then( (res) =>{\r\n      // console.log(res)\r\n      for (var i=0; i < res.data.length; i++)\r\n      {\r\n        res.data[i] = {...res.data[i], id : i + 1}\r\n      }  \r\n      setData({bookings: [...res.data], cachedBookings: [...res.data], isFetching: false});\r\n      // return res.data;\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n            setTopCount(25)\r\n            loadData(25)\r\n        },\r\n        [props.date]);\r\n\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => \r\n\r\n             (element.fullname.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n             || (element.service.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n               \r\n              \r\n          );\r\n  \r\n  \r\n          setData({bookings: [...filteredData], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n  \r\n      useEffect(() => {\r\n\r\n       loadData(topCount)\r\n    \r\n      }, [state.bookingDialogDataChanged]);    \r\n\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  }    \r\n  \r\n  const openDetailsDialog = (event, id) =>\r\n  {\r\n    const booking = data.bookings.find(element => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n\r\n  }\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    loadData(topCount)\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n    \r\n  }\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) =>\r\n  {\r\n    setOpenDialogExcel(true);\r\n  }\r\n\r\n  const isTopSelectHidden = (date)=>\r\n  {\r\n    return date === 'live' || date === 'positive' || date === 'late' || date === 'today'\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.showCreateExcel && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-from\"\r\n                        label=\"From\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price (£) </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {/* {FormatDateFromString(booking.birthDate)} */}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n} ","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts';\r\nimport Title from './Title';\r\nimport dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n// Generate Sales Data\r\nfunction createData(time, amount) {\r\n  return { time, amount };\r\n}\r\n\r\n\r\nconst emptyData = [\r\n  createData('09:00', 0),\r\n  createData('10:00', 0),\r\n  createData('11:00', 0),\r\n  createData('12:00', 0),\r\n  createData('13:00', 0),\r\n  createData('14:00', 0),\r\n  createData('15:00', 0),\r\n  createData('16:00', 0),\r\n  createData('17:00', 0),\r\n  createData('18:00', undefined),\r\n\r\n];\r\n\r\nconst getCount = (data, str) =>\r\n{\r\n  if (!data)\r\n    return 0;\r\n\r\n  var count = 0;\r\n  for (var i=0; i < data.length; i++)\r\n  {\r\n    if (data[i]._id.substr(0,2) === str)\r\n    {\r\n      count += data[i].count;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nexport default function Chart() {\r\n  const theme = useTheme();\r\n\r\n  const [data, setData] = React.useState(emptyData);\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() =>\r\n  {\r\n    const fetchData = async () =>\r\n    {\r\n      const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n      var result = [];\r\n      try\r\n      {\r\n          setLoading(true)\r\n          const res = await BookService.getBookingsStatsByDateStr(todayStr);\r\n          setLoading(false)\r\n          const data = res.data.result;\r\n          result.push(createData('09:00', getCount(data,'09')));\r\n          result.push(createData('10:00', getCount(data,'10')));\r\n          result.push(createData('11:00', getCount(data,'11')));\r\n          result.push(createData('12:00', getCount(data,'12')));\r\n          result.push(createData('13:00', getCount(data,'13')));\r\n          result.push(createData('14:00', getCount(data,'14')));\r\n          result.push(createData('15:00', getCount(data,'15')));\r\n          result.push(createData('16:00', getCount(data,'16')));\r\n          result.push(createData('17:00', getCount(data,'17')));\r\n          result.push(createData('18:00', undefined));\r\n \r\n           setData(result);\r\n      }\r\n      catch(err){\r\n        setLoading(false)\r\n        console.error(err);\r\n      }\r\n\r\n    }\r\n  \r\n   fetchData();\r\n\r\n  }, [] );\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today</Title>\r\n      <ResponsiveContainer>\r\n        <LineChart\r\n          data={data}\r\n          margin={{\r\n            top: 16,\r\n            right: 16,\r\n            bottom: 0,\r\n            left: 24,\r\n          }}\r\n        >\r\n          <XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n          <YAxis stroke={theme.palette.text.secondary}>\r\n            <Label\r\n              angle={270}\r\n              position=\"left\"\r\n              style={{ textAnchor: 'middle', fill: theme.palette.text.primary }}\r\n            >\r\n              Online Bookings\r\n            </Label>\r\n          </YAxis>\r\n          <Line type=\"monotone\" dataKey=\"amount\" stroke={theme.palette.primary.main} dot={false} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Title from \"./Title\";\r\nimport { Grid, LinearProgress, Tooltip } from \"@material-ui/core\";\r\nimport * as dateformat from \"dateformat\";\r\nimport BookService from \"./services/BookService\";\r\nimport BookingDialog from \"./BookingDialog\";\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    margin: \"5px\",\r\n    padding: \"5px\",\r\n    maxWidth: \"90px\",\r\n    minHeight: \"30px\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    borderRadius: \"5px\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n    align: \"center\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n});\r\n\r\nconst isWeekend = (date) => {\r\n  return (\r\n    date.getDay() === 1 ||\r\n    date.getDay() === 2 ||\r\n    date.getDay() === 3 ||\r\n    date.getDay() === 6 ||\r\n    date.getDay() === 0\r\n  );\r\n};\r\n\r\nconst isThursday = (date) => {\r\n  return date.getDay() === 4; /// Thursday\r\n};\r\n\r\nconst isFriday = (date) => {\r\n  return date.getDay() === 5; /// Friday\r\n};\r\n\r\nconst getCurrentTimeSlot = (now) => {\r\n \r\n\r\n  var min = now.getMinutes();\r\n  var hour = now.getHours();\r\n\r\n  if (isWeekend(now) && (hour >= 14 || hour < 10)) {\r\n    return null;\r\n  }\r\n\r\n  if (hour >= 18 || hour < 10) {\r\n    return null;\r\n  }\r\n\r\n  const slotMinStr = min < 30 ? \"00\" : \"30\";\r\n  const pmStr = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n  if (hour > 12) hour = hour - 12;\r\n\r\n  const slotHourStr = `0${hour}`;\r\n\r\n  return `${slotHourStr}:${slotMinStr} ${pmStr}`;\r\n};\r\n\r\nconst getCurrentTimeSlotLabel = (timeStr) => {\r\n  if (!timeStr) {\r\n    return \"Closed\";\r\n  }\r\n\r\n  let endTimeStr = \"\";\r\n  switch (timeStr) {\r\n    case \"10:00 AM\":\r\n      endTimeStr = \"10:30 AM\";\r\n      break;\r\n    case \"10:30 AM\":\r\n      endTimeStr = \"11:00 AM\";\r\n      break;\r\n    case \"11:00 AM\":\r\n      endTimeStr = \"11:30 AM\";\r\n      break;\r\n    case \"11:30 AM\":\r\n      endTimeStr = \"12:00 PM\";\r\n      break;\r\n    case \"12:00 PM\":\r\n      endTimeStr = \"12:30 PM\";\r\n      break;\r\n    case \"12:30 PM\":\r\n      endTimeStr = \"01:00 PM\";\r\n      break;\r\n    case \"01:00 PM\":\r\n      endTimeStr = \"01:30 PM\";\r\n      break;\r\n    case \"01:30 PM\":\r\n      endTimeStr = \"02:00 PM\";\r\n      break;\r\n    case \"02:00 PM\":\r\n      endTimeStr = \"02:30 PM\";\r\n      break;\r\n    case \"02:30 PM\":\r\n      endTimeStr = \"03:00 PM\";\r\n      break;\r\n    case \"03:00 PM\":\r\n      endTimeStr = \"03:30 PM\";\r\n      break;\r\n    case \"03:30 PM\":\r\n      endTimeStr = \"04:00 PM\";\r\n      break;\r\n    case \"04:00 PM\":\r\n      endTimeStr = \"04:30 PM\";\r\n      break;\r\n    case \"04:30 PM\":\r\n      endTimeStr = \"05:00 PM\";\r\n      break;\r\n    case \"05:00 PM\":\r\n      endTimeStr = \"05:30 PM\";\r\n      break;\r\n    case \"05:30 PM\":\r\n      endTimeStr = \"06:00 PM\";\r\n      break;\r\n\r\n    default:\r\n      endTimeStr = \"\";\r\n      break;\r\n  }\r\n\r\n  return `${timeStr} - ${endTimeStr}`;\r\n};\r\n\r\nexport default function CurrentVisits() {\r\n  const classes = useStyles();\r\n\r\n  const [current, setCurrent] = React.useState(new Date());\r\n  const [bookings, setBookings] = React.useState([]);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const currentTimeSlot = getCurrentTimeSlot(current);\r\n    if (!currentTimeSlot) return;\r\n    const todayStr = dateformat(current, \"yyyy-mm-dd\");\r\n    setLoading(true);\r\n    BookService.getBookingsByDateStrandTime(todayStr, currentTimeSlot)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res.data.status === \"OK\") {\r\n          setBookings([...res.data.bookings]);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  }, [current]);\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings && _bookings.length > 0) {\r\n      return (\r\n        <div className={classes.root}>\r\n          <Grid\r\n            container\r\n            justify=\"flex-start\"\r\n            alignItems=\"flex-start\"\r\n            spacing={0}\r\n          >\r\n            {_bookings.map((booking) => (\r\n              <Grid item>\r\n                <div\r\n                  className={classes.bookingBox}\r\n                  onClick={(event) => bookingCliked(event, booking)}\r\n                >\r\n                  <span style={{ textAlign: \"center\" }}>\r\n                    {\" \"}\r\n                    {`${booking.surnameCapital}`.substring(0, 10)}{\" \"}\r\n                  </span>\r\n                </div>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>Current Visits</Title>\r\n      <Typography component=\"p\" variant=\"h6\">\r\n        {getCurrentTimeSlotLabel(getCurrentTimeSlot(current))}\r\n      </Typography>\r\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\r\n        on {dateformat(current, \"dd mmmm, yyyy\")}\r\n      </Typography>\r\n\r\n      {getBookingsBox(bookings)}\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Title from './Title';\r\nimport BookService from './services/BookService';\r\nimport * as dateformat from 'dateformat';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function BookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , isFetching : false});\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const seeMoreRecords = (event) => {\r\n    event.preventDefault();\r\n    setState(state=>({...state, currentMenuIndex:getMenuIndex('gynae',`recentBookings`)}));\r\n  }\r\n\r\n  const loadData = () => \r\n  {\r\n    setData({bookings: data.bookings, isFetching: true});\r\n    setLoading(true)\r\n    BookService.getRecentBookings().then( (res) =>{\r\n      setLoading(false)\r\n        setData({bookings: res.data, isFetching: false});\r\n\r\n    }).catch( (err) => {\r\n      setLoading(false)\r\n        console.log(err);\r\n        setData({bookings: data.bookings, isFetching: false});\r\n    });\r\n  }\r\n\r\n\r\n  useEffect( () => {\r\n          loadData();\r\n        },\r\n        [refresh]);   \r\n\r\n\r\n   useEffect( () => {\r\n     loadData();\r\n     const interval = setInterval(() => {\r\n       setRefresh(refresh => !refresh);\r\n     }, 30000);\r\n\r\n     return () =>\r\n     {\r\n       clearInterval(interval)\r\n     }\r\n     \r\n   }, []) ;    \r\n\r\n   const formatTimeStamp = (timeStamp) =>\r\n   {\r\n     const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n     const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n     if (todayStr === timeStampStr)\r\n     {\r\n       return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n     }\r\n     else\r\n     {\r\n        return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Recent Bookings</Title>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>TimeStamp</TableCell>        \r\n            <TableCell>Fullname</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>Tel</TableCell>\r\n            <TableCell>Booked Date</TableCell>\r\n            <TableCell>Booked Time</TableCell> \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.bookings.map((row) => (\r\n            <TableRow key={row._id}>\r\n              <TableCell>{formatTimeStamp(row.timeStamp)}</TableCell>\r\n              <TableCell>{row.fullname}</TableCell>\r\n              <TableCell>{row.email}</TableCell>\r\n              <TableCell>{row.phone}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.bookingDate)}</TableCell>\r\n              <TableCell>{row.bookingTime}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      <div className={classes.seeMore}>\r\n        <Link color=\"primary\" href=\"#\" onClick={seeMoreRecords}>\r\n          See more records\r\n        </Link>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chart from './Chart';\r\nimport CurrentVisits from './CurrentVisits';\r\n\r\n\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport BookingView from './BookingView';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n \r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  return (\r\n        <React.Fragment>\r\n\r\n<           Grid container spacing={3}>\r\n                    {/* Chart */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <Chart />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Current Visits */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <CurrentVisits />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Recent Bookings */}\r\n                    <Grid item xs={12}>\r\n                    <Paper className={classes.paper}>\r\n                        <BookingView/>\r\n                    </Paper>\r\n                    </Grid>\r\n          </Grid>\r\n        </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Button, Checkbox, FormControlLabel, Link, TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    // textAlign : \"center\",\r\n    // fontWeight : \"500\",\r\n    // margin: \"10px\",\r\n    // backgroundColor : \"#eee\",\r\n    // padding : \"10px\",\r\n    // borderRadius : \"4px\"\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n  },\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#555\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\" ,\r\n    width: \"400px\"    \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n      \r\n    },\r\n    width: \"400px\"   \r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\nexport default function PersonsBox() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [expanded, setExpanded] = React.useState('panel0');\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [fullname, setFullname] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [service, setService] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n    }\r\n\r\n    const fullnameChanged = (event) =>\r\n    {\r\n      setFullname(event.target.value);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n    }\r\n\r\n    const serviceChanged = (event) =>\r\n    {\r\n      setService(event.target.value);\r\n    }\r\n\r\n    const notesChanged = (event) =>\r\n    {\r\n      setNotes(event.target.value);\r\n    }\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n      setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setFullname(person.fullname);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime);\r\n         setEmail(person.email);\r\n         setTel(person.phone);\r\n         setService(person.service)\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes);\r\n         }\r\n        \r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.fullname = fullname;\r\n          booking.notes = notes;\r\n          booking.service = service;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const changeBackToBookingMade = (event, id) =>\r\n   {\r\n     setSaving(true);\r\n     bookingService.changeBackToBookingMade(id).then(res => {\r\n       setSaving(false);\r\n       setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n     }).catch(err => {\r\n       console.log(err);\r\n       setSaving(false);\r\n     })\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n          \r\n      <Grid container direction=\"column\" spacing={1} justify=\"flex-start\" alignItems=\"center\">\r\n          <div className={classes.title}> Following Records Found :</div>\r\n\r\n          {state.foundRecords.map((person,index) => (\r\n   \r\n                <Grid item xs={12} md={12} key={`panel${index}`}>\r\n                <div className={classes.root}>\r\n                    <Accordion className={person.deleted ? classes.AccordionDeleted : classes.Accordion} expanded={expanded === `panel${index}`} onChange={handleChange(`panel${index}`)}>\r\n                    <AccordionSummary className={person.deleted ? classes.lineThrough : ''}\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls=\"panel1bh-content\"\r\n                        id={`panel${index}bh-header`}\r\n                    >\r\n                      {person.deleted && (\r\n                          <Tooltip  title=\"This record has been deleted.\">\r\n                            <DeleteIcon  style={{padding: 0, margin: 0,  color: \"#fff\", fontSize: 25 }}/>\r\n                        </Tooltip>\r\n                      )}\r\n\r\n                        <Typography className={classes.heading}> {`#${index+1}`} </Typography>\r\n                        <Typography className={classes.secondaryHeading}>\r\n                        {`${person.fullname}`}\r\n                        </Typography>\r\n                    </AccordionSummary>\r\n\r\n                    <AccordionDetails className={classes.infoDetails}>\r\n                        \r\n\r\n\r\n                        <ul className={classes.ul}>\r\n\r\n                        {/* Restore Functionality ******************************************* */}  \r\n                        <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"500\", paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\" , color:\"#fff\"}}>\r\n                                Are you sure you want to restore this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={!person.deleted || (restoreMode.restore && restoreMode.person._id === person._id)}>\r\n                                 <Button\r\n\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleRestoreModeChanged(true, person)}}\r\n                                    className={classes.RestoreButton}\r\n                                 >\r\n                                   Restore This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Restore this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n\r\n                           {/*  ******************************************************************* */}\r\n\r\n                              {/* Edit Functionality ******************************************* */}\r\n\r\n                            <li hidden={person.deleted || deleteMode.delete || (editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleEditModeChanged(true, person)}}\r\n                                    className={classes.EditButton}\r\n                                 >\r\n                                    Edit Booking Info\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    Save Changes\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                            \r\n                            {/* ****************************************************************************************** */}\r\n\r\n\r\n                            {/* Delete Functionality ******************************************* */}\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"600\",  paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\"}}>\r\n                                Are you sure you want to delete this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted ||  editMode.edit || (deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleDeleteModeChanged(true, person)}}\r\n                                    className={classes.DeleteButton}\r\n                                 >\r\n                                   Delete This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Delete this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                                 \r\n                            {/* ****************************************************************************************** */}\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED DATE</span> \r\n                            \r\n\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                   {FormatDateFromString(person.bookingDate) }\r\n                                  </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingDateError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingDate}\r\n                                                      onChange = {bookingDateChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED TIME</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.bookingTime}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingTimeError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingTime}\r\n                                                      onChange = {bookingTimeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>FULLNAME</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.fullname}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={fullname}\r\n                                                      onChange = {fullnameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>EMAIL</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.email}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={email}\r\n                                                      onChange = {emailChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TEL</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.phone}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={tel}\r\n                                                      onChange = {telChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SERVICE</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.service}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={service}\r\n                                                      onChange = {serviceChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>NOTES</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.notes}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={notes}\r\n                                                      onChange = {notesChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>STATUS</span> \r\n                                {getStatusLabel(person.status)} \r\n                            </li>\r\n      \r\n\r\n                        </ul>\r\n\r\n                    </AccordionDetails>\r\n                    </Accordion>\r\n                </div>\r\n            </Grid> \r\n          ))}\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport PropTypes from 'prop-types';\r\nimport MaskedInput from 'react-text-mask';\r\nimport { FormControl, Grid, Input, InputLabel } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\nimport PersonsBox from './PersonsBox';\r\nimport { width } from '@material-ui/system';\r\n\r\n\r\nconst isBoolean = (param) => typeof(param) === \"boolean\"\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n    const [focus, setFocus] = React.useState(initialFocus)\r\n    const setFocusWithTrueDefault = (param) => setFocus(isBoolean(param)? param : true)\r\n    return ([\r\n        setFocusWithTrueDefault, {\r\n            autoFocus: focus,\r\n            key: `${id}${focus}`,\r\n            onFocus: () => setFocus(true),\r\n            onBlur: () => setFocus(false),\r\n        },\r\n    ])\r\n}\r\n\r\n\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n  \r\n    return (\r\n      <MaskedInput\r\n        {...other}\r\n        ref={(ref) => {\r\n          inputRef(ref ? ref.inputElement : null);\r\n        }}\r\n        mask={[/\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/]}\r\n        // placeholderChar={'\\u2000'}\r\n        showMask\r\n      />\r\n    );\r\n  }\r\n  \r\n  TextMaskCustom.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    root: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n        marginTop: \"20px\"\r\n      },  \r\n\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n\r\n    Find: {\r\n        width: \"80px\"\r\n    },\r\n\r\n    Clear:{\r\n        marginRight: \"20px\"\r\n    },\r\n\r\n    title:{\r\n        marginTop : \"20px\"\r\n    },\r\n\r\n    TextBox:{\r\n        marginTop: \"30px\",\r\n        \"& > *\" :\r\n        {\r\n            textAlign: \"center\"\r\n        },\r\n  \r\n    },\r\n\r\n    TextField:{\r\n\r\n    },\r\n\r\n    NoRecordsFound:{\r\n        marginTop: \"20px\",\r\n        color: \"red\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"14px\",\r\n    },\r\n\r\n    PersonsBox:{\r\n        marginTop : \"20px\",\r\n        marginBottom: \"50px\",\r\n    }\r\n\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  \r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n//   useEffect( () =>\r\n//   {\r\n//      findRecords();\r\n//   }, [state.findRecords]);\r\n\r\n useEffect ( () => {\r\n    setState(state => ({...state, foundRecords : []}));\r\n }, [])\r\n\r\n  useEffect( () => {\r\n    BookService.getBookingsByRef(state.ref).then( (res)=>\r\n    {\r\n        if (res.data.length > 0)\r\n        {\r\n            setState(state => ({...state, foundRecords : res.data}));\r\n        }\r\n    });\r\n    }, [state.RefreshPersonInfo]);\r\n\r\n    const handleChange = (event) =>\r\n    {\r\n        setState(state => ({...state, ref : event.target.value}));\r\n        setState(state => ({...state, refError : false})); \r\n    }\r\n\r\n    const clearField = () =>\r\n    {\r\n        setState(state => ({...state, refError : false})); \r\n        setState(state => ({...state, ref : '___-___-___'}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n        setFocus();\r\n    }\r\n\r\n    const findRecords = () =>\r\n    {\r\n        if (!state.ref || state.ref.indexOf('_') >= 0)\r\n        {\r\n            setState(state => ({...state, refError : true}));  \r\n            return;\r\n        }\r\n\r\n        setState(state => ({...state, submiting : true}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n\r\n        BookService.getBookingsByRef(state.ref).then( (res)=>\r\n        {\r\n            setState(state => ({...state, submiting : false}));\r\n            if (res.data.length > 0)\r\n            {\r\n                setState(state => ({...state, foundRecords : res.data}));\r\n            }\r\n            else\r\n            {\r\n                setState(state => ({...state, foundRecords : null}));\r\n            }\r\n            \r\n            console.log(res.data);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setState(state => ({...state, submiting : false}));\r\n        });\r\n    }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <CssBaseline />\r\n        <div className={classes.title}>\r\n            <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n                Find Booking Appoinments\r\n            </Typography>  \r\n        </div> \r\n\r\n        <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"center\">\r\n\r\n        <Grid item xs={12} md={12}>\r\n            <FormControl className={classes.TextBox}>\r\n                <TextField\r\n                    {...focusProps}\r\n                    autoFocus \r\n                    pattern=\"[0-9]*\"\r\n                    error = {state.refError ? true : false} \r\n                    value = {state.ref}\r\n                    className = {classes.TextField}\r\n                    width = \"50px\"\r\n                    onChange={handleChange}\r\n                    label=\"Reference No.\"\r\n                    helperText=\"Enter Your 9-digits Reference No.\"\r\n                    name=\"refNo\"\r\n                    id=\"refNo\"\r\n                    variant=\"outlined\"\r\n                    \r\n                    size=\"medium\"\r\n                    margin=\"normal\"\r\n                    fullWidth = {true}\r\n                    InputProps={{\r\n                        inputComponent: TextMaskCustom,\r\n                        style: { textAlign: 'center', fontSize:\"24px\", width: \"210px\", paddingLeft: \"20px\" }\r\n                    }}\r\n\r\n                    onKeyPress= {event => {\r\n                        if (event.key === 'Enter') {\r\n                            findRecords();\r\n                        }\r\n                      }}\r\n                />         \r\n            </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n               \r\n                <Button\r\n                    disabled = {state.submiting}\r\n                    color=\"default\"\r\n                    onClick = {clearField}\r\n                    onTouchTap = {clearField}\r\n                    className={classes.Clear}\r\n                >\r\n                    Clear \r\n                </Button>  \r\n            \r\n                <Button\r\n                    type=\"button\"\r\n                    disabled = {state.submiting}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = {findRecords}\r\n                    onTouchTap = {findRecords}\r\n                    className={classes.Find}\r\n                >\r\n                    Find \r\n                </Button>  \r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n\r\n                    \r\n\r\n            {state.foundRecords && state.foundRecords.length > 0 && (\r\n                <React.Fragment>\r\n\r\n                    <div className={classes.PersonsBox}>\r\n                          <PersonsBox/>\r\n                    </div>\r\n                    \r\n\r\n\r\n                </React.Fragment>\r\n            )}   \r\n\r\n            {!state.foundRecords && (\r\n                <React.Fragment>\r\n\r\n                <div className={classes.root}>\r\n                    <Alert severity=\"error\"> <strong>No Records Found !</strong> <br/> Please check you reference number again.</Alert>\r\n                </div> \r\n                   \r\n                </React.Fragment>\r\n            )}\r\n\r\n        </Grid>\r\n        \r\n        \r\n        </Grid>\r\n        \r\n    </React.Fragment>\r\n   \r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 10;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 )\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                          {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}  onClick={(event => dayClicked(event,cellDate))} >\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 1;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                          {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container} onClick={(event => dayClicked(event,cellDate))} >\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '10:00 AM',\r\n    '10:30 AM', \r\n    '11:00 AM', \r\n    '11:30 AM', \r\n    '12:00 PM',\r\n    '12:30 PM',\r\n    '01:00 PM',\r\n    '01:30 PM',\r\n    '02:00 PM',\r\n    '02:30 PM',\r\n    '03:00 PM',\r\n    '03:30 PM',\r\n    '04:00 PM',\r\n    '04:30 PM',\r\n    '05:00 PM',\r\n    '05:30 PM',\r\n];\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { validate } from \"email-validator\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  CalendarIcon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  DateTimeLabel: {\r\n    fontWeight: \"500\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  PriceLabelPaid:{\r\n    color: theme.palette.primary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n  PriceLabelNotPaid:{\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n\r\n}));\r\n\r\nconst Packages = [\r\n  { packageName: \"Consultation with Consultant Gynaecologist\" },\r\n  { packageName: `Coil Fitting/Coil Removal` },\r\n  { packageName: `Well Woman Check` },\r\n  { packageName: `Sexual Health Screening` },\r\n  { packageName: `Pre-pregnancy/Fertility check` },\r\n  { packageName: `Gynaecological Ultrasound` },\r\n  { packageName: `HPV Vaccination` },\r\n  { packageName: `Cervical / Pap Smear` },\r\n  { packageName: `HPV Treatment / Wart Cryo-Therapy` },\r\n];\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function NewBookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [fullnameError, setFullnameError] = React.useState(false);\r\n\r\n  const [phone, setPhone] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [notes, setNotes] = React.useState(\"\");\r\n\r\n  \r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFullnameError(false);\r\n  };\r\n\r\n  const phoneChanged = (event) => {\r\n    setPhone(event.target.value);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    setFullname(\"\");\r\n    setFullnameError(false);\r\n    setPhone(\"\");\r\n    setEmail(\"\");\r\n    setNotes(\"\");\r\n    \r\n    props.handleClose();\r\n    setSaving(false);\r\n  };\r\n\r\n  const validateBooking = () => {\r\n    let error = false;\r\n    if (!fullname || fullname.trim().length < 1) {\r\n      setFullnameError(true);\r\n      error = true;\r\n    }\r\n    return !error;\r\n  };\r\n\r\n  const saveClicked = async () => {\r\n    if (!validateBooking()) {\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n    try {\r\n      await BookService.addNewBooking({\r\n        bookingDate: props.date,\r\n        bookingTime: props.time,\r\n        fullname: fullname,\r\n        phone: phone,\r\n        email: email,\r\n        notes: notes,\r\n      });\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.date && props.time && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <AddIcon style={{ color: \"#f50057\", fontSize: \"3rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    ADD New Booking{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <div style={{position:\"absolute\", top: \"5px\", right: \"5px\", backgroundColor:CalendarColors.GP_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\", fontSize:\"1rem\"}}>\r\n                    GP\r\n              </div>\r\n\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"400px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"row\"\r\n                  justify=\"stretch\"\r\n                  spacing={2}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Grid item xs={12}>\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"center\"\r\n                      alignItems=\"center\"\r\n                      spacing={1}\r\n                    >\r\n                      <Grid item>\r\n                        <DateRangeIcon className={classes.CalendarIcon} />\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <span className={classes.DateTimeLabel}>\r\n                          {props.date} , {props.time}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      autoFocus\r\n                      error={fullnameError}\r\n                      label=\"Full Name\"\r\n                      value={fullname}\r\n                      required\r\n                      onChange={fullnameChanged}\r\n                      name=\"fullname\"\r\n                      id=\"fullname-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Telephone\"\r\n                      value={phone}\r\n                      onChange={phoneChanged}\r\n                      name=\"phone\"\r\n                      id=\"phone-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Email\"\r\n                      value={email}\r\n                      onChange={emailChanged}\r\n                      name=\"email\"\r\n                      id=\"email-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Notes\"\r\n                      value={notes}\r\n                      onChange={notesChanged}\r\n                      name=\"notes\"\r\n                      id=\"notes-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                </Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={saveClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Save\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport dateformat from \"dateformat\";\r\nimport BookService from \"../services/BookService\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport GlobalState from \"../../GlobalState\";\r\nimport BookingDialog from \"../BookingDialog\";\r\nimport NewBookingDialog from \"../NewBookingDialog\";\r\nimport clsx from \"clsx\";\r\nimport { CalendarColors } from \"../../Admin/calendar-admin/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  Container: {\r\n    width: \"100%\",\r\n    height: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fff\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    justifyItems: \"flex-start\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ContainerPast: {\r\n    width: \"100%\",\r\n    paddingTop: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n\r\n  DayLabel: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#555\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  DayLabelDisabled: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#ddd\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  LoadingProgress: {\r\n    position: \"absolute\",\r\n    top: \"10%\",\r\n    left: \"40%\",\r\n  },\r\n\r\n  BookingCountGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"5%\",\r\n    left: \"8%\",\r\n    width: \"85%\",\r\n    height: \"8%\",\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n\r\n  bookingBoxNew: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #ddd\",\r\n    color: \"#ccc\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#fff\",\r\n\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    transition: \"all 0.5s ease\",\r\n    borderRadius: \"4px\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#fff\",\r\n      color: theme.palette.secondary.main,\r\n      borderColor: theme.palette.secondary.main,\r\n    },\r\n  },\r\n\r\n  bookingBoxSampleTaken: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#0059b3\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n\r\n  bookingBoxPositive: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#d40b0b\",\r\n    color: \"#fff2f2\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#bf0000\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  bookingBoxReportSent: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#009900\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#006e00\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n\r\n\r\n\r\n}));\r\n\r\nconst DayViewCell = ({ key, date, time }) => {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [bookings, setBookings] = React.useState(null);\r\n  const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(true);\r\n\r\n  const [isPast, setIsPast] = React.useState(false);\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n  const [openDialogAddNew, setOpenDialogAddNew] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n    setIsPast(date < todayStr);\r\n  }, [date]);\r\n\r\n  useEffect(() => {\r\n    if (bookings) {\r\n      if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0) {\r\n        const search = state.dayViewCalFilter.trim().toUpperCase();\r\n        setFilteredBookings(\r\n          bookings.filter(\r\n            (booking) =>\r\n              booking.fullname.toLowerCase().indexOf(search.toLowerCase()) >= 0\r\n          )\r\n        );\r\n      } else {\r\n        setFilteredBookings([...bookings]);\r\n      }\r\n    }\r\n  }, [state.dayViewCalFilter, bookings]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!date || date.length <= 0 || !time || time.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      // if (isPast)\r\n      // {\r\n      //     setBookings([]);\r\n      //     return;\r\n      // }\r\n\r\n      setBookings(null);\r\n\r\n      var res = state.AdminCalendarCache?.find(\r\n        (record) =>\r\n          record.method === \"getBookingsByDateStrandTime\" &&\r\n          record.query === `${date}${time}`\r\n      )?.res;\r\n      if (!res || openDialog || openDialogAddNew) {\r\n        res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n        setState((state) => ({\r\n          ...state,\r\n          AdminCalendarCache: [\r\n            ...state.AdminCalendarCache,\r\n            {\r\n              method: \"getBookingsByDateStrandTime\",\r\n              query: `${date}${time}`,\r\n              res: res,\r\n            },\r\n          ],\r\n        }));\r\n      }\r\n\r\n      if (res.data.status === \"OK\") {\r\n        setBookings(res.data.bookings);\r\n      }\r\n    };\r\n\r\n    if (openDialog || openDialogAddNew) {\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStr\" &&\r\n              record.query === date\r\n            )\r\n        ),\r\n      }));\r\n    }\r\n\r\n    fetchData();\r\n  }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const getBookingClass = (status) => {\r\n    switch (status) {\r\n      case \"patient_attended\":\r\n        return classes.bookingBoxSampleTaken;\r\n      default:\r\n        return classes.bookingBox;\r\n    }\r\n  };\r\n\r\n  const addNewBookingClicked = () => {\r\n    setOpenDialogAddNew(true);\r\n  };\r\n\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings === null) {\r\n      return (\r\n        <div className={classes.LoadingProgress}>\r\n          <CircularProgress disableShrink />\r\n        </div>\r\n      );\r\n    } else if (_bookings.length >= 0) {\r\n      return (\r\n        <React.Fragment>\r\n          {_bookings.map((booking) => (\r\n            <div\r\n              style={booking.tr ? { borderTop: \"5px solid #d00fd6\" } : {}}\r\n              className={\r\n                getBookingClass(booking.status)\r\n                }\r\n              onClick={(event) => bookingCliked(event, booking)}\r\n            >\r\n              {`${booking.fullname}`.substring(0, 15)}\r\n            </div>\r\n          ))}\r\n\r\n          <div className={classes.bookingBoxNew} onClick={addNewBookingClicked}>\r\n            {\" \"}\r\n            + Add New Booking\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  const handleCloseDialogAddNew = () => {\r\n    setOpenDialogAddNew(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Container}>\r\n        {getBookingsBox(filteredBookings)}\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n\r\n      <NewBookingDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogAddNew}\r\n        handleClose={handleCloseDialogAddNew}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nDayViewCell.propTypes = {\r\n  key: PropTypes.string.isRequired,\r\n  date: PropTypes.string.isRequired,\r\n  time: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default DayViewCell;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\n\r\n\r\n\r\nconst rows = [\r\n    '10:00 AM',\r\n    '10:30 AM', \r\n    '11:00 AM', \r\n    '11:30 AM', \r\n    '12:00 PM',\r\n    '12:30 PM',\r\n    '01:00 PM',\r\n    '01:30 PM',\r\n    '02:00 PM',\r\n    '02:30 PM',\r\n    '03:00 PM',\r\n    '03:30 PM',\r\n    '04:00 PM',\r\n    '04:30 PM',\r\n    '05:00 PM',\r\n    '05:30 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n  headers : {\r\n      'Authorization' : authToken,\r\n       'Content-Type': 'application/json',\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n\r\n   static addNewBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/std/book/addnewbooking`, payload);\r\n   }\r\n   \r\n   static sendRegFormEmail = (bookingId) =>\r\n   {\r\n      return API.post(`/api/std/book/sendregformemail?id=${bookingId}`);\r\n   }\r\n   static payBooking = (bookingId,price, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/std/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}&price=${price}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/std/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getShouldRefundsCount = () =>\r\n   {\r\n      return API.get(`/api/std/book/getshouldrefundscount?`);\r\n   }\r\n\r\n   \r\n\r\n   static refundBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/std/payment/refundpayment`, {bookingId: bookingId});\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/std/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/std/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountAll = () =>\r\n   {\r\n      return API.get(`/api/std/book/getallbookingscountall`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/std/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/std/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/std/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/std/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/std/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/std/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static changeToPatientAttended = (id) =>\r\n   {\r\n      return API.post(`/api/std/book/changetopatientattended?id=${id}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/std/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/std/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/std/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/std/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/std/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/std/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/std/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/std/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/std/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/std/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/std/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/std/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/std/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n}","import API from './api';\r\n\r\nexport default class PDFService {\r\n\r\n\r\n    static downloadSTDRegForm = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadstdregform?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n}","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function PayDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [paymentMethod, setPaymentMethod] = useState(\"credit card\");\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [price, setPrice] = useState(\"\");\r\n  const [priceError, setPriceError] = useState(false);\r\n\r\n\r\n  const priceChanged = (event) =>\r\n  {\r\n    setPrice(event.target.value)\r\n    setPriceError(false)\r\n  }\r\n\r\n  const paymentMethodChanged = (event) => {\r\n    setPaymentMethod(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    props.handleClose();\r\n    setPaymentMethod(\"credit card\");\r\n    setPrice('')\r\n    setCorporate(corporates[0]);\r\n    setSaving(false);\r\n  };\r\n\r\n  const corporateChanged = (event) => {\r\n    setCorporate(event.target.value);\r\n  };\r\n\r\n  const payClicked = async () => {\r\n\r\n\r\n    if (!price || price.trim().length === 0 || price === '0')\r\n    {\r\n      setPriceError(true)\r\n      return\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n  \r\n\r\n    try {\r\n      await BookService.payBooking(\r\n        props.booking._id,\r\n        price,\r\n        paymentMethod,\r\n        paymentMethod === \"corporate\" ? corporate : \"\"\r\n      );\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingPayChanged: !state.bookingPayChanged ? true : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <CreditCardIcon\r\n                    style={{ color: \"#f50057\", fontSize: \"3rem\" }}\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    PAY the CHARGE{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"300px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"space-between\"\r\n                  spacing={2}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Grid item>\r\n                  <TextField\r\n                                autoFocus\r\n                                error={priceError}\r\n                                label=\"TOTAL Charges\"\r\n                                value={price}\r\n                                fullWidth\r\n                                required\r\n                                onChange={priceChanged}\r\n                                name=\"product-price\"\r\n                                id=\"product-price-id\"\r\n                                InputProps={{\r\n                                  inputComponent: NumberFormatCustom,\r\n                                  startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                      £\r\n                                    </InputAdornment>\r\n                                  ),\r\n                                }}\r\n                              />\r\n\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <div style={{ fontSize: \"17px\" }}>\r\n                      {\" \"}\r\n                      How do you want to pay?{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControl component=\"fieldset\">\r\n                      <RadioGroup\r\n                        aria-label=\"paymentMethod\"\r\n                        name=\"paymentMethod\"\r\n                        value={paymentMethod}\r\n                        onChange={paymentMethodChanged}\r\n                      >\r\n                        <FormControlLabel\r\n                          value=\"credit card\"\r\n                          control={<Radio />}\r\n                          label=\"Credit Card\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"cash\"\r\n                          control={<Radio />}\r\n                          label=\"Cash\"\r\n                        />\r\n                        <FormControlLabel\r\n                          value=\"corporate\"\r\n                          control={<Radio />}\r\n                          label=\"Corporate\"\r\n                        />\r\n                      </RadioGroup>\r\n\r\n                      {paymentMethod === \"corporate\" && (\r\n                        <FormControl\r\n                          style={{ marginTop: \"10px\" }}\r\n                          className={classes.formControl}\r\n                        >\r\n                          <Select\r\n                            labelId=\"select-corporate\"\r\n                            id=\"select-corporate-id\"\r\n                            value={corporate}\r\n                            onChange={corporateChanged}\r\n                          >\r\n                            {corporates.map((element) => (\r\n                              <MenuItem\r\n                                value={element}\r\n                              >{`${element}`}</MenuItem>\r\n                            ))}\r\n                          </Select>\r\n                        </FormControl>\r\n                      )}\r\n                    </FormControl>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item></Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={payClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Pay\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  DialogActions,\r\n  DialogContentText,\r\n  Divider,\r\n  FormControlLabel,\r\n  IconButton,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport PDFService from \"./services/PDFService\";\r\n\r\nimport { calculatePrice } from \"./PriceCalculator\";\r\n\r\nimport bookingService from \"./services/BookService\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport BookService from \"./services/BookService\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {\r\n  FormatDateFromString,\r\n  RevertFormatDateFromString,\r\n} from \"./DateFormatter\";\r\nimport PayDialog from \"./PayDialog\";\r\n\r\nimport PrintIcon from \"@material-ui/icons/Print\";\r\nimport UndoIcon from \"@material-ui/icons/Undo\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\n\r\nimport FileCopyOutlinedIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor: \"#373737\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor: \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\",\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#333\",\r\n    padding: \"1px\",\r\n    borderRadius: \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n    listStyle: \"none\",\r\n    padding: \"0\",\r\n    margin: \"0\",\r\n  },\r\n\r\n  li: {\r\n    marginBottom: \"15px\",\r\n  },\r\n\r\n  icon: {\r\n    marginRight: \"8px\",\r\n  },\r\n\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n\r\n  lineThrough: {\r\n    textDecoration: \"line-through\",\r\n  },\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails: {\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\",\r\n  },\r\n\r\n  infoData: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontWeight: \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n\r\n  Accordion: {\r\n    backgroundColor: \"#f5f5f5\",\r\n    color: \"#222\",\r\n  },\r\n\r\n  AccordionDeleted: {\r\n    backgroundColor: \"#aaa\",\r\n    color: \"#555\",\r\n  },\r\n\r\n  DownloadForm: {\r\n    marginTop: \"10px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n\r\n  infoDataCharges: {\r\n    fontSize: \"18px\",\r\n    color: \"green\",\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  infoDataChargesHigher: {\r\n    fontSize: \"18px\",\r\n    color: \"red\",\r\n    fontWeight: \"600\",\r\n  },\r\n  BookedLabel: {\r\n    color: \"#606060\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    color: \"#0066aa\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\",\r\n    width: \"150px\",\r\n    display: \"inline-block\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\",\r\n  },\r\n\r\n  PositiveLabel: {\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\",\r\n  },\r\n\r\n  EditButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  ResendEmailsButton: {\r\n    // marginBottom : \"20px\",\r\n    color: \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  PayButton: {\r\n    marginLeft: \"70px\",\r\n    width: \"300px\",\r\n  },\r\n\r\n  PayLabel: {\r\n    marginLeft: \"20px\",\r\n\r\n    color: \"#2f942e\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  RestoreButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#eee\",\r\n    color: \"#333\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  DeleteButton: {\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\",\r\n    },\r\n\r\n    padding: \"10px\",\r\n  },\r\n\r\n  SaveButton: {\r\n    marginBottom: \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor: \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  CancelButton: {\r\n    marginBottom: \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    padding: \"0px\",\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  checkIconSmall: {\r\n    color: \"green\",\r\n    paddingTop: \"5px\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  centeredLabel: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#alert-dialog-slide-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const [emailSent, setEmailSent] = React.useState(false);\r\n\r\n  const [openResendDialog, setOpenResendDialog] = React.useState(false);\r\n  const [openPayDialog, setOpenPayDialog] = React.useState(false);\r\n  const [openRefundDialog, setOpenRefundDialog] = React.useState(false);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [editMode, setEditMode] = React.useState({ edit: false, person: null });\r\n  const [deleteMode, setDeleteMode] = React.useState({\r\n    delete: false,\r\n    person: null,\r\n  });\r\n  const [restoreMode, setRestoreMode] = React.useState({\r\n    restore: false,\r\n    person: null,\r\n  });\r\n\r\n  const [saving, setSaving] = React.useState(false);\r\n  const [deleting, setDeleting] = React.useState(false);\r\n  const [restoring, setRestoring] = React.useState(false);\r\n\r\n  const [validationError, setValidationError] = React.useState({});\r\n\r\n  const [bookingDate, setBookingDate] = React.useState(\"\");\r\n  const [bookingTime, setBookingTime] = React.useState(\"\");\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [tel, setTel] = React.useState(\"\");\r\n  const [notes, setNotes] = React.useState(\"\");\r\n  const [service, setService] = React.useState(\"\");\r\n\r\n  const [refreshData, setRefreshData] = React.useState(false);\r\n\r\n  const [booking, setBooking] = React.useState(null);\r\n\r\n  const [recordChanged, setRecordChanged] = React.useState(false);\r\n\r\n  const [fieldChanged, setFieldChanged] = React.useState(false);\r\n\r\n  const [openUndoPayDialog, setOpenUndoPayDialog] = React.useState(false);\r\n\r\n  const [openTimeStampDialog, setOpenTimeStampDialog] = React.useState(false);\r\n\r\n  const handleCloseTimeStampDialog = () => {\r\n    setOpenTimeStampDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseUndoPayDialog = () => {\r\n    setOpenUndoPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseResendDialog = () => {\r\n    setOpenResendDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleClosePayDialog = () => {\r\n    setOpenPayDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleCloseRefundDialog = () => {\r\n    setOpenRefundDialog(false);\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (booking) {\r\n      const isChanged =\r\n        bookingDate !== FormatDateFromString(booking.bookingDate) ||\r\n        bookingTime !== booking.bookingTime ||\r\n        fullname !== booking.fullname ||\r\n        email !== booking.email ||\r\n        tel !== booking.phone ||\r\n        notes !== booking.notes ||\r\n        service !== booking.packageName\r\n\r\n      setRecordChanged(isChanged);\r\n    }\r\n  }, [fieldChanged]);\r\n\r\n  useEffect(() => {\r\n    if (!props.open) {\r\n      setTimeout(() => {\r\n        setEditMode({ edit: false, person: null });\r\n        setRecordChanged(false);\r\n      }, 500);\r\n    }\r\n  }, [props.open]);\r\n\r\n  const bookingDateChanged = (event) => {\r\n    setBookingDate(event.target.value);\r\n    setValidationError({ ...validationError, bookingDateError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const bookingTimeChanged = (event) => {\r\n    setBookingTime(event.target.value);\r\n    setValidationError({ ...validationError, bookingTimeError: false });\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const telChanged = (event) => {\r\n    setTel(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const serviceChanged = (event) => {\r\n    setService(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n    setFieldChanged(!fieldChanged);\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    if (status === \"booked\") {\r\n      return <div className={classes.BookedLabel}> Booking Made </div>;\r\n    } else if (status === \"patient_attended\") {\r\n      return (\r\n        <div className={classes.PatientAttendedLabel}> Patient Attended </div>\r\n      );\r\n    } else {\r\n      return \"Unknown\";\r\n    }\r\n  };\r\n\r\n  const handleEditModeChanged = (edit, person) => {\r\n    if (edit) {\r\n      setFullname(person.fullname);\r\n      setBookingDate(FormatDateFromString(person.bookingDate));\r\n      setBookingTime(person.bookingTime.toUpperCase());\r\n      setEmail(person.email);\r\n      setTel(person.phone);\r\n      setService(person.packageName)\r\n      if (person.notes) {\r\n        setNotes(person.notes);\r\n      }\r\n\r\n      setEditMode({ edit: edit, person: person });\r\n    } else if (!edit && !person) {\r\n      setEditMode({ edit: edit, person: person });\r\n      setRecordChanged(false);\r\n    } else if (!edit && person) {\r\n      const booking = {};\r\n      const bookingId = person._id;\r\n      booking.email = email;\r\n      booking.phone = tel;\r\n      booking.fullname = fullname;\r\n      booking.notes = notes;\r\n      booking.packageName = service;\r\n      booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n      booking.bookingTime = bookingTime;\r\n      booking.bookingRef = person.bookingRef;\r\n\r\n      if (validateBooking(booking)) {\r\n        updateBooking({ bookingId: bookingId, person: booking });\r\n      }\r\n    }\r\n  };\r\n\r\n  const validateDate = (str) => {\r\n    var error = false;\r\n    if (!str || str.length !== 10) {\r\n      error = true;\r\n    }\r\n\r\n    if (str.charAt(4) !== \"-\" || str.charAt(7) !== \"-\") {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n      if (!result) {\r\n        error = true;\r\n      }\r\n\r\n      const year = parseInt(str.substr(0, 4));\r\n      const month = parseInt(str.substr(5, 2));\r\n      const day = parseInt(str.substr(8, 2));\r\n\r\n      if (year < 1900) {\r\n        error = true;\r\n      }\r\n\r\n      if (month < 1 || month > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (day > 31) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateTime = (str) => {\r\n    var error = false;\r\n\r\n    const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n    if (!result) {\r\n      error = true;\r\n    }\r\n\r\n    try {\r\n      const hour = parseInt(str.substr(0, 2));\r\n      const minute = parseInt(str.substr(3, 2));\r\n\r\n      if (hour < 0 || hour > 12) {\r\n        error = true;\r\n      }\r\n\r\n      if (minute < 0 || minute > 59) {\r\n        error = true;\r\n      }\r\n    } catch (err) {\r\n      error = true;\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const validateBooking = (booking) => {\r\n    var error = false;\r\n\r\n    if (!validateDate(booking.bookingDate)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingDateError: true });\r\n    }\r\n\r\n    if (!validateTime(booking.bookingTime)) {\r\n      error = true;\r\n      setValidationError({ ...validationError, bookingTimeError: true });\r\n    }\r\n    return !error;\r\n  };\r\n\r\n  const updateBooking = (payload) => {\r\n    setSaving(true);\r\n    bookingService\r\n      .updateBooking(payload)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setSaving(false);\r\n        setEditMode({ edit: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const deleteBooking = (id) => {\r\n    setDeleting(true);\r\n    bookingService\r\n      .deleteBooking(id)\r\n      .then((res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setDeleting(false);\r\n        setDeleteMode({ delete: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const restoreBooking = (id) => {\r\n    setRestoring(true);\r\n    bookingService\r\n      .unDeleteBooking(id)\r\n      .then((res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({ restore: false, person: null });\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteModeChanged = (del, person) => {\r\n    if (del) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && !person) {\r\n      setDeleteMode({ delete: del, person: person });\r\n    } else if (!del && person) {\r\n      deleteBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n    if (restore) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && !person) {\r\n      setRestoreMode({ restore: restore, person: person });\r\n    } else if (!restore && person) {\r\n      restoreBooking(person._id);\r\n    }\r\n  };\r\n\r\n  const changeBackToBookingMade = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeBackToBookingMade(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const changeToPatientAttended = (event, id) => {\r\n    setSaving(true);\r\n    BookService.changeToPatientAttended(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        setRefreshData(!refreshData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const Pay = (event, id) => {\r\n    setSelectedBooking(booking);\r\n    setOpenPayDialog(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      BookService.getBookingById(props.booking._id)\r\n        .then((res) => {\r\n          setBooking(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n    }\r\n  }, [refreshData, state.bookingPayChanged]);\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      setBooking(props.booking);\r\n    }\r\n  }, [props.booking]);\r\n\r\n  const undoPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.unPayBooking(booking._id);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n  };\r\n\r\n  const refundPaymentClicked = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await BookService.refundBooking(booking._id);\r\n      setSaving(false);\r\n      updateShouldRefundsCount();\r\n      setOpenRefundDialog(false);\r\n      setRefreshData(!refreshData);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenRefundDialog(false);\r\n    }\r\n  };\r\n\r\n  const updateShouldRefundsCount = async () => {\r\n    try {\r\n      const res = await BookService.getShouldRefundsCount();\r\n      if (res && res.data && res.data.status === \"OK\") {\r\n        setState((state) => ({ ...state, shouldRefunsCount: res.data.count }));\r\n      }\r\n    } catch (ex) {\r\n      console.error(ex);\r\n    }\r\n  };\r\n\r\n  const downloadRegForm = (id) => {\r\n    PDFService.downloadSTDRegForm(id)\r\n      .then((res) => {\r\n        const file = new Blob([res.data], { type: \"application/pdf\" });\r\n\r\n        const fileURL = URL.createObjectURL(file);\r\n        window.open(fileURL, \"_blank\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const sendRegForm = (id) => {\r\n    setSaving(true);\r\n    setEmailSent(false);\r\n    BookService.sendRegFormEmail(id)\r\n      .then((res) => {\r\n        setSaving(false);\r\n        if (res.data.status === \"OK\") {\r\n          setEmailSent(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSaving(false);\r\n      });\r\n  };\r\n\r\n  const onClose = () => {\r\n    setEmailSent(false);\r\n    props.onClose();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"sm\"\r\n            open={props.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={onClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n          >\r\n            <DialogTitle\r\n              id=\"alert-dialog-slide-title\"\r\n              style={\r\n                booking.tr ? { backgroundColor: \"#7e0082\", color: \"#fff\" } : {}\r\n              }\r\n            >\r\n              <div style={{ position: \"absolute\", top: \"25x\", left: \"25px\" }}>\r\n                <Tooltip title=\"COPY EDIT LINK TO CLIPBOARD\">\r\n                  <IconButton\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(\r\n                        `https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/std/${booking._id}`\r\n                      );\r\n                      setCopied(true);\r\n                      setTimeout(() => {\r\n                        setCopied(false);\r\n                      }, 1500);\r\n                    }}\r\n                    aria-label=\"delete\"\r\n                    className={classes.margin}\r\n                    size=\"small\"\r\n                  >\r\n                    <FileCopyOutlinedIcon\r\n                      style={booking.tr ? { color: \"#ddd\" } : {}}\r\n                      fontSize=\"14px\"\r\n                    />\r\n                  </IconButton>\r\n                </Tooltip>\r\n\r\n                <span\r\n                  hidden={!copied}\r\n                  style={{ fontSize: \"12px\", transition: \"all 1s ease-in\" }}\r\n                >\r\n                  {\" \"}\r\n                  Copied{\" \"}\r\n                </span>\r\n              </div>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", right: \"60px\", backgroundColor:CalendarColors.STD_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\"}}>\r\n                    STD\r\n              </div>\r\n\r\n              {/* {booking.tr && (\r\n                <div style={{position:\"absolute\",  right: \"15px\"}}>\r\n                     TR\r\n                </div>\r\n\r\n              )} */}\r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                spacing={2}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <div\r\n                    style={\r\n                      booking.deleted\r\n                        ? {\r\n                            paddingBottom: \"5px\",\r\n                            textDecoration: \"line-through\",\r\n                          }\r\n                        : {}\r\n                    }\r\n                  >\r\n                    {`${booking.fullname}`}\r\n                  </div>\r\n                </Grid>\r\n\r\n                {booking.deleted && (\r\n                  <Grid item>\r\n                    <Tooltip title=\"This record has been deleted.\">\r\n                      <DeleteIcon\r\n                        style={\r\n                          booking.tr\r\n                            ? {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#fff\",\r\n                                fontSize: 25,\r\n                              }\r\n                            : {\r\n                                padding: 0,\r\n                                margin: 0,\r\n                                color: \"#333\",\r\n                                fontSize: 25,\r\n                              }\r\n                        }\r\n                      />\r\n                    </Tooltip>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  // height: \"550px\",\r\n                  paddingTop: \"0px\",\r\n                }}\r\n              >\r\n                <Grid item xs={12} md={12} key={`panel0`}>\r\n                  <div className={classes.infoDetails}>\r\n                    <ul className={classes.ul}>\r\n                      {/* Restore Functionality ******************************************* */}\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"500\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                            color: \"#333\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to restore this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !booking.deleted ||\r\n                          (restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.RestoreButton}\r\n                        >\r\n                          Restore This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Restore this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/*  ******************************************************************* */}\r\n\r\n                      {/* Edit Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          deleteMode.delete ||\r\n                          (editMode.edit && editMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleEditModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.EditButton}\r\n                        >\r\n                          Edit Booking Info\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={saving || !recordChanged}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          Save Changes\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={saving}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      {/* Delete Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"600\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to delete this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          props.deleteButtonDisabled ||\r\n                          booking.deleted ||\r\n                          editMode.edit ||\r\n                          (deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        {booking.OTCCharges > 0 && (\r\n                          <Tooltip title={\"Paid Records Cannot be Deleted!\"}>\r\n                            <div>\r\n                              <Button\r\n                                disabled={booking.OTCCharges > 0}\r\n                                type=\"button\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={() => {\r\n                                  handleDeleteModeChanged(true, booking);\r\n                                }}\r\n                                className={classes.DeleteButton}\r\n                              >\r\n                                Delete This Record\r\n                              </Button>\r\n                            </div>\r\n                          </Tooltip>\r\n                        )}\r\n                        {booking.OTCCharges === 0 && (\r\n                          <Button\r\n                            disabled={booking.OTCCharges > 0}\r\n                            type=\"button\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={() => {\r\n                              handleDeleteModeChanged(true, booking);\r\n                            }}\r\n                            className={classes.DeleteButton}\r\n                          >\r\n                            Delete This Record\r\n                          </Button>\r\n                        )}\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Delete this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED DATE</span>\r\n\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.bookingDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingDateError}\r\n                            className={classes.TextBox}\r\n                            value={bookingDate}\r\n                            onChange={bookingDateChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED TIME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.bookingTime.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingTimeError}\r\n                            className={classes.TextBox}\r\n                            value={bookingTime}\r\n                            onChange={bookingTimeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>FULLNAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.fullname}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={fullname}\r\n                            onChange={fullnameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>EMAIL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.email}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={email}\r\n                            onChange={emailChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TEL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.phone?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={tel}\r\n                            onChange={telChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span\r\n                         \r\n                          className={classes.infoTitle}\r\n                        >\r\n                          Package\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.packageName}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={service}\r\n                            onChange={serviceChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      {/* <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>SERVICE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.service}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={service}\r\n                            onChange={serviceChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li> */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>NOTES</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.notes}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={notes}\r\n                            onChange={notesChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>STATUS</span>{\" \"}\r\n                        {getStatusLabel(booking.status)}\r\n                        {booking.status === \"patient_attended\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"primary\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeBackToBookingMade(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change Back To Booking Made\r\n                            </Button>\r\n                          )}\r\n                        {booking.status === \"booked\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"default\"\r\n                              disabled={saving}\r\n                              style={{ width: \"300px\" }}\r\n                              onClick={(event) =>\r\n                                changeToPatientAttended(event, booking._id)\r\n                              }\r\n                            >\r\n                              Change To Patient Attended\r\n                            </Button>\r\n                          )}\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoTitle}\r\n                        >\r\n                          Estimated Price\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.estimatedPrice}\r\n                        </span>\r\n                      </li>\r\n\r\n\r\n                       <li hidden={booking.deleted || editMode.edit}>\r\n                        <Button\r\n                          disabled = {!booking.formData}\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Registration Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted || editMode.edit || booking.formData}>\r\n                        <Button\r\n                          disabled={!booking.email || booking.email.length < 3 }\r\n                          startIcon = {<SendIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            sendRegForm(booking._id);\r\n                          }}\r\n                          className={classes.DownloadForm}\r\n                          style= {{position: \"relative\"}}\r\n                        >\r\n                          Send Registration Form Email\r\n\r\n                          {emailSent && (\r\n                            <div style={{position: \"absolute\", right: \"10px\", top : \"5px\", color: \"#05ad19\"}}>\r\n                                Email Sent\r\n                            </div>\r\n                          )}\r\n\r\n                        </Button>\r\n                      </li> \r\n\r\n                      {/* <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"20px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            ONLINE DEPOSIT\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.deposit || booking.deposit === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${booking.deposit.toLocaleString(\r\n                            \"en-GB\"\r\n                          )}`}</span>\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            !booking.paid &&\r\n                            booking.deleted &&\r\n                            booking.deposit > 0 && (\r\n                              <Button\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                className={classes.PayButton}\r\n                                onClick={(event) => setOpenRefundDialog(true)}\r\n                              >\r\n                                Refund Deposit\r\n                              </Button>\r\n                            )}\r\n                          {!(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) &&\r\n                            booking.refund && (\r\n                              <React.Fragment>\r\n                                <span className={classes.PayLabel}>\r\n                                  {\" \"}\r\n                                  <CheckIcon\r\n                                    className={classes.checkIconSmall}\r\n                                  />{\" \"}\r\n                                  Refund Done\r\n                                  {booking.paidBy === \"corporate\"\r\n                                    ? ` \"${booking.corporate}\" `\r\n                                    : \"\"}\r\n                                </span>\r\n                              </React.Fragment>\r\n                            )}\r\n                        </div>\r\n                      </li>\r\n */}\r\n                      <Divider />\r\n                      <li className={classes.li} style={{ marginTop: \"20px\" }}>\r\n                        <span className={classes.infoTitle}>TOTAL CHARGES</span>{\" \"}\r\n                        <span\r\n                          style={{ paddingLeft: \"15px\" }}\r\n                          className={\r\n                            !booking.OTCCharges || booking.OTCCharges === 0\r\n                              ? classes.infoDataChargesHigher\r\n                              : classes.infoDataCharges\r\n                          }\r\n                        >{`£${booking.OTCCharges.toLocaleString(\r\n                          \"en-GB\"\r\n                        )}`}</span>\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          !booking.paid &&\r\n                          !booking.deleted && (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"secondary\"\r\n                              className={classes.PayButton}\r\n                              onClick={(event) => Pay(event, booking._id)}\r\n                            >\r\n                              Pay\r\n                            </Button>\r\n                          )}\r\n                        {!(\r\n                          editMode.edit && editMode.person._id === booking._id\r\n                        ) &&\r\n                          booking.paid && (\r\n                            <React.Fragment>\r\n                              <span className={classes.PayLabel}>\r\n                                {\" \"}\r\n                                <CheckIcon\r\n                                  className={classes.checkIconSmall}\r\n                                />{\" \"}\r\n                                Paid by {booking.paidBy}\r\n                                {booking.paidBy === \"corporate\"\r\n                                  ? ` \"${booking.corporate}\" `\r\n                                  : \"\"}\r\n                              </span>\r\n\r\n                              <Tooltip title=\"Undo Payment\">\r\n                                <IconButton\r\n                                  onClick={() => setOpenUndoPayDialog(true)}\r\n                                >\r\n                                  <UndoIcon style={{ color: \"red\" }} />\r\n                                </IconButton>\r\n                              </Tooltip>\r\n                            </React.Fragment>\r\n                          )}\r\n                      </li>\r\n\r\n                      {/* <li className={classes.li}>\r\n                        <div\r\n                          style={{\r\n                            borderTop: \"1px solid #ddd\",\r\n                            paddingTop: \"10px\",\r\n                          }}\r\n                        >\r\n                          <span className={classes.infoTitle}>\r\n                            TOTAL CHARGES\r\n                          </span>{\" \"}\r\n                          <span\r\n                            className={\r\n                              !booking.OTCCharges || booking.OTCCharges === 0\r\n                                ? classes.infoDataChargesHigher\r\n                                : classes.infoDataCharges\r\n                            }\r\n                          >{`£${(\r\n                            booking.deposit + booking.OTCCharges\r\n                          ).toLocaleString(\"en-GB\")}`}</span>\r\n                        </div>\r\n                      </li> */}\r\n                    </ul>\r\n                  </div>\r\n                </Grid>\r\n              </div>\r\n              <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving || deleting || restoring}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n\r\n            <PayDialog\r\n              booking={selectedBooking}\r\n              open={openPayDialog}\r\n              handleClose={handleClosePayDialog}\r\n            />\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openUndoPayDialog}\r\n            onClose={handleCloseUndoPayDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Undo Payment\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to undo payment for this booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseUndoPayDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button onClick={undoPaymentClicked} color=\"secondary\" autoFocus>\r\n                Yes, Undo Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={openRefundDialog}\r\n            onClose={handleCloseRefundDialog}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle style={{ color: \"#999\" }} id=\"alert-dialog-title\">\r\n              {\"Refund Deposit\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText\r\n                style={{ color: \"#333\", fontWeight: \"400\" }}\r\n                id=\"alert-dialog-description\"\r\n              >\r\n                Are you sure you want to refund deposit payment for this\r\n                booking?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseRefundDialog} color=\"default\">\r\n                Back\r\n              </Button>\r\n              <Button\r\n                onClick={refundPaymentClicked}\r\n                color=\"secondary\"\r\n                autoFocus\r\n              >\r\n                Yes, Refund Payment\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport { Button, Checkbox, CircularProgress, Dialog, DialogContent, DialogTitle, Divider, FormControl, FormControlLabel, Grid, Icon, InputLabel, LinearProgress, Link, makeStyles, MenuItem, Paper, Select, SvgIcon, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport BookingDialog from './BookingDialog';\r\n\r\nimport NewReleasesIcon from '@material-ui/icons/NewReleases';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from 'react-draggable';\r\n\r\nimport * as dateformat from 'dateformat';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\n\r\n\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport PriceCalculator from './PriceCalculator';\r\nimport { corporates } from './Corporates';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel:{\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color : \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\"\r\n  },\r\n\r\n  ExportToExcelButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n   \r\n  },\r\n\r\n  ExportToExcelButtonInline:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n    cursor: \"pointer\",\r\n    padding: \"10px\"\r\n   \r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n},\r\n\r\nth: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntd: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntopSelect: {\r\n  margin: theme.spacing(1),\r\n  minWidth: 80,\r\n},\r\n\r\nnotifyIcon:{\r\n  width: \"16px\",\r\n  height: \"16px\",\r\n  borderRadius: \"50%\",\r\n  backgroundColor : \"rgb(220, 0, 78)\",\r\n  marginLeft: \"10px\"\r\n}\r\n\r\n}));\r\n\r\nconst getTableTitle = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return `Today's Bookings`;\r\n  }else if (str === 'old')\r\n  {\r\n    return `Old Bookings`;\r\n  }else if (str === 'future')\r\n  {\r\n    return `Future Bookings`;\r\n  }else if (str === 'recent')\r\n  {\r\n    return `Recent Bookings`;\r\n  }else if (str === 'live')\r\n  {\r\n    return `Live Bookings`;\r\n  }else if (str === 'completed')\r\n  {\r\n    return `Completed Bookings`;\r\n  }else if (str === 'positive')\r\n  {\r\n    return `Positive Results`;\r\n  }else if (str === 'deleted')\r\n  {\r\n    return `Deleted Records`;\r\n  }else if (str === 'late')\r\n  {\r\n    return `40 Hours Late`;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return `All Bookings`;\r\n  }\r\n\r\n}\r\n\r\nconst getTableIcon = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return <NewReleasesIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'old')\r\n  {\r\n    return <HistoryIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'future')\r\n  {\r\n    return <TimelineIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'recent')\r\n  {\r\n    return <AutorenewIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'live')\r\n  {\r\n    return <LiveTvIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'completed')\r\n  {\r\n    return  <PlaylistAddCheckIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'positive')\r\n  {\r\n    return <AddCircleOutlineIcon style={{fontSize:\"2.2rem\"}} />\r\n  }else if (str === 'deleted')\r\n  {\r\n    return <DeleteIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'late')\r\n  {\r\n    return <HourglassEmptyIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return <DescriptionIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n\r\n}\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [topCount, setTopCount] = React.useState(25)\r\n  const topCountChanged = (event) =>\r\n  {\r\n    setTopCount(event.target.value)\r\n    loadData(event.target.value)\r\n  }\r\n  \r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () =>\r\n  {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  }\r\n\r\n\r\n  const [fromDate, setFromDate] = React.useState(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ));\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ));\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(dateformat(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n  const [untilDateStr, seUntilDateStr] = useState(dateformat(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const[chkDate, setChkDate] = useState(true);\r\n  const[chkForename, setChkForename] = useState(true);\r\n  const[chkSurname, setChkSurname] = useState(true);\r\n  const[chkDOB, setChkDOB] = useState(true);\r\n  const[chkEmail, setChkEmail] = useState(true);\r\n  const[chkTel, setChkTel] = useState(true);\r\n  const[chkCertificate, setChkCertidicate] = useState(true);\r\n  const[chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const[chkextRef, setChkExtRef] = useState(true);\r\n  const[chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) =>\r\n  {\r\n    setJustCorporate(event.target.checked);\r\n  }\r\n  \r\n\r\n  const chkDateChanged = (event) =>\r\n  {\r\n    setChkDate(event.target.checked);\r\n  }\r\n\r\n  const chkForenameChanged = (event) =>\r\n  {\r\n    setChkForename(event.target.checked);\r\n  }\r\n\r\n  const chkSurnameChanged = (event) =>\r\n  {\r\n    setChkSurname(event.target.checked);\r\n  }\r\n\r\n  const chkDOBChanged = (event) =>\r\n  {\r\n    setChkDOB(event.target.checked);\r\n  }\r\n\r\n  const chkEmailChanged = (event) =>\r\n  {\r\n    setChkEmail(event.target.checked);\r\n  }\r\n\r\n  const chkTelChanged = (event) =>\r\n  {\r\n    setChkTel(event.target.checked);\r\n  }\r\n\r\n  const chkCertificateChanged = (event) =>\r\n  {\r\n    setChkCertidicate(event.target.checked);\r\n  }\r\n\r\n  const chkAntiBodyTestChanged = (event) =>\r\n  {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  }\r\n\r\n  const chkextRefChanged = (event) =>\r\n  {\r\n    setChkExtRef(event.target.checked);\r\n  }\r\n\r\n  const chkPriceChanged = (event) =>\r\n  {\r\n    setChkPrice(event.target.checked);\r\n  }\r\n\r\n\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === 'recent')\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n\r\n           <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n\r\n          \r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n        if (!params.value)\r\n        {\r\n           return ( \r\n              <React.Fragment>                    \r\n                    <CloseIcon className={classes.closeIcon}/>                        \r\n              </React.Fragment>\r\n           );\r\n        }\r\n        else\r\n        {\r\n           if (params.getValue('paidBy') === 'credit card')\r\n           {\r\n             return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'cash')\r\n           {\r\n             return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n           }\r\n           else if (params.getValue('paidBy') === 'corporate')\r\n           {\r\n             return ( <BusinessIcon className={classes.checkIcon}/> );\r\n           }\r\n           else\r\n           {\r\n             return '';  \r\n           }\r\n        }\r\n  }\r\n },\r\n\r\n\r\n      { field: 'timeStamp', headerName: 'TimeStamp', width: 200, valueFormatter: (params) => { \r\n        return formatTimeStamp(params.value);\r\n        }\r\n      },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n          }\r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink}\r\n              //  onClick={\r\n              //   () => {\r\n              //     console.log(params.value);\r\n  \r\n              //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n              //     setState(state => ({...state, ref : params.value}));\r\n              //     setState(state => ({...state, refError : false})); \r\n              //     setState(state => ({...state, foundRecords : []}));\r\n              //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n              //   }\r\n              // }\r\n              \r\n              >\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n      { field: 'email', headerName: 'Email', width: 200 },\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n\r\n  }\r\n  else\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n            <React.Fragment>\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n               if (!params.value)\r\n               {\r\n                  return ( \r\n                    <React.Fragment>\r\n                                <CloseIcon className={classes.closeIcon}/> \r\n                                {parseInt(params.getValue('deposit')) > 0 && props.date === 'deleted' && (\r\n                                      <span className={classes.notifyIcon}>&nbsp;</span>\r\n                                )}\r\n\r\n                               \r\n                    </React.Fragment>\r\n                     \r\n                        \r\n                  \r\n                  \r\n                  );\r\n               }\r\n               else\r\n               {\r\n                  if (params.getValue('paidBy') === 'credit card')\r\n                  {\r\n                    return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'cash')\r\n                  {\r\n                    return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'corporate')\r\n                  {\r\n                    return ( <BusinessIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else\r\n                  {\r\n                    return '';  \r\n                  }\r\n               }\r\n         }\r\n        },\r\n        { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n          return FormatDateFromString(params.value);\r\n      }\r\n   },\r\n  { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n    return params.getValue('bookingTime');\r\n  }},\r\n  { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n      if (params.value === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}>  BM </span>\r\n        );\r\n    \r\n      }else if (params.value === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> PA </span>\r\n        );\r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n  },\r\n  { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n    return (\r\n      <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n          <Link className={classes.RefLink}\r\n          //  onClick={\r\n          //   () => {\r\n          //     console.log(params.value);\r\n\r\n          //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n          //     setState(state => ({...state, ref : params.value}));\r\n          //     setState(state => ({...state, refError : false})); \r\n          //     setState(state => ({...state, foundRecords : []}));\r\n          //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n          //   }\r\n          // }\r\n          \r\n          >\r\n            {params.value}\r\n          </Link>\r\n      </Tooltip>\r\n\r\n    );\r\n  }},\r\n  { field: 'fullname', headerName: 'Fullname', width: 250 },\r\n  { field: 'email', headerName: 'Email', width: 200 },\r\n  { field: 'phone', headerName: 'Tel', width: 150 },\r\n  { field: 'notes', headerName: 'Notes', width: 500 },\r\n\r\n    \r\n    ];\r\n  \r\n\r\n  }\r\n\r\n\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : true});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n  \r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) =>\r\n  {\r\n    const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n    const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n    if (todayStr === timeStampStr)\r\n    {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    }\r\n    else\r\n    {\r\n       return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  }\r\n\r\n  const loadData = (top) =>\r\n  {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === 'today')\r\n    {\r\n      api = BookService.getTodayBookings;\r\n    }else if (props.date === 'old')\r\n    {\r\n      api = BookService.getOldBookings;\r\n    }else if (props.date === 'future')\r\n    {\r\n      api = BookService.getFutureBookings;\r\n    }else if (props.date === 'recent')\r\n    {\r\n      api = BookService.getRecentBookingsAll;\r\n    }\r\n    else if (props.date === 'deleted')\r\n    {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n     \r\n    setData({bookings: [], cachedBookings: [], isFetching: true});\r\n   \r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top).then( (res) =>{\r\n      // console.log(res)\r\n      for (var i=0; i < res.data.length; i++)\r\n      {\r\n        res.data[i] = {...res.data[i], id : i + 1}\r\n      }  \r\n      setData({bookings: [...res.data], cachedBookings: [...res.data], isFetching: false});\r\n      // return res.data;\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n            setTopCount(25)\r\n            loadData(25)\r\n        },\r\n        [props.date]);\r\n\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => \r\n\r\n             (element.fullname.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n             || (element.service.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n               \r\n              \r\n          );\r\n  \r\n  \r\n          setData({bookings: [...filteredData], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n  \r\n      useEffect(() => {\r\n\r\n       loadData(topCount)\r\n    \r\n      }, [state.bookingDialogDataChanged]);    \r\n\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  }    \r\n  \r\n  const openDetailsDialog = (event, id) =>\r\n  {\r\n    const booking = data.bookings.find(element => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n\r\n  }\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    loadData(topCount)\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n    \r\n  }\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) =>\r\n  {\r\n    setOpenDialogExcel(true);\r\n  }\r\n\r\n  const isTopSelectHidden = (date)=>\r\n  {\r\n    return date === 'live' || date === 'positive' || date === 'late' || date === 'today'\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.showCreateExcel && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-from\"\r\n                        label=\"From\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price (£) </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {/* {FormatDateFromString(booking.birthDate)} */}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n} ","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts';\r\nimport Title from './Title';\r\nimport dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n// Generate Sales Data\r\nfunction createData(time, amount) {\r\n  return { time, amount };\r\n}\r\n\r\n\r\nconst emptyData = [\r\n  createData('09:00', 0),\r\n  createData('10:00', 0),\r\n  createData('11:00', 0),\r\n  createData('12:00', 0),\r\n  createData('13:00', 0),\r\n  createData('14:00', 0),\r\n  createData('15:00', 0),\r\n  createData('16:00', 0),\r\n  createData('17:00', 0),\r\n  createData('18:00', undefined),\r\n\r\n];\r\n\r\nconst getCount = (data, str) =>\r\n{\r\n  if (!data)\r\n    return 0;\r\n\r\n  var count = 0;\r\n  for (var i=0; i < data.length; i++)\r\n  {\r\n    if (data[i]._id.substr(0,2) === str)\r\n    {\r\n      count += data[i].count;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nexport default function Chart() {\r\n  const theme = useTheme();\r\n\r\n  const [data, setData] = React.useState(emptyData);\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() =>\r\n  {\r\n    const fetchData = async () =>\r\n    {\r\n      const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n      var result = [];\r\n      try\r\n      {\r\n          setLoading(true)\r\n          const res = await BookService.getBookingsStatsByDateStr(todayStr);\r\n          setLoading(false)\r\n          const data = res.data.result;\r\n          result.push(createData('09:00', getCount(data,'09')));\r\n          result.push(createData('10:00', getCount(data,'10')));\r\n          result.push(createData('11:00', getCount(data,'11')));\r\n          result.push(createData('12:00', getCount(data,'12')));\r\n          result.push(createData('13:00', getCount(data,'13')));\r\n          result.push(createData('14:00', getCount(data,'14')));\r\n          result.push(createData('15:00', getCount(data,'15')));\r\n          result.push(createData('16:00', getCount(data,'16')));\r\n          result.push(createData('17:00', getCount(data,'17')));\r\n          result.push(createData('18:00', undefined));\r\n \r\n           setData(result);\r\n      }\r\n      catch(err){\r\n        setLoading(false)\r\n        console.error(err);\r\n      }\r\n\r\n    }\r\n  \r\n   fetchData();\r\n\r\n  }, [] );\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today</Title>\r\n      <ResponsiveContainer>\r\n        <LineChart\r\n          data={data}\r\n          margin={{\r\n            top: 16,\r\n            right: 16,\r\n            bottom: 0,\r\n            left: 24,\r\n          }}\r\n        >\r\n          <XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n          <YAxis stroke={theme.palette.text.secondary}>\r\n            <Label\r\n              angle={270}\r\n              position=\"left\"\r\n              style={{ textAnchor: 'middle', fill: theme.palette.text.primary }}\r\n            >\r\n              Online Bookings\r\n            </Label>\r\n          </YAxis>\r\n          <Line type=\"monotone\" dataKey=\"amount\" stroke={theme.palette.primary.main} dot={false} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Title from \"./Title\";\r\nimport { Grid, LinearProgress, Tooltip } from \"@material-ui/core\";\r\nimport * as dateformat from \"dateformat\";\r\nimport BookService from \"./services/BookService\";\r\nimport BookingDialog from \"./BookingDialog\";\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    margin: \"5px\",\r\n    padding: \"5px\",\r\n    maxWidth: \"90px\",\r\n    minHeight: \"30px\",\r\n    border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    borderRadius: \"5px\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n    align: \"center\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n});\r\n\r\nconst isWeekend = (date) =>\r\n{\r\n    return (date.getDay() === 0 || date.getDay() === 6) /// Weekend\r\n}\r\n\r\nconst getCurrentTimeSlot = (now) =>\r\n{\r\n    var min = now.getMinutes();\r\n    var hour = now.getHours();\r\n    var pm = (hour >= 12);\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n\r\n    if (min >= 0 && min < 15)\r\n    {\r\n      min = 0;\r\n    }else if (min >= 15 && min < 30)\r\n    {\r\n      min = 15;\r\n    }else if (min >= 30 && min < 45)\r\n    {\r\n      min = 30;\r\n    }else if (min >= 45)\r\n    {\r\n      min = 45;\r\n    }\r\n\r\n    const minStr = min < 10 ? `0${min}` : `${min}`;\r\n    const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n    const pmStr = pm ? 'PM' : 'AM';\r\n\r\n    const timeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n    if (isWeekend(now))\r\n    {\r\n      if (now.getHours() < 10 || now.getHours() >= 14)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n    }\r\n    else\r\n    {\r\n      if (now.getHours() < 9 || now.getHours() >= 18)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n\r\n    }\r\n}\r\n\r\nconst getCurrentTimeSlotLabel = (timeStr) =>\r\n{\r\n  if (!timeStr)\r\n  {\r\n    return 'Closed';\r\n  }\r\n\r\n  var hour = parseInt(timeStr.substr(0,2));\r\n  var minute = parseInt(timeStr.substr(3,2)); \r\n  var pm = timeStr.indexOf('PM') > 0;\r\n  if (minute !== 45)\r\n  {\r\n    minute += 15;\r\n  }\r\n  else{\r\n    minute = 0;\r\n    hour += 1;\r\n    if (hour >= 12)\r\n    {\r\n      pm = true;\r\n    }\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n  }\r\n\r\n  const minStr = minute < 10 ? `0${minute}` : `${minute}`;\r\n  const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n  const pmStr = pm ? 'PM' : 'AM';\r\n\r\n  const endTimeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n  return `${timeStr} - ${endTimeStr}`;\r\n\r\n}\r\n\r\nexport default function CurrentVisits() {\r\n  const classes = useStyles();\r\n\r\n  const [current, setCurrent] = React.useState(new Date());\r\n  const [bookings, setBookings] = React.useState([]);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const currentTimeSlot = getCurrentTimeSlot(current);\r\n    if (!currentTimeSlot) return;\r\n    const todayStr = dateformat(current, \"yyyy-mm-dd\");\r\n    setLoading(true);\r\n    BookService.getBookingsByDateStrandTime(todayStr, currentTimeSlot)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res.data.status === \"OK\") {\r\n          setBookings([...res.data.bookings]);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  }, [current]);\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings && _bookings.length > 0) {\r\n      return (\r\n        <div className={classes.root}>\r\n          <Grid\r\n            container\r\n            justify=\"flex-start\"\r\n            alignItems=\"flex-start\"\r\n            spacing={0}\r\n          >\r\n            {_bookings.map((booking) => (\r\n              <Grid item>\r\n                <div\r\n                  className={classes.bookingBox}\r\n                  onClick={(event) => bookingCliked(event, booking)}\r\n                >\r\n                  <span style={{ textAlign: \"center\" }}>\r\n                    {\" \"}\r\n                    {`${booking.surnameCapital}`.substring(0, 10)}{\" \"}\r\n                  </span>\r\n                </div>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>Current Visits</Title>\r\n      <Typography component=\"p\" variant=\"h6\">\r\n        {getCurrentTimeSlotLabel(getCurrentTimeSlot(current))}\r\n      </Typography>\r\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\r\n        on {dateformat(current, \"dd mmmm, yyyy\")}\r\n      </Typography>\r\n\r\n      {getBookingsBox(bookings)}\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Title from './Title';\r\nimport BookService from './services/BookService';\r\nimport * as dateformat from 'dateformat';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function BookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , isFetching : false});\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const seeMoreRecords = (event) => {\r\n    event.preventDefault();\r\n    setState(state=>({...state, currentMenuIndex:getMenuIndex('gynae',`recentBookings`)}));\r\n  }\r\n\r\n  const loadData = () => \r\n  {\r\n    setData({bookings: data.bookings, isFetching: true});\r\n    setLoading(true)\r\n    BookService.getRecentBookings().then( (res) =>{\r\n      setLoading(false)\r\n        setData({bookings: res.data, isFetching: false});\r\n\r\n    }).catch( (err) => {\r\n      setLoading(false)\r\n        console.log(err);\r\n        setData({bookings: data.bookings, isFetching: false});\r\n    });\r\n  }\r\n\r\n\r\n  useEffect( () => {\r\n          loadData();\r\n        },\r\n        [refresh]);   \r\n\r\n\r\n   useEffect( () => {\r\n     loadData();\r\n     const interval = setInterval(() => {\r\n       setRefresh(refresh => !refresh);\r\n     }, 30000);\r\n\r\n     return () =>\r\n     {\r\n       clearInterval(interval)\r\n     }\r\n     \r\n   }, []) ;    \r\n\r\n   const formatTimeStamp = (timeStamp) =>\r\n   {\r\n     const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n     const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n     if (todayStr === timeStampStr)\r\n     {\r\n       return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n     }\r\n     else\r\n     {\r\n        return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Recent Bookings</Title>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>TimeStamp</TableCell>        \r\n            <TableCell>Fullname</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>Tel</TableCell>\r\n            <TableCell>Booked Date</TableCell>\r\n            <TableCell>Booked Time</TableCell> \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.bookings.map((row) => (\r\n            <TableRow key={row._id}>\r\n              <TableCell>{formatTimeStamp(row.timeStamp)}</TableCell>\r\n              <TableCell>{row.fullname}</TableCell>\r\n              <TableCell>{row.email}</TableCell>\r\n              <TableCell>{row.phone}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.bookingDate)}</TableCell>\r\n              <TableCell>{row.bookingTime}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      <div className={classes.seeMore}>\r\n        <Link color=\"primary\" href=\"#\" onClick={seeMoreRecords}>\r\n          See more records\r\n        </Link>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chart from './Chart';\r\nimport CurrentVisits from './CurrentVisits';\r\n\r\n\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport BookingView from './BookingView';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n \r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  return (\r\n        <React.Fragment>\r\n\r\n<           Grid container spacing={3}>\r\n                    {/* Chart */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <Chart />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Current Visits */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <CurrentVisits />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Recent Bookings */}\r\n                    <Grid item xs={12}>\r\n                    <Paper className={classes.paper}>\r\n                        <BookingView/>\r\n                    </Paper>\r\n                    </Grid>\r\n          </Grid>\r\n        </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Button, Checkbox, FormControlLabel, Link, TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    // textAlign : \"center\",\r\n    // fontWeight : \"500\",\r\n    // margin: \"10px\",\r\n    // backgroundColor : \"#eee\",\r\n    // padding : \"10px\",\r\n    // borderRadius : \"4px\"\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n  },\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#555\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\" ,\r\n    width: \"400px\"    \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\",\r\n    width: \"400px\"   \r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\",\r\n      \r\n    },\r\n    width: \"400px\"   \r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\nexport default function PersonsBox() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [expanded, setExpanded] = React.useState('panel0');\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [fullname, setFullname] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [service, setService] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n    }\r\n\r\n    const fullnameChanged = (event) =>\r\n    {\r\n      setFullname(event.target.value);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n    }\r\n\r\n    const serviceChanged = (event) =>\r\n    {\r\n      setService(event.target.value);\r\n    }\r\n\r\n    const notesChanged = (event) =>\r\n    {\r\n      setNotes(event.target.value);\r\n    }\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n      setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setFullname(person.fullname);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime);\r\n         setEmail(person.email);\r\n         setTel(person.phone);\r\n         setService(person.service)\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes);\r\n         }\r\n        \r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.fullname = fullname;\r\n          booking.notes = notes;\r\n          booking.service = service;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const changeBackToBookingMade = (event, id) =>\r\n   {\r\n     setSaving(true);\r\n     bookingService.changeBackToBookingMade(id).then(res => {\r\n       setSaving(false);\r\n       setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n     }).catch(err => {\r\n       console.log(err);\r\n       setSaving(false);\r\n     })\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n          \r\n      <Grid container direction=\"column\" spacing={1} justify=\"flex-start\" alignItems=\"center\">\r\n          <div className={classes.title}> Following Records Found :</div>\r\n\r\n          {state.foundRecords.map((person,index) => (\r\n   \r\n                <Grid item xs={12} md={12} key={`panel${index}`}>\r\n                <div className={classes.root}>\r\n                    <Accordion className={person.deleted ? classes.AccordionDeleted : classes.Accordion} expanded={expanded === `panel${index}`} onChange={handleChange(`panel${index}`)}>\r\n                    <AccordionSummary className={person.deleted ? classes.lineThrough : ''}\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls=\"panel1bh-content\"\r\n                        id={`panel${index}bh-header`}\r\n                    >\r\n                      {person.deleted && (\r\n                          <Tooltip  title=\"This record has been deleted.\">\r\n                            <DeleteIcon  style={{padding: 0, margin: 0,  color: \"#fff\", fontSize: 25 }}/>\r\n                        </Tooltip>\r\n                      )}\r\n\r\n                        <Typography className={classes.heading}> {`#${index+1}`} </Typography>\r\n                        <Typography className={classes.secondaryHeading}>\r\n                        {`${person.fullname}`}\r\n                        </Typography>\r\n                    </AccordionSummary>\r\n\r\n                    <AccordionDetails className={classes.infoDetails}>\r\n                        \r\n\r\n\r\n                        <ul className={classes.ul}>\r\n\r\n                        {/* Restore Functionality ******************************************* */}  \r\n                        <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"500\", paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\" , color:\"#fff\"}}>\r\n                                Are you sure you want to restore this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={!person.deleted || (restoreMode.restore && restoreMode.person._id === person._id)}>\r\n                                 <Button\r\n\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleRestoreModeChanged(true, person)}}\r\n                                    className={classes.RestoreButton}\r\n                                 >\r\n                                   Restore This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Restore this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n\r\n                           {/*  ******************************************************************* */}\r\n\r\n                              {/* Edit Functionality ******************************************* */}\r\n\r\n                            <li hidden={person.deleted || deleteMode.delete || (editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleEditModeChanged(true, person)}}\r\n                                    className={classes.EditButton}\r\n                                 >\r\n                                    Edit Booking Info\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    Save Changes\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                            \r\n                            {/* ****************************************************************************************** */}\r\n\r\n\r\n                            {/* Delete Functionality ******************************************* */}\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"600\",  paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\"}}>\r\n                                Are you sure you want to delete this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted ||  editMode.edit || (deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleDeleteModeChanged(true, person)}}\r\n                                    className={classes.DeleteButton}\r\n                                 >\r\n                                   Delete This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Delete this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                                 \r\n                            {/* ****************************************************************************************** */}\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED DATE</span> \r\n                            \r\n\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                   {FormatDateFromString(person.bookingDate) }\r\n                                  </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingDateError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingDate}\r\n                                                      onChange = {bookingDateChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED TIME</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.bookingTime}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingTimeError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingTime}\r\n                                                      onChange = {bookingTimeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>FULLNAME</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.fullname}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={fullname}\r\n                                                      onChange = {fullnameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>EMAIL</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.email}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={email}\r\n                                                      onChange = {emailChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TEL</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.phone}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={tel}\r\n                                                      onChange = {telChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SERVICE</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.service}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={service}\r\n                                                      onChange = {serviceChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>NOTES</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.notes}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={notes}\r\n                                                      onChange = {notesChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>STATUS</span> \r\n                                {getStatusLabel(person.status)} \r\n                            </li>\r\n      \r\n\r\n                        </ul>\r\n\r\n                    </AccordionDetails>\r\n                    </Accordion>\r\n                </div>\r\n            </Grid> \r\n          ))}\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport PropTypes from 'prop-types';\r\nimport MaskedInput from 'react-text-mask';\r\nimport { FormControl, Grid, Input, InputLabel } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\nimport PersonsBox from './PersonsBox';\r\nimport { width } from '@material-ui/system';\r\n\r\n\r\nconst isBoolean = (param) => typeof(param) === \"boolean\"\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n    const [focus, setFocus] = React.useState(initialFocus)\r\n    const setFocusWithTrueDefault = (param) => setFocus(isBoolean(param)? param : true)\r\n    return ([\r\n        setFocusWithTrueDefault, {\r\n            autoFocus: focus,\r\n            key: `${id}${focus}`,\r\n            onFocus: () => setFocus(true),\r\n            onBlur: () => setFocus(false),\r\n        },\r\n    ])\r\n}\r\n\r\n\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n  \r\n    return (\r\n      <MaskedInput\r\n        {...other}\r\n        ref={(ref) => {\r\n          inputRef(ref ? ref.inputElement : null);\r\n        }}\r\n        mask={[/\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/]}\r\n        // placeholderChar={'\\u2000'}\r\n        showMask\r\n      />\r\n    );\r\n  }\r\n  \r\n  TextMaskCustom.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    root: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n        marginTop: \"20px\"\r\n      },  \r\n\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n\r\n    Find: {\r\n        width: \"80px\"\r\n    },\r\n\r\n    Clear:{\r\n        marginRight: \"20px\"\r\n    },\r\n\r\n    title:{\r\n        marginTop : \"20px\"\r\n    },\r\n\r\n    TextBox:{\r\n        marginTop: \"30px\",\r\n        \"& > *\" :\r\n        {\r\n            textAlign: \"center\"\r\n        },\r\n  \r\n    },\r\n\r\n    TextField:{\r\n\r\n    },\r\n\r\n    NoRecordsFound:{\r\n        marginTop: \"20px\",\r\n        color: \"red\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"14px\",\r\n    },\r\n\r\n    PersonsBox:{\r\n        marginTop : \"20px\",\r\n        marginBottom: \"50px\",\r\n    }\r\n\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  \r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n//   useEffect( () =>\r\n//   {\r\n//      findRecords();\r\n//   }, [state.findRecords]);\r\n\r\n useEffect ( () => {\r\n    setState(state => ({...state, foundRecords : []}));\r\n }, [])\r\n\r\n  useEffect( () => {\r\n    BookService.getBookingsByRef(state.ref).then( (res)=>\r\n    {\r\n        if (res.data.length > 0)\r\n        {\r\n            setState(state => ({...state, foundRecords : res.data}));\r\n        }\r\n    });\r\n    }, [state.RefreshPersonInfo]);\r\n\r\n    const handleChange = (event) =>\r\n    {\r\n        setState(state => ({...state, ref : event.target.value}));\r\n        setState(state => ({...state, refError : false})); \r\n    }\r\n\r\n    const clearField = () =>\r\n    {\r\n        setState(state => ({...state, refError : false})); \r\n        setState(state => ({...state, ref : '___-___-___'}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n        setFocus();\r\n    }\r\n\r\n    const findRecords = () =>\r\n    {\r\n        if (!state.ref || state.ref.indexOf('_') >= 0)\r\n        {\r\n            setState(state => ({...state, refError : true}));  \r\n            return;\r\n        }\r\n\r\n        setState(state => ({...state, submiting : true}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n\r\n        BookService.getBookingsByRef(state.ref).then( (res)=>\r\n        {\r\n            setState(state => ({...state, submiting : false}));\r\n            if (res.data.length > 0)\r\n            {\r\n                setState(state => ({...state, foundRecords : res.data}));\r\n            }\r\n            else\r\n            {\r\n                setState(state => ({...state, foundRecords : null}));\r\n            }\r\n            \r\n            console.log(res.data);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setState(state => ({...state, submiting : false}));\r\n        });\r\n    }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <CssBaseline />\r\n        <div className={classes.title}>\r\n            <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n                Find Booking Appoinments\r\n            </Typography>  \r\n        </div> \r\n\r\n        <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"center\">\r\n\r\n        <Grid item xs={12} md={12}>\r\n            <FormControl className={classes.TextBox}>\r\n                <TextField\r\n                    {...focusProps}\r\n                    autoFocus \r\n                    pattern=\"[0-9]*\"\r\n                    error = {state.refError ? true : false} \r\n                    value = {state.ref}\r\n                    className = {classes.TextField}\r\n                    width = \"50px\"\r\n                    onChange={handleChange}\r\n                    label=\"Reference No.\"\r\n                    helperText=\"Enter Your 9-digits Reference No.\"\r\n                    name=\"refNo\"\r\n                    id=\"refNo\"\r\n                    variant=\"outlined\"\r\n                    \r\n                    size=\"medium\"\r\n                    margin=\"normal\"\r\n                    fullWidth = {true}\r\n                    InputProps={{\r\n                        inputComponent: TextMaskCustom,\r\n                        style: { textAlign: 'center', fontSize:\"24px\", width: \"210px\", paddingLeft: \"20px\" }\r\n                    }}\r\n\r\n                    onKeyPress= {event => {\r\n                        if (event.key === 'Enter') {\r\n                            findRecords();\r\n                        }\r\n                      }}\r\n                />         \r\n            </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n               \r\n                <Button\r\n                    disabled = {state.submiting}\r\n                    color=\"default\"\r\n                    onClick = {clearField}\r\n                    onTouchTap = {clearField}\r\n                    className={classes.Clear}\r\n                >\r\n                    Clear \r\n                </Button>  \r\n            \r\n                <Button\r\n                    type=\"button\"\r\n                    disabled = {state.submiting}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = {findRecords}\r\n                    onTouchTap = {findRecords}\r\n                    className={classes.Find}\r\n                >\r\n                    Find \r\n                </Button>  \r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n\r\n                    \r\n\r\n            {state.foundRecords && state.foundRecords.length > 0 && (\r\n                <React.Fragment>\r\n\r\n                    <div className={classes.PersonsBox}>\r\n                          <PersonsBox/>\r\n                    </div>\r\n                    \r\n\r\n\r\n                </React.Fragment>\r\n            )}   \r\n\r\n            {!state.foundRecords && (\r\n                <React.Fragment>\r\n\r\n                <div className={classes.root}>\r\n                    <Alert severity=\"error\"> <strong>No Records Found !</strong> <br/> Please check you reference number again.</Alert>\r\n                </div> \r\n                   \r\n                </React.Fragment>\r\n            )}\r\n\r\n        </Grid>\r\n        \r\n        \r\n        </Grid>\r\n        \r\n    </React.Fragment>\r\n   \r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 10;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 )\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                          {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container} onClick={(event => dayClicked(event,cellDate))}>\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 1;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                          {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount < 10 ? ` ${_bookingsCount}` : `${_bookingsCount}` }\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}  onClick={(event => dayClicked(event,cellDate))} >\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { validate } from \"email-validator\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport { CalendarColors } from \"../Admin/calendar-admin/colors\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  CalendarIcon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  DateTimeLabel: {\r\n    fontWeight: \"500\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  PriceLabelPaid: {\r\n    color: theme.palette.primary.main,\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  PriceLabelNotPaid: {\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: \"600\",\r\n  },\r\n}));\r\n\r\nconst Packages = [\r\n  { packageName: \"Sexual Health Clinic - Bronze\" },\r\n  { packageName: `Sexual Health Clinic - Silver` },\r\n  { packageName: `Sexual Health Clinic - Gold` },\r\n  { packageName: `Sexual Health Clinic - Platinium` },\r\n  { packageName: `BLOOD SAMPLE AND URINE` },\r\n  { packageName: `BLOOD SAMPLE AND URINE OR SWAB` },\r\n  { packageName: `Indivisual Tests` },\r\n  { packageName: `Combo STD Checks` },\r\n];\r\n\r\nconst IndivisualTests = [\r\n  \"HIV TESTING\",\r\n  \"CHLAMYDIA TESTING\",\r\n  \"SYPHILIS BLOOD TESTING\",\r\n  \"HERPES TESTING\",\r\n  \"GONORRHOEA TESTING\",\r\n  \"HEPATITIS A PROFILE TESTING\",\r\n  \"HEPATITIS B PROFILE TESTING\",\r\n  \"HEPATITIS C ANTIBODIES TESTING\",\r\n  \"HPV TESTING\",\r\n  \"BACTERIAL SWAB TESTING\",\r\n];\r\n\r\nconst comboSTDChecks = [\r\n  \"CHLAMYDIA, GONORRHOEA AND TRICHOMONAS\",\r\n  \"HIV I & II WITH SYPHILIS\",\r\n];\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function NewBookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [fullname, setFullname] = React.useState(\"\");\r\n  const [fullnameError, setFullnameError] = React.useState(false);\r\n\r\n  const [phone, setPhone] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [service, setService] = React.useState(\"\");\r\n  const [serviceError, setServiceError] = React.useState(false);\r\n\r\n  const [notes, setNotes] = React.useState(\"\");\r\n\r\n  const [indivisualArray, setIndivisualArray] = React.useState([]);\r\n  const [comboArray, setComboArray] = React.useState([]);\r\n\r\n  const fullnameChanged = (event) => {\r\n    setFullname(event.target.value);\r\n    setFullnameError(false);\r\n  };\r\n\r\n  const phoneChanged = (event) => {\r\n    setPhone(event.target.value);\r\n  };\r\n\r\n  const emailChanged = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const serviceChanged = (event) => {\r\n    setService(event.target.value);\r\n    setServiceError(false)\r\n  };\r\n\r\n  const notesChanged = (event) => {\r\n    setNotes(event.target.value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (saving) return;\r\n\r\n    setFullname(\"\");\r\n    setFullnameError(false);\r\n    setPhone(\"\");\r\n    setEmail(\"\");\r\n    setService(\"\");\r\n    setServiceError(false)\r\n    setNotes(\"\");\r\n    setIndivisualArray([]);\r\n    setComboArray([]);\r\n\r\n    props.handleClose();\r\n    setSaving(false);\r\n  };\r\n\r\n  const validateBooking = () => {\r\n    let error = false;\r\n    if (!fullname || fullname.trim().length < 1) {\r\n      setFullnameError(true);\r\n      error = true;\r\n    }\r\n\r\n    if (!service || service.trim().length < 1)\r\n    {\r\n      setServiceError(true)\r\n      error = true\r\n    }\r\n\r\n    if (service === 'Indivisual Tests' && indivisualArray.length === 0)\r\n    {\r\n      setServiceError(true)\r\n      error = true\r\n    }\r\n\r\n    if (service === 'Combo STD Checks' && comboArray.length === 0)\r\n    {\r\n      setServiceError(true)\r\n      error = true\r\n    }\r\n\r\n    return !error;\r\n  };\r\n\r\n  const saveClicked = async () => {\r\n    if (!validateBooking()) {\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n    let packageName = service;\r\n    if (service === \"Indivisual Tests\") {\r\n      let temp = \"\";\r\n      indivisualArray.forEach((item, index) => {\r\n        temp += item;\r\n        if (index < indivisualArray.length - 1) {\r\n          temp += \" - \";\r\n        }\r\n      });\r\n      packageName = `Indivisual Tests : ( ${temp} )`;\r\n    } else if (service === \"Combo STD Checks\") {\r\n      let temp = \"\";\r\n      comboArray.forEach((item, index) => {\r\n        temp += item;\r\n        if (index < comboArray.length - 1) {\r\n          temp += \" - \";\r\n        }\r\n      });\r\n      packageName = `Combo STD Checks : ( ${temp} )`;\r\n    }\r\n\r\n    try {\r\n      await BookService.addNewBooking({\r\n        bookingDate: props.date,\r\n        bookingTime: props.time,\r\n        fullname: fullname,\r\n        phone: phone,\r\n        email: email,\r\n        packageName: packageName,\r\n        notes: notes,\r\n      });\r\n      setSaving(false);\r\n      setState((state) => ({\r\n        ...state,\r\n        bookingDialogDataChanged: !state.bookingDialogDataChanged\r\n          ? true\r\n          : false,\r\n      }));\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const IndivisualTestsChanged = (event, item) => {\r\n    const checked = event.target.checked;\r\n\r\n    if (checked) {\r\n      setServiceError(false)\r\n      if (indivisualArray.findIndex((e) => e === item) < 0)\r\n        setIndivisualArray([...indivisualArray, item]);\r\n    } else {\r\n      setIndivisualArray(indivisualArray.filter((e) => e !== item));\r\n    }\r\n\r\n    setServiceError(false)\r\n  };\r\n\r\n  const comboSTDChecksChanged = (event, item) => {\r\n    const checked = event.target.checked;\r\n\r\n    if (checked) {\r\n      setServiceError(false)\r\n      if (comboArray.findIndex((e) => e === item) < 0)\r\n        setComboArray([...comboArray, item]);\r\n    } else {\r\n      setComboArray(comboArray.filter((e) => e !== item));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.date && props.time && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"md\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <AddIcon style={{ color: \"#f50057\", fontSize: \"3rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    ADD New Booking{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <div style={{position:\"absolute\", top: \"5px\", right: \"5px\", backgroundColor:CalendarColors.STD_COLOR, color:\"#fff\", padding: \"0px 5px\", borderRadius:\"10px\", fontSize:\"1rem\"}}>\r\n                    STD\r\n              </div>\r\n\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"600px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"row\"\r\n                  justify=\"stretch\"\r\n                  spacing={2}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Grid item xs={12}>\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"center\"\r\n                      alignItems=\"center\"\r\n                      spacing={1}\r\n                    >\r\n                      <Grid item>\r\n                        <DateRangeIcon className={classes.CalendarIcon} />\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <span className={classes.DateTimeLabel}>\r\n                          {props.date} , {props.time}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      autoFocus\r\n                      error={fullnameError}\r\n                      label=\"Full Name\"\r\n                      value={fullname}\r\n                      required\r\n                      onChange={fullnameChanged}\r\n                      name=\"fullname\"\r\n                      id=\"fullname-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Telephone\"\r\n                      value={phone}\r\n                      onChange={phoneChanged}\r\n                      name=\"phone\"\r\n                      id=\"phone-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Email\"\r\n                      value={email}\r\n                      onChange={emailChanged}\r\n                      name=\"email\"\r\n                      id=\"email-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12} md={12}>\r\n                    <FormControl className={classes.formControl} fullWidth required error={serviceError}>\r\n                      <InputLabel id=\"service-label-id\">Package</InputLabel>\r\n                      <Select\r\n                        fullWidth\r\n                        labelId=\"service-label-id\"\r\n                        id=\"service-id\"\r\n                        value={service}\r\n                        onChange={serviceChanged}\r\n                      >\r\n                        {Packages.map((item) => (\r\n                          <MenuItem value={item.packageName}>\r\n                            {item.packageName}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </Grid>\r\n\r\n                  {service === \"Indivisual Tests\" && (\r\n                    <Grid item xs={12}>\r\n                      {IndivisualTests.map((item) => (\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                              checked={\r\n                                indivisualArray.findIndex((e) => e === item) >=\r\n                                0\r\n                              }\r\n                              onChange={(event) =>\r\n                                IndivisualTestsChanged(event, item)\r\n                              }\r\n                              name={item}\r\n                            />\r\n                          }\r\n                          label={item}\r\n                        />\r\n                      ))}\r\n                    </Grid>\r\n                  )}\r\n\r\n                  {service === \"Combo STD Checks\" && (\r\n                    <Grid item xs={12}>\r\n                      {comboSTDChecks.map((item) => (\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                              checked={\r\n                                comboArray.findIndex((e) => e === item) >= 0\r\n                              }\r\n                              onChange={(event) =>\r\n                                comboSTDChecksChanged(event, item)\r\n                              }\r\n                              name={item}\r\n                            />\r\n                          }\r\n                          label={item}\r\n                        />\r\n                      ))}\r\n                    </Grid>\r\n                  )}\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label=\"Notes\"\r\n                      value={notes}\r\n                      onChange={notesChanged}\r\n                      name=\"notes\"\r\n                      id=\"notes-id\"\r\n                      autoComplete=\"none\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={saveClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style={{ width: \"100px\" }}\r\n                        disabled={saving}\r\n                      >\r\n                        Save\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n              <Backdrop className={classes.backdrop} open={saving}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\nimport BookingDialog from '../BookingDialog';\r\nimport NewBookingDialog from '../NewBookingDialog';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        height : \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        display: \"flex\",\r\n        alignItems : \"flex-start\",\r\n        justifyItems: \"flex-start\",\r\n        paddingLeft : \"10px\"\r\n\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"10%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n    bookingBoxNew: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth: \"150px\",\r\n        overflowX: \"hidden\",\r\n        border: \"1px solid #ddd\",\r\n        color: \"#ccc\",\r\n        fontSize: \"12px\",\r\n        fontWeight: \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#fff\",\r\n    \r\n        boxShadow: \"2px 4px #fafafa\",\r\n        transition: \"all 0.5s ease\",\r\n        borderRadius: \"4px\",\r\n    \r\n        \"&:hover\": {\r\n          background: \"#fff\",\r\n          color: theme.palette.secondary.main,\r\n          borderColor:  theme.palette.secondary.main,\r\n        },\r\n      },\r\n\r\n    bookingBox: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#ebedf7\",\r\n        color: \"#3f51b5\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#3f51b5\",\r\n            color: \"#ebedf7\"\r\n          },\r\n    },\r\n\r\n    bookingBoxSampleTaken: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#0066cc\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#0059b3\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n    bookingBoxPositive: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#d40b0b\",\r\n        color: \"#fff2f2\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#bf0000\",\r\n            color: \"#fff\"\r\n          },\r\n    },\r\n\r\n    bookingBoxReportSent: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#009900\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#006e00\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n  \r\n\r\n  }));\r\n\r\n\r\n\r\nconst DayViewCell = ({key, date, time}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookings, setBookings] = React.useState(null);\r\n    const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [refresh, setRefresh] = React.useState(true); \r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n    const [openDialogAddNew, setOpenDialogAddNew] = React.useState(false);\r\n\r\n\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n    }, [date]);\r\n\r\n    useEffect( () => \r\n    {\r\n        if (bookings) {\r\n\r\n\r\n            if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0)\r\n            {\r\n                const search = state.dayViewCalFilter.trim().toUpperCase();\r\n                setFilteredBookings( bookings.filter(booking => booking.fullname.toLowerCase().indexOf(search.toLowerCase()) >= 0\r\n                                                          \r\n                    \r\n                    ));\r\n            }\r\n            else\r\n            {\r\n                setFilteredBookings([...bookings]);\r\n            }\r\n        }\r\n\r\n    }, [state.dayViewCalFilter, bookings]);\r\n \r\n\r\n\r\n    useEffect ( () => {\r\n       \r\n        const fetchData = async () =>\r\n        {\r\n            if (!date || date.length <= 0 || !time || time.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n         \r\n            // if (isPast)\r\n            // {\r\n            //     setBookings([]);\r\n            //     return;\r\n            // }\r\n    \r\n            setBookings(null);\r\n    \r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n            if (!res || openDialog || openDialogAddNew)\r\n            {\r\n                res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }\r\n          \r\n          \r\n            if (res.data.status === 'OK')\r\n            {\r\n                setBookings(res.data.bookings);\r\n            }   \r\n        }\r\n\r\n        if (openDialog || openDialogAddNew)\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStr' && record.query ===  date))}));\r\n        }\r\n\r\n         fetchData();\r\n     \r\n    }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n    const bookingCliked = (event, booking) =>\r\n    {\r\n        setSelectedBooking(booking);\r\n        setOpenDialog(true);\r\n    }\r\n\r\n    \r\n\r\n    const getBookingClass = (status) =>\r\n    {\r\n        switch (status) {\r\n\r\n            case 'patient_attended':\r\n                return classes.bookingBoxSampleTaken;\r\n            default : \r\n                return classes.bookingBox;\r\n        }\r\n    }\r\n\r\n    const addNewBookingClicked = () =>\r\n    {\r\n        setOpenDialogAddNew(true)\r\n    }\r\n\r\n    const getBookingsBox = (_bookings) =>\r\n    {\r\n        if (_bookings === null) \r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookings.length >= 0)\r\n        {\r\n           return (\r\n            <React.Fragment>\r\n            {_bookings.map((booking) => (\r\n              <div\r\n                style={booking.tr ? { borderTop: \"5px solid #d00fd6\" } : {}}\r\n                className={getBookingClass(booking.status)}\r\n                onClick={(event) => bookingCliked(event, booking)}\r\n              >\r\n                {`${booking.fullname}`.substring(0, 15)}\r\n              </div>\r\n            ))}\r\n  \r\n            <div className={classes.bookingBoxNew} onClick={addNewBookingClicked}> + Add New Booking</div>\r\n          </React.Fragment>\r\n           );\r\n        }\r\n    }\r\n\r\n\r\n    const handleCloseDialog = () =>\r\n    {\r\n        setOpenDialog(false);\r\n    }\r\n\r\n    const handleCloseDialogAddNew = () => {\r\n        setOpenDialogAddNew(false);\r\n      };\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}>\r\n\r\n              {getBookingsBox(filteredBookings)}\r\n\r\n            </div>\r\n\r\n            <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n            />\r\n\r\n        <NewBookingDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogAddNew}\r\n        handleClose={handleCloseDialogAddNew}\r\n        />\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n  };\r\n\r\n \r\n  \r\nexport default DayViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\n\r\n\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Title from \"./Title\";\r\nimport PCRBookService from \"./PCR/services/BookService\";\r\nimport GynaeBookService from \"./Gynae/services/BookService\";\r\nimport GPBookService from \"./GP/services/BookService\";\r\nimport STDBookService from \"./STD/services/BookService\";\r\n\r\nimport * as dateformat from \"dateformat\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n}));\r\n\r\nexport default function TodayBookingView() {\r\n  const classes = useStyles();\r\n  \r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n\r\n    const today = dateformat(new Date(), 'yyyy-mm-dd')\r\n    try{\r\n      const res1 = await PCRBookService.getAllBookingsCountByDateStr(today)\r\n      const res2 = await GynaeBookService.getAllBookingsCountByDateStr(today)\r\n      const res3 = await GPBookService.getAllBookingsCountByDateStr(today)\r\n      const res4 = await STDBookService.getAllBookingsCountByDateStr(today)\r\n      \r\n      const pcr =  parseInt(res1.data.count)\r\n      const gynae = parseInt(res2.data.count)\r\n      const gp = parseInt(res3.data.count)\r\n      const std = parseInt(res4.data.count)\r\n\r\n      const _data = [\r\n        {clinic: \"PCR\", count: pcr},\r\n        {clinic: \"Gynae\", count: gynae},\r\n        {clinic: \"GP\", count: gp},\r\n        {clinic: \"STD\", count: std},\r\n        {clinic: \"Total\", count: pcr+gynae+gp+std}\r\n      ]\r\n      setData(_data)\r\n\r\n      setLoading(false);\r\n    }\r\n    catch(err)\r\n    {\r\n      console.error(err)\r\n      setLoading(false)\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval)\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today Bookings</Title>\r\n      {data && (\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Clinic</TableCell>\r\n              <TableCell>Count</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {data.map((row) => (\r\n              <TableRow key={row._id}>\r\n                <TableCell>{row.clinic}</TableCell>\r\n                <TableCell>{row.count}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Title from \"./Title\";\r\nimport PCRBookService from \"./PCR/services/BookService\";\r\nimport GynaeBookService from \"./Gynae/services/BookService\";\r\nimport GPBookService from \"./GP/services/BookService\";\r\nimport STDBookService from \"./STD/services/BookService\";\r\n\r\n\r\nimport * as dateformat from \"dateformat\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function TomorrowBookingView() {\r\n  const classes = useStyles();\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    const today = new Date()\r\n    const tomorrow = new Date(today.getTime() + 24 * 60 * 60 * 1000)\r\n\r\n    const tomorrowStr = dateformat(tomorrow, 'yyyy-mm-dd')\r\n    try{\r\n      const res1 = await PCRBookService.getAllBookingsCountByDateStr(tomorrowStr)\r\n      const res2 = await GynaeBookService.getAllBookingsCountByDateStr(tomorrowStr)\r\n      const res3 = await GPBookService.getAllBookingsCountByDateStr(tomorrowStr)\r\n      const res4 = await STDBookService.getAllBookingsCountByDateStr(tomorrowStr)\r\n\r\n      \r\n      const pcr =  parseInt(res1.data.count)\r\n      const gynae = parseInt(res2.data.count)\r\n      const gp = parseInt(res3.data.count)\r\n      const std = parseInt(res4.data.count)\r\n\r\n      const _data = [\r\n        {clinic: \"PCR\", count: pcr},\r\n        {clinic: \"Gynae\", count: gynae},\r\n        {clinic: \"GP\", count: gp},\r\n        {clinic: \"STD\", count: std},\r\n        {clinic: \"Total\", count: pcr+gynae+gp+std}\r\n      ]\r\n\r\n      setData(_data)\r\n\r\n      setLoading(false);\r\n    }\r\n    catch(err)\r\n    {\r\n      console.error(err)\r\n      setLoading(false)\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval)\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Tomorrow Bookings</Title>\r\n      {data && (\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Clinic</TableCell>\r\n              <TableCell>Count</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {data.map((row) => (\r\n              <TableRow key={row._id}>\r\n                <TableCell>{row.clinic}</TableCell>\r\n                <TableCell>{row.count}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Title from \"./Title\";\r\nimport PCRBookService from \"./PCR/services/BookService\";\r\nimport GynaeBookService from \"./Gynae/services/BookService\";\r\nimport GPBookService from \"./GP/services/BookService\";\r\nimport STDBookService from \"./STD/services/BookService\";\r\n\r\n\r\nimport { LinearProgress } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n}));\r\n\r\nexport default function TotalBookingView() {\r\n  const classes = useStyles();\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n   \r\n    try{\r\n      const res1 = await PCRBookService.getAllBookingsCountAll()\r\n      const res2 = await GynaeBookService.getAllBookingsCountAll()\r\n      const res3 = await GPBookService.getAllBookingsCountAll()\r\n      const res4 = await STDBookService.getAllBookingsCountAll()\r\n      \r\n      const pcr =  parseInt(res1.data.count)\r\n      const gynae = parseInt(res2.data.count)\r\n      const gp = parseInt(res3.data.count)\r\n      const std = parseInt(res4.data.count)\r\n\r\n      const _data = [\r\n        {clinic: \"PCR\", count: pcr},\r\n        {clinic: \"Gynae\", count: gynae},\r\n        {clinic: \"GP\", count: gp},\r\n        {clinic: \"STD\", count: std},\r\n        {clinic: \"Total\", count: pcr+gynae+gp+std}\r\n      ]\r\n\r\n      setData(_data)\r\n\r\n      setLoading(false);\r\n    }\r\n    catch(err)\r\n    {\r\n      console.error(err)\r\n      setLoading(false)\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval)\r\n    }\r\n    \r\n\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Total Bookings</Title>\r\n      {data && (\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Clinic</TableCell>\r\n              <TableCell>Count</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {data.map((row) => (\r\n              <TableRow key={row._id}>\r\n                <TableCell>{row.clinic}</TableCell>\r\n                <TableCell>{row.count}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Title from \"./Title\";\r\nimport PCRBookService from \"./PCR/services/BookService\";\r\n\r\nimport GlobalState from \"./GlobalState\";\r\nimport { Grid, LinearProgress } from \"@material-ui/core\";\r\n\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  countLabel: {\r\n   position: \"absolute\",\r\n   top: \"65px\",\r\n   left: \"44%\",\r\n   fontSize: \"3rem\",\r\n  },\r\n\r\n  countLabelRed: {\r\n    position: \"absolute\",\r\n    top: \"65px\",\r\n    left: \"44%\",\r\n    fontSize: \"3rem\",\r\n    color: theme.palette.secondary.main\r\n   },\r\n\r\n   Icon: {\r\n    fontSize: \"2rem\"\r\n\r\n  },\r\n\r\n  IconRed: {\r\n   fontSize: \"2rem\",\r\n  //  color: theme.palette.secondary.main,\r\n  },\r\n\r\n  TitleRed:{\r\n    // color: theme.palette.secondary.main,\r\n  }\r\n\r\n\r\n}));\r\n\r\nexport default function LateBookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await PCRBookService.getLateBookings();\r\n\r\n      setData(res.data.length);\r\n\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval)\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div style={{ position: \"relative\" }}>\r\n        {loading && (\r\n          <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n            <LinearProgress color=\"primary\" />\r\n          </div>\r\n        )}\r\n        <Title>\r\n          <Grid\r\n            container\r\n            direction=\"row-reverse\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <div style={{ paddingTop: \"5px\" }}>\r\n                <HourglassEmptyIcon className={data === 0 ? classes.Icon : classes.IconRed } />\r\n              </div>\r\n            </Grid>\r\n            <Grid item style={{ textAlign: \"left\" }}>\r\n              <span className={data === 0 ? classes.Title : classes.TitleRed}>\r\n                  PCR 40-Hours Late\r\n              </span>\r\n           \r\n            </Grid>\r\n          </Grid>\r\n\r\n          {data !== null && <div className={data === 0 ? classes.countLabel : classes.countLabelRed }>{data}</div>}\r\n        </Title>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Title from \"./Title\";\r\nimport PCRBookService from \"./PCR/services/BookService\";\r\n\r\nimport GlobalState from \"./GlobalState\";\r\nimport { Grid, LinearProgress } from \"@material-ui/core\";\r\n\r\nimport ReportProblemOutlinedIcon from \"@material-ui/icons/ReportProblemOutlined\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  countLabel: {\r\n    position: \"absolute\",\r\n    top: \"65px\",\r\n    left: \"44%\",\r\n    fontSize: \"3rem\",\r\n  },\r\n\r\n  countLabelRed: {\r\n    position: \"absolute\",\r\n    top: \"65px\",\r\n    left: \"44%\",\r\n    fontSize: \"3rem\",\r\n    color: theme.palette.secondary.main,\r\n  },\r\n\r\n  Icon: {\r\n    fontSize: \"2rem\",\r\n  },\r\n\r\n  IconRed: {\r\n    fontSize: \"2rem\",\r\n    // color: theme.palette.secondary.main,\r\n  },\r\n\r\n  TitleRed: {\r\n    // color: theme.palette.secondary.main,\r\n  },\r\n}));\r\n\r\nexport default function UnmatchedBookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await PCRBookService.getUnmatchedRecords();\r\n\r\n      setData(res.data.length);\r\n\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div style={{ position: \"relative\" }}>\r\n        {loading && (\r\n          <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n            <LinearProgress color=\"primary\" />\r\n          </div>\r\n        )}\r\n        <Title>\r\n          <Grid\r\n            container\r\n            direction=\"row-reverse\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <div style={{ paddingTop: \"5px\" }}>\r\n                <ReportProblemOutlinedIcon\r\n                  className={data === 0 ? classes.Icon : classes.IconRed}\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item style={{ textAlign: \"left\" }}>\r\n              <span className={data === 0 ? classes.Title : classes.TitleRed}>\r\n                PCR Unmatched Records\r\n              </span>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {data !== null && (\r\n            <div\r\n              className={\r\n                data === 0 ? classes.countLabel : classes.countLabelRed\r\n              }\r\n            >\r\n              {data}\r\n            </div>\r\n          )}\r\n        </Title>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Title from \"./Title\";\r\nimport GynaeBookService from \"./Gynae/services/BookService\";\r\n\r\nimport GlobalState from \"./GlobalState\";\r\nimport { Grid, LinearProgress } from \"@material-ui/core\";\r\n\r\nimport ReportProblemOutlinedIcon from \"@material-ui/icons/ReportProblemOutlined\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  countLabel: {\r\n    position: \"absolute\",\r\n    top: \"65px\",\r\n    left: \"44%\",\r\n    fontSize: \"3rem\",\r\n  },\r\n\r\n  countLabelRed: {\r\n    position: \"absolute\",\r\n    top: \"65px\",\r\n    left: \"44%\",\r\n    fontSize: \"3rem\",\r\n    color: theme.palette.secondary.main,\r\n  },\r\n\r\n  Icon: {\r\n    fontSize: \"2rem\",\r\n  },\r\n\r\n  IconRed: {\r\n    fontSize: \"2rem\",\r\n    // color: theme.palette.secondary.main,\r\n  },\r\n\r\n  TitleRed: {\r\n    // color: theme.palette.secondary.main,\r\n  },\r\n}));\r\n\r\nexport default function ShouldRefundBookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await GynaeBookService.getShouldRefundsCount()\r\n      setData(res.data.count);\r\n\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      setRefresh((refresh) => !refresh);\r\n    }, 30000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div style={{ position: \"relative\" }}>\r\n        {loading && (\r\n          <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n            <LinearProgress color=\"primary\" />\r\n          </div>\r\n        )}\r\n        <Title>\r\n          <Grid\r\n            container\r\n            direction=\"row-reverse\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <div style={{ paddingTop: \"5px\" }}>\r\n                <ReportProblemOutlinedIcon\r\n                  className={data === 0 ? classes.Icon : classes.IconRed}\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item style={{ textAlign: \"left\" }}>\r\n              <span className={data === 0 ? classes.Title : classes.TitleRed}>\r\n                Gynae Waiting for Refunds\r\n              </span>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {data !== null && (\r\n            <div\r\n              className={\r\n                data === 0 ? classes.countLabel : classes.countLabelRed\r\n              }\r\n            >\r\n              {data}\r\n            </div>\r\n          )}\r\n        </Title>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","export const getRole = () => {\r\n    return sessionStorage.getItem('medexadmin-role')\r\n}\r\n\r\nexport const setRole = (role) => {\r\n    return sessionStorage.setItem('medexadmin-role', role)\r\n}\r\n\r\nexport const clearRole = (role) => {\r\n    return sessionStorage.removeItem('medexadmin-role')\r\n}","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\n\r\nimport TodayBookingView from \"./TodayBookingView\" \r\nimport TomorrowBookingView from \"./TomorrowBookingView\";\r\nimport TotalBookingView from \"./TotalBookingView\";\r\nimport LateBookingView from \"./LateBookingView\";\r\nimport UnmatchedBookingView from \"./UnmatchedBookingView\";\r\nimport ShouldRefundBookingView from \"./ShouldRefundBookingView\";\r\nimport { setRole } from \"./Role\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport { getGlobalPath } from \"./GlobalPath\";\r\nimport { getMenuId, getMenuIndex } from \"./MenuList\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n  fixedHeight: {\r\n    height: 300,\r\n  },\r\n  fixedHeightSmall: {\r\n    height: 200,\r\n    cursor:\"pointer\"\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n  const fixedHeightPaperSmall = clsx(classes.paper, classes.fixedHeightSmall);\r\n\r\n  const history = useHistory();\r\n\r\n  const gotoLateBookings = () =>\r\n  {\r\n    const role = 'pcr'\r\n    setRole(role);\r\n    setState((state) => ({ ...state, role: role }));\r\n    history.push(getGlobalPath(`/${getMenuId(role, getMenuIndex(role,'latebookings'))}`));\r\n  }\r\n\r\n  const gotoUnmatchedPCR = () =>\r\n  {\r\n    const role = 'pcr'\r\n    setRole(role);\r\n    setState((state) => ({ ...state, role: role }));\r\n    history.push(getGlobalPath(`/${getMenuId(role, getMenuIndex(role,'unmatchedRecords'))}`));\r\n  }\r\n  \r\n  const gotoRefundGynae = () =>\r\n  {\r\n    const role = 'gynae'\r\n    setRole(role);\r\n    setState((state) => ({ ...state, role: role }));\r\n    history.push(getGlobalPath(`/${getMenuId(role, getMenuIndex(role,'deletedBookings'))}`));\r\n  }\r\n\r\n  \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3}>       \r\n       \r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaper}>\r\n            <TodayBookingView />\r\n          </Paper>\r\n        </Grid>\r\n      \r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaper}>\r\n             <TomorrowBookingView />\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaper}>\r\n             <TotalBookingView />\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaperSmall} onClick={gotoLateBookings}>\r\n             <LateBookingView />\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaperSmall} onClick={gotoUnmatchedPCR}>\r\n             <UnmatchedBookingView />\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={4}>\r\n          <Paper className={fixedHeightPaperSmall} onClick={gotoRefundGynae}>\r\n             <ShouldRefundBookingView />\r\n          </Paper>\r\n        </Grid>\r\n\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import axios from 'axios';\r\nimport { authToken, backendAPI } from '../../GlobalPath';\r\n\r\nexport default axios.create({\r\n  baseURL: backendAPI,\r\n  headers : {\r\n      'Authorization' : authToken,\r\n       'Content-Type': 'application/json',\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n\r\n   static addNewBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/addnewbooking`, payload);\r\n   }\r\n\r\n\r\n   static sendRegFormEmail = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/book/sendregformemail?id=${bookingId}`);\r\n   }\r\n   static payBooking = (bookingId,price, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/gp/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}&price=${price}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getShouldRefundsCount = () =>\r\n   {\r\n      return API.get(`/api/gp/book/getshouldrefundscount?`);\r\n   }\r\n\r\n   \r\n\r\n   static refundBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/gp/payment/refundpayment`, {bookingId: bookingId});\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountAll = () =>\r\n   {\r\n      return API.get(`/api/gp/book/getallbookingscountall`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/gp/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/admin/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/admin/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/admin/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static changeToPatientAttended = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/changetopatientattended?id=${id}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/gp/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/gp/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/admin/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/gp/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/admin/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/admin/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/admin/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/admin/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/admin/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/admin/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/admin/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n}","import React, { useEffect } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport PropTypes from \"prop-types\";\r\nimport MaskedInput from \"react-text-mask\";\r\nimport { FormControl, Grid, Input, InputLabel } from \"@material-ui/core\";\r\nimport BookService from \"./services/BookService\";\r\n\r\nimport PersonsBoxPCR from \"./../PCR/PersonsBox\";\r\nimport PersonsBoxGP from \"./../GP/PersonsBox\";\r\nimport PersonsBoxGynae from \"./../Gynae/PersonsBox\";\r\nimport PersonsBoxSTD from \"./../STD/PersonsBox\";\r\n\r\nimport { width } from \"@material-ui/system\";\r\n\r\nconst isBoolean = (param) => typeof param === \"boolean\";\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n  const [focus, setFocus] = React.useState(initialFocus);\r\n  const setFocusWithTrueDefault = (param) =>\r\n    setFocus(isBoolean(param) ? param : true);\r\n  return [\r\n    setFocusWithTrueDefault,\r\n    {\r\n      autoFocus: focus,\r\n      key: `${id}${focus}`,\r\n      onFocus: () => setFocus(true),\r\n      onBlur: () => setFocus(false),\r\n    },\r\n  ];\r\n};\r\n\r\nfunction TextMaskCustom(props) {\r\n  const { inputRef, ...other } = props;\r\n\r\n  return (\r\n    <MaskedInput\r\n      {...other}\r\n      ref={(ref) => {\r\n        inputRef(ref ? ref.inputElement : null);\r\n      }}\r\n      mask={[/\\d/, /\\d/, /\\d/, \"-\", /\\d/, /\\d/, /\\d/, \"-\", /\\d/, /\\d/, /\\d/]}\r\n      // placeholderChar={'\\u2000'}\r\n      showMask\r\n    />\r\n  );\r\n}\r\n\r\nTextMaskCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    \"& > * + *\": {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    marginTop: \"20px\",\r\n  },\r\n\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n\r\n  Find: {\r\n    width: \"80px\",\r\n  },\r\n\r\n  Clear: {\r\n    marginRight: \"20px\",\r\n  },\r\n\r\n  title: {\r\n    marginTop: \"20px\",\r\n  },\r\n\r\n  TextBox: {\r\n    marginTop: \"30px\",\r\n    \"& > *\": {\r\n      textAlign: \"center\",\r\n    },\r\n  },\r\n\r\n  TextField: {},\r\n\r\n  NoRecordsFound: {\r\n    marginTop: \"20px\",\r\n    color: \"red\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"14px\",\r\n  },\r\n\r\n  PersonsBox: {\r\n    marginTop: \"20px\",\r\n    marginBottom: \"50px\",\r\n  },\r\n\r\n  boxTitle:{\r\n      fontWeight: \"500\",\r\n      color: theme.palette.secondary.main,\r\n      borderColor: theme.palette.secondary.main,\r\n      border: \"1px solid\",\r\n      fontSize: \"1.2rem\",\r\n      backgroundColor: \"#fff\",\r\n      width: \"150px\",\r\n      padding:\"5px\",\r\n      borderRadius:\"30px\",\r\n      textAlign:\"center\",\r\n      marginBottom:\"10px\",\r\n      boxShadow: \"4px 8px 8px #eee\"\r\n  }\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n  //   useEffect( () =>\r\n  //   {\r\n  //      findRecords();\r\n  //   }, [state.findRecords]);\r\n\r\n  useEffect(() => {\r\n    setState((state) => ({ ...state, foundRecords: [] }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    BookService.getBookingsByRef(state.ref).then((res) => {\r\n      if (res.data.length > 0) {\r\n        setState((state) => ({ ...state, foundRecords: res.data }));\r\n      }\r\n    });\r\n  }, [state.RefreshPersonInfo]);\r\n\r\n  const handleChange = (event) => {\r\n    setState((state) => ({ ...state, ref: event.target.value }));\r\n    setState((state) => ({ ...state, refError: false }));\r\n  };\r\n\r\n  const clearField = () => {\r\n    setState((state) => ({ ...state, refError: false }));\r\n    setState((state) => ({ ...state, ref: \"___-___-___\" }));\r\n    setState((state) => ({ ...state, foundRecords: [] }));\r\n    setFocus();\r\n  };\r\n\r\n  const findRecords = () => {\r\n    if (!state.ref || state.ref.indexOf(\"_\") >= 0) {\r\n      setState((state) => ({ ...state, refError: true }));\r\n      return;\r\n    }\r\n\r\n    setState((state) => ({ ...state, submiting: true }));\r\n    setState((state) => ({ ...state, foundRecords: [] }));\r\n\r\n    BookService.getBookingsByRef(state.ref)\r\n      .then((res) => {\r\n        setState((state) => ({ ...state, submiting: false }));\r\n        if (res.data.length > 0) {\r\n          setState((state) => ({ ...state, foundRecords: res.data }));\r\n        } else {\r\n          setState((state) => ({ ...state, foundRecords: null }));\r\n        }\r\n\r\n        console.log(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setState((state) => ({ ...state, submiting: false }));\r\n      });\r\n  };\r\n\r\n  const getPersonBox = (clinic) => {\r\n    switch (clinic) {\r\n      case \"pcr\":\r\n        return <PersonsBoxPCR />;\r\n      case \"gp\":\r\n        return <PersonsBoxGP />;\r\n      case \"std\":\r\n        return <PersonsBoxSTD />;\r\n      case \"gynae\":\r\n        return <PersonsBoxGynae />;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getBoxTitle = (clinic) => {\r\n      return (\r\n          <div className={classes.boxTitle}>\r\n              {clinic.toUpperCase() + ' Clinic'}\r\n\r\n          </div>\r\n      )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <div className={classes.title}>\r\n        <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n          Find Booking Appoinments\r\n        </Typography>\r\n      </div>\r\n\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        spacing={1}\r\n        justify=\"flex-start\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid item xs={12} md={12}>\r\n          <FormControl className={classes.TextBox}>\r\n            <TextField\r\n              {...focusProps}\r\n              autoFocus\r\n              pattern=\"[0-9]*\"\r\n              error={state.refError ? true : false}\r\n              value={state.ref}\r\n              className={classes.TextField}\r\n              width=\"50px\"\r\n              onChange={handleChange}\r\n              label=\"Reference No.\"\r\n              helperText=\"Enter Your 9-digits Reference No.\"\r\n              name=\"refNo\"\r\n              id=\"refNo\"\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              margin=\"normal\"\r\n              fullWidth={true}\r\n              InputProps={{\r\n                inputComponent: TextMaskCustom,\r\n                style: {\r\n                  textAlign: \"center\",\r\n                  fontSize: \"24px\",\r\n                  width: \"210px\",\r\n                  paddingLeft: \"20px\",\r\n                },\r\n              }}\r\n              onKeyPress={(event) => {\r\n                if (event.key === \"Enter\") {\r\n                  findRecords();\r\n                }\r\n              }}\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n          <Button\r\n            disabled={state.submiting}\r\n            color=\"default\"\r\n            onClick={clearField}\r\n            onTouchTap={clearField}\r\n            className={classes.Clear}\r\n          >\r\n            Clear\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            disabled={state.submiting}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={findRecords}\r\n            onTouchTap={findRecords}\r\n            className={classes.Find}\r\n          >\r\n            Find\r\n          </Button>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n          {state.foundRecords && state.foundRecords.length > 0 && (\r\n            <React.Fragment>\r\n              <div className={classes.PersonsBox}>\r\n                {getBoxTitle(state.foundRecords[0].clinic)}  \r\n                {getPersonBox(state.foundRecords[0].clinic)}\r\n              </div>\r\n            </React.Fragment>\r\n          )}\r\n\r\n          {!state.foundRecords && (\r\n            <React.Fragment>\r\n              <div className={classes.root}>\r\n                <Alert severity=\"error\">\r\n                  {\" \"}\r\n                  <strong>No Records Found !</strong> <br /> Please check you\r\n                  reference number again.\r\n                </Alert>\r\n              </div>\r\n            </React.Fragment>\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PCRBookingDialog from \"./../PCR/BookingDialog\";\r\nimport GPBookingDialog from \"./../GP/BookingDialog\";\r\nimport GynaeBookingDialog from \"./../Gynae/BookingDialog\";\r\nimport STDBookingDialog from \"./../STD/BookingDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({}));\r\n\r\nexport default function BookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  if (props.booking) {\r\n    switch (props.booking.clinic) {\r\n      case \"pcr\":\r\n        return (\r\n          <PCRBookingDialog\r\n            booking={props.booking}\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n          />\r\n        );\r\n      case \"gp\":\r\n        return (\r\n          <GPBookingDialog\r\n            booking={props.booking}\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n          />\r\n        );\r\n\r\n      case \"gynae\":\r\n        return (\r\n          <GynaeBookingDialog\r\n            booking={props.booking}\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n          />\r\n        );\r\n\r\n      case \"std\":\r\n        return (\r\n          <STDBookingDialog\r\n            booking={props.booking}\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n          />\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { DataGrid } from \"@material-ui/data-grid\";\r\nimport BookService from \"./services/BookService\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  Icon,\r\n  InputLabel,\r\n  LinearProgress,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  SvgIcon,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { getMenuIndex } from \"./../MenuList\";\r\nimport {\r\n  FormatDateFromString,\r\n  FormatDateFromStringShortYear,\r\n} from \"./DateFormatter\";\r\n\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport BookingDialog from \"./BookingDialog\";\r\n\r\nimport NewReleasesIcon from \"@material-ui/icons/NewReleases\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\nimport LiveTvIcon from \"@material-ui/icons/LiveTv\";\r\nimport PlaylistAddCheckIcon from \"@material-ui/icons/PlaylistAddCheck\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from \"react-draggable\";\r\n\r\nimport * as dateformat from \"dateformat\";\r\n\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\";\r\n\r\nimport BusinessIcon from \"@material-ui/icons/Business\";\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\nimport LocalAtmIcon from \"@material-ui/icons/LocalAtm\";\r\n\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\nimport PriceCalculator from \"./PriceCalculator\";\r\nimport { corporates } from \"./Corporates\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel: {\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n\r\n  ExportToExcelButton: {\r\n    // marginBottom : \"20px\",\r\n    color: \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n  },\r\n\r\n  ExportToExcelButtonInline: {\r\n    // marginBottom : \"20px\",\r\n    color: \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    cursor: \"pointer\",\r\n    padding: \"10px\",\r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n  },\r\n\r\n  th: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n  },\r\n\r\n  td: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n  },\r\n\r\n  topSelect: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 80,\r\n  },\r\n\r\n  notifyIcon: {\r\n    width: \"16px\",\r\n    height: \"16px\",\r\n    borderRadius: \"50%\",\r\n    backgroundColor: \"rgb(220, 0, 78)\",\r\n    marginLeft: \"10px\",\r\n  },\r\n\r\n  clinicTitle: {\r\n    fontWeight: \"600\",\r\n    textAlign: \"center\",\r\n    color: theme.palette.primary.main,\r\n    padding: \"2px 10px\",\r\n  },\r\n\r\n  PCRLabel: {\r\n    color: \"#4faef7\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n  },\r\n\r\n  GynaeLabel: {\r\n    color: \"#e83caf\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n  },\r\n\r\n  GPLabel: {\r\n    color: \"#ff4f14\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n  },\r\n\r\n  STDLabel: {\r\n    color: \"#d6733a\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n  },\r\n}));\r\n\r\nconst getTableTitle = (str) => {\r\n  if (str === \"today\") {\r\n    return `Today's Bookings`;\r\n  } else if (str === \"old\") {\r\n    return `Old Bookings`;\r\n  } else if (str === \"future\") {\r\n    return `Future Bookings`;\r\n  } else if (str === \"recent\") {\r\n    return `Recent Bookings`;\r\n  } else if (str === \"live\") {\r\n    return `Live Bookings`;\r\n  } else if (str === \"completed\") {\r\n    return `Completed Bookings`;\r\n  } else if (str === \"positive\") {\r\n    return `Positive Results`;\r\n  } else if (str === \"deleted\") {\r\n    return `Deleted Records`;\r\n  } else if (str === \"late\") {\r\n    return `40 Hours Late`;\r\n  } else {\r\n    return `All Bookings`;\r\n  }\r\n};\r\n\r\nconst getTableIcon = (str) => {\r\n  if (str === \"today\") {\r\n    return <NewReleasesIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"old\") {\r\n    return <HistoryIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"future\") {\r\n    return <TimelineIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"recent\") {\r\n    return <AutorenewIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"live\") {\r\n    return <LiveTvIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"completed\") {\r\n    return <PlaylistAddCheckIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"positive\") {\r\n    return <AddCircleOutlineIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"deleted\") {\r\n    return <DeleteIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else if (str === \"late\") {\r\n    return <HourglassEmptyIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  } else {\r\n    return <DescriptionIcon style={{ fontSize: \"2.2rem\" }} />;\r\n  }\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  const classes = useStyles();\r\n\r\n  const getClassforClinic = (clinic) => {\r\n    switch (clinic) {\r\n      case \"pcr\":\r\n        return classes.PCRLabel;\r\n      case \"gp\":\r\n        return classes.GPLabel;\r\n      case \"gynae\":\r\n        return classes.GynaeLabel;\r\n      case \"std\":\r\n        return classes.STDLabel;\r\n\r\n      default:\r\n        return classes.clinicTitle;\r\n    }\r\n  };\r\n\r\n  const [topCount, setTopCount] = React.useState(25);\r\n  const topCountChanged = (event) => {\r\n    setTopCount(event.target.value);\r\n    loadData(event.target.value);\r\n  };\r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () => {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  };\r\n\r\n  const [fromDate, setFromDate] = React.useState(\r\n    new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000)\r\n  );\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date, \"yyyy-mm-dd\"));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(\r\n    new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000)\r\n  );\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date, \"yyyy-mm-dd\"));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(\r\n    dateformat(\r\n      new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000),\r\n      \"yyyy-mm-dd\"\r\n    )\r\n  );\r\n  const [untilDateStr, seUntilDateStr] = useState(\r\n    dateformat(\r\n      new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000),\r\n      \"yyyy-mm-dd\"\r\n    )\r\n  );\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const [chkDate, setChkDate] = useState(true);\r\n  const [chkForename, setChkForename] = useState(true);\r\n  const [chkSurname, setChkSurname] = useState(true);\r\n  const [chkDOB, setChkDOB] = useState(true);\r\n  const [chkEmail, setChkEmail] = useState(true);\r\n  const [chkTel, setChkTel] = useState(true);\r\n  const [chkCertificate, setChkCertidicate] = useState(true);\r\n  const [chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const [chkextRef, setChkExtRef] = useState(true);\r\n  const [chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) => {\r\n    setJustCorporate(event.target.checked);\r\n  };\r\n\r\n  const chkDateChanged = (event) => {\r\n    setChkDate(event.target.checked);\r\n  };\r\n\r\n  const chkForenameChanged = (event) => {\r\n    setChkForename(event.target.checked);\r\n  };\r\n\r\n  const chkSurnameChanged = (event) => {\r\n    setChkSurname(event.target.checked);\r\n  };\r\n\r\n  const chkDOBChanged = (event) => {\r\n    setChkDOB(event.target.checked);\r\n  };\r\n\r\n  const chkEmailChanged = (event) => {\r\n    setChkEmail(event.target.checked);\r\n  };\r\n\r\n  const chkTelChanged = (event) => {\r\n    setChkTel(event.target.checked);\r\n  };\r\n\r\n  const chkCertificateChanged = (event) => {\r\n    setChkCertidicate(event.target.checked);\r\n  };\r\n\r\n  const chkAntiBodyTestChanged = (event) => {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  };\r\n\r\n  const chkextRefChanged = (event) => {\r\n    setChkExtRef(event.target.checked);\r\n  };\r\n\r\n  const chkPriceChanged = (event) => {\r\n    setChkPrice(event.target.checked);\r\n  };\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === \"recent\") {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n\r\n      {\r\n        field: \"_id\",\r\n        headerName: \" \",\r\n        width: 70,\r\n        renderCell: (params) => {\r\n          return (\r\n            <React.Fragment>\r\n              <Button\r\n                color=\"primary\"\r\n                onClick={(event) => openDetailsDialog(event, params.value)}\r\n              >\r\n                <SearchIcon />\r\n              </Button>\r\n            </React.Fragment>\r\n          );\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"clinic\",\r\n        headerName: \"Clinic\",\r\n        align: \"center\",\r\n        width: 90,\r\n        renderCell: (params) => {\r\n          return (\r\n            <span className={getClassforClinic(params.value)}>\r\n              {params.value ? params.value.toUpperCase() : \"N/A\"}\r\n            </span>\r\n          );\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"paid\",\r\n        headerName: \"Paid\",\r\n        align: \"center\",\r\n        width: 90,\r\n        renderCell: (params) => {\r\n          if (!params.value) {\r\n            return (\r\n              <React.Fragment>\r\n                <CloseIcon className={classes.closeIcon} />\r\n              </React.Fragment>\r\n            );\r\n          } else {\r\n            if (params.getValue(\"paidBy\") === \"credit card\") {\r\n              return <CreditCardIcon className={classes.checkIcon} />;\r\n            } else if (params.getValue(\"paidBy\") === \"cash\") {\r\n              return <LocalAtmIcon className={classes.checkIcon} />;\r\n            } else if (params.getValue(\"paidBy\") === \"corporate\") {\r\n              return <BusinessIcon className={classes.checkIcon} />;\r\n            } else {\r\n              return \"\";\r\n            }\r\n          }\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"timeStamp\",\r\n        headerName: \"TimeStamp\",\r\n        width: 200,\r\n        valueFormatter: (params) => {\r\n          return formatTimeStamp(params.value);\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"bookingDate\",\r\n        headerName: \"B Date\",\r\n        width: 110,\r\n        valueFormatter: (params) => {\r\n          return FormatDateFromString(params.value);\r\n        },\r\n      },\r\n      {\r\n        field: \"bookingTimeNormalized\",\r\n        headerName: \"B Time\",\r\n        width: 105,\r\n        valueGetter: (params) => {\r\n          return params.getValue(\"bookingTime\");\r\n        },\r\n      },\r\n      {\r\n        field: \"status\",\r\n        headerName: \"Status\",\r\n        width: 100,\r\n        renderCell: (params) => {\r\n          if (params.value === \"booked\") {\r\n            return <span className={classes.BookedLabel}> BM </span>;\r\n          } else if (params.value === \"patient_attended\") {\r\n            return <span className={classes.PatientAttendedLabel}> PA </span>;\r\n          } else if (params.value === \"sample_taken\") {\r\n            return <span className={classes.SampleTakenLabel}> ST </span>;\r\n          } else if (params.value === \"report_sent\") {\r\n            return <span className={classes.ReportSentLabel}> RS </span>;\r\n          } else if (params.value === \"report_cert_sent\") {\r\n            return <span className={classes.ReportCertSentLabel}> RCS </span>;\r\n          } else if (params.value === \"positive\") {\r\n            return <span className={classes.PositiveLabel}> POS </span>;\r\n          } else {\r\n            return \"Unknown\";\r\n          }\r\n        },\r\n      },\r\n      {\r\n        field: \"bookingRef\",\r\n        headerName: \"Ref No.\",\r\n        width: 120,\r\n        renderCell: (params) => {\r\n          return (\r\n            <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link\r\n                className={classes.RefLink}\r\n                //  onClick={\r\n                //   () => {\r\n                //     console.log(params.value);\r\n\r\n                //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n                //     setState(state => ({...state, ref : params.value}));\r\n                //     setState(state => ({...state, refError : false}));\r\n                //     setState(state => ({...state, foundRecords : []}));\r\n                //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n                //   }\r\n                // }\r\n              >\r\n                {params.value}\r\n              </Link>\r\n            </Tooltip>\r\n          );\r\n        },\r\n      },\r\n      { field: \"fullname\", headerName: \"Fullname\", width: 250,   valueGetter: (params) => {\r\n        if (!params.value || params.value.length === 0)\r\n        {\r\n          return `${params.getValue('forename')} ${params.getValue('surname')}`\r\n\r\n        }else\r\n        {\r\n          return params.value\r\n        }\r\n       \r\n      } },\r\n      { field: \"email\", headerName: \"Email\", width: 200 },\r\n      { field: \"phone\", headerName: \"Tel\", width: 150 },\r\n      { field: \"notes\", headerName: \"Notes\", width: 500 },\r\n    ];\r\n  } else {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n\r\n      {\r\n        field: \"_id\",\r\n        headerName: \" \",\r\n        width: 70,\r\n        renderCell: (params) => {\r\n          return (\r\n            <React.Fragment>\r\n              <Button\r\n                color=\"primary\"\r\n                onClick={(event) => openDetailsDialog(event, params.value)}\r\n              >\r\n                <SearchIcon />\r\n              </Button>\r\n            </React.Fragment>\r\n          );\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"clinic\",\r\n        headerName: \"Clinic\",\r\n        align: \"center\",\r\n        width: 90,\r\n        renderCell: (params) => {\r\n          return (\r\n            <span className={getClassforClinic(params.value)}>\r\n              {params.value ? params.value.toUpperCase() : \"N/A\"}\r\n            </span>\r\n          );\r\n        },\r\n      },\r\n\r\n      {\r\n        field: \"paid\",\r\n        headerName: \"Paid\",\r\n        align: \"center\",\r\n        width: 90,\r\n        renderCell: (params) => {\r\n          if (!params.value) {\r\n            return (\r\n              <React.Fragment>\r\n                <CloseIcon className={classes.closeIcon} />\r\n                {parseInt(params.getValue(\"deposit\")) > 0 &&\r\n                  props.date === \"deleted\" && (\r\n                    <span className={classes.notifyIcon}>&nbsp;</span>\r\n                  )}\r\n              </React.Fragment>\r\n            );\r\n          } else {\r\n            if (params.getValue(\"paidBy\") === \"credit card\") {\r\n              return <CreditCardIcon className={classes.checkIcon} />;\r\n            } else if (params.getValue(\"paidBy\") === \"cash\") {\r\n              return <LocalAtmIcon className={classes.checkIcon} />;\r\n            } else if (params.getValue(\"paidBy\") === \"corporate\") {\r\n              return <BusinessIcon className={classes.checkIcon} />;\r\n            } else {\r\n              return \"\";\r\n            }\r\n          }\r\n        },\r\n      },\r\n      {\r\n        field: \"bookingDate\",\r\n        headerName: \"B Date\",\r\n        width: 110,\r\n        valueFormatter: (params) => {\r\n          return FormatDateFromString(params.value);\r\n        },\r\n      },\r\n      {\r\n        field: \"bookingTimeNormalized\",\r\n        headerName: \"B Time\",\r\n        width: 105,\r\n        valueGetter: (params) => {\r\n          return params.getValue(\"bookingTime\");\r\n        },\r\n      },\r\n      {\r\n        field: \"status\",\r\n        headerName: \"Status\",\r\n        width: 100,\r\n        renderCell: (params) => {\r\n          if (params.value === \"booked\") {\r\n            return <span className={classes.BookedLabel}> BM </span>;\r\n          } else if (params.value === \"patient_attended\") {\r\n            return <span className={classes.PatientAttendedLabel}> PA </span>;\r\n          } else if (params.value === \"sample_taken\") {\r\n            return <span className={classes.SampleTakenLabel}> ST </span>;\r\n          } else if (params.value === \"report_sent\") {\r\n            return <span className={classes.ReportSentLabel}> RS </span>;\r\n          } else if (params.value === \"report_cert_sent\") {\r\n            return <span className={classes.ReportCertSentLabel}> RCS </span>;\r\n          } else if (params.value === \"positive\") {\r\n            return <span className={classes.PositiveLabel}> POS </span>;\r\n          } else {\r\n            return \"Unknown\";\r\n          }\r\n        },\r\n      },\r\n      {\r\n        field: \"bookingRef\",\r\n        headerName: \"Ref No.\",\r\n        width: 120,\r\n        renderCell: (params) => {\r\n          return (\r\n            <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link\r\n                className={classes.RefLink}\r\n                //  onClick={\r\n                //   () => {\r\n                //     console.log(params.value);\r\n\r\n                //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n                //     setState(state => ({...state, ref : params.value}));\r\n                //     setState(state => ({...state, refError : false}));\r\n                //     setState(state => ({...state, foundRecords : []}));\r\n                //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n                //   }\r\n                // }\r\n              >\r\n                {params.value}\r\n              </Link>\r\n            </Tooltip>\r\n          );\r\n        },\r\n      },\r\n      { field: \"fullname\", headerName: \"Fullname\", width: 250,   valueGetter: (params) => {\r\n        if (!params.value || params.value.length === 0)\r\n        {\r\n          return `${params.getValue('forename')} ${params.getValue('surname')}`\r\n\r\n        }else\r\n        {\r\n          return params.value\r\n        }\r\n       \r\n      } },\r\n      { field: \"email\", headerName: \"Email\", width: 200 },\r\n      { field: \"phone\", headerName: \"Tel\", width: 150 },\r\n      { field: \"notes\", headerName: \"Notes\", width: 500 },\r\n    ];\r\n  }\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [data, setData] = React.useState({\r\n    bookings: [],\r\n    cachedBookings: [],\r\n    isFetching: true,\r\n  });\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) => {\r\n    setCorporate(event.target.value);\r\n  };\r\n\r\n  const [filter, setFilter] = React.useState(\"\");\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) => {\r\n    const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n    const timeStampStr = dateformat(timeStamp, \"yyyy-mm-dd\");\r\n    if (todayStr === timeStampStr) {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    } else {\r\n      return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  };\r\n\r\n  const loadData = (top) => {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === \"today\") {\r\n      api = BookService.getTodayBookings;\r\n    } else if (props.date === \"old\") {\r\n      api = BookService.getOldBookings;\r\n    } else if (props.date === \"future\") {\r\n      api = BookService.getFutureBookings;\r\n    } else if (props.date === \"recent\") {\r\n      api = BookService.getRecentBookingsAll;\r\n    } else if (props.date === \"deleted\") {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n\r\n    setData({ bookings: [], cachedBookings: [], isFetching: true });\r\n\r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        for (var i = 0; i < res.data.length; i++) {\r\n          res.data[i] = { ...res.data[i], id: i + 1 };\r\n        }\r\n        setData({\r\n          bookings: [...res.data],\r\n          cachedBookings: [...res.data],\r\n          isFetching: false,\r\n        });\r\n        // return res.data;\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTopCount(25);\r\n    loadData(25);\r\n  }, [props.date]);\r\n\r\n  useEffect(() => {\r\n    if (filter && filter.trim().length > 0) {\r\n      var filteredData = data.cachedBookings.filter(\r\n        (element) =>\r\n          element.fullname?.toLowerCase().indexOf(filter.toLowerCase()) >= 0 ||\r\n          element.forename?.toLowerCase().indexOf(filter.toLowerCase()) >= 0 ||\r\n          element.surname?.toLowerCase().indexOf(filter.toLowerCase()) >= 0 \r\n      );\r\n\r\n      setData({\r\n        bookings: [...filteredData],\r\n        cachedBookings: data.cachedBookings,\r\n        isFetching: false,\r\n      });\r\n    } else {\r\n      setData({\r\n        bookings: [...data.cachedBookings],\r\n        cachedBookings: data.cachedBookings,\r\n        isFetching: false,\r\n      });\r\n    }\r\n  }, [filter]);\r\n\r\n  // useEffect(() => {\r\n  //   loadData(topCount);\r\n  // }, [state.bookingDialogDataChanged]);\r\n\r\n  const handleCloseSeeDetaisDialog = () => {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  };\r\n\r\n  const openDetailsDialog = (event, id) => {\r\n    const booking = data.bookings.find((element) => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n  };\r\n\r\n  const refreshClicked = (event) => {\r\n    setFilter(\"\");\r\n    loadData(topCount);\r\n  };\r\n\r\n  const filterChanged = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const handleSelectionChanged = (newSelection) => {\r\n    if (newSelection.length > 0) {\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n  };\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) => {\r\n    setOpenDialogExcel(true);\r\n  };\r\n\r\n  const isTopSelectHidden = (date) => {\r\n    return (\r\n      date === \"live\" ||\r\n      date === \"positive\" ||\r\n      date === \"late\" ||\r\n      date === \"today\"\r\n    );\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.showCreateExcel && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-from\"\r\n                        label=\"From\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price (£) </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {/* {FormatDateFromString(booking.birthDate)} */}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport dateformat from \"dateformat\";\r\nimport BookService from \"../services/BookService\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport GlobalState from \"../../GlobalState\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { CalendarColors } from \"./colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  Container: {\r\n    width: \"100%\",\r\n    paddingTop: \"70%\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fff\",\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  ContainerPast: {\r\n    width: \"100%\",\r\n    paddingTop: \"70%\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n\r\n  DayLabel: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#555\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  DayLabelToday: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    backgroundColor: \"#1a73e8\",\r\n    color: \"#fff\",\r\n    fontSize: \"1rem\",\r\n    borderRadius: \"50%\",\r\n    padding: \"5px\",\r\n    lineHight: \"35px\",\r\n    minWidth: \"35px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  DayLabelDisabled: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#ddd\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  BookingCountLabel: {\r\n    position: \"absolute\",\r\n    top: \"35%\",\r\n    left: \"40%\",\r\n    color: \"#3f51b5\",\r\n    backgroundColor: \"#ebedf7\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    padding: \"10px\",\r\n    borderRadius: \"50%\",\r\n    minWidth: \"40px\",\r\n    lineHight: \"40px\",\r\n    cursor: \"pointer\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  BookingCountLabelBusy: {\r\n    position: \"absolute\",\r\n    top: \"35%\",\r\n    left: \"40%\",\r\n    color: \"#b00000\",\r\n    backgroundColor: \"#fce6e6\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    padding: \"10px\",\r\n    borderRadius: \"50%\",\r\n    minWidth: \"40px\",\r\n    cursor: \"pointer\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  LoadingProgress: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n  },\r\n\r\n  BookingCountGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"5%\",\r\n    left: \"8%\",\r\n    width: \"8%\",\r\n    height: \"85%\",\r\n  },\r\n\r\n  PCRGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"-20px\",\r\n    left: \"0\",\r\n    width: \"30px\",\r\n    height: \"120%\",\r\n  },\r\n\r\n  GynaeGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"-20px\",\r\n    left: \"31px\",\r\n    width: \"20px\",\r\n    height: \"120%\",\r\n  },\r\n\r\n  GPGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"-20px\",\r\n    left: \"52px\",\r\n    width: \"20px\",\r\n    height: \"120%\",\r\n  },\r\n\r\n  STDGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"-20px\",\r\n    left: \"73px\",\r\n    width: \"20px\",\r\n    height: \"120%\",\r\n  },\r\n\r\n  DayLabelContainer: {\r\n    position: \"absolute\",\r\n    top: \"15%\",\r\n    left: \"5px\",\r\n    width: \"100%\",\r\n    paddingTop: \"45%\",\r\n  },\r\n}));\r\n\r\nconst MAX_BOOKING_COUNT_PCR = 50;\r\nconst MAX_BOOKING_COUNT_GP = 10;\r\nconst MAX_BOOKING_COUNT_STD = 10;\r\nconst MAX_BOOKING_COUNT_GYNAE = 10;\r\n\r\nconst MonthViewCell = ({ key, cellIndex, month, daysInMonth, dayClicked }) => {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [dateStr, setDateStr] = React.useState(\"\");\r\n\r\n  const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n  const [bookingsCount, setBookingsCount] = React.useState(null);\r\n\r\n  const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n  const [isPast, setIsPast] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    if (cellIndex <= daysInMonth.length) {\r\n      const date = daysInMonth[cellIndex - 1];\r\n      const dateStr = dateformat(date, \"yyyy-mm-dd\");\r\n      setDateStr(dateStr);\r\n      setCellDate(date);\r\n      setDisableDay(date.getMonth() !== month - 1);\r\n      const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n      setIsPast(dateStr < todayStr);\r\n    } else {\r\n      const day = cellIndex - daysInMonth.length;\r\n      const date = new Date(\r\n        daysInMonth[daysInMonth.length - 1].getTime() + day * 86400000\r\n      );\r\n      const dateStr = dateformat(date, \"yyyy-mm-dd\");\r\n      setDateStr(dateStr);\r\n      setCellDate(date);\r\n      setDisableDay(true);\r\n      const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n      setIsPast(dateStr < todayStr);\r\n    }\r\n  }, [cellIndex, month, daysInMonth]);\r\n\r\n  useEffect(() => {\r\n    const fecthData = async () => {\r\n      if (!dateStr || dateStr.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      if (disableDay) {\r\n        setBookingsCount(-2);\r\n        return;\r\n      }\r\n\r\n      setBookingsCount(null);\r\n\r\n      var res = state.AdminCalendarCache?.find(\r\n        (record) =>\r\n          record.method === \"getBookingsCountByDateStr\" &&\r\n          record.query === dateStr\r\n      )?.res;\r\n\r\n      if (!res) {\r\n        res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n        setState((state) => ({\r\n          ...state,\r\n          AdminCalendarCache: [\r\n            ...state.AdminCalendarCache,\r\n            { method: \"getBookingsCountByDateStr\", query: dateStr, res: res },\r\n          ],\r\n        }));\r\n      }\r\n\r\n      if (res.data.count) {\r\n        setBookingsCount(res.data.count);\r\n      }\r\n    };\r\n\r\n    fecthData();\r\n  }, [dateStr]);\r\n\r\n  const getDayLabel = (_cellIndex, _month, _daysInMonth) => {\r\n    var date = null;\r\n    var disabled = false;\r\n    var day = -1;\r\n\r\n    if (_cellIndex <= _daysInMonth.length) {\r\n      date = _daysInMonth[_cellIndex - 1];\r\n      day = date.getDate();\r\n      if (date.getMonth() !== _month - 1) {\r\n        disabled = true;\r\n      }\r\n    } else {\r\n      const _day = _cellIndex - _daysInMonth.length;\r\n      const date = new Date(\r\n        _daysInMonth[_daysInMonth.length - 1].getTime() + _day * 86400000\r\n      );\r\n      day = date.getDate();\r\n      disabled = true;\r\n    }\r\n\r\n    const isToday =\r\n      dateformat(new Date(), \"yyyy-mm-dd\") === dateformat(date, \"yyyy-mm-dd\");\r\n\r\n    return (\r\n      <span\r\n        className={\r\n          disabled\r\n            ? classes.DayLabelDisabled\r\n            : isToday\r\n            ? classes.DayLabelToday\r\n            : classes.DayLabel\r\n        }\r\n      >\r\n        {day > 0 ? `${day}` : \"\"}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getClinicBar = (clinic, count) => {\r\n    return (\r\n      <React.Fragment>\r\n        {clinic === \"pcr\" &&\r\n          state.selectedClinics.findIndex((e) => e === \"PCR\") >= 0 &&\r\n          getPCRClinicBar(count)}\r\n        {clinic === \"gynae\" &&\r\n          state.selectedClinics.findIndex((e) => e === \"GYNAE\") >= 0 &&\r\n          getGynaeClinicBar(count)}\r\n        {clinic === \"gp\" &&\r\n          state.selectedClinics.findIndex((e) => e === \"GP\") >= 0 &&\r\n          getGPClinicBar(count)}\r\n        {clinic === \"std\" &&\r\n          state.selectedClinics.findIndex((e) => e === \"STD\") >= 0 &&\r\n          getSTDClinicBar(count)}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const minHeight = 1;\r\n  const getPCRClinicBar = (count) => {\r\n    let width = (count / MAX_BOOKING_COUNT_PCR) * 100 + 5;\r\n    if (width > 100) width = 100;\r\n\r\n    if (width < 20) width = 20;\r\n\r\n    if (count === 0) {\r\n      width = minHeight;\r\n    }\r\n\r\n    const percent = 100 - width;\r\n\r\n    return (\r\n      <div className={classes.PCRGauge}>\r\n        <div\r\n          style={{\r\n            padding: \"0\",\r\n            margin: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: CalendarColors.PCR_COLOR,\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              bottom: \"0px\",\r\n              color: \"#fff\",\r\n              fontWeight: \"500\",\r\n              fontSize:\"0.8rem\",\r\n              textAlign: \"center\",\r\n              width: \"100%\",\r\n            }}\r\n          >\r\n            {count > 0 && count}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: `${percent}%`,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getGynaeClinicBar = (count) => {\r\n    let width = (count / MAX_BOOKING_COUNT_GYNAE) * 100 + 5;\r\n    if (width > 100) width = 100;\r\n\r\n    if (width < 20) width = 20;\r\n\r\n    if (count === 0) {\r\n      width = minHeight;\r\n    }\r\n\r\n    const percent = 100 - width;\r\n\r\n    return (\r\n      <div className={classes.GynaeGauge}>\r\n        <div\r\n          style={{\r\n            padding: \"0\",\r\n            margin: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: CalendarColors.GYNAE_COLOR,\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          <div\r\n             style={{\r\n                position: \"absolute\",\r\n                bottom: \"0px\",\r\n                color: \"#fff\",\r\n                fontWeight: \"500\",\r\n                fontSize:\"0.8rem\",\r\n                textAlign: \"center\",\r\n                width: \"100%\",\r\n              }}\r\n          >\r\n            {count > 0 && count}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: `${percent}%`,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getGPClinicBar = (count) => {\r\n    let width = (count / MAX_BOOKING_COUNT_GP) * 100 + 5;\r\n    if (width > 100) width = 100;\r\n\r\n    if (width < 20) width = 20;\r\n\r\n    if (count === 0) {\r\n      width = minHeight;\r\n    }\r\n\r\n    const percent = 100 - width;\r\n\r\n    return (\r\n      <div className={classes.GPGauge}>\r\n        <div\r\n          style={{\r\n            padding: \"0\",\r\n            margin: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: CalendarColors.GP_COLOR,\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          <div\r\n             style={{\r\n                position: \"absolute\",\r\n                bottom: \"0px\",\r\n                color: \"#fff\",\r\n                fontWeight: \"500\",\r\n                fontSize:\"0.8rem\",\r\n                textAlign: \"center\",\r\n                width: \"100%\",\r\n              }}\r\n          >\r\n            {count > 0 && count}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: `${percent}%`,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getSTDClinicBar = (count) => {\r\n    let width = (count / MAX_BOOKING_COUNT_STD) * 100 + 5;\r\n    if (width > 100) width = 100;\r\n\r\n    if (width < 20) width = 20;\r\n\r\n    if (count === 0) {\r\n      width = minHeight;\r\n    }\r\n\r\n    const percent = 100 - width;\r\n\r\n    return (\r\n      <div className={classes.STDGauge}>\r\n        <div\r\n          style={{\r\n            padding: \"0\",\r\n            margin: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: CalendarColors.STD_COLOR,\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          <div\r\n             style={{\r\n                position: \"absolute\",\r\n                bottom: \"0px\",\r\n                color: \"#fff\",\r\n                fontWeight: \"500\",\r\n                fontSize:\"0.8rem\",\r\n                textAlign: \"center\",\r\n                width: \"100%\",\r\n              }}\r\n          >\r\n            {count > 0 && count}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: `${percent}%`,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  const getBookingsCountLabel = (_bookingsCount) => {\r\n    if (!_bookingsCount) {\r\n      return (\r\n        <div className={classes.LoadingProgress}>\r\n          <CircularProgress disableShrink />\r\n        </div>\r\n      );\r\n    } else if (_bookingsCount !== -2) {\r\n      return (\r\n        <div className={classes.DayLabelContainer}>\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"flex-start\"\r\n            alignItems=\"flex-end\"\r\n            style={{ width: \"100%\", height: \"100%\" }}\r\n          >\r\n            {_bookingsCount.map((item) => (\r\n              <Grid item>{getClinicBar(item.clinic, item.count)}</Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const getBookingsCountGauge = (_bookingsCount) => {\r\n    if (_bookingsCount > 0) {\r\n      let percent = (_bookingsCount / MAX_BOOKING_COUNT_PCR) * 100;\r\n      if (percent > 100) {\r\n        percent = 100;\r\n      }\r\n\r\n      percent = 100 - percent;\r\n\r\n      return (\r\n        <div className={classes.BookingCountGauge}>\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              backgroundColor: \"#3f51b5\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                margin: \"0\",\r\n                width: \"100%\",\r\n                height: `${percent}%`,\r\n                backgroundColor: \"#fafafa\",\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className={classes.Container}\r\n        onClick={(event) => dayClicked(event, cellDate)}\r\n      >\r\n        {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n        {getBookingsCountLabel(bookingsCount)}\r\n\r\n        {/* {getBookingsCountGauge(bookingsCount)} */}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nMonthViewCell.propTypes = {\r\n  key: PropTypes.string.isRequired,\r\n  cellIndex: PropTypes.number.isRequired,\r\n  month: PropTypes.number.isRequired,\r\n  daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n  dayClicked: PropTypes.func,\r\n};\r\n\r\nexport default MonthViewCell;\r\n","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nimport { Grid } from '@material-ui/core';\r\nimport { CalendarColors } from './colors';\r\n\r\nconst MAX_BOOKING_COUNT_PCR = 10;\r\nconst MAX_BOOKING_COUNT_GP = 1;\r\nconst MAX_BOOKING_COUNT_STD = 1;\r\nconst MAX_BOOKING_COUNT_GYNAE = 1;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n    PCRGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"15px\",\r\n        left: \"0\",\r\n        width: \"20px\",\r\n        height: \"90%\",\r\n      },\r\n    \r\n      GynaeGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"15px\",\r\n        left: \"21px\",\r\n        width: \"20px\",\r\n        height: \"90%\",\r\n      },\r\n    \r\n      GPGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"15px\",\r\n        left: \"42px\",\r\n        width: \"20px\",\r\n        height: \"90%\",\r\n      },\r\n    \r\n      STDGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"15px\",\r\n        left: \"63px\",\r\n        width: \"20px\",\r\n        height: \"90%\",\r\n      },\r\n    \r\n\r\n    DayLabelContainer:{\r\n        position: \"absolute\",\r\n        top: \"15%\",\r\n        left:\"5px\",\r\n        width:\"100%\",\r\n        height:\"100%\"   \r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 1;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(null);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(null);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const minHeight = 1;\r\n    const getPCRClinicBar = (count) => {\r\n      let width = (count / MAX_BOOKING_COUNT_PCR) * 100 + 5;\r\n      if (width > 100) width = 100;\r\n  \r\n      if (width < 30) width = 30;\r\n  \r\n      if (count === 0) {\r\n        width = minHeight;\r\n      }\r\n  \r\n      const percent = 100 - width;\r\n  \r\n      return (\r\n        <div className={classes.PCRGauge}>\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              backgroundColor: CalendarColors.PCR_COLOR,\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                bottom: \"0px\",\r\n                color: \"#fff\",\r\n                fontWeight: \"500\",\r\n                fontSize:\"0.8rem\",\r\n                textAlign: \"center\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              {count > 0 && count}\r\n            </div>\r\n  \r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                margin: \"0\",\r\n                width: \"100%\",\r\n                height: `${percent}%`,\r\n                backgroundColor: \"#fafafa\",\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n  \r\n    const getGynaeClinicBar = (count) => {\r\n      let width = (count / MAX_BOOKING_COUNT_GYNAE) * 100 + 5;\r\n      if (width > 100) width = 100;\r\n  \r\n      if (width < 30) width = 30;\r\n  \r\n      if (count === 0) {\r\n        width = minHeight;\r\n      }\r\n  \r\n      const percent = 100 - width;\r\n  \r\n      return (\r\n        <div className={classes.GynaeGauge}>\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              backgroundColor: CalendarColors.GYNAE_COLOR,\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <div\r\n               style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"0px\",\r\n                  color: \"#fff\",\r\n                  fontWeight: \"500\",\r\n                  fontSize:\"0.8rem\",\r\n                  textAlign: \"center\",\r\n                  width: \"100%\",\r\n                }}\r\n            >\r\n              {count > 0 && count}\r\n            </div>\r\n  \r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                margin: \"0\",\r\n                width: \"100%\",\r\n                height: `${percent}%`,\r\n                backgroundColor: \"#fafafa\",\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n  \r\n    const getGPClinicBar = (count) => {\r\n      let width = (count / MAX_BOOKING_COUNT_GP) * 100 + 5;\r\n      if (width > 100) width = 100;\r\n  \r\n      if (width < 30) width = 30;\r\n  \r\n      if (count === 0) {\r\n        width = minHeight;\r\n      }\r\n  \r\n      const percent = 100 - width;\r\n  \r\n      return (\r\n        <div className={classes.GPGauge}>\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              backgroundColor: CalendarColors.GP_COLOR,\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <div\r\n               style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"0px\",\r\n                  color: \"#fff\",\r\n                  fontWeight: \"500\",\r\n                  fontSize:\"0.8rem\",\r\n                  textAlign: \"center\",\r\n                  width: \"100%\",\r\n                }}\r\n            >\r\n              {count > 0 && count}\r\n            </div>\r\n  \r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                margin: \"0\",\r\n                width: \"100%\",\r\n                height: `${percent}%`,\r\n                backgroundColor: \"#fafafa\",\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n  \r\n    const getSTDClinicBar = (count) => {\r\n      let width = (count / MAX_BOOKING_COUNT_STD) * 100 + 5;\r\n      if (width > 100) width = 100;\r\n  \r\n      if (width < 30) width = 30;\r\n  \r\n      if (count === 0) {\r\n        width = minHeight;\r\n      }\r\n  \r\n      const percent = 100 - width;\r\n  \r\n      return (\r\n        <div className={classes.STDGauge}>\r\n          <div\r\n            style={{\r\n              padding: \"0\",\r\n              margin: \"0\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              backgroundColor: CalendarColors.STD_COLOR,\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <div\r\n               style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"0px\",\r\n                  color: \"#fff\",\r\n                  fontWeight: \"500\",\r\n                  fontSize:\"0.8rem\",\r\n                  textAlign: \"center\",\r\n                  width: \"100%\",\r\n                }}\r\n            >\r\n              {count > 0 && count}\r\n            </div>\r\n  \r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                margin: \"0\",\r\n                width: \"100%\",\r\n                height: `${percent}%`,\r\n                backgroundColor: \"#fafafa\",\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n  \r\n  \r\n    const getBookingsCountLabel = (_bookingsCount) => {\r\n      if (!_bookingsCount) {\r\n        return (\r\n          <div className={classes.LoadingProgress}>\r\n            <CircularProgress disableShrink />\r\n          </div>\r\n        );\r\n      } else if (_bookingsCount !== -2) {\r\n        return (\r\n          <div className={classes.DayLabelContainer}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"flex-end\"\r\n              style={{ width: \"100%\", height: \"100%\" }}\r\n            >\r\n              {_bookingsCount.map((item) => (\r\n                <Grid item>{getClinicBar(item.clinic, item.count)}</Grid>\r\n              ))}\r\n            </Grid>\r\n          </div>\r\n        );\r\n      }\r\n    };\r\n\r\n    const getClinicBar = (clinic, count) => {\r\n        return (\r\n          <React.Fragment>\r\n            {clinic === \"pcr\" &&\r\n              state.selectedClinics.findIndex((e) => e === \"PCR\") >= 0 &&\r\n              getPCRClinicBar(count)}\r\n            {clinic === \"gynae\" &&\r\n              state.selectedClinics.findIndex((e) => e === \"GYNAE\") >= 0 &&\r\n              getGynaeClinicBar(count)}\r\n            {clinic === \"gp\" &&\r\n              state.selectedClinics.findIndex((e) => e === \"GP\") >= 0 &&\r\n              getGPClinicBar(count)}\r\n            {clinic === \"std\" &&\r\n              state.selectedClinics.findIndex((e) => e === \"STD\") >= 0 &&\r\n              getSTDClinicBar(count)}\r\n          </React.Fragment>\r\n        );\r\n      };\r\n  \r\n  \r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container} onClick={(event => dayClicked(event,cellDate))} >\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {/* {getBookingsCountGauge(bookingsCount)} */}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Link,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport { corporates } from \"./Corporates\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { validate } from \"email-validator\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport { CalendarColors } from \"./calendar-admin/colors\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  CalendarIcon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  DateTimeLabel: {\r\n    fontWeight: \"500\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 5,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  PriceLabelPaid:{\r\n    color: theme.palette.primary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n  PriceLabelNotPaid:{\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: \"600\"\r\n  },\r\n\r\n  BoxDisabled: {\r\n    width : \"100%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n    borderColor: \"#ddd\",\r\n    cursor: \"not-allowed\",\r\n    color: \"#ddd\",\r\n    transition: \"all 0.2s ease\",\r\n  },\r\n\r\n  BoxGynae: {\r\n    width : \"100%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n    cursor: \"pointer\",\r\n    borderColor: CalendarColors.GYNAE_COLOR,\r\n    color: CalendarColors.GYNAE_COLOR,\r\n    transition: \"all 0.2s ease\",\r\n    \"&:hover\": {\r\n      backgroundColor: CalendarColors.GYNAE_COLOR,\r\n      color: \"#fff\"\r\n    }\r\n  \r\n  },\r\n\r\n  BoxGP: {\r\n    width : \"100%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n    cursor: \"pointer\",\r\n    borderColor: CalendarColors.GP_COLOR,\r\n    color: CalendarColors.GP_COLOR,\r\n    transition: \"all 0.2s ease\",\r\n    \"&:hover\": {\r\n      backgroundColor: CalendarColors.GP_COLOR,\r\n      color: \"#fff\"\r\n    }\r\n  },\r\n\r\n  BoxSTD: {\r\n    width : \"100%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n    cursor: \"pointer\",\r\n    borderColor: CalendarColors.STD_COLOR,\r\n    color: CalendarColors.STD_COLOR,\r\n    transition: \"all 0.2s ease\",\r\n    \"&:hover\": {\r\n      backgroundColor: CalendarColors.STD_COLOR,\r\n      color: \"#fff\"\r\n    }\r\n  },\r\n\r\n\r\n\r\n}));\r\n\r\nconst Packages = [\r\n  { packageName: \"Consultation with Consultant Gynaecologist\" },\r\n  { packageName: `Coil Fitting/Coil Removal` },\r\n  { packageName: `Well Woman Check` },\r\n  { packageName: `Sexual Health Screening` },\r\n  { packageName: `Pre-pregnancy/Fertility check` },\r\n  { packageName: `Gynaecological Ultrasound` },\r\n  { packageName: `HPV Vaccination` },\r\n  { packageName: `Cervical / Pap Smear` },\r\n  { packageName: `HPV Treatment / Wart Cryo-Therapy` },\r\n];\r\n\r\nfunction NumberFormatCustom(props) {\r\n  const { inputRef, onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumberFormat\r\n      {...other}\r\n      getInputRef={inputRef}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      thousandSeparator\r\n      isNumericString\r\n      prefix=\"\"\r\n    />\r\n  );\r\n}\r\n\r\nNumberFormatCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function NewBookingDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const handleClose = () => {    \r\n    props.handleClose();\r\n  };\r\n\r\n\r\n  const timeDisabled = () =>\r\n  {\r\n    return props.time.indexOf(':15') > 0 || props.time.indexOf(':45') > 0 || props.time.indexOf('09') >= 0 \r\n  }\r\n\r\n  const clinicClicked = (clinic) =>\r\n  {\r\n    props.clinicClicked(clinic)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.date && props.time && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"xs\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <AddIcon style={{ color: \"#f50057\", fontSize: \"3rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"10px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    ADD New Booking{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"310px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"row\"\r\n                  justify=\"stretch\"\r\n                  spacing={2}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Grid item xs={12}>\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"center\"\r\n                      alignItems=\"center\"\r\n                      spacing={1}\r\n                    >\r\n                      <Grid item>\r\n                        <DateRangeIcon className={classes.CalendarIcon} />\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <span className={classes.DateTimeLabel}>\r\n                          {props.date} , {props.time}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n\r\n                  <Grid item xs={12}>\r\n                    <div className={timeDisabled() ? classes.BoxDisabled : classes.BoxGynae} onClick={() => !timeDisabled() ? clinicClicked(\"gynae\") : null}>\r\n                      GYNAE\r\n                    </div>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <div className={timeDisabled() ? classes.BoxDisabled : classes.BoxGP}  onClick={() => !timeDisabled() ? clinicClicked(\"gp\") : null}>\r\n                      GP\r\n                    </div>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <div className={classes.BoxSTD} onClick={() => clinicClicked(\"std\")}>\r\n                      STD\r\n                    </div>\r\n                  </Grid>\r\n\r\n                </Grid>\r\n\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    bottom: \"20px\",\r\n                    right: \"20px\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    direction=\"row\"\r\n                    justify=\"flex-end\"\r\n                    alignItems=\"center\"\r\n                    spacing={1}\r\n                  >\r\n                    <Grid item>\r\n                      <Button\r\n                        onClick={handleClose}\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        close\r\n                      </Button>\r\n                    </Grid>\r\n                   \r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport dateformat from \"dateformat\";\r\nimport BookService from \"../services/BookService\";\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport GlobalState from \"../../GlobalState\";\r\nimport BookingDialog from \"../BookingDialog\";\r\nimport NewBookingDialog from \"../NewBookingDialog\";\r\nimport { CalendarColors } from \"./colors\";\r\nimport clsx from \"clsx\";\r\n\r\nimport NewGPDialog from \"../../GP/NewBookingDialog\";\r\nimport NewGynaeDialog from \"../../Gynae/NewBookingDialog\";\r\nimport NewSTDDialog from \"../../STD/NewBookingDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  Container: {\r\n    width: \"100%\",\r\n    height: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fff\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    justifyItems: \"flex-start\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ContainerPast: {\r\n    width: \"100%\",\r\n    paddingTop: \"50px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n\r\n  DayLabel: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#555\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  DayLabelDisabled: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"5px\",\r\n    color: \"#ddd\",\r\n    fontSize: \"1rem\",\r\n  },\r\n\r\n  LoadingProgress: {\r\n    position: \"absolute\",\r\n    top: \"10%\",\r\n    left: \"40%\",\r\n  },\r\n\r\n  BookingCountGauge: {\r\n    position: \"absolute\",\r\n    bottom: \"5%\",\r\n    left: \"8%\",\r\n    width: \"85%\",\r\n    height: \"8%\",\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"7px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    // border: \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#3f51b5\",\r\n      color: \"#ebedf7\",\r\n    },\r\n  },\r\n\r\n  bookingBoxNew: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"10px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    border: \"1px solid #ddd\",\r\n    color: \"#ccc\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#fff\",\r\n\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    transition: \"all 0.5s ease\",\r\n    borderRadius: \"4px\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#fff\",\r\n      color: theme.palette.secondary.main,\r\n      borderColor: theme.palette.secondary.main,\r\n    },\r\n  },\r\n\r\n  bookingBoxSampleTaken: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"7px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#0059b3\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n\r\n  bookingBoxPositive: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"7px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#d40b0b\",\r\n    color: \"#fff2f2\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#bf0000\",\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n\r\n  bookingBoxReportSent: {\r\n    display: \"flex\",\r\n    marginRight: \"10px\",\r\n    marginTop: \"5px\",\r\n    padding: \"7px\",\r\n    maxWidth: \"150px\",\r\n    overflowX: \"hidden\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#009900\",\r\n    color: \"#eee\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n\r\n    \"&:hover\": {\r\n      background: \"#006e00\",\r\n      color: \"#fafafa\",\r\n    },\r\n  },\r\n\r\n  BookingBorderPCR: {\r\n    border: \"4px solid\",\r\n    borderColor: CalendarColors.PCR_COLOR,\r\n  },\r\n\r\n  BookingBorderGynae: {\r\n    border: \"4px solid\",\r\n    borderColor: CalendarColors.GYNAE_COLOR,\r\n  },\r\n\r\n  BookingBorderGP: {\r\n    border: \"4px solid\",\r\n    borderColor: CalendarColors.GP_COLOR,\r\n  },\r\n\r\n  BookingBorderSTD: {\r\n    border: \"4px solid\",\r\n    borderColor: CalendarColors.STD_COLOR,\r\n  },\r\n}));\r\n\r\nconst DayViewCell = ({ key, date, time }) => {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const [bookings, setBookings] = React.useState(null);\r\n  const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [refresh, setRefresh] = React.useState(true);\r\n\r\n  const [isPast, setIsPast] = React.useState(false);\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n  const [openDialogAddNew, setOpenDialogAddNew] = React.useState(false);\r\n\r\n  const [openDialogGP, setOpenDialogGP] = React.useState(false);\r\n  const [openDialogGynae, setOpenDialogGynae] = React.useState(false);\r\n  const [openDialogSTD, setOpenDialogSTD] = React.useState(false);\r\n\r\n  const handleCloseDialogGP = () => {\r\n    setOpenDialogGP(false);\r\n    setOpenDialogAddNew(false)\r\n  };\r\n\r\n  const handleCloseDialogGynae = () => {\r\n    setOpenDialogGynae(false);\r\n    setOpenDialogAddNew(false)\r\n  };\r\n\r\n  const handleCloseDialogSTD = () => {\r\n    setOpenDialogSTD(false);\r\n    setOpenDialogAddNew(false)\r\n  };\r\n\r\n  useEffect(() => {\r\n    const todayStr = dateformat(new Date(), \"yyyy-mm-dd\");\r\n    setIsPast(date < todayStr);\r\n  }, [date]);\r\n\r\n  useEffect(() => {\r\n    if (bookings) {\r\n      if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0) {\r\n        const search = state.dayViewCalFilter.trim().toUpperCase();\r\n        setFilteredBookings(\r\n          bookings.filter(\r\n            (booking) =>\r\n              booking.fullname?.toLowerCase().indexOf(search.toLowerCase()) >=\r\n                0 ||\r\n              booking.forename?.toLowerCase().indexOf(search.toLowerCase()) >=\r\n                0 ||\r\n              booking.surname?.toLowerCase().indexOf(search.toLowerCase()) >= 0\r\n          )\r\n        );\r\n      } else {\r\n        setFilteredBookings([...bookings]);\r\n      }\r\n    }\r\n  }, [state.dayViewCalFilter, bookings]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!date || date.length <= 0 || !time || time.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      // if (isPast)\r\n      // {\r\n      //     setBookings([]);\r\n      //     return;\r\n      // }\r\n\r\n      setBookings(null);\r\n\r\n      var res = state.AdminCalendarCache?.find(\r\n        (record) =>\r\n          record.method === \"getBookingsByDateStrandTime\" &&\r\n          record.query === `${date}${time}`\r\n      )?.res;\r\n      if (!res || openDialog || openDialogAddNew) {\r\n        res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n        setState((state) => ({\r\n          ...state,\r\n          AdminCalendarCache: [\r\n            ...state.AdminCalendarCache,\r\n            {\r\n              method: \"getBookingsByDateStrandTime\",\r\n              query: `${date}${time}`,\r\n              res: res,\r\n            },\r\n          ],\r\n        }));\r\n      }\r\n\r\n      if (res.data.status === \"OK\") {\r\n        setBookings(res.data.bookings);\r\n      }\r\n    };\r\n\r\n    if (openDialog || openDialogAddNew) {\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStrandTime\" &&\r\n              record.query === `${date}${time}`\r\n            )\r\n        ),\r\n      }));\r\n      setState((state) => ({\r\n        ...state,\r\n        AdminCalendarCache: state.AdminCalendarCache.filter(\r\n          (record) =>\r\n            !(\r\n              record.method === \"getBookingsCountByDateStr\" &&\r\n              record.query === date\r\n            )\r\n        ),\r\n      }));\r\n    }\r\n\r\n    fetchData();\r\n  }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n  const bookingCliked = (event, booking) => {\r\n    setSelectedBooking(booking);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const getBookingClass = (status) => {\r\n    switch (status) {\r\n      case \"sample_taken\":\r\n      case \"patient_attended\":\r\n        return classes.bookingBoxSampleTaken;\r\n      case \"positive\":\r\n        return classes.bookingBoxPositive;\r\n      case \"report_sent\":\r\n      case \"report_cert_sent\":\r\n        return classes.bookingBoxReportSent;\r\n\r\n      default:\r\n        return classes.bookingBox;\r\n    }\r\n  };\r\n\r\n  const addNewBookingClicked = () => {\r\n    setOpenDialogAddNew(true);\r\n  };\r\n\r\n  const getBookingBorderClass = (clinic) => {\r\n    switch (clinic) {\r\n      case \"pcr\":\r\n        return classes.BookingBorderPCR;\r\n      case \"gynae\":\r\n        return classes.BookingBorderGynae;\r\n      case \"gp\":\r\n        return classes.BookingBorderGP;\r\n      case \"std\":\r\n        return classes.BookingBorderSTD;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getBookingsBox = (_bookings) => {\r\n    if (_bookings === null) {\r\n      return (\r\n        <div className={classes.LoadingProgress}>\r\n          <CircularProgress disableShrink />\r\n        </div>\r\n      );\r\n    } else if (_bookings.length >= 0) {\r\n      return (\r\n        <React.Fragment>\r\n          {_bookings.map(\r\n            (booking) =>\r\n              state.selectedClinics.findIndex(\r\n                (e) => e === booking.clinic.toUpperCase()\r\n              ) >= 0 && (\r\n                <div\r\n                  style={booking.tr ? { borderTop: \"5px solid #d00fd6\" } : {}}\r\n                  className={clsx(\r\n                    getBookingClass(booking.status),\r\n                    getBookingBorderClass(booking.clinic)\r\n                  )}\r\n                  onClick={(event) => bookingCliked(event, booking)}\r\n                >\r\n                  {`${\r\n                    booking.fullname\r\n                      ? booking.fullname\r\n                      : `${booking.forename} ${booking.surname}`\r\n                  }`.substring(0, 15)}\r\n                </div>\r\n              )\r\n          )}\r\n\r\n          <div className={classes.bookingBoxNew} onClick={addNewBookingClicked}>\r\n            {\" \"}\r\n            + Add New Booking\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  const handleCloseDialogAddNew = () => {\r\n    setOpenDialogAddNew(false);\r\n  };\r\n\r\n  const handleClinicClicked = (clinic) => {\r\n    switch (clinic) {\r\n      case \"gynae\":\r\n        setOpenDialogGynae(true);\r\n        break;\r\n      case \"gp\":\r\n        setOpenDialogGP(true);\r\n        break;\r\n      case \"std\":\r\n        setOpenDialogSTD(true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Container}>\r\n        {getBookingsBox(filteredBookings)}\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n      />\r\n\r\n      <NewBookingDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogAddNew}\r\n        handleClose={handleCloseDialogAddNew}\r\n        clinicClicked={handleClinicClicked}\r\n      />\r\n\r\n      <NewGPDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogGP}\r\n        handleClose={handleCloseDialogGP}\r\n      />\r\n\r\n      <NewSTDDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogSTD}\r\n        handleClose={handleCloseDialogSTD}\r\n      />\r\n\r\n      <NewGynaeDialog\r\n        date={date}\r\n        time={time}\r\n        open={openDialogGynae}\r\n        handleClose={handleCloseDialogGynae}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nDayViewCell.propTypes = {\r\n  key: PropTypes.string.isRequired,\r\n  date: PropTypes.string.isRequired,\r\n  time: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default DayViewCell;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\n\r\n\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { CalendarColors } from './colors';\r\n\r\nconst Clinics = [\r\n    {clinic: \"PCR\", color: CalendarColors.PCR_COLOR},\r\n    {clinic: \"GYNAE\", color: CalendarColors.GYNAE_COLOR},\r\n    {clinic: \"GP\", color: CalendarColors.GP_COLOR},\r\n    {clinic: \"STD\", color: CalendarColors.STD_COLOR}\r\n]\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n        setState(state => ({...state, selectedClinics : [\"PCR\", \"GP\", \"GYNAE\", \"STD\"]}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    const clinicClicked = (clinic) =>\r\n    {\r\n        if (state.selectedClinics?.findIndex(e => e === clinic) >= 0 )\r\n        {\r\n            setState(state => ({...state, selectedClinics :state.selectedClinics.filter(e => e !== clinic)}));\r\n        }else\r\n        {\r\n            setState(state => ({...state, selectedClinics : [...state.selectedClinics, clinic]}));\r\n        }\r\n    }\r\n\r\n    const getClinicGuide = () =>\r\n    {\r\n        return (\r\n            <div>\r\n               <Grid container spacing={1}>\r\n                   {Clinics.map( item => (\r\n                       <Grid item>\r\n                           <div \r\n                                style={state.selectedClinics?.findIndex(e => e === item.clinic) >= 0 ? {border:`1px solid ${item.color}`, backgroundColor:`${item.color}`, color:\"#fff\" ,fontSize:\"0.95rem\", fontWeight:\"500\", padding:\"5px\", width:\"70px\", textAlign:\"center\", cursor:\"pointer\"}   : {border:`1px solid ${item.color}`, color:`${item.color}`, fontSize:\"0.95rem\", fontWeight:\"500\", padding:\"5px\", width:\"70px\", textAlign:\"center\", cursor:\"pointer\"}}\r\n                                onClick= {() => clinicClicked(item.clinic)}   \r\n                                > \r\n                               {item.clinic}\r\n                           </div>\r\n                        </Grid>\r\n                   ))\r\n                   }\r\n               </Grid>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            {getClinicGuide()}\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import DashboardIcon from \"@material-ui/icons/Dashboard\";\r\nimport NewReleasesIcon from \"@material-ui/icons/NewReleases\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\nimport LiveTvIcon from \"@material-ui/icons/LiveTv\";\r\nimport PlaylistAddCheckIcon from \"@material-ui/icons/PlaylistAddCheck\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\r\nimport AirplanemodeActiveIcon from \"@material-ui/icons/AirplanemodeActive\";\r\n/// PCR ------------------\r\nimport FindByRef from \"./PCR/FindByRef\";\r\nimport BookingTable from \"./PCR/BookingTable\";\r\nimport DashboardPreview from \"./PCR/DashboardPreview\";\r\nimport UnmatchedRecords from \"./PCR/UnmatchedRecords\";\r\n// import CalendarView from \"./PCR/calendar/CalendarView\";\r\nimport PCRCalendarView from \"./PCR/calendar-admin/CalendarView\";\r\n//-----------------------\r\n\r\n/// Gynae -------------------\r\nimport GynaeBookingTable from \"./Gynae/BookingTable\";\r\nimport GynaeDashboardPreview from \"./Gynae/DashboardPreview\";\r\nimport GynaeFindByRef from \"./Gynae/FindByRef\";\r\nimport GynaeCalendarView from \"./Gynae/calendar-admin/CalendarView\";\r\n//----------------------------\r\n\r\n/// GP -------------------\r\nimport GPBookingTable from \"./GP/BookingTable\";\r\nimport GPDashboardPreview from \"./GP/DashboardPreview\";\r\nimport GPFindByRef from \"./GP/FindByRef\";\r\nimport GPCalendarView from \"./GP/calendar-admin/CalendarView\";\r\n//----------------------------\r\n\r\n/// GP -------------------\r\nimport STDBookingTable from \"./STD/BookingTable\";\r\nimport STDDashboardPreview from \"./STD/DashboardPreview\";\r\nimport STDFindByRef from \"./STD/FindByRef\";\r\nimport STDCalendarView from \"./STD/calendar-admin/CalendarView\";\r\n//----------------------------\r\n\r\n// Admin ----------------\r\nimport AdminDashBoardPreview from \"./DashboardPreview\";\r\nimport AdminFindByRef from \"./Admin/FindByRef\";\r\nimport AdminBookingTable from \"./Admin/BookingTable\";\r\nimport AdminCalendarView from \"./Admin/calendar-admin/CalendarView\";\r\n\r\n//---------------\r\n\r\nexport const MenuList_Admin = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `oldBookings`,\r\n    title: `Old Bookings`,\r\n    icon: <HistoryIcon />,\r\n  },\r\n  {\r\n    index: 4,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 5,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n\r\n  {\r\n    index: 7,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n\r\n  { index: 8, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const MenuList_Gynae = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `oldBookings`,\r\n    title: `Old Bookings`,\r\n    icon: <HistoryIcon />,\r\n  },\r\n  {\r\n    index: 4,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 5,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n  {\r\n    index: 7,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n  { index: 8, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const MenuList_GP = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `oldBookings`,\r\n    title: `Old Bookings`,\r\n    icon: <HistoryIcon />,\r\n  },\r\n  {\r\n    index: 4,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 5,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n  {\r\n    index: 7,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n  { index: 8, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const MenuList_STD = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `oldBookings`,\r\n    title: `Old Bookings`,\r\n    icon: <HistoryIcon />,\r\n  },\r\n  {\r\n    index: 4,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 5,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n  {\r\n    index: 7,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n  { index: 8, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const MenuList_PCR = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `liveBookings`,\r\n    title: `Live Bookings`,\r\n    icon: <LiveTvIcon />,\r\n  },\r\n  { index: 4, id: `oldBookings`, title: `Old Bookings`, icon: <HistoryIcon /> },\r\n  {\r\n    index: 5,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 7,\r\n    id: `completedBookings`,\r\n    title: `Completed Bookings`,\r\n    icon: <PlaylistAddCheckIcon />,\r\n  },\r\n  {\r\n    index: 8,\r\n    id: `positiveBookings`,\r\n    title: `Positive Results`,\r\n    icon: <AddCircleOutlineIcon />,\r\n  },\r\n  {\r\n    index: 9,\r\n    id: `latebookings`,\r\n    title: `40 Hours Late`,\r\n    icon: <HourglassEmptyIcon />,\r\n  },\r\n  {\r\n    index: 10,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n  {\r\n    index: 11,\r\n    id: `trBookings`,\r\n    title: `TR Bookings`,\r\n    icon: <AirplanemodeActiveIcon />,\r\n  },\r\n  {\r\n    index: 12,\r\n    id: `unmatchedRecords`,\r\n    title: `Unmatched Records`,\r\n    icon: <WarningIcon />,\r\n  },\r\n  {\r\n    index: 13,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n  // {\r\n  //   index: 14,\r\n  //   id: `adminCalendarView`,\r\n  //   title: `Admin Calendar`,\r\n  //   icon: <EventNoteIcon />,\r\n  // },\r\n  { index: 15, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const getMenuContent = (role, index) => {\r\n  if (role === \"pcr\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <DashboardPreview />;\r\n      case 1:\r\n        return <BookingTable date=\"recent\" />;\r\n      case 2:\r\n        return <BookingTable date=\"today\" />;\r\n      case 3:\r\n        return <BookingTable date=\"live\" />;\r\n      case 4:\r\n        return <BookingTable date=\"old\" />;\r\n      case 5:\r\n        return <BookingTable date=\"future\" />;\r\n      case 6:\r\n        return <BookingTable date=\"all\" />;\r\n      case 7:\r\n        return <BookingTable date=\"completed\" />;\r\n      case 8:\r\n        return <BookingTable date=\"positive\" />;\r\n      case 9:\r\n        return <BookingTable date=\"late\" />;\r\n      case 10:\r\n        return <BookingTable date=\"deleted\" />;\r\n      case 11:\r\n        return <BookingTable date=\"tr\" />;\r\n      case 12:\r\n        return <UnmatchedRecords />;\r\n      case 13:\r\n        //   return <CalendarView />;\r\n        // case 14:\r\n        return <PCRCalendarView />;\r\n      case 15:\r\n        return <FindByRef />;\r\n\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"gynae\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <GynaeDashboardPreview />;\r\n      case 1:\r\n        return <GynaeBookingTable date=\"recent\" />;\r\n      case 2:\r\n        return <GynaeBookingTable date=\"today\" />;\r\n      case 3:\r\n        return <GynaeBookingTable date=\"old\" />;\r\n      case 4:\r\n        return <GynaeBookingTable date=\"future\" />;\r\n      case 5:\r\n        return <GynaeBookingTable date=\"all\" />;\r\n      case 6:\r\n        return <GynaeBookingTable date=\"deleted\" />;\r\n      case 7:\r\n        return <GynaeCalendarView />;\r\n      case 8:\r\n        return <GynaeFindByRef />;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"gp\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <GPDashboardPreview />;\r\n      case 1:\r\n        return <GPBookingTable date=\"recent\" />;\r\n      case 2:\r\n        return <GPBookingTable date=\"today\" />;\r\n      case 3:\r\n        return <GPBookingTable date=\"old\" />;\r\n      case 4:\r\n        return <GPBookingTable date=\"future\" />;\r\n      case 5:\r\n        return <GPBookingTable date=\"all\" />;\r\n      case 6:\r\n        return <GPBookingTable date=\"deleted\" />;\r\n      case 7:\r\n        return <GPCalendarView />;\r\n      case 8:\r\n        return <GPFindByRef />;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"std\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <STDDashboardPreview />;\r\n      case 1:\r\n        return <STDBookingTable date=\"recent\" />;\r\n      case 2:\r\n        return <STDBookingTable date=\"today\" />;\r\n      case 3:\r\n        return <STDBookingTable date=\"old\" />;\r\n      case 4:\r\n        return <STDBookingTable date=\"future\" />;\r\n      case 5:\r\n        return <STDBookingTable date=\"all\" />;\r\n      case 6:\r\n        return <STDBookingTable date=\"deleted\" />;\r\n      case 7:\r\n        return <STDCalendarView />;\r\n      case 8:\r\n        return <STDFindByRef />;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"admin\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <AdminDashBoardPreview />;\r\n      case 1:\r\n        return <AdminBookingTable date=\"recent\" />;\r\n      case 2:\r\n        return <AdminBookingTable date=\"today\" />;\r\n      case 3:\r\n        return <AdminBookingTable date=\"old\" />;\r\n      case 4:\r\n        return <AdminBookingTable date=\"future\" />;\r\n      case 5:\r\n        return <AdminBookingTable date=\"all\" />;\r\n      case 6:\r\n        return <AdminBookingTable date=\"deleted\" />;\r\n      case 7:\r\n        return <AdminCalendarView />;\r\n      case 8:\r\n        return <AdminFindByRef />;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else {\r\n    return `Page Not Found!`;\r\n  }\r\n};\r\n\r\nexport const getMenuRole = (role) => {\r\n  switch (role) {\r\n    case \"admin\":\r\n      return MenuList_Admin;\r\n    case \"pcr\":\r\n      return MenuList_PCR;\r\n    case \"gynae\":\r\n      return MenuList_Gynae;\r\n    case \"gp\":\r\n      return MenuList_GP;\r\n    case \"std\":\r\n      return MenuList_STD;\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nexport const getMenuId = (role, index) => {\r\n  const MenuList = getMenuRole(role);\r\n  for (var i = 0; i < MenuList.length; i++) {\r\n    if (MenuList[i].index === index) {\r\n      return MenuList[i].id;\r\n    }\r\n  }\r\n\r\n  return `Page Not Found!`;\r\n};\r\n\r\nexport const getMenuIndex = (role, id) => {\r\n  const MenuList = getMenuRole(role);\r\n  for (var i = 0; i < MenuList.length; i++) {\r\n    if (MenuList[i].id === id) {\r\n      return MenuList[i].index;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n};\r\n","import React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport logoImage from \"./images/logo.png\"\r\n\r\nimport {\r\n  Grid,\r\n  AppBar,\r\n  Checkbox,\r\n  FormControl,\r\n  FormControlLabel,\r\n  InputAdornment,\r\n  InputLabel,\r\n  OutlinedInput,\r\n  Paper,\r\n  Backdrop,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { IconButton, Toolbar } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport Copyright from \"./CopyRight\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserService from \"./services/UserService\";\r\nimport { getMenuId } from \"./MenuList\";\r\n\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { borderRadius } from \"@material-ui/system\";\r\nimport { setRole } from \"./Role\";\r\nimport { getGlobalPath } from \"./GlobalPath\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: \"100vh\",\r\n  },\r\n  image: {\r\n    backgroundImage: \"url(/images/bg.jpg)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundColor:\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[50]\r\n        : theme.palette.grey[900],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  paper: {\r\n    // margin: theme.spacing(15, 2),\r\n    padding: theme.spacing(4,4),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    position: \"relative\"\r\n    // border: `2px solid ${theme.palette.primary.main}`,\r\n    // borderRadius: \"8px\"\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n    color: \"#f5f5f5\",\r\n  },\r\n\r\n  margin: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n\r\n  alert: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  pageBg:{\r\n    paddingTop: theme.spacing(15),\r\n   \r\n    background: \"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)\",\r\n    height: \"100vh\",\r\n    margin: 0,\r\n    padding:0,\r\n  },\r\n\r\n  appbarCenter: {\r\n    position: \"absolute\",\r\n    // width: \"260px\",\r\n    top: \"-40px\",\r\n    right: \"0\",\r\n    marginLeft: \"-145px\",\r\n    alignItems: \"center\",\r\n    justify: \"center\",\r\n    display: \"flex\",\r\n    backgroundColor: \"#fff\",\r\n    padding: \"5px 20px 15px 20px\",\r\n    borderRadius: \"8px\"\r\n  },\r\n\r\n  logoImage: {\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  appbarTitle: {\r\n    color: \"#00a1c5\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    marginRight: \"15px\",\r\n  },\r\n\r\n  adminPanelLabel: {\r\n    color: theme.palette.primary.main, \r\n    marginBottom:\"20px\"\r\n  }\r\n\r\n\r\n\r\n\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const isMobile = useMediaQuery({ maxWidth: 1224 })\r\n\r\n\r\n  let history = useHistory();\r\n\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const [username, setUsername] = React.useState(\"\");\r\n\r\n  const [saveChecked, setSaveChecked] = React.useState(false);\r\n\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n\r\n  const [error, setError] = React.useState(null);\r\n  const [submiting, setSubmiting] = React.useState(false);\r\n\r\n  const signIn = () => {\r\n    setSubmiting(true);\r\n\r\n    UserService.signIn({\r\n      username: username,\r\n      password: password,\r\n    })\r\n      .then((res) => {\r\n        setSubmiting(false);\r\n        if (res.data.status === \"OK\") {\r\n          setError(null);\r\n          const token = res.data.token;\r\n          if (saveChecked) {\r\n            localStorage.setItem(\"medexadmin-auth-token\", token);\r\n          } else {\r\n            sessionStorage.setItem(\"medexadmin-auth-token\", token);\r\n          }\r\n\r\n          setState((state) => ({ ...state, signedIn: true }));\r\n          setRole(res.data.roles[0])\r\n          setState((state) => ({ ...state, currentMenuIndex: 0 }));\r\n          history.push(getGlobalPath(`/${getMenuId(res.data.roles[0], 0)}`));\r\n        } else if (res.data.status === \"FAILED\") {\r\n          setError(res.data.error);\r\n        } else {\r\n          setError(\"Sorry, something went wrong, please try again.\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setSubmiting(false);\r\n        console.error(err);\r\n        setError(\"Sorry, something went wrong, please try again.\");\r\n      });\r\n  };\r\n\r\n  const usernameChanged = (event) => {\r\n    setUsername(event.target.value);\r\n    setError(null);\r\n  };\r\n\r\n  const passwordChanged = (event) => {\r\n    setPassword(event.target.value);\r\n    setError(null);\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const saveCheckedChanged = (event) => {\r\n    setSaveChecked(event.target.checked);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.pageBg}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n\r\n        <Paper elevation={20}>\r\n          <div className={classes.paper}>\r\n            <div className={classes.appbarCenter}>\r\n              <span className={classes.appbarTitle}>\r\n                Medical Express Clinic\r\n              </span>\r\n\r\n              <img\r\n                className={classes.logoImage}\r\n                src={getGlobalPath(\"/images/logo.png\")}\r\n                alt=\"logo image\"\r\n              />\r\n            </div>\r\n\r\n            <Avatar className={classes.avatar}>\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n            <Typography\r\n              component=\"h1\"\r\n              variant=\"h6\"\r\n              className={classes.adminPanelLabel}\r\n            >\r\n              Admin Panel\r\n            </Typography>\r\n\r\n            {error && (\r\n              <div className={classes.alert}>\r\n                <Alert severity=\"error\">\r\n                  {\" \"}\r\n                  <div style={{ lineHeight: \"1.5rem\", textAlign: \"justify\" }}>\r\n                    {error}\r\n                  </div>\r\n                </Alert>\r\n              </div>\r\n            )}\r\n\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              name=\"email\"\r\n              autoComplete=\"username\"\r\n              value={username}\r\n              onChange={usernameChanged}\r\n              on\r\n              autoFocus\r\n            />\r\n            <FormControl\r\n              fullWidth\r\n              required\r\n              className={clsx(classes.margin, classes.textField)}\r\n              variant=\"outlined\"\r\n              onKeyPress={(event) => {\r\n                if (event.key === \"Enter\") {\r\n                  signIn();\r\n                }\r\n              }}\r\n            >\r\n              <InputLabel htmlFor=\"outlined-adornment-password\">\r\n                {\" \"}\r\n                Password{\" \"}\r\n              </InputLabel>\r\n              <OutlinedInput\r\n                id=\"outlined-adornment-password\"\r\n                name=\"outlined-adornment-password\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                value={password}\r\n                onChange={passwordChanged}\r\n                autoComplete=\"current-password\"\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      tabindex=\"-1\"\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={handleClickShowPassword}\r\n                      onMouseDown={handleMouseDownPassword}\r\n                    >\r\n                      {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n                labelWidth={100}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControlLabel\r\n              style={{ textAlign: \"left\", width: \"100%\" }}\r\n              control={\r\n                <Checkbox\r\n                  value=\"remember\"\r\n                  color=\"secondary\"\r\n                  checked={saveChecked}\r\n                  onChange={saveCheckedChanged}\r\n                />\r\n              }\r\n              label=\"Remember me\"\r\n            />\r\n            <Button\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={signIn}\r\n              className={classes.submit}\r\n            >\r\n              Sign In\r\n            </Button>\r\n          </div>\r\n        </Paper>\r\n\r\n        <Backdrop className={classes.backdrop} open={submiting}>\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n            spacing={2}\r\n          >\r\n            <Grid item>\r\n              <CircularProgress color=\"inherit\" />\r\n            </Grid>\r\n            <Grid item>\r\n              <span style={{ textAlign: \"center\", color: \"#fff\" }}>\r\n                {\" \"}\r\n                {/* Please wait ...{\" \"} */}\r\n              </span>\r\n            </Grid>\r\n          </Grid>\r\n        </Backdrop>\r\n\r\n        <Box mt={5} style={{ color: \"#eee\" }}>\r\n          <Copyright />\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  Badge,\r\n  Divider,\r\n  Grid,\r\n  IconButton,\r\n  ListItemIcon,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport { List, ListItem } from \"@material-ui/core\";\r\n\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { getMenuRole, getMenuId } from \"./MenuList\";\r\nimport { border, borderBottom } from \"@material-ui/system\";\r\nimport { getGlobalPath } from \"./GlobalPath\";\r\n\r\nimport GyaneBookService from \"./Gynae/services/BookService\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n\r\n  icon: {\r\n    fontSize: \"1rem\",\r\n    color: \"#777\",\r\n    cursor: \"pointer\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"8px\",\r\n    borderBottom: \"1px solid #eee\",\r\n  },\r\n\r\n  iconSelected: {\r\n    color: \"#fff\",\r\n    backgroundColor:  theme.palette.primary.main,\r\n    transition: \"all 0.1s ease-in-out\"\r\n  },\r\n\r\n  menuText: {\r\n    fontSize: \"1rem\",\r\n    fontWeight: \"500\"\r\n  },\r\n\r\n  Badge:{\r\n    backgroundColor: \"rgb(220, 0, 78)\",\r\n    color: \"#fff\",\r\n    fontWeight: \"600\",\r\n    textAlign:\"center\",\r\n    borderRadius: \"50%\",\r\n    fontSize: \"0.85rem\",\r\n    lineHeight: \"0.85rem\",\r\n    padding:\"7px\",\r\n    marginTop:\"9px\",\r\n    width:\"28px\"\r\n\r\n  }\r\n}));\r\n\r\nexport default function MyMenu() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n\r\n  let history = useHistory();\r\n\r\n  const updateShouldRefundsCount = async () =>\r\n  {\r\n    try{\r\n      const res = await GyaneBookService.getShouldRefundsCount()\r\n      if (res && res.data && res.data.status === \"OK\")\r\n      {\r\n        setState(state => ({...state, shouldRefunsCount: res.data.count}))\r\n      }\r\n    }\r\n    catch(ex)\r\n    {\r\n      console.error(ex)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setSelectedIndex(state.currentMenuIndex);\r\n    updateShouldRefundsCount()\r\n  }, [state.currentMenuIndex]);\r\n\r\n  const handleListItemClick = (event, index) => {\r\n    setSelectedIndex(index);\r\n    setState((state) => ({ ...state, currentMenuIndex: index }));\r\n\r\n    history.push(getGlobalPath(`/${getMenuId(state.role,index)}`));\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List>\r\n        {state.role &&\r\n          getMenuRole(state.role).map(\r\n            (item) =>\r\n              !item.hidden && (\r\n                // <ListItem button selected={selectedIndex === item.index} onClick={(event) => handleListItemClick(event, item.index)}>\r\n                // <ListItemIcon>\r\n                //     {item.icon}\r\n                // </ListItemIcon>\r\n                // <ListItemText primary={`${item.title}`} />\r\n                // </ListItem>\r\n                <React.Fragment key={`${item.id}`}>\r\n                  <div\r\n                    key={`${item.id}`}\r\n                    className={clsx(\r\n                      classes.icon,\r\n                      selectedIndex === item.index && classes.iconSelected\r\n                    )}\r\n                    onClick={(event) => handleListItemClick(event, item.index)}\r\n                  >\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"flex-start\"\r\n                      alignItems=\"flex-start\"\r\n                      spacing={3}\r\n                      style={{paddingLeft:\"15px\"}}\r\n                    >\r\n                      <Grid item>{item.icon}</Grid>\r\n\r\n                      <Grid item style={{textAlign:\"left\"}}>\r\n                        <span\r\n                          className={classes.menuText}\r\n                        >{`${item.title}`}</span>{\" \"}\r\n                      </Grid>\r\n\r\n                      {state.role === \"gynae\" && item.id === \"deletedBookings\" && state.shouldRefunsCount > 0 && (\r\n                        <span className={classes.Badge}> {state.shouldRefunsCount} </span>\r\n                      )}\r\n\r\n                    </Grid>\r\n                  </div>\r\n                </React.Fragment>\r\n              )\r\n          )}\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\n\r\nimport { Avatar, Button, Grid, Tooltip, withStyles } from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport MyMenu from \"./Menu\";\r\nimport { getMenuContent, getMenuId, getMenuIndex } from \"./MenuList\";\r\n\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport Copyright from \"./CopyRight\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport PersonOutlineIcon from \"@material-ui/icons/PersonOutline\";\r\nimport AppsIcon from \"@material-ui/icons/Apps\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport dateformat from \"dateformat\";\r\nimport { getRole, setRole, clearRole } from \"./Role\";\r\nimport { getGlobalPath, getMenuIdFromGlobalPath } from \"./GlobalPath\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst StyledMenu = withStyles((theme) => ({\r\n  paper: {\r\n    marginTop: \"10px\",\r\n    // marginRight: \"5px\",\r\n    width: \"270px\",\r\n    height: \"240px\",\r\n    border: `1px solid #ddd`,\r\n    borderRadius: \"10px\",\r\n    paddingTop: \"10px\",\r\n  },\r\n}))((props) => (\r\n  <Menu\r\n    elevation={4}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuApps = withStyles((theme) => ({\r\n  paper: {\r\n    marginTop: \"5px\",\r\n    // marginRight: \"5px\",\r\n    width: \"280px\",\r\n    height: \"280px\",\r\n    border: `1px solid #ddd`,\r\n    borderRadius: \"10px\",\r\n    padding: \"10px\",\r\n  },\r\n}))((props) => (\r\n  <Menu\r\n    elevation={4}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 8px\",\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    // marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    overflowX: \"hidden\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      opacity: 0.9,\r\n    },\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    height: \"100vh\",\r\n    overflow: \"auto\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n\r\n  appbarTitle: {\r\n    color: \"#00a1c5\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    marginRight: \"15px\",\r\n  },\r\n\r\n  appbarCenter: {\r\n    position: \"fixed\",\r\n    width: \"260px\",\r\n    top: \"10px\",\r\n    left: \"50%\",\r\n    marginLeft: \"-130px\",\r\n    alignItems: \"center\",\r\n    justify: \"center\",\r\n    display: \"flex\",\r\n  },\r\n\r\n  logoImage: {\r\n    width: \"36px\",\r\n    height: \"36px\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  userAvatar: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: \"#aaa\",\r\n    border: \"1px solid\",\r\n    color: \"#aaa\",\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  userAvatarSelected: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: theme.palette.primary.main,\r\n    border: \"1px solid\",\r\n    color: theme.palette.primary.main,\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  userAvatarBig: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: theme.palette.primary.main,\r\n    border: \"1px solid\",\r\n    color: theme.palette.primary.main,\r\n    width: \"60px\",\r\n    height: \"60px\",\r\n  },\r\n\r\n  appBarText: {\r\n    color: \"#888\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n\r\n  appBarAppsIcon: {\r\n    // color: \"#888\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"1.8rem\",\r\n  },\r\n\r\n  appBarAppsIconSelected: {\r\n    cursor: \"pointer\",\r\n    fontSize: \"1.8rem\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  usernameLabel: {\r\n    fontSize: \"1.2rem\",\r\n    color: theme.palette.primary.main,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n\r\n  lastLoginLabel: {\r\n    color: \"#777\",\r\n    paddingTop: \"5px\",\r\n  },\r\n\r\n  appsLogo: {\r\n    width: \"70px\",\r\n    height: \"70px\",\r\n  },\r\n\r\n  appsBox: {\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.1s ease-in-out\",\r\n    padding: \"2px\",\r\n    borderBottom: `5px solid #fff`,\r\n    borderRadius: \"5px\",\r\n    // border: \"2px solid #fff\",\r\n    \"&:hover\": {\r\n      //      border: `2px solid ${theme.palette.primary.main}`,\r\n      //      borderRadius: \"10px\",\r\n      borderBottom: `5px solid ${theme.palette.primary.main}`,\r\n      transition: \"all 0.1s ease-in-out\",\r\n    },\r\n  },\r\n\r\n  appsBoxSelected: {\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.1s ease-in-out\",\r\n    padding: \"2px\",\r\n    borderBottom: `5px solid${theme.palette.primary.light}`,\r\n    borderRadius: \"5px\",\r\n    // border: \"2px solid #fff\",\r\n    \"&:hover\": {\r\n      //      border: `2px solid ${theme.palette.primary.main}`,\r\n      //      borderRadius: \"10px\",\r\n      borderBottom: `5px solid ${theme.palette.primary.light}`,\r\n      transition: \"all 0.1s ease-in-out\",\r\n    },\r\n  },\r\n\r\n  appsAdminLabel: {\r\n    color: \"#0264d4\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsPCRLabel: {\r\n    color: \"#4faef7\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsGynaeLabel: {\r\n    color: \"#e83caf\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsGPLabel: {\r\n    color: \"#f68529\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsSTDLabel: {\r\n    color: \"#f68529\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n\r\n  \r\n\r\n  appsInToolbar: {\r\n    position: \"fixed\",\r\n    left: \"60px\",\r\n    top: \"-5px\",\r\n    height: \"65px\",\r\n    width: \"200px\",\r\n    overflow: \"hidden\",\r\n  },\r\n}));\r\n\r\nexport default function Dashboard() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const isMobile = useMediaQuery({ maxWidth: 768 });\r\n\r\n  const [open, setOpen] = React.useState(isMobile ? false : true);\r\n\r\n  const [currentMenuIndex, setCurrentMenuIndex] = React.useState(0);\r\n\r\n  const [anchorUserAvatar, setAnchorUserAvatar] = React.useState(null);\r\n  const handleUserAvatarClick = (event) => {\r\n    setAnchorUserAvatar(event.currentTarget);\r\n  };\r\n  const handleUserAvatarClose = () => {\r\n    setAnchorUserAvatar(null);\r\n  };\r\n\r\n  const [anchorApps, setAnchorApps] = React.useState(null);\r\n  const handleAppsClick = (event) => {\r\n    setAnchorApps(event.currentTarget);\r\n  };\r\n  const handleAppsClose = () => {\r\n    setAnchorApps(null);\r\n  };\r\n\r\n  const history = useHistory();\r\n\r\n  let location = useLocation();\r\n  React.useEffect(() => {\r\n    if (!state.role) return;\r\n    const index = getMenuIndex(\r\n      state.role,\r\n      getMenuIdFromGlobalPath(location.pathname)\r\n    );\r\n    setState((state) => ({ ...state, currentMenuIndex: index }));\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrentMenuIndex(state.currentMenuIndex);\r\n    if (isMobile) {\r\n      setOpen(false);\r\n    }\r\n  }, [state.currentMenuIndex]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"medexadmin-auth-token\");\r\n    sessionStorage.removeItem(\"medexadmin-auth-token\");\r\n    clearRole();\r\n\r\n    setState((state) => ({ signedIn: false }));\r\n    history.replace(\"./login\");\r\n  };\r\n\r\n  const appsClicked = (role) => {\r\n    setRole(role);\r\n    setState((state) => ({ ...state, role: role }));\r\n    history.push(getGlobalPath(`/${getMenuId(role, 0)}`));\r\n    handleAppsClose();\r\n  };\r\n\r\n  const getAppsLogo = (role) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return (\r\n          <img\r\n            src={getGlobalPath(\"/images/admin.png\")}\r\n            className={classes.appsLogo}\r\n          />\r\n        );\r\n      case \"pcr\":\r\n        return (\r\n          <img\r\n            src={getGlobalPath(\"/images/corona.png\")}\r\n            className={classes.appsLogo}\r\n          />\r\n        );\r\n\r\n      case \"gynae\":\r\n        return (\r\n          <img\r\n            src={getGlobalPath(\"/images/woman.png\")}\r\n            className={classes.appsLogo}\r\n          />\r\n        );\r\n\r\n        case \"gp\":\r\n        return (\r\n          <img\r\n            src={getGlobalPath(\"/images/doctor.png\")}\r\n            className={classes.appsLogo}\r\n          />\r\n        ); \r\n\r\n        case \"std\":\r\n          return (\r\n            <img\r\n              src={getGlobalPath(\"/images/std-icon.png\")}\r\n              className={classes.appsLogo}\r\n            />\r\n          ); \r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getAppsLabel = (role) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return <div className={classes.appsAdminLabel}> {\"Admin\"} </div>;\r\n      case \"pcr\":\r\n        return <div className={classes.appsPCRLabel}> {\"PCR\"} </div>;\r\n      case \"gynae\":\r\n        return <div className={classes.appsGynaeLabel}> {\"Gynae\"} </div>;\r\n        case \"gp\":\r\n          return <div className={classes.appsGPLabel}> {\"GP\"} </div>;\r\n          case \"std\":\r\n            return <div className={classes.appsSTDLabel}> {\"STD\"} </div>;\r\n  \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {state.userId && state.role && (\r\n        <React.Fragment>\r\n          <div className={classes.root}>\r\n            <CssBaseline />\r\n            <AppBar\r\n              style={{ backgroundColor: \"#fff\", color: \"#555\", height: \"60px\" }}\r\n              position=\"absolute\"\r\n              className={clsx(\r\n                classes.appBar,\r\n                false && open && classes.appBarShift\r\n              )}\r\n            >\r\n              <Toolbar className={classes.toolbar}>\r\n                <IconButton\r\n                  edge=\"start\"\r\n                  color=\"inherit\"\r\n                  aria-label=\"open drawer\"\r\n                  onClick={handleDrawerOpen}\r\n                  className={clsx(classes.menuButton)}\r\n                >\r\n                  <MenuIcon />\r\n                </IconButton>\r\n\r\n                <div className={classes.appsInToolbar}>\r\n                  <Grid container direction=\"row\" alignItems=\"center\">\r\n                    <Grid item>{getAppsLogo(state.role)}</Grid>\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"8px\" }}>\r\n                        {getAppsLabel(state.role)}\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n\r\n                <div className={classes.appbarCenter}>\r\n                  {!isMobile && (\r\n                    <React.Fragment>\r\n                      <span className={classes.appbarTitle}>\r\n                        Medical Express Clinic\r\n                      </span>\r\n\r\n                      <img\r\n                        className={classes.logoImage}\r\n                        src={getGlobalPath(\"/images/logo.png\")}\r\n                        alt=\"logo image\"\r\n                      />\r\n                    </React.Fragment>\r\n                  )}\r\n                </div>\r\n\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"flex-end\",\r\n                    width: \"100%\",\r\n                    paddingLeft: \"2%\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    spacing={2}\r\n                    direction=\"row-reverse\"\r\n                    justify=\"flex-start\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Grid item>\r\n                      <Avatar\r\n                        className={\r\n                          anchorUserAvatar\r\n                            ? classes.userAvatarSelected\r\n                            : classes.userAvatar\r\n                        }\r\n                        onClick={handleUserAvatarClick}\r\n                      >\r\n                        <IconButton>\r\n                          <PersonOutlineIcon />\r\n                        </IconButton>\r\n                      </Avatar>\r\n                    </Grid>\r\n\r\n                    {state.userId?.roles.find((e) => e === \"admin\") && (\r\n                      <Grid item>\r\n                        <IconButton onClick={handleAppsClick}>\r\n                          <AppsIcon\r\n                            className={\r\n                              anchorApps\r\n                                ? classes.appBarAppsIconSelected\r\n                                : classes.appBarAppsIcon\r\n                            }\r\n                          />\r\n                        </IconButton>\r\n                      </Grid>\r\n                    )}\r\n                  </Grid>\r\n                </div>\r\n              </Toolbar>\r\n            </AppBar>\r\n\r\n            <StyledMenu\r\n              id=\"user-avatar-menu\"\r\n              anchorEl={anchorUserAvatar}\r\n              keepMounted\r\n              open={Boolean(anchorUserAvatar)}\r\n              onClose={handleUserAvatarClose}\r\n            >\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <Avatar className={classes.userAvatarBig}>\r\n                    <PersonOutlineIcon style={{ fontSize: \"2.5rem\" }} />\r\n                  </Avatar>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div className={classes.usernameLabel}>\r\n                    {\" \"}\r\n                    {state.userId?.username}{\" \"}\r\n                  </div>\r\n                </Grid>\r\n                <Grid item>\r\n                  <span style={{ color: \"#999\", fontSize: \"0.85rem\" }}>\r\n                    Logged in at :\r\n                  </span>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div className={classes.lastLoginLabel}>\r\n                    {dateformat(state.userId?.lastLoginTimeStamp)}\r\n                  </div>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Button\r\n                    onClick={handleLogout}\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    style={{\r\n                      marginTop: \"30px\",\r\n                      width: \"150px\",\r\n                      borderRadius: \"30px\",\r\n                    }}\r\n                  >\r\n                    Logout\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </StyledMenu>\r\n\r\n            <StyledMenuApps\r\n              id=\"apps-menu\"\r\n              anchorEl={anchorApps}\r\n              keepMounted\r\n              open={Boolean(anchorApps)}\r\n              onClose={handleAppsClose}\r\n            >\r\n              <Grid container spacing={1}>\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"admin\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"admin\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"admin\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"admin\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"pcr\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"pcr\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"pcr\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"pcr\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"gynae\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"gynae\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"gynae\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"gynae\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"gp\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"gp\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"gp\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"gp\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"std\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"std\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"std\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"std\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n              </Grid>\r\n            </StyledMenuApps>\r\n\r\n            <Drawer\r\n              variant={isMobile ? \"temporary\" : \"persistent\"}\r\n              classes={{\r\n                paper: clsx(\r\n                  classes.drawerPaper,\r\n                  !open && classes.drawerPaperClose\r\n                ),\r\n              }}\r\n              open={open}\r\n            >\r\n              <div className={classes.toolbarIcon}>\r\n                <React.Fragment>\r\n                  <img\r\n                    className={classes.logoImage}\r\n                    src={getGlobalPath(\"/images/logo.png\")} \r\n                    alt=\"logo image\"\r\n                    style={{ marginRight: \"10px\" }}\r\n                  />\r\n                  <span className={classes.appbarTitle}>\r\n                    <span style={{ fontSize: \"0.9rem\" }}>Medical Express</span>\r\n                  </span>\r\n                </React.Fragment>\r\n                <IconButton onClick={handleDrawerClose}>\r\n                  <ChevronLeftIcon />\r\n                </IconButton>\r\n              </div>\r\n              <Divider />\r\n\r\n              <MyMenu />\r\n            </Drawer>\r\n\r\n            <main className={classes.content}>\r\n              <div className={classes.appBarSpacer} />\r\n              <Container\r\n                maxWidth={isMobile ? \"xs\" : \"xl\"}\r\n                className={classes.container}\r\n              >\r\n                {getMenuContent(state.role, currentMenuIndex)}\r\n              </Container>\r\n            </main>\r\n          </div>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import UserService from \"./services/UserService\";\r\n\r\nexport async function getUserIdFromToken(token)\r\n{\r\n    try{\r\n       const res  = await UserService.checkToken({token: token})\r\n       if (res.data.status === 'OK')\r\n        {\r\n            return {username: res.data.userId, forename: res.data.forename, surname: res.data.surname, roles:res.data.roles, lastLoginTimeStamp: res.data.lastLoginTimeStamp}\r\n        }\r\n       else\r\n        {\r\n            return null\r\n        }\r\n    }\r\n    catch(err)\r\n    {\r\n        return null\r\n    }\r\n  \r\n}","import React from 'react';\r\n\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport GlobalState from './GlobalState';\r\n\r\n\r\n\r\n\r\nimport SignIn from './SignIn';\r\nimport Dashboard from './Dashboard';\r\n\r\nimport { useLocation, useHistory} from \"react-router-dom\";\r\nimport { getUserIdFromToken } from './TokenVerifier';\r\nimport UserService from './services/UserService';\r\nimport { getMenuId } from './MenuList';\r\nimport { getRole, setRole } from './Role';\r\nimport { getGlobalPath } from './GlobalPath';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    appBar: {\r\n        position: 'static',\r\n        backgroundColor: \"#333\",\r\n        color: \"#fff\",\r\n        //alignItems: 'center'\r\n    \r\n      },\r\n\r\n      signOutButton:{\r\n        color: \"#fff\",\r\n        marginRight : \"20px\",\r\n        fontWeight: \"500\"\r\n      },\r\n\r\n      title: {\r\n        flexGrow : 1\r\n      }\r\n\r\n\r\n}));\r\n\r\nexport default function Navigator() {\r\n\r\n    const classes = useStyles();\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [loaded, setLoaded] = React.useState(false)\r\n\r\n    let history = useHistory();\r\n\r\n    const handleSignOut = () =>\r\n    {\r\n      setState(state => ({...state, signedIn: false}));\r\n\r\n    }\r\n\r\n    let location = useLocation();\r\n\r\n    React.useEffect(() => {\r\n\r\n      const checkToken = async () =>\r\n      {\r\n        const authToken = localStorage.getItem('medexadmin-auth-token') || sessionStorage.getItem('medexadmin-auth-token');\r\n        UserService.setToken(authToken)\r\n\r\n         if (!authToken)\r\n        {\r\n          setState(state => ({...state, signedIn: false, signedUp: false, forgotPassword: false}));\r\n          setLoaded(true)\r\n          history.push(getGlobalPath('/login'));\r\n        }\r\n        else\r\n        {\r\n           const userId = await getUserIdFromToken(authToken);\r\n           if (!userId)\r\n           {\r\n              setState(state => ({...state, signedIn: false, signedUp: false, forgotPassword: false}));\r\n              history.push(getGlobalPath('/login'));\r\n           }\r\n           else if (location.pathname === getGlobalPath('/') || location.pathname === getGlobalPath('/#') || location.pathname.startsWith(getGlobalPath('/login')))\r\n           {\r\n            if (!getRole())\r\n            {\r\n             setRole(userId.roles[0])\r\n            }\r\n             setState(state => ({...state, signedIn: true, signedUp: false, forgotPassword: false, userId: userId, role: getRole()}));\r\n            \r\n             history.push(getGlobalPath(`/${getMenuId(getRole(),0)}`));\r\n           }\r\n           else\r\n           {\r\n              if (!getRole())\r\n              {\r\n               setRole(userId.roles[0])\r\n              }\r\n             setState(state => ({...state, signedIn: true, userId: userId, role: getRole()}));\r\n           }\r\n\r\n           setLoaded(true)\r\n        }\r\n      }\r\n\r\n      checkToken();\r\n   \r\n    }, [location.pathname]);\r\n\r\n    const getComponentFromState = () =>\r\n    {\r\n\r\n      if (state.signedIn)\r\n      {\r\n        return <Dashboard/>\r\n      }\r\n      else\r\n      {\r\n          return <SignIn/>    \r\n      }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n\r\n            {\r\n              loaded && (\r\n                getComponentFromState()\r\n              )\r\n            }\r\n        \r\n        </React.Fragment>\r\n    );\r\n}","import React, { Fragment, Suspense, lazy } from \"react\";\r\nimport { MuiThemeProvider, CssBaseline } from \"@material-ui/core\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport theme from \"./theme\";\r\nimport GlobalStyles from \"./GlobalStyles\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport GlobalState from \"./GlobalState\";\r\nimport Navigator from './Navigator';\r\n\r\n\r\n\r\n\r\n// Configure JSS\r\n\r\n\r\nfunction App() {\r\n  const [state, setState] = React.useState({currentMenuIndex:0});\r\n\r\n  return (\r\n    <GlobalState.Provider value={[state, setState]}>\r\n      <BrowserRouter>\r\n        <MuiThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          <GlobalStyles />\r\n\r\n       \r\n\r\n              <Navigator/>\r\n\r\n       \r\n\r\n\r\n        </MuiThemeProvider>\r\n      </BrowserRouter>\r\n    </GlobalState.Provider>\r\n  );\r\n}\r\n\r\nserviceWorker.register();\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById(\"root\")\r\n);\r\n","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}"],"sourceRoot":""}