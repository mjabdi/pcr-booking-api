(this["webpackJsonpmedex-booking-admin"]=this["webpackJsonpmedex-booking-admin"]||[]).push([[0],{1e3:function(e,t){},1002:function(e,t){},1027:function(e,t){},1029:function(e,t){},1030:function(e,t){},1035:function(e,t){},1037:function(e,t){},104:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},1056:function(e,t){},1068:function(e,t){},1071:function(e,t){},108:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},109:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},110:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},1199:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),o=n.n(i),r=n(64),c=n.n(r),l=n(2),d=n(1289),s=n(1260),u=n(218),j=n(88),b=n(686),p=n(1300),h=n(643),x="rgb(36, 40, 44)",g="rgba(0, 0, 0, 0.13)",f=Object(b.a)({palette:{primary:{main:"#00a1c5",light:"#5bd5f0"},secondary:{main:"#f68529",contrastText:"#fff"},common:{black:"#212121",darkBlack:x},tonalOffset:.2,background:{default:"#f9f9f9"},spacing:8},breakpoints:{values:{xl:1920,lg:1280,md:960,sm:600,xs:0}},border:{borderColor:g,borderWidth:2},overrides:{MuiExpansionPanel:{root:{position:"static"}},MuiTableCell:{root:Object(j.a)({paddingLeft:16,paddingRight:16,borderBottom:"".concat(2,"px solid ").concat(g)},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})},MuiDivider:{root:{backgroundColor:g,height:2}},MuiPrivateNotchedOutline:{root:{borderWidth:2}},MuiListItem:{divider:{borderBottom:"".concat(2,"px solid ").concat(g)}},MuiDialog:{paper:{width:"100%",maxWidth:430,marginLeft:8,marginRight:8}},MuiTooltip:{tooltip:{backgroundColor:x,fontSize:"0.7rem"}},MuiExpansionPanelDetails:{root:Object(j.a)({},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})}}},h.enGB),m=Object(p.a)(f),O=n(15);var y=Object(O.a)((function(e){var t,n,a,i,o;return{"@global":{"*:focus":{outline:0},".text-white":{color:e.palette.common.white},".listItemLeftPadding":(t={paddingTop:"".concat(e.spacing(1.75),"px !important"),paddingBottom:"".concat(e.spacing(1.75),"px !important"),paddingLeft:"".concat(e.spacing(4),"px !important")},Object(j.a)(t,e.breakpoints.down("sm"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),Object(j.a)(t,"@media (max-width:  420px)",{paddingLeft:"".concat(e.spacing(1),"px !important")}),t),".container":(n={width:"100%",paddingRight:e.spacing(4),paddingLeft:e.spacing(4),marginRight:"auto",marginLeft:"auto"},Object(j.a)(n,e.breakpoints.up("sm"),{maxWidth:540}),Object(j.a)(n,e.breakpoints.up("md"),{maxWidth:720}),Object(j.a)(n,e.breakpoints.up("lg"),{maxWidth:1170}),n),".row":{display:"flex",flexWrap:"wrap",marginRight:-e.spacing(2),marginLeft:-e.spacing(2)},".container-fluid":{width:"100%",paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginRight:"auto",marginLeft:"auto",maxWidth:1370},".lg-mg-top":(a={marginTop:"".concat(e.spacing(20),"px !important")},Object(j.a)(a,e.breakpoints.down("md"),{marginTop:"".concat(e.spacing(18),"px !important")}),Object(j.a)(a,e.breakpoints.down("sm"),{marginTop:"".concat(e.spacing(16),"px !important")}),Object(j.a)(a,e.breakpoints.down("xs"),{marginTop:"".concat(e.spacing(14),"px !important")}),a),".lg-mg-bottom":(i={marginBottom:"".concat(e.spacing(20),"px !important")},Object(j.a)(i,e.breakpoints.down("md"),{marginBottom:"".concat(e.spacing(18),"px !important")}),Object(j.a)(i,e.breakpoints.down("sm"),{marginBottom:"".concat(e.spacing(16),"px !important")}),Object(j.a)(i,e.breakpoints.down("xs"),{marginBottom:"".concat(e.spacing(14),"px !important")}),i),".lg-p-top":(o={paddingTop:"".concat(e.spacing(20),"px !important")},Object(j.a)(o,e.breakpoints.down("md"),{paddingTop:"".concat(e.spacing(18),"px !important")}),Object(j.a)(o,e.breakpoints.down("sm"),{paddingTop:"".concat(e.spacing(16),"px !important")}),Object(j.a)(o,e.breakpoints.down("xs"),{paddingTop:"".concat(e.spacing(14),"px !important")}),o)}}}),{withTheme:!0})((function(){return null})),v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=o.a.createContext([{},function(){}]),S=n(5),B=n.n(S),w=n(8),T=n(3),N=n(321),D=n(1304),R=n(283),L=n(698),I=n(1290),P=n(679),A=n.n(P),F=n(320),W=n(1287),_=n(1295),E=n(282),M=n(322),z=n(483),H=n(1301),G=n(1269),U=n(1205),Y=n(697),V=n(695),K=n(1255),J=n(1207),q=n(231),X=n(1281),$=n(1282),Q=n(9),Z=n(1254);function ee(){return Object(a.jsxs)(F.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Z.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var te=n(103),ne=n(20),ae=n(53),ie=n.n(ae),oe="Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=",re="https://www.travelpcrtest.com/";function ce(e){return"/medicalexpressclinic/admin"+e}var le=ie.a.create({baseURL:re,headers:{Authorization:oe}}),de=function e(){Object(ne.a)(this,e)};de.setToken=function(e){de.token=e},de.signIn=function(e){return le.post("/api/medex/user/signin",e)},de.checkToken=function(e){return le.post("/api/medex/user/checktoken",e)};var se=n(180),ue=n.n(se),je=n(70),be=n.n(je),pe=n(42),he=n.n(pe),xe=n(65),ge=n.n(xe),fe=n(71),me=n.n(fe),Oe=n(25),ye=n.n(Oe),ve=n(66),ke=n.n(ve),Ce=n(75),Se=n.n(Ce),Be=n(80),we=n.n(Be),Te=n(186),Ne=n.n(Te),De=n(86),Re=n.n(De),Le=n(19),Ie=n.n(Le),Pe=n(63),Ae=n.n(Pe),Fe=n(93),We=n.n(Fe),_e=n(677),Ee=n.n(_e),Me=n(678),ze=n.n(Me),He=n(306),Ge=n.n(He),Ue=n(382),Ye=n.n(Ue),Ve=n(383),Ke=n.n(Ve),Je=n(91),qe=n.n(Je),Xe=n(101),$e=n.n(Xe),Qe=n(134),Ze=n.n(Qe),et=n(155),tt=n.n(et),nt=n(249),at=n.n(nt),it=n(131),ot=n.n(it),rt=n(384),ct=n.n(rt),lt=n(381),dt=n.n(lt),st=n(78),ut=n.n(st),jt=n(205),bt=n.n(jt),pt=n(35),ht=n(124),xt=n.n(ht),gt=ie.a.create({baseURL:re,headers:{Authorization:oe}}),ft=n(139),mt=n.n(ft),Ot=function e(){Object(ne.a)(this,e)};Ot.payBooking=function(e,t,n){return gt.post("/api/book/paybooking?id=".concat(e,"&paymentmethod=").concat(t,"&corporate=").concat(n))},Ot.unPayBooking=function(e){return gt.post("/api/book/unpaybooking?id=".concat(e))},Ot.getTestsTimeReport=function(){return mt()(gt,{retries:3,retryDelay:function(e){return 1e3*e}}),gt.get("/api/book/getteststimereport")},Ot.getTestsTimeReportLast7=function(){return mt()(gt,{retries:3,retryDelay:function(e){return 1e3*e}}),gt.get("/api/book/getteststimereportlast7")},Ot.getTestsTimeReportLast30=function(){return mt()(gt,{retries:3,retryDelay:function(e){return 1e3*e}}),gt.get("/api/book/getteststimereportlast30")},Ot.getBookingsStatsByDateStr=function(e){return gt.get("/api/book/getbookingsstatsbydatestr?date=".concat(e))},Ot.getBookingsCountByDateStr=function(e){return gt.get("/api/book/getbookingscountbydatestr?date=".concat(e))},Ot.getAllBookingsCountAll=function(){return gt.get("/api/book/getallbookingscountall")},Ot.getBookingsCountByDateStrandTime=function(e,t,n){return gt.get("/api/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ot.getBookingsByDateStrandTime=function(e,t){return gt.get("/api/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ot.getAllBookingsCountByDateStr=function(e){return gt.get("/api/book/getallbookingscountbydatestr?date=".concat(e))},Ot.getAllBookingsCountByDateStrandTime=function(e,t,n){return gt.get("/api/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ot.getAllBookingsByDateStrandTime=function(e,t){return gt.get("/api/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ot.changeBackToBookingMade=function(e){return gt.post("/api/book/changebacktobookingmade?id=".concat(e))},Ot.resendEmailsWithBookingId=function(e){return gt.post("/api/book/resendemailswithbookingid?id=".concat(e))},Ot.regenerateFilesWithBookingId=function(e){return gt.post("/api/book/regeneratefileswithbookingid?id=".concat(e))},Ot.resendEmails=function(e){return gt.post("/api/book/resendemails?id=".concat(e))},Ot.regenerateFiles=function(e){return gt.post("/api/book/regeneratefiles?id=".concat(e))},Ot.matchRecords=function(e,t){return gt.post("/api/book/matchrecords?bookingid=".concat(e,"&linkid=").concat(t))},Ot.findBestMatches=function(e){return gt.get("/api/book/getbestmatchedbookings?id=".concat(e))},Ot.getLinkDetails=function(e){return gt.get("/api/book/getlinkdetails?id=".concat(e))},Ot.getLinkDetailsWithBookingId=function(e){return gt.get("/api/book/getlinkdetailswithbookingid?id=".concat(e))},Ot.findBookingByRefBirthDate=function(e,t){return gt.get("/api/book/getbookingsbyrefandbirthdate?ref=".concat(e,"&birthdate=").concat(t))},Ot.updateBooking=function(e){return gt.post("/api/book/updatebookappointment",e)},Ot.updateBookingTime=function(e){return gt.post("/api/book/updatebookappointmenttime",e)},Ot.deleteBooking=function(e){return gt.post("/api/book/deletebookappointment?id=".concat(e))},Ot.unDeleteBooking=function(e){return gt.post("/api/book/undeletebookappointment?id=".concat(e))},Ot.getBookingsByRef=function(e){return gt.get("/api/book/getbookingsbyref?ref=".concat(e))},Ot.getBookingById=function(e){return gt.get("/api/book/getbookingbyid?id=".concat(e))},Ot.getAllBookings=function(e){return e||(e=25),gt.get("/api/book/getallbookings?limit=".concat(e))},Ot.getAllTRBookings=function(e){return e||(e=25),gt.get("/api/book/getalltrbookings?limit=".concat(e))},Ot.getLateBookings=function(){return gt.get("/api/book/getlatebookings")},Ot.getDeletedBookings=function(e){return e||(e=25),gt.get("/api/book/getdeletedbookings?limit=".concat(e))},Ot.getLiveBookings=function(){return gt.get("/api/book/getlivebookings")},Ot.getCompletedBookings=function(e){return e||(e=25),gt.get("/api/book/getcompletedbookings?limit=".concat(e))},Ot.getPositiveBookings=function(){return gt.get("/api/book/getpositivebookings")},Ot.getTodayBookings=function(){return gt.get("/api/book/gettodaybookings")},Ot.getOldBookings=function(e){return e||(e=25),gt.get("/api/book/getoldbookings?limit=".concat(e))},Ot.getFutureBookings=function(e){return e||(e=25),gt.get("/api/book/getfuturebookings?limit=".concat(e))},Ot.getRecentBookings=function(){return gt.get("/api/book/getrecentbookings")},Ot.getRecentBookingsAll=function(e){return e||(e=25),gt.get("/api/book/getrecentbookingsall?limit=".concat(e))},Ot.getUnmatchedRecords=function(){return gt.get("/api/book/getunmatchedrecords")},Ot.getUnmatchedRecordsArchived=function(){return gt.get("/api/book/getunmatchedrecordsarchived")},Ot.archiveRecord=function(e){return gt.post("/api/book/archiverecord?id=".concat(e))},Ot.unArchiveRecord=function(e){return gt.post("/api/book/unarchiverecord?id=".concat(e))};var yt=n(1299),vt=n(1257),kt=n(1256),Ct=n(142),St=n.n(Ct),Bt=n(477),wt=function e(){Object(ne.a)(this,e)};wt.downloadCovidForm1=function(e){return gt.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},wt.downloadCovidForm2=function(e){return gt.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},wt.downloadPdfResult=function(e){return gt.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},wt.downloadPdfCert=function(e){return gt.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},wt.downloadPdfLabReport=function(e){return gt.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var Tt=n(226),Nt=n.n(Tt),Dt=n(40),Rt=n.n(Dt),Lt=n(24),It=n.n(Lt),Pt=n(67),At=n(46),Ft=n.n(At),Wt=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function _t(){var e=Wt(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],V=H[1],J=o.a.useState(""),q=Object(l.a)(J,2),X=q[0],$=q[1],Q=o.a.useState(""),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(""),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=o.a.useState(""),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState(""),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=o.a.useState(""),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(""),me=Object(l.a)(fe,2),Oe=me[0],ye=me[1],ve=o.a.useState(""),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState(""),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(""),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(""),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(""),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(!1),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=o.a.useState(!1),nt=Object(l.a)(tt,2),at=nt[0],it=nt[1],ot=function(e){$(e.target.value),V(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},rt=function(e){te(e.target.value),V(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ct=function(e){oe(e.target.value)},lt=function(e){de(e.target.value)},dt=function(e){be(e.target.value)},st=function(e){ge(e.target.value)},ut=function(e){ye(e.target.value)},jt=function(e){Se(e.target.value),V(Object(T.a)(Object(T.a)({},G),{},{dobError:!1}))},bt=function(e){Ne(e.target.value)},pt=function(e){Pe(e.target.value)},ht=function(e){_e(e.target.value)},xt=function(e){Ve(e.target.value)},gt=function(e){Xe(e.target.value)},ft=function(e){et(e.target.checked)},mt=function(e){it(e.target.checked)},Ct=function(e,t){if(e)be(t.forenameCapital),ge(t.surnameCapital),$(Object(Pt.FormatDateFromString)(t.bookingDate)),te(t.bookingTime.toUpperCase()),oe(t.gender.toUpperCase()),de(t.title.toUpperCase()),ye(t.email.toUpperCase()),Se(Object(Pt.FormatDateFromString)(t.birthDate)),Ne(t.phone.toUpperCase()),Pe(t.postCode.toUpperCase()),_e(t.address.toUpperCase()),t.notes&&He(t.notes.toUpperCase()),t.passportNumber&&Ve(t.passportNumber.toUpperCase()),t.passportNumber2&&Xe(t.passportNumber2.toUpperCase()),et(t.certificate),it(t.antiBodyTest),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=Ze,n.antiBodyTest=at,n.gender=ie,n.title=le,n.birthDate=Object(Pt.RevertFormatDateFromString)(Ce),n.email=Oe,n.phone=Te,n.postCode=Le,n.address=We,n.passportNumber=Ye,n.passportNumber2=qe,n.forename=je,n.surname=xe,n.notes=ze,n.bookingDate=Object(Pt.RevertFormatDateFromString)(X),n.bookingTime=ee,n.bookingRef=t.bookingRef,Dt(n)&&Lt({bookingId:a,person:n})}}else h({edit:e,person:t})},Nt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},Dt=function(e){var t=!1;return Nt(e.bookingDate)||(t=!0,V(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),Nt(e.birthDate)||(t=!0,V(Object(T.a)(Object(T.a)({},G),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,V(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Lt=function(e){N(!0),Ot.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},At=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),Ot.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},_t=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Ot.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"stretch",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){var i,o,c,l,d,j,b,h,x,g;return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(g="panel".concat(n),function(e,t){u(!!t&&g)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.forenameCapital," ").concat(t.surnameCapital)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){_t(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){_t(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){_t(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ct(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){Ct(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){Ct(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){At(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){At(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){At(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Pt.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:X,onChange:ot,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:ee,onChange:rt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(i=t.gender)||void 0===i?void 0:i.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ie,onChange:ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(o=t.title)||void 0===o?void 0:o.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:lt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.forenameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:je,onChange:dt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.surnameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:st,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(c=t.email)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Oe,onChange:ut,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Pt.FormatDateFromString)(t.birthDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.dobError,className:e.TextBox,value:Ce,onChange:jt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(l=t.phone)||void 0===l?void 0:l.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Te,onChange:bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(d=t.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Le,onChange:pt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(j=t.address)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:We,onChange:ht,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(b=t.passportNumber)||void 0===b?void 0:b.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ye,onChange:xt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(h=t.passportNumber2)||void 0===h?void 0:h.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:qe,onChange:gt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.certificate?Object(a.jsx)(Rt.a,{className:e.checkIcon}):Object(a.jsx)(It.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(U.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:Ze,onChange:ft}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.antiBodyTest?Object(a.jsx)(Rt.a,{className:e.checkIcon}):Object(a.jsx)(It.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(U.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:at,onChange:mt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(x=t.status,"booked"===x?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===x?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===x?Object(a.jsx)("span",{className:e.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===x?Object(a.jsx)("span",{className:e.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===x?Object(a.jsxs)("span",{className:e.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===x?Object(a.jsxs)("span",{className:e.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"sample_taken"===t.status&&!(p.edit&&p.person._id===t._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:w,onClick:function(e){return n=t._id,N(!0),void Ot.changeBackToBookingMade(n).then((function(e){N(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e),N(!1)}));var n},children:"Change Back To Booking Made"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(Tt.calculatePrice)(t)<=199?e.infoDataCharges:e.infoDataChargesHigher,children:"\xa3".concat(Object(Tt.calculatePrice)(t))})]}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,wt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,wt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_sent"!==t.status&&"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,wt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,wt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Certificate"})})]})})]})})},"panel".concat(n))}))]})})}var Et=function(e){return"boolean"===typeof e};function Mt(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var zt=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Ht(){var e=zt(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!Et(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){Ot.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Ot.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Mt,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(_t,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Gt,Ut=n(12),Yt=n(37),Vt=n(1263),Kt=n(481),Jt=n(251),qt=n(1264),Xt=n(1265),$t=n(1266),Qt=n(1267),Zt=n(1206),en=n(30),tn=n.n(en),nn=function(){return"true"===sessionStorage.getItem("medexadmin-isdoctor")},an=function(e){return sessionStorage.setItem("medexadmin-isdoctor",String(e))},on=n(1270),rn=n(1268),cn=n(17),ln=n.n(cn),dn=n(1209),sn=n(57),un=n.n(sn),jn=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}})),bn=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function pn(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)(bn,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function hn(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function xn(e){var t=jn(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1],o.a.useState(!1)),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(""),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(10),B=Object(l.a)(S,2),w=B[0],T=B[1],N=o.a.useState(!1),D=Object(l.a)(N,2),L=D[0],I=D[1];Object(i.useEffect)((function(){T((function(e){return e>=100?100:(t=v,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[v]);return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:function(){u(!1),h(!1),I(!1),clearInterval(Gt),e.handleClose()},PaperComponent:hn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(un.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","RESEND EMAILS"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{height:"230px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!p&&!s&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report"," ",e.booking.certificate?" and Certificate":""," ","Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.resendButton,variant:"contained",color:"primary",onClick:function(t){u(!0),T(0),k("downloadFailed"),Ot.resendEmailsWithBookingId(e.booking._id).then((function(t){Gt=setInterval((function(){Ot.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(k(e.data.link.status),"sent"===e.data.link.status&&(u(!1),h(!0),clearInterval(Gt))):"FAILED"===e.data.status&&(u(!1),h(!1),clearInterval(Gt),I(!0))}))}),1e3),setTimeout((function(){I(!0),clearInterval(Gt)}),6e4)})).catch((function(e){console.log(e),u(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.cancelButton,variant:"contained",color:"default",onClick:function(t){e.handleClose()},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.resendFilesButton,variant:"contained",color:"primary",onClick:function(t){u(!0),T(0),k("downloadFailed"),m(!0),Ot.regenerateFilesWithBookingId(e.booking._id).then((function(t){Gt=setInterval((function(){Ot.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(k(e.data.link.status),"sent"===e.data.link.status&&(u(!1),h(!0),clearInterval(Gt))):"FAILED"===e.data.status&&(u(!1),h(!1),clearInterval(Gt),I(!0))}))}),1e3),setTimeout((function(){I(!0),clearInterval(Gt)}),6e4)})).catch((function(e){console.log(e),u(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})})]}),L&&!s&&!p&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"error",children:"Error! \u2014 Something is wrong with this record!"})}),(s||p)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[s&&!p&&"Sending ...",p&&!f&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent."]}),p&&f&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]}),(s||p)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(pn,{variant:"determinate",color:"primary",value:w})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:s&&!p&&"PLEASE WAIT ..."})]})]})})]})})})}var gn=n(34),fn=n.n(gn),mn=n(1294),On=n(1302),yn=function e(){Object(ne.a)(this,e)};yn.getCorporates=function(e){return le.get("/api/medex/invoice/getcorporates")},yn.updateCorporates=function(e){return le.post("/api/medex/invoice/updatecorporates",{corporates:e})};var vn=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],e.next=4,yn.getCorporates();case 4:for(n=e.sent,a=n.data.result,i=a.split("\n"),o=0;o<i.length;o++)(r=i[o]).trim().length>0&&t.push(r.trim());return e.abrupt("return",t.sort());case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),kn=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Cn(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Sn(e){var t=kn(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState([]),v=Object(l.a)(y,2),k=v[0],S=v[1];o.a.useEffect((function(){N()}),[]);var N=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,S(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){m||(e.handleClose(),j("credit card"),x(k[0]),O(!1))},L=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.prev=1,t.next=4,Ot.payBooking(e.booking._id,u,"corporate"===u?h:"");case 4:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),D(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),O(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"800px",open:e.open,onClose:D,PaperComponent:Cn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"270px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"17px"},children:" How do you want to pay? "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:k.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:D,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:L,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var Bn=n(120),wn=n.n(Bn),Tn=n(114),Nn=n.n(Tn),Dn=n(4),Rn=n.n(Dn),Ln=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},In=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function Pn(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function An(e){var t=In(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1],o.a.useState(null)),d=Object(l.a)(c,2),s=d[0],u=d[1],j=function(){u(null),e.handleClose()};Object(i.useEffect)((function(){e.booking&&e.booking.filename&&e.booking.filename.length>0&&Ot.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status&&u(e.data.link.timeStamp)}))}),[e.booking]);return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:j,PaperComponent:Pn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:Rn()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(Ln(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(Ln(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),s?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(s,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),s?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(Ln(s,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:j,color:"default",children:"Back"})})]})})})}var Fn={PCR_COLOR:"#4faef7",GYNAE_COLOR:"#e83caf",GP_COLOR:"#ff4f14",STD_COLOR:"#d6733a",BLOOD_COLOR:"#dc2626",DERMA_COLOR:"#323e9a",SCREENING_COLOR:"#006b8f",CORPORATE_COLOR:"#009188"},Wn=function e(){Object(ne.a)(this,e)};Wn.createInvoice=function(e){return le.post("/api/medex/invoice/createinvoice",e)},Wn.updateInvoice=function(e,t){return le.post("/api/medex/invoice/updateinvoice?invoiceNumber=".concat(e),t)},Wn.deleteinvoice=function(e){return le.post("/api/medex/invoice/deleteinvoice?invoiceNumber=".concat(e))},Wn.getInvoiceByBookingId=function(e){return le.get("/api/medex/invoice/getinvoicebybookingid?bookingId=".concat(e))},Wn.getInvoiceByInvoiceNumber=function(e){return le.get("/api/medex/invoice/getinvoicebyinvoicenumber?invoiceNumber=".concat(e))},Wn.getCodeDetails=function(e){return le.post("/api/medex/invoice/getcodedetails",{code:e})},Wn.getAllCodes=function(){return le.get("/api/medex/invoice/getallcodes")},Wn.updateCode=function(e,t){return le.post("/api/medex/invoice/updatecode",{id:e,newCode:t})},Wn.addCode=function(e,t,n){return le.post("/api/medex/invoice/addcode",{code:e,description:t,price:n})},Wn.downloadInvoice=function(e){return le.get("/api/pdf/downloadinvoice?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Wn.emailInvoice=function(e,t){return le.post("/api/pdf/emailinvoice?id=".concat(e,"&email=").concat(t))};var _n=n(1297),En=n(47),Mn=n(372),zn=n.n(Mn),Hn=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Gn(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Un(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Yn(e){var t=Hn(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1],Object(i.useState)(!1)),d=Object(l.a)(c,2),s=d[0],u=d[1],j=null,b=Object(i.useState)(j),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=(f[0],f[1]),O=Object(i.useState)(""),y=Object(l.a)(O,2),v=y[0],k=y[1],S=Object(i.useState)(!1),N=Object(l.a)(S,2),D=N[0],I=N[1],P=Object(i.useState)(""),A=Object(l.a)(P,2),F=A[0],W=A[1],_=o.a.useState([]),E=Object(l.a)(_,2),M=E[0],z=E[1],H=Object(i.useState)(""),U=Object(l.a)(H,2),Y=U[0],X=U[1],$=Object(i.useState)(!1),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=o.a.useState("INVOICE ISSUANCE"),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],oe=o.a.useState([]),re=Object(l.a)(oe,2),ce=re[0],le=re[1];Object(i.useEffect)((function(){return e.invoice?(console.log(e.invoice.items),z(e.invoice.items),W(e.invoice.notes||""),ie("EDIT INVOICE")):ie("INVOICE ISSUANCE"),de(),function(){z([])}}),[e.invoice,e.open]),Object(i.useEffect)((function(){return!e.invoice&&e.defaultCodes&&z(e.defaultCodes),function(){z([])}}),[e.defaultCodes]);var de=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wn.getAllCodes();case 3:t=e.sent,le(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),se=function(t){s||(X(""),x(j),k(""),ee(!1),m(!1),I(!1),z([]),W(""),u(!1),e.handleClose(t))},ue=function(){var e=!1;return!!h&&(h.description&&0!==h.description.length||(e=!0),h.price&&0!==h.price.length||(e=!0),!e)},je=function(){var e=!1;return v&&0!==v.length||(I(!0),e=!0),Y&&0!==Y.length||(ee(!0),e=!0),!e},be=function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t},pe=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==M.length||e.invoice){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,u(!0),n="",a="",i="",e.booking.formData?(o=JSON.parse(e.booking.formData),n="".concat(o.title," ").concat(o.forename," ").concat(o.surname),a=o.postCode,i=o.address):e.booking.forename&&e.booking.surname?(n="".concat(e.booking.forename," ").concat(e.booking.surname),a=e.booking.postCode,i=e.booking.address):e.booking.fullname&&(n="".concat(e.booking.fullname)),r={name:n,date:new Date,dateAttended:new Date(e.booking.bookingDate),items:M,grandTotal:be(M),bookingId:e.booking._id,postCode:a,address:i,notes:F},e.invoice){t.next=14;break}return t.next=12,Wn.createInvoice(r);case 12:t.next=21;break;case 14:if(!(M.length>0)){t.next=19;break}return t.next=17,Wn.updateInvoice(e.invoice.invoiceNumber,r);case 17:t.next=21;break;case 19:return t.next=21,Wn.deleteinvoice(e.invoice.invoiceNumber);case 21:u(!1),se(!0),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(2),console.error(t.t0),u(!1);case 29:case"end":return t.stop()}}),t,null,[[2,25]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:function(){return se(!1)},PaperComponent:Un,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(zn.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:"".concat(ae)})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"700px",width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:10,children:Object(a.jsx)(_n.a,{id:"code-auto-complete",value:h,onChange:function(e,t){x(t)},options:ce,getOptionLabel:function(e){return".".concat(e.code," -- ").concat(e.description," -- ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))},style:{width:"750px"},renderInput:function(e){return Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},e),{},{label:"System Codes",helperText:"Standard codes already defined in the system"}))}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){ue()&&(z([].concat(Object(Ut.a)(M),[{code:h.code,description:h.description,price:h.price}])),x(j))},variant:"outlined",color:"primary",style:{marginTop:"15px"},disabled:s,children:"+ Add"})})]})}),Object(a.jsx)(K.a,{item:!0,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:D,value:v,onChange:function(e){k(e.target.value),I(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Z,value:Y,onChange:function(e){X(e.target.value),ee(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:Gn,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){je()&&(z([].concat(Object(Ut.a)(M),[{code:"",description:v,price:Y}])),k(""),X(""))},variant:"outlined",color:"primary",style:{marginTop:"12px"},disabled:s,children:"+ Add"})})]})}),Object(a.jsx)("div",{style:{backgroundColor:"#fff",color:"#1cb2c9",fontWeight:"500",fontSize:"0.95rem",padding:"5px 8px",marginBottom:"-15px",marginLeft:"10px",zIndex:"99",marginTop:"30px"},children:"Invoice Items"}),Object(a.jsx)("div",{style:{width:"100%",height:"300px",overflowY:"scroll",border:"1px solid #ddd",borderRadius:"4px",padding:"25px",position:"relative"},children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%",fontWeight:"500"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:"Code"}),Object(a.jsx)(K.a,{item:!0,xs:5,children:"Description"}),Object(a.jsx)(K.a,{item:!0,xs:2,children:"Price"}),Object(a.jsx)(K.a,{item:!0,xs:3})]})}),M.map((function(e,t){return Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:e.code}),Object(a.jsx)(K.a,{item:!0,xs:5,children:e.description}),Object(a.jsx)(K.a,{item:!0,xs:2,children:parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(Bt.a,{title:"Remove Item",children:Object(a.jsx)(q.a,{style:{marginTop:"-15px"},onClick:function(){return function(e){var t=Object(Ut.a)(M);t.splice(e,1),z(t)}(t)},children:Object(a.jsx)(Ie.a,{color:"primary"})})})})]})})}))]})})}),Object(a.jsxs)(K.a,{item:!0,style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:"30px"},children:[Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#777"},children:["Grand Total :"," "]})," ",Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#1cb2c9",marginLeft:"10px",fontSize:"1rem"},children:[" ",be(M).toLocaleString("en-GB",{style:"currency",currency:"GBP"})," "]})]}),Object(a.jsx)(K.a,{item:!0,style:{marginTop:"10px",width:"100%"},children:Object(a.jsx)(L.a,{value:F,onChange:function(e){W(e.target.value)},multiline:!0,rows:2,helperText:"* notes will be printed on the invoice (optional)",label:"Notes",fullWidth:!0,variant:"outlined",placeholder:"enter any addional notes you want to be printed on the invoice..."})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:s,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return se(!1)},style:{width:"100px"},disabled:s,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:pe,variant:"contained",color:e.invoice?"secondary":"primary",disabled:s,children:e.invoice?"Save Changes":"Issue Invoice"})})]})})]})})})}var Vn=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green",marginBottom:"-8px"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red",marginBottom:"-8px"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"80px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Kn=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function Jn(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function qn(e){var t,n,r,c,d,s,u,j,b,p=Vn(),h=o.a.useContext(C),x=Object(l.a)(h,2),g=x[0],f=x[1],m=Object(i.useState)(!1),O=Object(l.a)(m,2),y=O[0],v=O[1],k=o.a.useState(!1),S=Object(l.a)(k,2),N=S[0],D=S[1],I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(null),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState(nn()),H=Object(l.a)(z,2),G=H[0],X=(H[1],o.a.useState({edit:!1,person:null})),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState({delete:!1,person:null}),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState({restore:!1,person:null}),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(!1),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(!1),be=Object(l.a)(je,2),pe=be[0],xe=be[1],ge=o.a.useState(!1),fe=Object(l.a)(ge,2),me=fe[0],Oe=fe[1],ye=o.a.useState({}),ve=Object(l.a)(ye,2),ke=ve[0],Ce=ve[1],Se=o.a.useState(""),Be=Object(l.a)(Se,2),we=Be[0],Te=Be[1],Ne=o.a.useState(""),De=Object(l.a)(Ne,2),Re=De[0],Le=De[1],Pe=o.a.useState(""),Ae=Object(l.a)(Pe,2),Fe=Ae[0],We=Ae[1],_e=o.a.useState(""),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=o.a.useState(""),Ge=Object(l.a)(He,2),Ue=Ge[0],Ye=Ge[1],Ve=o.a.useState(""),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(""),$e=Object(l.a)(Xe,2),Qe=$e[0],Ze=$e[1],et=o.a.useState(""),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(""),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=o.a.useState(""),dt=Object(l.a)(lt,2),st=dt[0],ut=dt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=o.a.useState(""),gt=Object(l.a)(xt,2),ft=gt[0],mt=gt[1],yt=o.a.useState(""),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1],St=o.a.useState(""),Nt=Object(l.a)(St,2),Dt=Nt[0],Lt=Nt[1],At=o.a.useState(!1),Wt=Object(l.a)(At,2),_t=Wt[0],Et=Wt[1],Mt=o.a.useState(!1),zt=Object(l.a)(Mt,2),Ht=zt[0],Gt=zt[1],Ut=o.a.useState(!1),Yt=Object(l.a)(Ut,2),Vt=Yt[0],Kt=Yt[1],Jt=o.a.useState(null),Zt=Object(l.a)(Jt,2),en=Zt[0],tn=Zt[1],an=o.a.useState(!1),cn=Object(l.a)(an,2),ln=cn[0],dn=cn[1],sn=o.a.useState(!1),jn=Object(l.a)(sn,2),bn=jn[0],pn=jn[1],hn=o.a.useState(!1),gn=Object(l.a)(hn,2),fn=gn[0],mn=gn[1],On=o.a.useState(!1),yn=Object(l.a)(On,2),vn=yn[0],kn=yn[1],Cn=o.a.useState(""),Bn=Object(l.a)(Cn,2),Tn=Bn[0],Dn=Bn[1],Rn=function(){mn(!1)};Object(i.useEffect)((function(){if(en){var e=we!==Object(Pt.FormatDateFromString)(en.bookingDate)||Re!==en.bookingTime||Fe!==en.gender||Ue!==en.forenameCapital||Je!==en.surnameCapital||Me!==en.title||Qe!==en.email||nt!==Object(Pt.FormatDateFromString)(en.birthDate)||rt!==en.phone||st!==en.postCode||pt!==en.address||kt!==en.passportNumber||Dt!==en.passportNumber2||_t!==en.certificate||Ht!==en.antiBodyTest||Tn!==en.covidVaccine;dn(e)}}),[bn]),Object(i.useEffect)((function(){e.open||setTimeout((function(){Z({edit:!1,person:null}),dn(!1)}),500)}),[e.open]);var Ln=function(e,t){if(e)Ye(t.forenameCapital),qe(t.surnameCapital),Te(Object(Pt.FormatDateFromString)(t.bookingDate)),Le(t.bookingTime.toUpperCase()),We(t.gender.toUpperCase()),ze(t.title.toUpperCase()),Ze(t.email.toUpperCase()),at(Object(Pt.FormatDateFromString)(t.birthDate)),ct(t.phone.toUpperCase()),ut(t.postCode.toUpperCase()),ht(t.address.toUpperCase()),t.notes?mt(t.notes.toUpperCase()):mt(""),t.passportNumber?Ct(t.passportNumber.toUpperCase()):Ct(""),t.passportNumber2?Lt(t.passportNumber2.toUpperCase()):Lt(""),Et(t.certificate),Gt(t.antiBodyTest),Dn(t.covidVaccine),Z({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=_t,n.antiBodyTest=Ht,n.gender=Fe,n.title=Me,n.birthDate=Object(Pt.RevertFormatDateFromString)(nt),n.email=Qe,n.phone=rt,n.postCode=st,n.address=pt,n.passportNumber=kt,n.passportNumber2=Dt,n.forename=Ue,n.surname=Je,n.notes=ft,n.bookingDate=Object(Pt.RevertFormatDateFromString)(we),n.bookingTime=Re,n.bookingRef=t.bookingRef,n.covidVaccine=Tn,Pn(n)&&_n({bookingId:a,person:n})}}else Z({edit:e,person:t}),dn(!1)},In=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},Pn=function(e){var t=!1;return In(e.bookingDate)||(t=!0,Ce(Object(T.a)(Object(T.a)({},ke),{},{bookingDateError:!0}))),In(e.birthDate)||(t=!0,Ce(Object(T.a)(Object(T.a)({},ke),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Ce(Object(T.a)(Object(T.a)({},ke),{},{bookingTimeError:!0}))),!t},_n=function(e){ue(!0),Ot.updateBooking(e).then((function(e){ue(!1),Z({edit:!1,person:null}),Kt(!Vt)})).catch((function(e){ue(!1),Z({edit:!1,person:null}),console.log(e)}))},En=function(e,t){var n;e?ae({delete:e,person:t}):e||t?!e&&t&&(n=t._id,xe(!0),Ot.deleteBooking(n).then((function(e){xe(!1),ae({delete:!1,person:null}),Kt(!Vt)})).catch((function(e){xe(!1),ae({delete:!1,person:null}),console.log(e)}))):ae({delete:e,person:t})},Mn=function(e,t){var n;e?ce({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Oe(!0),Ot.unDeleteBooking(n).then((function(e){Oe(!1),ce({restore:!1,person:null}),Kt(!Vt)})).catch((function(e){Oe(!1),ce({restore:!1,person:null}),console.log(e)}))):ce({restore:e,person:t})};Object(i.useEffect)((function(){e.booking&&(Ot.getBookingById(e.booking._id).then((function(e){tn(e.data)})).catch((function(e){console.log(e)})),f((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Vt,g.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&tn(e.booking)}),[e.booking]);var zn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Ot.unPayBooking(en._id);case 4:ue(!1),mn(!1),Kt(!Vt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ue(!1),mn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Hn=o.a.useState(null),Gn=Object(l.a)(Hn,2),Un=Gn[0],qn=Gn[1],Xn=o.a.useState(!1),$n=Object(l.a)(Xn,2),Qn=$n[0],Zn=$n[1],ea=o.a.useState(!1),ta=Object(l.a)(ea,2),na=ta[0],aa=ta[1],ia=o.a.useState(!1),oa=Object(l.a)(ia,2),ra=oa[0],ca=oa[1],la=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Zn(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,qn(n.data.invoice),Zn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Zn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&la()}),[e.booking,e.open]);var da,sa=function(){M(en),qn(Un),aa(!0)};return Object(a.jsx)(o.a.Fragment,{children:en&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:Kn,keepMounted:!0,onClose:e.onClose,PaperComponent:Jn,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:en.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},hidden:"pcrlab"===g.role,children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/pcr/".concat(en._id)),v(!0),setTimeout((function(){v(!1)}),1500)},"aria-label":"delete",className:p.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:en.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!y,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Fn.PCR_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"PCR"}),en.tr&&Object(a.jsx)("div",{style:{position:"absolute",right:"15px"},children:"TR"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:en.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(en.forenameCapital," ").concat(en.surnameCapital)})}),en.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:en.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"20px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:p.infoDetails,children:Object(a.jsxs)("ul",{className:p.ul,children:[!G&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===en._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!en.deleted||re.restore&&re.person._id===en._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Mn(!0,en)},className:p.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:me,onClick:function(){Mn(!1,en)},className:p.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:me,onClick:function(){Mn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:en.deleted||ne.delete||Q.edit&&Q.person._id===en._id||"pcrlab"===g.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ln(!0,en)},className:p.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Q.edit&&Q.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:se||!ln,onClick:function(){Ln(!1,en)},className:p.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Q.edit&&Q.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:se,onClick:function(){Ln(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(ne.delete&&ne.person._id===en._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:e.deleteButtonDisabled||en.deleted||Q.edit||ne.delete&&ne.person._id===en._id||"pcrlab"===g.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){En(!0,en)},className:p.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(ne.delete&&ne.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:pe,onClick:function(){En(!1,en)},className:p.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ne.delete&&ne.person._id===en._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:pe,onClick:function(){En(!1,null)},className:p.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:Object(Pt.FormatDateFromString)(en.bookingDate)}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ke.bookingDateError,className:p.TextBox,value:we,onChange:function(e){Te(e.target.value),Ce(Object(T.a)(Object(T.a)({},ke),{},{bookingDateError:!1})),pn(!bn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ke.bookingTimeError,className:p.TextBox,value:Re,onChange:function(e){Le(e.target.value),Ce(Object(T.a)(Object(T.a)({},ke),{},{bookingTimeError:!1})),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(t=en.gender)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Fe,onChange:function(e){We(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(n=en.title)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Me,onChange:function(e){ze(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.forenameCapital}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Ue,onChange:function(e){Ye(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.surnameCapital}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Je,onChange:function(e){qe(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(r=en.email)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Qe,onChange:function(e){Ze(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:Object(Pt.FormatDateFromString)(en.birthDate)}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ke.dobError,className:p.TextBox,value:nt,onChange:function(e){at(e.target.value),Ce(Object(T.a)(Object(T.a)({},ke),{},{dobError:!1})),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(c=en.phone)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:rt,onChange:function(e){ct(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(d=en.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:st,onChange:function(e){ut(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(s=en.address)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:pt,onChange:function(e){ht(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),en.selfIsolate&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Post Code"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.postCodeSI})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Address"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.addressSI})]})]}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(u=en.passportNumber)||void 0===u?void 0:u.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:kt,onChange:function(e){Ct(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),!en.tr&&Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:null===(j=en.passportNumber2)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Dt,onChange:function(e){Lt(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{hidden:!en.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"NHS Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:null!==(b=en.NHSNumber)&&void 0!==b?b:"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Ethnicity"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.ethnicity})]})]})}),Object(a.jsx)("li",{hidden:!en.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Arrival Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.arrivalDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Flight Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.flightNumber})]})]})}),Object(a.jsx)("li",{hidden:!en.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Last Departed Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.lastDepartedDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Travelling From"})," ",Object(a.jsx)("span",{className:p.infoData,children:en.travellingFrom})]})]})}),Object(a.jsx)("li",{hidden:en.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.certificate?Object(a.jsx)(Rt.a,{className:p.checkIcon}):Object(a.jsx)(It.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(U.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:_t,onChange:function(e){Et(e.target.checked),pn(!bn)}}),label:""})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.antiBodyTest?Object(a.jsx)(Rt.a,{className:p.checkIcon}):Object(a.jsx)(It.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(U.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:Ht,onChange:function(e){Gt(e.target.checked),pn(!bn)}}),label:""})})]})]})}),Object(a.jsxs)("li",{style:{paddingTop:"10px",paddingBottom:"10px"},children:[Object(a.jsx)("span",{className:p.infoTitle,children:"COVID VACCINE"}),Object(a.jsx)("span",{hidden:Q.edit&&Q.person._id===en._id,className:p.infoData,children:en.covidVaccine}),Object(a.jsx)("span",{hidden:!(Q.edit&&Q.person._id===en._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Tn,onChange:function(e){Dn(e.target.value),pn(!bn)},inputProps:{style:{padding:0}}})})]}),!G&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:p.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:p.infoTitle,children:"STATUS"})," ",(da=en.status,"booked"===da?Object(a.jsx)("span",{className:p.BookedLabel,children:" Booking Made "}):"patient_attended"===da?Object(a.jsx)("span",{className:p.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===da?Object(a.jsx)("span",{className:p.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===da?Object(a.jsx)("span",{className:p.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===da?Object(a.jsxs)("span",{className:p.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===da?Object(a.jsxs)("span",{className:p.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"pcrlab"!==g.role&&"sample_taken"===en.status&&!(Q.edit&&Q.person._id===en._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:se,onClick:function(e){return t=en._id,ue(!0),void Ot.changeBackToBookingMade(t).then((function(e){ue(!1),Kt(!Vt)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change Back To Booking Made"}),("report_sent"===en.status||"report_cert_sent"===en.status||"positive"===en.status)&&!(Q.edit&&Q.person._id===en._id)&&"pcrlab"!==g.role&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.ResendEmailsButton,onClick:function(e){return en._id,M(en),void D(!0)},children:"Resend emails"})]}),Object(a.jsx)("li",{hidden:en.deleted||"pcrlab"===g.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=en._id,wt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:en.deleted||"pcrlab"===g.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=en._id,wt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),Kt(!Vt)})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:"pcrlab"===g.role||en.deleted||"report_sent"!==en.status&&"report_cert_sent"!==en.status&&"positive"!==en.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=en._id,wt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:"pcrlab"===g.role||en.deleted||"report_cert_sent"!==en.status&&"positive"!==en.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=en._id,wt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Certificate"})}),Object(a.jsx)("li",{hidden:"pcrlab"===g.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){M(en),kn(!0)},className:p.DownloadForm,children:"Show Audit Trail"})}),"pcrlab"!==g.role&&Object(a.jsxs)("div",{children:[Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:p.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:p.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Qn&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ","..."," "]}),Qn&&Un&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ",Un.invoiceNumber," "]}),Qn&&!Un&&Object(a.jsxs)("span",{className:p.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Q.edit&&Q.person._id===en._id)&&!en.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[Qn&&!Un&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.PayButton,onClick:function(){return sa()},children:"Issue Invoice"}),Qn&&Un&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:p.printInvoiceButton,onClick:function(){return e=Un._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.editInvoiceButton,onClick:function(){return sa()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!en.email||en.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Un._id,t=en.email,ue(!0),ca(!1),Wn.emailInvoice(e,t).then((function(e){ue(!1),"OK"===e.data.status&&ca(!0)})).catch((function(e){console.log(e),ue(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",ra&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(Tt.calculatePrice)(en)<=199?p.infoDataCharges:p.infoDataChargesHigher,children:"\xa3".concat(Object(Tt.calculatePrice)(en))}),!(Q.edit&&Q.person._id===en._id)&&!en.paid&&!en.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.PayButton,onClick:function(e){return en._id,M(en),void F(!0)},children:"Pay"}),!(Q.edit&&Q.person._id===en._id)&&en.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:p.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:p.checkIconSmall})," ","Paid by ",en.paidBy,"corporate"===en.paidBy?' "'.concat(en.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return mn(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),Un&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Un.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Un.items)]})]})]})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:p.backdrop,open:se||pe||me,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(xn,{booking:E,open:N,handleClose:function(){D(!1),M(null)}}),Object(a.jsx)(Sn,{booking:E,open:A,handleClose:function(){F(!1),M(null)}}),Object(a.jsx)(Yn,{booking:E,invoice:Un,open:na,defaultCodes:function(e){var t=[];if(e)return e.tr?t.push({code:"PCRTR",description:"PCR TEST TO RELEASE",price:250}):(t.push({code:"PCR",description:"PCR SWAB TEST",price:199}),e.antiBodyTest&&(t.push({code:"PCRA",description:"PCR ANTIBODY TEST",price:99}),t.push({code:"PHLE",description:"PHLEBOTOMY",price:50})),e.certificate&&t.push({code:"PCRCERT",description:"PCR FIT TO FLY CERTIFICATE",price:50})),t}(e.booking),handleClose:function(e){aa(!1),M(null),la()}}),Object(a.jsx)(An,{booking:E,open:vn,handleClose:function(){kn(!1),M(null)}})]}),Object(a.jsxs)(qt.a,{open:fn,onClose:Rn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Rn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:zn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]})]})})}var Xn=n(73),$n=n(74),Qn=n(49),Zn=(n(749),n(463),n(144)),ea=n(1291),ta=n(81),na=n.n(ta),aa=n(95),ia=n.n(aa),oa=["Visa Medical"],ra=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80}}})),ca=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"tr"===e?"Test & Release Bookings":"All Bookings"};function la(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function da(e){var t=ra(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=r[0],d=(r[1],o.a.useState(25)),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(new Date((new Date).getTime()-6048e5)),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date((new Date).getTime()-864e5)),v=Object(l.a)(y,2),k=v[0],S=v[1],B=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),w=Object(l.a)(B,2),N=w[0],D=w[1],I=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),P=Object(l.a)(I,2),A=P[0],F=P[1],W=Object(i.useState)(!1),_=Object(l.a)(W,2),E=_[0],H=_[1],G=Object(i.useState)(!0),V=Object(l.a)(G,2),J=V[0],X=V[1],$=Object(i.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(i.useState)(!0),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=Object(i.useState)(!0),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=Object(i.useState)(!0),ue=Object(l.a)(se,2),je=ue[0],pe=ue[1],xe=Object(i.useState)(!0),fe=Object(l.a)(xe,2),Oe=fe[0],ve=fe[1],Ce=Object(i.useState)(!0),Be=Object(l.a)(Ce,2),Te=Be[0],Ne=Be[1],De=Object(i.useState)(!0),Le=Object(l.a)(De,2),Pe=Le[0],Fe=Le[1],We=Object(i.useState)(!0),_e=Object(l.a)(We,2),Ee=_e[0],Me=_e[1],ze=Object(i.useState)(!0),He=Object(l.a)(ze,2),Ge=He[0],Ue=He[1],Ye=[];Ye="recent"===e.date&&"pcrlab"!==c.role?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==c.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(Rt.a,{className:t.checkIcon}):Object(a.jsx)(It.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(Rt.a,{className:t.checkIcon}):Object(a.jsx)(It.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}]:"pcrlab"===c.role?[{field:"bookingDate",headerName:"Booking Date",width:200,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"Booking Time",width:200,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"forenameCapital",headerName:"Forename",width:300},{field:"surnameCapital",headerName:"Surname",width:300},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==c.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(It.a,{className:t.closeIcon})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,onClick:function(){},children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(Rt.a,{className:t.checkIcon}):Object(a.jsx)(It.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(Rt.a,{className:t.checkIcon}):Object(a.jsx)(It.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}];var Ve=o.a.useState({bookings:[],cachedBookings:[],isFetching:!0}),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(oa[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=Ot.getAllBookings;"today"===e.date?n=Ot.getTodayBookings:"old"===e.date?n=Ot.getOldBookings:"future"===e.date?n=Ot.getFutureBookings:"recent"===e.date?n=Ot.getRecentBookingsAll:"live"===e.date?n=Ot.getLiveBookings:"completed"===e.date?n=Ot.getCompletedBookings:"positive"===e.date?n=Ot.getPositiveBookings:"deleted"===e.date?n=Ot.getDeletedBookings:"late"===e.date?n=Ot.getLateBookings:"tr"===e.date&&(n=Ot.getAllTRBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){j(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(pt.toLowerCase())>=0||e.surname.toLowerCase().indexOf(pt.toLowerCase())>=0||"".concat(e.forename," ").concat(e.surname).toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(u)}),[c.bookingDialogDataChanged]);var ft,mt,yt=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},vt=o.a.useState(1),kt=Object(l.a)(vt,2),Ct=kt[0],St=kt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",ca(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(u)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&"admin"===c.userId.username&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){x(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:u,onChange:function(e){j(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:Ye,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(qn,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:h,onClose:function(){st(oa[0]),H(!1),x(!1)},PaperComponent:la,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:E,onChange:function(e){H(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),E&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:oa.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"From",value:m,onChange:function(e){if(!e||"Invalid Date"===e.toString())return O(null),void D("");O(e),D(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:k,onChange:function(e){if(!e||"Invalid Date"===e.toString())return S(null),void F("");S(e),F(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(N,".").concat(A),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){X(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){oe(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){de(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:je,onChange:function(e){pe(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ve(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Te,onChange:function(e){Ne(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Pe,onChange:function(e){Fe(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){Me(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ge,onChange:function(e){Ue(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[J&&Object(a.jsx)("th",{className:t.th,children:"Date"}),ee&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),le&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),je&&Object(a.jsx)("th",{className:t.th,children:"Email"}),Oe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Te&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Pe&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ge&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return E?e.bookingDate>=N&&e.bookingDate<=A&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=N&&e.bookingDate<=A})).map((function(e){return Object(a.jsxs)("tr",{children:[J&&Object(a.jsx)("td",{className:t.td,children:Object(Pt.FormatDateFromString)(e.bookingDate)}),ee&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),ie&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),le&&Object(a.jsx)("th",{className:t.th,children:Object(Pt.FormatDateFromString)(e.birthDate)}),je&&Object(a.jsx)("td",{className:t.td,children:e.email}),Oe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Te&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Pe&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Ee&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ge&&Object(a.jsx)("td",{className:t.td,children:Nt.a.calculatePrice(e)})]})}))]})})]})})]})]})}var sa=n(107),ua=n(1296),ja=n(1271),ba=n(376),pa=n(377),ha=n(149),xa=n(660);function ga(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function fa(e,t){return{time:e,amount:t}}var ma=[fa("09:00",0),fa("10:00",0),fa("11:00",0),fa("12:00",0),fa("13:00",0),fa("14:00",0),fa("15:00",0),fa("16:00",0),fa("17:00",0),fa("18:00",void 0)],Oa=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ya(){var e=Object(sa.a)(),t=o.a.useState(ma),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Ot.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(fa("09:00",Oa(i,"09"))),n.push(fa("10:00",Oa(i,"10"))),n.push(fa("11:00",Oa(i,"11"))),n.push(fa("12:00",Oa(i,"12"))),n.push(fa("13:00",Oa(i,"13"))),n.push(fa("14:00",Oa(i,"14"))),n.push(fa("15:00",Oa(i,"15"))),n.push(fa("16:00",Oa(i,"16"))),n.push(fa("17:00",Oa(i,"17"))),n.push(fa("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ga,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var va=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ka=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var i,o=t<10?"0".concat(t):"".concat(t),r=n<10?"0".concat(n):"".concat(n),c=a?"PM":"AM",l="".concat(r,":").concat(o," ").concat(c);return 0===(i=e).getDay()||6===i.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},Ca=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var i=n<10?"0".concat(n):"".concat(n),o=t<10?"0".concat(t):"".concat(t),r=a?"PM":"AM",c="".concat(o,":").concat(i," ").concat(r);return"".concat(e," - ").concat(c)};function Sa(){var e=va(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=ka(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),Ot.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ga,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Ca(ka(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(qn,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Ba=n(1275),wa=n(1278),Ta=n(1261),Na=n(1276),Da=n(1277),Ra=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function La(){var e=Ra(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),Ot.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O(),setInterval((function(){h((function(e){return!e}))}),3e4)}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ga,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Name"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.forename}),Object(a.jsx)(Ta.a,{children:e.surname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:Object(Pt.FormatDateFromString)(e.birthDate)}),Object(a.jsx)(Ta.a,{children:Object(Pt.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("pcr","recentBookings")})}))},children:"See more records"})})]})}var Ia=n(1298),Pa=n(662),Aa=n(378),Fa=["#00b33e","#0070e0","#bb00c4"],Wa=Math.PI/180,_a=function(e){var t=e.cx,n=e.cy,i=e.midAngle,o=e.innerRadius,r=e.outerRadius,c=e.value,l=(e.index,o+.5*(r-o)),d=t+l*Math.cos(-i*Wa),s=n+l*Math.sin(-i*Wa);return Object(a.jsx)("text",{x:d,y:s,fontSize:"14px",fontWeight:"500",fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat(c," ")})},Ea=Object(N.a)({depositContext:{flex:1},ReportLabels:{position:"absolute",top:"80px",left:"0px"},AverageLabel:{position:"absolute",top:"190px",right:"30px",fontSize:"12px",color:"#0070e0",fontWeight:"600"},less12Label:{fontSize:"12px",color:"#00b33e",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #00b33e",marginBottom:"10px"},less24Label:{fontSize:"12px",color:"#0070e0",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #0070e0",marginBottom:"10px"},less36Label:{fontSize:"12px",color:"#bb00c4",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #bb00c4",marginBottom:"10px"},seeMore:{position:"absolute",top:"191px",left:"2px"},TableTitle:{width:"100%",textAlign:"center",fontSize:"1.1rem",fontWeight:"500",backgroundColor:"#00852a",color:"#fff",border:"1px solid #00852a",padding:"5px"},TableBorder:{border:"1px solid #00852a",marginBottom:"20px"}});function Ma(){var e=Ea(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(!1),y=Object(l.a)(O,2),v=y[0],k=y[1],C=o.a.useState(null),S=Object(l.a)(C,2),B=S[0],w=S[1],T=o.a.useState(!1),N=Object(l.a)(T,2),D=N[0],R=N[1];Object(i.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){R(!0),Ot.getTestsTimeReport().then((function(e){var t=[];R(!1),"OK"===e.data.status&&(u(e.data.result),t.push({name:"lessThan12",value:e.data.result.lessThan12}),t.push({name:"lessThan24",value:e.data.result.lessThan24}),t.push({name:"lessThan36",value:e.data.result.lessThan36}),w(t))})).catch((function(e){R(!1),console.error(e)})),Ot.getTestsTimeReportLast7().then((function(e){"OK"===e.data.status&&h(e.data.result)})).catch((function(e){console.error(e)})),Ot.getTestsTimeReportLast30().then((function(e){"OK"===e.data.status&&m(e.data.result)})).catch((function(e){console.error(e)}))}),[]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[D&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ga,{children:"PCR RESULTS SUMMARY"}),B&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ia.a,{width:250,height:150,children:Object(a.jsx)(Pa.a,{data:B,cx:170,cy:70,labelLine:!1,label:_a,outerRadius:65,fill:"#8884d8",dataKey:"value",children:B.map((function(e,t){return Object(a.jsx)(Aa.a,{fill:Fa[t%Fa.length]},"cell-".concat(t))}))})}),Object(a.jsxs)("div",{className:e.ReportLabels,children:[Object(a.jsxs)("div",{className:e.less12Label,children:[" ","12 Hours"," "]}),Object(a.jsxs)("div",{className:e.less24Label,children:[" ","24 Hours"," "]}),Object(a.jsxs)("div",{className:e.less36Label,children:[" ","36 Hours"," "]})]}),Object(a.jsxs)("div",{className:e.AverageLabel,children:["avg = ",Object(a.jsxs)("span",{style:{fontSize:"14px"},children:[" ","".concat(s.avg)," "]})," hours"]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),k(!0)},children:"See Details"})}),Object(a.jsxs)(qt.a,{style:{padding:"50px"},onClose:function(){k(!1)},"aria-labelledby":"simple-dialog-title",open:v,children:[Object(a.jsx)(Xt.a,{style:{textAlign:"center"},id:"simple-dialog-title",children:"PCR Results Time Report"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{className:e.TableTitle,children:"All Records"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(Ba.a,{children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Ta.a,{children:"Count"}),Object(a.jsx)(Ta.a,{children:"Percent"})]})}),Object(a.jsxs)(wa.a,{children:[Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"12 Hours"}),Object(a.jsx)(Ta.a,{children:s.lessThan12}),Object(a.jsxs)(Ta.a,{children:[s.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"24 Hours"}),Object(a.jsx)(Ta.a,{children:s.lessThan24}),Object(a.jsxs)(Ta.a,{children:[s.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"36 Hours"}),Object(a.jsx)(Ta.a,{children:s.lessThan36}),Object(a.jsxs)(Ta.a,{children:[s.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"48 Hours"}),Object(a.jsx)(Ta.a,{children:s.lessThan48}),Object(a.jsxs)(Ta.a,{children:[s.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Ta.a,{style:{fontWeight:"600"},children:s.lessThan48+s.lessThan36+s.lessThan24+s.lessThan12}),Object(a.jsx)(Ta.a,{})]},"row4")]})]})}),Object(a.jsx)("div",{className:e.TableTitle,children:"Last 7 Days"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(Ba.a,{children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Ta.a,{children:"Count"}),Object(a.jsx)(Ta.a,{children:"Percent"})]})}),Object(a.jsxs)(wa.a,{children:[Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"12 Hours"}),Object(a.jsx)(Ta.a,{children:p.lessThan12}),Object(a.jsxs)(Ta.a,{children:[p.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"24 Hours"}),Object(a.jsx)(Ta.a,{children:p.lessThan24}),Object(a.jsxs)(Ta.a,{children:[p.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"36 Hours"}),Object(a.jsx)(Ta.a,{children:p.lessThan36}),Object(a.jsxs)(Ta.a,{children:[p.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"48 Hours"}),Object(a.jsx)(Ta.a,{children:p.lessThan48}),Object(a.jsxs)(Ta.a,{children:[p.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Ta.a,{style:{fontWeight:"600"},children:p.lessThan48+p.lessThan36+p.lessThan24+p.lessThan12}),Object(a.jsx)(Ta.a,{})]},"row4")]})]})}),Object(a.jsx)("div",{className:e.TableTitle,children:"Last 30 Days"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(Ba.a,{children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Ta.a,{children:"Count"}),Object(a.jsx)(Ta.a,{children:"Percent"})]})}),Object(a.jsxs)(wa.a,{children:[Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"12 Hours"}),Object(a.jsx)(Ta.a,{children:f.lessThan12}),Object(a.jsxs)(Ta.a,{children:[f.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"24 Hours"}),Object(a.jsx)(Ta.a,{children:f.lessThan24}),Object(a.jsxs)(Ta.a,{children:[f.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"36 Hours"}),Object(a.jsx)(Ta.a,{children:f.lessThan36}),Object(a.jsxs)(Ta.a,{children:[f.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"48 Hours"}),Object(a.jsx)(Ta.a,{children:f.lessThan48}),Object(a.jsxs)(Ta.a,{children:[f.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Ta.a,{style:{fontWeight:"600"},children:f.lessThan48+f.lessThan36+f.lessThan24+f.lessThan12}),Object(a.jsx)(Ta.a,{})]},"row4")]})]})})]})]})]})]})})}var za=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ha(){var e=za(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:5,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(ya,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:4,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Ma,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Sa,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(La,{})})})]})})}var Ga,Ua=n(197),Ya=n.n(Ua),Va=n(1279),Ka=n(1307),Ja=n(176),qa=n.n(Ja),Xa=n(198),$a=n.n(Xa),Qa=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginLeft:"50px"}}})),Za=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function ei(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)(Za,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function ti(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ni(){var e=Qa(),t=[{field:"id",headerName:"#",width:50},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"forename",headerName:"Forename",width:200},{field:"surname",headerName:"Surname",width:200},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===P?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(qa.a,{}),onClick:function(e){return Je(e,t.value)},className:e.smartMatchButton,children:"smart match"}),Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"archive"}),Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]}):Object(a.jsxs)(o.a.Fragment,{children:["pcrlab"!==c.role&&Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(qa.a,{}),onClick:function(e){return Je(e,t.value)},className:e.smartMatchButton,children:"smart match"}),"pcrlab"!==c.role&&Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Undo"}),Object(a.jsx)(R.a,{disabled:t.value===w,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],n=o.a.useContext(C),r=Object(l.a)(n,2),c=r[0],d=(r[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=(p[0],p[1]),x=o.a.useState(""),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(!1),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(null),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("pcrlab"!==c.role?"unresolved":"archived"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),E=W[0],M=W[1],z=o.a.useState(!1),H=Object(l.a)(z,2),G=H[0],V=H[1],J=o.a.useState(null),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=o.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState(null),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState(null),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState(null),je=Object(l.a)(ue,2),be=je[0],pe=je[1],he=o.a.useState(!1),xe=Object(l.a)(he,2),ge=xe[0],fe=xe[1],me=o.a.useState(!1),Oe=Object(l.a)(me,2),ye=Oe[0],ve=Oe[1],ke=o.a.useState(!1),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(!1),Te=Object(l.a)(we,2),De=Te[0],Re=Te[1],Le=o.a.useState(!1),Ie=Object(l.a)(Le,2),Pe=Ie[0],Ae=Ie[1],Fe=o.a.useState(""),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(10),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],Je=function(e,t){Q(t),M(!0),qe(t)};Object(i.useEffect)((function(){$&&qe($)}),[c.bookingDialogDataChanged]);var qe=function(e){Ot.getLinkDetails(e).then((function(e){ne(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Ot.findBestMatches(e).then((function(e){re(e.data.matchedBookings)})).catch((function(e){console.log(e),re([])}))},Xe=function(e,t){w||(N(t),Ot.archiveRecord(t).then((function(e){N(null),k(!v)})).catch((function(e){N(null)})))},$e=function(e,t){w||(N(t),Ot.unArchiveRecord(t).then((function(e){N(null),k(!v)})).catch((function(e){N(null)})))},Qe=Object(i.useRef)();Object(i.useEffect)((function(){var e=Ot.getUnmatchedRecords;"archived"===P&&(e=Ot.getUnmatchedRecordsArchived),Ke(!0),j({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});return e.data}));Qe.current=t,t.then((function(e){t===Qe.current&&(Ke(!1),j({bookings:e,cachedBookings:Object(Ut.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(Ke(!1),console.log(e),j({bookings:u.bookings,cachedBookings:u.cachedBookings,isFetching:!1}))}))}),[v,P]),Object(i.useEffect)((function(){if(f&&f.trim().length>0){var e=u.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(f.toLowerCase())>=0||e.surname.toLowerCase().indexOf(f.toLowerCase())>=0}));j({bookings:e,cachedBookings:u.cachedBookings,isFetching:!1})}else j({bookings:Object(Ut.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[f]);Object(i.useEffect)((function(){Ge((function(e){return e>=100?100:(t=_e,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[_e]);var Ze=function(e){wt.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(o.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:" Unmatched Records "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:e.refreshButton,onClick:function(e){m(""),k(!v)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Ka.a,{value:P,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){"pcrlab"!==c.role&&t&&t.length&&A(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Va.a,{value:"unresolved","aria-label":"left aligned",children:"UnResolved"}),Object(a.jsx)(Va.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:f,onChange:function(e){m(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:u.bookings,columns:t,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&h(e.rows[0])}})}),Object(a.jsxs)(qt.a,{maxWidth:"lg",open:E,onClose:function(){M(!1),setTimeout((function(){Q(null),ne(null),re(null),se(null),ve(!1),fe(!1),Ee(null),Be(!1),Re(!1),clearInterval(Ga),Ae(!1)}),100)},PaperComponent:ti,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(qa.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"600px"},children:[(!oe||!te)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ya.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),oe&&0===oe.length&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),oe&&te&&oe.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Forename:"}),Object(a.jsx)("span",{className:e.infoData,children:te.forename})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Surname:"}),Object(a.jsx)("span",{className:e.infoData,children:te.surname})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Pt.FormatDateFromString)(te.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Pt.FormatDateFromString)(te.testDate)})]})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Select"}),Object(a.jsx)(Ta.a,{children:"Match"}),Object(a.jsx)(Ta.a,{children:"Forename"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Test Date"}),Object(a.jsx)(Ta.a,{})]})}),Object(a.jsx)(wa.a,{children:oe.map((function(e){var t;return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:Object(a.jsx)(Bt.a,{title:e.birthDate!==te.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de&&de._id===e._id,disabled:ye||ge,onChange:function(t){return function(e,t){e.target.checked?se(t):se(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Ta.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Ta.a,{style:e.forenameCapital===te.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Ta.a,{style:e.surnameCapital===te.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Ta.a,{style:e.birthDate===te.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==te.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)($a.a,{})})}),Object(Pt.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Ta.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Ta.a,{style:Rn()(e.samplingTimeStamp,"yyyy-mm-dd")===te.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Pt.FormatDateFromString)(Rn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Ta.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){pe(t),V(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ye&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!de||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Ot.getBookingById(de._id).then((function(e){se(e.data)})),Ot.matchRecords(de._id,$).then((function(e){"OK"===e.data.status&&(fe(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!de&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ye&&!De&&!Se&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",de.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Ot.resendEmails($).then((function(e){Ga=setInterval((function(){Ot.getLinkDetails($).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),k(!v),clearInterval(Ga))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Ae(!0),Ot.regenerateFiles($).then((function(e){Ga=setInterval((function(){Ot.getLinkDetails($).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),k(!v),clearInterval(Ga))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ye&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ye&&(Se||De)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(ei,{variant:"determinate",color:"primary",value:He})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]}),Object(a.jsx)(qn,{booking:be,open:G,onClose:function(){V(!1),setTimeout((function(){pe(null)}),500)},deleteButtonDisabled:!0})]})]})]})}var ai=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ii=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=ai(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ot.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=50?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/100*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},oi=n(92),ri=n.n(oi),ci=function e(){Object(ne.a)(this,e)};ci.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var li=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],di=[1,2,3,4,5,6,7],si=[1,2,3,4,5,6],ui=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),ji=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=ui(),c=ci.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:li.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:si.map((function(e){return Object(a.jsx)("tr",{children:di.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(ii,{cellIndex:(e-1)*di.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*di.length+o))})}))})}))})]})})},bi=n(68),pi=n.n(bi),hi=n(69),xi=n.n(hi),gi=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),fi=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=gi(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return Ot.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B}):void 0),function(e){if(e>0){var t=e/5*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},mi=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Oi=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),yi=function(e){var t=e.dates,n=e.dayClicked,i=Oi();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:mi.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(fi,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},vi=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),ki=function(e){e.key;var t=e.date,n=e.time,r=vi(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.forenameCapital.indexOf(e)>=0||t.surnameCapital.indexOf(e)>=0||"".concat(t.forenameCapital," ").concat(t.surnameCapital).indexOf(e)>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A){e.next=9;break}return e.next=7,Ot.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();A&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var W,_=function(e){switch(e){case"sample_taken":return r.bookingBoxSampleTaken;case"positive":return r.bookingBoxPositive;case"report_sent":case"report_cert_sent":return r.bookingBoxReportSent;default:return r.bookingBox}};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(W=f,null===W?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W.length>0?W.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:_(e.status),onClick:function(t){return function(e,t){"pcrlab"!==s.role&&(k(t),F(!0))}(0,e)},children:"".concat(e.forenameCapital,"-").concat(e.surnameCapital).substring(0,15)})})):void 0)}),Object(a.jsx)(qn,{booking:v,open:A,onClose:function(){F(!1)}})]})},Ci=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Si=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Bi=function(e){var t=e.date,n=Si();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Ci.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(ki,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},wi=["January","February","March","April","May","June","July","August","September","October","November","December"],Ti=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Ni(){var e=Ti(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(wi[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(ji,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(yi,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Bi,{date:f}):void 0)]})}var Di=function e(){Object(ne.a)(this,e)};Di.getFirstAvailableDate=function(){return gt.get("/api/time/getfirstavaiabledate")},Di.getFullyBookedDates=function(){return gt.get("/api/time/getfullybookeddays")},Di.getTimeSlots=function(e){return gt.get("/api/time/gettimeslots?date=".concat(e))},Di.getAllOffDays=function(){return gt.get("/api/medex/offdays?service=pcr")},Di.removeOneDay=function(e){return gt.post("/api/medex/offdays/remove",{id:e})},Di.addOneDay=function(e){return gt.post("/api/medex/offdays/add",{date:e,service:"pcr",offset:(new Date).getTimezoneOffset()})},Di.getWorkingHours=function(){return gt.get("/api/medex/workinghours?service=pcr")},Di.removeWorkingHours=function(e){return gt.post("/api/medex/workinghours/remove",{id:e})},Di.addWorkingHours=function(e){return gt.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"pcr"}))};var Ri=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Li=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Ri(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},Ii=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Pi=[1,2,3,4,5,6,7],Ai=[1,2,3,4,5,6],Fi=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Wi=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Fi(),c=ci.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Ii.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Ai.map((function(e){return Object(a.jsx)("tr",{children:Pi.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Li,{cellIndex:(e-1)*Pi.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Pi.length+o))})}))})}))})]})})},_i=["January","February","March","April","May","June","July","August","September","October","November","December"],Ei=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Mi(e){var t=e.dayClick,n=Ei(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(_i[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Wi,{dayClicked:E,month:j,year:x})]})}var zi=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Hi(e){var t,n=zi();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(Pt.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Di.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,Di.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"PCR Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Mi,{dayClick:m})})})})]})]})}var Gi=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Ui(e){var t=Gi(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Di.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Di.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"PCR Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var Yi=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),Vi=function e(){Object(ne.a)(this,e)};Vi.sendReviewSMS=function(e,t){return Yi.post("/api/gynae/book/sendreviewsms",{id:e,message:t})},Vi.setClinicNotes=function(e,t){return Yi.post("/api/gynae/book/setclinicnotes",{bookingId:e,notes:t})},Vi.getBloodReportsByBookingId=function(e){return Yi.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Vi.changeDepositBooking=function(e,t){return Yi.post("/api/gynae/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},Vi.addNewBooking=function(e){return Yi.post("/api/gynae/book/addnewbooking",e)},Vi.sendRegFormEmail=function(e){return Yi.post("/api/gynae/book/sendregformemail?id=".concat(e))},Vi.payBooking=function(e,t,n,a){return Yi.post("/api/gynae/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Vi.unPayBooking=function(e){return Yi.post("/api/gynae/book/unpaybooking?id=".concat(e))},Vi.getShouldRefundsCount=function(){return Yi.get("/api/gynae/book/getshouldrefundscount")},Vi.manualRefundBooking=function(e){return Yi.post("/api/gynae/payment/manualrefundpayment",{bookingId:e})},Vi.refundBooking=function(e){return Yi.post("/api/gynae/payment/refundpayment",{bookingId:e})},Vi.getBookingsStatsByDateStr=function(e){return Yi.get("/api/gynae/book/getbookingsstatsbydatestr?date=".concat(e))},Vi.getBookingsCountByDateStr=function(e){return Yi.get("/api/gynae/book/getbookingscountbydatestr?date=".concat(e))},Vi.getAllBookingsCountAll=function(){return Yi.get("/api/gynae/book/getallbookingscountall")},Vi.getBookingsCountByDateStrandTime=function(e,t,n){return Yi.get("/api/gynae/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Vi.getBookingsByDateStrandTime=function(e,t){return Yi.get("/api/gynae/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Vi.getAllBookingsCountByDateStr=function(e){return Yi.get("/api/gynae/book/getallbookingscountbydatestr?date=".concat(e))},Vi.getAllBookingsCountByDateStrandTime=function(e,t,n){return Yi.get("/api/gynae/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Vi.getAllBookingsByDateStrandTime=function(e,t){return Yi.get("/api/gynae/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Vi.changeBackToBookingMade=function(e){return Yi.post("/api/gynae/book/changebacktobookingmade?id=".concat(e))},Vi.changeToPatientAttended=function(e,t){return Yi.post("/api/gynae/book/changetopatientattended?id=".concat(e),t)},Vi.updateBooking=function(e){return Yi.post("/api/gynae/book/updatebookappointment",e)},Vi.updateBookingTime=function(e){return Yi.post("/api/gynae/book/updatebookappointmenttime",e)},Vi.deleteBooking=function(e){return Yi.post("/api/gynae/book/deletebookappointment?id=".concat(e))},Vi.unDeleteBooking=function(e){return Yi.post("/api/gynae/book/undeletebookappointment?id=".concat(e))},Vi.getBookingsByRef=function(e){return Yi.get("/api/gynae/book/getbookingsbyref?ref=".concat(e))},Vi.getBookingById=function(e){return Yi.get("/api/gynae/book/getbookingbyid?id=".concat(e))},Vi.getAllBookings=function(e){return e||(e=25),Yi.get("/api/gynae/book/getallbookings?limit=".concat(e))},Vi.getDeletedBookings=function(e){return e||(e=25),Yi.get("/api/gynae/book/getdeletedbookings?limit=".concat(e))},Vi.getTodayBookings=function(){return Yi.get("/api/gynae/book/gettodaybookings")},Vi.getOldBookings=function(e){return e||(e=25),Yi.get("/api/gynae/book/getoldbookings?limit=".concat(e))},Vi.getFutureBookings=function(e){return e||(e=25),Yi.get("/api/gynae/book/getfuturebookings?limit=".concat(e))},Vi.getRecentBookings=function(){return Yi.get("/api/gynae/book/getrecentbookings")},Vi.getRecentBookingsAll=function(e){return e||(e=25),Yi.get("/api/gynae/book/getrecentbookingsall?limit=".concat(e))};var Ki=n(126),Ji=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),qi=function e(){Object(ne.a)(this,e)};qi.searchAllPatients=function(e,t){return Ji.post("/api/admin/patients/search",{filter:e,birthDate:t})};var Xi=function e(){Object(ne.a)(this,e)};Xi.addNewBooking=function(e){return Ji.post("/api/gp/book/addnewbooking",e)},Xi.sendRegFormEmail=function(e){return Ji.post("/api/gp/book/sendregformemail?id=".concat(e))},Xi.payBooking=function(e,t,n,a){return Ji.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Xi.unPayBooking=function(e){return Ji.post("/api/gp/book/unpaybooking?id=".concat(e))},Xi.getShouldRefundsCount=function(){return Ji.get("/api/gp/book/getshouldrefundscount?")},Xi.refundBooking=function(e){return Ji.post("/api/gp/payment/refundpayment",{bookingId:e})},Xi.getBookingsStatsByDateStr=function(e){return Ji.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},Xi.getBookingsCountByDateStr=function(e){return Ji.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},Xi.getAllBookingsCountAll=function(){return Ji.get("/api/gp/book/getallbookingscountall")},Xi.getBookingsCountByDateStrandTime=function(e,t,n){return Ji.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Xi.getBookingsByDateStrandTime=function(e,t){return Ji.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Xi.getAllBookingsCountByDateStr=function(e){return Ji.get("/api/admin/book/getallbookingscountbydatestr?date=".concat(e))},Xi.getAllBookingsCountByDateStrandTime=function(e,t,n){return Ji.get("/api/admin/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Xi.getAllBookingsByDateStrandTime=function(e,t){return Ji.get("/api/admin/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Xi.changeBackToBookingMade=function(e){return Ji.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},Xi.changeToPatientAttended=function(e,t){return Ji.post("/api/gp/book/changetopatientattended?id=".concat(e),t)},Xi.updateBooking=function(e){return Ji.post("/api/gp/book/updatebookappointment",e)},Xi.updateBookingTime=function(e){return Ji.post("/api/gp/book/updatebookappointmenttime",e)},Xi.deleteBooking=function(e){return Ji.post("/api/gp/book/deletebookappointment?id=".concat(e))},Xi.unDeleteBooking=function(e){return Ji.post("/api/gp/book/undeletebookappointment?id=".concat(e))},Xi.getBookingsByRef=function(e){return Ji.get("/api/admin/book/getbookingsbyref?ref=".concat(e))},Xi.getBookingById=function(e){return Ji.get("/api/admin/book/getbookingbyid?id=".concat(e))},Xi.getAllBookings=function(e){return e||(e=25),Ji.get("/api/admin/book/getallbookings?limit=".concat(e))},Xi.searchAllBookings=function(e){return Ji.post("/api/admin/book/searchallbookings",{filter:e})},Xi.getDeletedBookings=function(e){return e||(e=25),Ji.get("/api/admin/book/getdeletedbookings?limit=".concat(e))},Xi.getTodayBookings=function(){return Ji.get("/api/admin/book/gettodaybookings")},Xi.getOldBookings=function(e){return e||(e=25),Ji.get("/api/admin/book/getoldbookings?limit=".concat(e))},Xi.getFutureBookings=function(e){return e||(e=25),Ji.get("/api/admin/book/getfuturebookings?limit=".concat(e))},Xi.getRecentBookings=function(){return Ji.get("/api/admin/book/getrecentbookings")},Xi.getRecentBookingsAll=function(e){return e||(e=25),Ji.get("/api/admin/book/getrecentbookingsall?limit=".concat(e))};var $i=n(121),Qi=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),Zi=function e(){Object(ne.a)(this,e)};Zi.downloadGPRegForm=function(e){return Qi.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var eo=n(352),to=n.n(eo),no=function e(){Object(ne.a)(this,e)};no.sendReviewSMS=function(e,t){return Qi.post("/api/gp/book/sendreviewsms",{id:e,message:t})},no.setClinicNotes=function(e,t){return Qi.post("/api/gp/book/setclinicnotes",{bookingId:e,notes:t})},no.getBloodReportsByBookingId=function(e){return Qi.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},no.addNewBooking=function(e){return Qi.post("/api/gp/book/addnewbooking",e)},no.sendRegFormEmail=function(e){return Qi.post("/api/gp/book/sendregformemail?id=".concat(e))},no.payBooking=function(e,t,n,a){return Qi.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},no.unPayBooking=function(e){return Qi.post("/api/gp/book/unpaybooking?id=".concat(e))},no.getShouldRefundsCount=function(){return Qi.get("/api/gp/book/getshouldrefundscount?")},no.refundBooking=function(e){return Qi.post("/api/gp/payment/refundpayment",{bookingId:e})},no.getBookingsStatsByDateStr=function(e){return Qi.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},no.getBookingsCountByDateStr=function(e){return Qi.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},no.getAllBookingsCountAll=function(){return Qi.get("/api/gp/book/getallbookingscountall")},no.getBookingsCountByDateStrandTime=function(e,t,n){return Qi.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},no.getBookingsByDateStrandTime=function(e,t){return Qi.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},no.getAllBookingsCountByDateStr=function(e){return Qi.get("/api/gp/book/getallbookingscountbydatestr?date=".concat(e))},no.getAllBookingsCountByDateStrandTime=function(e,t,n){return Qi.get("/api/gp/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},no.getAllBookingsByDateStrandTime=function(e,t){return Qi.get("/api/gp/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},no.changeBackToBookingMade=function(e){return Qi.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},no.changeToPatientAttended=function(e,t){return Qi.post("/api/gp/book/changetopatientattended?id=".concat(e),t)},no.updateBooking=function(e){return Qi.post("/api/gp/book/updatebookappointment",e)},no.updateBookingTime=function(e){return Qi.post("/api/gp/book/updatebookappointmenttime",e)},no.deleteBooking=function(e){return Qi.post("/api/gp/book/deletebookappointment?id=".concat(e))},no.unDeleteBooking=function(e){return Qi.post("/api/gp/book/undeletebookappointment?id=".concat(e))},no.getBookingsByRef=function(e){return Qi.get("/api/gp/book/getbookingsbyref?ref=".concat(e))},no.getBookingById=function(e){return Qi.get("/api/gp/book/getbookingbyid?id=".concat(e))},no.getAllBookings=function(e){return e||(e=25),Qi.get("/api/gp/book/getallbookings?limit=".concat(e))},no.getDeletedBookings=function(e){return e||(e=25),Qi.get("/api/gp/book/getdeletedbookings?limit=".concat(e))},no.getTodayBookings=function(){return Qi.get("/api/gp/book/gettodaybookings")},no.getOldBookings=function(e){return e||(e=25),Qi.get("/api/gp/book/getoldbookings?limit=".concat(e))},no.getFutureBookings=function(e){return e||(e=25),Qi.get("/api/gp/book/getfuturebookings?limit=".concat(e))},no.getRecentBookings=function(){return Qi.get("/api/gp/book/getrecentbookings")},no.getRecentBookingsAll=function(e){return e||(e=25),Qi.get("/api/gp/book/getrecentbookingsall?limit=".concat(e))};var ao=n(108),io=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function oo(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function ro(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function co(e){var t=io(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,no.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:ro,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"TOTAL Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:oo,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var lo=n(1280),so=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),uo=function e(){Object(ne.a)(this,e)};uo.downloadBloodRegForm=function(e){return so.get("/api/pdf/downloadbloodregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},uo.downloadPdfLabReport=function(e){return so.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var jo=n(147),bo=n(305),po=n.n(bo),ho=function e(){Object(ne.a)(this,e)};ho.sendReviewSMS=function(e,t){return so.post("/api/blood/book/sendreviewsms",{id:e,message:t})},ho.setClinicNotes=function(e,t){return so.post("/api/blood/book/setclinicnotes",{bookingId:e,notes:t})},ho.getAllCodes=function(){return so.get("/api/medex/invoice/getallbloodcodesadmin")},ho.getBloodReportsByBookingId=function(e){return so.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},ho.getNewBloodResultsCount=function(){return so.get("/api/blood/book/getnewbloodresultscount")},ho.getSentBloodReports=function(){return so.get("/api/blood/book/getsentbloodreports")},ho.getArchivedBloodReports=function(){return so.get("/api/blood/book/getarchivedbloodreports")},ho.getNewMatchedBloodReports=function(){return so.get("/api/blood/book/getnewmatchedbloodreports")},ho.getArchivedMatchedBloodReports=function(){return so.get("/api/blood/book/getarchivedmatchedbloodreports")},ho.getNewUnmatchedBloodReports=function(){return so.get("/api/blood/book/getnewunmatchedbloodreports")},ho.getArchivedUnmatchedBloodReports=function(){return so.get("/api/blood/book/getarchivedunmatchedbloodreports")},ho.sendBloodReportEmail=function(e,t,n){return so.post("/api/blood/book/sendbloodreportemail?id=".concat(e),{email:t,notes:n})},ho.updateBloodReport=function(e,t,n){return so.post("/api/blood/book/updatebloodreport?id=".concat(e),{email:t,notes:n})},ho.archiveBloodReport=function(e){return so.post("/api/blood/book/archivebloodreport?id=".concat(e))},ho.unArchiveBloodReport=function(e){return so.post("/api/blood/book/unarchivebloodreport?id=".concat(e))},ho.addNewBooking=function(e){return so.post("/api/blood/book/addnewbooking",e)},ho.sendRegFormEmail=function(e){return so.post("/api/blood/book/sendregformemail?id=".concat(e))},ho.sendForPrint=function(e){return so.post("/api/blood/book/sendforprint?id=".concat(e))},ho.changeDepositBooking=function(e,t){return so.post("/api/blood/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},ho.manualRefundBooking=function(e){return so.post("/api/blood/payment/manualrefundpayment",{bookingId:e})},ho.payBooking=function(e,t,n,a){return so.post("/api/blood/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},ho.unPayBooking=function(e){return so.post("/api/blood/book/unpaybooking?id=".concat(e))},ho.getShouldRefundsCount=function(){return so.get("/api/blood/book/getshouldrefundscount")},ho.refundBooking=function(e){return so.post("/api/blood/payment/refundpayment",{bookingId:e})},ho.getBookingsStatsByDateStr=function(e){return so.get("/api/blood/book/getbookingsstatsbydatestr?date=".concat(e))},ho.getBookingsCountByDateStr=function(e){return so.get("/api/blood/book/getbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountAll=function(){return so.get("/api/blood/book/getallbookingscountall")},ho.getBookingsCountByDateStrandTime=function(e,t,n){return so.get("/api/blood/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getBookingsByDateStrandTime=function(e,t){return so.get("/api/blood/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.getAllBookingsCountByDateStr=function(e){return so.get("/api/blood/book/getallbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountByDateStrandTime=function(e,t,n){return so.get("/api/blood/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getAllBookingsByDateStrandTime=function(e,t){return so.get("/api/blood/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.changeBackToBookingMade=function(e){return so.post("/api/blood/book/changebacktobookingmade?id=".concat(e))},ho.changeToPatientAttended=function(e,t){return so.post("/api/blood/book/changetopatientattended?id=".concat(e),t)},ho.changeToCompleted=function(e){return so.post("/api/blood/book/changetocompleted?id=".concat(e))},ho.updateBooking=function(e){return so.post("/api/blood/book/updatebookappointment",e)},ho.updateBookingTime=function(e){return so.post("/api/blood/book/updatebookappointmenttime",e)},ho.deleteBooking=function(e){return so.post("/api/blood/book/deletebookappointment?id=".concat(e))},ho.unDeleteBooking=function(e){return so.post("/api/blood/book/undeletebookappointment?id=".concat(e))},ho.getBookingsByRef=function(e){return so.get("/api/blood/book/getbookingsbyref?ref=".concat(e))},ho.getBookingById=function(e){return so.get("/api/blood/book/getbookingbyid?id=".concat(e))},ho.getAllBookings=function(e){return e||(e=25),so.get("/api/blood/book/getallbookings?limit=".concat(e))},ho.getDeletedBookings=function(e){return e||(e=25),so.get("/api/blood/book/getdeletedbookings?limit=".concat(e))},ho.getTodayBookings=function(){return so.get("/api/blood/book/gettodaybookings")},ho.getLiveBookings=function(){return so.get("/api/blood/book/getlivebookings")},ho.getCompletedBookings=function(e){return so.get("/api/blood/book/getcompletedbookings?limit=".concat(e))},ho.getOldBookings=function(e){return e||(e=25),so.get("/api/blood/book/getoldbookings?limit=".concat(e))},ho.getFutureBookings=function(e){return e||(e=25),so.get("/api/blood/book/getfuturebookings?limit=".concat(e))},ho.getRecentBookings=function(){return so.get("/api/blood/book/getrecentbookings")},ho.getRecentBookingsAll=function(e){return e||(e=25),so.get("/api/blood/book/getrecentbookingsall?limit=".concat(e))};var xo=n(39),go=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function fo(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function mo(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Oo(e){var t=go(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,ho.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:mo,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"OTC Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:fo,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var yo=n(379),vo=n.n(yo),ko=(n(1200),Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}}))),Co=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function So(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Bo(e){var t,n=ko(),r=Object(i.useState)(null),c=Object(l.a)(r,2),d=(c[0],c[1],Object(i.useState)(1)),s=Object(l.a)(d,2);s[0],s[1];var u=o.a.useContext(C),j=Object(l.a)(u,2),b=(j[0],j[1]),p=Object(i.useState)(!1),h=Object(l.a)(p,2),x=(h[0],h[1],o.a.useState(!1)),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(!1),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(null),z=Object(l.a)(M,2),H=z[0],G=z[1],U=o.a.useState({edit:!1,person:null}),Y=Object(l.a)(U,2),q=Y[0],X=Y[1],$=o.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=o.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],oe=o.a.useState(!1),re=Object(l.a)(oe,2),ce=re[0],le=re[1],de=o.a.useState(!1),se=Object(l.a)(de,2),ue=se[0],je=se[1],be=o.a.useState(!1),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1],ge=o.a.useState({}),fe=Object(l.a)(ge,2),me=fe[0],Oe=fe[1],ve=o.a.useState(""),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState(""),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(""),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(""),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(""),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(!1),Qe=Object(l.a)($e,2),et=Qe[0],tt=Qe[1],nt=o.a.useState(null),at=Object(l.a)(nt,2),it=at[0],ot=at[1],rt=o.a.useState(!1),ct=Object(l.a)(rt,2),lt=ct[0],dt=ct[1],st=o.a.useState(!1),ut=Object(l.a)(st,2),jt=ut[0],bt=ut[1],pt=o.a.useState(!1),ht=Object(l.a)(pt,2),xt=ht[0],gt=ht[1],ft=o.a.useState(!1),mt=Object(l.a)(ft,2),Ot=(mt[0],mt[1],function(){gt(!1),G(null)}),yt=function(){E(!1),G(null)},vt=function(e,t){if(e)Pe(t.fullname),Se(Object(xo.FormatDateFromString)(t.bookingDate)),Ne(t.bookingTime.toUpperCase()),_e(t.email),He(t.phone),ln(Object(xo.FormatDateFromString)(t.birthDate)),Xe(t.packageName),t.notes&&Ve(t.notes),X({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=We,n.phone=ze,n.fullname=Le,n.notes=Ye,n.birthDate=Object(xo.RevertFormatDateFromString)(cn),n.packageName=qe,n.bookingDate=Object(xo.RevertFormatDateFromString)(Ce),n.bookingTime=Te,n.bookingRef=t.bookingRef,Ct(n)&&St({bookingId:a,person:n})}}else X({edit:e,person:t}),dt(!1)},kt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},Ct=function(e){var t=!1;return kt(e.bookingDate)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{bookingDateError:!0}))),kt(e.birthDate)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{bookingTimeError:!0}))),!t},St=function(e){le(!0),ho.updateBooking(e).then((function(e){le(!1),X({edit:!1,person:null}),tt(!et)})).catch((function(e){le(!1),X({edit:!1,person:null}),console.log(e)}))},wt=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),ho.deleteBooking(n).then((function(e){je(!1),ee({delete:!1,person:null}),tt(!et)})).catch((function(e){je(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Tt=function(e,t){var n;e?ie({restore:e,person:t}):e||t?!e&&t&&(n=t._id,xe(!0),ho.unDeleteBooking(n).then((function(e){xe(!1),ie({restore:!1,person:null}),tt(!et)})).catch((function(e){xe(!1),ie({restore:!1,person:null}),console.log(e)}))):ie({restore:e,person:t})};Object(i.useEffect)((function(){e.booking&&e.open&&(Wt(e.booking._id),Nt(e.booking.bookingId),ot(e.booking),_e(e.booking.email),Ve(e.booking.notes))}),[e.booking,e.open]);var Nt=function(){var e=Object(w.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(null),t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Xi.getBookingById(t);case 6:(n=e.sent).data&&n.data.length>0&&G(n.data[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,ho.unPayBooking(it._id);case 4:le(!1),gt(!1),tt(!et),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),gt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,ho.refundBooking(it._id);case 4:le(!1),Lt(),E(!1),tt(!et),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),le(!1),E(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&b((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),It=o.a.useState(null),Pt=Object(l.a)(It,2),At=Pt[0],Ft=Pt[1],Wt=function(e){Ft(null),uo.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var e=n.result;console.log(e),Ft(e)}})).catch((function(e){console.log(e)}))},_t=o.a.useState(null),Et=Object(l.a)(_t,2),Mt=Et[0],zt=Et[1],Ht=o.a.useState(!1),Gt=Object(l.a)(Ht,2),Ut=(Gt[0],Gt[1]),Yt=o.a.useState(!1),Vt=Object(l.a)(Yt,2),Kt=Vt[0],Jt=Vt[1],$t=o.a.useState(!1),Zt=Object(l.a)($t,2),en=(Zt[0],Zt[1]),tn=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ut(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,zt(n.data.invoice),Ut(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Ut(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&tn()}),[e.booking,e.open]);var nn=o.a.useState(""),an=Object(l.a)(nn,2),cn=an[0],ln=an[1],dn=o.a.useState(!1),sn=Object(l.a)(dn,2),jn=sn[0],bn=sn[1];return Object(a.jsx)(o.a.Fragment,{children:it&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"lg",open:e.open,TransitionComponent:Co,keepMounted:!0,onClose:function(){m(!1),k(!1),en(!1),zt(null),_e(""),Ve(""),e.onClose()},PaperComponent:So,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:it.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"10px",backgroundColor:function(e){switch(e){case"blood":return Fn.BLOOD_COLOR;case"std":return Fn.STD_COLOR;case"gp":return Fn.GP_COLOR;case"gynae":return Fn.GYNAE_COLOR;default:return"#999"}}(it.clinic),color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:null===(t=it.clinic)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"20px",color:"#fff",padding:"0px 5px"},hidden:!it.emailSent,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,justify:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ze.a,{style:{fontSize:"25px",color:"#009634"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"16px",color:"#009634",paddingBottom:"3px"},children:Rn()(it.emailSentTimeStamp,"yyyy-mm-dd, h:MM:ss TT")})})]})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:it.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(it.name)})}),it.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:it.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===it._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!it.deleted||ae.restore&&ae.person._id===it._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,it)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){Tt(!1,it)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){Tt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(q.edit&&q.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ce||!lt,onClick:function(){vt(!1,it)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(q.edit&&q.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ce,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===it._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||it.deleted||q.edit||Z.delete&&Z.person._id===it._id,children:[it.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:it.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){wt(!0,it)},className:n.DeleteButton,children:"Delete This Record"})})}),0===it.OTCCharges&&Object(a.jsx)(R.a,{disabled:it.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){wt(!0,it)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ue,onClick:function(){wt(!1,it)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ue,onClick:function(){wt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEST DATE :"}),Object(a.jsx)("span",{hidden:q.edit&&q.person._id===it._id,className:n.infoData,children:Object(xo.FormatDateFromString)(it.testDate)})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NAME : "}),Object(a.jsx)("span",{hidden:q.edit&&q.person._id===it._id,className:n.infoData,children:it.name})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"D.O.B : "}),Object(a.jsx)("span",{hidden:q.edit&&q.person._id===it._id,className:n.infoData,children:Object(xo.FormatDateFromString)(it.birthDate)})]}),H&&Object(a.jsx)(K.a,{item:!0,xs:12,md:3,children:Object(a.jsx)(R.a,{onClick:function(){bn(!0)},startIcon:Object(a.jsx)(ye.a,{}),color:"primary",variant:"contained",children:"Show Booking Detail ..."})})]})}),At&&Object(a.jsx)("div",{children:Object(a.jsx)("iframe",{style:{width:"100%",minHeight:"500px"},src:At})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{label:"EMAIL",style:{margin:"10px"},fullWidth:!0,variant:"outlined",value:We||"",onChange:function(e){_e(e.target.value),bt(!jt)}})})}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"0px"},children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"NOTES",style:{margin:"10px"},value:Ye||"",onChange:function(e){Ve(e.target.value),bt(!jt)},variant:"outlined",multiline:!0,rows:4})})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{disabled:!We||!jo.validate(We),startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=it._id,le(!0),m(!1),ho.sendBloodReportEmail(e,We,Ye).then((function(e){le(!1),"OK"===e.data.status&&(m(!0),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})),it.emailSent=!0)})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Send Email To Patient",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{startIcon:Object(a.jsx)(vo.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){var e;e=it._id,le(!0),k(!1),ho.updateBloodReport(e,We,Ye).then((function(e){le(!1),"OK"===e.data.status&&(k(!0),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})))})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Save Changes",v&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Saved Successfully"})]})})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:ce||ue||he,children:Object(a.jsx)(J.a,{color:"inherit"})}),Object(a.jsx)($r,{booking:H,open:jn,onClose:function(){bn(!1)}})]}),Object(a.jsx)(Oo,{booking:H,open:P,price:Mt?Mt.grandTotal:null,handleClose:function(){A(!1),G(null)}}),Object(a.jsx)(Yn,{booking:H,invoice:Mt,open:Kt,handleClose:function(e){Jt(!1),G(null),tn()}})]}),Object(a.jsxs)(qt.a,{open:xt,onClose:Ot,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Ot,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Dt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:_,onClose:yt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:yt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Rt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var wo=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),To=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function No(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Do(e){var t,n,r,c,d,s,u,j,b=wo(),p=o.a.useContext(C),h=Object(l.a)(p,2),x=h[0],g=h[1],f=Object(i.useState)(!1),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(!1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),_=(W[0],W[1],o.a.useState(!1)),E=Object(l.a)(_,2),H=E[0],G=E[1],U=o.a.useState(!1),Y=Object(l.a)(U,2),X=Y[0],$=Y[1],Q=o.a.useState(!1),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(!1),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=o.a.useState(null),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState({edit:!1,person:null}),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=o.a.useState({delete:!1,person:null}),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState({restore:!1,person:null}),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=o.a.useState(!1),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(!1),Te=Object(l.a)(we,2),Ne=Te[0],De=Te[1],Re=o.a.useState(!1),Le=Object(l.a)(Re,2),Pe=Le[0],Ae=Le[1],Fe=o.a.useState({}),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(""),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(""),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],Je=o.a.useState(""),qe=Object(l.a)(Je,2),Xe=qe[0],$e=qe[1],Qe=o.a.useState(""),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=o.a.useState(""),at=Object(l.a)(nt,2),it=at[0],ot=at[1],rt=o.a.useState(""),ct=Object(l.a)(rt,2),lt=ct[0],dt=ct[1],st=o.a.useState(""),ut=Object(l.a)(st,2),jt=ut[0],bt=ut[1],pt=o.a.useState(""),ht=Object(l.a)(pt,2),xt=ht[0],gt=(ht[1],o.a.useState(!1)),ft=Object(l.a)(gt,2),mt=ft[0],Ot=ft[1],yt=o.a.useState(null),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1],St=o.a.useState(!1),wt=Object(l.a)(St,2),Tt=wt[0],Nt=wt[1],Dt=o.a.useState(!1),Lt=Object(l.a)(Dt,2),Pt=Lt[0],At=Lt[1],Wt=o.a.useState(!1),_t=Object(l.a)(Wt,2),Et=_t[0],Mt=_t[1],zt=o.a.useState(!1),Ht=Object(l.a)(zt,2),Gt=(Ht[0],Ht[1],o.a.useState(null)),Ut=Object(l.a)(Gt,2),Yt=Ut[0],Vt=Ut[1],Zt=o.a.useState(null),en=Object(l.a)(Zt,2),tn=(en[0],en[1]),an=o.a.useState(null),cn=Object(l.a)(an,2),ln=cn[0],dn=cn[1],sn=o.a.useState(null),jn=Object(l.a)(sn,2),bn=jn[0],pn=jn[1],hn=o.a.useState(null),xn=Object(l.a)(hn,2),gn=xn[0],fn=xn[1],mn=o.a.useState(null),On=Object(l.a)(mn,2),yn=On[0],vn=On[1],kn=o.a.useState(nn()),Cn=Object(l.a)(kn,2),Sn=Cn[0],Bn=(Cn[1],o.a.useState(null)),Tn=Object(l.a)(Bn,2),Rn=Tn[0],Ln=Tn[1],In=o.a.useState(!1),Pn=Object(l.a)(In,2),An=Pn[0],_n=Pn[1],En=o.a.useState(""),Mn=Object(l.a)(En,2),zn=Mn[0],Hn=Mn[1],Gn=o.a.useState(""),Un=Object(l.a)(Gn,2),Vn=Un[0],Kn=Un[1],Jn=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_n(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Ln(n.data.invoice),_n(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),_n(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(Jn(),sa(),Da(e.booking.clinicNotes||""),Pa(e.booking.clinicNotes||""),_a(!1))}),[e.booking,e.open]);var qn=o.a.useState(null),Xn=Object(l.a)(qn,2),$n=Xn[0],ta=Xn[1],na=o.a.useState(null),aa=Object(l.a)(na,2),ia=aa[0],oa=aa[1],ra=o.a.useState(null),ca=Object(l.a)(ra,2),la=ca[0],da=ca[1],sa=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ta(null),t.prev=1,t.next=4,no.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&ta(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),ua=function(){Mt(!1),de(null)},ja=function(){$(!1),de(null)};Object(i.useEffect)((function(){if(kt){var e=He!==Object(ao.FormatDateFromString)(kt.bookingDate)||Ve!==kt.bookingTime||Xe!==kt.fullname||et!==kt.email||it!==kt.phone||lt!==kt.notes||Vn!==kt.birthDate||zn!==kt.gender||jt!==kt.doctorNote;Nt(e)}}),[Pt]),Object(i.useEffect)((function(){e.open||setTimeout((function(){be({edit:!1,person:null}),Nt(!1)}),500)}),[e.open]);var ba=function(e,t){var n;if(e)$e(t.fullname),Ge(Object(ao.FormatDateFromString)(t.bookingDate)),Ke(t.bookingTime.toUpperCase()),tt(t.email),ot(t.phone),t.notes&&dt(t.notes),t.doctorNote&&bt(t.doctorNote),Hn((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),Kn(Object(ao.FormatDateFromString)(t.birthDate)),be({edit:e,person:t});else if(e||t){if(!e&&t){var a={},i=t._id;a.email=et,a.phone=it,a.fullname=Xe,a.notes=lt,a.doctorNote=jt,a.service=xt,a.bookingDate=Object(ao.RevertFormatDateFromString)(He),a.bookingTime=Ve,a.bookingRef=t.bookingRef,a.gender=zn,a.birthDate=Object(ao.RevertFormatDateFromString)(Vn),ha(a)&&(xa({bookingId:i,person:a}),te(!1))}}else be({edit:e,person:t}),Nt(!1)},pa=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},ha=function(e){var t=!1;return pa(e.bookingDate)||(t=!0,Ee(Object(T.a)(Object(T.a)({},_e),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Ee(Object(T.a)(Object(T.a)({},_e),{},{bookingTimeError:!0}))),e.birthDate&&!pa(e.birthDate)&&(t=!0,Ee(Object(T.a)(Object(T.a)({},_e),{},{birthDateError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Ee(Object(T.a)(Object(T.a)({},_e),{},{genderError:!0}))),!t},xa=function(e){Be(!0),no.updateBooking(e).then((function(e){Be(!1),be({edit:!1,person:null}),Ot(!mt)})).catch((function(e){Be(!1),be({edit:!1,person:null}),console.log(e)}))},ga=function(e,t){var n;e?ge({delete:e,person:t}):e||t?!e&&t&&(n=t._id,De(!0),no.deleteBooking(n).then((function(e){De(!1),ge({delete:!1,person:null}),Ot(!mt)})).catch((function(e){De(!1),ge({delete:!1,person:null}),console.log(e)}))):ge({delete:e,person:t})},fa=function(e,t){var n;e?ve({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Ae(!0),no.unDeleteBooking(n).then((function(e){Ae(!1),ve({restore:!1,person:null}),Ot(!mt)})).catch((function(e){Ae(!1),ve({restore:!1,person:null}),console.log(e)}))):ve({restore:e,person:t})},ma=function(){Vt(!1),tn(null),dn(null),vn(null),fn(null),pn(null)},Oa=function(e,t){Be(!0),no.changeToPatientAttended(le._id,{patientid:t||null,birthDate:ln,forename:gn,surname:yn,gender:bn}).then((function(e){Be(!1),Ot(!mt),ma()})).catch((function(e){console.log(e),Be(!1)}))},ya=function(){de(kt),Ln(Rn),oe(!0)};Object(i.useEffect)((function(){e.booking&&(no.getBookingById(e.booking._id).then((function(e){Ct(e.data)})).catch((function(e){console.log(e)})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[mt,x.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&Ct(e.booking)}),[e.booking]);var va,ka,Ca=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be(!0),e.prev=1,e.next=4,no.unPayBooking(kt._id);case 4:Be(!1),Mt(!1),Ot(!mt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Be(!1),Mt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Sa=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be(!0),e.prev=1,e.next=4,no.refundBooking(kt._id);case 4:Be(!1),Ba(),$(!1),Ot(!mt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),Be(!1),$(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Ba=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,no.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&g((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),wa=o.a.useState(""),Ta=Object(l.a)(wa,2),Na=Ta[0],Da=Ta[1],Ra=o.a.useState(""),La=Object(l.a)(Ra,2),Ia=La[0],Pa=La[1],Aa=Object(i.useState)(!1),Fa=Object(l.a)(Aa,2),Wa=Fa[0],_a=Fa[1],Ea=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_a(!0),t.next=4,no.setClinicNotes(e.booking._id,Na);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(Pa(Na),_a(!1),Ot(!mt)):_a(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),_a(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),Ma=Object(i.useState)(!1),za=Object(l.a)(Ma,2),Ha=za[0],Ga=za[1],Ua=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{Ga(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),Ga(!1)}catch(p){Ga(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ya=["It was great to see and treat you at the Medical Express Clinic, Please let us know how you got on by clicking here: https://g.page/r/CZcAyTF67Ec0EBM/review"],Va=Object(i.useState)(1),Ka=Object(l.a)(Va,2),Ja=Ka[0],qa=Ka[1],Xa=Object(i.useState)(!1),$a=Object(l.a)(Xa,2),Qa=$a[0],Za=$a[1],ei=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Za(!0),e.prev=1,e.next=4,no.sendReviewSMS(kt._id,ai);case 4:(t=e.sent)&&t.data&&"OK"===t.data.status&&(Ct((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!0})})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})}))),Za(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Za(!1),Ct((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!1})}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ti=Object(i.useState)(Ya[0]),ni=Object(l.a)(ti,2),ai=ni[0],ii=ni[1];return Object(a.jsx)(o.a.Fragment,{children:kt&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:To,keepMounted:!0,onClose:function(){N(!1),A(!1),Ln(null),e.onClose()},PaperComponent:No,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:kt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gp/".concat(kt._id)),y(!0),setTimeout((function(){y(!1)}),1500)},"aria-label":"delete",className:b.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:kt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!O,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(Na?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:Na||"",onChange:function(e){Da(e.target.value)},variant:"outlined"})}),Wa&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Ia!==Na&&!Wa&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(Na?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:Ea,className:b.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Fn.GP_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GP"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:kt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(kt.fullname)})}),kt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:kt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:b.infoDetails,children:Object(a.jsxs)("ul",{className:b.ul,children:[!Sn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(Oe.restore&&Oe.person._id===kt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!kt.deleted||Oe.restore&&Oe.person._id===kt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){fa(!0,kt)},className:b.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Oe.restore&&Oe.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Pe,onClick:function(){fa(!1,kt)},className:b.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Oe.restore&&Oe.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Pe,onClick:function(){fa(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:kt.deleted||xe.delete||je.edit&&je.person._id===kt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){ba(!0,kt)},className:b.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(je.edit&&je.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Se||!Tt,onClick:function(){ba(!1,kt)},className:b.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(je.edit&&je.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Se,onClick:function(){ba(!1,null)},className:b.CancelButton,children:"Cancel"})}),!Sn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(xe.delete&&xe.person._id===kt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||kt.deleted||je.edit||xe.delete&&xe.person._id===kt._id,children:[kt.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:kt.OTCCharges>0&&!kt.prepaid,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){ga(!0,kt)},className:b.DeleteButton,children:"Delete This Record"})})}),0===kt.OTCCharges&&Object(a.jsx)(R.a,{disabled:kt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){ga(!0,kt)},className:b.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(xe.delete&&xe.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Ne,onClick:function(){ga(!1,kt)},className:b.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(xe.delete&&xe.person._id===kt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Ne,onClick:function(){ga(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:Object(ao.FormatDateFromString)(kt.bookingDate)}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:_e.bookingDateError,className:b.TextBox,value:He,onChange:function(e){Ge(e.target.value),Ee(Object(T.a)(Object(T.a)({},_e),{},{bookingDateError:!1})),At(!Pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:kt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:_e.bookingTimeError,className:b.TextBox,value:Ve,onChange:function(e){Ke(e.target.value),Ee(Object(T.a)(Object(T.a)({},_e),{},{bookingTimeError:!1})),At(!Pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:kt.fullname}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:Xe,onChange:function(e){$e(e.target.value),At(!Pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:kt.email}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:et,onChange:function(e){tt(e.target.value),At(!Pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{style:{marginBottom:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:null===(t=kt.gender)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:_e.genderError,className:b.TextBox,value:zn,onChange:function(e){Hn(e.target.value),Ee(Object(T.a)(Object(T.a)({},_e),{},{genderError:!1})),At(!Pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:Object(ao.FormatDateFromString)(kt.birthDate)}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:_e.birthDateError,className:b.TextBox,value:Vn,onChange:function(e){Kn(e.target.value),Ee(Object(T.a)(Object(T.a)({},_e),{},{birthDateError:!1})),At(!Pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:null===(n=kt.phone)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:it,onChange:function(e){ot(e.target.value),At(!Pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id,className:b.infoData,children:kt.notes}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:lt,onChange:function(e){dt(e.target.value),At(!Pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:je.edit&&je.person._id===kt._id,children:[!ee&&Sn&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){!function(e){var t;$e(e.fullname),Ge(Object(ao.FormatDateFromString)(e.bookingDate)),Ke(e.bookingTime.toUpperCase()),tt(e.email),ot(e.phone),Hn((null===(t=e.gender)||void 0===t?void 0:t.toUpperCase())||""),Kn(Object(ao.FormatDateFromString)(e.birthDate)),e.notes&&dt(e.notes),e.doctorNote&&bt(e.doctorNote),te(!0)}(kt)},className:b.SaveButton,children:"Add/Edit Doctor Note"})}),ee&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){ba(!1,kt)},className:b.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:je.edit&&je.person._id===kt._id||ee,className:b.infoData,children:kt.doctorNote}),Object(a.jsx)("span",{hidden:!(je.edit&&je.person._id===kt._id||ee),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[b.TextBox,b.active],value:jt,disabled:!Sn,onChange:function(e){bt(e.target.value),At(!Pt)},inputProps:{style:{padding:0}}})})]}),!Sn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"STATUS"})," ",(ka=kt.status,"booked"===ka?Object(a.jsx)("div",{className:b.BookedLabel,children:" Booking Made "}):"patient_attended"===ka?Object(a.jsx)("div",{className:b.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===kt.status&&!(je.edit&&je.person._id===kt._id)&&!kt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:Se,style:{width:"300px"},onClick:function(e){return t=kt._id,Be(!0),void no.changeBackToBookingMade(t).then((function(e){Be(!1),Ot(!mt)})).catch((function(e){console.log(e),Be(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===kt.status&&!(je.edit&&je.person._id===kt._id)&&!kt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:Se,style:{width:"300px"},onClick:function(e){return function(e){Vt(!0),de(e),dn(e.birthDate),vn(e.surname),fn(e.forename),pn(e.gender)}(kt)},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:kt.deleted||je.edit,children:Object(a.jsxs)(R.a,{disabled:Ha,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:Ua,className:b.DownloadForm,children:[!kt.printStatus&&"Print LAB Label","printed"===kt.printStatus&&"Print LAB Label Again","printing"===kt.printStatus&&"Printing","preparing"===kt.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:kt.deleted||je.edit,children:Object(a.jsx)(R.a,{disabled:!kt.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=kt._id,Zi.downloadGPRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:b.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:kt.deleted||je.edit||kt.formData,children:Object(a.jsxs)(R.a,{disabled:!kt.email||kt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=kt._id,Be(!0),N(!1),no.sendRegFormEmail(e).then((function(e){Be(!1),"OK"===e.data.status&&N(!0)})).catch((function(e){console.log(e),Be(!1)}))},className:b.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",S&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:b.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!An&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ","..."," "]}),An&&Rn&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ",Rn.invoiceNumber," "]}),An&&!Rn&&Object(a.jsxs)("span",{className:b.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(je.edit&&je.person._id===kt._id)&&!kt.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[An&&!Rn&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:b.PayButton,onClick:function(){return ya()},children:"Issue Invoice"}),An&&Rn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:b.printInvoiceButton,onClick:function(){return e=Rn._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.editInvoiceButton,onClick:function(){return ya()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!kt.email||kt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Rn._id,t=kt.email,Be(!0),A(!1),Wn.emailInvoice(e,t).then((function(e){Be(!1),"OK"===e.data.status&&A(!0)})).catch((function(e){console.log(e),Be(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",P&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:b.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px",color:"".concat(kt.prepaid?"#f70a79":""," ")},className:kt.OTCCharges&&0!==kt.OTCCharges?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat(kt.OTCCharges.toLocaleString("en-GB"))}),!(je.edit&&je.person._id===kt._id)&&!kt.paid&&!kt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.PayButton,onClick:function(e){return de(kt),void G(!0)},children:"Pay"}),!kt.paid&&kt.refund&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("span",{className:b.PayLabel,style:{color:"#e04209"},children:[" ",Object(a.jsx)(wn.a,{className:b.checkIconSmall,style:{color:"#e04209"}})," ","Online payment has been refunded."]})}),!(je.edit&&je.person._id===kt._id)&&kt.paid&&(kt.prepaid?Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("span",{className:b.PayLabel,style:{color:"#f70a79"},children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall,style:{color:"#f70a79"}})," ","Paid Online"]})}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:b.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall})," ","Paid by ",kt.paidBy,"corporate"===kt.paidBy?' "'.concat(kt.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return Mt(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]}))]}),kt.paymentInfo&&Object(a.jsx)("li",{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px dashed #84b076",borderRadius:"8px",padding:"10px",marginBottom:"20px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-10px",fontSize:"0.85em",background:"#fff",fontWeight:"600",color:"#32701d",padding:"0px 5px"},children:"Payment Details"}),JSON.parse(kt.paymentInfo).cardDetails?Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["cardBrand:"," ",Object(a.jsx)("strong",{children:null===(r=JSON.parse(kt.paymentInfo).cardDetails)||void 0===r?void 0:r.card.cardBrand})]}),Object(a.jsxs)(K.a,{item:!0,children:["expDate:"," ",Object(a.jsxs)("strong",{children:[null===(c=JSON.parse(kt.paymentInfo).cardDetails)||void 0===c?void 0:c.card.expMonth,"/",null===(d=JSON.parse(kt.paymentInfo).cardDetails)||void 0===d?void 0:d.card.expYear]})]}),Object(a.jsxs)(K.a,{item:!0,children:["last4:"," ",Object(a.jsx)("strong",{children:null===(s=JSON.parse(kt.paymentInfo).cardDetails)||void 0===s?void 0:s.card.last4})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(kt.paymentInfo).createdAt})]})]}):Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["Operator: ",Object(a.jsx)("strong",{children:"PAYPAL"})]}),Object(a.jsxs)(K.a,{item:!0,children:["Payer Name:"," ",Object(a.jsx)("strong",{children:"".concat(null===(u=JSON.parse(kt.paymentInfo).payer)||void 0===u?void 0:u.name.given_name," ").concat(null===(j=JSON.parse(kt.paymentInfo).payer)||void 0===j?void 0:j.name.surname," ")})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(kt.paymentInfo).create_time})]})]})]})}),Rn&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Rn.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Rn.items)]})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsx)("div",{style:{border:"1px dashed #285927",background:"#fafffa",padding:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{className:b.infoTitle,style:{color:"#2a422a"},children:"Ask for Review By EMAIL"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{children:kt.smsSent?Object(a.jsx)(Rt.a,{className:b.checkIcon}):Object(a.jsx)(It.a,{className:b.closeIcon})})}),Object(a.jsx)(K.a,{item:!0,xs:4,style:{paddingLeft:"20px"},children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Patient Source"}),Object(a.jsx)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Ja,onChange:function(e){qa(e.target.value),ii(Ya[e.target.value-1])},label:"Source",fullWidth:!0,children:[{value:1,text:"Medical Express Clinic"}].map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:"".concat(e.text)})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(R.a,{variant:"contained",disabled:Qa||(va=kt.email,!(va&&!(va.length<7))),color:"primary",className:b.PayButton,onClick:ei,children:"Send EMAIL"})})]})})}),$n&&$n.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),$n.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return oa(e),void da(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})," "]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:b.backdrop,open:Se||Ne||Pe,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(co,{booking:le,open:H,price:Rn?Rn.grandTotal:null,handleClose:function(){G(!1),de(null)}}),Object(a.jsx)(Yn,{booking:le,invoice:Rn,open:ie,handleClose:function(e){oe(!1),de(null),Jn()}}),Object(a.jsx)(Bo,{booking:ia,open:la,onClose:function(){da(!1),oa(null)}})]}),Object(a.jsxs)(qt.a,{open:Yt,onClose:ma,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===le||void 0===le?void 0:le.fullname)||(null===le||void 0===le?void 0:le.surname)+" "+(null===le||void 0===le?void 0:le.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===le||void 0===le?void 0:le.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===le||void 0===le?void 0:le.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===le||void 0===le?void 0:le.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:le,select:Oa}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:yn,onChange:function(e){vn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:gn,onChange:function(e){fn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:bn,onChange:function(e,t){pn(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:ln,onChange:function(e,t){dn(t)}})})}),Object(a.jsx)(R.a,{onClick:Oa,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:ma,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:Et,onClose:ua,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:ua,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ca,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:X,onClose:ja,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:ja,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Sa,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Ro=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),Lo=function e(){Object(ne.a)(this,e)};Lo.downloadSTDRegForm=function(e){return Ro.get("/api/pdf/downloadstdregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Io=n(353),Po=n.n(Io),Ao=function e(){Object(ne.a)(this,e)};Ao.setClinicNotes=function(e,t){return Ro.post("/api/std/book/setclinicnotes",{bookingId:e,notes:t})},Ao.getBloodReportsByBookingId=function(e){return Ro.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Ao.addNewBooking=function(e){return Ro.post("/api/std/book/addnewbooking",e)},Ao.sendRegFormEmail=function(e){return Ro.post("/api/std/book/sendregformemail?id=".concat(e))},Ao.sendForPrint=function(e){return Ro.post("/api/std/book/sendforprint?id=".concat(e))},Ao.payBooking=function(e,t,n,a){return Ro.post("/api/std/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Ao.unPayBooking=function(e){return Ro.post("/api/std/book/unpaybooking?id=".concat(e))},Ao.getShouldRefundsCount=function(){return Ro.get("/api/std/book/getshouldrefundscount?")},Ao.refundBooking=function(e){return Ro.post("/api/std/payment/refundpayment",{bookingId:e})},Ao.getBookingsStatsByDateStr=function(e){return Ro.get("/api/std/book/getbookingsstatsbydatestr?date=".concat(e))},Ao.getBookingsCountByDateStr=function(e){return Ro.get("/api/std/book/getbookingscountbydatestr?date=".concat(e))},Ao.getAllBookingsCountAll=function(){return Ro.get("/api/std/book/getallbookingscountall")},Ao.getBookingsCountByDateStrandTime=function(e,t,n){return Ro.get("/api/std/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ao.getBookingsByDateStrandTime=function(e,t){return Ro.get("/api/std/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ao.getAllBookingsCountByDateStr=function(e){return Ro.get("/api/std/book/getallbookingscountbydatestr?date=".concat(e))},Ao.getAllBookingsCountByDateStrandTime=function(e,t,n){return Ro.get("/api/std/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ao.getAllBookingsByDateStrandTime=function(e,t){return Ro.get("/api/std/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ao.changeBackToBookingMade=function(e){return Ro.post("/api/std/book/changebacktobookingmade?id=".concat(e))},Ao.changeToPatientAttended=function(e,t){return Ro.post("/api/std/book/changetopatientattended?id=".concat(e),t)},Ao.changeToCompleted=function(e){return Ro.post("/api/std/book/changetocompleted?id=".concat(e))},Ao.updateBooking=function(e){return Ro.post("/api/std/book/updatebookappointment",e)},Ao.updateBookingTime=function(e){return Ro.post("/api/std/book/updatebookappointmenttime",e)},Ao.deleteBooking=function(e){return Ro.post("/api/std/book/deletebookappointment?id=".concat(e))},Ao.unDeleteBooking=function(e){return Ro.post("/api/std/book/undeletebookappointment?id=".concat(e))},Ao.getBookingsByRef=function(e){return Ro.get("/api/std/book/getbookingsbyref?ref=".concat(e))},Ao.getBookingById=function(e){return Ro.get("/api/std/book/getbookingbyid?id=".concat(e))},Ao.getAllBookings=function(e){return e||(e=25),Ro.get("/api/std/book/getallbookings?limit=".concat(e))},Ao.getDeletedBookings=function(e){return e||(e=25),Ro.get("/api/std/book/getdeletedbookings?limit=".concat(e))},Ao.getTodayBookings=function(){return Ro.get("/api/std/book/gettodaybookings")},Ao.getLiveBookings=function(){return Ro.get("/api/std/book/getlivebookings")},Ao.getCompletedBookings=function(e){return Ro.get("/api/std/book/getcompletedbookings?limit=".concat(e))},Ao.getOldBookings=function(e){return e||(e=25),Ro.get("/api/std/book/getoldbookings?limit=".concat(e))},Ao.getFutureBookings=function(e){return e||(e=25),Ro.get("/api/std/book/getfuturebookings?limit=".concat(e))},Ao.getRecentBookings=function(){return Ro.get("/api/std/book/getrecentbookings")},Ao.getRecentBookingsAll=function(e){return e||(e=25),Ro.get("/api/std/book/getrecentbookingsall?limit=".concat(e))};var Fo=n(109),Wo=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function _o(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Eo(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Mo(e){var t=Wo(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Ao.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Eo,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"TOTAL Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:_o,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var zo=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Ho=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function Go(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Uo(e){var t,n,r=zo(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=Object(i.useState)(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(!1),y=Object(l.a)(O,2),v=(y[0],y[1],o.a.useState(!1)),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),_=W[0],E=W[1],z=o.a.useState(null),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(nn()),X=Object(l.a)(Y,2),$=X[0],Q=(X[1],o.a.useState({edit:!1,person:null})),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState({delete:!1,person:null}),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=o.a.useState({restore:!1,person:null}),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState(!1),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=o.a.useState(!1),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=o.a.useState({}),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(""),Te=Object(l.a)(we,2),Ne=Te[0],De=Te[1],Re=o.a.useState(""),Le=Object(l.a)(Re,2),Pe=Le[0],Ae=Le[1],Fe=o.a.useState(""),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(""),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(""),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],Je=o.a.useState(""),qe=Object(l.a)(Je,2),Xe=qe[0],$e=qe[1],Qe=o.a.useState(""),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=o.a.useState(""),at=Object(l.a)(nt,2),it=at[0],ot=at[1],rt=o.a.useState(""),ct=Object(l.a)(rt,2),lt=ct[0],dt=ct[1],st=o.a.useState(""),ut=Object(l.a)(st,2),jt=ut[0],bt=ut[1],pt=o.a.useState(!1),ht=Object(l.a)(pt,2),xt=ht[0],gt=ht[1],ft=o.a.useState(null),mt=Object(l.a)(ft,2),Ot=mt[0],yt=mt[1],vt=o.a.useState(!1),kt=Object(l.a)(vt,2),Ct=kt[0],St=kt[1],wt=o.a.useState(!1),Tt=Object(l.a)(wt,2),Nt=Tt[0],Dt=Tt[1],Lt=o.a.useState(!1),It=Object(l.a)(Lt,2),Pt=It[0],At=It[1],Wt=o.a.useState(!1),_t=Object(l.a)(Wt,2),Et=(_t[0],_t[1],o.a.useState(null)),Mt=Object(l.a)(Et,2),zt=Mt[0],Ht=Mt[1],Gt=o.a.useState(null),Ut=Object(l.a)(Gt,2),Yt=(Ut[0],Ut[1]),Vt=o.a.useState(null),Zt=Object(l.a)(Vt,2),en=Zt[0],tn=Zt[1],an=o.a.useState(null),cn=Object(l.a)(an,2),ln=cn[0],dn=cn[1],sn=o.a.useState(null),jn=Object(l.a)(sn,2),bn=jn[0],pn=jn[1],hn=o.a.useState(null),xn=Object(l.a)(hn,2),gn=xn[0],fn=xn[1],mn=function(){At(!1),U(null)},On=function(){A(!1),U(null)};Object(i.useEffect)((function(){if(Ot){var e=Ne!==Object(Fo.FormatDateFromString)(Ot.bookingDate)||Pe!==Ot.bookingTime||_e!==Ot.fullname||He!==Ot.email||Ve!==Ot.phone||Xe!==Ot.notes||it!==Ot.packageName||jt!==Ot.birthDate||lt!==Ot.gender||et!==Ot.doctorNote;St(e)}}),[Nt]),Object(i.useEffect)((function(){e.open||setTimeout((function(){te({edit:!1,person:null}),St(!1)}),500)}),[e.open]);var yn=function(e,t){var n;if(e)Ee(t.fullname),De(Object(Fo.FormatDateFromString)(t.bookingDate)),Ae(t.bookingTime.toUpperCase()),Ge(t.email),Ke(t.phone),dt((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),bt(Object(Fo.FormatDateFromString)(t.birthDate)),ot(t.packageName),t.notes&&$e(t.notes),t.doctorNote&&tt(t.doctorNote),te({edit:e,person:t});else if(e||t){if(!e&&t){var a={},i=t._id;a.email=He,a.phone=Ve,a.fullname=_e,a.notes=Xe,a.doctorNote=et,a.packageName=it,a.bookingDate=Object(Fo.RevertFormatDateFromString)(Ne),a.bookingTime=Pe,a.bookingRef=t.bookingRef,a.gender=lt,a.birthDate=Object(Fo.RevertFormatDateFromString)(jt),kn(a)&&(Cn({bookingId:i,person:a}),E(!1))}}else te({edit:e,person:t}),St(!1)},vn=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},kn=function(e){var t=!1;return vn(e.bookingDate)||(t=!0,Be(Object(T.a)(Object(T.a)({},Se),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Be(Object(T.a)(Object(T.a)({},Se),{},{bookingTimeError:!0}))),e.birthDate&&!vn(e.birthDate)&&(t=!0,Be(Object(T.a)(Object(T.a)({},Se),{},{birthDateError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Be(Object(T.a)(Object(T.a)({},Se),{},{genderError:!0}))),!t},Cn=function(e){be(!0),Ao.updateBooking(e).then((function(e){be(!1),te({edit:!1,person:null}),gt(!xt)})).catch((function(e){be(!1),te({edit:!1,person:null}),console.log(e)}))},Sn=function(e,t){var n;e?oe({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),Ao.deleteBooking(n).then((function(e){ge(!1),oe({delete:!1,person:null}),gt(!xt)})).catch((function(e){ge(!1),oe({delete:!1,person:null}),console.log(e)}))):oe({delete:e,person:t})},Bn=function(e,t){var n;e?de({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ve(!0),Ao.unDeleteBooking(n).then((function(e){ve(!1),de({restore:!1,person:null}),gt(!xt)})).catch((function(e){ve(!1),de({restore:!1,person:null}),console.log(e)}))):de({restore:e,person:t})},Tn=function(){Ht(!1),Yt(null),tn(null),fn(null),pn(null),dn(null)},Rn=function(e,t){be(!0),Ao.changeToPatientAttended(G._id,{patientid:t||null,birthDate:en,forename:bn,surname:gn,gender:ln}).then((function(e){be(!1),gt(!xt),Tn()})).catch((function(e){console.log(e),be(!1)}))};Object(i.useEffect)((function(){e.booking&&(Ao.getBookingById(e.booking._id).then((function(e){yt(e.data)})).catch((function(e){console.log(e)})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[xt,s.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&yt(e.booking)}),[e.booking]);var Ln=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(!0),e.prev=1,e.next=4,Ao.unPayBooking(Ot._id);case 4:be(!1),At(!1),gt(!xt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),be(!1),At(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),In=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(!0),e.prev=1,e.next=4,Ao.refundBooking(Ot._id);case 4:be(!1),Pn(),A(!1),gt(!xt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),be(!1),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Pn=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ao.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&u((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),An=o.a.useState(null),_n=Object(l.a)(An,2),En=_n[0],Mn=_n[1],zn=o.a.useState(!1),Hn=Object(l.a)(zn,2),Gn=Hn[0],Un=Hn[1],Vn=o.a.useState(!1),Kn=Object(l.a)(Vn,2),Jn=Kn[0],qn=Kn[1],Xn=o.a.useState(!1),$n=Object(l.a)(Xn,2),ta=$n[0],na=$n[1],aa=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Un(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Mn(n.data.invoice),Un(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Un(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(aa(),ga(),va(e.booking.clinicNotes||""),Ba(e.booking.clinicNotes||""),Da(!1))}),[e.booking,e.open]);var ia,oa=o.a.useState(null),ra=Object(l.a)(oa,2),ca=ra[0],la=ra[1],da=o.a.useState(null),sa=Object(l.a)(da,2),ua=sa[0],ja=sa[1],ba=o.a.useState(null),pa=Object(l.a)(ba,2),ha=pa[0],xa=pa[1],ga=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return la(null),t.prev=1,t.next=4,Ao.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&la(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),fa=function(){U(Ot),Mn(En),qn(!0)},ma=o.a.useState(""),Oa=Object(l.a)(ma,2),ya=Oa[0],va=Oa[1],ka=o.a.useState(""),Ca=Object(l.a)(ka,2),Sa=Ca[0],Ba=Ca[1],wa=Object(i.useState)(!1),Ta=Object(l.a)(wa,2),Na=Ta[0],Da=Ta[1],Ra=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Da(!0),t.next=4,Ao.setClinicNotes(e.booking._id,ya);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(Ba(ya),Da(!1),gt(!xt)):Da(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Da(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),La=Object(i.useState)(!1),Ia=Object(l.a)(La,2),Pa=Ia[0],Aa=Ia[1],Fa=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{Aa(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),Aa(!1)}catch(p){Aa(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:Ot&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:Ho,keepMounted:!0,onClose:function(){m(!1),na(!1),Mn(null),e.onClose()},PaperComponent:Go,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:Ot.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/std/".concat(Ot._id)),h(!0),setTimeout((function(){h(!1)}),1500)},"aria-label":"delete",className:r.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:Ot.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!p,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(ya?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:ya||"",onChange:function(e){va(e.target.value)},variant:"outlined"})}),Na&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Sa!==ya&&!Na&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(ya?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:Ra,className:r.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Fn.STD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"STD"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Ot.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Ot.fullname)})}),Ot.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:Ot.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:r.infoDetails,children:Object(a.jsxs)("ul",{className:r.ul,children:[!$&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===Ot._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Ot.deleted||le.restore&&le.person._id===Ot._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Bn(!0,Ot)},className:r.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Oe,onClick:function(){Bn(!1,Ot)},className:r.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Oe,onClick:function(){Bn(!1,null)},className:r.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:Ot.deleted||ie.delete||ee.edit&&ee.person._id===Ot._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){yn(!0,Ot)},className:r.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:je||!Ct,onClick:function(){yn(!1,Ot)},className:r.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:je,onClick:function(){yn(!1,null)},className:r.CancelButton,children:"Cancel"})}),!$&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(ie.delete&&ie.person._id===Ot._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Ot.deleted||ee.edit||ie.delete&&ie.person._id===Ot._id,children:[Ot.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Ot.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Sn(!0,Ot)},className:r.DeleteButton,children:"Delete This Record"})})}),0===Ot.OTCCharges&&Object(a.jsx)(R.a,{disabled:Ot.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Sn(!0,Ot)},className:r.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ie.delete&&ie.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:xe,onClick:function(){Sn(!1,Ot)},className:r.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ie.delete&&ie.person._id===Ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:xe,onClick:function(){Sn(!1,null)},className:r.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Object(Fo.FormatDateFromString)(Ot.bookingDate)}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.bookingDateError,className:r.TextBox,value:Ne,onChange:function(e){De(e.target.value),Be(Object(T.a)(Object(T.a)({},Se),{},{bookingDateError:!1})),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.bookingTimeError,className:r.TextBox,value:Pe,onChange:function(e){Ae(e.target.value),Be(Object(T.a)(Object(T.a)({},Se),{},{bookingTimeError:!1})),Dt(!Nt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.fullname}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:_e,onChange:function(e){Ee(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.email}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:He,onChange:function(e){Ge(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:null===(t=Ot.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:Ve,onChange:function(e){Ke(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.notes}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:Xe,onChange:function(e){$e(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{style:{marginBottom:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:null===(n=Ot.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.genderError,className:r.TextBox,value:lt,onChange:function(e){dt(e.target.value),Be(Object(T.a)(Object(T.a)({},Se),{},{genderError:!1})),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Object(Fo.FormatDateFromString)(Ot.birthDate)}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.birthDateError,className:r.TextBox,value:jt,onChange:function(e){bt(e.target.value),Be(Object(T.a)(Object(T.a)({},Se),{},{birthDateError:!1})),Dt(!Nt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:r.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.packageName}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:it,onChange:function(e){ot(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:r.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:ee.edit&&ee.person._id===Ot._id,children:[!_&&$&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){!function(e){var t;Ee(e.fullname),De(Object(Fo.FormatDateFromString)(e.bookingDate)),Ae(e.bookingTime.toUpperCase()),Ge(e.email),Ke(e.phone),dt((null===(t=e.gender)||void 0===t?void 0:t.toUpperCase())||""),bt(Object(Fo.FormatDateFromString)(e.birthDate)),ot(e.packageName),e.notes&&$e(e.notes),e.doctorNote&&tt(e.doctorNote),E(!0)}(Ot)},className:r.SaveButton,children:"Add/Edit Doctor Note"})}),_&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){yn(!1,Ot)},className:r.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id||_,className:r.infoData,children:Ot.doctorNote}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===Ot._id||_),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[r.TextBox,r.active],value:et,disabled:!$,onChange:function(e){tt(e.target.value),Dt(!Nt)},inputProps:{style:{padding:0}}})})]}),!$&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:r.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"STATUS"})," ",(ia=Ot.status,"booked"===ia?Object(a.jsx)("div",{className:r.BookedLabel,children:" Booking Made "}):"patient_attended"===ia?Object(a.jsx)("div",{className:r.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===ia?Object(a.jsx)("div",{className:r.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===Ot.status&&!(ee.edit&&ee.person._id===Ot._id)&&!Ot.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:je,style:{width:"300px"},onClick:function(e){return t=Ot._id,be(!0),void Ao.changeBackToBookingMade(t).then((function(e){be(!1),gt(!xt)})).catch((function(e){console.log(e),be(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:je,style:{width:"200px",margin:"0"},className:r.EditButton,onClick:function(e){return t=Ot._id,be(!0),void Ao.changeToCompleted(t).then((function(e){be(!1),gt(!xt)})).catch((function(e){console.log(e),be(!1)}));var t},children:"Change To Completed"})]}),"booked"===Ot.status&&!(ee.edit&&ee.person._id===Ot._id)&&!Ot.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:je,style:{width:"300px"},onClick:function(e){return function(e){Ht(!0),U(e),tn(e.birthDate),fn(e.surname),pn(e.forename),dn(e.gender)}(Ot)},children:"Change To Patient Attended"}),"report_sent"===Ot.status&&!(ee.edit&&ee.person._id===Ot._id)&&!Ot.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:je,style:{width:"300px"},onClick:function(e){return Rn(0,Ot._id)},children:"Change Back To Patient Attended"})]}),Object(a.jsxs)("li",{className:r.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===Ot._id,className:r.infoData,children:Ot.estimatedPrice})]}),Object(a.jsx)("li",{hidden:Ot.deleted||ee.edit,children:Object(a.jsxs)(R.a,{disabled:Pa,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:Fa,className:r.DownloadForm,children:[!Ot.printStatus&&"Print LAB Label","printed"===Ot.printStatus&&"Print LAB Label Again","printing"===Ot.printStatus&&"Printing","preparing"===Ot.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:Ot.deleted||ee.edit,children:Object(a.jsx)(R.a,{disabled:!Ot.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Ot._id,Lo.downloadSTDRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:r.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Ot.deleted||ee.edit||Ot.formData,children:Object(a.jsxs)(R.a,{disabled:!Ot.email||Ot.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Ot._id,be(!0),m(!1),Ao.sendRegFormEmail(e).then((function(e){be(!1),"OK"===e.data.status&&m(!0)})).catch((function(e){console.log(e),be(!1)}))},className:r.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:r.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:r.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Gn&&Object(a.jsxs)("span",{className:r.invoiceNumber,children:[" ","..."," "]}),Gn&&En&&Object(a.jsxs)("span",{className:r.invoiceNumber,children:[" ",En.invoiceNumber," "]}),Gn&&!En&&Object(a.jsxs)("span",{className:r.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(ee.edit&&ee.person._id===Ot._id)&&!Ot.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[Gn&&!En&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:r.PayButton,onClick:function(){return fa()},children:"Issue Invoice"}),Gn&&En&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:r.printInvoiceButton,onClick:function(){return e=En._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:r.editInvoiceButton,onClick:function(){return fa()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Ot.email||Ot.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=En._id,t=Ot.email,be(!0),na(!1),Wn.emailInvoice(e,t).then((function(e){be(!1),"OK"===e.data.status&&na(!0)})).catch((function(e){console.log(e),be(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",ta&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:r.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Ot.OTCCharges&&0!==Ot.OTCCharges?r.infoDataCharges:r.infoDataChargesHigher,children:"\xa3".concat(Ot.OTCCharges.toLocaleString("en-GB"))}),!(ee.edit&&ee.person._id===Ot._id)&&!Ot.paid&&!Ot.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:r.PayButton,onClick:function(e){return Ot._id,U(Ot),void N(!0)},children:"Pay"}),!(ee.edit&&ee.person._id===Ot._id)&&Ot.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:r.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:r.checkIconSmall})," ","Paid by ",Ot.paidBy,"corporate"===Ot.paidBy?' "'.concat(Ot.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return At(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),En&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[En.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(En.items)]})]})]}),ca&&ca.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),ca.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ja(e),void xa(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})," "]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:r.backdrop,open:je||xe||Oe,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(Mo,{booking:G,open:S,price:En?En.grandTotal:null,handleClose:function(){N(!1),U(null)}}),Object(a.jsx)(Yn,{booking:G,invoice:En,open:Jn,handleClose:function(e){qn(!1),U(null),aa()}}),Object(a.jsx)(Bo,{booking:ua,open:ha,onClose:function(){xa(!1),ja(null)}})]}),Object(a.jsxs)(qt.a,{open:zt,onClose:Tn,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===G||void 0===G?void 0:G.fullname)||(null===G||void 0===G?void 0:G.surname)+" "+(null===G||void 0===G?void 0:G.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===G||void 0===G?void 0:G.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===G||void 0===G?void 0:G.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===G||void 0===G?void 0:G.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:G,select:Rn}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:gn,onChange:function(e){fn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:bn,onChange:function(e){pn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:ln,onChange:function(e,t){dn(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:en,onChange:function(e,t){tn(t)}})})}),Object(a.jsx)(R.a,{onClick:Rn,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:Tn,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:Pt,onClose:mn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:mn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ln,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:P,onClose:On,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:On,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:In,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Yo=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},Vo=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function Ko(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Jo(e){var t=Vo(),n=o.a.useContext(C),i=Object(l.a)(n,2),r=(i[0],i[1],o.a.useState(null)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(null),j=Object(l.a)(u,2),b=j[0],p=j[1];o.a.useEffect((function(){s(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if(e[t].timeStamp)return e[t].timeStamp;return null}(e.bloodReports)),p(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if(e[t].emailSentTimeStamp)return e[t].emailSentTimeStamp;return null}(e.bloodReports))}),[e.booking,e.bloodReports]);var h=function(){s(null),p(null),e.handleClose()};return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:h,PaperComponent:Ko,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:Rn()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(Yo(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(Yo(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),d?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(d,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),b?Object(a.jsxs)("span",{className:t.itemData,children:[" ",Rn()(b,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:h,color:"default",children:"Back"})})]})})})}var qo=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0 6px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Xo=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function $o(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Qo(e){var t,n,r,c,d,s,u,j,b=qo(),p=o.a.useContext(C),h=Object(l.a)(p,2),x=h[0],g=h[1],f=Object(i.useState)(!1),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(!1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=(I[0],I[1],o.a.useState(!1)),A=Object(l.a)(P,2),F=A[0],W=A[1],_=o.a.useState(!1),E=Object(l.a)(_,2),H=E[0],G=E[1],Y=o.a.useState(!1),X=Object(l.a)(Y,2),$=X[0],Q=X[1],Z=o.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState({edit:!1,person:null}),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState({delete:!1,person:null}),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState({restore:!1,person:null}),je=Object(l.a)(ue,2),be=je[0],pe=je[1],xe=o.a.useState(!1),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=o.a.useState(!1),ve=Object(l.a)(Oe,2),ke=ve[0],Ce=ve[1],Se=o.a.useState(!1),Be=Object(l.a)(Se,2),we=Be[0],Te=Be[1],Ne=o.a.useState({}),De=Object(l.a)(Ne,2),Re=De[0],Le=De[1],Pe=o.a.useState(""),Ae=Object(l.a)(Pe,2),Fe=Ae[0],We=Ae[1],_e=o.a.useState(""),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=o.a.useState(""),Ge=Object(l.a)(He,2),Ue=Ge[0],Ye=Ge[1],Ve=o.a.useState(""),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(""),$e=Object(l.a)(Xe,2),Qe=$e[0],Ze=$e[1],et=o.a.useState(""),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(""),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=o.a.useState(""),dt=Object(l.a)(lt,2),st=dt[0],ut=dt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=o.a.useState(!1),gt=Object(l.a)(xt,2),ft=gt[0],mt=gt[1],Ot=o.a.useState(null),yt=Object(l.a)(Ot,2),vt=yt[0],kt=yt[1],Ct=o.a.useState(!1),St=Object(l.a)(Ct,2),wt=St[0],Tt=St[1],Nt=o.a.useState(!1),Dt=Object(l.a)(Nt,2),Lt=Dt[0],Pt=Dt[1],At=o.a.useState(!1),Wt=Object(l.a)(At,2),_t=Wt[0],Et=Wt[1],Mt=o.a.useState(!1),zt=Object(l.a)(Mt,2),Ht=zt[0],Gt=zt[1],Ut=o.a.useState(null),Yt=Object(l.a)(Ut,2),Vt=Yt[0],en=Yt[1],tn=o.a.useState(null),an=Object(l.a)(tn,2),cn=(an[0],an[1]),ln=o.a.useState(null),dn=Object(l.a)(ln,2),sn=dn[0],jn=dn[1],bn=o.a.useState(null),pn=Object(l.a)(bn,2),hn=pn[0],xn=pn[1],gn=o.a.useState(null),fn=Object(l.a)(gn,2),mn=fn[0],On=fn[1],yn=o.a.useState(null),vn=Object(l.a)(yn,2),kn=vn[0],Cn=vn[1],Sn=o.a.useState(nn()),Bn=Object(l.a)(Sn,2),Tn=Bn[0],Rn=(Bn[1],function(){Et(!1),ne(null)}),Ln=function(){G(!1),ne(null)};Object(i.useEffect)((function(){if(vt){var e=Fe!==Object(xo.FormatDateFromString)(vt.bookingDate)||Me!==vt.bookingTime||Ue!==vt.fullname||Ra!==Object(xo.FormatDateFromString)(vt.birthDate)||Je!==vt.email||Qe!==vt.phone||nt!==vt.gender||rt!==vt.notes||pt!==vt.packageName||st!==vt.doctorNote;Tt(e)}}),[Lt]),Object(i.useEffect)((function(){e.open?e.open:setTimeout((function(){re({edit:!1,person:null}),Tt(!1)}),500)}),[e.open]);var In=function(e,t){var n;if(e)Ye(t.fullname),We(Object(xo.FormatDateFromString)(t.bookingDate)),ze(t.bookingTime.toUpperCase()),qe(t.email),Ze(t.phone),at((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),La(Object(xo.FormatDateFromString)(t.birthDate)),ht(t.packageName),t.notes&&ct(t.notes),t.doctorNote&&ut(t.doctorNote),re({edit:e,person:t});else if(e||t){if(!e&&t){var a={},i=t._id;a.email=Je,a.phone=Qe,a.fullname=Ue,a.notes=rt,a.doctorNote=st,a.birthDate=Object(xo.RevertFormatDateFromString)(Ra),a.packageName=pt,a.bookingDate=Object(xo.RevertFormatDateFromString)(Fe),a.bookingTime=Me,a.bookingRef=t.bookingRef,a.gender=nt,An(a)&&(_n({bookingId:i,person:a}),Q(!1))}}else re({edit:e,person:t}),Tt(!1)},Pn=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},An=function(e){console.log(e);var t=!1;return Pn(e.bookingDate)||(t=!0,Le(Object(T.a)(Object(T.a)({},Re),{},{bookingDateError:!0}))),Pn(e.birthDate)||(t=!0,Le(Object(T.a)(Object(T.a)({},Re),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Le(Object(T.a)(Object(T.a)({},Re),{},{bookingTimeError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Le(Object(T.a)(Object(T.a)({},Re),{},{genderError:!0}))),!t},_n=function(e){me(!0),ho.updateBooking(e).then((function(e){me(!1),re({edit:!1,person:null}),mt(!ft)})).catch((function(e){me(!1),re({edit:!1,person:null}),console.log(e)}))},En=function(e,t){var n;e?se({delete:e,person:t}):e||t?!e&&t&&(n=t._id,Ce(!0),ho.deleteBooking(n).then((function(e){Ce(!1),se({delete:!1,person:null}),mt(!ft)})).catch((function(e){Ce(!1),se({delete:!1,person:null}),console.log(e)}))):se({delete:e,person:t})},Mn=function(e,t){var n;e?pe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Te(!0),ho.unDeleteBooking(n).then((function(e){Te(!1),pe({restore:!1,person:null}),mt(!ft)})).catch((function(e){Te(!1),pe({restore:!1,person:null}),console.log(e)}))):pe({restore:e,person:t})},zn=function(){en(!1),cn(null),jn(null),Cn(null),On(null),xn(null)},Hn=function(e,t){me(!0),ho.changeToPatientAttended(te._id,{patientid:t||null,birthDate:sn,forename:mn,surname:kn,gender:hn}).then((function(e){me(!1),mt(!ft),zn()})).catch((function(e){console.log(e),me(!1)}))};Object(i.useEffect)((function(){e.booking&&(ho.getBookingById(e.booking._id).then((function(e){kt(e.data)})).catch((function(e){console.log(e)})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[ft,x.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&kt(e.booking)}),[e.booking]);var Gn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.prev=1,e.next=4,ho.unPayBooking(vt._id);case 4:me(!1),Et(!1),mt(!ft),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),me(!1),Et(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Un=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.prev=1,e.next=4,ho.refundBooking(vt._id);case 4:me(!1),Vn(),G(!1),mt(!ft),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),me(!1),G(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Vn=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&g((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Kn=o.a.useState(null),Jn=Object(l.a)(Kn,2),qn=Jn[0],Xn=Jn[1],$n=o.a.useState(!1),ta=Object(l.a)($n,2),na=ta[0],aa=ta[1],ia=o.a.useState(!1),oa=Object(l.a)(ia,2),ra=oa[0],ca=oa[1],la=o.a.useState(!1),da=Object(l.a)(la,2),sa=da[0],ua=da[1],ja=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,aa(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Xn(n.data.invoice),aa(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),aa(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(ja(),wa(),_a(e.booking.clinicNotes||""),Ha(e.booking.clinicNotes||""),Va(!1))}),[e.booking,e.open]);var ba,pa,ha=o.a.useState(null),xa=Object(l.a)(ha,2),ga=xa[0],fa=xa[1],ma=o.a.useState(null),Oa=Object(l.a)(ma,2),ya=Oa[0],va=Oa[1],ka=o.a.useState(null),Ca=Object(l.a)(ka,2),Sa=Ca[0],Ba=Ca[1],wa=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return fa(null),t.prev=1,t.next=4,ho.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&fa(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),Ta=function(){ne(vt),Xn(qn),ca(!0)},Na=o.a.useState(""),Da=Object(l.a)(Na,2),Ra=Da[0],La=Da[1],Ia=function(){var e=Object(w.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?50:0,me(!0),e.prev=3,e.next=6,ho.changeDepositBooking(vt._id,a);case 6:me(!1),mt(!ft),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),me(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Pa=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.prev=1,e.next=4,ho.manualRefundBooking(vt._id);case 4:me(!1),Vn(),mt(!ft),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),me(!1),G(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Aa=o.a.useState(""),Fa=Object(l.a)(Aa,2),Wa=Fa[0],_a=Fa[1],Ea=o.a.useState(""),Ma=Object(l.a)(Ea,2),za=Ma[0],Ha=Ma[1],Ga=Object(i.useState)(!1),Ua=Object(l.a)(Ga,2),Ya=Ua[0],Va=Ua[1],Ka=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Va(!0),t.next=4,ho.setClinicNotes(e.booking._id,Wa);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(Ha(Wa),Va(!1),mt(!ft)):Va(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Va(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),Ja=Object(i.useState)(!1),qa=Object(l.a)(Ja,2),Xa=qa[0],$a=qa[1],Qa=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{$a(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),$a(!1)}catch(p){$a(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Za=["It was great to see and treat you at the Medical Express Clinic, Please let us know how you got on by clicking here: https://g.page/r/CZcAyTF67Ec0EBM/review"],ei=Object(i.useState)(1),ti=Object(l.a)(ei,2),ni=ti[0],ai=ti[1],ii=Object(i.useState)(!1),oi=Object(l.a)(ii,2),ri=oi[0],ci=oi[1],li=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ci(!0),e.prev=1,e.next=4,ho.sendReviewSMS(vt._id,ui);case 4:(t=e.sent)&&t.data&&"OK"===t.data.status&&(kt((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!0})})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})}))),ci(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ci(!1),kt((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!1})}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),di=Object(i.useState)(Za[0]),si=Object(l.a)(di,2),ui=si[0],ji=si[1];return Object(a.jsx)(o.a.Fragment,{children:vt&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:Xo,keepMounted:!0,onClose:function(){N(!1),ua(!1),Xn(null),e.onClose()},PaperComponent:$o,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:vt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/blood/".concat(vt._id)),y(!0),setTimeout((function(){y(!1)}),1500)},"aria-label":"delete",className:b.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:vt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!O,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(Wa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:Wa||"",onChange:function(e){_a(e.target.value)},variant:"outlined"})}),Ya&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),za!==Wa&&!Ya&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(Wa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:Ka,className:b.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Fn.BLOOD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:vt.doctorConsultation?"Blood + Doctor Consultation":"Blood"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:vt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(vt.fullname)})}),vt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:vt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:b.infoDetails,children:Object(a.jsxs)("ul",{className:b.ul,children:[!Tn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(be.restore&&be.person._id===vt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!vt.deleted||be.restore&&be.person._id===vt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Mn(!0,vt)},className:b.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(be.restore&&be.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:we,onClick:function(){Mn(!1,vt)},className:b.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(be.restore&&be.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:we,onClick:function(){Mn(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:vt.deleted||de.delete||oe.edit&&oe.person._id===vt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){In(!0,vt)},className:b.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(oe.edit&&oe.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:fe||!wt,onClick:function(){In(!1,vt)},className:b.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(oe.edit&&oe.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:fe,onClick:function(){In(!1,null)},className:b.CancelButton,children:"Cancel"})}),!Tn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(de.delete&&de.person._id===vt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||vt.deleted||oe.edit||de.delete&&de.person._id===vt._id,children:[vt.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:vt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){En(!0,vt)},className:b.DeleteButton,children:"Delete This Record"})})}),0===vt.OTCCharges&&Object(a.jsx)(R.a,{disabled:vt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){En(!0,vt)},className:b.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(de.delete&&de.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ke,onClick:function(){En(!1,vt)},className:b.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(de.delete&&de.person._id===vt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ke,onClick:function(){En(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:Object(xo.FormatDateFromString)(vt.bookingDate)}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Re.bookingDateError,className:b.TextBox,value:Fe,onChange:function(e){We(e.target.value),Le(Object(T.a)(Object(T.a)({},Re),{},{bookingDateError:!1})),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Re.bookingTimeError,className:b.TextBox,value:Me,onChange:function(e){ze(e.target.value),Le(Object(T.a)(Object(T.a)({},Re),{},{bookingTimeError:!1})),Pt(!Lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.fullname}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:Ue,onChange:function(e){Ye(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.email}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:Je,onChange:function(e){qe(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:null===(t=vt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:Qe,onChange:function(e){Ze(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:Object(xo.FormatDateFromString)(vt.birthDate)}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Re.dobError,className:b.TextBox,value:Ra,onChange:function(e){La(e.target.value),Le(Object(T.a)(Object(T.a)({},Re),{},{dobError:!1})),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:null===(n=vt.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Re.genderError,className:b.TextBox,value:nt,onChange:function(e){at(e.target.value),Le(Object(T.a)(Object(T.a)({},Re),{},{genderError:!1})),Pt(!Lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.packageName}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:pt,onChange:function(e){ht(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"Indivisual Tests"}),Object(a.jsx)("span",{className:b.infoData,children:function(e){if(!e)return"-";var t=JSON.parse(e),n="";return t.forEach((function(e){n+=e.description,n+=" , "})),n}(vt.indivisualTests)})]}),Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.notes}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:rt,onChange:function(e){ct(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:oe.edit&&oe.person._id===vt._id,children:[!$&&Tn&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){!function(e){var t;Ye(e.fullname),We(Object(xo.FormatDateFromString)(e.bookingDate)),ze(e.bookingTime.toUpperCase()),qe(e.email),Ze(e.phone),at((null===(t=e.gender)||void 0===t?void 0:t.toUpperCase())||""),La(Object(xo.FormatDateFromString)(e.birthDate)),ht(e.packageName),e.notes&&ct(e.notes),e.doctorNote&&ut(e.doctorNote),Q(!0)}(vt)},className:b.SaveButton,children:"Add/Edit Doctor Note"})}),$&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){In(!1,vt)},className:b.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id||$,className:b.infoData,children:vt.doctorNote}),Object(a.jsx)("span",{hidden:!(oe.edit&&oe.person._id===vt._id||$),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[b.TextBox,b.active],value:st,disabled:!Tn,onChange:function(e){ut(e.target.value),Pt(!Lt)},inputProps:{style:{padding:0}}})})]}),!Tn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"STATUS"})," ",(pa=vt.status,"booked"===pa?Object(a.jsx)("div",{className:b.BookedLabel,children:" Booking Made "}):"patient_attended"===pa?Object(a.jsx)("div",{className:b.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===pa?Object(a.jsx)("div",{className:b.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===vt.status&&!(oe.edit&&oe.person._id===vt._id)&&!vt.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:fe,style:{width:"300px"},onClick:function(e){return t=vt._id,me(!0),void ho.changeBackToBookingMade(t).then((function(e){me(!1),mt(!ft)})).catch((function(e){console.log(e),me(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:fe,style:{width:"200px",margin:"0"},className:b.EditButton,onClick:function(e){return t=vt._id,me(!0),void ho.changeToCompleted(t).then((function(e){me(!1),mt(!ft)})).catch((function(e){console.log(e),me(!1)}));var t},children:"Change To Completed"})]}),"booked"===vt.status&&!(oe.edit&&oe.person._id===vt._id)&&!vt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:fe,style:{width:"300px"},onClick:function(e){return function(e){en(!0),ne(e),jn(e.birthDate),Cn(e.surname),On(e.forename),xn(e.gender)}(vt)},children:"Change To Patient Attended"}),"report_sent"===vt.status&&!(oe.edit&&oe.person._id===vt._id)&&!vt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:fe,style:{width:"300px"},onClick:function(e){return Hn(0,vt._id)},children:"Change Back To Patient Attended"})]}),Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:oe.edit&&oe.person._id===vt._id,className:b.infoData,children:vt.estimatedPrice})]}),Object(a.jsx)("li",{hidden:vt.deleted||oe.edit,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Ft.a,{}),disabled:Xa,type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:Qa,className:b.DownloadForm,children:Xa?"Printing...":"Print LAB Label"})}),Object(a.jsx)("li",{hidden:vt.deleted||oe.edit,children:Object(a.jsx)(R.a,{disabled:!vt.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=vt._id,uo.downloadBloodRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:b.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:vt.deleted||oe.edit||vt.formData,children:Object(a.jsxs)(R.a,{disabled:!vt.email||vt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=vt._id,me(!0),N(!1),ho.sendRegFormEmail(e).then((function(e){me(!1),"OK"===e.data.status&&N(!0)})).catch((function(e){console.log(e),me(!1)}))},className:b.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",S&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){ne(vt),Gt(!0)},className:b.DownloadForm,children:"Show Audit Trail"})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:b.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!na&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ","..."," "]}),na&&qn&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ",qn.invoiceNumber," "]}),na&&!qn&&Object(a.jsxs)("span",{className:b.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(oe.edit&&oe.person._id===vt._id)&&!vt.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[na&&!qn&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:b.PayButton,onClick:function(){return Ta()},children:"Issue Invoice"}),na&&qn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:b.printInvoiceButton,onClick:function(){return e=qn._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.editInvoiceButton,onClick:function(){return Ta()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!vt.email||vt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=qn._id,t=vt.email,me(!0),ua(!1),Wn.emailInvoice(e,t).then((function(e){me(!1),"OK"===e.data.status&&ua(!0)})).catch((function(e){console.log(e),me(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",sa&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,children:[vt.paymentInfo?"ONLINE":"PHONE"," ","DEPOSIT"]})," ",Object(a.jsx)("span",{className:vt.deposit&&0!==vt.deposit?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat(vt.deposit.toLocaleString("en-GB"))}),!(oe.edit&&oe.person._id===vt._id)&&!vt.paid&&vt.deleted&&vt.deposit>0&&vt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.PayButton,onClick:function(e){return G(!0)},children:"Refund Deposit"}),!(oe.edit&&oe.person._id===vt._id)&&!vt.paid&&vt.deleted&&vt.deposit>0&&!vt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:b.PayButton,onClick:function(e){return Pa()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(oe.edit&&oe.person._id===vt._id)&&!vt.deleted&&!vt.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Zt.a,{color:"primary",checked:vt.deposit>0,onChange:Ia,name:"deposit"}),label:vt.deposit>0?Object(a.jsx)("span",{className:b.PriceLabelPaid,children:"\xa350 Deposit Paid"}):Object(a.jsx)("span",{className:b.PriceLabelNotPaid,children:"\xa350 Deposit Not Paid"})}),!(oe.edit&&oe.person._id===vt._id)&&vt.refund&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("span",{className:b.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall})," ","Refund Done","corporate"===vt.paidBy?' "'.concat(vt.corporate,'" '):""]})})]})}),vt.paymentInfo&&Object(a.jsx)("li",{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px dashed #84b076",borderRadius:"8px",padding:"10px",marginBottom:"10px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-10px",fontSize:"0.85em",background:"#fff",fontWeight:"600",color:"#32701d",padding:"0px 5px"},children:"Payment Details"}),JSON.parse(vt.paymentInfo).cardDetails?Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["cardBrand:"," ",Object(a.jsx)("strong",{children:null===(r=JSON.parse(vt.paymentInfo).cardDetails)||void 0===r?void 0:r.card.cardBrand})]}),Object(a.jsxs)(K.a,{item:!0,children:["expDate:"," ",Object(a.jsxs)("strong",{children:[null===(c=JSON.parse(vt.paymentInfo).cardDetails)||void 0===c?void 0:c.card.expMonth,"/",null===(d=JSON.parse(vt.paymentInfo).cardDetails)||void 0===d?void 0:d.card.expYear]})]}),Object(a.jsxs)(K.a,{item:!0,children:["last4:"," ",Object(a.jsx)("strong",{children:null===(s=JSON.parse(vt.paymentInfo).cardDetails)||void 0===s?void 0:s.card.last4})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(vt.paymentInfo).createdAt})]})]}):Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["Operator: ",Object(a.jsx)("strong",{children:"PAYPAL"})]}),Object(a.jsxs)(K.a,{item:!0,children:["Payer Name:"," ",Object(a.jsx)("strong",{children:"".concat(null===(u=JSON.parse(vt.paymentInfo).payer)||void 0===u?void 0:u.name.given_name," ").concat(null===(j=JSON.parse(vt.paymentInfo).payer)||void 0===j?void 0:j.name.surname," ")})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(vt.paymentInfo).create_time})]})]})]})}),Object(a.jsxs)("li",{className:b.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:vt.OTCCharges&&0!==vt.OTCCharges?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat((vt.OTCCharges&&vt.OTCCharges>0?vt.OTCCharges:qn?qn.grandTotal-(vt.deposit||0):0).toLocaleString("en-GB"))}),!(oe.edit&&oe.person._id===vt._id)&&!vt.paid&&!vt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.PayButton,onClick:function(e){return vt._id,ne(vt),void W(!0)},children:"Pay"}),!(oe.edit&&oe.person._id===vt._id)&&vt.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:b.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall})," ","Paid by ",vt.paidBy,"corporate"===vt.paidBy?' "'.concat(vt.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return Et(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:vt.OTCCharges&&0!==vt.OTCCharges?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat((vt.deposit+vt.OTCCharges).toLocaleString("en-GB"))})]})}),qn&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[qn.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"130px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"130px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(qn.items)]})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsx)("div",{style:{border:"1px dashed #285927",background:"#fafffa",padding:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{className:b.infoTitle,style:{color:"#2a422a"},children:"Ask for Review By EMAIL"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{children:vt.smsSent?Object(a.jsx)(Rt.a,{className:b.checkIcon}):Object(a.jsx)(It.a,{className:b.closeIcon})})}),Object(a.jsx)(K.a,{item:!0,xs:4,style:{paddingLeft:"20px"},children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Patient Source"}),Object(a.jsx)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ni,onChange:function(e){ai(e.target.value),ji(Za[e.target.value-1])},label:"Source",fullWidth:!0,children:[{value:1,text:"Medical Express Clinic"}].map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:"".concat(e.text)})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(R.a,{variant:"contained",disabled:ri||(ba=vt.email,!(ba&&!(ba.length<7))),color:"primary",className:b.PayButton,onClick:li,children:"Send EMAIL"})})]})})}),ga&&ga.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),ga.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return va(e),void Ba(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:b.backdrop,open:fe||ke||we,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(Oo,{booking:te,open:F,price:qn?qn.grandTotal-(vt.deposit||0):null,handleClose:function(){W(!1),ne(null)}}),Object(a.jsx)(Yn,{booking:te,invoice:qn,open:ra,handleClose:function(e){ca(!1),ne(null),ja()}}),Object(a.jsx)(Bo,{booking:ya,open:Sa,onClose:function(){Ba(!1),va(null)}}),Object(a.jsx)(Jo,{booking:te,open:Ht,bloodReports:ga,handleClose:function(){Gt(!1),ne(null)}})]}),Object(a.jsxs)(qt.a,{open:Vt,onClose:zn,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===te||void 0===te?void 0:te.fullname)||(null===te||void 0===te?void 0:te.surname)+" "+(null===te||void 0===te?void 0:te.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===te||void 0===te?void 0:te.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===te||void 0===te?void 0:te.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===te||void 0===te?void 0:te.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:te,select:Hn}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:kn,onChange:function(e){Cn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:mn,onChange:function(e){On(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:hn,onChange:function(e,t){xn(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:sn,onChange:function(e,t){jn(t)}})})}),Object(a.jsx)(R.a,{onClick:Hn,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:zn,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:_t,onClose:Rn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Rn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Gn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:H,onClose:Ln,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Ln,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Un,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Zo=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),er=function e(){Object(ne.a)(this,e)};er.downloadDermaRegForm=function(e){return Zo.get("/api/pdf/downloaddermaregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var tr=n(354),nr=n.n(tr),ar=function e(){Object(ne.a)(this,e)};ar.addNewBooking=function(e){return Zo.post("/api/derma/book/addnewbooking",e)},ar.sendRegFormEmail=function(e){return Zo.post("/api/derma/book/sendregformemail?id=".concat(e))},ar.payBooking=function(e,t,n,a){return Zo.post("/api/derma/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},ar.unPayBooking=function(e){return Zo.post("/api/derma/book/unpaybooking?id=".concat(e))},ar.getShouldRefundsCount=function(){return Zo.get("/api/derma/book/getshouldrefundscount?")},ar.refundBooking=function(e){return Zo.post("/api/derma/payment/refundpayment",{bookingId:e})},ar.getBookingsStatsByDateStr=function(e){return Zo.get("/api/derma/book/getbookingsstatsbydatestr?date=".concat(e))},ar.getBookingsCountByDateStr=function(e){return Zo.get("/api/derma/book/getbookingscountbydatestr?date=".concat(e))},ar.getAllBookingsCountAll=function(){return Zo.get("/api/derma/book/getallbookingscountall")},ar.getBookingsCountByDateStrandTime=function(e,t,n){return Zo.get("/api/derma/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ar.getBookingsByDateStrandTime=function(e,t){return Zo.get("/api/derma/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ar.getAllBookingsCountByDateStr=function(e){return Zo.get("/api/derma/book/getallbookingscountbydatestr?date=".concat(e))},ar.getAllBookingsCountByDateStrandTime=function(e,t,n){return Zo.get("/api/derma/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ar.getAllBookingsByDateStrandTime=function(e,t){return Zo.get("/api/derma/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ar.changeBackToBookingMade=function(e){return Zo.post("/api/derma/book/changebacktobookingmade?id=".concat(e))},ar.changeToPatientAttended=function(e,t){return Zo.post("/api/derma/book/changetopatientattended?id=".concat(e),t)},ar.updateBooking=function(e){return Zo.post("/api/derma/book/updatebookappointment",e)},ar.updateBookingTime=function(e){return Zo.post("/api/derma/book/updatebookappointmenttime",e)},ar.deleteBooking=function(e){return Zo.post("/api/derma/book/deletebookappointment?id=".concat(e))},ar.unDeleteBooking=function(e){return Zo.post("/api/derma/book/undeletebookappointment?id=".concat(e))},ar.getBookingsByRef=function(e){return Zo.get("/api/derma/book/getbookingsbyref?ref=".concat(e))},ar.getBookingById=function(e){return Zo.get("/api/derma/book/getbookingbyid?id=".concat(e))},ar.getAllBookings=function(e){return e||(e=25),Zo.get("/api/derma/book/getallbookings?limit=".concat(e))},ar.getDeletedBookings=function(e){return e||(e=25),Zo.get("/api/derma/book/getdeletedbookings?limit=".concat(e))},ar.getTodayBookings=function(){return Zo.get("/api/derma/book/gettodaybookings")},ar.getOldBookings=function(e){return e||(e=25),Zo.get("/api/derma/book/getoldbookings?limit=".concat(e))},ar.getFutureBookings=function(e){return e||(e=25),Zo.get("/api/derma/book/getfuturebookings?limit=".concat(e))},ar.getRecentBookings=function(){return Zo.get("/api/derma/book/getrecentbookings")},ar.getRecentBookingsAll=function(e){return e||(e=25),Zo.get("/api/derma/book/getrecentbookingsall?limit=".concat(e))};var ir=n(127),or=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function rr(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function cr(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function lr(e){var t=or(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,ar.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:cr,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"TOTAL Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:rr,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var dr=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),sr=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function ur(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function jr(e){var t,n,r=dr(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=Object(i.useState)(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(!1),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(nn()),N=Object(l.a)(S,2),D=N[0],I=(N[1],o.a.useState(!1)),P=Object(l.a)(I,2),A=(P[0],P[1],o.a.useState(!1)),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(!1),z=Object(l.a)(E,2),H=z[0],G=z[1],U=o.a.useState(!1),Y=Object(l.a)(U,2),X=Y[0],$=Y[1],Q=o.a.useState(!1),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(null),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=o.a.useState({edit:!1,person:null}),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState({delete:!1,person:null}),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=o.a.useState({restore:!1,person:null}),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ye=me[1],ve=o.a.useState(!1),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState(!1),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState({}),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(""),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(""),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(""),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=o.a.useState(""),nt=Object(l.a)(tt,2),at=nt[0],it=nt[1],ot=o.a.useState(""),rt=Object(l.a)(ot,2),ct=rt[0],lt=rt[1],dt=o.a.useState(""),st=Object(l.a)(dt,2),ut=st[0],jt=st[1],bt=o.a.useState(!1),pt=Object(l.a)(bt,2),ht=pt[0],xt=pt[1],gt=o.a.useState(null),ft=Object(l.a)(gt,2),mt=ft[0],Ot=ft[1],yt=o.a.useState(!1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1],St=o.a.useState(!1),wt=Object(l.a)(St,2),Tt=wt[0],Nt=wt[1],Dt=o.a.useState(!1),Lt=Object(l.a)(Dt,2),It=Lt[0],Pt=Lt[1],At=o.a.useState(!1),Wt=Object(l.a)(At,2),_t=(Wt[0],Wt[1],o.a.useState(null)),Et=Object(l.a)(_t,2),Mt=Et[0],zt=Et[1],Ht=o.a.useState(null),Gt=Object(l.a)(Ht,2),Ut=(Gt[0],Gt[1]),Yt=o.a.useState(null),Vt=Object(l.a)(Yt,2),Zt=Vt[0],en=Vt[1],tn=o.a.useState(null),an=Object(l.a)(tn,2),cn=an[0],ln=an[1],dn=o.a.useState(null),sn=Object(l.a)(dn,2),jn=sn[0],bn=sn[1],pn=o.a.useState(null),hn=Object(l.a)(pn,2),xn=hn[0],gn=hn[1],fn=o.a.useState(null),mn=Object(l.a)(fn,2),On=mn[0],yn=mn[1],vn=o.a.useState(!1),kn=Object(l.a)(vn,2),Cn=kn[0],Sn=kn[1],Bn=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Sn(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,yn(n.data.invoice),Sn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Sn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&Bn()}),[e.booking,e.open]);var Tn=function(){Pt(!1),oe(null)},Dn=function(){G(!1),oe(null)};Object(i.useEffect)((function(){if(mt){var e=We!==Object(ir.FormatDateFromString)(mt.bookingDate)||ze!==mt.bookingTime||Ye!==mt.fullname||qe!==mt.email||Ze!==mt.phone||ut!==mt.package||at!==mt.notes||ct!==mt.doctorNote;Ct(e)}}),[Tt]),Object(i.useEffect)((function(){e.open||setTimeout((function(){de({edit:!1,person:null}),Ct(!1)}),500)}),[e.open]);var Rn=function(e,t){if(e)Ve(t.fullname),_e(Object(ir.FormatDateFromString)(t.bookingDate)),He(t.bookingTime.toUpperCase()),Xe(t.email),et(t.phone),jt(t.package),t.notes&&it(t.notes),t.doctorNote&&lt(t.doctorNote),de({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=qe,n.phone=Ze,n.fullname=Ye,n.notes=at,n.doctorNote=ct,n.package=ut,n.bookingDate=Object(ir.RevertFormatDateFromString)(We),n.bookingTime=ze,n.bookingRef=t.bookingRef,Ln(n)&&(In({bookingId:a,person:n}),$(!1))}}else de({edit:e,person:t}),Ct(!1)},Ln=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,Pe(Object(T.a)(Object(T.a)({},Le),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Pe(Object(T.a)(Object(T.a)({},Le),{},{bookingTimeError:!0}))),!t},In=function(e){ye(!0),ar.updateBooking(e).then((function(e){ye(!1),de({edit:!1,person:null}),xt(!ht)})).catch((function(e){ye(!1),de({edit:!1,person:null}),console.log(e)}))},Pn=function(e,t){var n;e?be({delete:e,person:t}):e||t?!e&&t&&(n=t._id,Se(!0),ar.deleteBooking(n).then((function(e){Se(!1),be({delete:!1,person:null}),xt(!ht)})).catch((function(e){Se(!1),be({delete:!1,person:null}),console.log(e)}))):be({delete:e,person:t})},An=function(e,t){var n;e?ge({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Ne(!0),ar.unDeleteBooking(n).then((function(e){Ne(!1),ge({restore:!1,person:null}),xt(!ht)})).catch((function(e){Ne(!1),ge({restore:!1,person:null}),console.log(e)}))):ge({restore:e,person:t})},_n=function(){zt(!1),Ut(null),en(null),gn(null),bn(null),ln(null)},En=function(e,t){ye(!0),ar.changeToPatientAttended(ie._id,{patientid:t||null,birthDate:Zt,forename:jn,surname:xn,gender:cn}).then((function(e){ye(!1),xt(!ht),_n()})).catch((function(e){console.log(e),ye(!1)}))},Mn=function(){oe(mt),yn(On),te(!0)};Object(i.useEffect)((function(){e.booking&&(ar.getBookingById(e.booking._id).then((function(e){Ot(e.data)})).catch((function(e){console.log(e)})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[ht,s.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&Ot(e.booking)}),[e.booking]);var zn,Hn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),e.prev=1,e.next=4,ar.unPayBooking(mt._id);case 4:ye(!1),Pt(!1),xt(!ht),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ye(!1),Pt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Gn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),e.prev=1,e.next=4,ar.refundBooking(mt._id);case 4:ye(!1),Un(),G(!1),xt(!ht),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ye(!1),G(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Un=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&u((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:mt&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:sr,keepMounted:!0,onClose:function(){m(!1),k(!1),yn(null),e.onClose()},PaperComponent:ur,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:mt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/derma/".concat(mt._id)),h(!0),setTimeout((function(){h(!1)}),1500)},"aria-label":"delete",className:r.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:mt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!p,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Fn.DERMA_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Dermatology"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:mt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(mt.fullname)})}),mt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:mt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:r.infoDetails,children:Object(a.jsxs)("ul",{className:r.ul,children:[!D&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(xe.restore&&xe.person._id===mt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!mt.deleted||xe.restore&&xe.person._id===mt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){An(!0,mt)},className:r.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(xe.restore&&xe.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Te,onClick:function(){An(!1,mt)},className:r.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(xe.restore&&xe.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Te,onClick:function(){An(!1,null)},className:r.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:mt.deleted||je.delete||le.edit&&le.person._id===mt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Rn(!0,mt)},className:r.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(le.edit&&le.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Oe||!kt,onClick:function(){Rn(!1,mt)},className:r.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(le.edit&&le.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Oe,onClick:function(){Rn(!1,null)},className:r.CancelButton,children:"Cancel"})}),!D&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(je.delete&&je.person._id===mt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||mt.deleted||le.edit||je.delete&&je.person._id===mt._id,children:[mt.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:mt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pn(!0,mt)},className:r.DeleteButton,children:"Delete This Record"})})}),0===mt.OTCCharges&&Object(a.jsx)(R.a,{disabled:mt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pn(!0,mt)},className:r.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(je.delete&&je.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Ce,onClick:function(){Pn(!1,mt)},className:r.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(je.delete&&je.person._id===mt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Ce,onClick:function(){Pn(!1,null)},className:r.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:Object(ir.FormatDateFromString)(mt.bookingDate)}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Le.bookingDateError,className:r.TextBox,value:We,onChange:function(e){_e(e.target.value),Pe(Object(T.a)(Object(T.a)({},Le),{},{bookingDateError:!1})),Nt(!Tt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:mt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Le.bookingTimeError,className:r.TextBox,value:ze,onChange:function(e){He(e.target.value),Pe(Object(T.a)(Object(T.a)({},Le),{},{bookingTimeError:!1})),Nt(!Tt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:mt.fullname}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:mt.email}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:qe,onChange:function(e){Xe(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:r.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:null===(t=mt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:Ze,onChange:function(e){et(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:r.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:mt.notes}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:at,onChange:function(e){it(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:r.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"Service"}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id,className:r.infoData,children:null===(n=mt.package)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:r.TextBox,value:ut,onChange:function(e){jt(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:r.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:le.edit&&le.person._id===mt._id,children:[!X&&D&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){var e;Ve((e=mt).fullname),_e(Object(ir.FormatDateFromString)(e.bookingDate)),He(e.bookingTime.toUpperCase()),Xe(e.email),et(e.phone),jt(e.packageName),e.notes&&it(e.notes),e.doctorNote&&lt(e.doctorNote),$(!0)},className:r.SaveButton,children:"Add/Edit Doctor Note"})}),X&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){Rn(!1,mt)},className:r.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:le.edit&&le.person._id===mt._id||X,className:r.infoData,children:mt.doctorNote}),Object(a.jsx)("span",{hidden:!(le.edit&&le.person._id===mt._id||X),className:r.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[r.TextBox,r.active],value:ct,disabled:!D,onChange:function(e){lt(e.target.value),Nt(!Tt)},inputProps:{style:{padding:0}}})})]}),!D&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:r.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"STATUS"})," ",(zn=mt.status,"booked"===zn?Object(a.jsx)("div",{className:r.BookedLabel,children:" Booking Made "}):"patient_attended"===zn?Object(a.jsx)("div",{className:r.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===mt.status&&!(le.edit&&le.person._id===mt._id)&&!mt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:Oe,style:{width:"300px"},onClick:function(e){return t=mt._id,ye(!0),void ar.changeBackToBookingMade(t).then((function(e){ye(!1),xt(!ht)})).catch((function(e){console.log(e),ye(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===mt.status&&!(le.edit&&le.person._id===mt._id)&&!mt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:Oe,style:{width:"300px"},onClick:function(e){return function(e){zt(!0),oe(e),en(e.birthDate),gn(e.surname),bn(e.forename),ln(e.gender)}(mt)},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:mt.deleted||le.edit,children:Object(a.jsx)(R.a,{disabled:!mt.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=mt._id,er.downloadDermaRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:r.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:mt.deleted||le.edit||mt.formData,children:Object(a.jsxs)(R.a,{disabled:!mt.email||mt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=mt._id,ye(!0),m(!1),ar.sendRegFormEmail(e).then((function(e){ye(!1),"OK"===e.data.status&&m(!0)})).catch((function(e){console.log(e),ye(!1)}))},className:r.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:r.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:r.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Cn&&Object(a.jsxs)("span",{className:r.invoiceNumber,children:[" ","..."," "]}),Cn&&On&&Object(a.jsxs)("span",{className:r.invoiceNumber,children:[" ",On.invoiceNumber," "]}),Cn&&!On&&Object(a.jsxs)("span",{className:r.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(le.edit&&le.person._id===mt._id)&&!mt.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[Cn&&!On&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:r.PayButton,onClick:function(){return Mn()},children:"Issue Invoice"}),Cn&&On&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:r.printInvoiceButton,onClick:function(){return e=On._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:r.editInvoiceButton,onClick:function(){return Mn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!mt.email||mt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=On._id,t=mt.email,ye(!0),k(!1),Wn.emailInvoice(e,t).then((function(e){ye(!1),"OK"===e.data.status&&k(!0)})).catch((function(e){console.log(e),ye(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",v&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:r.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:r.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:mt.OTCCharges&&0!==mt.OTCCharges?r.infoDataCharges:r.infoDataChargesHigher,children:"\xa3".concat(mt.OTCCharges.toLocaleString("en-GB"))}),!(le.edit&&le.person._id===mt._id)&&!mt.paid&&!mt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:r.PayButton,onClick:function(e){return oe(mt),void _(!0)},children:"Pay"}),!(le.edit&&le.person._id===mt._id)&&mt.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:r.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:r.checkIconSmall})," ","Paid by ",mt.paidBy,"corporate"===mt.paidBy?' "'.concat(mt.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return Pt(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:r.backdrop,open:Oe||Ce||Te,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(lr,{booking:ie,open:W,price:On?On.grandTotal:null,handleClose:function(){_(!1),oe(null)}}),Object(a.jsx)(Yn,{booking:ie,invoice:On,open:ee,handleClose:function(e){te(!1),oe(null),Bn()}})]}),Object(a.jsxs)(qt.a,{open:It,onClose:Tn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Tn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Hn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:Mt,onClose:_n,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===ie||void 0===ie?void 0:ie.fullname)||(null===ie||void 0===ie?void 0:ie.surname)+" "+(null===ie||void 0===ie?void 0:ie.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===ie||void 0===ie?void 0:ie.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===ie||void 0===ie?void 0:ie.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===ie||void 0===ie?void 0:ie.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:ie,select:En}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:xn,onChange:function(e){gn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:jn,onChange:function(e){bn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:cn,onChange:function(e,t){ln(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:Zt,onChange:function(e,t){en(t)}})})}),Object(a.jsx)(R.a,{onClick:En,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:_n,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:H,onClose:Dn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Dn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Gn,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var br=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),pr=function e(){Object(ne.a)(this,e)};pr.downloadScreeningRegForm=function(e){return br.get("/api/pdf/downloadscreeningregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var hr=n(355),xr=n.n(hr),gr=function e(){Object(ne.a)(this,e)};gr.sendReviewSMS=function(e,t){return br.post("/api/screening/book/sendreviewsms",{id:e,message:t})},gr.downloadPDFReport=function(e,t){return br.post("/api/screening/book/downloadpdfreport?id=".concat(e),{reportData:t},{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},gr.getReportData=function(e){return br.get("/api/screening/book/getreportdata?id=".concat(e))},gr.setReportData=function(e,t){return br.post("/api/screening/book/setreportdata",{bookingId:e,reportData:t})},gr.setClinicNotes=function(e,t){return br.post("/api/screening/book/setclinicnotes",{bookingId:e,notes:t})},gr.getBloodReportsByBookingId=function(e){return br.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},gr.changeDepositBooking=function(e,t){return br.post("/api/screening/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},gr.manualRefundBooking=function(e){return br.post("/api/screening/payment/manualrefundpayment",{bookingId:e})},gr.addNewBooking=function(e){return br.post("/api/screening/book/addnewbooking",e)},gr.sendForPrint=function(e){return br.post("/api/screening/book/sendforprint?id=".concat(e))},gr.sendRegFormEmail=function(e){return br.post("/api/screening/book/sendregformemail?id=".concat(e))},gr.payBooking=function(e,t,n,a){return br.post("/api/screening/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},gr.unPayBooking=function(e){return br.post("/api/screening/book/unpaybooking?id=".concat(e))},gr.getShouldRefundsCount=function(){return br.get("/api/screening/book/getshouldrefundscount?")},gr.refundBooking=function(e){return br.post("/api/screening/payment/refundpayment",{bookingId:e})},gr.getBookingsStatsByDateStr=function(e){return br.get("/api/screening/book/getbookingsstatsbydatestr?date=".concat(e))},gr.getBookingsCountByDateStr=function(e){return br.get("/api/screening/book/getbookingscountbydatestr?date=".concat(e))},gr.getAllBookingsCountAll=function(){return br.get("/api/screening/book/getallbookingscountall")},gr.getBookingsCountByDateStrandTime=function(e,t,n){return br.get("/api/screening/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},gr.getBookingsByDateStrandTime=function(e,t){return br.get("/api/screening/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},gr.getAllBookingsCountByDateStr=function(e){return br.get("/api/screening/book/getallbookingscountbydatestr?date=".concat(e))},gr.getAllBookingsCountByDateStrandTime=function(e,t,n){return br.get("/api/screening/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},gr.getAllBookingsByDateStrandTime=function(e,t){return br.get("/api/screening/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},gr.changeBackToBookingMade=function(e){return br.post("/api/screening/book/changebacktobookingmade?id=".concat(e))},gr.changeToCompleted=function(e){return br.post("/api/screening/book/changetocompleted?id=".concat(e))},gr.changeToPatientAttended=function(e,t){return br.post("/api/screening/book/changetopatientattended?id=".concat(e),t)},gr.updateBooking=function(e){return br.post("/api/screening/book/updatebookappointment",e)},gr.updateBookingTime=function(e){return br.post("/api/screening/book/updatebookappointmenttime",e)},gr.deleteBooking=function(e){return br.post("/api/screening/book/deletebookappointment?id=".concat(e))},gr.unDeleteBooking=function(e){return br.post("/api/screening/book/undeletebookappointment?id=".concat(e))},gr.moveTBCFolder=function(e){return br.post("/api/screening/book/movetbcfolder?id=".concat(e))},gr.undoMoveTBCFolder=function(e){return br.post("/api/screening/book/undomovetbcfolder?id=".concat(e))},gr.confirmBooking=function(e){return br.post("/api/screening/book/confirmbookappointment?bookingId=".concat(e))},gr.getBookingsByRef=function(e){return br.get("/api/screening/book/getbookingsbyref?ref=".concat(e))},gr.getBookingById=function(e){return br.get("/api/screening/book/getbookingbyid?id=".concat(e))},gr.getAllBookings=function(e){return e||(e=25),br.get("/api/screening/book/getallbookings?limit=".concat(e))},gr.getDeletedBookings=function(e){return e||(e=25),br.get("/api/screening/book/getdeletedbookings?limit=".concat(e))},gr.getTBCFolderBookings=function(e){return e||(e=25),br.get("/api/screening/book/gettbcfolderbookings?limit=".concat(e))},gr.getTodayBookings=function(){return br.get("/api/screening/book/gettodaybookings")},gr.getLiveBookings=function(){return br.get("/api/screening/book/getlivebookings")},gr.getCompletedBookings=function(e){return br.get("/api/screening/book/getcompletedbookings?limit=".concat(e))},gr.getOldBookings=function(e){return e||(e=25),br.get("/api/screening/book/getoldbookings?limit=".concat(e))},gr.getFutureBookings=function(e){return e||(e=25),br.get("/api/screening/book/getfuturebookings?limit=".concat(e))},gr.getRecentBookings=function(){return br.get("/api/screening/book/getrecentbookings")},gr.getPendingBookings=function(){return br.get("/api/screening/book/getpendingbookings")},gr.getRecentBookingsAll=function(e){return e||(e=25),br.get("/api/screening/book/getrecentbookingsall?limit=".concat(e))};var fr=n(104),mr=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Or(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function yr(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function vr(e){var t=mr(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,gr.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:yr,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"OTC Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Or,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var kr=n(380),Cr=n.n(kr),Sr=n(356),Br=n.n(Sr),wr=n(667),Tr=n.n(wr),Nr=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Dr(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Rr(e){var t=Nr(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(null),p=Object(l.a)(b,2),h=p[0],x=p[1];o.a.useEffect((function(){e.open&&g()}),[e.open]);var g=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gr.getReportData(e.booking._id);case 2:(n=t.sent)&&n.data&&"OK"===n.data.status&&(a=n.data.reportData,x(a),console.log(a));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){u||(e.handleClose(),x(null),S(!1),j(!1))},m=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.prev=1,t.next=4,gr.setReportData(e.booking._id,h);case 4:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),f(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),j(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),O=function(e){switch(e){case"low":return"#fa7d2f";case"high":return"#ff1f1f";case"inRange":return"#00b524";default:return"grey"}},y=Object(i.useState)(!1),v=Object(l.a)(y,2),k=v[0],S=v[1],N=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(!0),gr.downloadPDFReport(e.booking._id,h).then((function(e){S(!1);var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e),S(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:f,PaperComponent:Dr,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Cr.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:["Report Details -"," ",Object(a.jsxs)("span",{style:{color:"#33a198"},children:[" ",Object(a.jsxs)("i",{children:[" ","".concat(e.booking.fullname)," "]})]})]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{minHeight:"700px",paddingBottom:"80px"},children:[!h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(K.a,{container:!0,spacing:2,children:h&&h.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{padding:"5px",border:"#ddd 1px solid",borderRadius:"4px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"".concat(O(e.value)),fontWeight:"".concat(e.value?"500":"400")},children:e.param})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Kt.a,{variant:"standard",value:e.value,style:{width:"100px",textAlign:"center"},onChange:function(t){return function(e,t){var n=Object(Ut.a)(h),a=n.findIndex((function(e){return e.param===t}));a>-1&&(n[a].value=e,x((function(e){return n})))}(t.target.value,e.param)},children:[Object(a.jsx)(Jt.a,{value:null}),Object(a.jsx)(Jt.a,{value:"low",children:"Low"}),Object(a.jsx)(Jt.a,{value:"inRange",children:"In Range"}),Object(a.jsx)(Jt.a,{value:"high",children:"High"})]})})]})})})}))})]}),Object(a.jsx)("div",{style:{position:"absolute",width:"100%",bottom:"0",right:"0",height:"60px",background:"#fff"}}),Object(a.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"20px",background:"white",width:"100%"},children:[Object(a.jsx)(R.a,{onClick:function(){var e=Object(Ut.a)(h);e.forEach((function(e){e.value=null})),x((function(t){return e}))},variant:"outlined",color:"secondary",style:{width:"150px"},disabled:u,children:"Reset Data"}),Object(a.jsx)(R.a,{onClick:N,disabled:k,variant:"contained",color:"secondary",startIcon:Object(a.jsx)(Tr.a,{}),style:{width:"250px",marginLeft:"10px"},children:k?"Generating PDF ...":"Download PDF Report"})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"10px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:f,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:m,variant:"contained",color:"primary",style:{width:"150px"},disabled:u,children:"Save Changes"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var Lr=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:999,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},PackageBox:{width:"100%",color:"#005bb5",fontWeight:"600",padding:"10px",borderRadius:"8px",fontSize:"1rem"}}})),Ir=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function Pr(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Ar(e){var t,n,r,c,d,s,u,j,b=Lr(),p=o.a.useContext(C),h=Object(l.a)(p,2),x=h[0],g=h[1],f=Object(i.useState)(!1),m=Object(l.a)(f,2),O=(m[0],m[1],o.a.useState(!1)),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),N=Object(l.a)(S,2),D=N[0],I=N[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState(!1)),W=Object(l.a)(F,2),_=W[0],E=W[1],H=o.a.useState(!1),G=Object(l.a)(H,2),Y=G[0],X=G[1],$=o.a.useState(!1),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=o.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],oe=o.a.useState(!1),re=Object(l.a)(oe,2),ce=re[0],le=re[1],de=o.a.useState(!1),se=Object(l.a)(de,2),ue=se[0],je=se[1],be=o.a.useState(!1),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1],ge=o.a.useState(null),fe=Object(l.a)(ge,2),me=fe[0],Oe=fe[1],ve=o.a.useState({edit:!1,person:null}),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState({delete:!1,person:null}),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState({restore:!1,person:null}),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=o.a.useState(!1),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(!1),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(!1),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(nn()),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=(Je[1],o.a.useState({})),$e=Object(l.a)(Xe,2),Qe=$e[0],Ze=$e[1],et=o.a.useState(""),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(""),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=o.a.useState(""),dt=Object(l.a)(lt,2),st=dt[0],ut=dt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=o.a.useState(""),gt=Object(l.a)(xt,2),ft=gt[0],mt=gt[1],Ot=o.a.useState(""),yt=Object(l.a)(Ot,2),vt=yt[0],kt=yt[1],Ct=o.a.useState(""),St=Object(l.a)(Ct,2),wt=St[0],Tt=St[1],Nt=o.a.useState(""),Dt=Object(l.a)(Nt,2),Lt=Dt[0],Pt=Dt[1],At=o.a.useState(""),Wt=Object(l.a)(At,2),_t=(Wt[0],Wt[1],o.a.useState("")),Et=Object(l.a)(_t,2),Mt=Et[0],zt=Et[1],Ht=o.a.useState(""),Gt=Object(l.a)(Ht,2),Ut=Gt[0],Yt=Gt[1],Vt=o.a.useState(!1),en=Object(l.a)(Vt,2),tn=en[0],an=en[1],cn=o.a.useState(null),ln=Object(l.a)(cn,2),dn=ln[0],sn=ln[1],jn=o.a.useState(!1),bn=Object(l.a)(jn,2),pn=bn[0],hn=bn[1],xn=o.a.useState(!1),gn=Object(l.a)(xn,2),fn=gn[0],mn=gn[1],On=o.a.useState(!1),yn=Object(l.a)(On,2),vn=yn[0],kn=yn[1],Cn=o.a.useState(!1),Sn=Object(l.a)(Cn,2),Bn=(Sn[0],Sn[1],o.a.useState(null)),Tn=Object(l.a)(Bn,2),Nn=Tn[0],Rn=Tn[1],Ln=o.a.useState(null),In=Object(l.a)(Ln,2),Pn=(In[0],In[1]),An=o.a.useState(null),_n=Object(l.a)(An,2),En=_n[0],Mn=_n[1],zn=o.a.useState(null),Hn=Object(l.a)(zn,2),Gn=Hn[0],Un=Hn[1],Vn=o.a.useState(null),Kn=Object(l.a)(Vn,2),Jn=Kn[0],qn=Kn[1],Xn=o.a.useState(null),$n=Object(l.a)(Xn,2),ta=$n[0],na=$n[1],aa=o.a.useState(null),ia=Object(l.a)(aa,2),oa=ia[0],ra=ia[1],ca=o.a.useState(!1),la=Object(l.a)(ca,2),da=la[0],sa=la[1],ua=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,sa(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,ra(n.data.invoice),sa(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),sa(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(ua(),Ca(),Qa(e.booking.clinicNotes||""),ni(e.booking.clinicNotes||""),ri(!1))}),[e.booking,e.open]);var ja=o.a.useState(null),ba=Object(l.a)(ja,2),pa=ba[0],ha=ba[1],xa=o.a.useState(null),ga=Object(l.a)(xa,2),fa=ga[0],ma=ga[1],Oa=o.a.useState(null),ya=Object(l.a)(Oa,2),va=ya[0],ka=ya[1],Ca=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ha(null),t.prev=1,t.next=4,gr.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&ha(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),Sa=function(){var e=Object(w.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?100:0,_e(!0),e.prev=3,e.next=6,gr.changeDepositBooking(dn._id,a);case 6:_e(!1),an(!tn),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),_e(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Ba=function(){kn(!1),Oe(null)},wa=function(){X(!1),Oe(null)},Ta=function(){le(!1),Oe(null)},Na=function(){je(!1),Oe(null)};Object(i.useEffect)((function(){if(dn){var e=nt!==Object(fr.FormatDateFromString)(dn.bookingDate)||rt!==dn.bookingTime||st!==dn.fullname||pt!==dn.email||Mt!==dn.gender||ft!==dn.phone||vt!==dn.notes||Lt!==dn.address||Ut!==dn.birthDate||wt!==dn.doctorNote;hn(e)}}),[fn]),Object(i.useEffect)((function(){e.open||setTimeout((function(){Se({edit:!1,person:null}),hn(!1)}),500)}),[e.open]);var Da=function(e,t){var n;if(e)ut(t.fullname),at(Object(fr.FormatDateFromString)(t.bookingDate)),ct(t.bookingTime.toUpperCase()),ht(t.email),zt((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),mt(t.phone),t.notes&&kt(t.notes),t.doctorNote&&Tt(t.doctorNote),t.address&&Pt(t.address),Yt(Object(fr.FormatDateFromString)(t.birthDate)),Se({edit:e,person:t});else if(e||t){if(!e&&t){var a={},i=t._id;a.email=pt,a.phone=ft,a.fullname=st,a.notes=vt,a.doctorNote=wt,a.address=Lt,a.service=t.service,a.bookingDate=Object(fr.RevertFormatDateFromString)(nt),a.bookingTime=rt,a.bookingRef=t.bookingRef,a.birthDate=Object(fr.RevertFormatDateFromString)(Ut),a.gender=Mt,La(a)&&(Ia({bookingId:i,person:a}),ee(!1))}}else Se({edit:e,person:t}),hn(!1)},Ra=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},La=function(e){var t=!1;return Ra(e.bookingDate)||(t=!0,Ze(Object(T.a)(Object(T.a)({},Qe),{},{bookingDateError:!0}))),e.birthDate&&!Ra(e.birthDate)&&(t=!0,Ze(Object(T.a)(Object(T.a)({},Qe),{},{birthDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Ze(Object(T.a)(Object(T.a)({},Qe),{},{bookingTimeError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Ze(Object(T.a)(Object(T.a)({},Qe),{},{genderError:!0}))),!t},Ia=function(e){_e(!0),gr.updateBooking(e).then((function(e){_e(!1),Se({edit:!1,person:null}),an(!tn)})).catch((function(e){_e(!1),Se({edit:!1,person:null}),console.log(e)}))},Pa=function(e,t){var n;e?Ne({delete:e,person:t}):e||t?!e&&t&&(n=t._id,He(!0),gr.deleteBooking(n).then((function(e){He(!1),Ne({delete:!1,person:null}),an(!tn)})).catch((function(e){He(!1),Ne({delete:!1,person:null}),console.log(e)}))):Ne({delete:e,person:t})},Aa=function(e,t){var n;e?Pe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Ve(!0),gr.unDeleteBooking(n).then((function(e){Ve(!1),Pe({restore:!1,person:null}),an(!tn)})).catch((function(e){Ve(!1),Pe({restore:!1,person:null}),console.log(e)}))):Pe({restore:e,person:t})},Fa=function(){Rn(!1),Pn(null),Mn(null),na(null),qn(null),Un(null)},Wa=function(e,t){_e(!0),gr.changeToPatientAttended(me._id,{patientid:t||null,birthDate:En,forename:Jn,surname:ta,gender:Gn}).then((function(e){_e(!1),an(!tn),Fa()})).catch((function(e){console.log(e),_e(!1)}))},_a=function(){Oe(dn),ra(oa),xe(!0)};Object(i.useEffect)((function(){e.booking&&(gr.getBookingById(e.booking._id).then((function(e){sn(e.data)})).catch((function(e){console.log(e)})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[tn,x.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&sn(e.booking)}),[e.booking]);var Ea,Ma,za=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.unPayBooking(dn._id);case 4:_e(!1),kn(!1),an(!tn),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),_e(!1),kn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.refundBooking(dn._id);case 4:_e(!1),Ka(),X(!1),an(!tn),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),_e(!1),X(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Ga=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.manualRefundBooking(dn._id);case 4:_e(!1),Ka(),an(!tn),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),_e(!1),X(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ua=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.confirmBooking(dn._id);case 4:_e(!1),le(!1),an(!tn),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),_e(!1),le(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.moveTBCFolder(dn._id);case 4:_e(!1),je(!1),an(!tn),Ja(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),_e(!1),je(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Va=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,gr.undoMoveTBCFolder(dn._id);case 4:_e(!1),je(!1),an(!tn),Ja(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),_e(!1),je(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Ka=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&g((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ja=function(){k(!1),I(!1),ra(null),e.onClose()},qa=o.a.useState(""),Xa=Object(l.a)(qa,2),$a=Xa[0],Qa=Xa[1],Za=o.a.useState(""),ei=Object(l.a)(Za,2),ti=ei[0],ni=ei[1],ai=Object(i.useState)(!1),ii=Object(l.a)(ai,2),oi=ii[0],ri=ii[1],ci=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ri(!0),t.next=4,gr.setClinicNotes(e.booking._id,$a);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(ni($a),ri(!1),an(!tn)):ri(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),ri(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),li=Object(i.useState)(!1),di=Object(l.a)(li,2),si=di[0],ui=di[1],ji=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{ui(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),ui(!1)}catch(p){ui(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),bi=["It was great to see and treat you at the Medical Express Clinic, Please let us know how you got on by clicking here: https://g.page/r/CZcAyTF67Ec0EBM/review"],pi=Object(i.useState)(1),hi=Object(l.a)(pi,2),xi=hi[0],gi=hi[1],fi=Object(i.useState)(!1),mi=Object(l.a)(fi,2),Oi=mi[0],yi=mi[1],vi=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yi(!0),e.prev=1,e.next=4,gr.sendReviewSMS(dn._id,Si);case 4:(t=e.sent)&&t.data&&"OK"===t.data.status&&(sn((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!0})})),g((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})}))),yi(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),yi(!1),sn((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!1})}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ki=Object(i.useState)(bi[0]),Ci=Object(l.a)(ki,2),Si=Ci[0],Bi=Ci[1];return Object(a.jsxs)(o.a.Fragment,{children:[dn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:Ir,keepMounted:!0,onClose:Ja,PaperComponent:Pr,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:dn.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[!dn.confirmed&&Object(a.jsx)("div",{style:{color:"red",fontSize:"1.1rem",fontWeight:"500",border:"2px solid red",padding:"5px",borderRadius:"8px"},children:"NOT CONFIRMED!"}),dn.confirmed&&Object(a.jsx)("div",{style:{color:"#258200",fontSize:"1.1rem",fontWeight:"500",border:"2px solid #258200",padding:"5px",borderRadius:"8px"},children:"CONFIRMED"})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"190px",background:"".concat($a?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"580px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:$a||"",onChange:function(e){Qa(e.target.value)},variant:"outlined"})}),oi&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),ti!==$a&&!oi&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat($a?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:ci,className:b.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Fn.SCREENING_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Screening"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:dn.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(dn.fullname)})}),dn.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:dn.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{height:"400px",paddingTop:"10px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:b.infoDetails,children:Object(a.jsxs)("ul",{className:b.ul,children:[!qe&&Object(a.jsxs)(o.a.Fragment,{children:[!dn.confirmed&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"primary",fullWidth:!0,variant:"contained",onClick:function(){Oe(dn),le(!0)},children:"Confirm Booking"})}),!dn.confirmed&&!dn.tbcFolder&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"secondary",fullWidth:!0,variant:"contained",onClick:function(){Oe(dn),je(!0)},children:"Move To Patients TBC"})}),!dn.confirmed&&dn.tbcFolder&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"secondary",fullWidth:!0,variant:"contained",onClick:function(){Oe(dn),je(!0)},children:"Move Back To Pending Bookings"})}),Object(a.jsx)("li",{hidden:!(Le.restore&&Le.person._id===dn._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!dn.deleted||Le.restore&&Le.person._id===dn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Aa(!0,dn)},className:b.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Le.restore&&Le.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Ye,onClick:function(){Aa(!1,dn)},className:b.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Le.restore&&Le.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Ye,onClick:function(){Aa(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:dn.deleted||Te.delete||Ce.edit&&Ce.person._id===dn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Da(!0,dn)},className:b.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Ce.edit&&Ce.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:We||!pn,onClick:function(){Da(!1,dn)},className:b.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Ce.edit&&Ce.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:We,onClick:function(){Da(!1,null)},className:b.CancelButton,children:"Cancel"})}),!qe&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(Te.delete&&Te.person._id===dn._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||dn.deleted||Ce.edit||Te.delete&&Te.person._id===dn._id,children:[dn.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:dn.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pa(!0,dn)},className:b.DeleteButton,children:"Delete This Record"})})}),0===dn.OTCCharges&&Object(a.jsx)(R.a,{disabled:dn.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pa(!0,dn)},className:b.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Te.delete&&Te.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ze,onClick:function(){Pa(!1,dn)},className:b.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Te.delete&&Te.person._id===dn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ze,onClick:function(){Pa(!1,null)},className:b.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:Object(fr.FormatDateFromString)(dn.bookingDate)}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Qe.bookingDateError,className:b.TextBox,value:nt,onChange:function(e){at(e.target.value),Ze(Object(T.a)(Object(T.a)({},Qe),{},{bookingDateError:!1})),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:dn.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Qe.bookingTimeError,className:b.TextBox,value:rt,onChange:function(e){ct(e.target.value),Ze(Object(T.a)(Object(T.a)({},Qe),{},{bookingTimeError:!1})),mn(!fn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:dn.fullname}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:st,onChange:function(e){ut(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:dn.email}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:pt,onChange:function(e){ht(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:null===(t=dn.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:ft,onChange:function(e){mt(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:Object(fr.FormatDateFromString)(dn.birthDate)}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Qe.birthDateError,className:b.TextBox,value:Ut,onChange:function(e){Yt(e.target.value),Ze(Object(T.a)(Object(T.a)({},Qe),{},{birthDateError:!1})),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:null===(n=dn.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Qe.genderError,className:b.TextBox,value:Mt,onChange:function(e){zt(e.target.value),Ze(Object(T.a)(Object(T.a)({},Qe),{},{genderError:!1})),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:dn.notes}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:vt,onChange:function(e){kt(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"Address"}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id,className:b.infoData,children:dn.address}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:b.TextBox,value:Lt,onChange:function(e){Pt(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"PACKAGE"}),Object(a.jsx)("span",{className:b.PackageBox,children:dn.service})]}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:Ce.edit&&Ce.person._id===dn._id,children:[!Z&&qe&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){!function(e){var t;ut(e.fullname),at(Object(fr.FormatDateFromString)(e.bookingDate)),ct(e.bookingTime.toUpperCase()),ht(e.email),mt(e.phone),zt((null===(t=e.gender)||void 0===t?void 0:t.toUpperCase())||""),e.notes&&kt(e.notes),e.doctorNote&&Tt(e.doctorNote),e.address&&Pt(e.address),Yt(Object(fr.FormatDateFromString)(e.birthDate)),ee(!0)}(dn)},className:b.SaveButton,children:"Add/Edit Doctor Note"})}),Z&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){Da(!1,dn)},className:b.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:Ce.edit&&Ce.person._id===dn._id||Z,className:b.infoData,children:dn.doctorNote}),Object(a.jsx)("span",{hidden:!(Ce.edit&&Ce.person._id===dn._id||Z),className:b.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[b.TextBox,b.active],value:wt,disabled:!qe,onChange:function(e){Tt(e.target.value),mn(!fn)},inputProps:{style:{padding:0}}})})]}),!qe&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:b.li,style:{paddingTop:"20px",width:"100%"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"STATUS"})," ",(Ma=dn.status,"booked"===Ma?Object(a.jsx)("div",{className:b.BookedLabel,children:" Booking Made "}):"patient_attended"===Ma?Object(a.jsx)("div",{className:b.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===Ma?Object(a.jsx)("div",{className:b.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===dn.status&&!(Ce.edit&&Ce.person._id===dn._id)&&!dn.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:We,style:{width:"300px"},onClick:function(e){return t=dn._id,_e(!0),void gr.changeBackToBookingMade(t).then((function(e){_e(!1),an(!tn)})).catch((function(e){console.log(e),_e(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:We,style:{width:"200px",margin:"0"},className:b.EditButton,onClick:function(e){return t=dn._id,_e(!0),void gr.changeToCompleted(t).then((function(e){_e(!1),an(!tn)})).catch((function(e){console.log(e),_e(!1)}));var t},children:"Change To Completed"})]}),"booked"===dn.status&&!(Ce.edit&&Ce.person._id===dn._id)&&!dn.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:We,style:{width:"300px"},onClick:function(e){return function(e){Rn(!0),Oe(e),Mn(e.birthDate),na(e.surname),qn(e.forename),Un(e.gender)}(dn)},children:"Change To Patient Attended"}),"report_sent"===dn.status&&!(Ce.edit&&Ce.person._id===dn._id)&&!dn.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:We,style:{width:"300px"},onClick:function(e){return Wa(0,dn._id)},children:"Change Back To Patient Attended"}),Object(a.jsx)(R.a,{variant:"outlined",color:"primary",startIcon:Object(a.jsx)(Cr.a,{}),endIcon:dn.reportData&&JSON.parse(dn.reportData)&&JSON.parse(dn.reportData).find((function(e){return!!e.value}))?Object(a.jsx)(Br.a,{style:{color:"green"}}):Object(a.jsx)(It.a,{style:{color:"red"}}),disabled:We,style:{width:"300px",marginLeft:"20px"},onClick:function(){return Oe(dn),void ie(!0)},children:"Report Details..."})]})]}),Object(a.jsx)("li",{hidden:dn.deleted||Ce.edit,children:Object(a.jsxs)(R.a,{disabled:si,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:ji,className:b.DownloadForm,children:[!dn.printStatus&&"Print LAB Label","printed"===dn.printStatus&&"Print LAB Label Again","printing"===dn.printStatus&&"Printing","preparing"===dn.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:dn.deleted||Ce.edit,children:Object(a.jsx)(R.a,{disabled:!dn.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=dn._id,pr.downloadScreeningRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:b.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:dn.deleted||Ce.edit||dn.formData,children:Object(a.jsxs)(R.a,{disabled:!dn.email||dn.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=dn._id,_e(!0),k(!1),gr.sendRegFormEmail(e).then((function(e){_e(!1),"OK"===e.data.status&&k(!0)})).catch((function(e){console.log(e),_e(!1)}))},className:b.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",v&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:b.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!da&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ","..."," "]}),da&&oa&&Object(a.jsxs)("span",{className:b.invoiceNumber,children:[" ",oa.invoiceNumber," "]}),da&&!oa&&Object(a.jsxs)("span",{className:b.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Ce.edit&&Ce.person._id===dn._id)&&!dn.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[da&&!oa&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:b.PayButton,onClick:function(){return _a()},children:"Issue Invoice"}),da&&oa&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:b.printInvoiceButton,onClick:function(){return e=oa._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.editInvoiceButton,onClick:function(){return _a()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!dn.email||dn.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=oa._id,t=dn.email,_e(!0),I(!1),Wn.emailInvoice(e,t).then((function(e){_e(!1),"OK"===e.data.status&&I(!0)})).catch((function(e){console.log(e),_e(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",D&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:b.infoTitle,children:[dn.paymentInfo?"ONLINE":"PHONE"," ","DEPOSIT"]})," ",Object(a.jsx)("span",{className:dn.deposit&&0!==dn.deposit?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat(dn.deposit.toLocaleString("en-GB"))}),!(Ce.edit&&Ce.person._id===dn._id)&&!dn.paid&&dn.deleted&&dn.deposit>0&&dn.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.PayButton,onClick:function(e){return X(!0)},children:"Refund Deposit"}),!(Ce.edit&&Ce.person._id===dn._id)&&!dn.paid&&dn.deleted&&dn.deposit>0&&!dn.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:b.PayButton,onClick:function(e){return Ga()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(Ce.edit&&Ce.person._id===dn._id)&&!dn.deleted&&!dn.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Zt.a,{color:"primary",checked:dn.deposit>0,onChange:Sa,name:"deposit"}),label:dn.deposit>0?Object(a.jsx)("span",{className:b.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:b.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})}),!(Ce.edit&&Ce.person._id===dn._id)&&dn.refund&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("span",{className:b.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall})," ","Refund Done","corporate"===dn.paidBy?' "'.concat(dn.corporate,'" '):""]})})]})}),dn.paymentInfo&&Object(a.jsx)("li",{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px dashed #84b076",borderRadius:"8px",padding:"10px",marginBottom:"10px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-10px",fontSize:"0.85em",background:"#fff",fontWeight:"600",color:"#32701d",padding:"0px 5px"},children:"Payment Details"}),JSON.parse(dn.paymentInfo).cardDetails?Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["cardBrand:"," ",Object(a.jsx)("strong",{children:null===(r=JSON.parse(dn.paymentInfo).cardDetails)||void 0===r?void 0:r.card.cardBrand})]}),Object(a.jsxs)(K.a,{item:!0,children:["expDate:"," ",Object(a.jsxs)("strong",{children:[null===(c=JSON.parse(dn.paymentInfo).cardDetails)||void 0===c?void 0:c.card.expMonth,"/",null===(d=JSON.parse(dn.paymentInfo).cardDetails)||void 0===d?void 0:d.card.expYear]})]}),Object(a.jsxs)(K.a,{item:!0,children:["last4:"," ",Object(a.jsx)("strong",{children:null===(s=JSON.parse(dn.paymentInfo).cardDetails)||void 0===s?void 0:s.card.last4})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(dn.paymentInfo).createdAt})]})]}):Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["Operator: ",Object(a.jsx)("strong",{children:"PAYPAL"})]}),Object(a.jsxs)(K.a,{item:!0,children:["Payer Name:"," ",Object(a.jsx)("strong",{children:"".concat(null===(u=JSON.parse(dn.paymentInfo).payer)||void 0===u?void 0:u.name.given_name," ").concat(null===(j=JSON.parse(dn.paymentInfo).payer)||void 0===j?void 0:j.name.surname," ")})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(dn.paymentInfo).create_time})]})]})]})}),Object(a.jsxs)("li",{className:b.li,children:[Object(a.jsx)("span",{className:b.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:dn.OTCCharges&&0!==dn.OTCCharges?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat((dn.OTCCharges&&dn.OTCCharges>0?dn.OTCCharges:oa?oa.grandTotal-(dn.deposit||0):0).toLocaleString("en-GB"))}),!(Ce.edit&&Ce.person._id===dn._id)&&!dn.paid&&!dn.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:b.PayButton,onClick:function(e){return dn._id,Oe(dn),void E(!0)},children:"Pay"}),!(Ce.edit&&Ce.person._id===dn._id)&&dn.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:b.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:b.checkIconSmall})," ","Paid by ",dn.paidBy,"corporate"===dn.paidBy?' "'.concat(dn.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return kn(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:b.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:dn.OTCCharges&&0!==dn.OTCCharges?b.infoDataCharges:b.infoDataChargesHigher,children:"\xa3".concat((dn.deposit+dn.OTCCharges).toLocaleString("en-GB"))})]})}),oa&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[oa.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(oa.items)]})]})]}),Object(a.jsx)("li",{className:b.li,children:Object(a.jsx)("div",{style:{border:"1px dashed #285927",background:"#fafffa",padding:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{className:b.infoTitle,style:{color:"#2a422a"},children:"Ask for Review By EMAIL"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{children:dn.smsSent?Object(a.jsx)(Rt.a,{className:b.checkIcon}):Object(a.jsx)(It.a,{className:b.closeIcon})})}),Object(a.jsx)(K.a,{item:!0,xs:4,style:{paddingLeft:"20px"},children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Patient Source"}),Object(a.jsx)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:xi,onChange:function(e){gi(e.target.value),Bi(bi[e.target.value-1])},label:"Source",fullWidth:!0,children:[{value:1,text:"Medical Express Clinic"}].map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:"".concat(e.text)})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(R.a,{variant:"contained",disabled:Oi||(Ea=dn.email,!(Ea&&!(Ea.length<7))),color:"primary",className:b.PayButton,onClick:vi,children:"Send EMAIL"})})]})})}),pa&&pa.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),pa.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ma(e),void ka(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})," "]})]})})},"panel0")})}),Object(a.jsx)(vr,{booking:me,open:_,price:oa?oa.grandTotal-(dn.deposit||0):null,handleClose:function(){E(!1),Oe(null)}}),Object(a.jsx)(Yn,{booking:me,invoice:oa,open:he,handleClose:function(e){xe(!1),Oe(null),ua()}}),Object(a.jsx)(Rr,{booking:me,open:ae,handleClose:function(){ie(!1),Oe(null)}}),Object(a.jsx)(Bo,{booking:fa,open:va,onClose:function(){ka(!1),ma(null)}}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsxs)(qt.a,{open:vn,onClose:Ba,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Ba,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:za,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsxs)(qt.a,{open:Y,onClose:wa,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:wa,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ha,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsxs)(qt.a,{open:ce,onClose:Ta,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#00a1c5"},id:"confirm-dialog-title",children:"Confirm Booking"}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:[Object(a.jsx)("span",{style:{fontWeight:"500"},children:"Are you sure you want to confirm this booking?"}),Object(a.jsx)("p",{children:"* After confirmation, email/sms will also be sent to the patient."})]})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Ta,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ua,color:"primary",variant:"contained",autoFocus:!0,children:"Yes, Confirm Booking"})]}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsxs)(qt.a,{open:Nn,onClose:Fa,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===me||void 0===me?void 0:me.fullname)||(null===me||void 0===me?void 0:me.surname)+" "+(null===me||void 0===me?void 0:me.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===me||void 0===me?void 0:me.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===me||void 0===me?void 0:me.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===me||void 0===me?void 0:me.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:me,select:Wa}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:ta,onChange:function(e){na(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:Jn,onChange:function(e){qn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:Gn,onChange:function(e,t){Un(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:En,onChange:function(e,t){Mn(t)}})})}),Object(a.jsx)(R.a,{onClick:Wa,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:Fa,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:ue,onClose:Na,"aria-labelledby":"tbc-dialog-title","aria-describedby":"tbc-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#f68529"},id:"tbc-dialog-title",children:dn.tbcFolder?"Move Back To Pending Bookings":"Move To Patients TBC"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:Object(a.jsx)("span",{style:{fontWeight:"500"},children:dn.tbcFolder?'Are you sure you want to move this record to "Pending Bookings"?':'Are you sure you want to move this record to "Patients TBC"?'})})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Na,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:dn.tbcFolder?Va:Ya,color:"secondary",variant:"contained",autoFocus:!0,children:dn.tbcFolder?"Yes, move to Pending Bookings":"Yes, move to Patients TBC"})]}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]}),Object(a.jsx)(V.a,{className:b.backdrop,open:We||ze||Ye,children:Object(a.jsx)(J.a,{color:"inherit"})})]})}var Fr=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),Wr=function e(){Object(ne.a)(this,e)};Wr.downloadCorporateRegForm=function(e){return Fr.get("/api/pdf/downloadcorporateregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var _r=n(357),Er=n.n(_r),Mr=function e(){Object(ne.a)(this,e)};Mr.setClinicNotes=function(e,t){return Fr.post("/api/corporate/book/setclinicnotes",{bookingId:e,notes:t})},Mr.getCorporateReportsByBookingId=function(e){return Fr.get("/api/blood/book/getcorporatereportsbybookingid?id=".concat(e))},Mr.addNewBooking=function(e){return Fr.post("/api/corporate/book/addnewbooking",e)},Mr.sendRegFormEmail=function(e){return Fr.post("/api/corporate/book/sendregformemail?id=".concat(e))},Mr.payBooking=function(e,t,n,a){return Fr.post("/api/corporate/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Mr.unPayBooking=function(e){return Fr.post("/api/corporate/book/unpaybooking?id=".concat(e))},Mr.getShouldRefundsCount=function(){return Fr.get("/api/corporate/book/getshouldrefundscount?")},Mr.refundBooking=function(e){return Fr.post("/api/corporate/payment/refundpayment",{bookingId:e})},Mr.getBookingsStatsByDateStr=function(e){return Fr.get("/api/corporate/book/getbookingsstatsbydatestr?date=".concat(e))},Mr.getBookingsCountByDateStr=function(e){return Fr.get("/api/corporate/book/getbookingscountbydatestr?date=".concat(e))},Mr.getAllBookingsCountAll=function(){return Fr.get("/api/corporate/book/getallbookingscountall")},Mr.getBookingsCountByDateStrandTime=function(e,t,n){return Fr.get("/api/corporate/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Mr.getBookingsByDateStrandTime=function(e,t){return Fr.get("/api/corporate/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Mr.getAllBookingsCountByDateStr=function(e){return Fr.get("/api/corporate/book/getallbookingscountbydatestr?date=".concat(e))},Mr.getAllBookingsCountByDateStrandTime=function(e,t,n){return Fr.get("/api/corporate/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Mr.getAllBookingsByDateStrandTime=function(e,t){return Fr.get("/api/corporate/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Mr.changeBackToBookingMade=function(e){return Fr.post("/api/corporate/book/changebacktobookingmade?id=".concat(e))},Mr.changeToPatientAttended=function(e,t){return Fr.post("/api/corporate/book/changetopatientattended?id=".concat(e),t)},Mr.updateBooking=function(e){return Fr.post("/api/corporate/book/updatebookappointment",e)},Mr.updateBookingTime=function(e){return Fr.post("/api/corporate/book/updatebookappointmenttime",e)},Mr.deleteBooking=function(e){return Fr.post("/api/corporate/book/deletebookappointment?id=".concat(e))},Mr.unDeleteBooking=function(e){return Fr.post("/api/corporate/book/undeletebookappointment?id=".concat(e))},Mr.getBookingsByRef=function(e){return Fr.get("/api/corporate/book/getbookingsbyref?ref=".concat(e))},Mr.getBookingById=function(e){return Fr.get("/api/corporate/book/getbookingbyid?id=".concat(e))},Mr.getAllBookings=function(e){return e||(e=25),Fr.get("/api/corporate/book/getallbookings?limit=".concat(e))},Mr.getDeletedBookings=function(e){return e||(e=25),Fr.get("/api/corporate/book/getdeletedbookings?limit=".concat(e))},Mr.getTodayBookings=function(){return Fr.get("/api/corporate/book/gettodaybookings")},Mr.getOldBookings=function(e){return e||(e=25),Fr.get("/api/corporate/book/getoldbookings?limit=".concat(e))},Mr.getFutureBookings=function(e){return e||(e=25),Fr.get("/api/corporate/book/getfuturebookings?limit=".concat(e))},Mr.getRecentBookings=function(){return Fr.get("/api/corporate/book/getrecentbookings")},Mr.getRecentBookingsAll=function(e){return e||(e=25),Fr.get("/api/corporate/book/getrecentbookingsall?limit=".concat(e))};var zr=n(110),Hr=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Gr(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Ur(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Yr(e){var t=Hr(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Mr.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Ur,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"TOTAL Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Gr,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var Vr=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Kr=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function Jr(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function qr(e){var t,n=Vr(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=c[0],s=c[1],u=Object(i.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(nn()),O=Object(l.a)(m,2),y=O[0],v=(O[1],o.a.useState(!1)),k=Object(l.a)(v,2),S=(k[0],k[1],o.a.useState(!1)),N=Object(l.a)(S,2),D=N[0],I=N[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=o.a.useState(!1),E=Object(l.a)(_,2),z=E[0],H=E[1],G=o.a.useState(null),U=Object(l.a)(G,2),Y=U[0],X=U[1],$=o.a.useState(""),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=o.a.useState({edit:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],oe=o.a.useState({delete:!1,person:null}),re=Object(l.a)(oe,2),ce=re[0],le=re[1],de=o.a.useState({restore:!1,person:null}),se=Object(l.a)(de,2),ue=se[0],je=se[1],be=o.a.useState(!1),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1],ge=o.a.useState(!1),fe=Object(l.a)(ge,2),me=fe[0],Oe=fe[1],ve=o.a.useState(!1),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState({}),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(""),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(""),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(""),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=o.a.useState(""),nt=Object(l.a)(tt,2),at=nt[0],it=nt[1],ot=o.a.useState(""),rt=Object(l.a)(ot,2),ct=rt[0],lt=rt[1],dt=o.a.useState(!1),st=Object(l.a)(dt,2),ut=st[0],jt=st[1],bt=o.a.useState(null),pt=Object(l.a)(bt,2),ht=pt[0],xt=pt[1],gt=o.a.useState(!1),ft=Object(l.a)(gt,2),mt=ft[0],Ot=ft[1],yt=o.a.useState(!1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1],St=o.a.useState(!1),wt=Object(l.a)(St,2),Tt=wt[0],Nt=wt[1],Dt=o.a.useState(!1),Lt=Object(l.a)(Dt,2),It=(Lt[0],Lt[1],o.a.useState(null)),Pt=Object(l.a)(It,2),At=Pt[0],Wt=Pt[1],_t=o.a.useState(null),Et=Object(l.a)(_t,2),Mt=(Et[0],Et[1]),zt=o.a.useState(null),Ht=Object(l.a)(zt,2),Gt=Ht[0],Ut=Ht[1],Yt=o.a.useState(null),Vt=Object(l.a)(Yt,2),Zt=Vt[0],en=Vt[1],tn=o.a.useState(null),an=Object(l.a)(tn,2),cn=an[0],ln=an[1],dn=o.a.useState(null),sn=Object(l.a)(dn,2),jn=sn[0],bn=sn[1],pn=function(){Nt(!1),X(null)},hn=function(){W(!1),X(null)};Object(i.useEffect)((function(){if(ht){var e=Le!==Object(zr.FormatDateFromString)(ht.bookingDate)||We!==ht.bookingTime||ze!==ht.fullname||Ye!==ht.email||qe!==ht.phone||Ze!==ht.notes||ct!==ht.packageName||Z!==ht.birthDate||at!==ht.doctorNote;Ot(e)}}),[kt]),Object(i.useEffect)((function(){e.open||setTimeout((function(){ie({edit:!1,person:null}),Ot(!1)}),500)}),[e.open]);var xn=function(e,t){if(e)He(t.fullname),Pe(Object(zr.FormatDateFromString)(t.bookingDate)),_e(t.bookingTime.toUpperCase()),Ve(t.email),Xe(t.phone),lt(t.service),t.notes&&et(t.notes),t.doctorNote&&it(t.doctorNote),ee(Object(zr.FormatDateFromString)(t.birthDate)),ie({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Ye,n.phone=qe,n.fullname=ze,n.notes=Ze,n.doctorNote=at,n.packageName=ct,n.bookingDate=Object(zr.RevertFormatDateFromString)(Le),n.bookingTime=We,n.bookingRef=t.bookingRef,n.birthDate=Object(zr.RevertFormatDateFromString)(Z),fn(n)&&(mn({bookingId:a,person:n}),H(!1))}}else ie({edit:e,person:t}),Ot(!1)},gn=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},fn=function(e){var t=!1;return gn(e.bookingDate)||(t=!0,Ne(Object(T.a)(Object(T.a)({},Te),{},{bookingDateError:!0}))),e.birthDate&&!gn(e.birthDate)&&(t=!0,Ne(Object(T.a)(Object(T.a)({},Te),{},{birthDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,Ne(Object(T.a)(Object(T.a)({},Te),{},{bookingTimeError:!0}))),!t},mn=function(e){xe(!0),Mr.updateBooking(e).then((function(e){xe(!1),ie({edit:!1,person:null}),jt(!ut)})).catch((function(e){xe(!1),ie({edit:!1,person:null}),console.log(e)}))},On=function(e,t){var n;e?le({delete:e,person:t}):e||t?!e&&t&&(n=t._id,Oe(!0),Mr.deleteBooking(n).then((function(e){Oe(!1),le({delete:!1,person:null}),jt(!ut)})).catch((function(e){Oe(!1),le({delete:!1,person:null}),console.log(e)}))):le({delete:e,person:t})},yn=function(e,t){var n;e?je({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Se(!0),Mr.unDeleteBooking(n).then((function(e){Se(!1),je({restore:!1,person:null}),jt(!ut)})).catch((function(e){Se(!1),je({restore:!1,person:null}),console.log(e)}))):je({restore:e,person:t})},vn=function(){Wt(!1),Mt(null),Ut(null),bn(null),ln(null),en(null)},kn=function(e,t){xe(!0),Mr.changeToPatientAttended(Y._id,{patientid:t||null,birthDate:Gt,forename:cn,surname:jn,gender:Zt}).then((function(e){xe(!1),jt(!ut),vn()})).catch((function(e){console.log(e),xe(!1)}))};Object(i.useEffect)((function(){e.booking&&(Mr.getBookingById(e.booking._id).then((function(e){xt(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[ut,d.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&xt(e.booking)}),[e.booking]);var Cn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!0),e.prev=1,e.next=4,Mr.unPayBooking(ht._id);case 4:xe(!1),Nt(!1),jt(!ut),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),xe(!1),Nt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!0),e.prev=1,e.next=4,Mr.refundBooking(ht._id);case 4:xe(!1),Bn(),W(!1),jt(!ut),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),xe(!1),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Bn=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mr.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Tn=o.a.useState(null),Rn=Object(l.a)(Tn,2),Ln=Rn[0],In=Rn[1],Pn=o.a.useState(!1),An=Object(l.a)(Pn,2),_n=An[0],En=An[1],Mn=o.a.useState(!1),zn=Object(l.a)(Mn,2),Hn=zn[0],Gn=zn[1],Un=o.a.useState(!1),Vn=Object(l.a)(Un,2),Kn=Vn[0],Jn=Vn[1],qn=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,En(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,In(n.data.invoice),En(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),En(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(qn(),ja(),ga(e.booking.clinicNotes||""),ya(e.booking.clinicNotes||""),Sa(!1))}),[e.booking,e.open]);var Xn,$n=o.a.useState(null),ta=Object(l.a)($n,2),na=ta[0],aa=ta[1],ia=o.a.useState(null),oa=Object(l.a)(ia,2),ra=oa[0],ca=oa[1],la=o.a.useState(null),da=Object(l.a)(la,2),sa=da[0],ua=da[1],ja=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return aa(null),t.prev=1,t.next=4,Mr.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&aa(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),ba=function(){X(ht),In(Ln),Gn(!0)},pa=o.a.useState(""),ha=Object(l.a)(pa,2),xa=ha[0],ga=ha[1],fa=o.a.useState(""),ma=Object(l.a)(fa,2),Oa=ma[0],ya=ma[1],va=Object(i.useState)(!1),ka=Object(l.a)(va,2),Ca=ka[0],Sa=ka[1],Ba=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Sa(!0),t.next=4,Mr.setClinicNotes(e.booking._id,xa);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(ya(xa),Sa(!1),jt(!ut)):Sa(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Sa(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),wa=Object(i.useState)(!1),Ta=Object(l.a)(wa,2),Na=Ta[0],Da=Ta[1],Ra=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{Da(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),Da(!1)}catch(p){Da(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:ht&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:Kr,keepMounted:!0,onClose:function(){f(!1),Jn(!1),In(null),e.onClose()},PaperComponent:Jr,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:ht.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/corporate/".concat(ht._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:ht.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!b,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(xa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:xa||"",onChange:function(e){ga(e.target.value)},variant:"outlined"})}),Ca&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Oa!==xa&&!Ca&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(xa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:Ba,className:n.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Fn.CORPORATE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Corporate"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:ht.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(ht.fullname)})}),ht.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:ht.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(ue.restore&&ue.person._id===ht._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!ht.deleted||ue.restore&&ue.person._id===ht._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){yn(!0,ht)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ue.restore&&ue.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Ce,onClick:function(){yn(!1,ht)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ue.restore&&ue.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Ce,onClick:function(){yn(!1,null)},className:n.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:ht.deleted||ce.delete||ae.edit&&ae.person._id===ht._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){xn(!0,ht)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(ae.edit&&ae.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he||!mt,onClick:function(){xn(!1,ht)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(ae.edit&&ae.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){xn(!1,null)},className:n.CancelButton,children:"Cancel"})}),!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(ce.delete&&ce.person._id===ht._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||ht.deleted||ae.edit||ce.delete&&ce.person._id===ht._id,children:[ht.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:ht.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){On(!0,ht)},className:n.DeleteButton,children:"Delete This Record"})})}),0===ht.OTCCharges&&Object(a.jsx)(R.a,{disabled:ht.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){On(!0,ht)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ce.delete&&ce.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:me,onClick:function(){On(!1,ht)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ce.delete&&ce.person._id===ht._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:me,onClick:function(){On(!1,null)},className:n.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:Object(zr.FormatDateFromString)(ht.bookingDate)}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Te.bookingDateError,className:n.TextBox,value:Le,onChange:function(e){Pe(e.target.value),Ne(Object(T.a)(Object(T.a)({},Te),{},{bookingDateError:!1})),Ct(!kt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Te.bookingTimeError,className:n.TextBox,value:We,onChange:function(e){_e(e.target.value),Ne(Object(T.a)(Object(T.a)({},Te),{},{bookingTimeError:!1})),Ct(!kt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.fullname}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ze,onChange:function(e){He(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.email}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:null===(t=ht.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:qe,onChange:function(e){Xe(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.notes}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ze,onChange:function(e){et(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.service}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ct,onChange:function(e){lt(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsx)(K.a,{item:!0,xs:6,children:Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:Object(zr.FormatDateFromString)(ht.birthDate)}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Te.birthDateError,className:n.TextBox,value:Z,onChange:function(e){ee(e.target.value),Ne(Object(T.a)(Object(T.a)({},Te),{},{birthDateError:!1})),Ct(!kt)},inputProps:{style:{padding:0}}})})]})})]})}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:ae.edit&&ae.person._id===ht._id,children:[!z&&y&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){var e;He((e=ht).fullname),Pe(Object(zr.FormatDateFromString)(e.bookingDate)),_e(e.bookingTime.toUpperCase()),Ve(e.email),Xe(e.phone),lt(e.service),e.notes&&et(e.notes),e.doctorNote&&it(e.doctorNote),ee(Object(zr.FormatDateFromString)(e.birthDate)),H(!0)},className:n.SaveButton,children:"Add/Edit Doctor Note"})}),z&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){xn(!1,ht)},className:n.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id||z,className:n.infoData,children:ht.doctorNote}),Object(a.jsx)("span",{hidden:!(ae.edit&&ae.person._id===ht._id||z),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[n.TextBox,n.active],value:at,disabled:!y,onChange:function(e){it(e.target.value),Ct(!kt)},inputProps:{style:{padding:0}}})})]}),!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(Xn=ht.status,"booked"===Xn?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===Xn?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===ht.status&&!(ae.edit&&ae.person._id===ht._id)&&!ht.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:he,style:{width:"300px"},onClick:function(e){return t=ht._id,xe(!0),void Mr.changeBackToBookingMade(t).then((function(e){xe(!1),jt(!ut)})).catch((function(e){console.log(e),xe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===ht.status&&!(ae.edit&&ae.person._id===ht._id)&&!ht.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:he,style:{width:"300px"},onClick:function(e){return function(e){Wt(!0),X(e),Ut(e.birthDate),bn(e.surname),ln(e.forename),en(e.gender)}(ht)},children:"Change To Patient Attended"})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:ae.edit&&ae.person._id===ht._id,className:n.infoData,children:ht.estimatedPrice})]}),Object(a.jsx)("li",{hidden:ht.deleted||ae.edit,children:Object(a.jsxs)(R.a,{disabled:Na,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:Ra,className:n.DownloadForm,children:[!ht.printStatus&&"Print LAB Label","printed"===ht.printStatus&&"Print LAB Label Again","printing"===ht.printStatus&&"Printing","preparing"===ht.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:ht.deleted||ae.edit,children:Object(a.jsx)(R.a,{disabled:!ht.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ht._id,Wr.downloadCorporateRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:ht.deleted||ae.edit||ht.formData,children:Object(a.jsxs)(R.a,{disabled:!ht.email||ht.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ht._id,xe(!0),f(!1),Mr.sendRegFormEmail(e).then((function(e){xe(!1),"OK"===e.data.status&&f(!0)})).catch((function(e){console.log(e),xe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",g&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!_n&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ","..."," "]}),_n&&Ln&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Ln.invoiceNumber," "]}),_n&&!Ln&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(ae.edit&&ae.person._id===ht._id)&&!ht.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[_n&&!Ln&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return ba()},children:"Issue Invoice"}),_n&&Ln&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Ln._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return ba()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!ht.email||ht.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Ln._id,t=ht.email,xe(!0),Jn(!1),Wn.emailInvoice(e,t).then((function(e){xe(!1),"OK"===e.data.status&&Jn(!0)})).catch((function(e){console.log(e),xe(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Kn&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:ht.OTCCharges&&0!==ht.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(ht.OTCCharges.toLocaleString("en-GB"))}),!(ae.edit&&ae.person._id===ht._id)&&!ht.paid&&!ht.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return ht._id,X(ht),void I(!0)},children:"Pay"}),!(ae.edit&&ae.person._id===ht._id)&&ht.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:n.checkIconSmall})," ","Paid by ",ht.paidBy,"corporate"===ht.paidBy?' "'.concat(ht.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return Nt(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),Ln&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Ln.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Ln.items)]})]})]}),na&&na.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),na.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ca(e),void ua(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:he||me||Ce,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(Yr,{booking:Y,open:D,price:Ln?Ln.grandTotal:null,handleClose:function(){I(!1),X(null)}}),Object(a.jsx)(Yn,{booking:Y,invoice:Ln,open:Hn,handleClose:function(e){Gn(!1),X(null),qn()}}),Object(a.jsx)(Bo,{booking:ra,open:sa,onClose:function(){ua(!1),ca(null)}})]}),Object(a.jsxs)(qt.a,{open:Tt,onClose:pn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:pn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Cn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:At,onClose:vn,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===Y||void 0===Y?void 0:Y.fullname)||(null===Y||void 0===Y?void 0:Y.surname)+" "+(null===Y||void 0===Y?void 0:Y.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===Y||void 0===Y?void 0:Y.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===Y||void 0===Y?void 0:Y.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===Y||void 0===Y?void 0:Y.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:Y,select:kn}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:jn,onChange:function(e){bn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:cn,onChange:function(e){ln(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:Zt,onChange:function(e,t){en(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:Gt,onChange:function(e,t){Ut(t)}})})}),Object(a.jsx)(R.a,{onClick:kn,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:vn,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:F,onClose:hn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:hn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Sn,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Xr=Object(N.a)((function(e){return{}}));function $r(e){Xr();if(!e.booking)return null;switch(e.booking.clinic){case"pcr":return Object(a.jsx)(qn,{booking:e.booking,open:e.open,onClose:e.onClose});case"gp":return Object(a.jsx)(Do,{booking:e.booking,open:e.open,onClose:e.onClose});case"gynae":return Object(a.jsx)(xc,{booking:e.booking,open:e.open,onClose:e.onClose});case"std":return Object(a.jsx)(Uo,{booking:e.booking,open:e.open,onClose:e.onClose});case"blood":return Object(a.jsx)(Qo,{booking:e.booking,open:e.open,onClose:e.onClose});case"derma":return Object(a.jsx)(jr,{booking:e.booking,open:e.open,onClose:e.onClose});case"screening":case"visa":return Object(a.jsx)(Ar,{booking:e.booking,open:e.open,onClose:e.onClose});case"corporate":return Object(a.jsx)(qr,{booking:e.booking,open:e.open,onClose:e.onClose});default:return null}}var Qr=n(212),Zr=n.n(Qr),ec=["Visa Medical"],tc=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function nc(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ac(e){var t=e.bookingsData,n=tc(),r={bookings:[]};if(Array.isArray(t.bookings)){var c=t.bookings;r.bookings=[];for(var d=0;d<c.length;d++)r.bookings[d]=Object(T.a)(Object(T.a)({},c[d]),{},{id:d+1})}var s,u=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.DefaultLabel}},j=o.a.useState(25),b=Object(l.a)(j,2),p=(b[0],b[1],Object(i.useState)(!1)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-6048e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(new Date((new Date).getTime()-864e5)),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],L=N[1],I=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),P=Object(l.a)(I,2),A=P[0],F=P[1],W=Object(i.useState)(!1),_=Object(l.a)(W,2),E=_[0],z=_[1],H=Object(i.useState)(!0),G=Object(l.a)(H,2),V=G[0],J=G[1],q=Object(i.useState)(!0),X=Object(l.a)(q,2),$=X[0],Q=X[1],ee=Object(i.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=Object(i.useState)(!0),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=Object(i.useState)(!0),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=Object(i.useState)(!0),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=Object(i.useState)(!0),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=Object(i.useState)(!0),ve=Object(l.a)(Oe,2),ke=ve[0],Ce=ve[1],Se=Object(i.useState)(!0),Be=Object(l.a)(Se,2),we=Be[0],Te=Be[1],Ne=Object(i.useState)(!0),De=Object(l.a)(Ne,2),Re=De[0],Le=De[1];s=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return at(t,e.value,e.getValue("clinic"))},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Type",align:"center",width:130,renderCell:function(e){return Object(a.jsx)("span",{className:u(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"fullname",headerName:"Fullname",width:240,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"bookingDate",headerName:"Attendance Date",width:170,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:n.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:n.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:n.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:n.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:n.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:n.PositiveLabel,children:" POS "}):""}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:n.RefLink,children:e.value})})}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ie=o.a.useContext(C),Pe=Object(l.a)(Ie,2),Ae=(Pe[0],Pe[1],o.a.useState(null)),Fe=Object(l.a)(Ae,2),We=(Fe[0],Fe[1]),_e=o.a.useState(null),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=o.a.useState(!1),Ge=Object(l.a)(He,2),Ue=Ge[0],Ye=Ge[1],Ve=o.a.useState(!1),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=Object(i.useState)(ec[0]),$e=Object(l.a)(Xe,2),Qe=$e[0],Ze=$e[1],et=o.a.useState(""),tt=Object(l.a)(et,2),nt=(tt[0],tt[1],Object(i.useRef)(),function(){ze(null),Ye(!1),qe(!1)}),at=function(e,t,n){var a=r.bookings.find((function(e){return e._id===t}));ze(a),"Blood Result"===n?qe(!0):Ye(!0)},it=o.a.useState(1),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=o.a.useState(!1),dt=Object(l.a)(lt,2);dt[0],dt[1];return Object(a.jsxs)(o.a.Fragment,{children:[r.bookings&&r.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(Yt.a,{rows:r.bookings,columns:s,autoPageSize:!0,page:rt,onPageChange:function(e){ct(e.page)},onSelectionChange:function(e){e.length>0&&We(e.rows[0])}})}),Object(a.jsx)($r,{booking:Me,open:Ue,onClose:nt}),r.bookings&&r.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:x,onClose:function(){Ze(ec[0]),z(!1),g(!1)},PaperComponent:nc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:E,onChange:function(e){z(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),E&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:n.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:Qe,onChange:function(e){Ze(e.target.value)},children:ec.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:O,onChange:function(e){y(e),L(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:S,onChange:function(e){B(e),F(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:n.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(D,".").concat(A),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:V,onChange:function(e){J(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ne,onChange:function(e){ae(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:re,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){ue(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){he(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:fe,onChange:function(e){me(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){Te(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Re,onChange:function(e){Le(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:n.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[V&&Object(a.jsx)("th",{className:n.th,children:"Date"}),$&&Object(a.jsx)("th",{className:n.th,children:"Forename"}),ne&&Object(a.jsx)("th",{className:n.th,children:"Surename"}),re&&Object(a.jsx)("th",{className:n.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:n.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:n.th,children:"Tel"}),fe&&Object(a.jsx)("th",{className:n.th,children:"Certificate"}),ke&&Object(a.jsx)("th",{className:n.th,children:"AntiBodyTest"}),we&&Object(a.jsx)("th",{className:n.th,children:"Lab No."}),Re&&Object(a.jsx)("th",{className:n.th,children:"Price (\xa3) "})]}),r.bookings.filter((function(e){return E?e.bookingDate>=D&&e.bookingDate<=A&&e.paid&&"corporate"===e.paidBy&&e.corporate===Qe:e.bookingDate>=D&&e.bookingDate<=A})).map((function(e){return Object(a.jsxs)("tr",{children:[V&&Object(a.jsx)("td",{className:n.td,children:Object($i.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:n.td,children:e.forenameCapital}),ne&&Object(a.jsx)("td",{className:n.td,children:e.surnameCapital}),re&&Object(a.jsx)("th",{className:n.th}),se&&Object(a.jsx)("td",{className:n.td,children:e.email}),pe&&Object(a.jsx)("td",{className:n.td,children:e.phone}),fe&&Object(a.jsx)("td",{className:n.td,children:e.certificate?"YES":"NO"}),ke&&Object(a.jsx)("td",{className:n.td,children:e.antiBodyTest?"YES":"NO"}),we&&Object(a.jsx)("td",{className:n.td,children:e.extRef}),Re&&Object(a.jsx)("td",{className:n.td,children:Zr.a.calculatePrice(e)})]})}))]})})]})})]}),Object(a.jsx)(Bo,{booking:Me,open:Je,onClose:nt})]})}var ic=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function oc(e){var t,n=ic(),r=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.clinicTitle}};t=[{field:"_id",headerName:" ",width:100,renderCell:function(t){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(n){return e.select(null,t.value)},children:"Select"})})}},{field:"patientId",headerName:"Patient ID",width:120},{field:"fullname",headerName:"Full Name",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"birthDate",headerName:"Birth Date",align:"center",width:130,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"allbookings",headerName:"Bookings Count",width:170,valueFormatter:function(e){var t;return(null===(t=e.value)||void 0===t?void 0:t.length)||0}},{field:"bookings",headerName:"Last Booking Clinic",align:"center",width:190,renderCell:function(e){var t;return Object(a.jsx)("span",{className:r(Array.isArray(e.value)?e.value[0].clinic:""),children:Array.isArray(e.value)&&e.value[0].clinic?null===(t=e.value[0].clinic)||void 0===t?void 0:t.toUpperCase():"N/A"})}},{field:"gender",headerName:"Gender",width:100},{field:"title",headerName:"Title",width:100},{field:"phone",headerName:"Tel",width:150},{field:"email",headerName:"Email",width:200}];var c=o.a.useState({bookings:[],cachedPatients:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],C=o.a.useState(""),S=Object(l.a)(C,2),N=S[0],D=S[1],I=function(e,t){var n=qi.searchAllPatients;return u({patients:[],cachedPatients:[],isFetching:!0}),n(e||N,t||U).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});u({patients:Object(Ut.a)(e.data),cachedPatients:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))},P=o.a.useState(1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=o.a.useState(!1),E=Object(l.a)(_,2),M=E[0],z=E[1],H=Object(i.useState)(null),G=Object(l.a)(H,2),U=G[0],Y=G[1],V=function(){I()};return Object(i.useEffect)((function(){(function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{I(e.data.fullname||"".concat(e.data.surname," ").concat(e.data.forename),e.data.birthDate)}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)(L.a,{error:M,variant:"standard",value:N,onChange:function(e){D(e.target.value),z(!1)},id:"filter",label:"Patient's Name",helperText:"You can search the patients by name ".concat(M?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{width:"250px"},onKeyPress:function(e){"Enter"===e.key&&V()}})}),Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:v,onChange:function(e){k(e),Y(Dn(e,"yyyy-mm-dd"))}})})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:V,children:"Search"})}),Object(a.jsx)(K.a,{item:!0,children:s.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(J.a,{color:"primary"})})}),s.isFetching&&Object(a.jsx)("div",{className:n.HideNowRows})]}),s.patients&&s.patients.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(Yt.a,{rows:s.patients,columns:t,autoPageSize:!0,page:F,onPageChange:function(e){W(e.page)}})}),s.patients&&s.patients.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:function(){m(!1),h({id:0,bookings:null})},"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Patient Info"," "]})})}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Details"," "]})})}),Object(a.jsx)($t.a,{}),Object(a.jsx)("div",{style:{minHeight:120,width:"100%",marginTop:"20px",marginBottom:"20px"},children:Object(a.jsx)(Yt.a,{rows:[p],columns:t,hideFooter:!0})}),Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","History"," "]})})}),Object(a.jsx)($t.a,{}),Object(a.jsx)(ac,{bookingsData:p})]})]})]})}var rc=function e(){Object(ne.a)(this,e)};rc.downloadGynaeRegForm=function(e){return Yi.get("/api/pdf/downloadgynaeregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},rc.downloadCovidForm1=function(e){return Yi.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},rc.downloadCovidForm2=function(e){return Yi.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rc.downloadPdfResult=function(e){return Yi.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rc.downloadPdfCert=function(e){return Yi.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rc.downloadPdfLabReport=function(e){return Yi.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var cc=n(358),lc=n.n(cc),dc=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function sc(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function uc(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function jc(e){var t=dc(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)("credit card"),s=Object(l.a)(d,2),u=s[0],j=s[1],b=Object(i.useState)(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=Object(i.useState)(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=Object(i.useState)(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState([]),F=Object(l.a)(A,2),W=F[0],_=F[1];o.a.useEffect((function(){E()}),[]);var E=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,_(t),x(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),j("credit card"),S(""),x(W[0]),O(!1))},H=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&0!==k.trim().length&&"0"!==k){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Vi.payBooking(e.booking._id,k,u,"corporate"===u?h:"");case 7:O(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:uc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(fn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:I,label:"OTC Charges",value:k,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:sc,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(On.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:u,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(mn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(mn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(mn.a,{}),label:"Corporate"})]}),"corporate"===u&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){x(e.target.value)},children:W.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:H,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var bc=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),pc=o.a.forwardRef((function(e,t){return Object(a.jsx)(dn.a,Object(T.a)({direction:"up",ref:t},e))}));function hc(e){return Object(a.jsx)(ln.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function xc(e){var t,n=bc(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=c[0],s=c[1],u=Object(i.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(nn()),O=Object(l.a)(m,2),y=O[0],v=(O[1],o.a.useState(!1)),k=Object(l.a)(v,2),S=(k[0],k[1],o.a.useState(!1)),N=Object(l.a)(S,2),D=N[0],I=N[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=o.a.useState(!1),E=Object(l.a)(_,2),H=E[0],G=E[1],Y=o.a.useState(null),X=Object(l.a)(Y,2),$=X[0],Q=X[1],Z=o.a.useState({edit:!1,person:null}),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState({delete:!1,person:null}),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState({restore:!1,person:null}),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState(!1),je=Object(l.a)(ue,2),be=je[0],pe=je[1],he=o.a.useState(!1),xe=Object(l.a)(he,2),ge=xe[0],fe=xe[1],me=o.a.useState(!1),Oe=Object(l.a)(me,2),ve=Oe[0],ke=Oe[1],Ce=o.a.useState({}),Se=Object(l.a)(Ce,2),Be=Se[0],we=Se[1],Te=o.a.useState(""),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=o.a.useState(""),Pe=Object(l.a)(Le,2),Ae=Pe[0],Fe=Pe[1],We=o.a.useState(""),_e=Object(l.a)(We,2),Ee=_e[0],Me=_e[1],ze=o.a.useState(""),He=Object(l.a)(ze,2),Ge=He[0],Ue=He[1],Ye=o.a.useState(""),Ve=Object(l.a)(Ye,2),Ke=Ve[0],Je=Ve[1],qe=o.a.useState(""),Xe=Object(l.a)(qe,2),$e=Xe[0],Qe=Xe[1],Ze=o.a.useState(""),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(""),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=o.a.useState(!1),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],ut=o.a.useState(null),jt=Object(l.a)(ut,2),bt=jt[0],pt=jt[1],ht=o.a.useState(!1),xt=Object(l.a)(ht,2),gt=xt[0],ft=xt[1],mt=o.a.useState(!1),Ot=Object(l.a)(mt,2),yt=Ot[0],vt=Ot[1],kt=o.a.useState(!1),Ct=Object(l.a)(kt,2),St=Ct[0],wt=Ct[1],Tt=o.a.useState(null),Nt=Object(l.a)(Tt,2),Dt=Nt[0],Lt=Nt[1],Pt=o.a.useState(null),At=Object(l.a)(Pt,2),Wt=(At[0],At[1]),_t=o.a.useState(null),Et=Object(l.a)(_t,2),Mt=Et[0],zt=Et[1],Ht=o.a.useState(null),Gt=Object(l.a)(Ht,2),Ut=Gt[0],Yt=Gt[1],Vt=o.a.useState(null),en=Object(l.a)(Vt,2),tn=en[0],an=en[1],cn=o.a.useState(null),ln=Object(l.a)(cn,2),dn=ln[0],sn=ln[1],jn=function(){wt(!1),Q(null)},bn=function(){W(!1),Q(null)};Object(i.useEffect)((function(){if(bt){var e=De!==Object(Ki.FormatDateFromString)(bt.bookingDate)||Ae!==bt.bookingTime||Ee!==bt.fullname||Ge!==bt.email||Ke!==bt.phone||ot!==bt.service||$e!==bt.notes||tt!==bt.doctorNote;ft(e)}}),[yt]),Object(i.useEffect)((function(){e.open||setTimeout((function(){ne({edit:!1,person:null}),ft(!1)}),500)}),[e.open]);var pn=function(e,t){if(e)Me(t.fullname),Re(Object(Ki.FormatDateFromString)(t.bookingDate)),Fe(t.bookingTime.toUpperCase()),Ue(t.email),Je(t.phone),rt(t.service),t.notes&&Qe(t.notes),t.doctorNote&&nt(t.doctorNote),ne({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Ge,n.phone=Ke,n.fullname=Ee,n.notes=$e,n.doctorNote=tt,n.service=ot,n.bookingDate=Object(Ki.RevertFormatDateFromString)(De),n.bookingTime=Ae,n.bookingRef=t.bookingRef,hn(n)&&(xn({bookingId:a,person:n}),G(!1))}}else ne({edit:e,person:t}),ft(!1)},hn=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,we(Object(T.a)(Object(T.a)({},Be),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,we(Object(T.a)(Object(T.a)({},Be),{},{bookingTimeError:!0}))),!t},xn=function(e){pe(!0),Vi.updateBooking(e).then((function(e){pe(!1),ne({edit:!1,person:null}),st(!dt)})).catch((function(e){pe(!1),ne({edit:!1,person:null}),console.log(e)}))},gn=function(e,t){var n;e?re({delete:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),Vi.deleteBooking(n).then((function(e){fe(!1),re({delete:!1,person:null}),st(!dt)})).catch((function(e){fe(!1),re({delete:!1,person:null}),console.log(e)}))):re({delete:e,person:t})},fn=function(e,t){var n;e?se({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ke(!0),Vi.unDeleteBooking(n).then((function(e){ke(!1),se({restore:!1,person:null}),st(!dt)})).catch((function(e){ke(!1),se({restore:!1,person:null}),console.log(e)}))):se({restore:e,person:t})},mn=function(){Lt(!1),Wt(null),zt(null),sn(null),an(null),Yt(null)},On=function(e,t){pe(!0),Vi.changeToPatientAttended($._id,{patientid:t||null,birthDate:Mt,forename:tn,surname:dn,gender:Ut}).then((function(e){pe(!1),st(!dt),mn()})).catch((function(e){console.log(e),pe(!1)}))};Object(i.useEffect)((function(){e.booking&&(Vi.getBookingById(e.booking._id).then((function(e){pt(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[dt,d.bookingPayChanged]),Object(i.useEffect)((function(){e.booking&&pt(e.booking)}),[e.booking]);var yn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),e.prev=1,e.next=4,Vi.unPayBooking(bt._id);case 4:pe(!1),wt(!1),st(!dt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),pe(!1),wt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),vn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),e.prev=1,e.next=4,Vi.refundBooking(bt._id);case 4:pe(!1),kn(),W(!1),st(!dt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),pe(!1),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),kn=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vi.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Cn=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),e.prev=1,e.next=4,Vi.manualRefundBooking(bt._id);case 4:pe(!1),kn(),st(!dt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),pe(!1),W(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(w.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?100:0,pe(!0),e.prev=3,e.next=6,Vi.changeDepositBooking(bt._id,a);case 6:pe(!1),st(!dt),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),pe(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Bn=o.a.useState(null),Tn=Object(l.a)(Bn,2),Rn=Tn[0],Ln=Tn[1],In=o.a.useState(!1),Pn=Object(l.a)(In,2),An=Pn[0],_n=Pn[1],En=o.a.useState(!1),Mn=Object(l.a)(En,2),zn=Mn[0],Hn=Mn[1],Gn=o.a.useState(!1),Un=Object(l.a)(Gn,2),Vn=Un[0],Kn=Un[1],Jn=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_n(!1),t.next=4,Wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Ln(n.data.invoice),_n(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),_n(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();o.a.useEffect((function(){e.booking&&e.open&&(Jn(),ja(),ga(e.booking.clinicNotes||""),ya(e.booking.clinicNotes||""),Sa(!1))}),[e.booking,e.open]);var qn,Xn,$n=o.a.useState(null),ta=Object(l.a)($n,2),na=ta[0],aa=ta[1],ia=o.a.useState(null),oa=Object(l.a)(ia,2),ra=oa[0],ca=oa[1],la=o.a.useState(null),da=Object(l.a)(la,2),sa=da[0],ua=da[1],ja=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return aa(null),t.prev=1,t.next=4,Vi.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&aa(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),ba=function(){Q(bt),Ln(Rn),Hn(!0)},pa=o.a.useState(""),ha=Object(l.a)(pa,2),xa=ha[0],ga=ha[1],fa=o.a.useState(""),ma=Object(l.a)(fa,2),Oa=ma[0],ya=ma[1],va=Object(i.useState)(!1),ka=Object(l.a)(va,2),Ca=ka[0],Sa=ka[1],Ba=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Sa(!0),t.next=4,Vi.setClinicNotes(e.booking._id,xa);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(ya(xa),Sa(!1),st(!dt)):Sa(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Sa(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),wa=Object(i.useState)(!1),Ta=Object(l.a)(wa,2),Na=Ta[0],Da=Ta[1],Ra=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i,o,r,c,l,d,s,u,j,b;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},j=function(e){return"M"===e?"Male":"F"===e?"Female":"--"};try{Da(!0),i=new Date,o=Dn(i,"yyyy-mm-dd"),r=Dn(i,"HH:MM:ss"),(c=null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase())&&0!==c.trim().length||(c="--"),(l=null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase())&&0!==l.trim().length||(l="--"),(d=e.booking.birthDate)&&0!==d.trim().length||(d="--"),s=document.createElement("a"),u=new Blob(["Text_3=".concat(c),"\n","Text_3_1=".concat(l),"\n","Text_3_1_1=".concat(j(e.booking.gender)),"\n","Text_3_1_1_1=".concat(b(d)),"\n","Text_3_1_1_2=".concat(b(o)),"\n","Text_3_1_1_2_1=".concat(r),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),s.href=URL.createObjectURL(u),s.download="".concat(e.booking.fullname,".values"),document.body.appendChild(s),s.click(),Da(!1)}catch(p){Da(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),La=["It was great to see and treat you at the Medical Express Clinic, Please let us know how you got on by clicking here: https://g.page/r/CZcAyTF67Ec0EBM/review"],Ia=Object(i.useState)(1),Pa=Object(l.a)(Ia,2),Aa=Pa[0],Fa=Pa[1],Wa=Object(i.useState)(!1),_a=Object(l.a)(Wa,2),Ea=_a[0],Ma=_a[1],za=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ma(!0),e.prev=1,e.next=4,Vi.sendReviewSMS(bt._id,Ua);case 4:(t=e.sent)&&t.data&&"OK"===t.data.status&&(pt((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!0})})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})}))),Ma(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Ma(!1),pt((function(e){return Object(T.a)(Object(T.a)({},e),{},{smsSent:!1})}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ha=Object(i.useState)(La[0]),Ga=Object(l.a)(Ha,2),Ua=Ga[0],Ya=Ga[1];return Object(a.jsx)(o.a.Fragment,{children:bt&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,TransitionComponent:pc,keepMounted:!0,onClose:function(){f(!1),Kn(!1),Ln(null),e.onClose()},PaperComponent:hc,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Xt.a,{id:"alert-dialog-slide-title",style:bt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Bt.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/".concat(bt._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:bt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!b,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(xa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:xa||"",onChange:function(e){ga(e.target.value)},variant:"outlined"})}),Ca&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Oa!==xa&&!Ca&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(xa?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Bt.a,{title:"SAVE NOTES",children:Object(a.jsx)(q.a,{onClick:Ba,className:n.margin,size:"small",children:Object(a.jsx)(lo.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Fn.GYNAE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GYNAE"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:bt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(bt.fullname)})}),bt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:bt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px",paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(de.restore&&de.person._id===bt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!bt.deleted||de.restore&&de.person._id===bt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){fn(!0,bt)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(de.restore&&de.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ve,onClick:function(){fn(!1,bt)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(de.restore&&de.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ve,onClick:function(){fn(!1,null)},className:n.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{hidden:bt.deleted||oe.delete||te.edit&&te.person._id===bt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){pn(!0,bt)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(te.edit&&te.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be||!gt,onClick:function(){pn(!1,bt)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(te.edit&&te.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){pn(!1,null)},className:n.CancelButton,children:"Cancel"})}),!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===bt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||bt.deleted||te.edit||oe.delete&&oe.person._id===bt._id,children:[bt.OTCCharges>0&&Object(a.jsx)(Bt.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:bt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){gn(!0,bt)},className:n.DeleteButton,children:"Delete This Record"})})}),0===bt.OTCCharges&&Object(a.jsx)(R.a,{disabled:bt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){gn(!0,bt)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){gn(!1,bt)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===bt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){gn(!1,null)},className:n.CancelButton,children:"Cancel"})})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:Object(Ki.FormatDateFromString)(bt.bookingDate)}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Be.bookingDateError,className:n.TextBox,value:De,onChange:function(e){Re(e.target.value),we(Object(T.a)(Object(T.a)({},Be),{},{bookingDateError:!1})),vt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:bt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Be.bookingTimeError,className:n.TextBox,value:Ae,onChange:function(e){Fe(e.target.value),we(Object(T.a)(Object(T.a)({},Be),{},{bookingTimeError:!1})),vt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:bt.fullname}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){Me(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:bt.email}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ge,onChange:function(e){Ue(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:bt.service}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ot,onChange:function(e){rt(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:null===(t=bt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ke,onChange:function(e){Je(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id,className:n.infoData,children:bt.notes}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:$e,onChange:function(e){Qe(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)(K.a,{item:!0,fullWidth:!0,style:{paddingBottom:"16px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,style:{display:"flex",width:"full",justifyContent:"space-between",justifyItems:"center"},children:[Object(a.jsx)("span",{children:"DOCTOR'S NOTES"}),Object(a.jsxs)("li",{hidden:te.edit&&te.person._id===bt._id,children:[!H&&y&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){var e;Me((e=bt).fullname),Re(Object(Ki.FormatDateFromString)(e.bookingDate)),Fe(e.bookingTime.toUpperCase()),Ue(e.email),Je(e.phone),rt(e.service),e.notes&&Qe(e.notes),e.doctorNote&&nt(e.doctorNote),G(!0)},className:n.SaveButton,children:"Add/Edit Doctor Note"})}),H&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{type:"button",variant:"contained",color:"primary",onClick:function(){pn(!1,bt)},className:n.SaveButton,children:"Save Note"})})]})]}),Object(a.jsx)("span",{hidden:te.edit&&te.person._id===bt._id||H,className:n.infoData,children:bt.doctorNote}),Object(a.jsx)("span",{hidden:!(te.edit&&te.person._id===bt._id||H),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,multiline:!0,rows:4,type:"text",className:[n.TextBox,n.active],value:tt,disabled:!y,onChange:function(e){nt(e.target.value),vt(!yt)},inputProps:{style:{padding:0}}})})]}),!y&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(Xn=bt.status,"booked"===Xn?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===Xn?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===bt.status&&!(te.edit&&te.person._id===bt._id)&&!bt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:be,style:{width:"300px"},onClick:function(e){return t=bt._id,pe(!0),void Vi.changeBackToBookingMade(t).then((function(e){pe(!1),st(!dt)})).catch((function(e){console.log(e),pe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===bt.status&&!(te.edit&&te.person._id===bt._id)&&!bt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:be,style:{width:"300px"},onClick:function(e){return function(e){Lt(!0),Q(e),zt(e.birthDate),sn(e.surname),an(e.forename),Yt(e.gender)}(bt)},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:bt.deleted||te.edit,children:Object(a.jsxs)(R.a,{disabled:Na,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:Ra,className:n.DownloadForm,children:[!bt.printStatus&&"Print LAB Label","printed"===bt.printStatus&&"Print LAB Label Again","printing"===bt.printStatus&&"Printing","preparing"===bt.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:bt.deleted||te.edit,children:Object(a.jsx)(R.a,{disabled:!bt.formData,startIcon:Object(a.jsx)(Ft.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=bt._id,rc.downloadGynaeRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:bt.deleted||te.edit||bt.formData,children:Object(a.jsxs)(R.a,{disabled:!bt.email||bt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=bt._id,pe(!0),f(!1),Vi.sendRegFormEmail(e).then((function(e){pe(!1),"OK"===e.data.status&&f(!0)})).catch((function(e){console.log(e),pe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",g&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)($t.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!An&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ","..."," "]}),An&&Rn&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Rn.invoiceNumber," "]}),An&&!Rn&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(te.edit&&te.person._id===bt._id)&&!bt.deleted&&Object(a.jsxs)(o.a.Fragment,{children:[An&&!Rn&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return ba()},children:"Issue Invoice"}),An&&Rn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Ft.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Rn._id,void Wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return ba()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!bt.email||bt.email.length<3,startIcon:Object(a.jsx)(un.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Rn._id,t=bt.email,pe(!0),Kn(!1),Wn.emailInvoice(e,t).then((function(e){pe(!1),"OK"===e.data.status&&Kn(!0)})).catch((function(e){console.log(e),pe(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Vn&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,children:[bt.paymentInfo?"ONLINE":"PHONE"," ","DEPOSIT"]})," ",Object(a.jsx)("span",{className:bt.deposit&&0!==bt.deposit?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(bt.deposit.toLocaleString("en-GB"))}),!(te.edit&&te.person._id===bt._id)&&!bt.paid&&bt.deleted&&bt.deposit>0&&bt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return W(!0)},children:"Refund Deposit"}),!(te.edit&&te.person._id===bt._id)&&!bt.paid&&bt.deleted&&bt.deposit>0&&!bt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(e){return Cn()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(te.edit&&te.person._id===bt._id)&&!bt.deleted&&!bt.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Zt.a,{color:"primary",checked:bt.deposit>0,onChange:Sn,name:"deposit"}),label:bt.deposit>0?Object(a.jsx)("span",{className:n.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:n.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})}),!(te.edit&&te.person._id===bt._id)&&bt.refund&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:n.checkIconSmall})," ","Refund Done","corporate"===bt.paidBy?' "'.concat(bt.corporate,'" '):""]})})]})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:bt.OTCCharges&&0!==bt.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(bt.OTCCharges.toLocaleString("en-GB"))}),!(te.edit&&te.person._id===bt._id)&&!bt.paid&&!bt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return bt._id,Q(bt),void I(!0)},children:"Pay"}),!(te.edit&&te.person._id===bt._id)&&bt.paid&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(Rt.a,{className:n.checkIconSmall})," ","Paid by ",bt.paidBy,"corporate"===bt.paidBy?' "'.concat(bt.corporate,'" '):""]}),Object(a.jsx)(Bt.a,{title:"Undo Payment",children:Object(a.jsx)(q.a,{onClick:function(){return wt(!0)},children:Object(a.jsx)(wn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:bt.OTCCharges&&0!==bt.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat((bt.deposit+bt.OTCCharges).toLocaleString("en-GB"))})]})}),Rn&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Rn.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Rn.items)]})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsx)("div",{style:{border:"1px dashed #285927",background:"#fafffa",padding:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{className:n.infoTitle,style:{color:"#2a422a"},children:"Ask for Review By EMAIL"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{children:bt.smsSent?Object(a.jsx)(Rt.a,{className:n.checkIcon}):Object(a.jsx)(It.a,{className:n.closeIcon})})}),Object(a.jsx)(K.a,{item:!0,xs:4,style:{paddingLeft:"20px"},children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Patient Source"}),Object(a.jsx)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Aa,onChange:function(e){Fa(e.target.value),Ya(La[e.target.value-1])},label:"Source",fullWidth:!0,children:[{value:1,text:"Medical Express Clinic"}].map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:"".concat(e.text)})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(R.a,{variant:"contained",disabled:Ea||(qn=bt.email,!(qn&&!(qn.length<7))),color:"primary",className:n.PayButton,onClick:za,children:"Send EMAIL"})})]})})}),na&&na.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)($t.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),na.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ca(e),void ua(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:be||ge||ve,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(jc,{booking:$,open:D,price:Rn?Rn.grandTotal-bt.deposit:null,handleClose:function(){I(!1),Q(null)}}),Object(a.jsx)(Yn,{booking:$,invoice:Rn,open:zn,handleClose:function(e){Hn(!1),Q(null),Jn()}}),Object(a.jsx)(Bo,{booking:ra,open:sa,onClose:function(){ua(!1),ca(null)}})]}),Object(a.jsxs)(qt.a,{open:St,onClose:jn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:jn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:yn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(qt.a,{open:Dt,onClose:mn,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Patient Data"}),Object(a.jsxs)(Qt.a,{style:{display:"flex",justifyContent:"space-between",minHeight:"50px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Full Name:"}),(null===$||void 0===$?void 0:$.fullname)||(null===$||void 0===$?void 0:$.surname)+" "+(null===$||void 0===$?void 0:$.forename)]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Birth Date:"}),null===$||void 0===$?void 0:$.birthDate]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Gender:"}),null===$||void 0===$?void 0:$.gender]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Email:"}),null===$||void 0===$?void 0:$.email]})]}),Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Find Patient"}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(oc,{data:$,select:On}),Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400",marginTop:"32px"},id:"alert-dialog-description",children:"Do you want to create a new patient ?"}),Object(a.jsx)(M.a,{fullWidth:!0,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Surname",variant:"outlined",value:dn,onChange:function(e){sn(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(L.a,{id:"outlined-basic",label:"Forename",variant:"outlined",value:tn,onChange:function(e){an(e.target.value)}})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Gender",placeholder:"Gender",value:Ut,onChange:function(e,t){Yt(t.props.value)},children:[Object(a.jsx)(Jt.a,{value:"male",children:"Male"}),Object(a.jsx)(Jt.a,{value:"female",children:"Female"})]})}),Object(a.jsx)(M.a,{fullWidth:!0,spacing:3,style:{marginBottom:"12px"},children:Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsx)(ea.a,{variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"Birth date",value:Mt,onChange:function(e,t){zt(t)}})})}),Object(a.jsx)(R.a,{onClick:On,color:"secondary",autoFocus:!0,children:"Save"})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(R.a,{onClick:mn,color:"default",children:"Back"})})]}),Object(a.jsxs)(qt.a,{open:F,onClose:bn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:bn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:vn,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var gc=["Visa Medical"],fc=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),mc=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Oc(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function yc(e){var t=fc(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Ki.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Ki.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(gc[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=Vi.getAllBookings;"today"===e.date?n=Vi.getTodayBookings:"old"===e.date?n=Vi.getOldBookings:"future"===e.date?n=Vi.getFutureBookings:"recent"===e.date?n=Vi.getRecentBookingsAll:"deleted"===e.date&&(n=Vi.getDeletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",mc(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(xc,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st(gc[0]),W(!1),b(!1)},PaperComponent:Oc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:gc.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(Ki.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:lc.a.calculatePrice(e)})]})}))]})})]})})]})]})}function vc(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function kc(e,t){return{time:e,amount:t}}var Cc=[kc("09:00",0),kc("10:00",0),kc("11:00",0),kc("12:00",0),kc("13:00",0),kc("14:00",0),kc("15:00",0),kc("16:00",0),kc("17:00",0),kc("18:00",void 0)],Sc=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Bc(){var e=Object(sa.a)(),t=o.a.useState(Cc),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Vi.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(kc("09:00",Sc(i,"09"))),n.push(kc("10:00",Sc(i,"10"))),n.push(kc("11:00",Sc(i,"11"))),n.push(kc("12:00",Sc(i,"12"))),n.push(kc("13:00",Sc(i,"13"))),n.push(kc("14:00",Sc(i,"14"))),n.push(kc("15:00",Sc(i,"15"))),n.push(kc("16:00",Sc(i,"16"))),n.push(kc("17:00",Sc(i,"17"))),n.push(kc("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(vc,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var wc=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Tc=function(e){if(1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())return null;var t,n=e.getMinutes(),a=e.getHours();if(function(e){return 4===e.getDay()}(e)&&a<13)return null;if(function(e){return 5===e.getDay()}(e)&&a>=13)return null;if(a<10||a>=18)return null;var i=n<30?"00":"30",o=a>=12?"PM":"AM";a>12&&(a-=12);var r="0".concat(a);return"".concat(r,":").concat(i," ").concat(o)},Nc=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Dc(){var e=wc(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=Tc(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),Vi.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(vc,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Nc(Tc(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(xc,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Rc=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Lc(){var e=Rc(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),Vi.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(vc,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Service"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:e.service}),Object(a.jsx)(Ta.a,{children:Object(Ki.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var Ic=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Pc(){var e=Ic(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Bc,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Dc,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Lc,{})})})]})})}var Ac=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Fc(){var e=Ac(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(Ki.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(Ki.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),Vi.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),Vi.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Vi.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Ki.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var Wc=function(e){return"boolean"===typeof e};function _c(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var Ec=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Mc(){var e=Ec(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!Wc(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){Vi.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Vi.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:_c,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Fc,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var zc=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Hc=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=zc(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Vi.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Gc=function e(){Object(ne.a)(this,e)};Gc.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var Uc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Yc=[1,2,3,4,5,6,7],Vc=[1,2,3,4,5,6],Kc=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Jc=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Kc(),c=Gc.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Uc.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Vc.map((function(e){return Object(a.jsx)("tr",{children:Yc.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Hc,{cellIndex:(e-1)*Yc.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Yc.length+o))})}))})}))})]})})},qc=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Xc=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=qc(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return Vi.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},$c=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Qc=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Zc=function(e){var t=e.dates,n=e.dayClicked,i=Qc();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:$c.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(Xc,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},el=n(125),tl=n.n(el),nl=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),al=[{packageName:"Consultation with Consultant Gynaecologist"},{packageName:"Coil Fitting/Coil Removal"},{packageName:"Well Woman Check"},{packageName:"Sexual Health Screening"},{packageName:"Pre-pregnancy/Fertility check"},{packageName:"Gynaecological Ultrasound"},{packageName:"HPV Vaccination"},{packageName:"Cervical / Pap Smear"},{packageName:"HPV Treatment / Wart Cryo-Therapy"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function il(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ol(e){var t=nl(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(""),H=Object(l.a)(E,2),G=H[0],Y=H[1],q=o.a.useState(!1),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=function(){u||(x(""),O(!1),S(""),P(""),_(""),Y(""),Q(!1),e.handleClose(),j(!1))},ee=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},te=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ee()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,Vi.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,service:W,notes:G,deposit:$?100:0,smsPush:!0});case 6:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Z(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:Z,PaperComponent:il,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",style:{position:"relative"},children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.GYNAE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GYNAE"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"480px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:W,onChange:function(e){_(e.target.value)},children:al.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:G,onChange:function(e){Y(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{otem:!0,xs:12,style:{marginTop:"15px"},children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{color:"primary",checked:$,onChange:function(e){Q(e.target.checked)},name:"deposit"}),label:$?Object(a.jsx)("span",{className:t.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:t.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Z,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:te,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var rl=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),cl=function(e){e.key;var t=e.date,n=e.time,r=rl(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,Vi.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:r.bookingBoxNew,onClick:G,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(xc,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(ol,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},ll=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],dl=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),sl=function(e){var t=e.date,n=dl();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:ll.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(cl,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},ul=["January","February","March","April","May","June","July","August","September","October","November","December"],jl=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function bl(){var e=jl(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ul[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Jc,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(Zc,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(sl,{date:f}):void 0)]})}var pl=function e(){Object(ne.a)(this,e)};pl.getFirstAvailableDate=function(){return Yi.get("/api/time/getfirstavaiabledate")},pl.getFullyBookedDates=function(){return Yi.get("/api/time/getfullybookeddays")},pl.getTimeSlots=function(e){return Yi.get("/api/time/gettimeslots?date=".concat(e))},pl.getAllOffDays=function(){return Yi.get("/api/medex/offdays?service=gynae")},pl.removeOneDay=function(e){return Yi.post("/api/medex/offdays/remove",{id:e})},pl.addOneDay=function(e){return Yi.post("/api/medex/offdays/add",{date:e,service:"gynae",offset:(new Date).getTimezoneOffset()})},pl.getWorkingHours=function(){return Yi.get("/api/medex/workinghours?service=gynae")},pl.removeWorkingHours=function(e){return Yi.post("/api/medex/workinghours/remove",{id:e})},pl.addWorkingHours=function(e){return Yi.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"gynae"}))};var hl=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),xl=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=hl(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},gl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fl=[1,2,3,4,5,6,7],ml=[1,2,3,4,5,6],Ol=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),yl=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Ol(),c=Gc.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:gl.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:ml.map((function(e){return Object(a.jsx)("tr",{children:fl.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(xl,{cellIndex:(e-1)*fl.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*fl.length+o))})}))})}))})]})})},vl=["January","February","March","April","May","June","July","August","September","October","November","December"],kl=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Cl(e){var t=e.dayClick,n=kl(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(vl[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(yl,{dayClicked:E,month:j,year:x})]})}var Sl=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Bl(e){var t,n=Sl();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(Ki.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pl.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,pl.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Gynae Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Cl,{dayClick:m})})})})]})]})}var wl=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Tl(e){var t=wl(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pl.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pl.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Gynae Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var Nl=["Visa Medical"],Dl=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Rl=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Ll(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Il(e){var t=Dl(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?!0===e.getValue("prepaid")?Object(a.jsx)(fn.a,{className:t.checkIcon,style:{color:"#f70a79"}}):"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ao.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?!0===n.getValue("prepaid")?Object(a.jsx)(fn.a,{className:t.checkIcon,style:{color:"#f70a79"}}):"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ao.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(Nl[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=no.getAllBookings;"today"===e.date?n=no.getTodayBookings:"old"===e.date?n=no.getOldBookings:"future"===e.date?n=no.getFutureBookings:"recent"===e.date?n=no.getRecentBookingsAll:"deleted"===e.date&&(n=no.getDeletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Rl(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Do,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st(Nl[0]),W(!1),b(!1)},PaperComponent:Ll,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:Nl.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(ao.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:to.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Pl(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Al(e,t){return{time:e,amount:t}}var Fl=[Al("09:00",0),Al("10:00",0),Al("11:00",0),Al("12:00",0),Al("13:00",0),Al("14:00",0),Al("15:00",0),Al("16:00",0),Al("17:00",0),Al("18:00",void 0)],Wl=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function _l(){var e=Object(sa.a)(),t=o.a.useState(Fl),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,no.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(Al("09:00",Wl(i,"09"))),n.push(Al("10:00",Wl(i,"10"))),n.push(Al("11:00",Wl(i,"11"))),n.push(Al("12:00",Wl(i,"12"))),n.push(Al("13:00",Wl(i,"13"))),n.push(Al("14:00",Wl(i,"14"))),n.push(Al("15:00",Wl(i,"15"))),n.push(Al("16:00",Wl(i,"16"))),n.push(Al("17:00",Wl(i,"17"))),n.push(Al("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Pl,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var El=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Ml=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var i=n<30?"00":"30",o=a>=12?"PM":"AM";a>12&&(a-=12);var r="0".concat(a);return"".concat(r,":").concat(i," ").concat(o)},zl=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Hl(){var e=El(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=Ml(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),no.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Pl,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:zl(Ml(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(Do,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Gl=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ul(){var e=Gl(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),no.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Pl,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(ao.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var Yl=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Vl(){var e=Yl(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(_l,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Hl,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Ul,{})})})]})})}var Kl=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Jl(){var e=Kl(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(ao.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(ao.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),no.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),no.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),no.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(ao.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var ql=function(e){return"boolean"===typeof e};function Xl(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var $l=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Ql(){var e=$l(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!ql(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){no.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),no.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Xl,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Jl,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Zl=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ed=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Zl(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,no.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},td=function e(){Object(ne.a)(this,e)};td.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var nd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ad=[1,2,3,4,5,6,7],id=[1,2,3,4,5,6],od=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),rd=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=od(),c=td.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:nd.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:id.map((function(e){return Object(a.jsx)("tr",{children:ad.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(ed,{cellIndex:(e-1)*ad.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*ad.length+o))})}))})}))})]})})},cd=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),ld=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=cd(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return no.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},dd=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],sd=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),ud=function(e){var t=e.dates,n=e.dayClicked,i=sd();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:dd.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(ld,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},jd=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function bd(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function pd(e){var t=jd(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=function(){u||(x(""),O(!1),S(""),P(""),_(""),e.handleClose(),j(!1))},M=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},z=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,no.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,notes:W,smsPush:!0});case 6:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),E(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:E,PaperComponent:bd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.GP_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GP"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"400px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:W,onChange:function(e){_(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:E,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var hd=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),xd=function(e){e.key;var t=e.date,n=e.time,r=hd(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,no.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsxs)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{position:"relative"},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:[e.prepaid&&Object(a.jsx)("div",{style:{position:"absolute",top:"0px",right:"0px",background:"#ff8400",width:"100%",height:"7px",color:"white",textAlign:"center",fontSize:"0.8em",fontWeight:"700"}}),"".concat(e.fullname).substring(0,15)]})})),Object(a.jsxs)("div",{className:r.bookingBoxNew,onClick:G,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(Do,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(pd,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},gd=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],fd=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),md=function(e){var t=e.date,n=fd();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:gd.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(xd,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Od=["January","February","March","April","May","June","July","August","September","October","November","December"],yd=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function vd(){var e=yd(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Od[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(rd,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(ud,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(md,{date:f}):void 0)]})}var kd=function e(){Object(ne.a)(this,e)};kd.getAllOffDays=function(){return Qi.get("/api/medex/offdays?service=gp")},kd.removeOneDay=function(e){return Qi.post("/api/medex/offdays/remove",{id:e})},kd.addOneDay=function(e){return Qi.post("/api/medex/offdays/add",{date:e,service:"gp",offset:(new Date).getTimezoneOffset()})},kd.getWorkingHours=function(){return Qi.get("/api/medex/workinghours?service=gp")},kd.removeWorkingHours=function(e){return Qi.post("/api/medex/workinghours/remove",{id:e})},kd.addWorkingHours=function(e){return Qi.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"gp"}))};var Cd=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Sd=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Cd(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},Bd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wd=[1,2,3,4,5,6,7],Td=[1,2,3,4,5,6],Nd=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Dd=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Nd(),c=td.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Bd.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Td.map((function(e){return Object(a.jsx)("tr",{children:wd.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Sd,{cellIndex:(e-1)*wd.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*wd.length+o))})}))})}))})]})})},Rd=["January","February","March","April","May","June","July","August","September","October","November","December"],Ld=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Id(e){var t=e.dayClick,n=Ld(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Rd[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Dd,{dayClicked:E,month:j,year:x})]})}var Pd=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Ad(e){var t,n=Pd();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(ao.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kd.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kd.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,kd.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"GP Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Id,{dayClick:m})})})})]})]})}var Fd=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Wd(e){var t=Fd(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kd.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kd.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"GP Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var _d=["Visa Medical"],Ed=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Md=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function zd(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Hd(e){var t=Ed(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Fo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Fo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(_d[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=Ao.getAllBookings;"today"===e.date?n=Ao.getTodayBookings:"old"===e.date?n=Ao.getOldBookings:"future"===e.date?n=Ao.getFutureBookings:"recent"===e.date?n=Ao.getRecentBookingsAll:"deleted"===e.date?n=Ao.getDeletedBookings:"live"===e.date?n=Ao.getLiveBookings:"completed"===e.date&&(n=Ao.getCompletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Md(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Uo,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st(_d[0]),W(!1),b(!1)},PaperComponent:zd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:_d.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(Fo.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:Po.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Gd(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Ud(e,t){return{time:e,amount:t}}var Yd=[Ud("09:00",0),Ud("10:00",0),Ud("11:00",0),Ud("12:00",0),Ud("13:00",0),Ud("14:00",0),Ud("15:00",0),Ud("16:00",0),Ud("17:00",0),Ud("18:00",void 0)],Vd=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Kd(){var e=Object(sa.a)(),t=o.a.useState(Yd),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Ao.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(Ud("09:00",Vd(i,"09"))),n.push(Ud("10:00",Vd(i,"10"))),n.push(Ud("11:00",Vd(i,"11"))),n.push(Ud("12:00",Vd(i,"12"))),n.push(Ud("13:00",Vd(i,"13"))),n.push(Ud("14:00",Vd(i,"14"))),n.push(Ud("15:00",Vd(i,"15"))),n.push(Ud("16:00",Vd(i,"16"))),n.push(Ud("17:00",Vd(i,"17"))),n.push(Ud("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Gd,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Jd=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),qd=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var i,o=t<10?"0".concat(t):"".concat(t),r=n<10?"0".concat(n):"".concat(n),c=a?"PM":"AM",l="".concat(r,":").concat(o," ").concat(c);return 0===(i=e).getDay()||6===i.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},Xd=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var i=n<10?"0".concat(n):"".concat(n),o=t<10?"0".concat(t):"".concat(t),r=a?"PM":"AM",c="".concat(o,":").concat(i," ").concat(r);return"".concat(e," - ").concat(c)};function $d(){var e=Jd(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=qd(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),Ao.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Gd,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Xd(qd(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(Uo,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Qd=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Zd(){var e=Qd(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),Ao.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Gd,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(Fo.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var es=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function ts(){var e=es(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Kd,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)($d,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Zd,{})})})]})})}var ns=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function as(){var e=ns(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(Fo.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(Fo.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),Ao.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),Ao.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Ao.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Fo.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var is=function(e){return"boolean"===typeof e};function os(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var rs=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function cs(){var e=rs(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!is(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){Ao.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Ao.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:os,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(as,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var ls=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ds=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=ls(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ao.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ss=function e(){Object(ne.a)(this,e)};ss.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var us=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],js=[1,2,3,4,5,6,7],bs=[1,2,3,4,5,6],ps=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),hs=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=ps(),c=ss.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:us.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:bs.map((function(e){return Object(a.jsx)("tr",{children:js.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(ds,{cellIndex:(e-1)*js.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*js.length+o))})}))})}))})]})})},xs=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),gs=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=xs(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return Ao.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},fs=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ms=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Os=function(e){var t=e.dates,n=e.dayClicked,i=ms();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:fs.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(gs,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},ys=(Object(N.a)((function(e){return{loadingBox:{}}})),function(e){var t=e.title,n=e.value,r=e.dateChanged,c=e.error,d=o.a.useState(""),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(""),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState([]),v=Object(l.a)(y,2),k=v[0],C=v[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],T=B[1],N=o.a.useState([]),D=Object(l.a)(N,2),R=D[0],L=D[1],I=function(e,t,n){var a="".concat(e),i="".concat(t+1);1===a.length&&(a="0".concat(a)),1===i.length&&(i="0".concat(i)),r("".concat(n,"-").concat(i,"-").concat(a))};return Object(i.useEffect)((function(){if(n&&10===n.length){var e=parseInt(n.substr(8,2)),t=parseInt(n.substr(5,2)),a=parseInt(n.substr(0,4));j(e),x(t-1),O(a)}}),[n]),Object(i.useEffect)((function(){for(var e=[],t=[],n=[],a=1;a<=31;a++)e.push(a);for(a=0;a<12;a++)t.push(Rn()(new Date(2020,a,5),"mmmm"));for(a=1900;a<(new Date).getFullYear();a++)n.push(a);C(e),T(t),L(n)}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px solid ".concat(c?"red":"#ddd"),borderRadius:"10px",padding:"20px",paddingBottom:"50px",marginTop:"20px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-15px",left:"15px",backgroundColor:"#fff",color:"".concat(c?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:t}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Day"}),Object(a.jsx)(Kt.a,{labelId:"day-label",id:"day-select",value:u,onChange:function(e){j(e.target.value),I(e.target.value,h,m)},children:k.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"month-label",children:"Month"}),Object(a.jsx)(Kt.a,{labelId:"month-label",id:"month-select",value:h,onChange:function(e){x(e.target.value),I(u,e.target.value,m)},children:w.map((function(e,t){return Object(a.jsx)(Jt.a,{value:t,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Year"}),Object(a.jsx)(Kt.a,{labelId:"year-label",id:"year-select",value:m,onChange:function(e){O(e.target.value),I(u,h,e.target.value)},children:R.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:e})}))})]})})]})]})})}),vs=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),ks=[{packageName:"Sexual Health Clinic - Bronze"},{packageName:"Sexual Health Clinic - Silver"},{packageName:"Sexual Health Clinic - Gold"},{packageName:"Sexual Health Clinic - Platinium"},{packageName:"BLOOD SAMPLE AND URINE"},{packageName:"BLOOD SAMPLE AND URINE OR SWAB"},{packageName:"Indivisual Tests"},{packageName:"Combo STD Checks"}],Cs=["HIV TESTING","CHLAMYDIA TESTING","SYPHILIS BLOOD TESTING","HERPES TESTING","GONORRHOEA TESTING","HEPATITIS A PROFILE TESTING","HEPATITIS B PROFILE TESTING","HEPATITIS C ANTIBODIES TESTING","HPV TESTING","BACTERIAL SWAB TESTING"],Ss=["CHLAMYDIA, GONORRHOEA AND TRICHOMONAS","HIV I & II WITH SYPHILIS"];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Bs(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ws(e){var t=vs(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(!1),H=Object(l.a)(E,2),G=H[0],q=H[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState([]),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(!1),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(null),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=o.a.useState(!1),ye=Object(l.a)(Oe,2),ve=ye[0],ke=ye[1],Ce=function(){u||(x(""),O(!1),S(""),P(""),_(""),q(!1),Z(""),ae([]),ce([]),ue(null),me(null),e.handleClose(),j(!1))},Se=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),(!W||W.trim().length<1)&&(q(!0),e=!0),"Indivisual Tests"===W&&0===ne.length&&(q(!0),e=!0),"Combo STD Checks"===W&&0===re.length&&(q(!0),e=!0),se||(he(!0),e=!0),fe&&10===fe.length||(ke(!0),e=!0),!e},Be=function(){var t=Object(w.a)(B.a.mark((function t(){var n,a,i;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Se()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),n=W,"Indivisual Tests"===W?(a="",ne.forEach((function(e,t){a+=e,t<ne.length-1&&(a+=" - ")})),n="Indivisual Tests : ( ".concat(a," )")):"Combo STD Checks"===W&&(i="",re.forEach((function(e,t){i+=e,t<re.length-1&&(i+=" - ")})),n="Combo STD Checks : ( ".concat(i," )")),t.prev=5,t.next=8,Ao.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,packageName:n,notes:Q,gender:se,birthDate:fe});case 8:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ce(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),j(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:Ce,PaperComponent:Bs,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.STD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"STD"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"650px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(ys,{error:ve,title:"Date of Birth",value:fe,dateChanged:function(e){me(e),ke(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(Kt.a,{error:!!pe,required:!0,labelId:"gender-label",id:"gender-select",value:se,onChange:function(e){ue(e.target.value),he(!1)},children:[Object(a.jsx)(Jt.a,{value:"M",children:"Male"}),Object(a.jsx)(Jt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,required:!0,error:G,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:W,onChange:function(e){_(e.target.value),q(!1)},children:ks.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),"Indivisual Tests"===W&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Cs.map((function(e){return Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ne.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(q(!1),ne.findIndex((function(e){return e===t}))<0&&ae([].concat(Object(Ut.a)(ne),[t]))):ae(ne.filter((function(e){return e!==t}))),q(!1)}(t,e)},name:e}),label:e})}))}),"Combo STD Checks"===W&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Ss.map((function(e){return Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:re.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(q(!1),re.findIndex((function(e){return e===t}))<0&&ce([].concat(Object(Ut.a)(re),[t]))):ce(re.filter((function(e){return e!==t})))}(t,e)},name:e}),label:e})}))}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:Q,onChange:function(e){Z(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Ce,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Be,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var Ts=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Ns=function(e){e.key;var t=e.date,n=e.time,r=Ts(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,Ao.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:r.bookingBoxNew,onClick:G,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(Uo,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(ws,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},Ds=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Rs=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Ls=function(e){var t=e.date,n=Rs();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Ds.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Ns,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Is=["January","February","March","April","May","June","July","August","September","October","November","December"],Ps=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function As(){var e=Ps(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Is[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(hs,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(Os,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Ls,{date:f}):void 0)]})}var Fs=function e(){Object(ne.a)(this,e)};Fs.getAllOffDays=function(){return Ro.get("/api/medex/offdays?service=std")},Fs.removeOneDay=function(e){return Ro.post("/api/medex/offdays/remove",{id:e})},Fs.addOneDay=function(e){return Ro.post("/api/medex/offdays/add",{date:e,service:"std",offset:(new Date).getTimezoneOffset()})},Fs.getWorkingHours=function(){return Ro.get("/api/medex/workinghours?service=std")},Fs.removeWorkingHours=function(e){return Ro.post("/api/medex/workinghours/remove",{id:e})},Fs.addWorkingHours=function(e){return Ro.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"std"}))};var Ws=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),_s=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Ws(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},Es=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ms=[1,2,3,4,5,6,7],zs=[1,2,3,4,5,6],Hs=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Gs=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Hs(),c=ss.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Es.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:zs.map((function(e){return Object(a.jsx)("tr",{children:Ms.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(_s,{cellIndex:(e-1)*Ms.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Ms.length+o))})}))})}))})]})})},Us=["January","February","March","April","May","June","July","August","September","October","November","December"],Ys=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Vs(e){var t=e.dayClick,n=Ys(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Us[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Gs,{dayClicked:E,month:j,year:x})]})}var Ks=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Js(e){var t,n=Ks();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(Fo.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Fs.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,Fs.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"STD Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Vs,{dayClick:m})})})})]})]})}var qs=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Xs(e){var t=qs(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Fs.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fs.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"STD Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var $s=["Visa Medical"],Qs=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Zs=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function eu(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function tu(e){var t=Qs(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)($s[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=ho.getAllBookings;"today"===e.date?n=ho.getTodayBookings:"old"===e.date?n=ho.getOldBookings:"future"===e.date?n=ho.getFutureBookings:"recent"===e.date?n=ho.getRecentBookingsAll:"deleted"===e.date?n=ho.getDeletedBookings:"live"===e.date?n=ho.getLiveBookings:"completed"===e.date&&(n=ho.getCompletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Zs(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Qo,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st($s[0]),W(!1),b(!1)},PaperComponent:eu,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:$s.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(xo.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:po.a.calculatePrice(e)})]})}))]})})]})})]})]})}function nu(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function au(e,t){return{time:e,amount:t}}var iu=[au("09:00",0),au("10:00",0),au("11:00",0),au("12:00",0),au("13:00",0),au("14:00",0),au("15:00",0),au("16:00",0),au("17:00",0),au("18:00",void 0)],ou=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ru(){var e=Object(sa.a)(),t=o.a.useState(iu),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,ho.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(au("09:00",ou(i,"09"))),n.push(au("10:00",ou(i,"10"))),n.push(au("11:00",ou(i,"11"))),n.push(au("12:00",ou(i,"12"))),n.push(au("13:00",ou(i,"13"))),n.push(au("14:00",ou(i,"14"))),n.push(au("15:00",ou(i,"15"))),n.push(au("16:00",ou(i,"16"))),n.push(au("17:00",ou(i,"17"))),n.push(au("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(nu,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var cu=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),lu=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var i,o=t<10?"0".concat(t):"".concat(t),r=n<10?"0".concat(n):"".concat(n),c=a?"PM":"AM",l="".concat(r,":").concat(o," ").concat(c);return 0===(i=e).getDay()||6===i.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},du=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var i=n<10?"0".concat(n):"".concat(n),o=t<10?"0".concat(t):"".concat(t),r=a?"PM":"AM",c="".concat(o,":").concat(i," ").concat(r);return"".concat(e," - ").concat(c)};function su(){var e=cu(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=lu(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),ho.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(nu,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:du(lu(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(Qo,{booking:h,open:m,onClose:function(){O(!1)}})]})}var uu=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ju(){var e=uu(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),ho.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(nu,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(xo.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var bu=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function pu(){var e=bu(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(ru,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(su,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(ju,{})})})]})})}var hu=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function xu(){var e=hu(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(xo.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(xo.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),ho.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),ho.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),ho.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(xo.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var gu=function(e){return"boolean"===typeof e};function fu(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var mu=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Ou(){var e=mu(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!gu(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){ho.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),ho.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:fu,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(xu,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var yu=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),vu=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=yu(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,ho.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ku=function e(){Object(ne.a)(this,e)};ku.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var Cu=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Su=[1,2,3,4,5,6,7],Bu=[1,2,3,4,5,6],wu=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Tu=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=wu(),c=ku.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Cu.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Bu.map((function(e){return Object(a.jsx)("tr",{children:Su.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(vu,{cellIndex:(e-1)*Su.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Su.length+o))})}))})}))})]})})},Nu=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Du=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=Nu(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return ho.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Ru=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Lu=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Iu=function(e){var t=e.dates,n=e.dayClicked,i=Lu();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:Ru.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(Du,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Pu=n(1303),Au=n(475),Fu=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},listOptions:{backgroundColor:"#dcf0f5",color:"#034859",borderRadius:"30px",padding:"10px",fontWeight:"500",fontSize:"1rem"}}})),Wu=[{packageName:"-"},{packageName:"SLIVER BLOOD TEST"},{packageName:'SLIVER PLUS BLOOD TEST"'},{packageName:"GOLD BLOOD TEST"},{packageName:"PLATINIUM BLOOD TEST"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function _u(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Eu(e){var t=Fu(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(!1),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),W=Object(l.a)(A,2),_=W[0],E=W[1],H=o.a.useState(""),G=Object(l.a)(H,2),U=G[0],Y=G[1],q=o.a.useState(""),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=o.a.useState(!1),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState(""),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState([]),le=Object(l.a)(ce,2),de=(le[0],le[1]),se=o.a.useState([]),ue=Object(l.a)(se,2),je=(ue[0],ue[1]),be=o.a.useState(""),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1],ge=o.a.useState([]),fe=Object(l.a)(ge,2),me=fe[0],Oe=fe[1],ye=o.a.useState([]),ve=Object(l.a)(ye,2),ke=ve[0],Ce=ve[1],Se=o.a.useState(null),Be=Object(l.a)(Se,2),we=Be[0],Te=Be[1],Ne=o.a.useState(!1),De=Object(l.a)(Ne,2),Re=De[0],Le=De[1],Ie=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getAllCodes();case 3:t=e.sent,n=t.data.result,a=n.map((function(e){var t=e.code[0].toUpperCase();return Object(T.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),console.log(a),Oe(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){window.scrollTo(0,0),me&&0!==me.length||!e.open||Ie()}),[e.open]);var Pe=function(){u||(x(""),O(!1),E(""),Y(""),Q(""),ne(!1),re(""),de([]),je([]),Te(null),S(null),Ce([]),e.handleClose(),j(!1))},Ae=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),we&&10===we.length||(Le(!0),e=!0),k||(P(!0),e=!0),!e},Fe=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ae()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),n=$,t.prev=4,t.next=7,ho.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:_,email:U,packageName:n,birthDate:we,gender:k,indivisualTests:0===ke.length?null:JSON.stringify(ke),notes:oe,smsPush:!0});case 7:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Pe(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),j(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:Pe,PaperComponent:_u,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.BLOOD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Blood"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"620px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:_,onChange:function(e){E(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:U,onChange:function(e){Y(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(ys,{error:Re,title:"Date of Birth",value:we,dateChanged:function(e){Te(e),Le(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(Kt.a,{error:!!I,required:!0,labelId:"gender-label",id:"gender-select",value:k,onChange:function(e){S(e.target.value),P(!1)},children:[Object(a.jsx)(Jt.a,{value:"M",children:"Male"}),Object(a.jsx)(Jt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,error:te,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:$,onChange:function(e){Q(e.target.value),ne(!1)},children:Wu.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{style:{textAlign:"center",width:"100%",fontWeight:"400",color:"#777",marginTop:"20px"},children:Object(a.jsx)(_n.a,{multiple:!0,id:"tags-outlined",noOptionsText:he,value:ke,onChange:function(e,t){Ce(t),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{indivisualTests:t})}))},filterOptions:function(e,t){var n=t.inputValue;return n&&n.length>=3?(xe(""),Object(Au.a)(e,n,{keys:["code","description"]})):(xe("Please enter at least 3 characters"),Object(Au.a)(e,"$$$$",{keys:["code","description"]}))},options:me.sort((function(e,t){return-t.firstLetter.localeCompare(e.firstLetter)})),getOptionLabel:function(e){return Object(a.jsxs)("div",{className:t.listOptions,children:[e.code," - ",e.description," - ",parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})]})},renderTags:function(e,t){return e.map((function(e,n){return Object(a.jsx)(Pu.a,Object(T.a)(Object(T.a)({variant:"outlined",color:"primary",label:Object(a.jsx)(F.a,{style:{whiteSpace:"normal",fontSize:"0.9rem",fontWeight:"500",padding:"10px",width:"100%"},children:"".concat(e.code," - ").concat(e.description," - ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))})},t({index:n})),{},{style:{height:"100%",width:"100%"}}))}))},filterSelectedOptions:!0,renderInput:function(e){return Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({fullWidth:!0},e),{},{variant:"outlined",label:"Blood Tests",placeholder:"Enter blood test"}))}})})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginBottom:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:oe,onChange:function(e){re(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"}})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Pe,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Fe,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]})})})}var Mu,zu=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Hu=function(e){e.key;var t=e.date,n=e.time,r=zu(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,ho.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:r.bookingBoxNew,onClick:G,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(Qo,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(Eu,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},Gu=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Uu=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Yu=function(e){var t=e.date,n=Uu();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Gu.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Hu,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Vu=["January","February","March","April","May","June","July","August","September","October","November","December"],Ku=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Ju(){var e=Ku(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Vu[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Tu,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(Iu,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Yu,{date:f}):void 0)]})}var qu,Xu=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),$u=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Qu(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)($u,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Zu(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ej(){var e=Xu(),t=o.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Bt.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=m.bookings.find((function(t){return t._id===e}));c(t),j(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:250},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===G?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return qe(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],p=o.a.useContext(C),h=Object(l.a)(p,2),x=h[0],g=(h[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(null),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(""),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(null),W=Object(l.a)(F,2),E=W[0],M=W[1],z=o.a.useState("unresolved"),H=Object(l.a)(z,2),G=H[0],V=H[1],J=o.a.useState(!1),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=o.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState(null),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState(null),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState(null),je=Object(l.a)(ue,2),be=(je[0],je[1]),pe=o.a.useState(!1),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=o.a.useState(!1),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(!1),Te=Object(l.a)(we,2),De=Te[0],Re=Te[1],Le=o.a.useState(!1),Ie=Object(l.a)(Le,2),Pe=Ie[0],Ae=Ie[1],Fe=o.a.useState(""),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(10),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(i.useEffect)((function(){te&&Je(te)}),[x.bookingDialogDataChanged]);var Je=function(e){ho.getLinkDetails(e).then((function(e){re(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),ho.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},qe=function(e,t){E||(M(t),ho.archiveBloodReport(t).then((function(e){M(null),A(!P)})).catch((function(e){M(null)})))},Xe=function(e,t){E||(M(t),ho.unArchiveBloodReport(t).then((function(e){M(null),A(!P)})).catch((function(e){M(null)})))},$e=Object(i.useRef)();Object(i.useEffect)((function(){var e=ho.getNewUnmatchedBloodReports;"archived"===G&&(e=ho.getArchivedUnmatchedBloodReports),Ke(!0),O({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));$e.current=t,t.then((function(e){t===$e.current&&(Ke(!1),O({bookings:e,cachedBookings:Object(Ut.a)(e),isFetching:!1}))}),(function(e){t===$e.current&&(Ke(!1),console.log(e),O({bookings:m.bookings,cachedBookings:m.cachedBookings,isFetching:!1}))}))}),[P,G,x.bloodReportRefresh]),Object(i.useEffect)((function(){if(w&&w.trim().length>0){var e=m.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));O({bookings:e,cachedBookings:m.cachedBookings,isFetching:!1})}else O({bookings:Object(Ut.a)(m.cachedBookings),cachedBookings:m.cachedBookings,isFetching:!1})}),[w]);Object(i.useEffect)((function(){Ge((function(e){return e>=100?100:(t=_e,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[_e]);var Qe=function(e){uo.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(o.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#ff8000"},children:[" ",Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Unmatched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:e.refreshButton,onClick:function(e){N(""),A(!P)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Ka.a,{value:G,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&V(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Va.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(Va.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){N(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:m.bookings,columns:b,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&k(e.rows[0])}})}),Object(a.jsxs)(qt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),re(null),se(null),c(null),ve(!1),ge(!1),Ee(null),Be(!1),Re(!1),clearInterval(Mu),Ae(!1)}),100)},PaperComponent:Zu,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(qa.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!oe)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ya.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&oe&&de.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:oe.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.testDate)})]})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Select"}),Object(a.jsx)(Ta.a,{children:"Match"}),Object(a.jsx)(Ta.a,{children:"Forename"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Test Date"}),Object(a.jsx)(Ta.a,{})]})}),Object(a.jsx)(wa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:Object(a.jsx)(Bt.a,{title:e.birthDate!==oe.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:Oe||xe,onChange:function(t){return function(e,t){e.target.checked?c(t):c(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Ta.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Ta.a,{style:e.forenameCapital===oe.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Ta.a,{style:e.surnameCapital===oe.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Ta.a,{style:e.birthDate===oe.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==oe.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)($a.a,{})})}),Object(xo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Ta.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Ta.a,{style:Rn()(e.samplingTimeStamp,"yyyy-mm-dd")===oe.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(xo.FormatDateFromString)(Rn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Ta.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){be(t),j(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||xe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){ge(!0),ho.getBookingById(r._id).then((function(e){c(e.data)})),ho.matchRecords(r._id,te).then((function(e){"OK"===e.data.status&&(ge(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!De&&!Se&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),ho.resendEmails(te).then((function(e){Mu=setInterval((function(){ho.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),A(!P),clearInterval(Mu))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Ae(!0),ho.regenerateFiles(te).then((function(e){Mu=setInterval((function(){ho.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),A(!P),clearInterval(Mu))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||De)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Qu,{variant:"determinate",color:"primary",value:He})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Bo,{booking:r,open:u,onClose:function(){j(!1),c(!1)}})]})}var tj,nj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),aj=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function ij(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)(aj,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function oj(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function rj(){var e=nj(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=o.a.useState(null),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Bt.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),b(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return qe(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],h=o.a.useContext(C),x=Object(l.a)(h,2),g=x[0],f=(x[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=(k[0],k[1]),B=o.a.useState(""),w=Object(l.a)(B,2),N=w[0],D=w[1],I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(null),E=Object(l.a)(W,2),M=E[0],z=E[1],H=o.a.useState("unresolved"),G=Object(l.a)(H,2),V=G[0],J=G[1],X=o.a.useState(!1),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(null),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(null),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(null),be=Object(l.a)(je,2),pe=(be[0],be[1]),he=o.a.useState(!1),xe=Object(l.a)(he,2),ge=xe[0],fe=xe[1],me=o.a.useState(!1),Oe=Object(l.a)(me,2),ve=Oe[0],ke=Oe[1],Ce=o.a.useState(!1),Se=Object(l.a)(Ce,2),Be=Se[0],we=Se[1],Te=o.a.useState(!1),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=o.a.useState(!1),Ie=Object(l.a)(Le,2),Pe=Ie[0],Ae=Ie[1],Fe=o.a.useState(""),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(10),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(i.useEffect)((function(){ne&&Je(ne)}),[g.bookingDialogDataChanged]);var Je=function(e){ho.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),ho.findBestMatches(e).then((function(e){ue(e.data.matchedBookings)})).catch((function(e){console.log(e),ue([])}))},qe=function(e,t){M||(z(t),ho.archiveBloodReport(t).then((function(e){z(null),F(!A)})).catch((function(e){z(null)})))},Xe=function(e,t){M||(z(t),ho.unArchiveBloodReport(t).then((function(e){z(null),F(!A)})).catch((function(e){z(null)})))},$e=Object(i.useRef)();Object(i.useEffect)((function(){var e=ho.getNewMatchedBloodReports;"archived"===V&&(e=ho.getArchivedMatchedBloodReports),Ke(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));$e.current=t,t.then((function(e){t===$e.current&&(Ke(!1),y({bookings:e,cachedBookings:Object(Ut.a)(e),isFetching:!1}))}),(function(e){t===$e.current&&(Ke(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[A,V,g.bloodReportRefresh]),Object(i.useEffect)((function(){if(N&&N.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(N.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ut.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[N]);Object(i.useEffect)((function(){Ge((function(e){return e>=100?100:(t=_e,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[_e]);var Qe=function(e){uo.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(o.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(ot.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Matched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!A)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Ka.a,{value:V,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&J(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Va.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(Va.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:N,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(qt.a,{maxWidth:"lg",open:Q,onClose:function(){Z(!1),setTimeout((function(){ae(null),ce(null),ue(null),d(null),ke(!1),fe(!1),Ee(null),we(!1),Re(!1),clearInterval(qu),Ae(!1)}),100)},PaperComponent:oj,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(qa.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!se||!re)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ya.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),se&&0===se.length&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),se&&re&&se.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:re.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(re.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(re.testDate)})]})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Select"}),Object(a.jsx)(Ta.a,{children:"Match"}),Object(a.jsx)(Ta.a,{children:"Forename"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Test Date"}),Object(a.jsx)(Ta.a,{})]})}),Object(a.jsx)(wa.a,{children:se.map((function(e){var t;return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:Object(a.jsx)(Bt.a,{title:e.birthDate!==re.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:c&&c._id===e._id,disabled:ve||ge,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Ta.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Ta.a,{style:e.forenameCapital===re.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Ta.a,{style:e.surnameCapital===re.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Ta.a,{style:e.birthDate===re.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==re.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)($a.a,{})})}),Object(xo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Ta.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Ta.a,{style:Rn()(e.samplingTimeStamp,"yyyy-mm-dd")===re.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(xo.FormatDateFromString)(Rn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Ta.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Be,onClick:function(t){return function(e,t){pe(t),b(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ve&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!c||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),ho.getBookingById(c._id).then((function(e){d(e.data)})),ho.matchRecords(c._id,ne).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!c&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ve&&!De&&!Be&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",c.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){we(!0),Ge(0),Ee("downloadFailed"),ho.resendEmails(ne).then((function(e){qu=setInterval((function(){ho.getLinkDetails(ne).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(we(!1),Re(!0),F(!A),clearInterval(qu))}))}),1e3)})).catch((function(e){console.log(e),we(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){we(!0),Ge(0),Ee("downloadFailed"),Ae(!0),ho.regenerateFiles(ne).then((function(e){qu=setInterval((function(){ho.getLinkDetails(ne).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(we(!1),Re(!0),F(!A),clearInterval(qu))}))}),1e3)})).catch((function(e){console.log(e),we(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ve&&(Be||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Be&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ve&&(Be||De)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(ij,{variant:"determinate",color:"primary",value:He})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Be&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Bo,{booking:c,open:j,onClose:function(){b(!1),d(!1)}})]})}var cj,lj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),dj=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function sj(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)(dj,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function uj(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function jj(){var e=lj(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=o.a.useState(null),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Bt.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),b(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return qe(e,t.value)},className:e.archiveButton,children:"Restore"})]}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return qe(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=o.a.useContext(C),x=Object(l.a)(h,2),g=x[0],f=(x[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=(k[0],k[1]),B=o.a.useState(""),w=Object(l.a)(B,2),N=w[0],D=w[1],I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(null),E=Object(l.a)(W,2),M=E[0],z=E[1],H=o.a.useState("unresolved"),G=Object(l.a)(H,2),V=G[0],J=(G[1],o.a.useState(!1)),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=o.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState(null),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState(null),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState(null),je=Object(l.a)(ue,2),be=(je[0],je[1]),pe=o.a.useState(!1),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=o.a.useState(!1),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(!1),Te=Object(l.a)(we,2),Ne=Te[0],De=Te[1],Re=o.a.useState(!1),Le=Object(l.a)(Re,2),Ie=Le[0],Pe=Le[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(10),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ue=o.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(i.useEffect)((function(){te&&Je(te)}),[g.bookingDialogDataChanged]);var Je=function(e){ho.getLinkDetails(e).then((function(e){re(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),ho.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},qe=function(e,t){M||(z(t),ho.unArchiveBloodReport(t).then((function(e){z(null),F(!A)})).catch((function(e){z(null)})))},Xe=Object(i.useRef)();Object(i.useEffect)((function(){var e=ho.getArchivedBloodReports;Ke(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Xe.current=t,t.then((function(e){t===Xe.current&&(Ke(!1),y({bookings:e,cachedBookings:Object(Ut.a)(e),isFetching:!1}))}),(function(e){t===Xe.current&&(Ke(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[A,V,g.bloodReportRefresh]),Object(i.useEffect)((function(){if(N&&N.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(N.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ut.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[N]);Object(i.useEffect)((function(){He((function(e){return e>=100?100:(t=We,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[We]);var $e=function(e){uo.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(o.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#777"},children:[" ",Object(a.jsx)(Ge.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Archived Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!A)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:N,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(qt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),re(null),se(null),d(null),ve(!1),ge(!1),_e(null),Be(!1),De(!1),clearInterval(tj),Pe(!1)}),100)},PaperComponent:uj,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(qa.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!oe)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ya.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&oe&&de.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:oe.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.testDate)})]})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Select"}),Object(a.jsx)(Ta.a,{children:"Match"}),Object(a.jsx)(Ta.a,{children:"Forename"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Test Date"}),Object(a.jsx)(Ta.a,{})]})}),Object(a.jsx)(wa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:Object(a.jsx)(Bt.a,{title:e.birthDate!==oe.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:c&&c._id===e._id,disabled:Oe||xe,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Ta.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Ta.a,{style:e.forenameCapital===oe.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Ta.a,{style:e.surnameCapital===oe.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Ta.a,{style:e.birthDate===oe.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==oe.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)($a.a,{})})}),Object(xo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Ta.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Ta.a,{style:Rn()(e.samplingTimeStamp,"yyyy-mm-dd")===oe.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(xo.FormatDateFromString)(Rn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Ta.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){be(t),b(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!c||xe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){ge(!0),ho.getBookingById(c._id).then((function(e){d(e.data)})),ho.matchRecords(c._id,te).then((function(e){"OK"===e.data.status&&(ge(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!c&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!Ne&&!Se&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",c.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),_e("downloadFailed"),ho.resendEmails(te).then((function(e){tj=setInterval((function(){ho.getLinkDetails(te).then((function(e){_e(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!A),clearInterval(tj))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),_e("downloadFailed"),Pe(!0),ho.regenerateFiles(te).then((function(e){tj=setInterval((function(){ho.getLinkDetails(te).then((function(e){_e(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!A),clearInterval(tj))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||Ne)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!Ne&&"Sending ...",Ne&&!Ie&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent."]}),Ne&&Ie&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||Ne)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(sj,{variant:"determinate",color:"primary",value:ze})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!Ne&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Bo,{booking:c,open:j,onClose:function(){b(!1),d(!1)}})]})}var bj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),pj=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function hj(e){return Object(a.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(I.a,{width:"100%",mr:1,children:Object(a.jsx)(pj,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(I.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function xj(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function gj(){var e=bj(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=o.a.useState(null),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Bt.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ze.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),b(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Xe(t.value)},className:e.downloadPDFButton,children:"view pdf"})}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Je(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Xe(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=o.a.useContext(C),x=Object(l.a)(h,2),g=x[0],f=(x[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=(k[0],k[1]),B=o.a.useState(""),w=Object(l.a)(B,2),N=w[0],D=w[1],I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(null),E=Object(l.a)(W,2),M=E[0],z=E[1],H=o.a.useState("unresolved"),G=Object(l.a)(H,2),V=G[0],J=(G[1],o.a.useState(!1)),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=o.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=o.a.useState(null),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=o.a.useState(null),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=o.a.useState(null),je=Object(l.a)(ue,2),be=(je[0],je[1]),pe=o.a.useState(!1),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=o.a.useState(!1),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=o.a.useState(!1),Te=Object(l.a)(we,2),Ne=Te[0],De=Te[1],Re=o.a.useState(!1),Le=Object(l.a)(Re,2),Ie=Le[0],Pe=Le[1],Ae=o.a.useState(""),Fe=Object(l.a)(Ae,2),We=Fe[0],_e=Fe[1],Ee=o.a.useState(10),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=o.a.useState(!1),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1];Object(i.useEffect)((function(){te&&Ke(te)}),[g.bookingDialogDataChanged]);var Ke=function(e){ho.getLinkDetails(e).then((function(e){re(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),ho.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},Je=function(e,t){M||(z(t),ho.unArchiveBloodReport(t).then((function(e){z(null),F(!A)})).catch((function(e){z(null)})))},qe=Object(i.useRef)();Object(i.useEffect)((function(){var e=ho.getSentBloodReports;Ve(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));qe.current=t,t.then((function(e){t===qe.current&&(Ve(!1),y({bookings:e,cachedBookings:Object(Ut.a)(e),isFetching:!1}))}),(function(e){t===qe.current&&(Ve(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[A,V,g.bloodReportRefresh]),Object(i.useEffect)((function(){if(N&&N.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(N.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ut.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[N]);Object(i.useEffect)((function(){He((function(e){return e>=100?100:(t=We,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[We]);var Xe=function(e){uo.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(o.a.Fragment,{children:[Ye&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(Ze.a,{style:{fontSize:"1.8rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Sent Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!A)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:N,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(qt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),re(null),se(null),d(null),ve(!1),ge(!1),_e(null),Be(!1),De(!1),clearInterval(cj),Pe(!1)}),100)},PaperComponent:xj,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(qa.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!oe)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ya.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&oe&&de.length>0&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:oe.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(xo.FormatDateFromString)(oe.testDate)})]})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Select"}),Object(a.jsx)(Ta.a,{children:"Match"}),Object(a.jsx)(Ta.a,{children:"Forename"}),Object(a.jsx)(Ta.a,{children:"Surname"}),Object(a.jsx)(Ta.a,{children:"D.O.B"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Test Date"}),Object(a.jsx)(Ta.a,{})]})}),Object(a.jsx)(wa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:Object(a.jsx)(Bt.a,{title:e.birthDate!==oe.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:c&&c._id===e._id,disabled:Oe||xe,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Ta.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Ta.a,{style:e.forenameCapital===oe.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Ta.a,{style:e.surnameCapital===oe.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Ta.a,{style:e.birthDate===oe.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==oe.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)($a.a,{})})}),Object(xo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Ta.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Ta.a,{style:Rn()(e.samplingTimeStamp,"yyyy-mm-dd")===oe.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(xo.FormatDateFromString)(Rn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Ta.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){be(t),b(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!c||xe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){ge(!0),ho.getBookingById(c._id).then((function(e){d(e.data)})),ho.matchRecords(c._id,te).then((function(e){"OK"===e.data.status&&(ge(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!c&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!Ne&&!Se&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",c.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),_e("downloadFailed"),ho.resendEmails(te).then((function(e){cj=setInterval((function(){ho.getLinkDetails(te).then((function(e){_e(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!A),clearInterval(cj))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||Ne,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),_e("downloadFailed"),Pe(!0),ho.regenerateFiles(te).then((function(e){cj=setInterval((function(){ho.getLinkDetails(te).then((function(e){_e(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!A),clearInterval(cj))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||Ne)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!Ne&&"Sending ...",Ne&&!Ie&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent."]}),Ne&&Ie&&Object(a.jsxs)(_.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||Ne)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(hj,{variant:"determinate",color:"primary",value:ze})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!Ne&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Bo,{booking:c,open:j,onClose:function(){b(!1),d(!1)}})]})}var fj=function e(){Object(ne.a)(this,e)};fj.getAllOffDays=function(){return so.get("/api/medex/offdays?service=blood")},fj.removeOneDay=function(e){return so.post("/api/medex/offdays/remove",{id:e})},fj.addOneDay=function(e){return so.post("/api/medex/offdays/add",{date:e,service:"blood",offset:(new Date).getTimezoneOffset()})},fj.getWorkingHours=function(){return so.get("/api/medex/workinghours?service=blood")},fj.removeWorkingHours=function(e){return so.post("/api/medex/workinghours/remove",{id:e})},fj.addWorkingHours=function(e){return so.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"blood"}))};var mj=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Oj=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=mj(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},yj=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],vj=[1,2,3,4,5,6,7],kj=[1,2,3,4,5,6],Cj=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Sj=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Cj(),c=ku.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:yj.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:kj.map((function(e){return Object(a.jsx)("tr",{children:vj.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Oj,{cellIndex:(e-1)*vj.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*vj.length+o))})}))})}))})]})})},Bj=["January","February","March","April","May","June","July","August","September","October","November","December"],wj=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Tj(e){var t=e.dayClick,n=wj(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Bj[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Sj,{dayClicked:E,month:j,year:x})]})}var Nj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Dj(e){var t,n=Nj();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(xo.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fj.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fj.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,fj.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Blood Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Tj,{dayClick:m})})})})]})]})}var Rj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Lj(e){var t=Rj(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fj.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fj.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Blood Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var Ij=["Visa Medical"],Pj=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Aj=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Fj(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Wj(e){var t=Pj(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ir.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ir.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(Ij[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=ar.getAllBookings;"today"===e.date?n=ar.getTodayBookings:"old"===e.date?n=ar.getOldBookings:"future"===e.date?n=ar.getFutureBookings:"recent"===e.date?n=ar.getRecentBookingsAll:"deleted"===e.date&&(n=ar.getDeletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Aj(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(jr,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st(Ij[0]),W(!1),b(!1)},PaperComponent:Fj,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:Ij.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(ir.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:nr.a.calculatePrice(e)})]})}))]})})]})})]})]})}function _j(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Ej(e,t){return{time:e,amount:t}}var Mj=[Ej("09:00",0),Ej("10:00",0),Ej("11:00",0),Ej("12:00",0),Ej("13:00",0),Ej("14:00",0),Ej("15:00",0),Ej("16:00",0),Ej("17:00",0),Ej("18:00",void 0)],zj=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Hj(){var e=Object(sa.a)(),t=o.a.useState(Mj),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,ar.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(Ej("09:00",zj(i,"09"))),n.push(Ej("10:00",zj(i,"10"))),n.push(Ej("11:00",zj(i,"11"))),n.push(Ej("12:00",zj(i,"12"))),n.push(Ej("13:00",zj(i,"13"))),n.push(Ej("14:00",zj(i,"14"))),n.push(Ej("15:00",zj(i,"15"))),n.push(Ej("16:00",zj(i,"16"))),n.push(Ej("17:00",zj(i,"17"))),n.push(Ej("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(_j,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Gj=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Uj=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var i=n<30?"00":"30",o=a>=12?"PM":"AM";a>12&&(a-=12);var r="0".concat(a);return"".concat(r,":").concat(i," ").concat(o)},Yj=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Vj(){var e=Gj(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=Uj(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),ar.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(_j,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Yj(Uj(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(jr,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Kj=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Jj(){var e=Kj(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),ar.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(_j,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(ir.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var qj=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Xj(){var e=qj(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Hj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Vj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Jj,{})})})]})})}var $j=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Qj(){var e=$j(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(ir.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.package),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(ir.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),ar.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),ar.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),ar.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(ir.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.package}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var Zj=function(e){return"boolean"===typeof e};function eb(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var tb=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function nb(){var e=tb(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!Zj(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){ar.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),ar.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:eb,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Qj,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var ab=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ib=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=ab(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,ar.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ob=function e(){Object(ne.a)(this,e)};ob.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var rb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cb=[1,2,3,4,5,6,7],lb=[1,2,3,4,5,6],db=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),sb=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=db(),c=ob.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:rb.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:lb.map((function(e){return Object(a.jsx)("tr",{children:cb.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(ib,{cellIndex:(e-1)*cb.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*cb.length+o))})}))})}))})]})})},ub=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),jb=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=ub(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return ar.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},bb=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],pb=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),hb=function(e){var t=e.dates,n=e.dayClicked,i=pb();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:bb.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(jb,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},xb=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),gb=[{packageName:"PRIVATE CONSULTATION WITH CONSULTANT DERMATOLOGIST"},{packageName:"FREE CONSULTATION FOR AESTHETIC TREATMENTS AND BOTOX"},{packageName:"RADIOFREQUNCY"},{packageName:"LASER HAIR"},{packageName:"FILLERS"},{packageName:"MOLE MAPPING / REMOVAL"},{packageName:"DERMABRASION"},{packageName:"PEELS"},{packageName:"WART REMOVAL"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function fb(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function mb(e){var t=xb(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(""),H=Object(l.a)(E,2),G=H[0],U=H[1],Y=function(){u||(x(""),O(!1),S(""),P(""),_(""),U(""),e.handleClose(),j(!1))},q=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},X=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,ar.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,notes:W,package:G});case 6:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Y(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:Y,PaperComponent:fb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.DERMA_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Dermatology"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)("div",{style:{height:"450px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:G,onChange:function(e){U(e.target.value)},children:gb.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:W,onChange:function(e){_(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Y,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:X,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]})]})})})}var Ob=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),yb=function(e){e.key;var t=e.date,n=e.time,r=Ob(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,ar.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:r.bookingBoxNew,onClick:G,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(jr,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(mb,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},vb=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],kb=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Cb=function(e){var t=e.date,n=kb();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:vb.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(yb,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Sb=["January","February","March","April","May","June","July","August","September","October","November","December"],Bb=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function wb(){var e=Bb(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Sb[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(sb,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(hb,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Cb,{date:f}):void 0)]})}var Tb=function e(){Object(ne.a)(this,e)};Tb.getAllOffDays=function(){return Zo.get("/api/medex/offdays?service=derma")},Tb.removeOneDay=function(e){return Zo.post("/api/medex/offdays/remove",{id:e})},Tb.addOneDay=function(e){return Zo.post("/api/medex/offdays/add",{date:e,service:"derma",offset:(new Date).getTimezoneOffset()})},Tb.getWorkingHours=function(){return Zo.get("/api/medex/workinghours?service=derma")},Tb.removeWorkingHours=function(e){return Zo.post("/api/medex/workinghours/remove",{id:e})},Tb.addWorkingHours=function(e){return Zo.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"derma"}))};var Nb=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Db=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Nb(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},Rb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Lb=[1,2,3,4,5,6,7],Ib=[1,2,3,4,5,6],Pb=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Ab=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Pb(),c=ob.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Rb.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Ib.map((function(e){return Object(a.jsx)("tr",{children:Lb.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Db,{cellIndex:(e-1)*Lb.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Lb.length+o))})}))})}))})]})})},Fb=["January","February","March","April","May","June","July","August","September","October","November","December"],Wb=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function _b(e){var t=e.dayClick,n=Wb(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Fb[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Ab,{dayClicked:E,month:j,year:x})]})}var Eb=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Mb(e){var t,n=Eb();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(ir.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Tb.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tb.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,Tb.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Derma Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(_b,{dayClick:m})})})})]})]})}var zb=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Hb(e){var t=zb(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Tb.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tb.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Derma Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var Gb=["Visa Medical"],Ub=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Yb=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"pending"===e?"Pending Bookings":"tbc"===e?"Patients TBC":"All Bookings"};function Vb(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Kb(e){var t=Ub(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(fr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:"pending"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(fr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(fn.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"cash"===n.getValue("paidBy")?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(na.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"corporate"===n.getValue("paidBy")?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(fr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ve=Ue[0],Ke=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(null),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=o.a.useState(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(!1),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=Object(i.useState)(Gb[0]),st=Object(l.a)(lt,2),jt=st[0],bt=st[1],pt=o.a.useState(""),ht=Object(l.a)(pt,2),xt=ht[0],gt=ht[1],ft=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),mt=function(t){var n=gr.getAllBookings;"today"===e.date?n=gr.getTodayBookings:"old"===e.date?n=gr.getOldBookings:"future"===e.date?n=gr.getFutureBookings:"recent"===e.date?n=gr.getRecentBookingsAll:"deleted"===e.date?n=gr.getDeletedBookings:"pending"===e.date?n=gr.getPendingBookings:"tbc"===e.date?n=gr.getTBCFolderBookings:"live"===e.date?n=gr.getLiveBookings:"completed"===e.date&&(n=gr.getCompletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),mt(25)}),[e.date]),Object(i.useEffect)((function(){if(xt&&xt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(xt.toLowerCase())>=0}));Xe({bookings:Object(Ut.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ut.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[xt]),Object(i.useEffect)((function(){mt(c)}),[Ve.bookingDialogDataChanged]);var Ot,yt,vt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),ct(!0)},kt=o.a.useState(1),Ct=Object(l.a)(kt,2),St=Ct[0],wt=Ct[1];return Object(a.jsxs)(o.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(yt=e.date,"today"===yt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===yt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===yt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===yt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===yt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===yt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===yt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===yt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===yt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"pending"===yt?Object(a.jsx)(dt.a,{style:{fontSize:"2.2rem"}}):"tbc"===yt?Object(a.jsx)(Ye.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Yb(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),mt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:xt,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(Ot=e.date,"live"===Ot||"positive"===Ot||"late"===Ot||"today"===Ot),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),mt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:qe.bookings,columns:He,autoPageSize:!0,page:St,onPageChange:function(e){wt(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)(Ar,{booking:nt,open:rt,onClose:function(){at(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){bt(Gb[0]),W(!1),b(!1)},PaperComponent:Vb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:jt,onChange:function(e){bt(e.target.value)},children:Gb.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===jt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(fr.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:xr.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Jb(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function qb(e,t){return{time:e,amount:t}}var Xb=[qb("09:00",0),qb("10:00",0),qb("11:00",0),qb("12:00",0),qb("13:00",0),qb("14:00",0),qb("15:00",0),qb("16:00",0),qb("17:00",0),qb("18:00",void 0)],$b=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Qb(){var e=Object(sa.a)(),t=o.a.useState(Xb),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,gr.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(qb("09:00",$b(i,"09"))),n.push(qb("10:00",$b(i,"10"))),n.push(qb("11:00",$b(i,"11"))),n.push(qb("12:00",$b(i,"12"))),n.push(qb("13:00",$b(i,"13"))),n.push(qb("14:00",$b(i,"14"))),n.push(qb("15:00",$b(i,"15"))),n.push(qb("16:00",$b(i,"16"))),n.push(qb("17:00",$b(i,"17"))),n.push(qb("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Jb,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Zb=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ep=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var i=n<30?"00":"30",o=a>=12?"PM":"AM";a>12&&(a-=12);var r="0".concat(a);return"".concat(r,":").concat(i," ").concat(o)},tp=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function np(){var e=Zb(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=ep(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),gr.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Jb,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:tp(ep(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(Ar,{booking:h,open:m,onClose:function(){O(!1)}})]})}var ap=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ip(){var e=ap(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),gr.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(Jb,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(fr.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var op=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function rp(){var e=op(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Qb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(np,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(ip,{})})})]})})}var cp=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function lp(){var e=cp(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(fr.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(fr.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),gr.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),gr.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),gr.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{style:{marginBottom:"10px",maxWidth:"400px"},children:[!t.confirmed&&Object(a.jsx)("div",{style:{color:"red",fontSize:"1.1rem",fontWeight:"500",border:"0px solid red",padding:"5px",borderRadius:"8px"},children:"NOT CONFIRMED!"}),t.confirmed&&Object(a.jsx)("div",{style:{color:"#258200",fontSize:"1.1rem",fontWeight:"500",border:"0px solid #258200",padding:"5px",borderRadius:"8px"},children:"CONFIRMED"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(fr.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var dp=function(e){return"boolean"===typeof e};function sp(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var up=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function jp(){var e=up(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!dp(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){gr.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),gr.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:sp,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(lp,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var bp=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),pp=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=bp(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,gr.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},hp=function e(){Object(ne.a)(this,e)};hp.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var xp=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gp=[1,2,3,4,5,6,7],fp=[1,2,3,4,5,6],mp=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Op=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=mp(),c=hp.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:xp.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:fp.map((function(e){return Object(a.jsx)("tr",{children:gp.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(pp,{cellIndex:(e-1)*gp.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*gp.length+o))})}))})}))})]})})},yp=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),vp=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=yp(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return gr.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},kp=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Cp=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Sp=function(e){var t=e.dates,n=e.dayClicked,i=Cp();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:kp.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(vp,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Bp=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),wp=[{packageName:"HEALTH SCREENING / MEDISCREEN BASIC MOT"},{packageName:"HEALTH SCREENING / HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / PLATINIUM HEALTH SCREEN MEN"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / HEALTH ADVANCED PLUS MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"ALLERGY SCREENING / ALLERGY BASICS MOT PACKAGE"},{packageName:"ALLERGY SCREENING / ALLERGY ADVANCED MOT PACKAGE"},{packageName:"OCCUPATIONAL HEALTH / PRE EMPLOYMENT"},{packageName:"TRAVEL HEALTH & VACCINATION"},{packageName:"VISA MEDICAL"},{packageName:"CANCER SCREEENING"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Tp(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Np(e){var t=Bp(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(""),H=Object(l.a)(E,2),G=H[0],U=H[1],Y=o.a.useState(!1),q=Object(l.a)(Y,2),X=q[0],$=q[1],Q=o.a.useState(null),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(!1),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=o.a.useState(""),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState(!1),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=function(){u||(x(""),O(!1),S(""),P(""),_(""),U(""),te(null),$(!1),de(null),e.handleClose(),j(!1))},he=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),ee&&10===ee.length||(oe(!0),e=!0),G||$(!0),le||(be(!0),e=!0),!e},xe=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(he()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,gr.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,notes:W,service:G,birthDate:ee,gender:le,smsPush:!0});case 6:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),pe(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:pe,PaperComponent:Tp,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.SCREENING_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Screening"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:1,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(Kt.a,{error:!!je,required:!0,labelId:"gender-label",id:"gender-select",value:le,onChange:function(e){de(e.target.value),be(!1)},children:[Object(a.jsx)(Jt.a,{value:"M",children:"Male"}),Object(a.jsx)(Jt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:G,onChange:function(e){U(e.target.value),$(!1)},error:X,children:wp.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(ys,{error:ie,title:"Date of Birth",value:ee,dateChanged:function(e){te(e),oe(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:W,onChange:function(e){_(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:pe,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:xe,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]})})})}var Dp=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPending:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ddd",color:"#777",boxShadow:"2px 4px #fafafa","&:hover":{background:"#eee",color:"#333"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Rp=function(e){e.key;var t=e.date,n=e.time,r=Dp(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,gr.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){var t=e.status;if(!e.confirmed)return r.bookingBoxPending;switch(t){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:r.bookingBoxNew,onClick:G,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(Ar,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(Np,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},Lp=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Ip=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Pp=function(e){var t=e.date,n=Ip();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Lp.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Rp,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Ap=["January","February","March","April","May","June","July","August","September","October","November","December"],Fp=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Wp(){var e=Fp(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Ap[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Op,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(Sp,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Pp,{date:f}):void 0)]})}var _p=function e(){Object(ne.a)(this,e)};_p.getAllOffDays=function(){return br.get("/api/medex/offdays?service=screening")},_p.removeOneDay=function(e){return br.post("/api/medex/offdays/remove",{id:e})},_p.addOneDay=function(e){return br.post("/api/medex/offdays/add",{date:e,service:"screening",offset:(new Date).getTimezoneOffset()})},_p.getWorkingHours=function(){return br.get("/api/medex/workinghours?service=screening")},_p.removeWorkingHours=function(e){return br.post("/api/medex/workinghours/remove",{id:e})},_p.addWorkingHours=function(e){return br.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"screening"}))};var Ep=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Mp=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Ep(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},zp=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Hp=[1,2,3,4,5,6,7],Gp=[1,2,3,4,5,6],Up=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Yp=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Up(),c=hp.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:zp.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Gp.map((function(e){return Object(a.jsx)("tr",{children:Hp.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Mp,{cellIndex:(e-1)*Hp.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Hp.length+o))})}))})}))})]})})},Vp=["January","February","March","April","May","June","July","August","September","October","November","December"],Kp=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Jp(e){var t=e.dayClick,n=Kp(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Vp[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Yp,{dayClicked:E,month:j,year:x})]})}var qp=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Xp(e){var t,n=qp();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(fr.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_p.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_p.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,_p.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Screening Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Jp,{dayClick:m})})})})]})]})}var $p=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function Qp(e){var t=$p(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_p.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_p.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Screening Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}var Zp=["Visa Medical"],eh=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),th=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function nh(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function ah(e){var t=eh(),n=o.a.useState(25),r=Object(l.a)(n,2),c=r[0],d=r[1],s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),H=E[0],G=E[1],V=Object(i.useState)(!0),J=Object(l.a)(V,2),X=J[0],$=J[1],Q=Object(i.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),pe=je[0],xe=je[1],fe=Object(i.useState)(!0),Oe=Object(l.a)(fe,2),ve=Oe[0],Ce=Oe[1],Be=Object(i.useState)(!0),Te=Object(l.a)(Be,2),Ne=Te[0],De=Te[1],Le=Object(i.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],We=Pe[1],_e=Object(i.useState)(!0),Ee=Object(l.a)(_e,2),Me=Ee[0],ze=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(zr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:200},{field:"service",headerName:"Package",width:200},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ot(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(zr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:200},{field:"service",headerName:"Package",width:200},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=o.a.useContext(C),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=(Ue[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),Je=Ke[0],qe=Ke[1],Xe=o.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=o.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=o.a.useState(!1),it=Object(l.a)(at,2),ot=it[0],rt=it[1],ct=Object(i.useState)(Zp[0]),lt=Object(l.a)(ct,2),dt=lt[0],st=lt[1],jt=o.a.useState(""),bt=Object(l.a)(jt,2),pt=bt[0],ht=bt[1],xt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),gt=function(t){var n=Mr.getAllBookings;"today"===e.date?n=Mr.getTodayBookings:"old"===e.date?n=Mr.getOldBookings:"future"===e.date?n=Mr.getFutureBookings:"recent"===e.date?n=Mr.getRecentBookingsAll:"deleted"===e.date&&(n=Mr.getDeletedBookings),qe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});qe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){d(25),gt(25)}),[e.date]),Object(i.useEffect)((function(){if(pt&&pt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));qe({bookings:Object(Ut.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else qe({bookings:Object(Ut.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[pt]),Object(i.useEffect)((function(){gt(c)}),[Ye.bookingDialogDataChanged]);var ft,mt,Ot=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},yt=o.a.useState(1),vt=Object(l.a)(yt,2),kt=vt[0],Ct=vt[1];return Object(a.jsxs)(o.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",th(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),gt(c)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(ft=e.date,"live"===ft||"positive"===ft||"late"===ft||"today"===ft),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),gt(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:kt,onPageChange:function(e){Ct(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(qr,{booking:tt,open:ot,onClose:function(){nt(null),rt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){st(Zp[0]),W(!1),b(!1)},PaperComponent:nh,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){st(e.target.value)},children:Zp.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(zr.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:Er.a.calculatePrice(e)})]})}))]})})]})})]})]})}function ih(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function oh(e,t){return{time:e,amount:t}}var rh=[oh("09:00",0),oh("10:00",0),oh("11:00",0),oh("12:00",0),oh("13:00",0),oh("14:00",0),oh("15:00",0),oh("16:00",0),oh("17:00",0),oh("18:00",void 0)],ch=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function lh(){var e=Object(sa.a)(),t=o.a.useState(rh),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1];return Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Rn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Mr.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),i=a.data.result,n.push(oh("09:00",ch(i,"09"))),n.push(oh("10:00",ch(i,"10"))),n.push(oh("11:00",ch(i,"11"))),n.push(oh("12:00",ch(i,"12"))),n.push(oh("13:00",ch(i,"13"))),n.push(oh("14:00",ch(i,"14"))),n.push(oh("15:00",ch(i,"15"))),n.push(oh("16:00",ch(i,"16"))),n.push(oh("17:00",ch(i,"17"))),n.push(oh("18:00",void 0)),c(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(o.a.Fragment,{children:[u&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ih,{children:"Today"}),Object(a.jsx)(ua.a,{children:Object(a.jsxs)(ja.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ba.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(pa.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ha.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(xa.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var dh=Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),sh=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var i,o=t<10?"0".concat(t):"".concat(t),r=n<10?"0".concat(n):"".concat(n),c=a?"PM":"AM",l="".concat(r,":").concat(o," ").concat(c);return 0===(i=e).getDay()||6===i.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},uh=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var i=n<10?"0".concat(n):"".concat(n),o=t<10?"0".concat(t):"".concat(t),r=a?"PM":"AM",c="".concat(o,":").concat(i," ").concat(r);return"".concat(e," - ").concat(c)};function jh(){var e=dh(),t=o.a.useState(new Date),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState([]),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],C=v[1];Object(i.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(i.useEffect)((function(){var e=sh(r);if(e){var t=Dn(r,"yyyy-mm-dd");C(!0),Mr.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ut.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[r]);var S=function(e,t){x(t),O(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ih,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:uh(sh(r))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",Dn(r,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(u),Object(a.jsx)(qr,{booking:h,open:m,onClose:function(){O(!1)}})]})}var bh=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ph(){var e=bh(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){u({bookings:s.bookings,isFetching:!0}),m(!0),Mr.getRecentBookings().then((function(e){m(!1),u({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),u({bookings:s.bookings,isFetching:!1})}))};Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(ih,{children:"Recent Bookings"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"TimeStamp"}),Object(a.jsx)(Ta.a,{children:"Fullname"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Booked Date"}),Object(a.jsx)(Ta.a,{children:"Booked Time"})]})}),Object(a.jsx)(wa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:y(e.timeStamp)}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:Object(zr.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Ta.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:dm("gynae","recentBookings")})}))},children:"See more records"})})]})}var hh=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function xh(){var e=hh(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(lh,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(jh,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(ph,{})})})]})})}var gh=Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function fh(){var e=gh(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=n[0],r=n[1],c=o.a.useState("panel0"),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState({edit:!1,person:null}),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState({delete:!1,person:null}),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!1),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState({}),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(""),V=Object(l.a)(Y,2),J=V[0],q=V[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=function(e){q(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!1}))},ve=function(e){ae(e.target.value)},ke=function(e){ce(e.target.value)},Ce=function(e){ue(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},we=function(e,t){if(e)ae(t.fullname),q(Object(zr.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),ce(t.email),ue(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=re,n.phone=se,n.fullname=ne,n.notes=fe,n.service=pe,n.bookingDate=Object(zr.RevertFormatDateFromString)(J),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&Ne({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(T.a)(Object(T.a)({},G),{},{bookingTimeError:!0}))),!t},Ne=function(e){N(!0),Mr.updateBooking(e).then((function(e){N(!1),h({edit:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){N(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,A(!0),Mr.deleteBooking(n).then((function(e){A(!1),m({delete:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){A(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?k({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Mr.unDeleteBooking(n).then((function(e){M(!1),k({restore:!1,person:null}),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),k({restore:!1,person:null}),console.log(e)}))):k({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(yt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(o="panel".concat(n),function(e,t){u(!!t&&o)}),children:[Object(a.jsxs)(kt.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(St.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Bt.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(vt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||v.restore&&v.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(v.restore&&v.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||f.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){we(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:w,onClick:function(){we(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:w,onClick:function(){we(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||f.delete&&f.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(f.delete&&f.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(zr.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingDateError,className:e.TextBox,value:J,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:G.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:re,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PATIENT'S NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:fe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(i=t.status,"booked"===i?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===i?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var i,o}))]})})}var mh=function(e){return"boolean"===typeof e};function Oh(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var yh=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function vh(){var e=yh(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!mh(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){Mr.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Mr.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Oh,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(fh,{})})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var kh=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Ch=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=kh(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(-1),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Mr.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count>=0&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,n,r),(W=S,-1===W?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):W>0?W>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabelBusy,children:W<10?" ".concat(W):"".concat(W)}):Object(a.jsx)("div",{onClick:function(e){return c(e,O)},className:d.BookingCountLabel,children:W<10?" ".concat(W):"".concat(W)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Sh=function e(){Object(ne.a)(this,e)};Sh.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var Bh=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wh=[1,2,3,4,5,6,7],Th=[1,2,3,4,5,6],Nh=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Dh=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Nh(),c=Sh.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Bh.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Th.map((function(e){return Object(a.jsx)("tr",{children:wh.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Ch,{cellIndex:(e-1)*wh.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*wh.length+o))})}))})}))})]})})},Rh=Object(N.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Lh=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=Rh(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(-1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(-1);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return Mr.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count>=0&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count>=0&&x(i.data.count)}}),[t,n]);var B;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return r(e,k)},className:c.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:c.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Ih=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Ph=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Ah=function(e){var t=e.dates,n=e.dayClicked,i=Ph();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:Ih.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(Lh,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Fh=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Wh=[{packageName:"BLOODS ONLY"},{packageName:"HEALTH SURVEILLANCE"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function _h(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Eh(e){var t=Fh(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1]),d=Object(i.useState)(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(""),v=Object(l.a)(y,2),k=v[0],S=v[1],N=o.a.useState(""),D=Object(l.a)(N,2),I=D[0],P=D[1],A=o.a.useState(""),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(""),H=Object(l.a)(E,2),G=H[0],U=H[1],Y=o.a.useState(!1),q=Object(l.a)(Y,2),X=q[0],$=q[1],Q=o.a.useState(null),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(!1),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=function(){u||(x(""),O(!1),S(""),P(""),_(""),U(""),te(null),$(!1),e.handleClose(),j(!1))},ce=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),ee&&10!==ee.length&&(oe(!0),e=!0),G||$(!0),!e},le=function(){var t=Object(w.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ce()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,Mr.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:k,email:I,notes:W,service:G,birthDate:ee});case 6:j(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),re(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:re,PaperComponent:_h,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Fn.CORPORATE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Corporate"}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"400px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:1,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){x(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:k,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:I,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Kt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:G,onChange:function(e){U(e.target.value),$(!1)},error:X,children:Wh.map((function(e){return Object(a.jsx)(Jt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(ys,{error:ie,title:"Date of Birth",value:ee,dateChanged:function(e){te(e),oe(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:W,onChange:function(e){_(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:re,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:le,variant:"contained",color:"secondary",style:{width:"100px"},disabled:u,children:"Save"})})]})})]})})})}var Mh=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),zh=function(e){e.key;var t=e.date,n=e.time,r=Mh(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,Mr.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,H=function(e){switch(e){case"patient_attended":return r.bookingBoxSampleTaken;default:return r.bookingBox}},G=function(){M(!0)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(z=f,null===z?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:H(e.status),onClick:function(t){return function(e,t){k(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:r.bookingBoxNew,onClick:G,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(qr,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(Eh,{date:t,time:n,open:E,handleClose:function(){M(!1)}})]})},Hh=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Gh=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Uh=function(e){var t=e.date,n=Gh();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Hh.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(zh,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Yh=["January","February","March","April","May","June","July","August","September","October","November","December"],Vh=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Kh(){var e=Vh(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState((new Date).getMonth()+1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState((new Date).getFullYear()),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(new Date),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(new Date),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState([]),B=Object(l.a)(S,2),w=B[0],N=B[1],D=o.a.useState("month"),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState("month"),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=function(){U(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return k(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));N(e)}),[v]);var V,J=function(e,t){var n=new Date(t),a=n.getDay();k(new Date(n.getTime()-864e5*a)),m(n),u(n.getMonth()+1),h(n.getFullYear()),E("day"),A("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()-6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()-864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;u(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();k(new Date(n.getTime()-864e5*a))}else if("week"===P){var i=new Date(v.getTime()+6048e5);k(i),m(i),u(i.getMonth()+1),h(i.getFullYear())}else if("day"===P){var o=new Date(f.getTime()+864e5);m(o);var r=o.getDay();k(new Date(o.getTime()-864e5*r)),u(o.getMonth()+1),h(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();k(new Date(t.getTime()-864e5*n)),m(t),u(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Yh[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),i="";return i=n.getMonth()===v.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(v,"mmm d")," - ").concat(i,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(f,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:H,onChange:function(e){U(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:_,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===_?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Dh,{dayClicked:J,month:s,year:p}):"week"===V?Object(a.jsx)(Ah,{dayClicked:J,dates:w}):"day"===V?Object(a.jsx)(Uh,{date:f}):void 0)]})}var Jh=function e(){Object(ne.a)(this,e)};Jh.getAllOffDays=function(){return Fr.get("/api/medex/offdays?category=corporate")},Jh.removeOneDay=function(e){return Fr.post("/api/medex/offdays/remove",{id:e})},Jh.addOneDay=function(e){return Fr.post("/api/medex/offdays/add",{date:e,category:"corporate",offset:(new Date).getTimezoneOffset()})},Jh.getWorkingHours=function(){return Fr.get("/api/medex/workinghours?service=corporate")},Jh.removeWorkingHours=function(e){return Fr.post("/api/medex/workinghours/remove",{id:e})},Jh.addWorkingHours=function(e){return Fr.post("/api/medex/workinghours/add",Object(T.a)(Object(T.a)({},e),{},{service:"corporate"}))};var qh=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Xh=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=qh(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},$h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Qh=[1,2,3,4,5,6,7],Zh=[1,2,3,4,5,6],ex=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),tx=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=ex(),c=Sh.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:$h.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Zh.map((function(e){return Object(a.jsx)("tr",{children:Qh.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Xh,{cellIndex:(e-1)*Qh.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Qh.length+o))})}))})}))})]})})},nx=["January","February","March","April","May","June","July","August","September","October","November","December"],ax=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function ix(e){var t=e.dayClick,n=ax(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(nx[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(tx,{dayClicked:E,month:j,year:x})]})}var ox=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function rx(e){var t,n=ox();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object(zr.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Jh.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jh.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,Jh.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Corporate Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(ix,{dayClick:m})})})})]})]})}var cx=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)}}}));function lx(e){var t=cx(),n=o.a.useState({workingHours:{},isFetching:!0}),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState({startingHourMonday:"",endingHourMonday:"",periodMonday:"",startingHourTuesday:"",endingHourTuesday:"",periodTuesday:"",startingHourWednesday:"",endingHourWednesday:"",periodWednesday:"",startingHourThursday:"",endingHourThursday:"",periodThursday:"",startingHourFriday:"",endingHourFriday:"",periodFriday:"",startingHourSaturday:"",endingHourSaturday:"",periodSaturday:"",startingHourSunday:"",endingHourSunday:"",periodSunday:""}),u=Object(l.a)(s,2),j=u[0],b=u[1],p=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Jh.getWorkingHours,d({workingHours:{},isFetching:!0}),e.abrupt("return",t().then((function(e){d({workingHours:e.data.result,isFetching:!1}),b(Object(T.a)({},e.data.result))})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){p()}),[e.date]);for(var h=[],x=6;x<=24;x+=.25){var g="".concat(x<13?Math.floor(x).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}):Math.floor(x-12).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1}),":").concat(Math.floor(x%1*60).toLocaleString("en-UK",{minimumIntegerDigits:2,useGrouping:!1})," ").concat(x<12?"AM":"PM");h.push({value:x,label:g})}var f=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jh.addWorkingHours(j);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,m();case 11:return e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){return p()};return Object(a.jsxs)(o.a.Fragment,{children:[c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)($e.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Corporate Working Hours"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:m,children:Object(a.jsx)(tn.a,{})})})})]})})}),c.isFetching]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Monday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodMonday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodMonday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Tuesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodTuesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodTuesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Wednesday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodWednesday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodWednesday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Thursday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodThursday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodThursday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Friday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodFriday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodFriday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Saturday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSaturday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSaturday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsxs)(K.a,{style:{marginBottom:"40px"},children:[Object(a.jsx)(F.a,{variant:"h6",gutterBottom:!0,children:"Sunday:"}),Object(a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"starting-hour",children:"Starting Hour"}),Object(a.jsxs)(Kt.a,{labelId:"starting-hour",id:"starting-hour",label:"Starting hour",value:j.startingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{startingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"ending-hour",children:"Ending Hour"}),Object(a.jsxs)(Kt.a,{labelId:"ending-hour",id:"ending-hour",label:"ending hour",value:j.endingHourSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{endingHourSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),h.map((function(e){return Object(a.jsx)(Jt.a,{value:e.value,children:e.label})}))]})]}),Object(a.jsxs)(M.a,{variant:"filled",style:{minWidth:"200px"},children:[Object(a.jsx)(z.a,{id:"period",children:"Period"}),Object(a.jsxs)(Kt.a,{labelId:"period",id:"period",label:"period",value:j.periodSunday,onChange:function(e,t){return b((function(e){return Object(T.a)(Object(T.a)({},e),{},{periodSunday:t.props.value})}))},children:[Object(a.jsx)(Jt.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Jt.a,{value:.25,children:"15 min"}),Object(a.jsx)(Jt.a,{value:.5,children:"30 min"}),Object(a.jsx)(Jt.a,{value:.75,children:"45 min"}),Object(a.jsx)(Jt.a,{value:1,children:"60 min"}),Object(a.jsx)(Jt.a,{value:1.25,children:"75 min"}),Object(a.jsx)(Jt.a,{value:1.5,children:"90 min"}),Object(a.jsx)(Jt.a,{value:1.75,children:"105 min"}),Object(a.jsx)(Jt.a,{value:2,children:"120 min"})]})]})]})]}),Object(a.jsx)(K.a,{children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:f,children:"Save"})})]})}function dx(e){return Object(a.jsx)(F.a,{component:"h6",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}var sx=Object(N.a)((function(e){return{}}));function ux(){sx();var e=o.a.useState(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=o.a.useState(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,c,l,d,s,u,j,b,p,x,g;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=Dn(new Date,"yyyy-mm-dd"),e.prev=2,e.next=5,Ot.getAllBookingsCountByDateStr(t);case 5:return n=e.sent,e.next=8,Vi.getAllBookingsCountByDateStr(t);case 8:return a=e.sent,e.next=11,no.getAllBookingsCountByDateStr(t);case 11:return i=e.sent,e.next=14,Ao.getAllBookingsCountByDateStr(t);case 14:return o=e.sent,e.next=17,ho.getAllBookingsCountByDateStr(t);case 17:return c=e.sent,e.next=20,ar.getAllBookingsCountByDateStr(t);case 20:return l=e.sent,e.next=23,gr.getAllBookingsCountByDateStr(t);case 23:d=e.sent,s=parseInt(n.data.count),u=parseInt(a.data.count),j=parseInt(i.data.count),b=parseInt(o.data.count),p=parseInt(c.data.count),x=parseInt(l.data.count),g=parseInt(d.data.count),r([{clinic:"PCR",count:s},{clinic:"Gynae",count:u},{clinic:"GP",count:j},{clinic:"STD",count:b},{clinic:"Blood",count:p},{clinic:"Dermatology",count:x},{clinic:"Screening",count:g},{clinic:"Total",count:s+u+j+b+p+x+g}]),h(!1),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(2),console.error(e.t0),h(!1);case 40:case"end":return e.stop()}}),e,null,[[2,36]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){x()}),[s]),Object(i.useEffect)((function(){x();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(o.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(dx,{children:"Today Bookings"}),n&&Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Clinic"}),Object(a.jsx)(Ta.a,{children:"Count"})]})}),Object(a.jsx)(wa.a,{children:n.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:e.clinic}),Object(a.jsx)(Ta.a,{children:e.count})]},e._id)}))})]})]})}var jx=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function bx(){jx();var e=o.a.useState(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=o.a.useState(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,c,l,d,s,u,j,b,p,x,g,f,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=new Date,n=new Date(t.getTime()+864e5),a=Dn(n,"yyyy-mm-dd"),e.prev=4,e.next=7,Ot.getAllBookingsCountByDateStr(a);case 7:return i=e.sent,e.next=10,Vi.getAllBookingsCountByDateStr(a);case 10:return o=e.sent,e.next=13,no.getAllBookingsCountByDateStr(a);case 13:return c=e.sent,e.next=16,Ao.getAllBookingsCountByDateStr(a);case 16:return l=e.sent,e.next=19,ho.getAllBookingsCountByDateStr(a);case 19:return d=e.sent,e.next=22,ar.getAllBookingsCountByDateStr(a);case 22:return s=e.sent,e.next=25,gr.getAllBookingsCountByDateStr(a);case 25:u=e.sent,j=parseInt(i.data.count),b=parseInt(o.data.count),p=parseInt(c.data.count),x=parseInt(l.data.count),g=parseInt(d.data.count),f=parseInt(s.data.count),m=parseInt(u.data.count),r([{clinic:"PCR",count:j},{clinic:"Gynae",count:b},{clinic:"GP",count:p},{clinic:"STD",count:x},{clinic:"Blood",count:g},{clinic:"Dermatology",count:f},{clinic:"Screening",count:m},{clinic:"Total",count:j+b+p+x+g+f+m}]),h(!1),e.next=42;break;case 38:e.prev=38,e.t0=e.catch(4),console.error(e.t0),h(!1);case 42:case"end":return e.stop()}}),e,null,[[4,38]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){x()}),[s]),Object(i.useEffect)((function(){x();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(o.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(dx,{children:"Tomorrow Bookings"}),n&&Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Clinic"}),Object(a.jsx)(Ta.a,{children:"Count"})]})}),Object(a.jsx)(wa.a,{children:n.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:e.clinic}),Object(a.jsx)(Ta.a,{children:e.count})]},e._id)}))})]})]})}var px=Object(N.a)((function(e){return{}}));function hx(){px();var e=o.a.useState(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=o.a.useState(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,c,l,d,s,u,j,b,p,x;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,Ot.getAllBookingsCountAll();case 4:return t=e.sent,e.next=7,Vi.getAllBookingsCountAll();case 7:return n=e.sent,e.next=10,no.getAllBookingsCountAll();case 10:return a=e.sent,e.next=13,Ao.getAllBookingsCountAll();case 13:return i=e.sent,e.next=16,ho.getAllBookingsCountAll();case 16:return o=e.sent,e.next=19,ar.getAllBookingsCountAll();case 19:return c=e.sent,e.next=22,gr.getAllBookingsCountAll();case 22:l=e.sent,d=parseInt(t.data.count),s=parseInt(n.data.count),u=parseInt(a.data.count),j=parseInt(i.data.count),b=parseInt(o.data.count),p=parseInt(c.data.count),x=parseInt(l.data.count),r([{clinic:"PCR",count:d},{clinic:"Gynae",count:s},{clinic:"GP",count:u},{clinic:"STD",count:j},{clinic:"Blood",count:b},{clinic:"Dermatology",count:p},{clinic:"Screening",count:x},{clinic:"Total",count:d+s+u+j+b+p+x}]),h(!1),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),console.error(e.t0),h(!1);case 39:case"end":return e.stop()}}),e,null,[[1,35]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){x()}),[s]),Object(i.useEffect)((function(){x();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(o.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(dx,{children:"Total Bookings"}),n&&Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Clinic"}),Object(a.jsx)(Ta.a,{children:"Count"})]})}),Object(a.jsx)(wa.a,{children:n.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:e.clinic}),Object(a.jsx)(Ta.a,{children:e.count})]},e._id)}))})]})]})}Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));var xx=n(201),gx=n.n(xx);Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));var fx=Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function mx(){var e=fx(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1],o.a.useState(null)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,Vi.getShouldRefundsCount();case 4:t=e.sent,s(t.data.count),f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[b]),Object(i.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[g&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(dx,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(gx.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Fn.GYNAE_COLOR},children:"GYNAE"}),"  Waiting for Refunds"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Ox=function(){return sessionStorage.getItem("medexadmin-role")},yx=function(e){return sessionStorage.setItem("medexadmin-role",e)},vx=Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function kx(){var e=vx(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1],o.a.useState(null)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,ho.getNewBloodResultsCount();case 4:t=e.sent,s(t.data.result),f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[b]),Object(i.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[g&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(dx,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(gx.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Fn.BLOOD_COLOR},children:"BLOOD"})," New Results"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Cx=Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Sx(){var e=Cx(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1],o.a.useState(null)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,gr.getPendingBookings();case 4:t=e.sent,s(t.data.length),f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[b]),Object(i.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[g&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(dx,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(gx.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Fn.SCREENING_COLOR},children:"Health Screening"})," Pending Bookings"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Bx=Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function wx(){var e=Bx(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1],o.a.useState(null)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,gr.getShouldRefundsCount();case 4:t=e.sent,s(t.data.count),f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[b]),Object(i.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[g&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(dx,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(gx.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Fn.SCREENING_COLOR},children:"Health Screening"}),"  Waiting for Refunds"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Tx=Object(N.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{},LiveTitle:{fontSize:"1.3rem",fontWeight:"500",color:"#eee"},LiveItem:{fontSize:"2rem",color:"#fff",fontWeight:"700"}}}));function Nx(){var e=Tx(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1]),c=o.a.useState({screen:0,std:0,blood:0}),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1],O=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,Ao.getLiveBookings();case 4:return t=e.sent,e.next=7,ho.getLiveBookings();case 7:return n=e.sent,e.next=10,gr.getLiveBookings();case 10:a=e.sent,i=0,o=0,r=0,t&&(i=t.data.length),n&&(o=n.data.length),a&&(r=a.data.length),u({std:i,blood:o,screening:r}),m(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){O()}),[p]),Object(i.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=Object(te.d)();return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative",paddingBottom:"20px"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(dx,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{padding:"10px"},children:Object(a.jsx)(Se.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsx)("span",{className:0===s?e.Title:e.TitleRed,children:Object(a.jsx)("span",{style:{padding:"10px"},children:"Live Bookings"})})})]})}),Object(a.jsxs)(K.a,{container:!0,alignItems:"center",justify:"space-around",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="screening";yx(e),r((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),y.push(ce("/".concat(lm(e,dm(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Fn.SCREENING_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"Screening"}),Object(a.jsx)("p",{className:e.LiveItem,children:s.screening||0})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="blood";yx(e),r((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),y.push(ce("/".concat(lm(e,dm(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Fn.BLOOD_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"Blood"}),Object(a.jsx)("p",{className:e.LiveItem,children:s.blood||0})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="std";yx(e),r((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),y.push(ce("/".concat(lm(e,dm(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Fn.STD_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"STD"}),Object(a.jsx)("p",{className:e.LiveItem,children:s.std||0})]})})]})]})})}var Dx=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:400},fixedHeightSmall:{height:200,cursor:"pointer"}}}));function Rx(){var e=Dx(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1]),r=Object(Q.a)(e.paper,e.fixedHeight),c=Object(Q.a)(e.paper,e.fixedHeightSmall),d=Object(te.d)();return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{style:{background:"linear-gradient(0deg, rgba(230,249,255,1) 0%, rgba(255,255,255,1) 100%)"},children:Object(a.jsx)(Nx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(E.a,{className:c,onClick:function(){var e="gynae";yx(e),i((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(ce("/".concat(lm(e,dm(e,"deletedBookings")))))},children:Object(a.jsx)(mx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(E.a,{className:c,onClick:function(){var e="blood";yx(e),i((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(ce("/".concat(lm(e,dm(e,"dashboard")))))},children:Object(a.jsx)(kx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(E.a,{className:c,onClick:function(){var e="screening";yx(e),i((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(ce("/".concat(lm(e,dm(e,"pendingBookings")))))},children:Object(a.jsx)(Sx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(E.a,{className:c,onClick:function(){var e="screening";yx(e),i((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(ce("/".concat(lm(e,dm(e,"deletedBookings")))))},children:Object(a.jsx)(wx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:r,children:Object(a.jsx)(ux,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:r,children:Object(a.jsx)(bx,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:r,children:Object(a.jsx)(hx,{})})})]})})}var Lx=function(e){return"boolean"===typeof e};function Ix(e){var t=e.inputRef,n=Object(pt.a)(e,["inputRef"]);return Object(a.jsx)(xt.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var Px=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"},boxTitle:{fontWeight:"500",color:e.palette.secondary.main,borderColor:e.palette.secondary.main,border:"1px solid",fontSize:"1.2rem",backgroundColor:"#fff",width:"150px",padding:"5px",borderRadius:"30px",textAlign:"center",marginBottom:"10px",boxShadow:"4px 8px 8px #eee"}}}));function Ax(){var e=Px(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(l.a)(n,2),i=a[0],r=a[1];return[function(e){return r(!Lx(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}}]}(!0),u=Object(l.a)(d,2),j=u[0],b=u[1];Object(i.useEffect)((function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(i.useEffect)((function(){Xi.getBookingsByRef(r.ref).then((function(e){e.data.length>0&&c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[r.RefreshPersonInfo]);var p,h=function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},x=function(){!r.ref||r.ref.indexOf("_")>=0?c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Xi.getBookingsByRef(r.ref).then((function(e){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):c((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},b),{},{autoFocus:!0,pattern:"[0-9]*",error:!!r.refError,value:r.ref,className:e.TextField,width:"50px",onChange:function(e){c((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Ix,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&x()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:r.submiting,color:"default",onClick:h,onTouchTap:h,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:r.submiting,variant:"contained",color:"primary",onClick:x,onTouchTap:x,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[r.foundRecords&&r.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:e.PersonsBox,children:[(p=r.foundRecords[0].clinic,Object(a.jsx)("div",{className:e.boxTitle,children:p.toUpperCase()+" Clinic"})),function(e){switch(e){case"pcr":return Object(a.jsx)(_t,{});case"gp":return Object(a.jsx)(Jl,{});case"std":return Object(a.jsx)(as,{});case"gynae":return Object(a.jsx)(Fc,{});case"blood":return Object(a.jsx)(xu,{});case"derma":return Object(a.jsx)(Qj,{});case"screening":return Object(a.jsx)(lp,{});default:return null}}(r.foundRecords[0].clinic)]})}),!r.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Fx=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DERMA_COLOR,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"}}})),Wx=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function _x(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Ex(e){var t=Fx(),n=function(e){switch(e){case"pcr":return t.PCRLabel;case"gp":return t.GPLabel;case"gynae":return t.GynaeLabel;case"std":return t.STDLabel;case"blood":return t.BloodLabel;case"derma":return t.DermaLabel;case"screening":return t.ScreeningLabel;case"corporate":return t.CorporateLabel;default:return t.clinicTitle}},r=o.a.useState(25),c=Object(l.a)(r,2),d=c[0],s=c[1],u=Object(i.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(new Date((new Date).getTime()-6048e5)),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(new Date((new Date).getTime()-864e5)),O=Object(l.a)(m,2),y=O[0],v=O[1],k=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),S=Object(l.a)(k,2),B=S[0],w=S[1],N=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(N,2),I=D[0],P=D[1],A=Object(i.useState)(!1),F=Object(l.a)(A,2),W=F[0],_=F[1],E=Object(i.useState)(!0),H=Object(l.a)(E,2),G=H[0],V=H[1],J=Object(i.useState)(!0),X=Object(l.a)(J,2),$=X[0],Q=X[1],ee=Object(i.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=Object(i.useState)(!0),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=Object(i.useState)(!0),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=Object(i.useState)(!0),pe=Object(l.a)(je,2),xe=pe[0],fe=pe[1],Oe=Object(i.useState)(!0),ve=Object(l.a)(Oe,2),Ce=ve[0],Be=ve[1],Te=Object(i.useState)(!0),Ne=Object(l.a)(Te,2),De=Ne[0],Le=Ne[1],Pe=Object(i.useState)(!0),Fe=Object(l.a)(Pe,2),We=Fe[0],_e=Fe[1],Ee=Object(i.useState)(!0),Me=Object(l.a)(Ee,2),ze=Me[0],He=Me[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:115,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(It.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(na.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(ut.a,{className:t.checkIcon}):"":Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(It.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ue=o.a.useContext(C),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=(Ye[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(null),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=o.a.useState(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(!1),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=Object(i.useState)(ec[0]),dt=Object(l.a)(lt,2),st=dt[0],jt=dt[1],bt=o.a.useState(""),pt=Object(l.a)(bt,2),ht=pt[0],xt=pt[1],gt=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=Xi.getAllBookings;"today"===e.date?n=Xi.getTodayBookings:"old"===e.date?n=Xi.getOldBookings:"future"===e.date?n=Xi.getFutureBookings:"recent"===e.date?n=Xi.getRecentBookingsAll:"deleted"===e.date&&(n=Xi.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(i.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){var t,n,a;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(ht.toLowerCase()))>=0||(null===(n=e.forename)||void 0===n?void 0:n.toLowerCase().indexOf(ht.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(ht.toLowerCase()))>=0}));Xe({bookings:Object(Ut.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ut.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),ct(!0)},vt=o.a.useState(1),kt=Object(l.a)(vt,2),Ct=kt[0],St=kt[1];return Object(a.jsxs)(o.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(be.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Wx(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){xt(""),ft(d)},children:Object(a.jsx)(tn.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){p(!0)},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){xt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Kt.a,{labelId:"top-select-label",id:"top-simple-select",value:d,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:25,children:"25"}),Object(a.jsx)(Jt.a,{value:50,children:"50"}),Object(a.jsx)(Jt.a,{value:100,children:"100"}),Object(a.jsx)(Jt.a,{value:500,children:"500"}),Object(a.jsx)(Jt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Jt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)($r,{booking:nt,open:rt,onClose:function(){at(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:b,onClose:function(){jt(ec[0]),_(!1),p(!1)},PaperComponent:_x,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:W,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),W&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){jt(e.target.value)},children:ec.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),w(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:y,onChange:function(e){v(e),P(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(I),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){V(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ne,onChange:function(e){ae(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:re,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){ue(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:xe,onChange:function(e){fe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ce,onChange:function(e){Be(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:De,onChange:function(e){Le(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:We,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ze,onChange:function(e){He(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),$&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),ne&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),re&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),xe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Ce&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),De&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),We&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),ze&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return W?e.bookingDate>=B&&e.bookingDate<=I&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=B&&e.bookingDate<=I})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object($i.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),ne&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),re&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),xe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Ce&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),De&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),We&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),ze&&Object(a.jsx)("td",{className:t.td,children:Zr.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Mx=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),zx=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Mx(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),R=Object(l.a)(D,2),L=R[0],I=R[1],P=o.a.useState(!1),A=Object(l.a)(P,2),F=(A[0],A[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");g(a),y(e),I(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");F(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");g(l),y(c),I(!0);var d=Rn()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,r]),Object(i.useEffect)((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&!(x.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return N(-2),e.abrupt("return");case 5:if(N(null),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===x})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Xi.getAllBookingsCountByDateStr(x);case 10:a=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:x,res:a}])})}));case 12:a.data.count&&N(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[x]);var W,_=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.PCR_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},E=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.GYNAE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},M=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.GP_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},z=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.STD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},H=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.BLOOD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},G=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.DERMA_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},U=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.ScreeningGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.SCREENING_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},Y=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.CorporateGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.CORPORATE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r),(W=S,W?-2!==W?Object(a.jsx)("div",{className:d.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:W.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:(t=e.clinic,n=e.count,Object(a.jsxs)(o.a.Fragment,{children:["visa"===t&&j.selectedClinics.findIndex((function(e){return"VISA"===e}))>=0&&_(n),"gynae"===t&&j.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&E(n),"gp"===t&&j.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&M(n),"std"===t&&j.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&z(n),"blood"===t&&j.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&H(n),"derma"===t&&j.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&G(n),"screening"===t&&j.selectedClinics.findIndex((function(e){return"SCREENING"===e}))>=0&&U(n),"corporate"===t&&j.selectedClinics.findIndex((function(e){return"CORPORATE"===e}))>=0&&Y(n)]}))});var t,n}))})}):void 0:Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}))]})})},Hx=function e(){Object(ne.a)(this,e)};Hx.getMonthRange=function(e,t){return new ri.a.Calendar(ri.a.SUNDAY).itermonthdates(t,e)};var Gx=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ux=[1,2,3,4,5,6,7],Yx=[1,2,3,4,5,6],Vx=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Kx=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Vx(),c=Hx.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Gx.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Yx.map((function(e){return Object(a.jsx)("tr",{children:Ux.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(zx,{cellIndex:(e-1)*Ux.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*Ux.length+o))})}))})}))})]})})},Jx=Object(N.a)((function(e){return{Container:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},PCRGauge:{position:"absolute",bottom:"15px",left:"0",width:"15px",height:"90%"},GynaeGauge:{position:"absolute",bottom:"15px",left:"16px",width:"15px",height:"90%"},GPGauge:{position:"absolute",bottom:"15px",left:"32px",width:"15px",height:"90%"},STDGauge:{position:"absolute",bottom:"15px",left:"48px",width:"15px",height:"90%"},BloodGauge:{position:"absolute",bottom:"15px",left:"64px",width:"15px",height:"90%"},DermaGauge:{position:"absolute",bottom:"15px",left:"80px",width:"15px",height:"90%"},ScreeningGauge:{position:"absolute",bottom:"15px",left:"96px",width:"15px",height:"90%"},CorporateGauge:{position:"absolute",bottom:"15px",left:"112px",width:"15px",height:"90%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",height:"100%"}}})),qx=function(e){e.key;var t=e.date,n=e.time,r=e.dayClicked,c=Jx(),d=o.a.useContext(C),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(null),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(i.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){x(null);var i=null===(e=u.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!i){var o=ie.a.CancelToken.source();return Xi.getAllBookingsCountByDateStrandTime(t,n,o).then((function(e){e.data.count&&(x(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ut.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){o&&o.cancel("Cancelling in cleanup")}}i.data.count&&x(i.data.count)}}),[t,n]);var B,w=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.PCR_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},N=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.GYNAE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},D=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.GP_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},R=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.STD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},L=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.BLOOD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},I=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.DERMA_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},P=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.ScreeningGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.SCREENING_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},A=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:c.CorporateGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Fn.CORPORATE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},F=function(e,t){return Object(a.jsxs)(o.a.Fragment,{children:["visa"===e&&u.selectedClinics.findIndex((function(e){return"VISA"===e}))>=0&&w(t),"gynae"===e&&u.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&N(t),"gp"===e&&u.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&D(t),"std"===e&&u.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&R(t),"blood"===e&&u.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&L(t),"derma"===e&&u.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&I(t),"screening"===e&&u.selectedClinics.findIndex((function(e){return"SCREENING"===e}))>=0&&P(t),"corporate"===e&&u.selectedClinics.findIndex((function(e){return"CORPORATE"===e}))>=0&&A(t)]})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,k)},children:(B=h,B?-2!==B?Object(a.jsx)("div",{className:c.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:B.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:F(e.clinic,e.count)})}))})}):void 0:Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}))})})},Xx=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],$x=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Qx=function(e){var t=e.dates,n=e.dayClicked,i=$x();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:i.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Rn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:Rn()(e,"mmm ")}),Object(a.jsx)("span",{style:Rn()(new Date,"yyyy-mm-dd")===Rn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Rn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:i.table,children:Object(a.jsx)("tbody",{children:Xx.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:i.td,children:Object(a.jsx)(qx,{dayClicked:n,date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Zx=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},BoxDisabled:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",borderColor:"#ddd",cursor:"not-allowed",color:"#ddd",transition:"all 0.2s ease"},BoxGynae:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.GYNAE_COLOR,color:Fn.GYNAE_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.GYNAE_COLOR,color:"#fff"}},BoxGP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.GP_COLOR,color:Fn.GP_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.GP_COLOR,color:"#fff"}},BoxSTD:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.STD_COLOR,color:Fn.STD_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.STD_COLOR,color:"#fff"}},BoxBlood:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.BLOOD_COLOR,color:Fn.BLOOD_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.BLOOD_COLOR,color:"#fff"}},BoxScreening:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.SCREENING_COLOR,color:Fn.SCREENING_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.SCREENING_COLOR,color:"#fff"}},BoxCorporate:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.CORPORATE_COLOR,color:Fn.CORPORATE_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.CORPORATE_COLOR,color:"#fff"}},BoxDerma:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Fn.DERMA_COLOR,color:Fn.DERMA_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Fn.DERMA_COLOR,color:"#fff"}}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function eg(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function tg(e){var t=Zx(),n=o.a.useContext(C),i=Object(l.a)(n,2),r=(i[0],i[1],function(){e.handleClose()}),c=function(){return e.time.indexOf(":15")>0||e.time.indexOf(":45")>0||e.time.indexOf("09")>=0},d=function(t){e.clinicClicked(t)};return Object(a.jsx)(o.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"xs",open:e.open,onClose:r,PaperComponent:eg,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(tl.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{height:"420px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(We.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:c()?t.BoxDisabled:t.BoxGynae,onClick:function(){return c()?null:d("gynae")},children:"GYNAE"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:c()?t.BoxDisabled:t.BoxGP,onClick:function(){return c()?null:d("gp")},children:"GP"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxSTD,onClick:function(){return d("std")},children:"STD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxBlood,onClick:function(){return d("blood")},children:"BLOOD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxCorporate,onClick:function(){return d("screening")},children:"SCREENING"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxScreening,onClick:function(){return d("corporate")},children:"CORPORATE"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxDerma,onClick:function(){return d("derma")},children:"DERMATOLOGY"})})]})})}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:r,style:{width:"100px"},children:"close"})})})})]})})})}var ng=Object(N.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}},BookingBorderPCR:{border:"4px solid",borderColor:Fn.PCR_COLOR},BookingBorderGynae:{border:"4px solid",borderColor:Fn.GYNAE_COLOR},BookingBorderGP:{border:"4px solid",borderColor:Fn.GP_COLOR},BookingBorderSTD:{border:"4px solid",borderColor:Fn.STD_COLOR},BookingBorderBlood:{border:"4px solid",borderColor:Fn.BLOOD_COLOR},BookingBorderDerma:{border:"4px solid",borderColor:Fn.DERMA_COLOR},BookingBorderScreening:{border:"4px solid",borderColor:Fn.SCREENING_COLOR},BookingBorderCorporate:{border:"4px solid",borderColor:Fn.CORPORATE_COLOR},bookingBoxPending:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ddd",color:"#777",boxShadow:"2px 4px #fafafa","&:hover":{background:"#eee",color:"#333"}}}})),ag=function(e){e.key;var t=e.date,n=e.time,r=ng(),c=o.a.useContext(C),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(null),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(null),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(null),y=Object(l.a)(O,2),v=y[0],k=y[1],S=o.a.useState(!0),N=Object(l.a)(S,2),D=(N[0],N[1],o.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),I=o.a.useState(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState(!1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState(!1),H=Object(l.a)(z,2),G=H[0],U=H[1],Y=o.a.useState(!1),V=Object(l.a)(Y,2),K=V[0],q=V[1],X=o.a.useState(!1),$=Object(l.a)(X,2),Z=$[0],ee=$[1],te=o.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],oe=o.a.useState(!1),re=Object(l.a)(oe,2),ce=re[0],le=re[1],de=o.a.useState(!1),se=Object(l.a)(de,2),ue=se[0],je=se[1],be=o.a.useState(!1),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1];Object(i.useEffect)((function(){var e=Rn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(i.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){var n,a,i;return(null===(n=t.fullname)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(a=t.forename)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(i=t.surname)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))>=0})))}else m(Object(Ut.a)(p))}),[s.dayViewCalFilter,p]),Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){var a,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(o=null===(a=s.AdminCalendarCache)||void 0===a||null===(i=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===i?void 0:i.res)&&!A&&!E){e.next=9;break}return e.next=7,Xi.getAllBookingsByDateStrandTime(t,n);case 7:o=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ut.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:o}])})}));case 9:"OK"===o.data.status&&h(o.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(A||E)&&(u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var ge,fe=function(e){var t=e.status,n=e.confirmed,a=e.clinic;if(("screening"===a||"visa"===a)&&!n)return r.bookingBoxPending;switch(t){case"sample_taken":case"patient_attended":return r.bookingBoxSampleTaken;case"positive":return r.bookingBoxPositive;case"report_sent":case"report_cert_sent":return r.bookingBoxReportSent;default:return r.bookingBox}},me=function(){M(!0)},Oe=function(e){switch(e){case"visa":return r.BookingBorderPCR;case"gynae":return r.BookingBorderGynae;case"gp":return r.BookingBorderGP;case"std":return r.BookingBorderSTD;case"blood":return r.BookingBorderBlood;case"derma":return r.BookingBorderDerma;case"screening":return r.BookingBorderScreening;case"corporate":return r.BookingBorderCorporate;default:return null}};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{className:r.Container,children:(ge=f,null===ge?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(J.a,{disableShrink:!0})}):ge.length>=0?Object(a.jsxs)(o.a.Fragment,{children:[ge.map((function(e){return s.selectedClinics.findIndex((function(t){return t===e.clinic.toUpperCase()}))>=0&&Object(a.jsxs)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{position:"relative"},className:Object(Q.a)(fe(e),Oe(e.clinic)),onClick:function(t){return function(e,t){console.log(t),k(t),F(!0)}(0,e)},children:[e.prepaid&&Object(a.jsx)("div",{style:{position:"absolute",top:"0px",right:"0px",background:"#ff8400",width:"100%",height:"7px",color:"white",textAlign:"center",fontSize:"0.8em",fontWeight:"700"}}),"".concat(e.fullname?e.fullname:"".concat(e.forename," ").concat(e.surname)).substring(0,15)]})})),Object(a.jsxs)("div",{className:r.bookingBoxNew,onClick:me,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)($r,{booking:v,open:A,onClose:function(){F(!1)}}),Object(a.jsx)(tg,{date:t,time:n,open:E,handleClose:function(){M(!1)},clinicClicked:function(e){switch(e){case"gynae":q(!0);break;case"gp":U(!0);break;case"std":ee(!0);break;case"blood":ie(!0);break;case"derma":le(!0);break;case"screening":case"visa":je(!0);break;case"corporate":xe(!0)}}}),Object(a.jsx)(pd,{date:t,time:n,open:G,handleClose:function(){U(!1),M(!1)}}),Object(a.jsx)(ws,{date:t,time:n,open:Z,handleClose:function(){ee(!1),M(!1)}}),Object(a.jsx)(ol,{date:t,time:n,open:K,handleClose:function(){q(!1),M(!1)}}),Object(a.jsx)(Eu,{date:t,time:n,open:ae,handleClose:function(){ie(!1),M(!1)}}),Object(a.jsx)(mb,{date:t,time:n,open:ce,handleClose:function(){le(!1),M(!1)}}),Object(a.jsx)(Np,{date:t,time:n,open:ue,handleClose:function(){je(!1),M(!1)}}),Object(a.jsx)(Eh,{date:t,time:n,open:he,handleClose:function(){xe(!1),M(!1)}})]})},ig=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],og=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),rg=function(e){var t=e.date,n=og();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:Rn()(new Date,"yyyy-mm-dd")===Rn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:Rn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:ig.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(ag,{date:Rn()(t,"yyyy-mm-dd"),time:e},"".concat(Rn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},cg=[{clinic:"VISA",color:Fn.PCR_COLOR},{clinic:"GYNAE",color:Fn.GYNAE_COLOR},{clinic:"GP",color:Fn.GP_COLOR},{clinic:"STD",color:Fn.STD_COLOR},{clinic:"BLOOD",color:Fn.BLOOD_COLOR},{clinic:"DERMA",color:Fn.DERMA_COLOR},{clinic:"SCREENING",color:Fn.SCREENING_COLOR},{clinic:"CORPORATE",color:Fn.CORPORATE_COLOR}],lg=["January","February","March","April","May","June","July","August","September","October","November","December"],dg=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function sg(){var e=dg(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState((new Date).getMonth()+1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState((new Date).getFullYear()),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(new Date),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=w[0],D=w[1],I=o.a.useState("month"),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState("month"),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState(""),H=Object(l.a)(z,2),U=H[0],Y=H[1],V=function(){Y(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{selectedClinics:["VISA","GP","GYNAE","STD","BLOOD","DERMA","SCREENING","CORPORATE"]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));D(e)}),[k]);var J,X=function(e,t){var n=new Date(t),a=n.getDay();S(new Date(n.getTime()-864e5*a)),O(n),j(n.getMonth()+1),x(n.getFullYear()),M("day"),F("day")};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(K.a,{container:!0,spacing:1,children:cg.map((function(e){var t;return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:(null===(t=r.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e.clinic})))>=0?{border:"1px solid ".concat(e.color),backgroundColor:"".concat(e.color),color:"#fff",fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"}:{border:"1px solid ".concat(e.color),color:"".concat(e.color),fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"},onClick:function(){return function(e){var t;(null===(t=r.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e})))>=0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:t.selectedClinics.filter((function(t){return t!==e}))})})):c((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:[].concat(Object(Ut.a)(t.selectedClinics),[e])})}))}(e.clinic)},children:e.clinic})})}))})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===u&&x(h-1);var t=1===u?12:u-1;j(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===A){var i=new Date(k.getTime()-6048e5);S(i),O(i),j(i.getMonth()+1),x(i.getFullYear())}else if("day"===A){var o=new Date(m.getTime()-864e5);O(o);var r=o.getDay();S(new Date(o.getTime()-864e5*r)),j(o.getMonth()+1),x(o.getFullYear())}},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===u&&x(h+1);var t=12===u?1:u+1;j(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===A){var i=new Date(k.getTime()+6048e5);S(i),O(i),j(i.getMonth()+1),x(i.getFullYear())}else if("day"===A){var o=new Date(m.getTime()+864e5);O(o);var r=o.getDay();S(new Date(o.getTime()-864e5*r)),j(o.getMonth()+1),x(o.getFullYear())}},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),j(t.getMonth()+1),x(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(lg[u-1]," ").concat(h)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),i="";return i=n.getMonth()===k.getMonth()?Rn()(n,"d"):Rn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(k,"mmm d")," - ").concat(i,", ").concat(h)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rn()(m,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(Bt.a,{title:"Clear",children:Object(a.jsx)(q.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(It.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Ka.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),F(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Va.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Va.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Va.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(J=A,"month"===J?Object(a.jsx)(Kx,{dayClicked:X,month:u,year:h}):"week"===J?Object(a.jsx)(Qx,{dayClicked:X,dates:N}):"day"===J?Object(a.jsx)(rg,{date:m}):void 0)]})}var ug=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function jg(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function bg(e){var t,n=ug(),r=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.DefaultLabel}},c=o.a.useState(25),d=Object(l.a)(c,2),s=(d[0],d[1],Object(i.useState)(!1)),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(f,2),O=m[0],y=m[1],v=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),k=Object(l.a)(v,2),S=k[0],B=k[1],w=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),N=Object(l.a)(w,2),D=N[0],I=N[1],P=Object(i.useState)(!1),A=Object(l.a)(P,2),F=A[0],W=A[1],_=Object(i.useState)(!0),E=Object(l.a)(_,2),z=E[0],H=E[1],G=Object(i.useState)(!0),V=Object(l.a)(G,2),q=V[0],X=V[1],$=Object(i.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(i.useState)(!0),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],re=Object(i.useState)(!0),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=Object(i.useState)(!0),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=Object(i.useState)(!0),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=Object(i.useState)(!0),me=Object(l.a)(fe,2),Oe=me[0],ve=me[1],ke=Object(i.useState)(!0),Ce=Object(l.a)(ke,2),Se=Ce[0],Be=Ce[1],we=Object(i.useState)(!0),Te=Object(l.a)(we,2),Ne=Te[0],De=Te[1];t=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return lt(t,e.value,e.getValue("clinic"))},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Type",align:"center",width:130,renderCell:function(e){return Object(a.jsx)("span",{className:r(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"fullname",headerName:"Fullname",width:200,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:n.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:n.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:n.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:n.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:n.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:n.PositiveLabel,children:" POS "}):""}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Bt.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:n.RefLink,children:e.value})})}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Re=o.a.useContext(C),Le=Object(l.a)(Re,2),Ie=(Le[0],Le[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),Pe=Object(l.a)(Ie,2),Ae=Pe[0],Fe=Pe[1],We=o.a.useState(null),_e=Object(l.a)(We,2),Ee=(_e[0],_e[1]),Me=o.a.useState(null),ze=Object(l.a)(Me,2),He=ze[0],Ge=ze[1],Ue=o.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],Je=o.a.useState(!1),qe=Object(l.a)(Je,2),Xe=qe[0],$e=qe[1],Qe=Object(i.useState)(ec[0]),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=o.a.useState(""),at=Object(l.a)(nt,2),it=at[0],ot=at[1],rt=(Object(i.useRef)(),function(){var e=Xi.searchAllBookings;Fe({bookings:[],cachedBookings:[],isFetching:!0});e(it).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Fe({bookings:Object(Ut.a)(e.data),cachedBookings:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))}),ct=function(){Ge(null),Ke(!1),$e(!1)},lt=function(e,t,n){var a=Ae.bookings.find((function(e){return e._id===t}));Ge(a),"Blood Result"===n?$e(!0):Ke(!0)},dt=o.a.useState(1),st=Object(l.a)(dt,2),ut=st[0],jt=st[1],bt=o.a.useState(!1),pt=Object(l.a)(bt,2),ht=pt[0],xt=pt[1],gt=function(){!it||it.trim().length<3?xt(!0):rt()};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:ht,variant:"standard",value:it,onChange:function(e){ot(e.target.value),xt(!1)},id:"filter",label:"Patient's Name",helperText:"You can search the patients by name ".concat(ht?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{width:"250px"},onKeyPress:function(e){"Enter"===e.key&&gt()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:gt,children:"Search"})}),Object(a.jsx)(K.a,{item:!0,children:Ae.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(J.a,{color:"primary"})})})]})})}),Ae.isFetching&&Object(a.jsx)("div",{className:n.HideNowRows})]}),Ae.bookings&&Ae.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(Yt.a,{rows:Ae.bookings,columns:t,autoPageSize:!0,page:ut,onPageChange:function(e){jt(e.page)},onSelectionChange:function(e){e.length>0&&Ee(e.rows[0])}})}),Object(a.jsx)($r,{booking:He,open:Ve,onClose:ct}),Ae.bookings&&Ae.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:j,onClose:function(){tt(ec[0]),W(!1),b(!1)},PaperComponent:jg,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:F,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:n.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:et,onChange:function(e){tt(e.target.value)},children:ec.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:x,onChange:function(e){g(e),B(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),I(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:n.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:z,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:q,onChange:function(e){X(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){oe(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:je,onChange:function(e){be(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:xe,onChange:function(e){ge(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ve(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Se,onChange:function(e){Be(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){De(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:n.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("th",{className:n.th,children:"Date"}),q&&Object(a.jsx)("th",{className:n.th,children:"Forename"}),ee&&Object(a.jsx)("th",{className:n.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:n.th,children:"D.O.B"}),le&&Object(a.jsx)("th",{className:n.th,children:"Email"}),je&&Object(a.jsx)("th",{className:n.th,children:"Tel"}),xe&&Object(a.jsx)("th",{className:n.th,children:"Certificate"}),Oe&&Object(a.jsx)("th",{className:n.th,children:"AntiBodyTest"}),Se&&Object(a.jsx)("th",{className:n.th,children:"Lab No."}),Ne&&Object(a.jsx)("th",{className:n.th,children:"Price (\xa3) "})]}),Ae.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===et:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("td",{className:n.td,children:Object($i.FormatDateFromString)(e.bookingDate)}),q&&Object(a.jsx)("td",{className:n.td,children:e.forenameCapital}),ee&&Object(a.jsx)("td",{className:n.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:n.th}),le&&Object(a.jsx)("td",{className:n.td,children:e.email}),je&&Object(a.jsx)("td",{className:n.td,children:e.phone}),xe&&Object(a.jsx)("td",{className:n.td,children:e.certificate?"YES":"NO"}),Oe&&Object(a.jsx)("td",{className:n.td,children:e.antiBodyTest?"YES":"NO"}),Se&&Object(a.jsx)("td",{className:n.td,children:e.extRef}),Ne&&Object(a.jsx)("td",{className:n.td,children:Zr.a.calculatePrice(e)})]})}))]})})]})})]}),Object(a.jsx)(Bo,{booking:He,open:Xe,onClose:ct})]})}var pg=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function hg(e){var t,n=pg();t=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return v(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"patientId",headerName:"Patient ID",width:120},{field:"fullname",headerName:"Full Name",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"birthDate",headerName:"Birth Date",align:"center",width:130,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}},{field:"title",headerName:"Title",width:100},{field:"phone",headerName:"Tel",width:150},{field:"gender",headerName:"Gender",width:100},{field:"email",headerName:"Email",width:200},{field:"bookings",headerName:"Booking Numbers",width:170,valueFormatter:function(e){var t;return(null===(t=e.value)||void 0===t?void 0:t.length)||0}}];var i=o.a.useState({bookings:[],cachedPatients:[],isFetching:!1}),r=Object(l.a)(i,2),c=r[0],d=r[1],s=o.a.useState(null),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(!1),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(""),m=Object(l.a)(f,2),O=m[0],y=m[1],v=function(e,t){var n=c.patients.find((function(e){return e._id===t}));b(Object(T.a)({id:0,bookings:null},n)),g(!0)},k=o.a.useState(1),C=Object(l.a)(k,2),S=C[0],B=C[1],w=o.a.useState(!1),N=Object(l.a)(w,2),D=N[0],I=N[1],P=function(){!O||O.trim().length<3?I(!0):function(){var e=qi.searchAllPatients;d({patients:[],cachedPatients:[],isFetching:!0}),e(O).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});d({patients:Object(Ut.a)(e.data),cachedPatients:Object(Ut.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))}()};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:D,variant:"standard",value:O,onChange:function(e){y(e.target.value),I(!1)},id:"filter",label:"Patient's Name",helperText:"You can search the patients by name ".concat(D?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{width:"250px"},onKeyPress:function(e){"Enter"===e.key&&P()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:P,children:"Search"})}),Object(a.jsx)(K.a,{item:!0,children:c.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(J.a,{color:"primary"})})})]})})}),c.isFetching&&Object(a.jsx)("div",{className:n.HideNowRows})]}),c.patients&&c.patients.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(Yt.a,{rows:c.patients,columns:t,autoPageSize:!0,page:S,onPageChange:function(e){B(e.page)}})}),c.patients&&c.patients.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:x,onClose:function(){g(!1),b({id:0,bookings:null})},"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Patient Info"," "]})})}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Details"," "]})})}),Object(a.jsx)($t.a,{}),Object(a.jsx)("div",{style:{minHeight:120,width:"100%",marginTop:"20px",marginBottom:"20px"},children:Object(a.jsx)(Yt.a,{rows:[j],columns:t,hideFooter:!0})}),Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","History"," "]})})}),Object(a.jsx)($t.a,{}),Object(a.jsx)(ac,{bookingsData:j})]})]})]})}var xg=n(670),gg=n.n(xg),fg=n(669),mg=n.n(fg),Og=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},formControl:{marginBottom:"20px",minWidth:"200px"},submit:{color:"#f5f5f5",height:"50px",marginTop:"2px",width:"100px"},codeTitle:{fontSize:"1.2rem",fontWeight:"500",color:e.palette.primary.main,padding:"10px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function yg(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}function vg(){var e=Og(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=(n[0],n[1],o.a.useState(!1)),c=Object(l.a)(r,2),d=c[0],s=c[1],u=o.a.useState(""),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(!1),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(!1),O=Object(l.a)(m,2),y=O[0],v=O[1],k=o.a.useState(!1),S=Object(l.a)(k,2),N=S[0],D=S[1],I=Object(i.useState)(!1),P=Object(l.a)(I,2),A=P[0],F=P[1],W=Object(i.useState)(!1),Y=Object(l.a)(W,2),Z=Y[0],ee=Y[1],te=o.a.useState(null),ne=Object(l.a)(te,2),ae=(ne[0],ne[1]),ie=o.a.useState(null),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState([]),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(null),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(null),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=o.a.useState(null),ye=Object(l.a)(Oe,2),ve=ye[0],ke=ye[1],Ce=o.a.useState(!1),Se=Object(l.a)(Ce,2),Be=Se[0],we=Se[1],Te=o.a.useState(!1),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=o.a.useState(!1),Ie=Object(l.a)(Le,2),Pe=Ie[0],Ae=Ie[1],Fe=o.a.useState(!1),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wn.getAllCodes();case 3:t=e.sent,ue(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,Me();case 4:s(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),s(!1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();se&&0!==se.length||e()}),[]);var ze=function(){"steve@2021"===b?f(!0):(f(!1),ae("Invalid Password!"))},He=Object(i.useState)(""),Ge=Object(l.a)(He,2),Ue=Ge[0],Ye=Ge[1],Ve=Object(i.useState)(!1),Je=Object(l.a)(Ve,2),qe=Je[0],Xe=Je[1],$e=Object(i.useState)(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=Object(i.useState)(!1),nt=Object(l.a)(tt,2),at=nt[0],it=nt[1],ot=Object(i.useState)(!1),rt=Object(l.a)(ot,2),ct=rt[0],lt=rt[1],dt=Object(i.useState)(!1),st=Object(l.a)(dt,2),ut=st[0],jt=st[1],bt=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,ve||(t=!0,Ae(!0)),fe||(t=!0,Re(!0)),pe||(t=!0,we(!0)),!t){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,jt(!0),e.next=10,Wn.addCode(pe,fe,ve);case 10:Me(),jt(!1),ke(null),me(null),he(null),ee(!0),setTimeout((function(){Ee(!1),ee(!1)}),3e3),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),console.error(e.t0),jt(!1);case 23:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ht()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,jt(!0),e.next=6,Wn.updateCode(re._id,{description:Ue,price:Ze,hidden:ct,isBloodTable:re.isBloodTable});case 6:(t=e.sent)&&t.data&&"OK"===t.data.status&&(n=Object(Ut.a)(se),a=n.findIndex((function(e){return e._id===re._id})),n[a].description=Ue,n[a].price=Ze,n[a].hidden=ct,ue(n),ce(null),ce(n[a]),F(!0),setTimeout((function(){F(!1)}),3e3)),jt(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),jt(!1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=!1;return Ue&&0!==Ue.trim().length||(e=!0,Xe(!0)),Ze&&0!==Ze||(e=!0,it(!0)),!e};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("div",{style:{textAlign:"left",padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[Object(a.jsx)(Ke.a,{style:{fontSize:"2.2rem"}}),";"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"System Codes"})})]})}),d&&g&&Object(a.jsx)("div",{style:{minHeight:"80vh"},children:Object(a.jsx)(Vt.a,{color:"secondary"})}),!g&&Object(a.jsxs)(K.a,{container:!0,alignContent:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(_.a,{severity:"warning",style:{fontSize:"1rem",fontWeight:"400"},children:"Alert - In order to proceed, please enter your password."})}),Object(a.jsx)(K.a,{item:!0,sm:6,xs:12,children:Object(a.jsxs)(M.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ze()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(H.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:y?"text":"password",placeholder:"Please Enter Your Password",value:b,onChange:function(e){p(e.target.value),ae(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(q.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){v(!y)},onMouseDown:function(e){e.preventDefault()},children:y?Object(a.jsx)(X.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ze,className:e.submit,children:"Enter"})})]}),!d&&g&&Object(a.jsxs)(K.a,{container:!0,alignContent:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(_n.a,{id:"code-auto-complete",value:re,onChange:function(e,t){ce(t),function(e){e&&(Ye(e.description),et(e.price),lt(!!e.hidden),Xe(!1),it(!1),setTimeout((function(){D(!1)}),200))}(t)},options:se,getOptionLabel:function(e){return".".concat(e.code," -- ").concat(e.description," -- ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))},fullWidth:!0,renderInput:function(e){return Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},e),{},{label:"System Codes",helperText:"Standard codes already defined in the system"}))}})}),!re&&!_e&&Object(a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",margin:"0px 20px"},children:Object(a.jsx)(Bt.a,{title:"Add New Item",children:Object(a.jsx)(q.a,{"aria-label":"add",size:"large",onClick:function(){Ee(!_e)},children:Object(a.jsx)(mg.a,{color:"primary",fontSize:"inherit"})})})}),!re&&_e&&Object(a.jsx)(i.Fragment,{children:Object(a.jsx)(K.a,{item:!0,xs:12,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(E.a,{elevation:4,style:{position:"relative"},children:[Object(a.jsx)(V.a,{className:e.backdrop,open:ut,children:Object(a.jsx)(J.a,{color:"inherit"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:2,style:{padding:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Be,value:pe,onChange:function(e){he(e.target.value),e.target.value&&we(!1)},fullWidth:!0,label:"Code",name:"code",id:"code-id"})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:De,value:fe,onChange:function(e){me(e.target.value),e.target.value&&Re(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Pe,value:ve,onChange:function(e){ke(e.target.value),e.target.value&&Ae(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:yg,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Z&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(_.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"400"},children:"Success - New Code Saved."})}),Object(a.jsx)(K.a,{item:!0,xs:6,md:4,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:bt,style:{height:"40px"},children:"Add New Code"})})]})]})})}),re&&Object(a.jsx)(i.Fragment,{children:Object(a.jsx)(K.a,{item:!0,xs:12,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(E.a,{elevation:4,style:{position:"relative"},children:[Object(a.jsx)(V.a,{className:e.backdrop,open:ut,children:Object(a.jsx)(J.a,{color:"inherit"})}),re&&re.isBloodTable&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"10px"},children:Object(a.jsx)(Bt.a,{title:"Blood Test",children:Object(a.jsx)(gg.a,{style:{color:"red",fontSize:"1.5rem"}})})}),Object(a.jsxs)("div",{className:e.codeTitle,children:[Object(a.jsx)("span",{style:{fontSize:"0.9rem",color:"#999"},children:"CODE: "})," ",re.code]}),Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:2,style:{padding:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:qe,value:Ue,onChange:function(e){Ue!==e.target.value&&D(!0),Ye(e.target.value),Xe(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:at,value:Ze,onChange:function(e){Ze!==e.target.value&&D(!0),et(e.target.value),it(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:yg,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),re.isBloodTable&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:ct,onChange:function(e){ct!==e.target.checked&&D(!0),lt(e.target.checked)},color:"secondary",name:"hide-canceled",inputProps:{"aria-label":"secondary checkbox"}}),label:"Hide From Online Patients"})}),A&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(_.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"400"},children:"Success - Changes Saved Successfully."})}),Object(a.jsx)(K.a,{item:!0,xs:6,md:4,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:pt,style:{height:"40px"},disabled:!N,children:"Save Changes"})})]})]})})}),Object(a.jsx)(K.a,{item:!0,xs:12})]})]})}var kg=function e(){Object(ne.a)(this,e)};kg.getAllOffDays=function(){return Ji.get("/api/medex/offdays?service=clinic")},kg.removeOneDay=function(e){return Ji.post("/api/medex/offdays/remove",{id:e})},kg.addOneDay=function(e){return Ji.post("/api/medex/offdays/add",{date:e,service:"clinic",offset:(new Date).getTimezoneOffset()})};var Cg=Object(N.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Sg=function(e){e.key;var t=e.cellIndex,n=e.month,r=e.daysInMonth,c=e.dayClicked,d=Cg(),s=o.a.useContext(C),u=Object(l.a)(s,2),j=(u[0],u[1],o.a.useState("")),b=Object(l.a)(j,2),p=(b[0],b[1]),h=o.a.useState(new Date),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(null),O=Object(l.a)(m,2),y=(O[0],O[1],o.a.useState(!1)),v=Object(l.a)(y,2),k=(v[0],v[1]),S=o.a.useState(!1),B=Object(l.a)(S,2),w=(B[0],B[1]);Object(i.useEffect)((function(){if(t<=r.length){var e=r[t-1],a=Rn()(e,"yyyy-mm-dd");p(a),f(e),k(e.getMonth()!==n-1);var i=Rn()(new Date,"yyyy-mm-dd");w(a<i)}else{var o=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*o),l=Rn()(c,"yyyy-mm-dd");p(l),f(c),k(!0);var d=Rn()(new Date,"yyyy-mm-dd");w(l<d)}}),[t,n,r]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:d.Container,onClick:function(e){return c(e,g)},children:function(e,t,n){var i=null,o=!1,r=-1;if(e<=n.length)r=(i=n[e-1]).getDate(),i.getMonth()!==t-1&&(o=!0);else{var c=e-n.length;r=new Date(n[n.length-1].getTime()+864e5*c).getDate(),o=!0}var l=Rn()(new Date,"yyyy-mm-dd")===Rn()(i,"yyyy-mm-dd");return Object(a.jsx)("span",{className:o?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,style:{zIndex:2},children:r>0?"".concat(r):""})}(t,n,r)})})},Bg=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wg=[1,2,3,4,5,6,7],Tg=[1,2,3,4,5,6],Ng=Object(N.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Dg=function(e){var t=e.month,n=e.year,i=e.dayClicked,r=Ng(),c=Hx.getMonthRange(t,n);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("table",{className:r.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Bg.map((function(e){return Object(a.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Tg.map((function(e){return Object(a.jsx)("tr",{children:wg.map((function(o){return Object(a.jsx)("td",{className:r.td,children:Object(a.jsx)(Sg,{cellIndex:(e-1)*wg.length+o,month:t,daysInMonth:c,dayClicked:i},"".concat(t).concat(n).concat((e-1)*wg.length+o))})}))})}))})]})})},Rg=["January","February","March","April","May","June","July","August","September","October","November","December"],Lg=Object(N.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Ig(e){var t=e.dayClick,n=Lg(),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=o.a.useState((new Date).getMonth()+1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState((new Date).getFullYear()),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(new Date),m=Object(l.a)(f,2),O=(m[0],m[1]),y=o.a.useState(new Date),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState([]),w=Object(l.a)(B,2),N=(w[0],w[1]),D=o.a.useState("month"),L=Object(l.a)(D,2),I=L[0],P=(L[1],o.a.useState("month")),A=Object(l.a)(P,2),F=(A[0],A[1],o.a.useState("")),W=Object(l.a)(F,2),_=(W[0],W[1]);Object(i.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),function(){_(""),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))}}),[]),Object(i.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));N(e)}),[k]);var E=function(e,n){var a=new Date(n);t(a.toISOString());var i=new Date(n),o=i.getDay();S(new Date(i.getTime()-864e5*o)),O(i),b(i.getMonth()+1),g(i.getFullYear())};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Bt.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(q.a,{color:"default","aria-label":"prev",onClick:function(e){1===j&&g(x-1);var t=1===j?12:j-1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(pi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Bt.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(q.a,{color:"default","aria-label":"next",onClick:function(e){12===j&&g(x+1);var t=12===j?1:j+1;b(t);var n=new Date(x,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))},children:Object(a.jsx)(xi.a,{style:{fontSize:"2rem"}})})}),Object(a.jsxs)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),b(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:[" ","Today"," "]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:n.title,children:[" ","".concat(Rg[j-1]," ").concat(x)," "]})})})})]}),Object(a.jsx)(Dg,{dayClicked:E,month:j,year:x})]})}var Pg=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},deleteIcon:{color:"red"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"}}}));function Ag(e){var t,n=Pg();t=[{field:"_id",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(R.a,{onClick:function(){return j(e.value)},children:Object(a.jsx)(Ie.a,{})})})}},{field:"date",headerName:"Date",width:150,valueFormatter:function(e){return Object($i.FormatDateFromString)(e.value)}}];var r=o.a.useState({offDays:[],isFetching:!0}),c=Object(l.a)(r,2),d=c[0],s=c[1],u=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kg.getAllOffDays,s({offDays:[],isFetching:!0}),e.abrupt("return",t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});s({offDays:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kg.removeOneDay(t);case 2:return e.next=4,O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){u()}),[e.date]);var b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){x(!1)},f=function(){x(!0)},m=function(){var e=Object(w.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,kg.addOneDay(t);case 3:return e.next=5,O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return u()};return Object(a.jsxs)(o.a.Fragment,{children:[d.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{paddingRight:"15px",color:"#555"},children:Object(a.jsx)(qe.a,{style:{fontSize:"2.2rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"Clinic Off Days"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:n.refreshButton,onClick:O,children:Object(a.jsx)(tn.a,{})})})})]})})}),d.isFetching,Object(a.jsxs)(R.a,{color:"primary",onClick:function(){return f()},children:[" ","Add"," "]})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:d.offDays,columns:t,autoPageSize:!0})}),h&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:f,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Xt.a,{id:"draggable-dialog-title",children:Object(a.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:"Add New Off Day"})})})}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsx)(Ig,{dayClick:m})})})})]})]})}n(248);var Fg=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),Wg=function e(){Object(ne.a)(this,e)};Wg.downloadGPRegForm=function(e){return Fg.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};n(550);var _g=function e(){Object(ne.a)(this,e)};_g.addNewBooking=function(e){return Fg.post("/api/optimalvision/book/bookappointment",e)},_g.sendRegFormEmail=function(e){return Fg.post("/api/optimalvision/book/sendregformemail?id=".concat(e))},_g.payBooking=function(e,t,n,a){return Fg.post("/api/optimalvision/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},_g.unPayBooking=function(e){return Fg.post("/api/optimalvision/book/unpaybooking?id=".concat(e))},_g.getShouldRefundsCount=function(){return Fg.get("/api/optimalvision/book/getshouldrefundscount?")},_g.refundBooking=function(e){return Fg.post("/api/optimalvision/payment/refundpayment",{bookingId:e})},_g.getBookingsStatsByDateStr=function(e){return Fg.get("/api/optimalvision/book/getbookingsstatsbydatestr?date=".concat(e))},_g.getBookingsCountByDateStr=function(e){return Fg.get("/api/optimalvision/book/getbookingscountbydatestr?date=".concat(e))},_g.getAllBookingsCountAll=function(){return Fg.get("/api/optimalvision/book/getallbookingscountall")},_g.getBookingsCountByDateStrandTime=function(e,t,n){return Fg.get("/api/optimalvision/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},_g.getBookingsByDateStrandTime=function(e,t){return Fg.get("/api/optimalvision/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},_g.getAllBookingsCountByDateStr=function(e){return Fg.get("/api/optimalvision/book/getallbookingscountbydatestr?date=".concat(e))},_g.getAllBookingsCountByDateStrandTime=function(e,t,n){return Fg.get("/api/optimalvision/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},_g.getAllBookingsByDateStrandTime=function(e,t){return Fg.get("/api/optimalvision/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},_g.changeBackToBookingMade=function(e){return Fg.post("/api/optimalvision/book/changebacktobookingmade?id=".concat(e))},_g.changeToPatientAttended=function(e,t){return Fg.post("/api/optimalvision/book/changetopatientattended?id=".concat(e),t)},_g.updateBooking=function(e){return Fg.post("/api/optimalvision/book/updatebookappointment",e)},_g.updateBookingTime=function(e){return Fg.post("/api/optimalvision/book/updatebookappointmenttime",e)},_g.deleteBooking=function(e){return Fg.post("/api/optimalvision/book/deletebookappointment?id=".concat(e))},_g.unDeleteBooking=function(e){return Fg.post("/api/optimalvision/book/undeletebookappointment?id=".concat(e))},_g.getBookingsByRef=function(e){return Fg.get("/api/optimalvision/book/getbookingsbyref?ref=".concat(e))},_g.getBookingById=function(e){return Fg.get("/api/optimalvision/book/getbookingbyid?id=".concat(e))},_g.getAllBookings=function(e){return e||(e=25),Fg.get("/api/optimalvision/book/getallbookings?limit=".concat(e))},_g.getDeletedBookings=function(e){return e||(e=25),Fg.get("/api/optimalvision/book/getdeletedbookings?limit=".concat(e))},_g.getTodayBookings=function(){return Fg.get("/api/optimalvision/book/gettodaybookings")},_g.getOldBookings=function(e){return e||(e=25),Fg.get("/api/optimalvision/book/getoldbookings?limit=".concat(e))},_g.getFutureBookings=function(e){return e||(e=25),Fg.get("/api/optimalvision/book/getfuturebookings?limit=".concat(e))},_g.getRecentBookings=function(){return Fg.get("/api/optimalvision/book/getrecentbookings")},_g.getRecentBookingsAll=function(e){return e||(e=25),Fg.get("/api/optimalvision/book/getrecentbookingsall?limit=".concat(e))};var Eg=["Visa Medical"];Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);Object(N.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px",color:e.palette.secondary.main,fontSize:"0.9rem"},infoData:{fontWeight:"500",fontSize:"1rem"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#b80012",color:"#fff","&:hover":{background:"#d90015",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",color:"#fff",backgroundColor:"#bd0d50","&:hover":{background:"#d1175e",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},active:{border:"1px solid green"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},dialogTitle:{backgroundColor:e.palette.secondary.main,color:"#fff"},question:{fontSize:"1.3rem",fontWeight:"400",color:e.palette.secondary.main,marginTop:"30px"},answer:{fontSize:"1.3rem",fontWeight:"500",color:e.palette.primary.main}}}));var Mg=function e(){Object(ne.a)(this,e)};Mg.sendPaymentLinkTextMessage=function(e,t){return Fg.post("/api/medex/payment/sendpaymentlinktext",{medexPaymentId:e,phone:t})},Mg.sendPaymentLinkEmail=function(e,t){return Fg.post("/api/medex/payment/sendpaymentlinkemail",{medexPaymentId:e,email:t})},Mg.doPayment=function(e,t){return Fg.post("/api/medex/payment/dopayment",{paymentId:e,medexPaymentId:t})},Mg.refundPayment=function(e){return Fg.post("/api/medex/payment/refundpayment",{medexPaymentId:e})},Mg.createNewPaymentLink=function(e){return Fg.post("/api/medex/payment/createpayment",{paymentRecord:e})},Mg.deletePaymentLink=function(e){return Fg.post("/api/medex/payment/deletepayment",{medexPaymentId:e})},Mg.getAllPayments=function(){return Fg.get("/api/medex/payment/getallpayments")},Mg.getDeletedPayments=function(){return Fg.get("/api/medex/payment/getdeletedpayments")},Mg.getPaidPayments=function(){return Fg.get("/api/medex/payment/getpaidpayments")},Mg.getNotPaidPayments=function(){return Fg.get("/api/medex/payment/getnotpaidpayments")},Mg.getLatePayments=function(){return Fg.get("/api/medex/payment/getlatepayments")},Mg.getRefundPayments=function(){return Fg.get("/api/medex/payment/getrefundpayments")},Mg.getRecentPayments=function(){return Fg.get("/api/medex/payment/getrecentpayments")},Mg.getPaymentById=function(e){return Fg.get("/api/medex/payment/getpaymentbyid?id=".concat(e))},Mg.getTotalReceivedAmount=function(){return Fg.get("/api/medex/payment/gettotalreceivedamount")},Mg.getTodayReceivedAmount=function(){return Fg.get("/api/medex/payment/gettodayreceivedamount")},Mg.getTotalLinkSent=function(){return Fg.get("/api/medex/payment/gettotallinksent")},Mg.getTodayLinkSent=function(){return Fg.get("/api/medex/payment/gettodaylinksent")};var zg=n(1283),Hg=n(1262),Gg=(n(671),Object(N.a)((function(e){return{loadingBox:{}}})),n(1293),n(1284),function e(){Object(ne.a)(this,e)});Gg.registerNewPatient=function(e){return Fg.post("/api/optimalvision/patient/registernewpatient",e)},Gg.updatePatient=function(e){return Fg.post("/api/optimalvision/patient/updatepatient",e)},Gg.deletePatient=function(e){return Fg.post("/api/optimalvision/patient/deletepatient?id=".concat(e))},Gg.unDeletePatient=function(e){return Fg.post("/api/optimalvision/patient/undeletepatient?id=".concat(e))},Gg.getPatientById=function(e){return Fg.get("/api/optimalvision/patient/getpatientbyid?id=".concat(e))},Gg.getPatientByPatientId=function(e){return Fg.get("/api/optimalvision/patient/getpatientbypatientid?patiantID=".concat(e))},Gg.getAllPatients=function(){return Fg.get("/api/optimalvision/patient/getallpatients")},Gg.getDeletedPatients=function(e){return e||(e=25),Fg.get("/api/optimalvision/patiant/getdeletedpatients")};Object(N.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},root:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},titleCenter:{width:"100%",textAlign:"center",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",borderBottom:"2px dashed ".concat(e.palette.primary.main)},eyeText:{width:"100%",textAlign:"left",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",paddingTop:"15px"}}}));var Ug=n(225),Yg=n.n(Ug),Vg=n(280),Kg=n.n(Vg),Jg=n(281),qg=n.n(Jg),Xg=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function $g(e){var t=e.inputRef,n=e.onChange,i=Object(pt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(En.a,Object(T.a)(Object(T.a)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Qg(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Zg(e){var t=Xg(),n=o.a.useRef(null),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=Object(i.useState)(""),h=Object(l.a)(p,2),x=h[0],g=h[1],f=Object(i.useState)(!1),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(""),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(!1),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=o.a.useState(!1),X=Object(l.a)(Y,2),$=X[0],Q=X[1],ee=o.a.useState(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=o.a.useState(""),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1],le=o.a.useState(""),de=Object(l.a)(le,2),se=de[0],ue=de[1],je=o.a.useState(""),be=Object(l.a)(je,2),pe=be[0],he=be[1],xe=o.a.useState(""),ge=Object(l.a)(xe,2),fe=ge[0],me=ge[1],Oe=o.a.useState(null),ye=Object(l.a)(Oe,2),ve=ye[0],ke=ye[1],Ce=o.a.useState(null),Se=Object(l.a)(Ce,2),Be=Se[0],we=Se[1],Te=function(){j||(e.handleClose(),g(""),N(""),ue(""),ce(""),me(""),he(""),ke(null),we(null),y(!1),A(!1),E(!1),U(!1),b(!1),Q(!1),ae(!1))},Ne=function(){var e=Object(w.a)(B.a.mark((function e(){var t,a,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(!0),t={amount:x,fullname:S,description:fe,notes:pe},e.next=7,Mg.createNewPaymentLink(t);case 7:(a=e.sent)&&a.data&&"OK"===a.data.status&&(i=a.data.payment,ke(Re(i._id)),we(i._id),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),n.current.scrollIntoView({behavior:"smooth",block:"start"})),b(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),b(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=!1;return(!x||0===x.trim().length||parseFloat(x)<=0)&&(y(!0),e=!0),S&&0!==S.trim().length||(A(!0),e=!0),!e},Re=function(e){return"https://londonmedicalclinic.co.uk/medicalexpressclinic/pay/".concat(e)},Le=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se&&!(se.length<3)&&jo.validate(se)){e.next=3;break}return E(!0),e.abrupt("return");case 3:return e.prev=3,b(!0),e.next=7,Mg.sendPaymentLinkEmail(Be,se);case 7:(t=e.sent)&&t.data&&"OK"===t.data.status&&(d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),Q(!0)),b(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),b(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re&&!(re.trim().length<10)){e.next=3;break}return U(!0),e.abrupt("return");case 3:return e.prev=3,b(!0),e.next=7,Mg.sendPaymentLinkTextMessage(Be,re);case 7:(t=e.sent)&&t.data&&"OK"===t.data.status&&(d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),ae(!0)),b(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),b(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:Te,PaperComponent:Qg,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Yg.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","Create New Payment Link"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsxs)(K.a,{container:!0,justify:"space-between",spacing:2,alignItems:"flex-start",style:{marginBottom:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ve||j,autoFocus:!0,error:O,label:"Amount",value:x,fullWidth:!0,required:!0,onChange:function(e){g(e.target.value),y(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:$g,startAdornment:Object(a.jsx)(G.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ve||j,fullWidth:!0,error:P,label:"Customer/Payer Name",value:S,required:!0,onChange:function(e){N(e.target.value),A(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ve||j,fullWidth:!0,label:"Description",value:fe,onChange:function(e){me(e.target.value)},name:"description",id:"description-id",helperText:"This will be shown to the users at payment time.",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ve||j,fullWidth:!0,label:"Notes",value:pe,onChange:function(e){he(e.target.value)},name:"notes",id:"notes-id",helperText:"This is just for your use, it will not be shown to the users.",autoComplete:"none"})}),ve&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("div",{style:{fontSize:"1rem",fontWeight:"500",marginBottom:"5px",marginTop:"5px",color:"#333"},children:"Payment Link URL :"}),Object(a.jsxs)("div",{style:{width:"100%",overflowWrap:"break-word"},ref:n,children:[Object(a.jsx)(Z.a,{style:{fontSize:"1rem",fontWeight:"500"},href:ve,target:"_blank",rel:"noopener",children:ve}),Object(a.jsx)("span",{children:Object(a.jsx)(Bt.a,{title:"COPY LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText(ve)},"aria-label":"delete",className:t.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:{color:"#bf9b30",fontSize:"1.3rem",marginLeft:"10px"}})})})})]})]}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,error:_,label:"Customer Email Address",value:se,onChange:function(e){ue(e.target.value),jo.validate(e.target.value)&&E(!1)},name:"email",id:"email-id",autoComplete:"none",variant:"outlined",placeholder:"Enter customer email address",InputProps:$?{endAdornment:Object(a.jsxs)(G.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Email Sent"}),Object(a.jsx)(un.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsx)(G.a,{position:"start",children:Object(a.jsx)(Kg.a,{style:{color:"#05acb2"}})})}:{startAdornment:Object(a.jsx)(G.a,{position:"start",children:Object(a.jsx)(Kg.a,{style:{color:"#05acb2"}})})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:j,fullWidth:!0,onClick:Le,variant:"contained",color:"primary",children:"Send Link With Email"})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,error:H,label:"Customer Mobile Number",value:re,onChange:function(e){ce(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none",variant:"outlined",placeholder:"1234567891",helperText:"* Please enter only the mobile number (10 numbers) without the country code. Just UK numbers are accepted.",InputProps:ne?{endAdornment:Object(a.jsxs)(G.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Text MSG Sent"}),Object(a.jsx)(un.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsxs)(G.a,{position:"start",children:[Object(a.jsx)(qg.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}:{startAdornment:Object(a.jsxs)(G.a,{position:"start",children:[Object(a.jsx)(qg.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:j,fullWidth:!0,onClick:Ie,variant:"contained",color:"primary",children:"Send Link With Text Message"})})]})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:j,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Te,style:{width:"100px"},disabled:j,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:null!==ve||j,onClick:Ne,variant:"contained",color:"primary",children:"Create Link"})})]})})]})})})}var ef=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+999,color:"#fff"},itemLabel:{color:"#555",fontWeight:"500",fontSize:"1rem"},itemData:{color:e.palette.primary.main,fontWeight:"600",fontSize:"1rem"},TextSecondary:{color:e.palette.secondary.main}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function tf(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function nf(e){var t=ef(),n=o.a.useRef(null),r=o.a.useContext(C),c=Object(l.a)(r,2),d=(c[0],c[1]),s=Object(i.useState)(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=Object(i.useState)(""),h=Object(l.a)(p,2),x=(h[0],h[1]),g=Object(i.useState)(!1),f=Object(l.a)(g,2),m=(f[0],f[1]),O=o.a.useState(""),y=Object(l.a)(O,2),v=(y[0],y[1]),k=o.a.useState(!1),S=Object(l.a)(k,2),N=(S[0],S[1]),D=o.a.useState(!1),I=Object(l.a)(D,2),P=I[0],A=I[1],F=o.a.useState(!1),W=Object(l.a)(F,2),_=W[0],E=W[1],M=o.a.useState(""),z=Object(l.a)(M,2),H=z[0],U=z[1],Y=o.a.useState(""),X=Object(l.a)(Y,2),$=X[0],Q=X[1],ee=o.a.useState(""),te=Object(l.a)(ee,2),ne=(te[0],te[1]),ae=o.a.useState(""),ie=Object(l.a)(ae,2),oe=(ie[0],ie[1]),re=o.a.useState(null),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=o.a.useState(!1),ue=Object(l.a)(se,2),je=ue[0],be=ue[1],pe=o.a.useState(!1),he=Object(l.a)(pe,2),xe=he[0],ge=he[1],fe=o.a.useState(!1),me=Object(l.a)(fe,2),Oe=me[0],ye=me[1],ve=o.a.useState(!1),ke=Object(l.a)(ve,2),Ce=ke[0],Se=ke[1],Be=o.a.useState(null),we=Object(l.a)(Be,2),Te=we[0],Ne=we[1],De=o.a.useState(!1),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=function(){Pe(!1)},Fe=o.a.useState(!1),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=function(){Ee(!1)};o.a.useEffect((function(){e.payment&&e.open&&(de(He(e.payment._id)),Q(e.payment.email||""),U(e.payment.phone||""))}),[e.payment,e.open]);var ze=function(){j||(e.handleClose(),x(""),v(""),Q(""),U(""),oe(""),ne(""),de(null),Ne(null),m(!1),N(!1),A(!1),E(!1),b(!1),be(!1),ye(!1),Ee(!1),Pe(!1),Se(!1),ge(!1))},He=function(e){return"https://londonmedicalclinic.co.uk/medicalexpressclinic/pay/".concat(e)},Ge=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($&&!($.length<3)&&jo.validate($)){t.next=3;break}return A(!0),t.abrupt("return");case 3:return t.prev=3,b(!0),t.next=7,Mg.sendPaymentLinkEmail(e.payment._id,$);case 7:(n=t.sent)&&n.data&&"OK"===n.data.status&&(d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),be(!0)),b(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),b(!1);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}(),Ue=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(!0),t.next=4,Mg.refundPayment(e.payment._id);case 4:n=t.sent,b(!1),Ee(!1),n&&n.data&&"OK"===n.data.status&&(ye(!0),Ne(new Date),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),b(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),Ye=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(!0),t.next=4,Mg.deletePaymentLink(e.payment._id);case 4:n=t.sent,b(!1),Pe(!1),n&&n.data&&"OK"===n.data.status&&(Se(!0),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),b(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),Ve=function(){var t=Object(w.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(H&&!(H.trim().length<10)){t.next=3;break}return E(!0),t.abrupt("return");case 3:return t.prev=3,b(!0),t.next=7,Mg.sendPaymentLinkTextMessage(e.payment._id,H);case 7:(n=t.sent)&&n.data&&"OK"===n.data.status&&(d((function(e){return Object(T.a)(Object(T.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),ge(!0)),b(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),b(!1);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:e.payment&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(qt.a,{maxWidth:"sm",open:e.open,onClose:ze,PaperComponent:tf,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",style:{position:"relative"},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"15px"},children:[e.payment.paymentInfo&&!e.payment.refund&&!Oe&&Object(a.jsx)(Bt.a,{title:"Successful Payment",children:Object(a.jsx)(ot.a,{style:{color:"#009c39",fontSize:"2.5rem"}})}),e.payment.paymentInfo&&(e.payment.refund||Oe)&&Object(a.jsx)(Bt.a,{title:"Refunded Payment",children:Object(a.jsx)(at.a,{style:{color:"#f06400",fontSize:"2.5rem"}})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"15px",right:"15px"},children:(e.payment.deleted||Ce)&&Object(a.jsx)(Bt.a,{title:"Deleted Payment",children:Object(a.jsx)(Ie.a,{style:{color:"#d40000",fontSize:"2.5rem"}})})}),Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Yg.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","Payment Link Info"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{style:e.payment.deleted||Ce?{backgroundColor:"#bbb"}:{},children:Object(a.jsxs)(K.a,{container:!0,justify:"space-between",spacing:2,alignItems:"flex-start",style:{marginBottom:"20px"},children:[e.payment.paymentInfo&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#009c39",marginRight:"10px"},children:" Square Ref # : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#009c39"},children:JSON.parse(e.payment.paymentInfo).id})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#009c39",marginRight:"10px"},children:" Payment done at : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#009c39"},children:Rn()(e.payment.paymentTimeStamp,"dddd, mmmm dS, yyyy, h:MM:ss TT")})]})]}),e.payment.paymentInfo&&!e.payment.refund&&!Oe&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){Ee(!0)},children:"Refund Payment"})}),e.payment.paymentInfo&&(e.payment.refund||Oe)&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"600",textAlign:"left",color:"#f06400"},children:"Payment has been Refunded."})}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#f06400",marginRight:"10px"},children:" Refund done at : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#f06400"},children:Rn()(e.payment.refundTimeStamp||Te,"dddd, mmmm dS, yyyy, h:MM:ss TT")})]})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Amount: "}),Object(a.jsx)("span",{className:t.itemData,children:"\xa3".concat(e.payment.amount.toLocaleString("en-GB"))})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Customer/Payer Name: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.fullname||"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Description: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.description||"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Notes: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.notes||"-"})]}),le&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#333"},children:"Payment Link URL :"}),Object(a.jsxs)("div",{style:{width:"100%",overflowWrap:"break-word"},ref:n,children:[Object(a.jsx)(Z.a,{style:{fontSize:"1rem",fontWeight:"500"},href:le,target:"_blank",rel:"noopener",children:le}),Object(a.jsx)("span",{children:Object(a.jsx)(Bt.a,{title:"COPY LINK TO CLIPBOARD",children:Object(a.jsx)(q.a,{onClick:function(){navigator.clipboard.writeText(le)},"aria-label":"delete",className:t.margin,size:"small",children:Object(a.jsx)(Nn.a,{style:{color:"#bf9b30",fontSize:"1.3rem",marginLeft:"10px"}})})})})]})]}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,error:P,label:"Customer Email Address",value:$,onChange:function(e){Q(e.target.value)},name:"email",id:"email-id",autoComplete:"none",variant:"outlined",placeholder:"Enter customer email address",InputProps:je||e.payment.emailSent?{endAdornment:Object(a.jsxs)(G.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Email Sent"}),Object(a.jsx)(un.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsx)(G.a,{position:"start",children:Object(a.jsx)(Kg.a,{style:{color:"#05acb2"}})})}:{startAdornment:Object(a.jsx)(G.a,{position:"start",children:Object(a.jsx)(Kg.a,{style:{color:"#05acb2"}})})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:j||e.payment.paymentInfo||e.payment.refund||e.payment.deleted,fullWidth:!0,onClick:Ge,variant:"contained",color:"primary",children:"Send Link With Email"})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,error:_,label:"Customer Mobile Number",value:H,onChange:function(e){U(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none",variant:"outlined",placeholder:"1234567891",helperText:"* Please enter only the mobile number (10 numbers) without the country code. Just UK numbers are accepted.",InputProps:xe||e.payment.textSent?{endAdornment:Object(a.jsxs)(G.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Text MSG Sent"}),Object(a.jsx)(un.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsxs)(G.a,{position:"start",children:[Object(a.jsx)(qg.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}:{startAdornment:Object(a.jsxs)(G.a,{position:"start",children:[Object(a.jsx)(qg.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:j||e.payment.paymentInfo||e.payment.refund||e.payment.deleted,fullWidth:!0,onClick:Ve,variant:"contained",color:"primary",children:"Send Link With Text Message"})}),!e.payment.deleted&&!Ce&&Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(R.a,{onClick:function(){return Pe(!0)},variant:"contained",fullWidth:!0,color:"primary",style:{backgroundColor:"#c70000",color:"#fff"},disabled:j,children:"Delete This Record"})})]})]})}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:ze,style:{width:"100px"},disabled:j,children:"close"})})})}),Object(a.jsxs)(qt.a,{open:_e,onClose:Me,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#bf0000"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund this payment?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Me,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ue,color:"secondary",style:{fontWeight:"600"},variant:"contained",autoFocus:!0,children:"Yes, Refund Payment"})]})]}),Object(a.jsxs)(qt.a,{open:Le,onClose:Ae,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Xt.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete Record"}),Object(a.jsx)(Qt.a,{children:Object(a.jsx)(on.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)(rn.a,{children:[Object(a.jsx)(R.a,{onClick:Ae,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ye,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this record"})]})]})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:j,children:Object(a.jsx)(J.a,{color:"inherit"})})]})})}var af=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),of=function(e){return"paid"===e?"Successful Payments":"refund"===e?"Refunded Payments":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"notpaid"===e?"Not Yet Paid":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"4 Hours Late":"Payment Links"};function rf(e){var t=af(),n=[{field:"_id",headerName:" ",width:120,renderCell:function(e){return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(q.a,{color:"primary",onClick:function(t){return F(t,e.value)},children:Object(a.jsx)(ye.a,{})}),e.getValue("paymentInfo")&&!e.getValue("refund")&&Object(a.jsx)(ot.a,{style:{color:"#009c39",fontSize:"1.6rem"}}),e.getValue("paymentInfo")&&e.getValue("refund")&&Object(a.jsx)(at.a,{style:{color:"#f06400",fontSize:"1.6rem"}}),!e.getValue("paymentInfo")&&(e.getValue("emailSent")||e.getValue("textSent"))&&Object(a.jsx)(un.a,{style:{color:"#008082",fontSize:"1.6rem"}})]})}},{field:"timeStamp",headerName:"Created at",width:180,valueFormatter:function(e){return I(e.value)}},{field:"amount",headerName:"Amount",width:150,valueFormatter:function(e){return"\xa3".concat(e.value.toLocaleString("en-GB"))}},{field:"fullname",headerName:"Customer Name",width:200},{field:"description",headerName:"Description",width:250},{field:"email",headerName:"Email",width:150},{field:"phone",headerName:"Telephone",width:150},{field:"notes",headerName:"Notes",width:300}],r=o.a.useContext(C),c=Object(l.a)(r,2),d=c[0],s=(c[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(null),h=Object(l.a)(p,2),x=(h[0],h[1]),g=o.a.useState(null),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=(v[0],v[1],Object(i.useState)(Eg[0])),S=Object(l.a)(k,2),B=(S[0],S[1],o.a.useState("")),w=Object(l.a)(B,2),N=w[0],D=w[1],I=(Object(i.useRef)(),function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),P=function(){var t=Mg.getAllPayments;"deleted"===e.date?t=Mg.getDeletedPayments:"paid"===e.date?t=Mg.getPaidPayments:"refund"===e.date?t=Mg.getRefundPayments:"notpaid"===e.date?t=Mg.getNotPaidPayments:"late"===e.date&&(t=Mg.getLatePayments),b({bookings:[],cachedBookings:[],isFetching:!0});t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});b({bookings:Object(Ut.a)(e.data.result),cachedBookings:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){P()}),[e.date]),Object(i.useEffect)((function(){if(N&&N.trim().length>0){var e=j.cachedBookings.filter((function(e){var t;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(N.toLowerCase()))>=0}));b({bookings:Object(Ut.a)(e),cachedBookings:j.cachedBookings,isFetching:!1})}else b({bookings:Object(Ut.a)(j.cachedBookings),cachedBookings:j.cachedBookings,isFetching:!1})}),[N]),Object(i.useEffect)((function(){P()}),[d.paymentDialogDataChanged]);var A,F=function(e,t){var n=j.bookings.find((function(e){return e._id===t}));n&&(O(n),oe(!0))},W=o.a.useState(1),_=Object(l.a)(W,2),E=_[0],M=_[1],z=o.a.useState(null),H=Object(l.a)(z,2),G=(H[0],H[1]),U=o.a.useState(!1),Y=Object(l.a)(U,2),V=Y[0],J=Y[1],X=o.a.useState(""),$=Object(l.a)(X,2),Q=($[0],$[1]),Z=o.a.useState(""),ee=Object(l.a)(Z,2),te=(ee[0],ee[1]),ne=o.a.useState(!1),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1];return Object(a.jsxs)(o.a.Fragment,{children:[j.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(A=e.date,"paid"===A?Object(a.jsx)(ot.a,{style:{fontSize:"2.2rem"}}):"refund"===A?Object(a.jsx)(at.a,{style:{fontSize:"2.2rem"}}):"future"===A?Object(a.jsx)(ge.a,{style:{fontSize:"2.2rem"}}):"recent"===A?Object(a.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"notpaid"===A?Object(a.jsx)(ct.a,{style:{fontSize:"2.2rem"}}):"completed"===A?Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}}):"positive"===A?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===A?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===A?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(Yg.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"#444",marginTop:"-5px"},children:[" ",of(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Bt.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(q.a,{color:"primary",className:t.refreshButton,onClick:function(e){D(""),P()},children:Object(a.jsx)(tn.a,{})})})})]})})}),"all"===e.date&&Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{paddingBottom:"10px"},children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){G(null),Q("Register New Patient"),te("Save"),J(!0)},startIcon:Object(a.jsx)(tl.a,{}),children:"Create New Link"})})}),j.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:N,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Yt.a,{rows:j.bookings,columns:n,autoPageSize:!0,page:E,onPageChange:function(e){M(e.page)},onSelectionChange:function(e){e.length>0&&x(e.rows[0])}})}),Object(a.jsx)(Zg,{open:V,handleClose:function(){J(!1)}}),Object(a.jsx)(nf,{payment:m,open:ie,handleClose:function(){oe(!1)}})]})}function cf(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function lf(e,t){return{time:e,amount:t}}lf("09:00",0),lf("10:00",0),lf("11:00",0),lf("12:00",0),lf("13:00",0),lf("14:00",0),lf("15:00",0),lf("16:00",0),lf("17:00",0),lf("18:00",void 0);Object(N.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}});var df=Object(N.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function sf(){df();var e=o.a.useContext(C),t=Object(l.a)(e,2),n=(t[0],t[1],o.a.useState({bookings:[],isFetching:!1})),r=Object(l.a)(n,2),c=r[0],d=r[1],s=o.a.useState(!1),u=Object(l.a)(s,2),j=u[0],b=u[1],p=o.a.useState(!1),h=Object(l.a)(p,2),x=h[0],g=h[1],f=function(){d({bookings:c.bookings,isFetching:!0}),g(!0),Mg.getRecentPayments().then((function(e){g(!1),d({bookings:e.data.result,isFetching:!1})})).catch((function(e){g(!1),console.log(e),d({bookings:c.bookings.result,isFetching:!1})}))};Object(i.useEffect)((function(){f()}),[j]),Object(i.useEffect)((function(){f();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var m=function(e){var t=Dn(new Date,"yyyy-mm-dd"),n=Dn(e,"yyyy-mm-dd");return Dn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(o.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(cf,{children:"Recent Payments Received"}),Object(a.jsxs)(Ba.a,{size:"small",children:[Object(a.jsx)(Na.a,{children:Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:"Recived at"}),Object(a.jsx)(Ta.a,{children:"Amount"}),Object(a.jsx)(Ta.a,{children:"Customer"}),Object(a.jsx)(Ta.a,{children:"Email"}),Object(a.jsx)(Ta.a,{children:"Tel"}),Object(a.jsx)(Ta.a,{children:"Desctiption"})]})}),Object(a.jsx)(wa.a,{children:c.bookings.map((function(e){return Object(a.jsxs)(Da.a,{children:[Object(a.jsx)(Ta.a,{children:m(e.paymentTimeStamp)}),Object(a.jsx)(Ta.a,{style:{fontWeight:"600"},children:"\xa3".concat(e.amount.toLocaleString("en-GB"))}),Object(a.jsx)(Ta.a,{children:e.fullname}),Object(a.jsx)(Ta.a,{children:e.email}),Object(a.jsx)(Ta.a,{children:e.phone}),Object(a.jsx)(Ta.a,{children:e.description})]},e._id)}))})]})]})}var uf=Object(N.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function jf(){var e=uf(),t=o.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Mg.getTotalReceivedAmount();case 4:t=e.sent,c(t.data.result),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[u]),Object(i.useEffect)((function(){g();var e=setInterval((function(){j((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(cf,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Total Money Received"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==r&&Object(a.jsx)("div",{className:e.countLabel,children:"\xa3".concat(r.toLocaleString("en-GB"))})})]})})]})})}var bf=Object(N.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function pf(){var e=bf(),t=o.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Mg.getTodayReceivedAmount();case 4:t=e.sent,c(t.data.result),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[u]),Object(i.useEffect)((function(){g();var e=setInterval((function(){j((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(cf,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Today Money Received"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==r&&Object(a.jsx)("div",{className:e.countLabel,children:"\xa3".concat(r.toLocaleString("en-GB"))})})]})})]})})}var hf=Object(N.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function xf(){var e=hf(),t=o.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Mg.getTodayLinkSent();case 4:t=e.sent,c(t.data.result),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[u]),Object(i.useEffect)((function(){g();var e=setInterval((function(){j((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(cf,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Today Payment Links Sent"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==r&&Object(a.jsx)("div",{className:e.countLabel,children:r})})]})})]})})}var gf=Object(N.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},countLabelRed:{fontSize:"2rem",color:"red"},TitleRed:{color:"red"}}}));function ff(){var e=gf(),t=o.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(!1),s=Object(l.a)(d,2),u=s[0],j=s[1],b=o.a.useState(!1),p=Object(l.a)(b,2),h=p[0],x=p[1],g=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Mg.getLatePayments();case 4:n=e.sent,c((null===(t=n.data.result)||void 0===t?void 0:t.length)||0),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[u]),Object(i.useEffect)((function(){g();var e=setInterval((function(){j((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Vt.a,{color:"primary"})}),Object(a.jsx)(cf,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},className:0===r?e.Title:e.TitleRed,children:"4 Hours Late Payments"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==r&&Object(a.jsx)("div",{className:0===r?e.countLabel:e.countLabelRed,children:r})})]})})]})})}var mf=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Of(){var e=mf(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight),Object(Q.a)(e.paper,e.fixedHeightSmall)),r=Object(te.d)(),c="payment";return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(jf,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(pf,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(E.a,{className:i,onClick:function(){r.push(ce("/".concat(lm(c,dm(c,"latepaymentsTable")))))},style:{cursor:"pointer"},children:Object(a.jsx)(ff,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(xf,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,style:{minHeight:"250px"},children:Object(a.jsx)(sf,{})})})]})})}var yf=ie.a.create({baseURL:re,headers:{Authorization:oe,"Content-Type":"application/json"}}),vf=function e(){Object(ne.a)(this,e)};vf.searchAllInvoicesByName=function(e){return yf.post("/api/medex/invoice/searchallinvoicesbyname",{search:{name:e}})},vf.searchAllInvoicesByDate=function(e){return yf.post("/api/medex/invoice/searchallinvoicesbydate",{search:e})},vf.getInvoiceReports=function(){return yf.get("/api/medex/invoice/getinvoicereports")},vf.addNewBooking=function(e){return yf.post("/api/gp/book/addnewbooking",e)},vf.sendRegFormEmail=function(e){return yf.post("/api/gp/book/sendregformemail?id=".concat(e))},vf.payBooking=function(e,t,n,a){return yf.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},vf.unPayBooking=function(e){return yf.post("/api/gp/book/unpaybooking?id=".concat(e))},vf.getShouldRefundsCount=function(){return yf.get("/api/gp/book/getshouldrefundscount?")},vf.refundBooking=function(e){return yf.post("/api/gp/payment/refundpayment",{bookingId:e})},vf.getBookingsStatsByDateStr=function(e){return yf.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},vf.getBookingsCountByDateStr=function(e){return yf.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},vf.getAllBookingsCountAll=function(){return yf.get("/api/gp/book/getallbookingscountall")},vf.getBookingsCountByDateStrandTime=function(e,t,n){return yf.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},vf.getBookingsByDateStrandTime=function(e,t){return yf.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},vf.getAllBookingsCountByDateStr=function(e){return yf.get("/api/admin/book/getallbookingscountbydatestr?date=".concat(e))},vf.getAllBookingsCountByDateStrandTime=function(e,t,n){return yf.get("/api/admin/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},vf.getAllBookingsByDateStrandTime=function(e,t){return yf.get("/api/admin/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},vf.changeBackToBookingMade=function(e){return yf.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},vf.changeToPatientAttended=function(e,t){return yf.post("/api/gp/book/changetopatientattended?id=".concat(e),t)},vf.updateBooking=function(e){return yf.post("/api/gp/book/updatebookappointment",e)},vf.updateBookingTime=function(e){return yf.post("/api/gp/book/updatebookappointmenttime",e)},vf.deleteBooking=function(e){return yf.post("/api/gp/book/deletebookappointment?id=".concat(e))},vf.unDeleteBooking=function(e){return yf.post("/api/gp/book/undeletebookappointment?id=".concat(e))},vf.getBookingsByRef=function(e){return yf.get("/api/admin/book/getbookingsbyref?ref=".concat(e))},vf.getBookingById=function(e){return yf.get("/api/admin/book/getbookingbyid?id=".concat(e))},vf.getAllBookings=function(e){return e||(e=25),yf.get("/api/admin/book/getallbookings?limit=".concat(e))},vf.searchAllBookings=function(e){return yf.post("/api/admin/book/searchallbookings",{filter:e})},vf.getDeletedBookings=function(e){return e||(e=25),yf.get("/api/admin/book/getdeletedbookings?limit=".concat(e))},vf.getTodayBookings=function(){return yf.get("/api/admin/book/gettodaybookings")},vf.getOldBookings=function(e){return e||(e=25),yf.get("/api/admin/book/getoldbookings?limit=".concat(e))},vf.getFutureBookings=function(e){return e||(e=25),yf.get("/api/admin/book/getfuturebookings?limit=".concat(e))},vf.getRecentBookings=function(){return yf.get("/api/admin/book/getrecentbookings")},vf.getRecentBookingsAll=function(e){return e||(e=25),yf.get("/api/admin/book/getrecentbookingsall?limit=".concat(e))};var kf=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Vt.a);function Cf(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Sf(e){var t=kf(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1],Object(i.useState)(!1)),d=Object(l.a)(c,2),s=d[0],u=d[1],j=null,b=Object(i.useState)(j),p=Object(l.a)(b,2),h=(p[0],p[1]),x=Object(i.useState)(!1),g=Object(l.a)(x,2),f=(g[0],g[1]),m=Object(i.useState)(""),O=Object(l.a)(m,2),y=(O[0],O[1]),v=Object(i.useState)(!1),k=Object(l.a)(v,2),S=(k[0],k[1]),B=o.a.useState(null),w=Object(l.a)(B,2),N=w[0],D=w[1],I=Object(i.useState)(""),P=Object(l.a)(I,2),A=P[0],F=P[1],W=o.a.useState([]),_=Object(l.a)(W,2),E=_[0],M=_[1],z=Object(i.useState)(""),H=Object(l.a)(z,2),G=(H[0],H[1]),U=Object(i.useState)(!1),Y=Object(l.a)(U,2),q=(Y[0],Y[1]),X=o.a.useState("INVOICE ISSUANCE"),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=o.a.useState([]),te=Object(l.a)(ee,2);te[0],te[1];Object(i.useEffect)((function(){return e.invoice?(M(e.invoice.items),F(e.invoice.notes||""),Z(e.invoice.name.toUpperCase()),D(Object(T.a)(Object(T.a)({},e.invoice.booking),{},{clinic:e.invoice.clinic}))):ne(),function(){M([])}}),[e.invoice,e.open]),Object(i.useEffect)((function(){return!e.invoice&&e.defaultCodes&&M(e.defaultCodes),function(){M([])}}),[e.defaultCodes]);var ne=function(t){s||(G(""),h(j),y(""),q(!1),f(!1),S(!1),M([]),F(""),u(!1),D(null),ce(!1),e.handleClose(t))},ae=function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t},ie=o.a.useState(!1),oe=Object(l.a)(ie,2),re=oe[0],ce=oe[1];return Object(a.jsx)(o.a.Fragment,{children:e.booking&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(qt.a,{maxWidth:"md",open:e.open,onClose:function(){return ne(!1)},PaperComponent:Cf,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(zn.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:"".concat(Q)})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsxs)(Qt.a,{children:[Object(a.jsx)("div",{style:{height:"700px",width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"flex-start",children:[N&&Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsx)(R.a,{fullWidth:!0,onClick:function(){ce(!0)},startIcon:Object(a.jsx)(ye.a,{}),color:"primary",variant:"contained",children:"Show Booking Detail ..."})}),Object(a.jsx)("div",{style:{backgroundColor:"#fff",color:"#1cb2c9",fontWeight:"500",fontSize:"0.95rem",padding:"5px 8px",marginBottom:"-15px",marginLeft:"10px",zIndex:"99",marginTop:"0px"},children:"Invoice Items"}),Object(a.jsx)("div",{style:{width:"100%",minHeight:"150px",overflowY:"scroll",border:"1px solid #ddd",borderRadius:"4px",padding:"25px",position:"relative"},children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%",fontWeight:"500"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:"Code"}),Object(a.jsx)(K.a,{item:!0,xs:5,children:"Description"}),Object(a.jsx)(K.a,{item:!0,xs:2,children:"Price"}),Object(a.jsx)(K.a,{item:!0,xs:3})]})}),E.map((function(e,t){return Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:e.code}),Object(a.jsx)(K.a,{item:!0,xs:5,children:e.description}),Object(a.jsx)(K.a,{item:!0,xs:2,children:parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})})}))]})})}),Object(a.jsxs)(K.a,{item:!0,style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:"30px"},children:[Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#777",fontSize:"1.5rem"},children:["Grand Total :"," "]})," ",Object(a.jsxs)("span",{style:{fontWeight:"700",color:"#1cb2c9",marginLeft:"10px",fontSize:"1.5rem"},children:[" ",ae(E).toLocaleString("en-GB",{style:"currency",currency:"GBP"})," "]})]}),Object(a.jsx)(K.a,{item:!0,style:{marginTop:"10px",width:"100%"},children:Object(a.jsx)(L.a,{value:A,onChange:function(e){F(e.target.value)},multiline:!0,rows:2,helperText:"* notes will be printed on the invoice (optional)",label:"Notes",fullWidth:!0,variant:"outlined",placeholder:"enter any addional notes you want to be printed on the invoice..."})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:s,children:Object(a.jsx)(J.a,{color:"inherit"})})]}),Object(a.jsx)(rn.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ne(!1)},style:{width:"100px"},disabled:s,children:"close"})})})}),Object(a.jsx)($r,{booking:N,open:re,onClose:function(){ce(!1)}})]})})})}var Bf=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},Summary:{marginTop:"10px",padding:"15px 30px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#333",color:"#fff",fontWeight:"500",fontSize:"1rem"}}}));function wf(e){return Object(a.jsx)(ln.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(T.a)({},e))})}function Tf(e){var t,n,r=Bf(),c=function(e){switch(e){case"pcr":return r.PCRLabel;case"gp":return r.GPLabel;case"gynae":return r.GynaeLabel;case"std":return r.STDLabel;case"blood":return r.BloodLabel;case"derma":return r.DermaLabel;case"screening":return r.ScreeningLabel;default:return r.DefaultLabel}},d=o.a.useState(25),s=Object(l.a)(d,2),u=(s[0],s[1],Object(i.useState)(!1)),j=Object(l.a)(u,2),b=j[0],p=j[1],h=o.a.useState(new Date((new Date).getTime()-6048e5)),x=Object(l.a)(h,2),g=x[0],f=x[1],m=o.a.useState(new Date((new Date).getTime()-864e5)),O=Object(l.a)(m,2),y=O[0],v=O[1],k=Object(i.useState)(Dn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),S=Object(l.a)(k,2),B=S[0],w=S[1],N=Object(i.useState)(Dn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(N,2),I=D[0],P=D[1],A=Object(i.useState)(!1),F=Object(l.a)(A,2),W=F[0],_=F[1],E=Object(i.useState)(!0),z=Object(l.a)(E,2),H=z[0],G=z[1],V=Object(i.useState)(!0),X=Object(l.a)(V,2),$=X[0],Q=X[1],Z=Object(i.useState)(!0),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!0),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=le[0],se=le[1],ue=Object(i.useState)(!0),je=Object(l.a)(ue,2),be=je[0],pe=je[1],he=Object(i.useState)(!0),xe=Object(l.a)(he,2),ge=xe[0],fe=xe[1],me=Object(i.useState)(!0),Oe=Object(l.a)(me,2),ve=Oe[0],ke=Oe[1],Ce=Object(i.useState)(!0),Se=Object(l.a)(Ce,2),Be=Se[0],we=Se[1],Te=Object(i.useState)(!0),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=function(e){var t=e;return["Mr","Mrs","Miss","Ms","Dr"].forEach((function(n){0===e.indexOf("".concat(n," "))&&(t=e.substring(n.length))})),t},Ie=function(e){if(!e)return"NONE";switch(e){case"credit card":return"C/CARD";case"cash":return"CASH";case"corporate":return"CORP";default:return"OTHERS"}};n=[{field:"_id",headerName:"Invoice #",width:130,renderCell:function(e){return Object(a.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){return st(t,e.value,e.getValue("clinic"))},children:[Object(a.jsx)("span",{style:{minWidth:"60px",color:"#00a1c5",display:"inline-block"},children:e.getValue("invoiceNumber")}),Object(a.jsx)(q.a,{color:"primary",children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"Date",width:100,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:lt(e.value)})}},{field:"grandTotal",headerName:"Fee",align:"center",width:140,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#067500"},children:parseFloat(e.value).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})}},{field:"name",headerName:"Patient Name",width:200,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:Le(e.value)})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:c(e.value),style:{fontSize:"0.8rem"},children:e.value?e.value.toUpperCase():"N/A"})}},{field:"booking.paidBy",headerName:"Payment",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:Ie(e.getValue("booking").paidBy)})}},{field:"booking.corporate",headerName:"Corporate",align:"center",width:150,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:e.getValue("booking").corporate||""})}}];var Pe=o.a.useContext(C),Ae=Object(l.a)(Pe,2),Fe=(Ae[0],Ae[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(null),ze=Object(l.a)(Me,2),He=(ze[0],ze[1]),Ge=o.a.useState(null),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(!1),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(!1),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=Object(i.useState)(ec[0]),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(""),ot=Object(l.a)(it,2),rt=ot[0],ct=ot[1],lt=(Object(i.useRef)(),function(e){return Dn(e,"dd-mm-yyyy")}),dt=function(){var e=vf.searchAllInvoicesByName;Ee({bookings:[],cachedBookings:[],isFetching:!0});e(rt).then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});Ee({bookings:Object(Ut.a)(e.data.result),cachedBookings:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))},st=function(e,t,n){var a=_e.bookings.find((function(e){return e._id===t}));Ve(a),Xe(!0)},ut=o.a.useState(1),jt=Object(l.a)(ut,2),bt=jt[0],pt=jt[1],ht=o.a.useState(!1),xt=Object(l.a)(ht,2),gt=xt[0],ft=xt[1],mt=function(){!rt||rt.trim().length<3?ft(!0):dt()};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:gt,variant:"standard",value:rt,onChange:function(e){ct(e.target.value),ft(!1)},id:"filter",label:"Patient's Name / Invoice#",helperText:"You can search the invoices by patient's name or Invoice Number ".concat(gt?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{maxWidth:"450px"},onKeyPress:function(e){"Enter"===e.key&&mt()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:mt,children:"Search in the invoices"})}),Object(a.jsx)(K.a,{item:!0,children:_e.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(J.a,{color:"primary"})})})]})})}),_e.isFetching&&Object(a.jsx)("div",{className:r.HideNowRows})]}),_e.bookings&&_e.bookings.length>0&&Object(a.jsx)("div",{className:r.Summary,children:Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-between",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total Records :"}),Object(a.jsx)("span",{children:null===(t=_e.bookings)||void 0===t?void 0:t.length})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total FEE :"}),Object(a.jsx)("span",{children:parseFloat(function(e){var t=0;return e.forEach((function(e){t+=e.grandTotal})),t}(_e.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})]})}),_e.bookings&&_e.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"0px"},children:Object(a.jsx)(Yt.a,{rows:_e.bookings,columns:n,autoPageSize:!0,page:bt,onPageChange:function(e){pt(e.page)},onSelectionChange:function(e){e.length>0&&He(e.rows[0])}})}),Object(a.jsx)(Sf,{booking:Ye,invoice:Ye,open:qe,handleClose:function(){Ve(null),Xe(!1),Ze(!1)}}),_e.bookings&&_e.bookings.length>0&&Object(a.jsxs)(qt.a,{maxWidth:"lg",open:b,onClose:function(){at(ec[0]),_(!1),p(!1)},PaperComponent:wf,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Xt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:$n.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)($t.a,{})]}),Object(a.jsx)(Qt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Zt.a,{checked:W,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),W&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:r.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:nt,onChange:function(e){at(e.target.value)},children:ec.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Zn.a,{utils:Qn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),w(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:y,onChange:function(e){v(e),P(Dn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(ia.a,{id:"test-table-xls-button",className:r.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(I),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:be,onChange:function(e){pe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ge,onChange:function(e){fe(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ve,onChange:function(e){ke(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Be,onChange:function(e){we(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:De,onChange:function(e){Re(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:r.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:r.th,children:"Date"}),$&&Object(a.jsx)("th",{className:r.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:r.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:r.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:r.th,children:"Email"}),be&&Object(a.jsx)("th",{className:r.th,children:"Tel"}),ge&&Object(a.jsx)("th",{className:r.th,children:"Certificate"}),ve&&Object(a.jsx)("th",{className:r.th,children:"AntiBodyTest"}),Be&&Object(a.jsx)("th",{className:r.th,children:"Lab No."}),De&&Object(a.jsx)("th",{className:r.th,children:"Price (\xa3) "})]}),_e.bookings.filter((function(e){return W?e.bookingDate>=B&&e.bookingDate<=I&&e.paid&&"corporate"===e.paidBy&&e.corporate===nt:e.bookingDate>=B&&e.bookingDate<=I})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:r.td,children:Object($i.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:r.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:r.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:r.th}),de&&Object(a.jsx)("td",{className:r.td,children:e.email}),be&&Object(a.jsx)("td",{className:r.td,children:e.phone}),ge&&Object(a.jsx)("td",{className:r.td,children:e.certificate?"YES":"NO"}),ve&&Object(a.jsx)("td",{className:r.td,children:e.antiBodyTest?"YES":"NO"}),Be&&Object(a.jsx)("td",{className:r.td,children:e.extRef}),De&&Object(a.jsx)("td",{className:r.td,children:Zr.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Nf=n(672),Df=n.n(Nf),Rf=n(673),Lf=n.n(Rf),If=Object(N.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Fn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Fn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Fn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Fn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Fn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Fn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Fn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Fn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},Summary:{marginTop:"10px",padding:"15px 30px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#333",color:"#fff",fontWeight:"500",fontSize:"1rem"}}}));function Pf(e){var t,n=If(),r=o.a.useState([]),c=Object(l.a)(r,2),d=c[0],s=c[1];o.a.useEffect((function(){j()}),[]);var u,j=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn();case 3:t=e.sent,s(t),at(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.DefaultLabel}},p=o.a.useState(25),h=Object(l.a)(p,2),x=(h[0],h[1],Object(i.useState)(!1)),g=Object(l.a)(x,2),f=(g[0],g[1],o.a.useState("all")),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=k[0],N=k[1],D=o.a.useState(null),L=Object(l.a)(D,2),I=L[0],P=L[1],A=o.a.useState(!1),F=Object(l.a)(A,2),W=F[0],_=F[1],E=o.a.useState(!1),H=Object(l.a)(E,2),G=H[0],Y=H[1],V=Object(i.useState)(""),X=Object(l.a)(V,2),$=X[0],Q=X[1],Z=Object(i.useState)(""),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(!1),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],ce=Object(i.useState)(!0),le=Object(l.a)(ce,2),de=(le[0],le[1],Object(i.useState)(!0)),se=Object(l.a)(de,2),ue=(se[0],se[1],Object(i.useState)(!0)),je=Object(l.a)(ue,2),be=(je[0],je[1],Object(i.useState)(!0)),pe=Object(l.a)(be,2),he=(pe[0],pe[1],Object(i.useState)(!0)),xe=Object(l.a)(he,2),ge=(xe[0],xe[1],Object(i.useState)(!0)),fe=Object(l.a)(ge,2),me=(fe[0],fe[1],Object(i.useState)(!0)),Oe=Object(l.a)(me,2),ve=(Oe[0],Oe[1],Object(i.useState)(!0)),ke=Object(l.a)(ve,2),Ce=(ke[0],ke[1],Object(i.useState)(!0)),Se=Object(l.a)(Ce,2),Be=(Se[0],Se[1],Object(i.useState)(!0)),we=Object(l.a)(Be,2),Te=(we[0],we[1],function(e){var t=e;return["Mr","Mrs","Miss","Ms","Dr"].forEach((function(n){0===e.indexOf("".concat(n," "))&&(t=e.substring(n.length))})),t}),Ne=function(e){if(!e)return"NONE";switch(e){case"credit card":return"C/CARD";case"cash":return"CASH";case"corporate":return"CORP";default:return"OTHERS"}};u=[{field:"_id",headerName:"Invoice #",width:130,renderCell:function(e){return Object(a.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){return lt(t,e.value,e.getValue("clinic"))},children:[Object(a.jsx)("span",{style:{minWidth:"60px",color:"#00a1c5",display:"inline-block"},children:e.getValue("invoiceNumber")}),Object(a.jsx)(q.a,{color:"primary",children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"Date",width:100,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:rt(e.value)})}},{field:"grandTotal",headerName:"Fee",align:"center",width:140,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#067500"},children:parseFloat(e.value).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})}},{field:"name",headerName:"Patient Name",width:200,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:Te(e.value)})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:b(e.value),style:{fontSize:"0.8rem"},children:e.value?e.value.toUpperCase():"N/A"})}},{field:"booking.paidBy",headerName:"Payment",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:Ne(e.getValue("booking").paidBy)})}},{field:"booking.corporate",headerName:"Corporate",align:"center",width:150,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:e.getValue("booking").corporate||""})}}];var De=o.a.useState(!1),Re=Object(l.a)(De,2),Le=Re[0],Ie=Re[1],Pe=o.a.useContext(C),Ae=Object(l.a)(Pe,2),Fe=(Ae[0],Ae[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),We=Object(l.a)(Fe,2),_e=We[0],Ee=We[1],Me=o.a.useState(null),ze=Object(l.a)(Me,2),He=(ze[0],ze[1]),Ge=o.a.useState(null),Ue=Object(l.a)(Ge,2),Ye=Ue[0],Ve=Ue[1],Ke=o.a.useState(!1),Je=Object(l.a)(Ke,2),qe=Je[0],Xe=Je[1],$e=o.a.useState(!1),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=Object(i.useState)(d[0]),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],it=o.a.useState(""),ot=Object(l.a)(it,2),rt=(ot[0],ot[1],Object(i.useRef)(),function(e){return Dn(e,"dd-mm-yyyy")}),ct=function(){var e=vf.searchAllInvoicesByDate;Ee({bookings:[],cachedBookings:[],isFetching:!0});e({from:S,until:I,clinic:O,corporate:oe?nt:null}).then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});Ee({bookings:Object(Ut.a)(e.data.result),cachedBookings:Object(Ut.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))},lt=function(e,t,n){var a=_e.bookings.find((function(e){return e._id===t}));Ve(a),Xe(!0)},dt=o.a.useState(1),st=Object(l.a)(dt,2),ut=st[0],jt=st[1],bt=o.a.useState(!1),pt=Object(l.a)(bt,2),ht=(pt[0],pt[1],function(e){var t=0;return e.forEach((function(e){t+=e.grandTotal})),t}),xt=function(){var e=Object(w.a)(B.a.mark((function e(){var t,n,a,i,o,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Ie(!0),t=new Df.a.Workbook,(n=t.addWorksheet()).properties.defaultRowHeight=15,n.properties.defaultColWidth=15,n.getRow(1).getCell(1).value="MEDICAL EXPRESS CLINIC PERIODIC REPORT : ".concat($," | ").concat(te),(a=n.getRow(2)).getCell(1).value="TOTAL RECORDS :",a.getCell(2).value="".concat(_e.bookings.length),a.getCell(2).font={name:"Calibri",family:4,size:14,bold:!0},(i=n.getRow(3)).getCell(1).value="TOTAL FEE :",i.getCell(2).value="".concat(parseFloat(ht(_e.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})),i.getCell(2).font={name:"Calibri",family:4,size:14,bold:!0},(o=n.getRow(5)).height=25,["Invoice #","Date","Fee","Patient Name","Clinic","Payment","Corporate"].forEach((function(e,t){o.getCell(t+1).value=e,o.getCell(t+1).font={name:"Calibri",family:4,size:10,bold:!0}})),6,_e.bookings&&_e.bookings.length>0&&_e.bookings.forEach((function(e,t){n.getRow(6+t).height=30,n.getRow(6+t).getCell(1).value=e.invoiceNumber,n.getRow(6+t).getCell(1).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(2).value=Dn(e.timeStamp,"dd/mm/yyyy"),n.getRow(6+t).getCell(2).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(3).value="".concat(parseFloat(e.grandTotal).toLocaleString("en-GB",{style:"currency",currency:"GBP"})),n.getRow(6+t).getCell(3).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(4).value=Te(e.name).toUpperCase(),n.getRow(6+t).getCell(4).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(5).value=e.clinic.toUpperCase(),n.getRow(6+t).getCell(5).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(6).value=Ne(e.booking.paidBy).toUpperCase(),n.getRow(6+t).getCell(6).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(7).value=e.booking.corporate,n.getRow(6+t).getCell(7).font={name:"Calibri",family:4,size:12,bold:!1}})),e.next=24,t.xlsx.writeBuffer();case 24:r=e.sent,Lf()(new Blob([r]),"MEDEX-REPORT-".concat(O.toUpperCase(),"-").concat($,"-").concat(te,".xlsx")),Ie(!1),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0),Ie(!1);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(Zn.a,{utils:Qn.a,children:[Object(a.jsx)("div",{style:{padding:"0px 10px 20px 10px",border:"2px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{error:W,autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"From",value:S,onChange:function(e){e&&"Invalid Date"!==e.toString()?(N(e),Q(Dn(e,"yyyy-mm-dd")),_(!1)):Q("")},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ea.a,{error:G,autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:I,onChange:function(e){e&&"Invalid Date"!==e.toString()?(P(e),ne(Dn(e,"yyyy-mm-dd")),Y(!1)):ne("")},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{style:{marginTop:"5px",width:"150px"},children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Clinic"}),Object(a.jsxs)(Kt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:O,onChange:function(e){return y(e.target.value)},children:[Object(a.jsx)(Jt.a,{value:"all",children:"All Clinics"}),Object(a.jsx)(Jt.a,{value:"pcr",children:"PCR"}),Object(a.jsx)(Jt.a,{value:"gynae",children:"Gynae"}),Object(a.jsx)(Jt.a,{value:"gp",children:"GP"}),Object(a.jsx)(Jt.a,{value:"std",children:"STD"}),Object(a.jsx)(Jt.a,{value:"blood",children:"Blood"}),Object(a.jsx)(Jt.a,{value:"screening",children:"Screening"}),Object(a.jsx)(Jt.a,{value:"corporate",children:"Corporate"}),Object(a.jsx)(Jt.a,{value:"derma",children:"Derma"})]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{style:{marginTop:"30px"},control:Object(a.jsx)(Zt.a,{checked:oe,onChange:function(e){re(e.target.checked)},name:"justCorporate"}),label:"Corporate"})}),oe&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"20px",width:"150px"},className:n.formControl,children:Object(a.jsx)(Kt.a,{labelId:"select-corporate",id:"select-corporate-id",value:nt,onChange:function(e){at(e.target.value)},children:d.map((function(e){return Object(a.jsx)(Jt.a,{value:e,children:"".concat(e)})}))})})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(R.a,{disabled:_e.isFetching,fullWidth:!0,style:{marginTop:"0px"},variant:"contained",color:"primary",onClick:function(){(function(){var e=!1;return $||(_(!0),e=!0),te||(Y(!0),e=!0),!e})()&&ct()},children:"Generate Report"})}),_e.isFetching&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"0px"},children:Object(a.jsx)(J.a,{color:"primary"})})}),!_e.isFetching&&_e.bookings&&_e.bookings.length>0&&Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Le,className:n.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){xt()},startIcon:Object(a.jsx)(Xn.a,{style:{color:"#009900"},icon:$n.a}),children:"Save as Excel file"})})})]})}),_e.bookings&&_e.bookings.length>0&&Object(a.jsx)("div",{className:n.Summary,children:Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-between",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total Records :"}),Object(a.jsx)("span",{children:null===(t=_e.bookings)||void 0===t?void 0:t.length})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total FEE :"}),Object(a.jsx)("span",{style:{fontWeight:"700"},children:parseFloat(ht(_e.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})]})}),_e.bookings&&_e.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"0px"},children:Object(a.jsx)(Yt.a,{rows:_e.bookings,columns:u,autoPageSize:!0,page:ut,onPageChange:function(e){jt(e.page)},onSelectionChange:function(e){e.length>0&&He(e.rows[0])}})}),Object(a.jsx)(Sf,{booking:Ye,invoice:Ye,open:qe,handleClose:function(){Ve(null),Xe(!1),Ze(!1)}})]})})}function Af(){var e=o.a.useState(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=o.a.useState(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState(!1),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState(!1),g=Object(l.a)(x,2),f=g[0],m=g[1];Object(i.useEffect)((function(){O()}),[]);var O=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yn.getCorporates();case 3:"OK"===(t=e.sent).data.status&&(r(t.data.result),h(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(w.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,yn.updateCorporates(n);case 4:u(!1),m(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),u(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(o.a.Fragment,{children:p&&Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(_.a,{severity:"info",style:{fontSize:"1rem"},children:"Please enter each corporate in a new line."})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(L.a,{disabled:s,value:n,onChange:function(e){r(e.target.value)},multiline:!0,rows:20,label:"Corporates List",fullWidth:!0,variant:"outlined",inputProps:{style:{lineHeight:"1.8rem"}}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s,variant:"contained",color:"primary",onClick:y,children:"Save Changes"})}),s&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"0px"},children:Object(a.jsx)(J.a,{color:"primary"})})}),f&&!s&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{children:Object(a.jsx)(_.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"500"},children:"Success! - Your changes have been saved successfully."})})})]})})]})})}var Ff=n(674),Wf=n.n(Ff),_f=n(675),Ef=n.n(_f),Mf=n(1285),zf=n(1286),Hf=n(388),Gf=n(676),Uf=Object(N.a)((function(e){return{Title:{fontSize:"1.5rem",color:e.palette.primary.main,fontWeight:"500",width:"100%",textAlign:"center"},Arrow:{fontSize:"2rem",color:e.palette.primary.main,fontWeight:"500"},ArrowRight:{fontSize:"2rem",color:e.palette.primary.main,fontWeight:"500"},TotalAmount:{fontSize:"1.5rem",backgroundColor:e.palette.primary.dark,fontWeight:"500",width:"100%",textAlign:"center",padding:"10px",color:"#fff",borderRadius:"8px",letterSpacing:"5px"},content:{fontSize:"1rem",color:"#777",fontWeight:"500"},primaryColor:{color:e.palette.primary.main,fontWeight:"500"}}}));function Yf(e){var t=Uf(),n=o.a.useContext(C),r=Object(l.a)(n,2),c=(r[0],r[1],o.a.useState(e.defaultMonth||Rn()(new Date,"mmmm-yyyy"))),d=Object(l.a)(c,2),s=d[0],u=d[1],j=o.a.useState([]),b=Object(l.a)(j,2),p=b[0],h=b[1],x=o.a.useState([]),g=Object(l.a)(x,2),f=g[0],m=g[1],O=o.a.useState(0),y=Object(l.a)(O,2),v=y[0],k=y[1];Object(i.useEffect)((function(){T()}),[]),Object(i.useEffect)((function(){p&&p.length>0&&S()}),[s,p]);var S=function(){var e=p[N()]?p[N()].data:{pcr:0,gynae:0,gp:0,std:0,blood:0,screening:0,corporate:0,derma:0},t=[];t.push({name:"PCR",Income:e.pcr}),t.push({name:"GYNAE",Income:e.gynae}),t.push({name:"GP",Income:e.gp}),t.push({name:"STD",Income:e.std}),t.push({name:"BLOOD",Income:e.blood}),t.push({name:"SCREENING",Income:e.screening}),t.push({name:"CORPORATE",Income:e.corporate}),t.push({name:"DERMA",Income:e.derma}),m(t)},T=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vf.getInvoiceReports();case 3:t=e.sent,h(JSON.parse(t.data.result)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){return p.findIndex((function(e){return e.month===s}))},D=function(e){switch(e){case 0:return Fn.PCR_COLOR;case 1:return Fn.GYNAE_COLOR;case 2:return Fn.GP_COLOR;case 3:return Fn.STD_COLOR;case 4:return Fn.BLOOD_COLOR;case 5:return Fn.SCREENING_COLOR;case 6:return Fn.CORPORATE_COLOR;case 7:return Fn.DERMA_COLOR;default:return"#777"}};return Object(a.jsx)(o.a.Fragment,{children:p&&p.length>0&&f&&f.length>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{width:"100%"},children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(Bt.a,{title:"Previous Month",children:Object(a.jsx)(q.a,{onClick:function(){var e=p.findIndex((function(e){return e.month===s}));e>0&&u(p[e-1].month)},disabled:0===N(),children:Object(a.jsx)(Wf.a,{className:t.Arrow,style:0===N()?{color:"#ddd"}:{}})})})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)("div",{className:t.Title,children:s.replace("-"," ")})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:Object(a.jsx)(Bt.a,{title:"Next Month",children:Object(a.jsx)(q.a,{onClick:function(){var e=p.findIndex((function(e){return e.month===s}));e<p.length-1&&u(p[e+1].month)},disabled:N()===p.length-1,children:Object(a.jsx)(Ef.a,{className:t.ArrowRight,style:N()===p.length-1?{color:"#ddd"}:{}})})})})})]}),Object(a.jsx)("div",{className:t.TotalAmount,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,justify:"center",alignItems:"center",style:{width:"100%"},children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{fontSize:"0.95rem",letterSpacing:"1px",color:"#f1f1f1"},children:"Total Income:"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:p[N()]?"".concat(parseFloat(p[N()].data.total).toLocaleString("en-GB",{style:"currency",currency:"GBP"})):"\xa30.00"})]})}),Object(a.jsx)("div",{style:{marginTop:"30px"},children:Object(a.jsx)(ua.a,{width:"100%",height:300,children:Object(a.jsxs)(Mf.a,{width:900,height:300,data:f,children:[Object(a.jsx)(zf.a,{strokeDasharray:"3 3"}),Object(a.jsx)(ba.a,{dataKey:"name"}),Object(a.jsx)(pa.a,{}),Object(a.jsx)(Hf.a,{}),Object(a.jsx)(Gf.a,{dataKey:"Income",onClick:function(e,t){k(t)},children:f.map((function(e,t){return Object(a.jsx)(Aa.a,{cursor:"pointer",fill:D(t)},"cell-".concat(t))}))})]})})}),Object(a.jsxs)("p",{className:t.content,children:['Income of "'.concat(f[v].name,'":')," ",Object(a.jsxs)("span",{className:t.primaryColor,children:[" ","".concat(parseFloat(f[v].Income).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))]})," "]}),Object(a.jsx)("span",{style:{color:"#777"},children:"* Click on each bar to view the details."})]})})}var Vf=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{}}}));function Kf(){var e=Vf(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,spacing:3,children:Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:i,children:Object(a.jsx)(Yf,{defaultMonth:"".concat(Rn()(function(){var e=new Date;return new Date(e.getTime()-24*(e.getDate()+1)*60*60*1e3)}(),"mmmm-yyyy"))})})})})})}var Jf=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{}),doctorHide:!0},{index:1,id:"periodicReport",title:"Periodic Report",icon:Object(a.jsx)(Ee.a,{}),doctorHide:!0},{index:2,id:"searchInvoices",title:"Search Invoices",icon:Object(a.jsx)(ye.a,{}),doctorHide:!0},{index:3,id:"corporates",title:"Corporates List",icon:Object(a.jsx)(ut.a,{}),doctorHide:!0}],qf=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{}),doctorHide:!0},{index:1,id:"paymentsTable",title:"Payment Links",icon:Object(a.jsx)(Yg.a,{}),doctorHide:!0},{index:2,id:"paidpaymentsTable",title:"Successful Payments",icon:Object(a.jsx)(ot.a,{}),doctorHide:!0},{index:3,id:"latepaymentsTable",title:"4 Hours Late",icon:Object(a.jsx)(Ae.a,{}),doctorHide:!0},{index:4,id:"notyetPaid",title:"Not Yet Paid",icon:Object(a.jsx)(ct.a,{}),doctorHide:!0},{index:5,id:"refundpaymentsTable",title:"Refunded Payments",icon:Object(a.jsx)(at.a,{}),doctorHide:!0},{index:6,id:"deletedpaymentsTable",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{}),doctorHide:!0}],Xf=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"systemCodes",title:"System Codes",icon:Object(a.jsx)(Ke.a,{})},{index:11,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:12,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],$f=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:11,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:12,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],Qf=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:11,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:12,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],Zf=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(we.a,{})},{index:5,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:6,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:7,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:8,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:9,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:10,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:11,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:12,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:13,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:14,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],em=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(we.a,{})},{index:5,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:6,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:7,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:8,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:9,id:"bloodMatchedRecords",title:"Matched Results",icon:Object(a.jsx)(ot.a,{})},{index:10,id:"bloodUnatchedRecords",title:"Unmatched Results",icon:Object(a.jsx)(Ne.a,{})},{index:11,id:"bloodArchived",title:"Archived Results",icon:Object(a.jsx)(Ge.a,{})},{index:12,id:"bloodSent",title:"Sent Results",icon:Object(a.jsx)(Ze.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:14,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:15,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:16,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:17,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:18,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],tm=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:5,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:6,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:7,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(we.a,{})},{index:8,id:"positiveBookings",title:"Positive Results",icon:Object(a.jsx)(Re.a,{})},{index:9,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ae.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:11,id:"trBookings",title:"TR Bookings",icon:Object(a.jsx)(ze.a,{})},{index:12,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(Ne.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:15,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:16,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:17,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:18,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:19,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],nm=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:11,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:12,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],am=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"pendingBookings",title:"Pending Bookings",icon:Object(a.jsx)(dt.a,{})},{index:2,id:"tbcBookings",title:"Patients TBC",icon:Object(a.jsx)(Ye.a,{})},{index:3,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:4,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:5,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:6,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(we.a,{})},{index:7,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:8,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:9,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:11,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:12,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:13,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:14,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:15,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:16,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],im=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ue.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(be.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(ge.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ie.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"offDays",title:"Off Days",icon:Object(a.jsx)(qe.a,{}),doctorHide:!0},{index:11,id:"workingHours",title:"Working Hours",icon:Object(a.jsx)($e.a,{}),doctorHide:!0},{index:12,id:"searchPatients",title:"Search Patients",icon:Object(a.jsx)(bt.a,{})}],om=[{index:0,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:1,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ae.a,{})},{index:2,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(Ne.a,{})},{index:3,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(We.a,{})}],rm=function(e,t){if("pcr"===e)switch(t){case 0:return Object(a.jsx)(Ha,{});case 1:return Object(a.jsx)(da,{date:"recent"});case 2:return Object(a.jsx)(da,{date:"today"});case 3:return Object(a.jsx)(da,{date:"live"});case 4:return Object(a.jsx)(da,{date:"old"});case 5:return Object(a.jsx)(da,{date:"future"});case 6:return Object(a.jsx)(da,{date:"all"});case 7:return Object(a.jsx)(da,{date:"completed"});case 8:return Object(a.jsx)(da,{date:"positive"});case 9:return Object(a.jsx)(da,{date:"late"});case 10:return Object(a.jsx)(da,{date:"deleted"});case 11:return Object(a.jsx)(da,{date:"tr"});case 12:return Object(a.jsx)(ni,{});case 13:return Object(a.jsx)(Ni,{});case 15:return Object(a.jsx)(Ht,{});case 16:return Object(a.jsx)(bg,{});case 17:return Object(a.jsx)(Hi,{});case 18:return Object(a.jsx)(Ui,{});case 19:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("pcrlab"===e)switch(t){case 0:return Object(a.jsx)(da,{date:"live"});case 1:return Object(a.jsx)(da,{date:"late"});case 2:return Object(a.jsx)(ni,{});case 3:return Object(a.jsx)(Ni,{});default:return"Page Not Found!"}else if("gynae"===e)switch(t){case 0:return Object(a.jsx)(Pc,{});case 1:return Object(a.jsx)(yc,{date:"recent"});case 2:return Object(a.jsx)(yc,{date:"today"});case 3:return Object(a.jsx)(yc,{date:"old"});case 4:return Object(a.jsx)(yc,{date:"future"});case 5:return Object(a.jsx)(yc,{date:"all"});case 6:return Object(a.jsx)(yc,{date:"deleted"});case 7:return Object(a.jsx)(bl,{});case 8:return Object(a.jsx)(Mc,{});case 9:return Object(a.jsx)(bg,{});case 10:return Object(a.jsx)(Bl,{});case 11:return Object(a.jsx)(Tl,{});case 12:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("gp"===e)switch(t){case 0:return Object(a.jsx)(Vl,{});case 1:return Object(a.jsx)(Il,{date:"recent"});case 2:return Object(a.jsx)(Il,{date:"today"});case 3:return Object(a.jsx)(Il,{date:"old"});case 4:return Object(a.jsx)(Il,{date:"future"});case 5:return Object(a.jsx)(Il,{date:"all"});case 6:return Object(a.jsx)(Il,{date:"deleted"});case 7:return Object(a.jsx)(vd,{});case 8:return Object(a.jsx)(Ql,{});case 9:return Object(a.jsx)(bg,{});case 10:return Object(a.jsx)(Ad,{});case 11:return Object(a.jsx)(Wd,{});case 12:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("std"===e)switch(t){case 0:return Object(a.jsx)(ts,{});case 1:return Object(a.jsx)(Hd,{date:"recent"});case 2:return Object(a.jsx)(Hd,{date:"today"});case 3:return Object(a.jsx)(Hd,{date:"live"});case 4:return Object(a.jsx)(Hd,{date:"completed"});case 5:return Object(a.jsx)(Hd,{date:"old"});case 6:return Object(a.jsx)(Hd,{date:"future"});case 7:return Object(a.jsx)(Hd,{date:"all"});case 8:return Object(a.jsx)(Hd,{date:"deleted"});case 9:return Object(a.jsx)(As,{});case 10:return Object(a.jsx)(cs,{});case 11:return Object(a.jsx)(bg,{});case 12:return Object(a.jsx)(Js,{});case 13:return Object(a.jsx)(Xs,{});case 14:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("blood"===e)switch(t){case 0:return Object(a.jsx)(pu,{});case 1:return Object(a.jsx)(tu,{date:"recent"});case 2:return Object(a.jsx)(tu,{date:"today"});case 3:return Object(a.jsx)(tu,{date:"live"});case 4:return Object(a.jsx)(tu,{date:"completed"});case 5:return Object(a.jsx)(tu,{date:"old"});case 6:return Object(a.jsx)(tu,{date:"future"});case 7:return Object(a.jsx)(tu,{date:"all"});case 8:return Object(a.jsx)(tu,{date:"deleted"});case 9:return Object(a.jsx)(rj,{});case 10:return Object(a.jsx)(ej,{});case 11:return Object(a.jsx)(jj,{});case 12:return Object(a.jsx)(gj,{});case 13:return Object(a.jsx)(Ju,{});case 14:return Object(a.jsx)(Ou,{});case 15:return Object(a.jsx)(bg,{});case 16:return Object(a.jsx)(Dj,{});case 17:return Object(a.jsx)(Lj,{});case 18:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("admin"===e)switch(t){case 0:return Object(a.jsx)(Rx,{});case 1:return Object(a.jsx)(Ex,{date:"recent"});case 2:return Object(a.jsx)(Ex,{date:"today"});case 3:return Object(a.jsx)(Ex,{date:"old"});case 4:return Object(a.jsx)(Ex,{date:"future"});case 5:return Object(a.jsx)(Ex,{date:"all"});case 6:return Object(a.jsx)(Ex,{date:"deleted"});case 7:return Object(a.jsx)(sg,{});case 8:return Object(a.jsx)(Ax,{});case 9:return Object(a.jsx)(bg,{});case 10:return Object(a.jsx)(vg,{});case 11:return Object(a.jsx)(Ag,{});case 12:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("derma"===e)switch(t){case 0:return Object(a.jsx)(Xj,{});case 1:return Object(a.jsx)(Wj,{date:"recent"});case 2:return Object(a.jsx)(Wj,{date:"today"});case 3:return Object(a.jsx)(Wj,{date:"old"});case 4:return Object(a.jsx)(Wj,{date:"future"});case 5:return Object(a.jsx)(Wj,{date:"all"});case 6:return Object(a.jsx)(Wj,{date:"deleted"});case 7:return Object(a.jsx)(wb,{});case 8:return Object(a.jsx)(nb,{});case 9:return Object(a.jsx)(bg,{});case 10:return Object(a.jsx)(Mb,{});case 11:return Object(a.jsx)(Hb,{});case 12:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("payment"===e)switch(t){case 0:return Object(a.jsx)(Of,{});case 1:return Object(a.jsx)(rf,{date:"all"});case 2:return Object(a.jsx)(rf,{date:"paid"});case 3:return Object(a.jsx)(rf,{date:"late"});case 4:return Object(a.jsx)(rf,{date:"notpaid"});case 5:return Object(a.jsx)(rf,{date:"refund"});case 6:return Object(a.jsx)(rf,{date:"deleted"});default:return"Page Not Found!"}else if("screening"===e)switch(t){case 0:return Object(a.jsx)(rp,{});case 1:return Object(a.jsx)(Kb,{date:"pending"});case 2:return Object(a.jsx)(Kb,{date:"tbc"});case 3:return Object(a.jsx)(Kb,{date:"recent"});case 4:return Object(a.jsx)(Kb,{date:"today"});case 5:return Object(a.jsx)(Kb,{date:"live"});case 6:return Object(a.jsx)(Kb,{date:"completed"});case 7:return Object(a.jsx)(Kb,{date:"old"});case 8:return Object(a.jsx)(Kb,{date:"future"});case 9:return Object(a.jsx)(Kb,{date:"all"});case 10:return Object(a.jsx)(Kb,{date:"deleted"});case 11:return Object(a.jsx)(Wp,{});case 12:return Object(a.jsx)(jp,{});case 13:return Object(a.jsx)(bg,{});case 14:return Object(a.jsx)(Xp,{});case 15:return Object(a.jsx)(Qp,{});case 16:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else if("corporate"===e)switch(t){case 0:return Object(a.jsx)(xh,{});case 1:return Object(a.jsx)(ah,{date:"recent"});case 2:return Object(a.jsx)(ah,{date:"today"});case 3:return Object(a.jsx)(ah,{date:"old"});case 4:return Object(a.jsx)(ah,{date:"future"});case 5:return Object(a.jsx)(ah,{date:"all"});case 6:return Object(a.jsx)(ah,{date:"deleted"});case 7:return Object(a.jsx)(Kh,{});case 8:return Object(a.jsx)(vh,{});case 9:return Object(a.jsx)(bg,{});case 10:return Object(a.jsx)(rx,{});case 11:return Object(a.jsx)(lx,{});case 12:return Object(a.jsx)(hg,{});default:return"Page Not Found!"}else{if("reports"!==e)return"Page Not Found!";switch(t){case 0:return Object(a.jsx)(Kf,{});case 1:return Object(a.jsx)(Pf,{});case 2:return Object(a.jsx)(Tf,{});case 3:return Object(a.jsx)(Af,{});default:return"Page Not Found!"}}},cm=function(e){switch(e){case"admin":return Xf;case"pcr":return tm;case"pcrlab":return om;case"gynae":return $f;case"gp":return Qf;case"std":return Zf;case"blood":return em;case"derma":return nm;case"payment":return qf;case"screening":return am;case"corporate":return im;case"reports":return Jf;default:return[]}},lm=function(e,t){for(var n=cm(e),a=0;a<n.length;a++)if(n[a].index===t)return n[a].id;return"Page Not Found!"},dm=function(e,t){for(var n=cm(e),a=0;a<n.length;a++)if(n[a].id===t)return n[a].index;return-1},sm=n(385),um=Object(N.a)((function(e){return{root:{minHeight:"100vh"},image:{backgroundImage:"url(/images/bg.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{padding:e.spacing(4,4),display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"#f5f5f5"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},alert:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},pageBg:{paddingTop:e.spacing(15),background:"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)",height:"100vh",margin:0,padding:0},appbarCenter:{position:"absolute",top:"-40px",right:"0",marginLeft:"-145px",alignItems:"center",justify:"center",display:"flex",backgroundColor:"#fff",padding:"5px 20px 15px 20px",borderRadius:"8px"},logoImage:{width:"30px",height:"30px",marginLeft:"0px"},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},adminPanelLabel:{color:e.palette.primary.main,marginBottom:"20px"}}}));function jm(){var e=um(),t=o.a.useContext(C),n=Object(l.a)(t,2),i=(n[0],n[1]),r=(Object(sm.useMediaQuery)({maxWidth:1224}),Object(te.d)()),c=o.a.useState(""),d=Object(l.a)(c,2),u=d[0],j=d[1],b=o.a.useState(""),p=Object(l.a)(b,2),h=p[0],x=p[1],g=o.a.useState(!1),f=Object(l.a)(g,2),m=f[0],O=f[1],y=o.a.useState(!1),v=Object(l.a)(y,2),k=v[0],S=v[1],B=o.a.useState(null),w=Object(l.a)(B,2),N=w[0],P=w[1],Z=o.a.useState(!1),ne=Object(l.a)(Z,2),ae=ne[0],ie=ne[1],oe=function(){ie(!0),de.signIn({username:h,password:u}).then((function(e){if(ie(!1),"OK"===e.data.status){P(null);var t=e.data.token;m?localStorage.setItem("medexadmin-auth-token",t):sessionStorage.setItem("medexadmin-auth-token",t),i((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0})})),yx(e.data.roles[0]),console.log(e.data.isDoctor),an(e.data.isDoctor),console.log(e.data.isDoctor,nn()),i((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:0})})),r.push(ce("/".concat(lm(e.data.roles[0],0))))}else"FAILED"===e.data.status?P(e.data.error):P("Sorry, something went wrong, please try again.")})).catch((function(e){ie(!1),console.error(e),P("Sorry, something went wrong, please try again.")}))};return Object(a.jsx)("div",{className:e.pageBg,children:Object(a.jsxs)(W.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(E.a,{elevation:20,children:Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsxs)("div",{className:e.appbarCenter,children:[Object(a.jsx)("span",{className:e.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:e.logoImage,src:ce("/images/logo.png"),alt:"logo image"})]}),Object(a.jsx)(D.a,{className:e.avatar,children:Object(a.jsx)(A.a,{})}),Object(a.jsx)(F.a,{component:"h1",variant:"h6",className:e.adminPanelLabel,children:"Admin Panel"}),N&&Object(a.jsx)("div",{className:e.alert,children:Object(a.jsxs)(_.a,{severity:"error",children:[" ",Object(a.jsx)("div",{style:{lineHeight:"1.5rem",textAlign:"justify"},children:N})]})}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"email",autoComplete:"username",value:h,onChange:function(e){x(e.target.value),P(null)},on:!0,autoFocus:!0}),Object(a.jsxs)(M.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&oe()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(H.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:k?"text":"password",value:u,onChange:function(e){j(e.target.value),P(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(G.a,{position:"end",children:Object(a.jsx)(q.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){S(!k)},onMouseDown:function(e){e.preventDefault()},children:k?Object(a.jsx)(X.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]}),Object(a.jsx)(U.a,{style:{textAlign:"left",width:"100%"},control:Object(a.jsx)(Y.a,{value:"remember",color:"secondary",checked:m,onChange:function(e){O(e.target.checked)}}),label:"Remember me"}),Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:oe,className:e.submit,children:"Sign In"})]})}),Object(a.jsx)(V.a,{className:e.backdrop,open:ae,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(J.a,{color:"inherit"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{textAlign:"center",color:"#fff"},children:" "})})]})}),Object(a.jsx)(I.a,{mt:5,style:{color:"#eee"},children:Object(a.jsx)(ee,{})})]})})}var bm=n(1288),pm=n(683),hm=n.n(pm),xm=n(685),gm=n.n(xm),fm=n(1204),mm=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},icon:{fontSize:"1rem",color:"#777",cursor:"pointer",paddingTop:"10px",paddingBottom:"8px",borderBottom:"1px solid #eee"},iconSelected:{color:"#fff",backgroundColor:e.palette.primary.main,transition:"all 0.1s ease-in-out"},menuText:{fontSize:"1rem",fontWeight:"500"},Badge:{backgroundColor:"rgb(220, 0, 78)",color:"#fff",fontWeight:"600",textAlign:"center",borderRadius:"50%",fontSize:"0.85rem",lineHeight:"0.85rem",padding:"7px",marginTop:"9px",width:"28px"}}}));function Om(){var e=mm(),t=o.a.useContext(C),n=Object(l.a)(t,2),r=n[0],c=n[1],d=o.a.useState(nn()),s=Object(l.a)(d,2),u=s[0],j=(s[1],o.a.useState(0)),b=Object(l.a)(j,2),p=b[0],h=b[1],x=Object(te.d)(),g=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vi.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&c((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&c((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCountScreening:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&c((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCountBlood:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(w.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr.getPendingBookings();case 3:(t=e.sent)&&t.data&&c((function(e){return Object(T.a)(Object(T.a)({},e),{},{hsPendingBookingsCount:t.data.length})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){h(r.currentMenuIndex),g(),f(),m(),O()}),[r.currentMenuIndex,r.bookingDialogDataChanged]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(fm.a,{children:r.role&&cm(r.role).map((function(t){return!t.hidden&&!(t.doctorHide&&u)&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:Object(Q.a)(e.icon,p===t.index&&e.iconSelected),onClick:function(e){return n=t.index,h(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:n})})),void x.push(ce("/".concat(lm(r.role,n))));var n},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,style:{paddingLeft:"15px"},children:[Object(a.jsx)(K.a,{item:!0,children:t.icon}),Object(a.jsxs)(K.a,{item:!0,style:{textAlign:"left"},children:[Object(a.jsx)("span",{className:e.menuText,children:"".concat(t.title)})," "]}),"gynae"===r.role&&"deletedBookings"===t.id&&r.shouldRefunsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",r.shouldRefunsCount," "]}),"screening"===r.role&&"pendingBookings"===t.id&&r.hsPendingBookingsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",r.hsPendingBookingsCount," "]}),"screening"===r.role&&"deletedBookings"===t.id&&r.shouldRefunsCountScreening>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",r.shouldRefunsCountScreening," "]}),"blood"===r.role&&"deletedBookings"===t.id&&r.shouldRefunsCountBlood>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",r.shouldRefunsCountBlood," "]})]})},"".concat(t.id))},"".concat(t.id))}))})})}var ym=n(474),vm=n.n(ym),km=n(684),Cm=n.n(km),Sm=n(645),Bm=n(680),wm=n.n(Bm),Tm=n(681),Nm=n.n(Tm),Dm=n(682),Rm=n.n(Dm),Lm=Object(O.a)((function(e){return{paper:{marginTop:"10px",width:"270px",height:"240px",border:"1px solid #ddd",borderRadius:"10px",paddingTop:"10px"}}}))((function(e){return Object(a.jsx)(Sm.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Im=Object(O.a)((function(e){return{paper:{marginTop:"5px",width:"290px",height:"450px",border:"1px solid #ddd",borderRadius:"10px",padding:"10px"}}}))((function(e){return Object(a.jsx)(Sm.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Pm=Object(N.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(T.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:Object(j.a)({position:"relative",whiteSpace:"nowrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{opacity:.9}),drawerPaperClose:Object(j.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},appbarCenter:{position:"fixed",width:"260px",top:"10px",left:"50%",marginLeft:"-130px",alignItems:"center",justify:"center",display:"flex"},logoImage:{width:"36px",height:"36px",marginLeft:"0px"},userAvatar:{backgroundColor:"#fff",borderColor:"#aaa",border:"1px solid",color:"#aaa",cursor:"pointer"},userAvatarSelected:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,cursor:"pointer"},userAvatarBig:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,width:"60px",height:"60px"},appBarText:Object(j.a)({color:"#888"},e.breakpoints.down("sm"),{display:"none"}),appBarAppsIcon:{cursor:"pointer",fontSize:"1.8rem"},appBarAppsIconSelected:{cursor:"pointer",fontSize:"1.8rem",color:e.palette.primary.main},usernameLabel:{fontSize:"1.2rem",color:e.palette.primary.main,marginTop:"5px",marginBottom:"5px"},lastLoginLabel:{color:"#777",paddingTop:"5px"},appsLogo:{width:"70px",height:"70px"},appsBox:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid #fff",borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.main),transition:"all 0.1s ease-in-out"}},appsBoxSelected:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid".concat(e.palette.primary.light),borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.light),transition:"all 0.1s ease-in-out"}},appsAdminLabel:{color:"#0264d4",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGPLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsSTDLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsBloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsDermaLabel:{color:"#323e9a",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPaymentLabel:{color:"#008c77",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsScreeningLabel:{color:"#006b8f",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsCorporateLabel:{color:"#009188",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsReportsLabel:{color:"#008c34",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsInToolbar:{position:"fixed",left:"60px",top:"-5px",height:"65px",width:"200px",overflow:"hidden"}}}));function Am(){var e,t,n,r=Pm(),c=o.a.useContext(C),d=Object(l.a)(c,2),u=d[0],j=d[1],b=Object(sm.useMediaQuery)({maxWidth:768}),p=o.a.useState(!b),h=Object(l.a)(p,2),x=h[0],g=h[1],f=o.a.useState(0),m=Object(l.a)(f,2),O=m[0],y=m[1],v=o.a.useState(null),k=Object(l.a)(v,2),S=k[0],B=k[1],w=o.a.useState(null),N=Object(l.a)(w,2),L=N[0],I=N[1],P=function(){I(null)},A=Object(te.d)(),F=Object(te.e)();o.a.useEffect((function(){if(u.role){var e=dm(u.role,function(e){try{var t=e.split("/");return t&&t.length>0?t[t.length-1].length>0?t[t.length-1]:t[t.length-2]:""}catch(n){return""}}(F.pathname));j((function(t){return Object(T.a)(Object(T.a)({},t),{},{currentMenuIndex:e})}))}}),[F]),Object(i.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(i.useEffect)((function(){y(u.currentMenuIndex),b&&g(!1)}),[u.currentMenuIndex]);Object(Q.a)(r.paper,r.fixedHeight);var _=function(e){yx(e),j((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),A.push(ce("/".concat(lm(e,0)))),P()},E=function(e){switch(e){case"admin":return Object(a.jsx)("img",{src:ce("/images/admin.png"),className:r.appsLogo});case"pcr":return Object(a.jsx)("img",{src:ce("/images/corona.png"),className:r.appsLogo});case"gynae":return Object(a.jsx)("img",{src:ce("/images/woman.png"),className:r.appsLogo});case"gp":return Object(a.jsx)("img",{src:ce("/images/doctor.png"),className:r.appsLogo});case"std":return Object(a.jsx)("img",{src:ce("/images/std-icon.png"),className:r.appsLogo});case"blood":return Object(a.jsx)("img",{src:ce("/images/blood-logo.png"),className:r.appsLogo});case"derma":return Object(a.jsx)("img",{src:ce("/images/derma-logo.png"),className:r.appsLogo});case"payment":return Object(a.jsx)(wm.a,{className:r.appsLogo,style:{color:"#008c77",fontSize:"2rem",padding:"15px"}});case"screening":return Object(a.jsx)(Nm.a,{className:r.appsLogo,style:{color:"#006b8f",fontSize:"2rem",padding:"16px"}});case"corporate":return Object(a.jsx)("img",{src:ce("/images/corporate.png"),style:{padding:"10px"},className:r.appsLogo});case"reports":return Object(a.jsx)(Rm.a,{className:r.appsLogo,style:{color:"#008c34",fontSize:"2rem",padding:"13px"}});default:return null}},M=function(e){switch(e){case"admin":return Object(a.jsxs)("div",{className:r.appsAdminLabel,children:[" ","Admin"," "]});case"pcr":return Object(a.jsxs)("div",{className:r.appsPCRLabel,children:[" ","PCR"," "]});case"gynae":return Object(a.jsxs)("div",{className:r.appsGynaeLabel,children:[" ","Gynae"," "]});case"gp":return Object(a.jsxs)("div",{className:r.appsGPLabel,children:[" ","GP"," "]});case"std":return Object(a.jsxs)("div",{className:r.appsSTDLabel,children:[" ","STD"," "]});case"blood":return Object(a.jsxs)("div",{className:r.appsBloodLabel,children:[" ","Blood"," "]});case"derma":return Object(a.jsxs)("div",{className:r.appsDermaLabel,children:[" ","Derma"," "]});case"payment":return Object(a.jsxs)("div",{className:r.appsPaymentLabel,children:[" ","Payments"," "]});case"screening":return Object(a.jsxs)("div",{className:r.appsScreeningLabel,children:[" ","Screening"," "]});case"corporate":return Object(a.jsxs)("div",{className:r.appsCorporateLabel,children:[" ","Corporate"," "]});case"reports":return Object(a.jsxs)("div",{className:r.appsReportsLabel,children:[" ","Reports"," "]});default:return null}};return Object(a.jsx)(o.a.Fragment,{children:u.userId&&u.role&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(zg.a,{style:{backgroundColor:"#fff",color:"#555",height:"60px"},position:"absolute",className:Object(Q.a)(r.appBar,!1),children:Object(a.jsxs)(Hg.a,{className:r.toolbar,children:[Object(a.jsx)(q.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){g(!x)},className:Object(Q.a)(r.menuButton),children:Object(a.jsx)(hm.a,{})}),Object(a.jsx)("div",{className:r.appsInToolbar,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:E(u.role)}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"8px"},children:M(u.role)})})]})}),Object(a.jsx)("div",{className:r.appbarCenter,children:!b&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("span",{className:r.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:r.logoImage,src:ce("/images/logo.png"),alt:"logo image"})]})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",paddingLeft:"2%"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row-reverse",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:S?r.userAvatarSelected:r.userAvatar,onClick:function(e){B(e.currentTarget)},children:Object(a.jsx)(q.a,{children:Object(a.jsx)(vm.a,{})})})}),(null===(e=u.userId)||void 0===e?void 0:e.roles.find((function(e){return"admin"===e})))&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(q.a,{onClick:function(e){I(e.currentTarget)},children:Object(a.jsx)(Cm.a,{className:L?r.appBarAppsIconSelected:r.appBarAppsIcon})})})]})})]})}),Object(a.jsx)(Lm,{id:"user-avatar-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:function(){B(null)},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:r.userAvatarBig,children:Object(a.jsx)(vm.a,{style:{fontSize:"2.5rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{className:r.usernameLabel,children:[" ",null===(t=u.userId)||void 0===t?void 0:t.username," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"#999",fontSize:"0.85rem"},children:"Logged in at :"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:r.lastLoginLabel,children:Rn()(null===(n=u.userId)||void 0===n?void 0:n.lastLoginTimeStamp)})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){localStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-role"),sessionStorage.removeItem("medexadmin-isdoctor"),j((function(e){return{signedIn:!1}})),A.replace("./login")},variant:"outlined",color:"secondary",style:{marginTop:"30px",width:"150px",borderRadius:"30px"},children:"Logout"})})]})}),Object(a.jsx)(Im,{id:"apps-menu",anchorEl:L,keepMounted:!0,open:Boolean(L),onClose:P,children:Object(a.jsxs)(K.a,{container:!0,justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"admin"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("admin")},children:[Object(a.jsx)(K.a,{item:!0,children:E("admin")}),Object(a.jsx)(K.a,{item:!0,children:M("admin")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gynae"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("gynae")},children:[Object(a.jsx)(K.a,{item:!0,children:E("gynae")}),Object(a.jsx)(K.a,{item:!0,children:M("gynae")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gp"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("gp")},children:[Object(a.jsx)(K.a,{item:!0,children:E("gp")}),Object(a.jsx)(K.a,{item:!0,children:M("gp")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"std"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("std")},children:[Object(a.jsx)(K.a,{item:!0,children:E("std")}),Object(a.jsx)(K.a,{item:!0,children:M("std")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"blood"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("blood")},children:[Object(a.jsx)(K.a,{item:!0,children:E("blood")}),Object(a.jsx)(K.a,{item:!0,children:M("blood")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"screening"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("screening")},children:[Object(a.jsx)(K.a,{item:!0,children:E("screening")}),Object(a.jsx)(K.a,{item:!0,children:M("screening")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"derma"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("derma")},children:[Object(a.jsx)(K.a,{item:!0,children:E("derma")}),Object(a.jsx)(K.a,{item:!0,children:M("derma")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"corporate"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("corporate")},children:[Object(a.jsx)(K.a,{item:!0,children:E("corporate")}),Object(a.jsx)(K.a,{item:!0,children:M("corporate")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"payment"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("payment")},children:[Object(a.jsx)(K.a,{item:!0,children:E("payment")}),Object(a.jsx)(K.a,{item:!0,children:M("payment")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"reports"===u.role?r.appsBoxSelected:r.appsBox,onClick:function(){return _("reports")},children:[Object(a.jsx)(K.a,{item:!0,children:E("reports")}),Object(a.jsx)(K.a,{item:!0,children:M("reports")})]})}),Object(a.jsx)(K.a,{item:!0,style:{width:"85px"}}),Object(a.jsx)(K.a,{item:!0,style:{width:"85px"}})]})}),Object(a.jsxs)(bm.a,{variant:b?"temporary":"persistent",classes:{paper:Object(Q.a)(r.drawerPaper,!x&&r.drawerPaperClose)},open:x,children:[Object(a.jsxs)("div",{className:r.toolbarIcon,children:[Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)("img",{className:r.logoImage,src:ce("/images/logo.png"),alt:"logo image",style:{marginRight:"10px"}}),Object(a.jsx)("span",{className:r.appbarTitle,children:Object(a.jsx)("span",{style:{fontSize:"0.9rem"},children:"Medical Express"})})]}),Object(a.jsx)(q.a,{onClick:function(){g(!1)},children:Object(a.jsx)(gm.a,{})})]}),Object(a.jsx)($t.a,{}),Object(a.jsx)(Om,{})]}),Object(a.jsxs)("main",{className:r.content,children:[Object(a.jsx)("div",{className:r.appBarSpacer}),Object(a.jsx)(W.a,{maxWidth:b?"xs":"xl",className:r.container,children:rm(u.role,O)})]})]})})})}function Fm(e){return Wm.apply(this,arguments)}function Wm(){return(Wm=Object(w.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.checkToken({token:t});case 3:if("OK"!==(n=e.sent).data.status){e.next=8;break}return e.abrupt("return",{username:n.data.userId,forename:n.data.forename,surname:n.data.surname,roles:n.data.roles,isDoctor:n.data.isDoctor,lastLoginTimeStamp:n.data.lastLoginTimeStamp});case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var _m=Object(N.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function Em(){_m();var e=o.a.useContext(C),t=Object(l.a)(e,2),n=t[0],i=t[1],r=o.a.useState(!1),c=Object(l.a)(r,2),d=c[0],u=c[1],j=Object(te.d)(),b=Object(te.e)();o.a.useEffect((function(){(function(){var e=Object(w.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("medexadmin-auth-token")||sessionStorage.getItem("medexadmin-auth-token"),de.setToken(t),t){e.next=8;break}i((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),u(!0),j.push(ce("/login")),e.next=13;break;case 8:return e.next=10,Fm(t);case 10:(n=e.sent)?b.pathname===ce("/")||b.pathname===ce("/#")||b.pathname.startsWith(ce("/login"))?(Ox()||yx(n.roles[0]),nn()||an(n.isDoctor),i((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,signedUp:!1,forgotPassword:!1,userId:n,isDoctor:nn(),role:Ox()})})),j.push(ce("/".concat(lm(Ox(),0))))):(Ox()||yx(n.roles[0]),nn()||an(n.isDoctor),console.log("user",n),i((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,userId:n,isDoctor:nn(),role:Ox()})}))):(i((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),j.push(ce("/login"))),u(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b.pathname]);return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(s.a,{}),d&&(n.signedIn?Object(a.jsx)(Am,{}):Object(a.jsx)(jm,{}))]})}!function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");v?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):k(t,e)}))}}();var Mm=function(){var e=o.a.useState({currentMenuIndex:0}),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(a.jsx)(C.Provider,{value:[n,i],children:Object(a.jsx)(u.a,{children:Object(a.jsxs)(d.a,{theme:m,children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(y,{}),Object(a.jsx)(Em,{})]})})})};c.a.render(Object(a.jsx)(Mm,{}),document.getElementById("root"))},121:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},126:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},127:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},212:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},226:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},248:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},305:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},352:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},353:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},354:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},355:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},357:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},358:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},39:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},550:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},67:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},921:function(e,t){},922:function(e,t){},923:function(e,t){},924:function(e,t){},925:function(e,t){},987:function(e,t){},989:function(e,t){}},[[1199,1,2]]]);
//# sourceMappingURL=main.6e6f24d5.chunk.js.map