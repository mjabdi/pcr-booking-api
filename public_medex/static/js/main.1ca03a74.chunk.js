(this["webpackJsonpmedex-booking-admin"]=this["webpackJsonpmedex-booking-admin"]||[]).push([[0],{145:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},228:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},229:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},230:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},38:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},616:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n.n(o),c=n(32),r=n.n(c),s=n(2),d=n(691),l=n(666),b=n(174),u=n(44),j=n(394),p=n(700),h=n(361),g="rgb(36, 40, 44)",f="rgba(0, 0, 0, 0.13)",x=Object(j.a)({palette:{primary:{main:"#00a1c5",light:"#5bd5f0"},secondary:{main:"#f68529",contrastText:"#fff"},common:{black:"#212121",darkBlack:g},warning:{light:"rgba(253, 200, 69, .3)",main:"rgba(253, 200, 69, .5)",dark:"rgba(253, 200, 69, .7)"},tonalOffset:.2,background:{default:"#f9f9f9"},spacing:8},breakpoints:{values:{xl:1920,lg:1280,md:960,sm:600,xs:0}},border:{borderColor:f,borderWidth:2},overrides:{MuiExpansionPanel:{root:{position:"static"}},MuiTableCell:{root:Object(u.a)({paddingLeft:16,paddingRight:16,borderBottom:"".concat(2,"px solid ").concat(f)},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})},MuiDivider:{root:{backgroundColor:f,height:2}},MuiPrivateNotchedOutline:{root:{borderWidth:2}},MuiListItem:{divider:{borderBottom:"".concat(2,"px solid ").concat(f)}},MuiDialog:{paper:{width:"100%",maxWidth:430,marginLeft:8,marginRight:8}},MuiTooltip:{tooltip:{backgroundColor:g,fontSize:"0.7rem"}},MuiExpansionPanelDetails:{root:Object(u.a)({},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})}}},h.enGB),m=Object(p.a)(x),O=n(10);var y=Object(O.a)((function(e){var t,n,a,o,i;return{"@global":{"*:focus":{outline:0},".text-white":{color:e.palette.common.white},".listItemLeftPadding":(t={paddingTop:"".concat(e.spacing(1.75),"px !important"),paddingBottom:"".concat(e.spacing(1.75),"px !important"),paddingLeft:"".concat(e.spacing(4),"px !important")},Object(u.a)(t,e.breakpoints.down("sm"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),Object(u.a)(t,"@media (max-width:  420px)",{paddingLeft:"".concat(e.spacing(1),"px !important")}),t),".container":(n={width:"100%",paddingRight:e.spacing(4),paddingLeft:e.spacing(4),marginRight:"auto",marginLeft:"auto"},Object(u.a)(n,e.breakpoints.up("sm"),{maxWidth:540}),Object(u.a)(n,e.breakpoints.up("md"),{maxWidth:720}),Object(u.a)(n,e.breakpoints.up("lg"),{maxWidth:1170}),n),".row":{display:"flex",flexWrap:"wrap",marginRight:-e.spacing(2),marginLeft:-e.spacing(2)},".container-fluid":{width:"100%",paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginRight:"auto",marginLeft:"auto",maxWidth:1370},".lg-mg-top":(a={marginTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(a,e.breakpoints.down("md"),{marginTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(a,e.breakpoints.down("sm"),{marginTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(a,e.breakpoints.down("xs"),{marginTop:"".concat(e.spacing(14),"px !important")}),a),".lg-mg-bottom":(o={marginBottom:"".concat(e.spacing(20),"px !important")},Object(u.a)(o,e.breakpoints.down("md"),{marginBottom:"".concat(e.spacing(18),"px !important")}),Object(u.a)(o,e.breakpoints.down("sm"),{marginBottom:"".concat(e.spacing(16),"px !important")}),Object(u.a)(o,e.breakpoints.down("xs"),{marginBottom:"".concat(e.spacing(14),"px !important")}),o),".lg-p-top":(i={paddingTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(i,e.breakpoints.down("md"),{paddingTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(i,e.breakpoints.down("sm"),{paddingTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(i,e.breakpoints.down("xs"),{paddingTop:"".concat(e.spacing(14),"px !important")}),i)}}}),{withTheme:!0})((function(){return null})),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=i.a.createContext([{},function(){}]),B=n(11),S=n.n(B),T=n(16),N=n(3),w=n(212),D=n(703),R=n(190),L=n(407),P=n(693),A=n(390),_=n.n(A),M=n(211),F=n(686),I=n(695),E=n(189),W=n(213),z=n(301),U=n(701),H=n(676),Y=n(620),V=n(406),G=n(404),K=n(661),q=n(622),X=n(150),J=n(687),$=n(688),Q=n(7),Z=n(660);function ee(){return Object(a.jsxs)(M.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Z.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var te=n(52),ne=n(39),ae=n(54),oe=n.n(ae),ie="Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=",ce="https://www.travelpcrtest.com/";function re(e){return"/medicalexpressclinic/admin"+e}var se=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),de=function e(){Object(ne.a)(this,e)};de.setToken=function(e){de.token=e},de.signIn=function(e){return se.post("/api/medex/user/signin",e)},de.checkToken=function(e){return se.post("/api/medex/user/checktoken",e)};var le=n(188),be=n.n(le),ue=n(79),je=n.n(ue),pe=n(56),he=n.n(pe),ge=n(80),fe=n.n(ge),xe=n(82),me=n.n(xe),Oe=n(61),ye=n.n(Oe),ke=n(81),ve=n.n(ke),Ce=n(107),Be=n.n(Ce),Se=n(108),Te=n.n(Se),Ne=n(246),we=n.n(Ne),De=n(109),Re=n.n(De),Le=n(42),Pe=n.n(Le),Ae=n(91),_e=n.n(Ae),Me=n(209),Fe=n.n(Me),Ie=n(389),Ee=n.n(Ie),We=n(388),ze=n.n(We),Ue=n(74),He=n(134),Ye=n.n(He),Ve=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),Ge=n(197),Ke=n.n(Ge),qe=function e(){Object(ne.a)(this,e)};qe.payBooking=function(e,t,n){return Ve.post("/api/book/paybooking?id=".concat(e,"&paymentmethod=").concat(t,"&corporate=").concat(n))},qe.unPayBooking=function(e){return Ve.post("/api/book/unpaybooking?id=".concat(e))},qe.getTestsTimeReport=function(){return Ke()(Ve,{retries:3,retryDelay:function(e){return 1e3*e}}),Ve.get("/api/book/getteststimereport")},qe.getBookingsStatsByDateStr=function(e){return Ve.get("/api/book/getbookingsstatsbydatestr?date=".concat(e))},qe.getBookingsCountByDateStr=function(e){return Ve.get("/api/book/getbookingscountbydatestr?date=".concat(e))},qe.getAllBookingsCountAll=function(){return Ve.get("/api/book/getallbookingscountall")},qe.getBookingsCountByDateStrandTime=function(e,t,n){return Ve.get("/api/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},qe.getBookingsByDateStrandTime=function(e,t){return Ve.get("/api/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},qe.getAllBookingsCountByDateStr=function(e){return Ve.get("/api/book/getallbookingscountbydatestr?date=".concat(e))},qe.getAllBookingsCountByDateStrandTime=function(e,t,n){return Ve.get("/api/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},qe.getAllBookingsByDateStrandTime=function(e,t){return Ve.get("/api/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},qe.changeBackToBookingMade=function(e){return Ve.post("/api/book/changebacktobookingmade?id=".concat(e))},qe.resendEmailsWithBookingId=function(e){return Ve.post("/api/book/resendemailswithbookingid?id=".concat(e))},qe.regenerateFilesWithBookingId=function(e){return Ve.post("/api/book/regeneratefileswithbookingid?id=".concat(e))},qe.resendEmails=function(e){return Ve.post("/api/book/resendemails?id=".concat(e))},qe.regenerateFiles=function(e){return Ve.post("/api/book/regeneratefiles?id=".concat(e))},qe.matchRecords=function(e,t){return Ve.post("/api/book/matchrecords?bookingid=".concat(e,"&linkid=").concat(t))},qe.findBestMatches=function(e){return Ve.get("/api/book/getbestmatchedbookings?id=".concat(e))},qe.getLinkDetails=function(e){return Ve.get("/api/book/getlinkdetails?id=".concat(e))},qe.getLinkDetailsWithBookingId=function(e){return Ve.get("/api/book/getlinkdetailswithbookingid?id=".concat(e))},qe.findBookingByRefBirthDate=function(e,t){return Ve.get("/api/book/getbookingsbyrefandbirthdate?ref=".concat(e,"&birthdate=").concat(t))},qe.updateBooking=function(e){return Ve.post("/api/book/updatebookappointment",e)},qe.updateBookingTime=function(e){return Ve.post("/api/book/updatebookappointmenttime",e)},qe.deleteBooking=function(e){return Ve.post("/api/book/deletebookappointment?id=".concat(e))},qe.unDeleteBooking=function(e){return Ve.post("/api/book/undeletebookappointment?id=".concat(e))},qe.getBookingsByRef=function(e){return Ve.get("/api/book/getbookingsbyref?ref=".concat(e))},qe.getBookingById=function(e){return Ve.get("/api/book/getbookingbyid?id=".concat(e))},qe.getAllBookings=function(e){return e||(e=25),Ve.get("/api/book/getallbookings?limit=".concat(e))},qe.getAllTRBookings=function(e){return e||(e=25),Ve.get("/api/book/getalltrbookings?limit=".concat(e))},qe.getLateBookings=function(){return Ve.get("/api/book/getlatebookings")},qe.getDeletedBookings=function(e){return e||(e=25),Ve.get("/api/book/getdeletedbookings?limit=".concat(e))},qe.getLiveBookings=function(){return Ve.get("/api/book/getlivebookings")},qe.getCompletedBookings=function(e){return e||(e=25),Ve.get("/api/book/getcompletedbookings?limit=".concat(e))},qe.getPositiveBookings=function(){return Ve.get("/api/book/getpositivebookings")},qe.getTodayBookings=function(){return Ve.get("/api/book/gettodaybookings")},qe.getOldBookings=function(e){return e||(e=25),Ve.get("/api/book/getoldbookings?limit=".concat(e))},qe.getFutureBookings=function(e){return e||(e=25),Ve.get("/api/book/getfuturebookings?limit=".concat(e))},qe.getRecentBookings=function(){return Ve.get("/api/book/getrecentbookings")},qe.getRecentBookingsAll=function(e){return e||(e=25),Ve.get("/api/book/getrecentbookingsall?limit=".concat(e))},qe.getUnmatchedRecords=function(){return Ve.get("/api/book/getunmatchedrecords")},qe.getUnmatchedRecordsArchived=function(){return Ve.get("/api/book/getunmatchedrecordsarchived")},qe.archiveRecord=function(e){return Ve.post("/api/book/archiverecord?id=".concat(e))},qe.unArchiveRecord=function(e){return Ve.post("/api/book/unarchiverecord?id=".concat(e))};var Xe=n(699),Je=n(663),$e=n(662),Qe=n(135),Ze=n.n(Qe),et=n(295),tt=function e(){Object(ne.a)(this,e)};tt.downloadCovidForm1=function(e){return Ve.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},tt.downloadCovidForm2=function(e){return Ve.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},tt.downloadPdfResult=function(e){return Ve.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},tt.downloadPdfCert=function(e){return Ve.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},tt.downloadPdfLabReport=function(e){return Ve.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var nt=n(145),at=n.n(nt),ot=n(47),it=n.n(ot),ct=n(33),rt=n.n(ct),st=n(38),dt=n(58),lt=n.n(dt),bt=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function ut(){var e=bt(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState({edit:!1,person:null}),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!1),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState(!1),P=Object(s.a)(D,2),A=P[0],_=P[1],F=i.a.useState(!1),I=Object(s.a)(F,2),E=I[0],W=I[1],z=i.a.useState({}),U=Object(s.a)(z,2),H=U[0],G=U[1],q=i.a.useState(""),X=Object(s.a)(q,2),J=X[0],$=X[1],Q=i.a.useState(""),Z=Object(s.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(""),ae=Object(s.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(""),re=Object(s.a)(ce,2),se=re[0],de=re[1],le=i.a.useState(""),be=Object(s.a)(le,2),ue=be[0],je=be[1],pe=i.a.useState(""),he=Object(s.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(s.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(s.a)(ke,2),Ce=ve[0],Be=ve[1],Se=i.a.useState(""),Te=Object(s.a)(Se,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(s.a)(De,2),Le=Re[0],Ae=Re[1],_e=i.a.useState(""),Me=Object(s.a)(_e,2),Fe=Me[0],Ie=Me[1],Ee=i.a.useState(""),We=Object(s.a)(Ee,2),ze=We[0],Ue=We[1],He=i.a.useState(""),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=Ye[1],Ke=i.a.useState(""),Qe=Object(s.a)(Ke,2),at=Qe[0],ot=Qe[1],ct=i.a.useState(!1),dt=Object(s.a)(ct,2),ut=dt[0],jt=dt[1],pt=i.a.useState(!1),ht=Object(s.a)(pt,2),gt=ht[0],ft=ht[1],xt=function(e){$(e.target.value),G(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},mt=function(e){te(e.target.value),G(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},Ot=function(e){ie(e.target.value)},yt=function(e){de(e.target.value)},kt=function(e){je(e.target.value)},vt=function(e){fe(e.target.value)},Ct=function(e){ye(e.target.value)},Bt=function(e){Be(e.target.value),G(Object(N.a)(Object(N.a)({},H),{},{dobError:!1}))},St=function(e){we(e.target.value)},Tt=function(e){Ae(e.target.value)},Nt=function(e){Ie(e.target.value)},wt=function(e){Ge(e.target.value)},Dt=function(e){ot(e.target.value)},Rt=function(e){jt(e.target.checked)},Lt=function(e){ft(e.target.checked)},Pt=function(e,t){if(e)je(t.forenameCapital),fe(t.surnameCapital),$(Object(st.FormatDateFromString)(t.bookingDate)),te(t.bookingTime.toUpperCase()),ie(t.gender.toUpperCase()),de(t.title.toUpperCase()),ye(t.email.toUpperCase()),Be(Object(st.FormatDateFromString)(t.birthDate)),we(t.phone.toUpperCase()),Ae(t.postCode.toUpperCase()),Ie(t.address.toUpperCase()),t.notes&&Ue(t.notes.toUpperCase()),t.passportNumber&&Ge(t.passportNumber.toUpperCase()),t.passportNumber2&&ot(t.passportNumber2.toUpperCase()),jt(t.certificate),ft(t.antiBodyTest),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=ut,n.antiBodyTest=gt,n.gender=oe,n.title=se,n.birthDate=Object(st.RevertFormatDateFromString)(Ce),n.email=Oe,n.phone=Ne,n.postCode=Le,n.address=Fe,n.passportNumber=Ve,n.passportNumber2=at,n.forename=ue,n.surname=ge,n.notes=ze,n.bookingDate=Object(st.RevertFormatDateFromString)(J),n.bookingTime=ee,n.bookingRef=t.bookingRef,_t(n)&&Mt({bookingId:a,person:n})}}else h({edit:e,person:t})},At=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},_t=function(e){var t=!1;return At(e.bookingDate)||(t=!0,G(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),At(e.birthDate)||(t=!0,G(Object(N.a)(Object(N.a)({},H),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},Mt=function(e){w(!0),qe.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},Ft=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,_(!0),qe.deleteBooking(n).then((function(e){_(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){_(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},It=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,W(!0),qe.unDeleteBooking(n).then((function(e){W(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){W(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"stretch",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){var o,i,r,s,d,u,j,h,g,f;return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(Xe.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:l==="panel".concat(n),onChange:(f="panel".concat(n),function(e,t){b(!!t&&f)}),children:[Object(a.jsxs)($e.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(Ze.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(M.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(M.a,{className:e.secondaryHeading,children:"".concat(t.forenameCapital," ").concat(t.surnameCapital)})]}),Object(a.jsx)(Je.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){It(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){It(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){It(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pt(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Pt(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Pt(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ft(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){Ft(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){Ft(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(st.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:J,onChange:xt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:ee,onChange:mt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(o=t.gender)||void 0===o?void 0:o.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:oe,onChange:Ot,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(i=t.title)||void 0===i?void 0:i.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:yt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.forenameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ue,onChange:kt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.surnameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ge,onChange:vt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(r=t.email)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Oe,onChange:Ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(st.FormatDateFromString)(t.birthDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.dobError,className:e.TextBox,value:Ce,onChange:Bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(s=t.phone)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ne,onChange:St,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(d=t.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Le,onChange:Tt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(u=t.address)||void 0===u?void 0:u.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Fe,onChange:Nt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(j=t.passportNumber)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ve,onChange:wt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(h=t.passportNumber2)||void 0===h?void 0:h.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:at,onChange:Dt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.certificate?Object(a.jsx)(it.a,{className:e.checkIcon}):Object(a.jsx)(rt.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(Y.a,{className:e.formControl,control:Object(a.jsx)(V.a,{className:e.formControl,color:"secondary",name:"certificate",checked:ut,onChange:Rt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.antiBodyTest?Object(a.jsx)(it.a,{className:e.checkIcon}):Object(a.jsx)(rt.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(Y.a,{className:e.formControl,control:Object(a.jsx)(V.a,{className:e.formControl,color:"secondary",name:"certificate",checked:gt,onChange:Lt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(g=t.status,"booked"===g?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===g?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===g?Object(a.jsx)("span",{className:e.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===g?Object(a.jsx)("span",{className:e.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===g?Object(a.jsxs)("span",{className:e.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===g?Object(a.jsxs)("span",{className:e.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"sample_taken"===t.status&&!(p.edit&&p.person._id===t._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:T,onClick:function(e){return n=t._id,w(!0),void qe.changeBackToBookingMade(n).then((function(e){w(!1),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e),w(!1)}));var n},children:"Change Back To Booking Made"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(nt.calculatePrice)(t)<=199?e.infoDataCharges:e.infoDataChargesHigher,children:"\xa3".concat(Object(nt.calculatePrice)(t))})]}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,tt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,tt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_sent"!==t.status&&"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,tt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,tt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Certificate"})})]})})]})})},"panel".concat(n))}))]})})}var jt=function(e){return"boolean"===typeof e};function pt(e){var t=e.inputRef,n=Object(Ue.a)(e,["inputRef"]);return Object(a.jsx)(Ye.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var ht=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function gt(){var e=ht(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(s.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!jt(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(s.a)(d,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){qe.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),qe.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(M.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(W.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:pt,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(ut,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(I.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var ft,xt=n(13),mt=n(106),Ot=n(669),yt=n(299),kt=n(166),vt=n(670),Ct=n(671),Bt=n(672),St=n(673),Tt=n(621),Nt=n(110),wt=n.n(Nt),Dt=n(675),Rt=n(674),Lt=n(40),Pt=n.n(Lt),At=n(624),_t=n(131),Mt=n.n(_t),Ft=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}})),It=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function Et(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(It,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(M.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Wt(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function zt(e){var t=Ft(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1],i.a.useState(!1)),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(""),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(10),S=Object(s.a)(B,2),T=S[0],N=S[1],w=i.a.useState(!1),D=Object(s.a)(w,2),L=D[0],P=D[1];Object(o.useEffect)((function(){N((function(e){return e>=100?100:(t=k,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[k]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"md",open:e.open,onClose:function(){b(!1),h(!1),P(!1),clearInterval(ft),e.handleClose()},PaperComponent:Wt,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Mt.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","RESEND EMAILS"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsxs)("div",{style:{height:"230px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!p&&!l&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report"," ",e.booking.certificate?" and Certificate":""," ","Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:l||p,className:t.resendButton,variant:"contained",color:"primary",onClick:function(t){b(!0),N(0),v("downloadFailed"),qe.resendEmailsWithBookingId(e.booking._id).then((function(t){ft=setInterval((function(){qe.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(ft))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(ft),P(!0))}))}),1e3),setTimeout((function(){P(!0),clearInterval(ft)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:l||p,className:t.cancelButton,variant:"contained",color:"default",onClick:function(t){e.handleClose()},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:l||p,className:t.resendFilesButton,variant:"contained",color:"primary",onClick:function(t){b(!0),N(0),v("downloadFailed"),m(!0),qe.regenerateFilesWithBookingId(e.booking._id).then((function(t){ft=setInterval((function(){qe.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(ft))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(ft),P(!0))}))}),1e3),setTimeout((function(){P(!0),clearInterval(ft)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})})]}),L&&!l&&!p&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"error",children:"Error! \u2014 Something is wrong with this record!"})}),(l||p)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[l&&!p&&"Sending ...",p&&!x&&Object(a.jsxs)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent."]}),p&&x&&Object(a.jsxs)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]}),(l||p)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Et,{variant:"determinate",color:"primary",value:T})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:l&&!p&&"PLEASE WAIT ..."})]})]})})]})})})}var Ut=n(57),Ht=n.n(Ut),Yt=n(696),Vt=n(702),Gt=["Visa Medical"],Kt=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function qt(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Xt(e){var t=Kt(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),l=Object(s.a)(d,2),b=l[0],u=l[1],j=Object(o.useState)(Gt[0]),p=Object(s.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=function(){m||(e.handleClose(),u("credit card"),g(Gt[0]),O(!1))},k=function(){var t=Object(T.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.prev=1,t.next=4,qe.payBooking(e.booking._id,b,"corporate"===b?h:"");case 4:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),y(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),O(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"800px",open:e.open,onClose:y,PaperComponent:qt,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ht.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsxs)("div",{style:{height:"270px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"17px"},children:" How do you want to pay? "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(W.a,{component:"fieldset",children:[Object(a.jsxs)(Vt.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(Y.a,{value:"credit card",control:Object(a.jsx)(Yt.a,{}),label:"Credit Card"}),Object(a.jsx)(Y.a,{value:"cash",control:Object(a.jsx)(Yt.a,{}),label:"Cash"}),Object(a.jsx)(Y.a,{value:"corporate",control:Object(a.jsx)(Yt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(W.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Gt.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:y,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:k,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(G.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Jt=n(140),$t=n.n(Jt),Qt=n(139),Zt=n.n(Qt),en=n(5),tn=n.n(en),nn=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},an=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function on(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function cn(e){var t=an(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1],i.a.useState(null)),d=Object(s.a)(r,2),l=d[0],b=d[1],u=function(){b(null),e.handleClose()};Object(o.useEffect)((function(){e.booking&&e.booking.filename&&e.booking.filename.length>0&&qe.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status&&b(e.data.link.timeStamp)}))}),[e.booking]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"sm",open:e.open,onClose:u,PaperComponent:on,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:tn()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(nn(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(nn(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),l?Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(l,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),l?Object(a.jsxs)("span",{className:t.itemData,children:[" ",tn()(nn(l,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)(Rt.a,{children:Object(a.jsx)(R.a,{onClick:u,color:"default",children:"Back"})})]})})})}var rn=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"83px",paddingLeft:"30px",paddingRight:"30px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),sn=i.a.forwardRef((function(e,t){return Object(a.jsx)(At.a,Object(N.a)({direction:"up",ref:t},e))}));function dn(e){return Object(a.jsx)(Pt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function ln(e){var t,n,c,r,d,l,b,u,j,p=rn(),h=i.a.useContext(C),g=Object(s.a)(h,2),f=g[0],x=g[1],m=Object(o.useState)(!1),O=Object(s.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),B=Object(s.a)(v,2),w=B[0],D=B[1],P=i.a.useState(!1),A=Object(s.a)(P,2),_=A[0],M=A[1],F=i.a.useState(null),I=Object(s.a)(F,2),E=I[0],W=I[1],z=i.a.useState({edit:!1,person:null}),U=Object(s.a)(z,2),H=U[0],J=U[1],$=i.a.useState({delete:!1,person:null}),Q=Object(s.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(s.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(s.a)(ie,2),re=ce[0],se=ce[1],de=i.a.useState(!1),le=Object(s.a)(de,2),be=le[0],ue=le[1],je=i.a.useState(!1),pe=Object(s.a)(je,2),ge=pe[0],fe=pe[1],xe=i.a.useState({}),me=Object(s.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(s.a)(ke,2),Ce=ve[0],Be=ve[1],Se=i.a.useState(""),Te=Object(s.a)(Se,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(s.a)(De,2),Le=Re[0],Ae=Re[1],_e=i.a.useState(""),Me=Object(s.a)(_e,2),Fe=Me[0],Ie=Me[1],Ee=i.a.useState(""),We=Object(s.a)(Ee,2),ze=We[0],Ue=We[1],He=i.a.useState(""),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=Ye[1],Ke=i.a.useState(""),Xe=Object(s.a)(Ke,2),Je=Xe[0],$e=Xe[1],Qe=i.a.useState(""),Ze=Object(s.a)(Qe,2),at=Ze[0],ot=Ze[1],ct=i.a.useState(""),dt=Object(s.a)(ct,2),bt=dt[0],ut=dt[1],jt=i.a.useState(""),pt=Object(s.a)(jt,2),ht=pt[0],gt=pt[1],ft=i.a.useState(""),xt=Object(s.a)(ft,2),mt=xt[0],Ot=xt[1],yt=i.a.useState(""),kt=Object(s.a)(yt,2),Bt=kt[0],Tt=kt[1],Nt=i.a.useState(""),wt=Object(s.a)(Nt,2),Lt=wt[0],Pt=wt[1],At=i.a.useState(""),_t=Object(s.a)(At,2),Mt=_t[0],Ft=_t[1],It=i.a.useState(!1),Et=Object(s.a)(It,2),Wt=Et[0],Ut=Et[1],Ht=i.a.useState(!1),Yt=Object(s.a)(Ht,2),Vt=Yt[0],Gt=Yt[1],Kt=i.a.useState(!1),qt=Object(s.a)(Kt,2),Jt=qt[0],Qt=qt[1],en=i.a.useState(null),tn=Object(s.a)(en,2),nn=tn[0],an=tn[1],on=i.a.useState(!1),ln=Object(s.a)(on,2),bn=ln[0],un=ln[1],jn=i.a.useState(!1),pn=Object(s.a)(jn,2),hn=pn[0],gn=pn[1],fn=i.a.useState(!1),xn=Object(s.a)(fn,2),mn=xn[0],On=xn[1],yn=i.a.useState(!1),kn=Object(s.a)(yn,2),vn=kn[0],Cn=kn[1],Bn=function(){On(!1)};Object(o.useEffect)((function(){if(nn){var e=Ce!==Object(st.FormatDateFromString)(nn.bookingDate)||Ne!==nn.bookingTime||Le!==nn.gender||ze!==nn.forenameCapital||Ve!==nn.surnameCapital||Fe!==nn.title||Je!==nn.email||at!==Object(st.FormatDateFromString)(nn.birthDate)||bt!==nn.phone||ht!==nn.postCode||mt!==nn.address||Lt!==nn.passportNumber||Mt!==nn.passportNumber2||Wt!==nn.certificate||Vt!==nn.antiBodyTest;un(e)}}),[hn]),Object(o.useEffect)((function(){e.open||setTimeout((function(){J({edit:!1,person:null}),un(!1)}),500)}),[e.open]);var Sn=function(e,t){if(e)Ue(t.forenameCapital),Ge(t.surnameCapital),Be(Object(st.FormatDateFromString)(t.bookingDate)),we(t.bookingTime.toUpperCase()),Ae(t.gender.toUpperCase()),Ie(t.title.toUpperCase()),$e(t.email.toUpperCase()),ot(Object(st.FormatDateFromString)(t.birthDate)),ut(t.phone.toUpperCase()),gt(t.postCode.toUpperCase()),Ot(t.address.toUpperCase()),t.notes&&Tt(t.notes.toUpperCase()),t.passportNumber&&Pt(t.passportNumber.toUpperCase()),t.passportNumber2&&Ft(t.passportNumber2.toUpperCase()),Ut(t.certificate),Gt(t.antiBodyTest),J({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=Wt,n.antiBodyTest=Vt,n.gender=Le,n.title=Fe,n.birthDate=Object(st.RevertFormatDateFromString)(at),n.email=Je,n.phone=bt,n.postCode=ht,n.address=mt,n.passportNumber=Lt,n.passportNumber2=Mt,n.forename=ze,n.surname=Ve,n.notes=Bt,n.bookingDate=Object(st.RevertFormatDateFromString)(Ce),n.bookingTime=Ne,n.bookingRef=t.bookingRef,Nn(n)&&wn({bookingId:a,person:n})}}else J({edit:e,person:t}),un(!1)},Tn=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Nn=function(e){var t=!1;return Tn(e.bookingDate)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingDateError:!0}))),Tn(e.birthDate)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingTimeError:!0}))),!t},wn=function(e){se(!0),qe.updateBooking(e).then((function(e){se(!1),J({edit:!1,person:null}),Qt(!Jt)})).catch((function(e){se(!1),J({edit:!1,person:null}),console.log(e)}))},Dn=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),qe.deleteBooking(n).then((function(e){ue(!1),ee({delete:!1,person:null}),Qt(!Jt)})).catch((function(e){ue(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Rn=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),qe.unDeleteBooking(n).then((function(e){fe(!1),oe({restore:!1,person:null}),Qt(!Jt)})).catch((function(e){fe(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(qe.getBookingById(e.booking._id).then((function(e){an(e.data)})).catch((function(e){console.log(e)})),x((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Jt,f.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&an(e.booking)}),[e.booking]);var Ln,Pn=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.prev=1,e.next=4,qe.unPayBooking(nn._id);case 4:se(!1),On(!1),Qt(!Jt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),se(!1),On(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:nn&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(vt.a,{open:e.open,TransitionComponent:sn,keepMounted:!0,onClose:e.onClose,PaperComponent:dn,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ct.a,{id:"alert-dialog-slide-title",style:nn.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(et.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/pcr/".concat(nn._id)),k(!0),setTimeout((function(){k(!1)}),1500)},"aria-label":"delete",className:p.margin,size:"small",children:Object(a.jsx)(Zt.a,{style:nn.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsx)("span",{hidden:!y,style:{fontSize:"12px",transition:"all 1s ease-in"},children:" Copied "})]}),nn.tr&&Object(a.jsx)("div",{style:{position:"absolute",right:"15px"},children:"TR"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:nn.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(nn.forenameCapital," ").concat(nn.surnameCapital)})}),nn.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:nn.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsx)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"500px",maxWidth:"800px",paddingTop:"20px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:p.infoDetails,children:Object(a.jsxs)("ul",{className:p.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!nn.deleted||ae.restore&&ae.person._id===nn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Rn(!0,nn)},className:p.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){Rn(!1,nn)},className:p.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){Rn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:nn.deleted||Z.delete||H.edit&&H.person._id===nn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Sn(!0,nn)},className:p.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!bn,onClick:function(){Sn(!1,nn)},className:p.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){Sn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:e.deleteButtonDisabled||nn.deleted||H.edit||Z.delete&&Z.person._id===nn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Dn(!0,nn)},className:p.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Dn(!1,nn)},className:p.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Dn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:Object(st.FormatDateFromString)(nn.bookingDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingDateError,className:p.TextBox,value:Ce,onChange:function(e){Be(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingDateError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingTimeError,className:p.TextBox,value:Ne,onChange:function(e){we(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingTimeError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(t=nn.gender)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Le,onChange:function(e){Ae(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(n=nn.title)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Fe,onChange:function(e){Ie(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.forenameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:ze,onChange:function(e){Ue(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.surnameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Ve,onChange:function(e){Ge(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(c=nn.email)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Je,onChange:function(e){$e(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:Object(st.FormatDateFromString)(nn.birthDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.dobError,className:p.TextBox,value:at,onChange:function(e){ot(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{dobError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(r=nn.phone)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:bt,onChange:function(e){ut(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(d=nn.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:ht,onChange:function(e){gt(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(l=nn.address)||void 0===l?void 0:l.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:mt,onChange:function(e){Ot(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),nn.selfIsolate&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Post Code"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.postCodeSI})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Address"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.addressSI})]})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(b=nn.passportNumber)||void 0===b?void 0:b.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Lt,onChange:function(e){Pt(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"NHS Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:null!==(u=nn.NHSNumber)&&void 0!==u?u:"-"})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Ethnicity"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.ethnicity})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Arrival Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.arrivalDate})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Flight Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.flightNumber})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Last Departed Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.lastDepartedDate})]}),Object(a.jsxs)("li",{hidden:!nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Travelling From"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.travellingFrom})]}),Object(a.jsxs)("li",{hidden:nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(j=nn.passportNumber2)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Mt,onChange:function(e){Ft(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{hidden:nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.certificate?Object(a.jsx)(it.a,{className:p.checkIcon}):Object(a.jsx)(rt.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(Y.a,{className:p.formControl,control:Object(a.jsx)(V.a,{className:p.formControl,color:"secondary",name:"certificate",checked:Wt,onChange:function(e){Ut(e.target.checked),gn(!hn)}}),label:""})})]}),Object(a.jsxs)("li",{hidden:nn.tr,className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.antiBodyTest?Object(a.jsx)(it.a,{className:p.checkIcon}):Object(a.jsx)(rt.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(Y.a,{className:p.formControl,control:Object(a.jsx)(V.a,{className:p.formControl,color:"secondary",name:"certificate",checked:Vt,onChange:function(e){Gt(e.target.checked),gn(!hn)}}),label:""})})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"STATUS"})," ",(Ln=nn.status,"booked"===Ln?Object(a.jsx)("span",{className:p.BookedLabel,children:" Booking Made "}):"patient_attended"===Ln?Object(a.jsx)("span",{className:p.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===Ln?Object(a.jsx)("span",{className:p.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===Ln?Object(a.jsx)("span",{className:p.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===Ln?Object(a.jsxs)("span",{className:p.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===Ln?Object(a.jsxs)("span",{className:p.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"sample_taken"===nn.status&&!(H.edit&&H.person._id===nn._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:re,onClick:function(e){return t=nn._id,se(!0),void qe.changeBackToBookingMade(t).then((function(e){se(!1),Qt(!Jt)})).catch((function(e){console.log(e),se(!1)}));var t},children:"Change Back To Booking Made"}),("report_sent"===nn.status||"report_cert_sent"===nn.status||"positive"===nn.status)&&!(H.edit&&H.person._id===nn._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.ResendEmailsButton,onClick:function(e){return nn._id,W(nn),void D(!0)},children:"Resend emails"})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(nt.calculatePrice)(nn)<=199?p.infoDataCharges:p.infoDataChargesHigher,children:"\xa3".concat(Object(nt.calculatePrice)(nn))}),!(H.edit&&H.person._id===nn._id)&&!nn.paid&&!nn.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.PayButton,onClick:function(e){return nn._id,W(nn),void M(!0)},children:"Pay"}),!(H.edit&&H.person._id===nn._id)&&nn.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:p.PayLabel,children:["  ",Object(a.jsx)(it.a,{className:p.checkIconSmall})," Paid by ",nn.paidBy,"corporate"===nn.paidBy?' "'.concat(nn.corporate,'" '):""]}),Object(a.jsx)(et.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return On(!0)},children:Object(a.jsx)($t.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{hidden:nn.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,tt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:nn.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,tt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),Qt(!Jt)})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:nn.deleted||"report_sent"!==nn.status&&"report_cert_sent"!==nn.status&&"positive"!==nn.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,tt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:nn.deleted||"report_cert_sent"!==nn.status&&"positive"!==nn.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,tt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Certificate"})}),Object(a.jsx)("li",{children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){W(nn),Cn(!0)},className:p.DownloadForm,children:"Show Audit Trail"})})]})})},"panel0")}),Object(a.jsx)(G.a,{className:p.backdrop,open:re||be||ge,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(zt,{booking:E,open:w,handleClose:function(){D(!1),W(null)}}),Object(a.jsx)(Xt,{booking:E,open:_,handleClose:function(){M(!1),W(null)}}),Object(a.jsx)(cn,{booking:E,open:vn,handleClose:function(){Cn(!1),W(null)}})]}),Object(a.jsxs)(vt.a,{open:mn,onClose:Bn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:Bn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Pn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]})]})})}var bn=n(93),un=n(94),jn=n(144),pn=(n(461),n(283),n(65)),hn=n(692),gn=n(100),fn=n.n(gn),xn=n(99),mn=n.n(xn),On=n(141),yn=n.n(On),kn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80}}})),vn=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"tr"===e?"Test & Release Bookings":"All Bookings"};function Cn(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Bn(e){var t=kn(),n=i.a.useState(25),c=Object(s.a)(n,2),r=c[0],d=c[1],l=Object(o.useState)(!1),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(s.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(en(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(s.a)(k,2),B=v[0],S=v[1],T=Object(o.useState)(en(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(s.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),_=Object(s.a)(A,2),M=_[0],F=_[1],I=Object(o.useState)(!0),E=Object(s.a)(I,2),U=E[0],H=E[1],G=Object(o.useState)(!0),q=Object(s.a)(G,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(s.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),se=Object(s.a)(re,2),de=se[0],le=se[1],be=Object(o.useState)(!0),ue=Object(s.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(s.a)(xe,2),ke=Oe[0],Ce=Oe[1],Se=Object(o.useState)(!0),Ne=Object(s.a)(Se,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(s.a)(Le,2),Me=Ae[0],Fe=Ae[1],Ie=Object(o.useState)(!0),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"",Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Mt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return Lt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:"  ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:"  RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:"  RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(it.a,{className:t.checkIcon}):Object(a.jsx)(rt.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(it.a,{className:t.checkIcon}):Object(a.jsx)(rt.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"",Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Mt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsx)(rt.a,{className:t.closeIcon})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:"  ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:"  RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:"  RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,onClick:function(){},children:e.value})})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(it.a,{className:t.checkIcon}):Object(a.jsx)(rt.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(it.a,{className:t.checkIcon}):Object(a.jsx)(rt.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}];var He=i.a.useContext(C),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(s.a)(Ge,2),Xe=Ke[0],Je=Ke[1],$e=i.a.useState(null),Qe=Object(s.a)($e,2),Ze=(Qe[0],Qe[1]),tt=i.a.useState(null),nt=Object(s.a)(tt,2),ot=nt[0],ct=nt[1],dt=i.a.useState(!1),lt=Object(s.a)(dt,2),bt=lt[0],ut=lt[1],jt=Object(o.useState)(Gt[0]),pt=Object(s.a)(jt,2),ht=pt[0],gt=pt[1],ft=i.a.useState(""),Nt=Object(s.a)(ft,2),Dt=Nt[0],Rt=Nt[1],Lt=(Object(o.useRef)(),function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),Pt=function(t){var n=qe.getAllBookings;"today"===e.date?n=qe.getTodayBookings:"old"===e.date?n=qe.getOldBookings:"future"===e.date?n=qe.getFutureBookings:"recent"===e.date?n=qe.getRecentBookingsAll:"live"===e.date?n=qe.getLiveBookings:"completed"===e.date?n=qe.getCompletedBookings:"positive"===e.date?n=qe.getPositiveBookings:"deleted"===e.date?n=qe.getDeletedBookings:"late"===e.date?n=qe.getLateBookings:"tr"===e.date&&(n=qe.getAllTRBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(xt.a)(e.data),cachedBookings:Object(xt.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),Pt(25)}),[e.date]),Object(o.useEffect)((function(){if(Dt&&Dt.trim().length>0){var e=Xe.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(Dt.toLowerCase())>=0||e.surname.toLowerCase().indexOf(Dt.toLowerCase())>=0||"".concat(e.forename," ").concat(e.surname).toLowerCase().indexOf(Dt.toLowerCase())>=0}));Je({bookings:Object(xt.a)(e),cachedBookings:Xe.cachedBookings,isFetching:!1})}else Je({bookings:Object(xt.a)(Xe.cachedBookings),cachedBookings:Xe.cachedBookings,isFetching:!1})}),[Dt]),Object(o.useEffect)((function(){Pt(r)}),[Ve.bookingDialogDataChanged]);var At,_t,Mt=function(e,t){var n=Xe.bookings.find((function(e){return e._id===t}));ct(n),ut(!0)},Ft=i.a.useState(1),It=Object(s.a)(Ft,2),Et=It[0],Wt=It[1];return Object(a.jsxs)(i.a.Fragment,{children:[Xe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(_t=e.date,"today"===_t?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===_t?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===_t?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===_t?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===_t?Object(a.jsx)(Be.a,{style:{fontSize:"2.2rem"}}):"completed"===_t?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===_t?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===_t?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===_t?Object(a.jsx)(_e.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",vn(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){Rt(""),Pt(r)},children:Object(a.jsx)(wt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&"admin"===Ve.userId.username&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(bn.a,{style:{color:"#009900"},icon:un.a}),children:"export to excel"})})}),Xe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:Dt,onChange:function(e){Rt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(At=e.date,"live"===At||"positive"===At||"late"===At||"today"===At),children:Object(a.jsxs)(W.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(yt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),Pt(e.target.value)},children:[Object(a.jsx)(kt.a,{value:25,children:"25"}),Object(a.jsx)(kt.a,{value:50,children:"50"}),Object(a.jsx)(kt.a,{value:100,children:"100"}),Object(a.jsx)(kt.a,{value:500,children:"500"}),Object(a.jsx)(kt.a,{value:1e3,children:"1000"}),Object(a.jsx)(kt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(mt.a,{rows:Xe.bookings,columns:Ue,autoPageSize:!0,page:Et,onPageChange:function(e){Wt(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)(ln,{booking:ot,open:bt,onClose:function(){ct(null),ut(!1)}}),Xe.bookings&&Xe.bookings.length>0&&Object(a.jsxs)(vt.a,{maxWidth:"lg",open:u,onClose:function(){gt(Gt[0]),F(!1),j(!1)},PaperComponent:Cn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(bn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:un.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(Tt.a,{checked:M,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),M&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:ht,onChange:function(e){gt(e.target.value)},children:Gt.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(pn.a,{utils:jn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:g,onChange:function(e){f(e),S(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(yn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:de,onChange:function(e){le(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:Me,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:We,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Me&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),We&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Xe.bookings.filter((function(e){return M?e.bookingDate>=B&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===ht:e.bookingDate>=B&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(st.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th,children:Object(st.FormatDateFromString)(e.birthDate)}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Me&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),We&&Object(a.jsx)("td",{className:t.td,children:at.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Sn=n(55),Tn=n(697),Nn=n(677),wn=n(379),Dn=n(380),Rn=n(66),Ln=n(397);function Pn(e){return Object(a.jsx)(M.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function An(e,t){return{time:e,amount:t}}var _n=[An("09:00",0),An("10:00",0),An("11:00",0),An("12:00",0),An("13:00",0),An("14:00",0),An("15:00",0),An("16:00",0),An("17:00",0),An("18:00",void 0)],Mn=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Fn(){var e=Object(Sn.a)(),t=i.a.useState(_n),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),l=Object(s.a)(d,2),b=l[0],u=l[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=tn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,qe.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(An("09:00",Mn(o,"09"))),n.push(An("10:00",Mn(o,"10"))),n.push(An("11:00",Mn(o,"11"))),n.push(An("12:00",Mn(o,"12"))),n.push(An("13:00",Mn(o,"13"))),n.push(An("14:00",Mn(o,"14"))),n.push(An("15:00",Mn(o,"15"))),n.push(An("16:00",Mn(o,"16"))),n.push(An("17:00",Mn(o,"17"))),n.push(An("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Pn,{children:"Today"}),Object(a.jsx)(Tn.a,{children:Object(a.jsxs)(Nn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(wn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(Dn.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Rn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Ln.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var In=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),En=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",s="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:s:e.getHours()<9||e.getHours()>=18?null:s},Wn=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function zn(){var e=In(),t=i.a.useState(new Date),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(null),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(s.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=En(c);if(e){var t=en(c,"yyyy-mm-dd");C(!0),qe.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(xt.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var B=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Pn,{children:"Current Visits"}),Object(a.jsx)(M.a,{component:"p",variant:"h6",children:Wn(En(c))}),Object(a.jsxs)(M.a,{color:"textSecondary",className:e.depositContext,children:["on ",en(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return B(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(ln,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Un=n(681),Hn=n(684),Yn=n(667),Vn=n(682),Gn=n(683),Kn=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function qn(){var e=Kn(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(s.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:l.bookings,isFetching:!0}),m(!0),qe.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:l.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O(),setInterval((function(){h((function(e){return!e}))}),3e4)}),[]);var y=function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Pn,{children:"Recent Bookings"}),Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"TimeStamp"}),Object(a.jsx)(Yn.a,{children:"Name"}),Object(a.jsx)(Yn.a,{children:"Surname"}),Object(a.jsx)(Yn.a,{children:"Email"}),Object(a.jsx)(Yn.a,{children:"D.O.B"}),Object(a.jsx)(Yn.a,{children:"Booked Date"}),Object(a.jsx)(Yn.a,{children:"Booked Time"})]})}),Object(a.jsx)(Hn.a,{children:l.bookings.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:y(e.timeStamp)}),Object(a.jsx)(Yn.a,{children:e.forename}),Object(a.jsx)(Yn.a,{children:e.surname}),Object(a.jsx)(Yn.a,{children:e.email}),Object(a.jsx)(Yn.a,{children:Object(st.FormatDateFromString)(e.birthDate)}),Object(a.jsx)(Yn.a,{children:Object(st.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Yn.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:ts("pcr","recentBookings")})}))},children:"See more records"})})]})}var Xn=n(698),Jn=n(381),$n=n(383),Qn=["#00b33e","#0070e0","#bb00c4"],Zn=Math.PI/180,ea=function(e){var t=e.cx,n=e.cy,o=e.midAngle,i=e.innerRadius,c=e.outerRadius,r=e.value,s=(e.index,i+.5*(c-i)),d=t+s*Math.cos(-o*Zn),l=n+s*Math.sin(-o*Zn);return Object(a.jsx)("text",{x:d,y:l,fontSize:"14px",fontWeight:"500",fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat(r," ")})},ta=Object(w.a)({depositContext:{flex:1},ReportLabels:{position:"absolute",top:"80px",left:"0px"},AverageLabel:{position:"absolute",top:"190px",right:"30px",fontSize:"12px",color:"#0070e0",fontWeight:"600"},less12Label:{fontSize:"12px",color:"#00b33e",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #00b33e",marginBottom:"10px"},less24Label:{fontSize:"12px",color:"#0070e0",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #0070e0",marginBottom:"10px"},less36Label:{fontSize:"12px",color:"#bb00c4",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #bb00c4",marginBottom:"10px"},seeMore:{position:"absolute",top:"191px",left:"2px"}});function na(){var e=ta(),t=i.a.useState(new Date),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState({}),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(s.a)(O,2),k=y[0],v=y[1];Object(o.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){v(!0),qe.getTestsTimeReport().then((function(e){var t=[];v(!1),"OK"===e.data.status&&(b(e.data.result),t.push({name:"lessThan12",value:e.data.result.lessThan12}),t.push({name:"lessThan24",value:e.data.result.lessThan24}),t.push({name:"lessThan36",value:e.data.result.lessThan36}),m(t))})).catch((function(e){v(!1),console.error(e)}))}),[]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Pn,{children:"PCR RESULTS SUMMARY"}),x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Xn.a,{width:250,height:150,children:Object(a.jsx)(Jn.a,{data:x,cx:170,cy:70,labelLine:!1,label:ea,outerRadius:65,fill:"#8884d8",dataKey:"value",children:x.map((function(e,t){return Object(a.jsx)($n.a,{fill:Qn[t%Qn.length]},"cell-".concat(t))}))})}),Object(a.jsxs)("div",{className:e.ReportLabels,children:[Object(a.jsxs)("div",{className:e.less12Label,children:[" ","12 Hours"," "]}),Object(a.jsxs)("div",{className:e.less24Label,children:[" ","24 Hours"," "]}),Object(a.jsxs)("div",{className:e.less36Label,children:[" ","36 Hours"," "]})]}),Object(a.jsxs)("div",{className:e.AverageLabel,children:["avg = ",Object(a.jsxs)("span",{style:{fontSize:"14px"},children:[" ","".concat(l.avg)," "]})," hours"]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),h(!0)},children:"See Details"})}),Object(a.jsxs)(vt.a,{style:{padding:"50px"},onClose:function(){h(!1)},"aria-labelledby":"simple-dialog-title",open:p,children:[Object(a.jsx)(Ct.a,{style:{textAlign:"center"},id:"simple-dialog-title",children:"PCR Results Time Report"}),Object(a.jsx)(St.a,{children:Object(a.jsxs)(Un.a,{children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Yn.a,{children:"Count"}),Object(a.jsx)(Yn.a,{children:"Percent"})]})}),Object(a.jsxs)(Hn.a,{children:[Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"12 Hours"}),Object(a.jsx)(Yn.a,{children:l.lessThan12}),Object(a.jsxs)(Yn.a,{children:[l.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"24 Hours"}),Object(a.jsx)(Yn.a,{children:l.lessThan24}),Object(a.jsxs)(Yn.a,{children:[l.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"36 Hours"}),Object(a.jsx)(Yn.a,{children:l.lessThan36}),Object(a.jsxs)(Yn.a,{children:[l.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"48 Hours"}),Object(a.jsx)(Yn.a,{children:l.lessThan48}),Object(a.jsxs)(Yn.a,{children:[l.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Yn.a,{style:{fontWeight:"600"},children:l.lessThan48+l.lessThan36+l.lessThan24+l.lessThan12}),Object(a.jsx)(Yn.a,{})]},"row4")]})]})})]})]})]})})}var aa=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function oa(){var e=aa(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Fn,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(na,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(zn,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(qn,{})})})]})})}var ia,ca=n(386),ra=n.n(ca),sa=n(685),da=n(706),la=n(252),ba=n.n(la),ua=n(387),ja=n.n(ua),pa=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginLeft:"50px"}}})),ha=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function ga(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(ha,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(M.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function fa(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function xa(){var e=pa(),t=[{field:"id",headerName:"#",width:50},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"forename",headerName:"Forename",width:200},{field:"surname",headerName:"Surname",width:200},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(st.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===A?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(ba.a,{}),onClick:function(e){return Xe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"archive"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",color:"primary",onClick:function(e){return nt(t.value)},className:e.downloadPDFButton,children:"view pdf"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(ba.a,{}),onClick:function(e){return Xe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",onClick:function(e){return Qe(e,t.value)},className:e.archiveButton,children:"Undo"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",color:"primary",onClick:function(e){return nt(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],n=i.a.useContext(C),c=Object(s.a)(n,2),r=c[0],d=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(null),p=Object(s.a)(j,2),h=(p[0],p[1]),g=i.a.useState(""),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(null),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("unresolved"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState(!1),F=Object(s.a)(M,2),E=F[0],W=F[1],z=i.a.useState(!1),U=Object(s.a)(z,2),H=U[0],G=U[1],q=i.a.useState(null),J=Object(s.a)(q,2),$=J[0],Q=J[1],Z=i.a.useState(null),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(s.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),se=Object(s.a)(re,2),de=se[0],le=se[1],be=i.a.useState(null),ue=Object(s.a)(be,2),je=ue[0],pe=ue[1],he=i.a.useState(!1),ge=Object(s.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState(!1),Oe=Object(s.a)(me,2),ye=Oe[0],ke=Oe[1],ve=i.a.useState(!1),Ce=Object(s.a)(ve,2),Be=Ce[0],Se=Ce[1],Te=i.a.useState(!1),Ne=Object(s.a)(Te,2),De=Ne[0],Re=Ne[1],Le=i.a.useState(!1),Pe=Object(s.a)(Le,2),Ae=Pe[0],_e=Pe[1],Me=i.a.useState(""),Fe=Object(s.a)(Me,2),Ie=Fe[0],Ee=Fe[1],We=i.a.useState(10),ze=Object(s.a)(We,2),Ue=ze[0],He=ze[1],Ye=i.a.useState(!1),Ve=Object(s.a)(Ye,2),Ge=Ve[0],Ke=Ve[1],Xe=function(e,t){Q(t),W(!0),Je(t)};Object(o.useEffect)((function(){$&&Je($)}),[r.bookingDialogDataChanged]);var Je=function(e){qe.getLinkDetails(e).then((function(e){ne(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),qe.findBestMatches(e).then((function(e){ce(e.data.matchedBookings)})).catch((function(e){console.log(e),ce([])}))},$e=function(e,t){T||(w(t),qe.archiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},Qe=function(e,t){T||(w(t),qe.unArchiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},Ze=Object(o.useRef)();Object(o.useEffect)((function(){var e=qe.getUnmatchedRecords;"archived"===A&&(e=qe.getUnmatchedRecordsArchived),Ke(!0),u({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});return e.data}));Ze.current=t,t.then((function(e){t===Ze.current&&(Ke(!1),u({bookings:e,cachedBookings:Object(xt.a)(e),isFetching:!1}))}),(function(e){t===Ze.current&&(Ke(!1),console.log(e),u({bookings:b.bookings,cachedBookings:b.cachedBookings,isFetching:!1}))}))}),[k,A]),Object(o.useEffect)((function(){if(x&&x.trim().length>0){var e=b.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(x.toLowerCase())>=0||e.surname.toLowerCase().indexOf(x.toLowerCase())>=0}));u({bookings:e,cachedBookings:b.cachedBookings,isFetching:!1})}else u({bookings:Object(xt.a)(b.cachedBookings),cachedBookings:b.cachedBookings,isFetching:!1})}),[x]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=Ie,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Ie]);var nt=function(e){tt.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ge&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:" Unmatched Records "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){m(""),v(!k)},children:Object(a.jsx)(wt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(da.a,{value:A,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&_(t)},"aria-label":"text alignment",children:[Object(a.jsx)(sa.a,{value:"unresolved","aria-label":"left aligned",children:"UnResolved"}),Object(a.jsx)(sa.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:x,onChange:function(e){m(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(mt.a,{rows:b.bookings,columns:t,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&h(e.rows[0])}})}),Object(a.jsxs)(vt.a,{maxWidth:"lg",open:E,onClose:function(){W(!1),setTimeout((function(){Q(null),ne(null),ce(null),le(null),ke(!1),xe(!1),Ee(null),Se(!1),Re(!1),clearInterval(ia),_e(!1)}),100)},PaperComponent:fa,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ba.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsxs)("div",{style:{height:"600px"},children:[(!ie||!te)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ra.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),ie&&0===ie.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),ie&&te&&ie.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Forename:"}),Object(a.jsx)("span",{className:e.infoData,children:te.forename})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Surname:"}),Object(a.jsx)("span",{className:e.infoData,children:te.surname})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(st.FormatDateFromString)(te.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(st.FormatDateFromString)(te.testDate)})]})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"Select"}),Object(a.jsx)(Yn.a,{children:"Match"}),Object(a.jsx)(Yn.a,{children:"Forename"}),Object(a.jsx)(Yn.a,{children:"Surname"}),Object(a.jsx)(Yn.a,{children:"D.O.B"}),Object(a.jsx)(Yn.a,{children:"Email"}),Object(a.jsx)(Yn.a,{children:"Test Date"}),Object(a.jsx)(Yn.a,{})]})}),Object(a.jsx)(Hn.a,{children:ie.map((function(e){var t;return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:Object(a.jsx)(et.a,{title:e.birthDate!==te.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:de&&de._id===e._id,disabled:ye||fe,onChange:function(t){return function(e,t){e.target.checked?le(t):le(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Yn.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Yn.a,{style:e.forenameCapital===te.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Yn.a,{style:e.surnameCapital===te.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Yn.a,{style:e.birthDate===te.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==te.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(ja.a,{})})}),Object(st.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Yn.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Yn.a,{style:tn()(e.samplingTimeStamp,"yyyy-mm-dd")===te.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(st.FormatDateFromString)(tn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Yn.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Be,onClick:function(t){return function(e,t){pe(t),G(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ye&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!de||fe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){xe(!0),qe.getBookingById(de._id).then((function(e){le(e.data)})),qe.matchRecords(de._id,$).then((function(e){"OK"===e.data.status&&(xe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!de&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(I.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ye&&!De&&!Be&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",de.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Se(!0),He(0),Ee("downloadFailed"),qe.resendEmails($).then((function(e){ia=setInterval((function(){qe.getLinkDetails($).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Se(!1),Re(!0),v(!k),clearInterval(ia))}))}),1e3)})).catch((function(e){console.log(e),Se(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Se(!0),He(0),Ee("downloadFailed"),_e(!0),qe.regenerateFiles($).then((function(e){ia=setInterval((function(){qe.getLinkDetails($).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Se(!1),Re(!0),v(!k),clearInterval(ia))}))}),1e3)})).catch((function(e){console.log(e),Se(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ye&&(Be||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Be&&!De&&"Sending ...",De&&!Ae&&Object(a.jsxs)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Ae&&Object(a.jsxs)(I.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ye&&(Be||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(ga,{variant:"determinate",color:"primary",value:Ue})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Be&&!De&&"PLEASE WAIT ..."})]})]}),Object(a.jsx)(ln,{booking:je,open:H,onClose:function(){G(!1),setTimeout((function(){pe(null)}),500)},deleteButtonDisabled:!0})]})]})]})}var ma=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Oa=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=ma(),l=i.a.useContext(C),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(s.a)(k,2),B=v[0],w=v[1],D=i.a.useState(!1),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=_[0],F=_[1];Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=tn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=tn()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),s=tn()(r,"yyyy-mm-dd");f(s),y(r),P(!0);var d=tn()(new Date,"yyyy-mm-dd");F(s<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!M&&!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.calendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,qe.getBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:[].concat(Object(xt.a)(e.calendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var I;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:M?d.ContainerPast:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var s=tn()(new Date,"yyyy-mm-dd")===tn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i||M?d.DayLabelDisabled:s?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(I=B,-1===I?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):I>0&&!L?I>=50?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:I}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:I<10?" ".concat(I):"".concat(I)}):void 0),function(e){if(e>0&&!L){var t=e/100*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(B)]})})},ya=n(68),ka=n.n(ya),va=function e(){Object(ne.a)(this,e)};va.getMonthRange=function(e,t){return new ka.a.Calendar(ka.a.SUNDAY).itermonthdates(t,e)};var Ca=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ba=[1,2,3,4,5,6,7],Sa=[1,2,3,4,5,6],Ta=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Na=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Ta(),r=va.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Ca.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Sa.map((function(e){return Object(a.jsx)("tr",{children:Ba.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Oa,{cellIndex:(e-1)*Ba.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*Ba.length+i))})}))})}))})]})})},wa=n(111),Da=n.n(wa),Ra=n(112),La=n.n(Ra),Pa=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Aa=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Pa(),d=i.a.useContext(C),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(-1),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(s.a)(y,2),v=k[0],B=k[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");O(t<e),B(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0))if(m)g(-2);else{g(-1);var o=null===(e=b.calendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return qe.getBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{calendarCache:[].concat(Object(xt.a)(a.calendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var S;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(S=h,-1===S?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):S>0&&!m?S>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:S}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:S}):void 0),function(e){if(e>0&&!m){var t=e/5*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},_a=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Ma=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Fa=function(e){var t=e.dates,n=e.dayClicked,o=Ma();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:tn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:tn()(e,"mmm ")}),Object(a.jsx)("span",{style:tn()(new Date,"yyyy-mm-dd")===tn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:tn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:_a.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Aa,{dayClicked:n,date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Ia=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}})),Ea=function(e){e.key;var t=e.date,n=e.time,c=Ia(),r=i.a.useContext(C),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(null),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!0),w=Object(s.a)(B,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=_[0],F=_[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");P(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(l.dayViewCalFilter&&l.dayViewCalFilter.trim().length>0){var e=l.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.forenameCapital.indexOf(e)>=0||t.surnameCapital.indexOf(e)>=0||"".concat(t.forenameCapital," ").concat(t.surnameCapital).indexOf(e)>=0})))}else m(Object(xt.a)(p))}),[l.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(S.a.mark((function e(){var a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return h([]),e.abrupt("return");case 5:if(h(null),(i=null===(a=l.calendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!M){e.next=12;break}return e.next=10,qe.getBookingsByDateStrandTime(t,n);case 10:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:[].concat(Object(xt.a)(e.calendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 12:"OK"===i.data.status&&h(i.data.bookings);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();M&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:e.calendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:e.calendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:e.calendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,l.bookingDialogDataChanged]);var I;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:L?c.ContainerPast:c.Container,children:(I=x,null===I?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):I.length>0&&!L?I.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:c.bookingBox,onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.forenameCapital,"-").concat(e.surnameCapital).substring(0,15)})})):void 0)}),Object(a.jsx)(ln,{booking:k,open:M,onClose:function(){F(!1)}})]})},Wa=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],za=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Ua=function(e){var t=e.date,n=za();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:tn()(new Date,"yyyy-mm-dd")===tn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:tn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Wa.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Ea,{date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Ha=["January","February","March","April","May","June","July","August","September","October","November","December"],Ya=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Va(){var e=Ya(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState((new Date).getFullYear()),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState([]),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("month"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState("month"),F=Object(s.a)(M,2),I=F[0],E=F[1],W=i.a.useState(""),z=Object(s.a)(W,2),U=z[0],Y=z[1],V=function(){Y(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{calendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var G,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),E("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(et.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===l&&h(p-1);var t=1===l?12:l-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Da.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(et.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===l&&h(p+1);var t=12===l?1:l+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(La.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Ha[l-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?tn()(n,"d"):tn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(et.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(rt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(da.a,{value:I,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(sa.a,{style:"month"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(sa.a,{style:"week"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(sa.a,{style:"day"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(G=A,"month"===G?Object(a.jsx)(Na,{dayClicked:q,month:l,year:p}):"week"===G?Object(a.jsx)(Fa,{dayClicked:q,dates:T}):"day"===G?Object(a.jsx)(Ua,{date:x}):void 0)]})}var Ga=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Ka=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=Ga(),l=i.a.useContext(C),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(s.a)(k,2),B=v[0],w=v[1],D=i.a.useState(!1),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=(_[0],_[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=tn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=tn()(new Date,"yyyy-mm-dd");M(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),s=tn()(r,"yyyy-mm-dd");f(s),y(r),P(!0);var d=tn()(new Date,"yyyy-mm-dd");M(s<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,qe.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var s=tn()(new Date,"yyyy-mm-dd")===tn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:s?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=B,-1===F?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=50?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:F}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/100*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(B)]})})},qa=function e(){Object(ne.a)(this,e)};qa.getMonthRange=function(e,t){return new ka.a.Calendar(ka.a.SUNDAY).itermonthdates(t,e)};var Xa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ja=[1,2,3,4,5,6,7],$a=[1,2,3,4,5,6],Qa=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Za=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Qa(),r=qa.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Xa.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:$a.map((function(e){return Object(a.jsx)("tr",{children:Ja.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Ka,{cellIndex:(e-1)*Ja.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*Ja.length+i))})}))})}))})]})})},eo=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),to=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=eo(),d=i.a.useContext(C),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(-1),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(s.a)(y,2),v=k[0],B=k[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");O(t<e),B(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return qe.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(xt.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var S;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(S=h,-1===S?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):S>0?S>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:S}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:S}):void 0),function(e){if(e>0){var t=e/5*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},no=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ao=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),oo=function(e){var t=e.dates,n=e.dayClicked,o=ao();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:tn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:tn()(e,"mmm ")}),Object(a.jsx)("span",{style:tn()(new Date,"yyyy-mm-dd")===tn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:tn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:no.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(to,{dayClicked:n,date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},io=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),co=function(e){e.key;var t=e.date,n=e.time,c=io(),r=i.a.useContext(C),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(null),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!0),w=Object(s.a)(B,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(s.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(s.a)(P,2),_=A[0],M=A[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(l.dayViewCalFilter&&l.dayViewCalFilter.trim().length>0){var e=l.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.forenameCapital.indexOf(e)>=0||t.surnameCapital.indexOf(e)>=0||"".concat(t.forenameCapital," ").concat(t.surnameCapital).indexOf(e)>=0})))}else m(Object(xt.a)(p))}),[l.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(S.a.mark((function e(){var a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=l.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!_){e.next=9;break}return e.next=7,qe.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,l.bookingDialogDataChanged]);var F,I=function(e){switch(e){case"sample_taken":return c.bookingBoxSampleTaken;case"positive":return c.bookingBoxPositive;case"report_sent":case"report_cert_sent":return c.bookingBoxReportSent;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(F=x,null===F?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F.length>0?F.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:I(e.status),onClick:function(t){return function(e,t){v(t),M(!0)}(0,e)},children:"".concat(e.forenameCapital,"-").concat(e.surnameCapital).substring(0,15)})})):void 0)}),Object(a.jsx)(ln,{booking:k,open:_,onClose:function(){M(!1)}})]})},ro=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],so=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),lo=function(e){var t=e.date,n=so();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:tn()(new Date,"yyyy-mm-dd")===tn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:tn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:ro.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(co,{date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},bo=["January","February","March","April","May","June","July","August","September","October","November","December"],uo=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function jo(){var e=uo(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState((new Date).getFullYear()),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState([]),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("month"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState("month"),F=Object(s.a)(M,2),I=F[0],E=F[1],W=i.a.useState(""),z=Object(s.a)(W,2),U=z[0],Y=z[1],V=function(){Y(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var G,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),E("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(et.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===l&&h(p-1);var t=1===l?12:l-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Da.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(et.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===l&&h(p+1);var t=12===l?1:l+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(La.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(bo[l-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?tn()(n,"d"):tn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(et.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(rt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(da.a,{value:I,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(sa.a,{style:"month"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(sa.a,{style:"week"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(sa.a,{style:"day"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(G=A,"month"===G?Object(a.jsx)(Za,{dayClicked:q,month:l,year:p}):"week"===G?Object(a.jsx)(oo,{dayClicked:q,dates:T}):"day"===G?Object(a.jsx)(lo,{date:x}):void 0)]})}var po=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),ho=function e(){Object(ne.a)(this,e)};ho.sendRegFormEmail=function(e){return po.post("/api/gynae/book/sendregformemail?id=".concat(e))},ho.payBooking=function(e,t,n,a){return po.post("/api/gynae/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},ho.unPayBooking=function(e){return po.post("/api/gynae/book/unpaybooking?id=".concat(e))},ho.getShouldRefundsCount=function(){return po.get("/api/gynae/book/getshouldrefundscount?")},ho.refundBooking=function(e){return po.post("/api/gynae/payment/refundpayment",{bookingId:e})},ho.getBookingsStatsByDateStr=function(e){return po.get("/api/gynae/book/getbookingsstatsbydatestr?date=".concat(e))},ho.getBookingsCountByDateStr=function(e){return po.get("/api/gynae/book/getbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountAll=function(){return po.get("/api/gynae/book/getallbookingscountall")},ho.getBookingsCountByDateStrandTime=function(e,t,n){return po.get("/api/gynae/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getBookingsByDateStrandTime=function(e,t){return po.get("/api/gynae/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.getAllBookingsCountByDateStr=function(e){return po.get("/api/gynae/book/getallbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountByDateStrandTime=function(e,t,n){return po.get("/api/gynae/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getAllBookingsByDateStrandTime=function(e,t){return po.get("/api/gynae/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.changeBackToBookingMade=function(e){return po.post("/api/gynae/book/changebacktobookingmade?id=".concat(e))},ho.changeToPatientAttended=function(e){return po.post("/api/gynae/book/changetopatientattended?id=".concat(e))},ho.updateBooking=function(e){return po.post("/api/gynae/book/updatebookappointment",e)},ho.updateBookingTime=function(e){return po.post("/api/gynae/book/updatebookappointmenttime",e)},ho.deleteBooking=function(e){return po.post("/api/gynae/book/deletebookappointment?id=".concat(e))},ho.unDeleteBooking=function(e){return po.post("/api/gynae/book/undeletebookappointment?id=".concat(e))},ho.getBookingsByRef=function(e){return po.get("/api/gynae/book/getbookingsbyref?ref=".concat(e))},ho.getBookingById=function(e){return po.get("/api/gynae/book/getbookingbyid?id=".concat(e))},ho.getAllBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getallbookings?limit=".concat(e))},ho.getDeletedBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getdeletedbookings?limit=".concat(e))},ho.getTodayBookings=function(){return po.get("/api/gynae/book/gettodaybookings")},ho.getOldBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getoldbookings?limit=".concat(e))},ho.getFutureBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getfuturebookings?limit=".concat(e))},ho.getRecentBookings=function(){return po.get("/api/gynae/book/getrecentbookings")},ho.getRecentBookingsAll=function(e){return e||(e=25),po.get("/api/gynae/book/getrecentbookingsall?limit=".concat(e))};var go=n(70),fo=function e(){Object(ne.a)(this,e)};fo.downloadGynaeRegForm=function(e){return po.get("/api/pdf/downloadgynaeregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},fo.downloadCovidForm1=function(e){return po.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},fo.downloadCovidForm2=function(e){return po.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfResult=function(e){return po.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfCert=function(e){return po.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfLabReport=function(e){return po.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var xo=n(228),mo=n.n(xo),Oo=["Visa Medical"],yo=n(183),ko=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}}));function vo(e){var t=e.inputRef,n=e.onChange,o=Object(Ue.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yo.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function Co(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Bo(e){var t=ko(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),l=Object(s.a)(d,2),b=l[0],u=l[1],j=Object(o.useState)(Oo[0]),p=Object(s.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(s.a)(y,2),v=k[0],B=k[1],w=Object(o.useState)(!1),D=Object(s.a)(w,2),P=D[0],A=D[1],_=function(){m||(e.handleClose(),u("credit card"),B(""),g(Oo[0]),O(!1))},M=function(){var t=Object(T.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,ho.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),_(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"xs",open:e.open,onClose:_,PaperComponent:Co,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ht.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"OTC Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){B(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:vo,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(W.a,{component:"fieldset",children:[Object(a.jsxs)(Vt.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(Y.a,{value:"credit card",control:Object(a.jsx)(Yt.a,{}),label:"Credit Card"}),Object(a.jsx)(Y.a,{value:"cash",control:Object(a.jsx)(Yt.a,{}),label:"Cash"}),Object(a.jsx)(Y.a,{value:"corporate",control:Object(a.jsx)(Yt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(W.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Oo.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:_,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:M,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(G.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var So=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}})),To=i.a.forwardRef((function(e,t){return Object(a.jsx)(At.a,Object(N.a)({direction:"up",ref:t},e))}));function No(e){return Object(a.jsx)(Pt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function wo(e){var t,n=So(),c=i.a.useContext(C),r=Object(s.a)(c,2),d=r[0],l=r[1],b=Object(o.useState)(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(s.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(s.a)(y,2),v=k[0],B=k[1],w=i.a.useState(!1),D=Object(s.a)(w,2),P=D[0],A=D[1],_=i.a.useState(null),M=Object(s.a)(_,2),F=M[0],I=M[1],E=i.a.useState({edit:!1,person:null}),W=Object(s.a)(E,2),z=W[0],U=W[1],H=i.a.useState({delete:!1,person:null}),Y=Object(s.a)(H,2),V=Y[0],J=Y[1],$=i.a.useState({restore:!1,person:null}),Q=Object(s.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(!1),ne=Object(s.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(s.a)(ie,2),re=ce[0],se=ce[1],de=i.a.useState(!1),le=Object(s.a)(de,2),be=le[0],ue=le[1],je=i.a.useState({}),pe=Object(s.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState(""),xe=Object(s.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(""),ke=Object(s.a)(ye,2),ve=ke[0],Ce=ke[1],Be=i.a.useState(""),Se=Object(s.a)(Be,2),Te=Se[0],Ne=Se[1],we=i.a.useState(""),De=Object(s.a)(we,2),Re=De[0],Le=De[1],Ae=i.a.useState(""),_e=Object(s.a)(Ae,2),Me=_e[0],Fe=_e[1],Ie=i.a.useState(""),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=i.a.useState(""),He=Object(s.a)(Ue,2),Ye=He[0],Ve=He[1],Ge=i.a.useState(!1),Ke=Object(s.a)(Ge,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(s.a)(Je,2),Qe=$e[0],Ze=$e[1],tt=i.a.useState(!1),nt=Object(s.a)(tt,2),at=nt[0],ot=nt[1],ct=i.a.useState(!1),rt=Object(s.a)(ct,2),st=rt[0],dt=rt[1],bt=i.a.useState(!1),ut=Object(s.a)(bt,2),jt=ut[0],pt=ut[1],ht=i.a.useState(!1),gt=Object(s.a)(ht,2),ft=(gt[0],gt[1],function(){pt(!1),I(null)}),xt=function(){A(!1),I(null)};Object(o.useEffect)((function(){if(Qe){var e=me!==Object(go.FormatDateFromString)(Qe.bookingDate)||ve!==Qe.bookingTime||Te!==Qe.fullname||Re!==Qe.email||Me!==Qe.phone||Ye!==Qe.service||We!==Qe.notes;ot(e)}}),[st]),Object(o.useEffect)((function(){e.open||setTimeout((function(){U({edit:!1,person:null}),ot(!1)}),500)}),[e.open]);var mt=function(e,t){if(e)Ne(t.fullname),Oe(Object(go.FormatDateFromString)(t.bookingDate)),Ce(t.bookingTime.toUpperCase()),Le(t.email),Fe(t.phone),Ve(t.service),t.notes&&ze(t.notes),U({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Re,n.phone=Me,n.fullname=Te,n.notes=We,n.service=Ye,n.bookingDate=Object(go.RevertFormatDateFromString)(me),n.bookingTime=ve,n.bookingRef=t.bookingRef,Ot(n)&&yt({bookingId:a,person:n})}}else U({edit:e,person:t}),ot(!1)},Ot=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,ge(Object(N.a)(Object(N.a)({},he),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ge(Object(N.a)(Object(N.a)({},he),{},{bookingTimeError:!0}))),!t},yt=function(e){oe(!0),ho.updateBooking(e).then((function(e){oe(!1),U({edit:!1,person:null}),Xe(!qe)})).catch((function(e){oe(!1),U({edit:!1,person:null}),console.log(e)}))},kt=function(e,t){var n;e?J({delete:e,person:t}):e||t?!e&&t&&(n=t._id,se(!0),ho.deleteBooking(n).then((function(e){se(!1),J({delete:!1,person:null}),Xe(!qe)})).catch((function(e){se(!1),J({delete:!1,person:null}),console.log(e)}))):J({delete:e,person:t})},Bt=function(e,t){var n;e?ee({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),ho.unDeleteBooking(n).then((function(e){ue(!1),ee({restore:!1,person:null}),Xe(!qe)})).catch((function(e){ue(!1),ee({restore:!1,person:null}),console.log(e)}))):ee({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(ho.getBookingById(e.booking._id).then((function(e){Ze(e.data)})).catch((function(e){console.log(e)})),l((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[qe,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&Ze(e.booking)}),[e.booking]);var Tt,Nt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,ho.unPayBooking(Qe._id);case 4:oe(!1),pt(!1),Xe(!qe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),oe(!1),pt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,ho.refundBooking(Qe._id);case 4:oe(!1),Lt(),A(!1),Xe(!qe),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),oe(!1),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&l((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:Qe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(vt.a,{maxWidth:"sm",open:e.open,TransitionComponent:To,keepMounted:!0,onClose:function(){x(!1),e.onClose()},PaperComponent:No,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ct.a,{id:"alert-dialog-slide-title",style:Qe.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(et.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/".concat(Qe._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(Zt.a,{style:Qe.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Qe.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Qe.fullname)})}),Qe.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:Qe.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Qe.deleted||Z.restore&&Z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Bt(!0,Qe)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Bt(!1,Qe)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Bt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Qe.deleted||V.delete||z.edit&&z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){mt(!0,Qe)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ae||!at,onClick:function(){mt(!1,Qe)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ae,onClick:function(){mt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Qe.deleted||z.edit||V.delete&&V.person._id===Qe._id,children:[Qe.OTCCharges>0&&Object(a.jsx)(et.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})})}),0===Qe.OTCCharges&&Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re,onClick:function(){kt(!1,Qe)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Object(go.FormatDateFromString)(Qe.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingDateError,className:n.TextBox,value:me,onChange:function(e){Oe(e.target.value),ge(Object(N.a)(Object(N.a)({},he),{},{bookingDateError:!1})),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingTimeError,className:n.TextBox,value:ve,onChange:function(e){Ce(e.target.value),ge(Object(N.a)(Object(N.a)({},he),{},{bookingTimeError:!1})),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Te,onChange:function(e){Ne(e.target.value),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Re,onChange:function(e){Le(e.target.value),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:null===(t=Qe.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Me,onChange:function(e){Fe(e.target.value),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.service}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:We,onChange:function(e){ze(e.target.value),dt(!st)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(Tt=Qe.status,"booked"===Tt?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===Tt?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void ho.changeBackToBookingMade(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void ho.changeToPatientAttended(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!Qe.formData,startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,fo.downloadGynaeRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit||Qe.formData,children:Object(a.jsxs)(R.a,{startIcon:Object(a.jsx)(Mt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,oe(!0),x(!1),ho.sendRegFormEmail(e).then((function(e){oe(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),oe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"ONLINE DEPOSIT"})," ",Object(a.jsx)("span",{className:Qe.deposit&&0!==Qe.deposit?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Qe.deposit.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Qe._id)&&!Qe.paid&&Qe.deleted&&Qe.deposit>0&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return A(!0)},children:"Refund Deposit"}),!(z.edit&&z.person._id===Qe._id)&&Qe.refund&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(it.a,{className:n.checkIconSmall})," ","Refund Done","corporate"===Qe.paidBy?' "'.concat(Qe.corporate,'" '):""]})})]})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Qe.OTCCharges&&0!==Qe.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Qe.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Qe._id)&&!Qe.paid&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return Qe._id,I(Qe),void B(!0)},children:"Pay"}),!(z.edit&&z.person._id===Qe._id)&&Qe.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(it.a,{className:n.checkIconSmall})," ","Paid by ",Qe.paidBy,"corporate"===Qe.paidBy?' "'.concat(Qe.corporate,'" '):""]}),Object(a.jsx)(et.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return pt(!0)},children:Object(a.jsx)($t.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Qe.OTCCharges&&0!==Qe.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat((Qe.deposit+Qe.OTCCharges).toLocaleString("en-GB"))})]})})]})})},"panel0")}),Object(a.jsx)(G.a,{className:n.backdrop,open:ae||re||be,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Bo,{booking:F,open:v,handleClose:function(){B(!1),I(null)}})]}),Object(a.jsxs)(vt.a,{open:jt,onClose:ft,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:ft,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Nt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(vt.a,{open:P,onClose:xt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:xt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:wt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Do=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Ro=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Lo(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Po(e){var t=Do(),n=i.a.useState(25),c=Object(s.a)(n,2),r=c[0],d=c[1],l=Object(o.useState)(!1),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(s.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(en(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(s.a)(k,2),B=v[0],S=v[1],T=Object(o.useState)(en(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(s.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),_=Object(s.a)(A,2),M=_[0],F=_[1],I=Object(o.useState)(!0),E=Object(s.a)(I,2),U=E[0],H=E[1],G=Object(o.useState)(!0),q=Object(s.a)(G,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(s.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),se=Object(s.a)(re,2),de=se[0],le=se[1],be=Object(o.useState)(!0),ue=Object(s.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(s.a)(xe,2),ke=Oe[0],Ce=Oe[1],Se=Object(o.useState)(!0),Ne=Object(s.a)(Se,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(s.a)(Le,2),Me=Ae[0],Fe=Ae[1],Ie=Object(o.useState)(!0),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(rt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(go.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(rt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(go.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(s.a)(Ge,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(s.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),tt=Object(s.a)(Ze,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(s.a)(ot,2),ct=it[0],st=it[1],dt=Object(o.useState)(Oo[0]),lt=Object(s.a)(dt,2),bt=lt[0],ut=lt[1],jt=i.a.useState(""),pt=Object(s.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),Nt=function(t){var n=ho.getAllBookings;"today"===e.date?n=ho.getTodayBookings:"old"===e.date?n=ho.getOldBookings:"future"===e.date?n=ho.getFutureBookings:"recent"===e.date?n=ho.getRecentBookingsAll:"deleted"===e.date&&(n=ho.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(xt.a)(e.data),cachedBookings:Object(xt.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),Nt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0||e.service.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(xt.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(xt.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){Nt(r)}),[Ve.bookingDialogDataChanged]);var Dt,Rt,Lt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),st(!0)},Pt=i.a.useState(1),At=Object(s.a)(Pt,2),_t=At[0],Mt=At[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Rt=e.date,"today"===Rt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===Rt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Rt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Rt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Rt?Object(a.jsx)(Be.a,{style:{fontSize:"2.2rem"}}):"completed"===Rt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===Rt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Rt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===Rt?Object(a.jsx)(_e.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Ro(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),Nt(r)},children:Object(a.jsx)(wt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(bn.a,{style:{color:"#009900"},icon:un.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(Dt=e.date,"live"===Dt||"positive"===Dt||"late"===Dt||"today"===Dt),children:Object(a.jsxs)(W.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(yt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),Nt(e.target.value)},children:[Object(a.jsx)(kt.a,{value:25,children:"25"}),Object(a.jsx)(kt.a,{value:50,children:"50"}),Object(a.jsx)(kt.a,{value:100,children:"100"}),Object(a.jsx)(kt.a,{value:500,children:"500"}),Object(a.jsx)(kt.a,{value:1e3,children:"1000"}),Object(a.jsx)(kt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(mt.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:_t,onPageChange:function(e){Mt(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(wo,{booking:nt,open:ct,onClose:function(){at(null),st(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(vt.a,{maxWidth:"lg",open:u,onClose:function(){ut(Oo[0]),F(!1),j(!1)},PaperComponent:Lo,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(bn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:un.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(Tt.a,{checked:M,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),M&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:bt,onChange:function(e){ut(e.target.value)},children:Oo.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(pn.a,{utils:jn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),S(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(yn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:de,onChange:function(e){le(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:Me,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:We,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Me&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),We&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return M?e.bookingDate>=B&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===bt:e.bookingDate>=B&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(go.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Me&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),We&&Object(a.jsx)("td",{className:t.td,children:mo.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Ao(e){return Object(a.jsx)(M.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function _o(e,t){return{time:e,amount:t}}var Mo=[_o("09:00",0),_o("10:00",0),_o("11:00",0),_o("12:00",0),_o("13:00",0),_o("14:00",0),_o("15:00",0),_o("16:00",0),_o("17:00",0),_o("18:00",void 0)],Fo=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Io(){var e=Object(Sn.a)(),t=i.a.useState(Mo),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),l=Object(s.a)(d,2),b=l[0],u=l[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=tn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,ho.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(_o("09:00",Fo(o,"09"))),n.push(_o("10:00",Fo(o,"10"))),n.push(_o("11:00",Fo(o,"11"))),n.push(_o("12:00",Fo(o,"12"))),n.push(_o("13:00",Fo(o,"13"))),n.push(_o("14:00",Fo(o,"14"))),n.push(_o("15:00",Fo(o,"15"))),n.push(_o("16:00",Fo(o,"16"))),n.push(_o("17:00",Fo(o,"17"))),n.push(_o("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Today"}),Object(a.jsx)(Tn.a,{children:Object(a.jsxs)(Nn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(wn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(Dn.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Rn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Ln.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Eo=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Wo=function(e){if(1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())return null;var t,n=e.getMinutes(),a=e.getHours();if(function(e){return 4===e.getDay()}(e)&&a<13)return null;if(function(e){return 5===e.getDay()}(e)&&a>=13)return null;if(a<10||a>=18)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},zo=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Uo(){var e=Eo(),t=i.a.useState(new Date),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(null),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(s.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Wo(c);if(e){var t=en(c,"yyyy-mm-dd");C(!0),ho.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(xt.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var B=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Current Visits"}),Object(a.jsx)(M.a,{component:"p",variant:"h6",children:zo(Wo(c))}),Object(a.jsxs)(M.a,{color:"textSecondary",className:e.depositContext,children:["on ",en(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return B(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(wo,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Ho=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Yo(){var e=Ho(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(s.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:l.bookings,isFetching:!0}),m(!0),ho.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:l.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Recent Bookings"}),Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"TimeStamp"}),Object(a.jsx)(Yn.a,{children:"Fullname"}),Object(a.jsx)(Yn.a,{children:"Email"}),Object(a.jsx)(Yn.a,{children:"Tel"}),Object(a.jsx)(Yn.a,{children:"Service"}),Object(a.jsx)(Yn.a,{children:"Booked Date"}),Object(a.jsx)(Yn.a,{children:"Booked Time"})]})}),Object(a.jsx)(Hn.a,{children:l.bookings.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:y(e.timeStamp)}),Object(a.jsx)(Yn.a,{children:e.fullname}),Object(a.jsx)(Yn.a,{children:e.email}),Object(a.jsx)(Yn.a,{children:e.phone}),Object(a.jsx)(Yn.a,{children:e.service}),Object(a.jsx)(Yn.a,{children:Object(go.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Yn.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:ts("gynae","recentBookings")})}))},children:"See more records"})})]})}var Vo=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Go(){var e=Vo(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Io,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Uo,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Yo,{})})})]})})}var Ko=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function qo(){var e=Ko(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState({edit:!1,person:null}),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!1),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState(!1),P=Object(s.a)(D,2),A=P[0],_=P[1],F=i.a.useState(!1),I=Object(s.a)(F,2),E=I[0],W=I[1],z=i.a.useState({}),U=Object(s.a)(z,2),H=U[0],Y=U[1],V=i.a.useState(""),G=Object(s.a)(V,2),q=G[0],X=G[1],J=i.a.useState(""),$=Object(s.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(s.a)(oe,2),ce=ie[0],re=ie[1],se=i.a.useState(""),de=Object(s.a)(se,2),le=de[0],be=de[1],ue=i.a.useState(""),je=Object(s.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(s.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Be=function(e){he(e.target.value)},Se=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),X(Object(go.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=le,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(go.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),ho.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,_(!0),ho.deleteBooking(n).then((function(e){_(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){_(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,W(!0),ho.unDeleteBooking(n).then((function(e){W(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){W(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(Xe.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:l==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)($e.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(Ze.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(M.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(M.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(Je.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(go.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var Xo=function(e){return"boolean"===typeof e};function Jo(e){var t=e.inputRef,n=Object(Ue.a)(e,["inputRef"]);return Object(a.jsx)(Ye.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var $o=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Qo(){var e=$o(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(s.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!Xo(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(s.a)(d,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){ho.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),ho.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(M.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(W.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Jo,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(qo,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(I.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Zo=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ei=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=Zo(),l=i.a.useContext(C),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(s.a)(k,2),B=v[0],w=v[1],D=i.a.useState(!1),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=(_[0],_[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=tn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=tn()(new Date,"yyyy-mm-dd");M(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),s=tn()(r,"yyyy-mm-dd");f(s),y(r),P(!0);var d=tn()(new Date,"yyyy-mm-dd");M(s<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,ho.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var s=tn()(new Date,"yyyy-mm-dd")===tn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:s?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=B,-1===F?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(B)]})})},ti=function e(){Object(ne.a)(this,e)};ti.getMonthRange=function(e,t){return new ka.a.Calendar(ka.a.SUNDAY).itermonthdates(t,e)};var ni=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ai=[1,2,3,4,5,6,7],oi=[1,2,3,4,5,6],ii=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),ci=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=ii(),r=ti.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ni.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:oi.map((function(e){return Object(a.jsx)("tr",{children:ai.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(ei,{cellIndex:(e-1)*ai.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*ai.length+i))})}))})}))})]})})},ri=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),si=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=ri(),d=i.a.useContext(C),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(-1),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(s.a)(y,2),v=k[0],B=k[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");O(t<e),B(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return ho.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(xt.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var S;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(S=h,-1===S?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):S>0?S>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:S<10?" ".concat(S):"".concat(S)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:S<10?" ".concat(S):"".concat(S)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},di=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],li=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),bi=function(e){var t=e.dates,n=e.dayClicked,o=li();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:tn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:tn()(e,"mmm ")}),Object(a.jsx)("span",{style:tn()(new Date,"yyyy-mm-dd")===tn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:tn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:di.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(si,{dayClicked:n,date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},ui=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),ji=function(e){e.key;var t=e.date,n=e.time,c=ui(),r=i.a.useContext(C),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(null),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!0),w=Object(s.a)(B,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(s.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(s.a)(P,2),_=A[0],M=A[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(l.dayViewCalFilter&&l.dayViewCalFilter.trim().length>0){var e=l.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(xt.a)(p))}),[l.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(S.a.mark((function e(){var a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=l.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!_){e.next=9;break}return e.next=7,ho.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,l.bookingDialogDataChanged]);var F,I=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(F=x,null===F?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F.length>0?F.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:I(e.status),onClick:function(t){return function(e,t){v(t),M(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})):void 0)}),Object(a.jsx)(wo,{booking:k,open:_,onClose:function(){M(!1)}})]})},pi=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],hi=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),gi=function(e){var t=e.date,n=hi();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:tn()(new Date,"yyyy-mm-dd")===tn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:tn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:pi.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(ji,{date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},fi=["January","February","March","April","May","June","July","August","September","October","November","December"],xi=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function mi(){var e=xi(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState((new Date).getFullYear()),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState([]),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("month"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState("month"),F=Object(s.a)(M,2),I=F[0],E=F[1],W=i.a.useState(""),z=Object(s.a)(W,2),U=z[0],Y=z[1],V=function(){Y(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var G,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),E("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(et.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===l&&h(p-1);var t=1===l?12:l-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Da.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(et.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===l&&h(p+1);var t=12===l?1:l+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(La.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(fi[l-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?tn()(n,"d"):tn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(et.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(rt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(da.a,{value:I,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(sa.a,{style:"month"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(sa.a,{style:"week"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(sa.a,{style:"day"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(G=A,"month"===G?Object(a.jsx)(ci,{dayClicked:q,month:l,year:p}):"week"===G?Object(a.jsx)(bi,{dayClicked:q,dates:T}):"day"===G?Object(a.jsx)(gi,{date:x}):void 0)]})}var Oi=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),yi=function e(){Object(ne.a)(this,e)};yi.sendRegFormEmail=function(e){return Oi.post("/api/gp/book/sendregformemail?id=".concat(e))},yi.payBooking=function(e,t,n,a){return Oi.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},yi.unPayBooking=function(e){return Oi.post("/api/gp/book/unpaybooking?id=".concat(e))},yi.getShouldRefundsCount=function(){return Oi.get("/api/gp/book/getshouldrefundscount?")},yi.refundBooking=function(e){return Oi.post("/api/gp/payment/refundpayment",{bookingId:e})},yi.getBookingsStatsByDateStr=function(e){return Oi.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},yi.getBookingsCountByDateStr=function(e){return Oi.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},yi.getAllBookingsCountAll=function(){return Oi.get("/api/gp/book/getallbookingscountall")},yi.getBookingsCountByDateStrandTime=function(e,t,n){return Oi.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},yi.getBookingsByDateStrandTime=function(e,t){return Oi.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},yi.getAllBookingsCountByDateStr=function(e){return Oi.get("/api/gp/book/getallbookingscountbydatestr?date=".concat(e))},yi.getAllBookingsCountByDateStrandTime=function(e,t,n){return Oi.get("/api/gp/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},yi.getAllBookingsByDateStrandTime=function(e,t){return Oi.get("/api/gp/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},yi.changeBackToBookingMade=function(e){return Oi.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},yi.changeToPatientAttended=function(e){return Oi.post("/api/gp/book/changetopatientattended?id=".concat(e))},yi.updateBooking=function(e){return Oi.post("/api/gp/book/updatebookappointment",e)},yi.updateBookingTime=function(e){return Oi.post("/api/gp/book/updatebookappointmenttime",e)},yi.deleteBooking=function(e){return Oi.post("/api/gp/book/deletebookappointment?id=".concat(e))},yi.unDeleteBooking=function(e){return Oi.post("/api/gp/book/undeletebookappointment?id=".concat(e))},yi.getBookingsByRef=function(e){return Oi.get("/api/gp/book/getbookingsbyref?ref=".concat(e))},yi.getBookingById=function(e){return Oi.get("/api/gp/book/getbookingbyid?id=".concat(e))},yi.getAllBookings=function(e){return e||(e=25),Oi.get("/api/gp/book/getallbookings?limit=".concat(e))},yi.getDeletedBookings=function(e){return e||(e=25),Oi.get("/api/gp/book/getdeletedbookings?limit=".concat(e))},yi.getTodayBookings=function(){return Oi.get("/api/gp/book/gettodaybookings")},yi.getOldBookings=function(e){return e||(e=25),Oi.get("/api/gp/book/getoldbookings?limit=".concat(e))},yi.getFutureBookings=function(e){return e||(e=25),Oi.get("/api/gp/book/getfuturebookings?limit=".concat(e))},yi.getRecentBookings=function(){return Oi.get("/api/gp/book/getrecentbookings")},yi.getRecentBookingsAll=function(e){return e||(e=25),Oi.get("/api/gp/book/getrecentbookingsall?limit=".concat(e))};var ki=n(71),vi=function e(){Object(ne.a)(this,e)};vi.downloadGPRegForm=function(e){return Oi.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Ci=n(229),Bi=n.n(Ci),Si=["Visa Medical"],Ti=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}}));function Ni(e){var t=e.inputRef,n=e.onChange,o=Object(Ue.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yo.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function wi(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Di(e){var t=Ti(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),l=Object(s.a)(d,2),b=l[0],u=l[1],j=Object(o.useState)(Si[0]),p=Object(s.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(s.a)(y,2),v=k[0],B=k[1],w=Object(o.useState)(!1),D=Object(s.a)(w,2),P=D[0],A=D[1],_=function(){m||(e.handleClose(),u("credit card"),B(""),g(Si[0]),O(!1))},M=function(){var t=Object(T.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,yi.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),_(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"xs",open:e.open,onClose:_,PaperComponent:wi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ht.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){B(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Ni,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(W.a,{component:"fieldset",children:[Object(a.jsxs)(Vt.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(Y.a,{value:"credit card",control:Object(a.jsx)(Yt.a,{}),label:"Credit Card"}),Object(a.jsx)(Y.a,{value:"cash",control:Object(a.jsx)(Yt.a,{}),label:"Cash"}),Object(a.jsx)(Y.a,{value:"corporate",control:Object(a.jsx)(Yt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(W.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Si.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:_,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:M,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(G.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Ri=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}})),Li=i.a.forwardRef((function(e,t){return Object(a.jsx)(At.a,Object(N.a)({direction:"up",ref:t},e))}));function Pi(e){return Object(a.jsx)(Pt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Ai(e){var t,n=Ri(),c=i.a.useContext(C),r=Object(s.a)(c,2),d=r[0],l=r[1],b=Object(o.useState)(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(s.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(s.a)(y,2),v=k[0],B=k[1],w=i.a.useState(!1),D=Object(s.a)(w,2),P=D[0],A=D[1],_=i.a.useState(null),M=Object(s.a)(_,2),F=M[0],I=M[1],E=i.a.useState({edit:!1,person:null}),W=Object(s.a)(E,2),z=W[0],U=W[1],H=i.a.useState({delete:!1,person:null}),Y=Object(s.a)(H,2),V=Y[0],J=Y[1],$=i.a.useState({restore:!1,person:null}),Q=Object(s.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(!1),ne=Object(s.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(s.a)(ie,2),re=ce[0],se=ce[1],de=i.a.useState(!1),le=Object(s.a)(de,2),be=le[0],ue=le[1],je=i.a.useState({}),pe=Object(s.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState(""),xe=Object(s.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(""),ke=Object(s.a)(ye,2),ve=ke[0],Ce=ke[1],Be=i.a.useState(""),Se=Object(s.a)(Be,2),Te=Se[0],Ne=Se[1],we=i.a.useState(""),De=Object(s.a)(we,2),Re=De[0],Le=De[1],Ae=i.a.useState(""),_e=Object(s.a)(Ae,2),Me=_e[0],Fe=_e[1],Ie=i.a.useState(""),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=i.a.useState(""),He=Object(s.a)(Ue,2),Ye=He[0],Ve=(He[1],i.a.useState(!1)),Ge=Object(s.a)(Ve,2),Ke=Ge[0],qe=Ge[1],Xe=i.a.useState(null),Je=Object(s.a)(Xe,2),$e=Je[0],Qe=Je[1],Ze=i.a.useState(!1),tt=Object(s.a)(Ze,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),ct=Object(s.a)(ot,2),rt=ct[0],st=ct[1],dt=i.a.useState(!1),bt=Object(s.a)(dt,2),ut=bt[0],jt=bt[1],pt=i.a.useState(!1),ht=Object(s.a)(pt,2),gt=(ht[0],ht[1],function(){jt(!1),I(null)}),ft=function(){A(!1),I(null)};Object(o.useEffect)((function(){if($e){var e=me!==Object(ki.FormatDateFromString)($e.bookingDate)||ve!==$e.bookingTime||Te!==$e.fullname||Re!==$e.email||Me!==$e.phone||We!==$e.notes;at(e)}}),[rt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){U({edit:!1,person:null}),at(!1)}),500)}),[e.open]);var xt=function(e,t){if(e)Ne(t.fullname),Oe(Object(ki.FormatDateFromString)(t.bookingDate)),Ce(t.bookingTime.toUpperCase()),Le(t.email),Fe(t.phone),t.notes&&ze(t.notes),U({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Re,n.phone=Me,n.fullname=Te,n.notes=We,n.service=Ye,n.bookingDate=Object(ki.RevertFormatDateFromString)(me),n.bookingTime=ve,n.bookingRef=t.bookingRef,mt(n)&&Ot({bookingId:a,person:n})}}else U({edit:e,person:t}),at(!1)},mt=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,ge(Object(N.a)(Object(N.a)({},he),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ge(Object(N.a)(Object(N.a)({},he),{},{bookingTimeError:!0}))),!t},Ot=function(e){oe(!0),yi.updateBooking(e).then((function(e){oe(!1),U({edit:!1,person:null}),qe(!Ke)})).catch((function(e){oe(!1),U({edit:!1,person:null}),console.log(e)}))},yt=function(e,t){var n;e?J({delete:e,person:t}):e||t?!e&&t&&(n=t._id,se(!0),yi.deleteBooking(n).then((function(e){se(!1),J({delete:!1,person:null}),qe(!Ke)})).catch((function(e){se(!1),J({delete:!1,person:null}),console.log(e)}))):J({delete:e,person:t})},kt=function(e,t){var n;e?ee({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),yi.unDeleteBooking(n).then((function(e){ue(!1),ee({restore:!1,person:null}),qe(!Ke)})).catch((function(e){ue(!1),ee({restore:!1,person:null}),console.log(e)}))):ee({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(yi.getBookingById(e.booking._id).then((function(e){Qe(e.data)})).catch((function(e){console.log(e)})),l((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Ke,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&Qe(e.booking)}),[e.booking]);var Tt,Nt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,yi.unPayBooking($e._id);case 4:oe(!1),jt(!1),qe(!Ke),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),oe(!1),jt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,yi.refundBooking($e._id);case 4:oe(!1),Lt(),A(!1),qe(!Ke),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),oe(!1),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yi.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&l((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:$e&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(vt.a,{maxWidth:"sm",open:e.open,TransitionComponent:Li,keepMounted:!0,onClose:function(){x(!1),e.onClose()},PaperComponent:Pi,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ct.a,{id:"alert-dialog-slide-title",style:$e.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(et.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/".concat($e._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(Zt.a,{style:$e.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:$e.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat($e.fullname)})}),$e.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:$e.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===$e._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!$e.deleted||Z.restore&&Z.person._id===$e._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,$e)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){kt(!1,$e)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:$e.deleted||V.delete||z.edit&&z.person._id===$e._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){xt(!0,$e)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ae||!nt,onClick:function(){xt(!1,$e)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ae,onClick:function(){xt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===$e._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||$e.deleted||z.edit||V.delete&&V.person._id===$e._id,children:[$e.OTCCharges>0&&Object(a.jsx)(et.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:$e.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){yt(!0,$e)},className:n.DeleteButton,children:"Delete This Record"})})}),0===$e.OTCCharges&&Object(a.jsx)(R.a,{disabled:$e.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){yt(!0,$e)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re,onClick:function(){yt(!1,$e)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(V.delete&&V.person._id===$e._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){yt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:Object(ki.FormatDateFromString)($e.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingDateError,className:n.TextBox,value:me,onChange:function(e){Oe(e.target.value),ge(Object(N.a)(Object(N.a)({},he),{},{bookingDateError:!1})),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:$e.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingTimeError,className:n.TextBox,value:ve,onChange:function(e){Ce(e.target.value),ge(Object(N.a)(Object(N.a)({},he),{},{bookingTimeError:!1})),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:$e.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Te,onChange:function(e){Ne(e.target.value),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:$e.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Re,onChange:function(e){Le(e.target.value),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:null===(t=$e.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Me,onChange:function(e){Fe(e.target.value),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===$e._id,className:n.infoData,children:$e.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===$e._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:We,onChange:function(e){ze(e.target.value),st(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(Tt=$e.status,"booked"===Tt?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===Tt?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===$e.status&&!(z.edit&&z.person._id===$e._id)&&!$e.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ae,style:{width:"300px"},onClick:function(e){return t=$e._id,oe(!0),void yi.changeBackToBookingMade(t).then((function(e){oe(!1),qe(!Ke)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===$e.status&&!(z.edit&&z.person._id===$e._id)&&!$e.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ae,style:{width:"300px"},onClick:function(e){return t=$e._id,oe(!0),void yi.changeToPatientAttended(t).then((function(e){oe(!1),qe(!Ke)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:$e.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!$e.formData,startIcon:Object(a.jsx)(lt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=$e._id,vi.downloadGPRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:$e.deleted||z.edit||$e.formData,children:Object(a.jsxs)(R.a,{startIcon:Object(a.jsx)(Mt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=$e._id,oe(!0),x(!1),yi.sendRegFormEmail(e).then((function(e){oe(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),oe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Bt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:$e.OTCCharges&&0!==$e.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat($e.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===$e._id)&&!$e.paid&&!$e.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return $e._id,I($e),void B(!0)},children:"Pay"}),!(z.edit&&z.person._id===$e._id)&&$e.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(it.a,{className:n.checkIconSmall})," ","Paid by ",$e.paidBy,"corporate"===$e.paidBy?' "'.concat($e.corporate,'" '):""]}),Object(a.jsx)(et.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return jt(!0)},children:Object(a.jsx)($t.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(G.a,{className:n.backdrop,open:ae||re||be,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Di,{booking:F,open:v,handleClose:function(){B(!1),I(null)}})]}),Object(a.jsxs)(vt.a,{open:ut,onClose:gt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:gt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Nt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(vt.a,{open:P,onClose:ft,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:ft,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:wt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var _i=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Mi=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Fi(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Ii(e){var t=_i(),n=i.a.useState(25),c=Object(s.a)(n,2),r=c[0],d=c[1],l=Object(o.useState)(!1),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(s.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(en(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(s.a)(k,2),B=v[0],S=v[1],T=Object(o.useState)(en(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(s.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),_=Object(s.a)(A,2),M=_[0],F=_[1],I=Object(o.useState)(!0),E=Object(s.a)(I,2),U=E[0],H=E[1],G=Object(o.useState)(!0),q=Object(s.a)(G,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(s.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),se=Object(s.a)(re,2),de=se[0],le=se[1],be=Object(o.useState)(!0),ue=Object(s.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(s.a)(xe,2),ke=Oe[0],Ce=Oe[1],Se=Object(o.useState)(!0),Ne=Object(s.a)(Se,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(s.a)(Le,2),Me=Ae[0],Fe=Ae[1],Ie=Object(o.useState)(!0),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(rt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ki.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(rt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(ki.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(s.a)(Ge,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(s.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),tt=Object(s.a)(Ze,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(s.a)(ot,2),ct=it[0],st=it[1],dt=Object(o.useState)(Si[0]),lt=Object(s.a)(dt,2),bt=lt[0],ut=lt[1],jt=i.a.useState(""),pt=Object(s.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),Nt=function(t){var n=yi.getAllBookings;"today"===e.date?n=yi.getTodayBookings:"old"===e.date?n=yi.getOldBookings:"future"===e.date?n=yi.getFutureBookings:"recent"===e.date?n=yi.getRecentBookingsAll:"deleted"===e.date&&(n=yi.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(xt.a)(e.data),cachedBookings:Object(xt.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),Nt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0||e.service.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(xt.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(xt.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){Nt(r)}),[Ve.bookingDialogDataChanged]);var Dt,Rt,Lt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),st(!0)},Pt=i.a.useState(1),At=Object(s.a)(Pt,2),_t=At[0],Mt=At[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Rt=e.date,"today"===Rt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===Rt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Rt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Rt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Rt?Object(a.jsx)(Be.a,{style:{fontSize:"2.2rem"}}):"completed"===Rt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===Rt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Rt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===Rt?Object(a.jsx)(_e.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Mi(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),Nt(r)},children:Object(a.jsx)(wt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(bn.a,{style:{color:"#009900"},icon:un.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(Dt=e.date,"live"===Dt||"positive"===Dt||"late"===Dt||"today"===Dt),children:Object(a.jsxs)(W.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(yt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),Nt(e.target.value)},children:[Object(a.jsx)(kt.a,{value:25,children:"25"}),Object(a.jsx)(kt.a,{value:50,children:"50"}),Object(a.jsx)(kt.a,{value:100,children:"100"}),Object(a.jsx)(kt.a,{value:500,children:"500"}),Object(a.jsx)(kt.a,{value:1e3,children:"1000"}),Object(a.jsx)(kt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(mt.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:_t,onPageChange:function(e){Mt(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Ai,{booking:nt,open:ct,onClose:function(){at(null),st(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(vt.a,{maxWidth:"lg",open:u,onClose:function(){ut(Si[0]),F(!1),j(!1)},PaperComponent:Fi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(bn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:un.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(Tt.a,{checked:M,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),M&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:bt,onChange:function(e){ut(e.target.value)},children:Si.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(pn.a,{utils:jn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),S(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(yn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:de,onChange:function(e){le(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:Me,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:We,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Me&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),We&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return M?e.bookingDate>=B&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===bt:e.bookingDate>=B&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(ki.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Me&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),We&&Object(a.jsx)("td",{className:t.td,children:Bi.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Ei(e){return Object(a.jsx)(M.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Wi(e,t){return{time:e,amount:t}}var zi=[Wi("09:00",0),Wi("10:00",0),Wi("11:00",0),Wi("12:00",0),Wi("13:00",0),Wi("14:00",0),Wi("15:00",0),Wi("16:00",0),Wi("17:00",0),Wi("18:00",void 0)],Ui=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Hi(){var e=Object(Sn.a)(),t=i.a.useState(zi),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),l=Object(s.a)(d,2),b=l[0],u=l[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=tn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,yi.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Wi("09:00",Ui(o,"09"))),n.push(Wi("10:00",Ui(o,"10"))),n.push(Wi("11:00",Ui(o,"11"))),n.push(Wi("12:00",Ui(o,"12"))),n.push(Wi("13:00",Ui(o,"13"))),n.push(Wi("14:00",Ui(o,"14"))),n.push(Wi("15:00",Ui(o,"15"))),n.push(Wi("16:00",Ui(o,"16"))),n.push(Wi("17:00",Ui(o,"17"))),n.push(Wi("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ei,{children:"Today"}),Object(a.jsx)(Tn.a,{children:Object(a.jsxs)(Nn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(wn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(Dn.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Rn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Ln.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Yi=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Vi=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},Gi=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Ki(){var e=Yi(),t=i.a.useState(new Date),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(null),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(s.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Vi(c);if(e){var t=en(c,"yyyy-mm-dd");C(!0),yi.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(xt.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var B=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ei,{children:"Current Visits"}),Object(a.jsx)(M.a,{component:"p",variant:"h6",children:Gi(Vi(c))}),Object(a.jsxs)(M.a,{color:"textSecondary",className:e.depositContext,children:["on ",en(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return B(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Ai,{booking:h,open:m,onClose:function(){O(!1)}})]})}var qi=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Xi(){var e=qi(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(s.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:l.bookings,isFetching:!0}),m(!0),yi.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:l.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Ei,{children:"Recent Bookings"}),Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"TimeStamp"}),Object(a.jsx)(Yn.a,{children:"Fullname"}),Object(a.jsx)(Yn.a,{children:"Email"}),Object(a.jsx)(Yn.a,{children:"Tel"}),Object(a.jsx)(Yn.a,{children:"Booked Date"}),Object(a.jsx)(Yn.a,{children:"Booked Time"})]})}),Object(a.jsx)(Hn.a,{children:l.bookings.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:y(e.timeStamp)}),Object(a.jsx)(Yn.a,{children:e.fullname}),Object(a.jsx)(Yn.a,{children:e.email}),Object(a.jsx)(Yn.a,{children:e.phone}),Object(a.jsx)(Yn.a,{children:Object(ki.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Yn.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:ts("gynae","recentBookings")})}))},children:"See more records"})})]})}var Ji=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function $i(){var e=Ji(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Hi,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Ki,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(Xi,{})})})]})})}var Qi=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Zi(){var e=Qi(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState({edit:!1,person:null}),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!1),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState(!1),P=Object(s.a)(D,2),A=P[0],_=P[1],F=i.a.useState(!1),I=Object(s.a)(F,2),E=I[0],W=I[1],z=i.a.useState({}),U=Object(s.a)(z,2),H=U[0],Y=U[1],V=i.a.useState(""),G=Object(s.a)(V,2),q=G[0],X=G[1],J=i.a.useState(""),$=Object(s.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(s.a)(oe,2),ce=ie[0],re=ie[1],se=i.a.useState(""),de=Object(s.a)(se,2),le=de[0],be=de[1],ue=i.a.useState(""),je=Object(s.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(s.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Be=function(e){he(e.target.value)},Se=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),X(Object(ki.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=le,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(ki.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),yi.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,_(!0),yi.deleteBooking(n).then((function(e){_(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){_(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,W(!0),yi.unDeleteBooking(n).then((function(e){W(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){W(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(Xe.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:l==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)($e.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(Ze.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(M.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(M.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(Je.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(ki.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var ec=function(e){return"boolean"===typeof e};function tc(e){var t=e.inputRef,n=Object(Ue.a)(e,["inputRef"]);return Object(a.jsx)(Ye.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var nc=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function ac(){var e=nc(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(s.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!ec(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(s.a)(d,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){yi.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),yi.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(M.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(W.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:tc,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Zi,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(I.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var oc=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),ic=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=oc(),l=i.a.useContext(C),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(s.a)(k,2),B=v[0],w=v[1],D=i.a.useState(!1),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=(_[0],_[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=tn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=tn()(new Date,"yyyy-mm-dd");M(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),s=tn()(r,"yyyy-mm-dd");f(s),y(r),P(!0);var d=tn()(new Date,"yyyy-mm-dd");M(s<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,yi.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var s=tn()(new Date,"yyyy-mm-dd")===tn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:s?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=B,-1===F?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(B)]})})},cc=function e(){Object(ne.a)(this,e)};cc.getMonthRange=function(e,t){return new ka.a.Calendar(ka.a.SUNDAY).itermonthdates(t,e)};var rc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],sc=[1,2,3,4,5,6,7],dc=[1,2,3,4,5,6],lc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),bc=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=lc(),r=cc.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:rc.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:dc.map((function(e){return Object(a.jsx)("tr",{children:sc.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(ic,{cellIndex:(e-1)*sc.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*sc.length+i))})}))})}))})]})})},uc=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),jc=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=uc(),d=i.a.useContext(C),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(-1),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(s.a)(y,2),v=k[0],B=k[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");O(t<e),B(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return yi.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(xt.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var S;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(S=h,-1===S?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):S>0?S>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:S<10?" ".concat(S):"".concat(S)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:S<10?" ".concat(S):"".concat(S)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},pc=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],hc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),gc=function(e){var t=e.dates,n=e.dayClicked,o=hc();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:tn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:tn()(e,"mmm ")}),Object(a.jsx)("span",{style:tn()(new Date,"yyyy-mm-dd")===tn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:tn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:pc.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(jc,{dayClicked:n,date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},fc=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),xc=function(e){e.key;var t=e.date,n=e.time,c=fc(),r=i.a.useContext(C),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(null),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!0),w=Object(s.a)(B,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(s.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(s.a)(P,2),_=A[0],M=A[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(l.dayViewCalFilter&&l.dayViewCalFilter.trim().length>0){var e=l.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(xt.a)(p))}),[l.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(S.a.mark((function e(){var a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=l.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!_){e.next=9;break}return e.next=7,yi.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,l.bookingDialogDataChanged]);var F,I=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(F=x,null===F?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F.length>0?F.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:I(e.status),onClick:function(t){return function(e,t){v(t),M(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})):void 0)}),Object(a.jsx)(Ai,{booking:k,open:_,onClose:function(){M(!1)}})]})},mc=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Oc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),yc=function(e){var t=e.date,n=Oc();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:tn()(new Date,"yyyy-mm-dd")===tn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:tn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:mc.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(xc,{date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},kc=["January","February","March","April","May","June","July","August","September","October","November","December"],vc=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Cc(){var e=vc(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState((new Date).getFullYear()),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState([]),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("month"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState("month"),F=Object(s.a)(M,2),I=F[0],E=F[1],W=i.a.useState(""),z=Object(s.a)(W,2),U=z[0],Y=z[1],V=function(){Y(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var G,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),E("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(et.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===l&&h(p-1);var t=1===l?12:l-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Da.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(et.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===l&&h(p+1);var t=12===l?1:l+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(La.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(kc[l-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?tn()(n,"d"):tn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(et.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(rt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(da.a,{value:I,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(sa.a,{style:"month"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(sa.a,{style:"week"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(sa.a,{style:"day"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(G=A,"month"===G?Object(a.jsx)(bc,{dayClicked:q,month:l,year:p}):"week"===G?Object(a.jsx)(gc,{dayClicked:q,dates:T}):"day"===G?Object(a.jsx)(yc,{date:x}):void 0)]})}var Bc=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Sc=function e(){Object(ne.a)(this,e)};Sc.sendRegFormEmail=function(e){return Bc.post("/api/std/book/sendregformemail?id=".concat(e))},Sc.payBooking=function(e,t,n,a){return Bc.post("/api/std/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Sc.unPayBooking=function(e){return Bc.post("/api/std/book/unpaybooking?id=".concat(e))},Sc.getShouldRefundsCount=function(){return Bc.get("/api/std/book/getshouldrefundscount?")},Sc.refundBooking=function(e){return Bc.post("/api/std/payment/refundpayment",{bookingId:e})},Sc.getBookingsStatsByDateStr=function(e){return Bc.get("/api/std/book/getbookingsstatsbydatestr?date=".concat(e))},Sc.getBookingsCountByDateStr=function(e){return Bc.get("/api/std/book/getbookingscountbydatestr?date=".concat(e))},Sc.getAllBookingsCountAll=function(){return Bc.get("/api/std/book/getallbookingscountall")},Sc.getBookingsCountByDateStrandTime=function(e,t,n){return Bc.get("/api/std/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Sc.getBookingsByDateStrandTime=function(e,t){return Bc.get("/api/std/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Sc.getAllBookingsCountByDateStr=function(e){return Bc.get("/api/std/book/getallbookingscountbydatestr?date=".concat(e))},Sc.getAllBookingsCountByDateStrandTime=function(e,t,n){return Bc.get("/api/std/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Sc.getAllBookingsByDateStrandTime=function(e,t){return Bc.get("/api/std/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Sc.changeBackToBookingMade=function(e){return Bc.post("/api/std/book/changebacktobookingmade?id=".concat(e))},Sc.changeToPatientAttended=function(e){return Bc.post("/api/std/book/changetopatientattended?id=".concat(e))},Sc.updateBooking=function(e){return Bc.post("/api/std/book/updatebookappointment",e)},Sc.updateBookingTime=function(e){return Bc.post("/api/std/book/updatebookappointmenttime",e)},Sc.deleteBooking=function(e){return Bc.post("/api/std/book/deletebookappointment?id=".concat(e))},Sc.unDeleteBooking=function(e){return Bc.post("/api/std/book/undeletebookappointment?id=".concat(e))},Sc.getBookingsByRef=function(e){return Bc.get("/api/std/book/getbookingsbyref?ref=".concat(e))},Sc.getBookingById=function(e){return Bc.get("/api/std/book/getbookingbyid?id=".concat(e))},Sc.getAllBookings=function(e){return e||(e=25),Bc.get("/api/std/book/getallbookings?limit=".concat(e))},Sc.getDeletedBookings=function(e){return e||(e=25),Bc.get("/api/std/book/getdeletedbookings?limit=".concat(e))},Sc.getTodayBookings=function(){return Bc.get("/api/std/book/gettodaybookings")},Sc.getOldBookings=function(e){return e||(e=25),Bc.get("/api/std/book/getoldbookings?limit=".concat(e))},Sc.getFutureBookings=function(e){return e||(e=25),Bc.get("/api/std/book/getfuturebookings?limit=".concat(e))},Sc.getRecentBookings=function(){return Bc.get("/api/std/book/getrecentbookings")},Sc.getRecentBookingsAll=function(e){return e||(e=25),Bc.get("/api/std/book/getrecentbookingsall?limit=".concat(e))};var Tc=n(72),Nc=function e(){Object(ne.a)(this,e)};Nc.downloadGPRegForm=function(e){return Bc.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var wc=n(230),Dc=n.n(wc),Rc=["Visa Medical"],Lc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}}));function Pc(e){var t=e.inputRef,n=e.onChange,o=Object(Ue.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yo.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Ot.a);function Ac(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function _c(e){var t=Lc(),n=i.a.useContext(C),c=Object(s.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),l=Object(s.a)(d,2),b=l[0],u=l[1],j=Object(o.useState)(Rc[0]),p=Object(s.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(s.a)(y,2),v=k[0],B=k[1],w=Object(o.useState)(!1),D=Object(s.a)(w,2),P=D[0],A=D[1],_=function(){m||(e.handleClose(),u("credit card"),B(""),g(Rc[0]),O(!1))},M=function(){var t=Object(T.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Sc.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),_(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(vt.a,{maxWidth:"xs",open:e.open,onClose:_,PaperComponent:Ac,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ht.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){B(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Pc,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(W.a,{component:"fieldset",children:[Object(a.jsxs)(Vt.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(Y.a,{value:"credit card",control:Object(a.jsx)(Yt.a,{}),label:"Credit Card"}),Object(a.jsx)(Y.a,{value:"cash",control:Object(a.jsx)(Yt.a,{}),label:"Cash"}),Object(a.jsx)(Y.a,{value:"corporate",control:Object(a.jsx)(Yt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(W.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Rc.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:_,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:M,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(G.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Mc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}})),Fc=i.a.forwardRef((function(e,t){return Object(a.jsx)(At.a,Object(N.a)({direction:"up",ref:t},e))}));function Ic(e){return Object(a.jsx)(Pt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Ec(e){var t,n=Mc(),c=i.a.useContext(C),r=Object(s.a)(c,2),d=r[0],l=r[1],b=Object(o.useState)(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=(g[0],g[1]),x=i.a.useState(!1),m=Object(s.a)(x,2),O=(m[0],m[1],i.a.useState(!1)),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!1),w=Object(s.a)(B,2),D=w[0],P=w[1],A=i.a.useState(null),_=Object(s.a)(A,2),M=_[0],F=_[1],I=i.a.useState({edit:!1,person:null}),E=Object(s.a)(I,2),W=E[0],z=E[1],U=i.a.useState({delete:!1,person:null}),H=Object(s.a)(U,2),Y=H[0],V=H[1],J=i.a.useState({restore:!1,person:null}),$=Object(s.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(!1),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(!1),ie=Object(s.a)(oe,2),ce=ie[0],re=ie[1],se=i.a.useState(!1),de=Object(s.a)(se,2),le=de[0],be=de[1],ue=i.a.useState({}),je=Object(s.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(s.a)(ge,2),xe=fe[0],me=fe[1],Oe=i.a.useState(""),ye=Object(s.a)(Oe,2),ke=ye[0],ve=ye[1],Ce=i.a.useState(""),Be=Object(s.a)(Ce,2),Se=Be[0],Te=Be[1],Ne=i.a.useState(""),we=Object(s.a)(Ne,2),De=we[0],Re=we[1],Le=i.a.useState(""),Ae=Object(s.a)(Le,2),_e=Ae[0],Me=Ae[1],Fe=i.a.useState(""),Ie=Object(s.a)(Fe,2),Ee=Ie[0],We=Ie[1],ze=i.a.useState(""),Ue=Object(s.a)(ze,2),He=Ue[0],Ye=(Ue[1],i.a.useState(!1)),Ve=Object(s.a)(Ye,2),Ge=Ve[0],Ke=Ve[1],qe=i.a.useState(null),Xe=Object(s.a)(qe,2),Je=Xe[0],$e=Xe[1],Qe=i.a.useState(!1),Ze=Object(s.a)(Qe,2),tt=Ze[0],nt=Ze[1],at=i.a.useState(!1),ot=Object(s.a)(at,2),ct=ot[0],rt=ot[1],st=i.a.useState(!1),dt=Object(s.a)(st,2),lt=dt[0],bt=dt[1],ut=i.a.useState(!1),jt=Object(s.a)(ut,2),pt=(jt[0],jt[1],function(){bt(!1),F(null)}),ht=function(){P(!1),F(null)};Object(o.useEffect)((function(){if(Je){var e=xe!==Object(Tc.FormatDateFromString)(Je.bookingDate)||ke!==Je.bookingTime||Se!==Je.fullname||De!==Je.email||_e!==Je.phone||Ee!==Je.notes;nt(e)}}),[ct]),Object(o.useEffect)((function(){e.open||setTimeout((function(){z({edit:!1,person:null}),nt(!1)}),500)}),[e.open]);var gt=function(e,t){if(e)Te(t.fullname),me(Object(Tc.FormatDateFromString)(t.bookingDate)),ve(t.bookingTime.toUpperCase()),Re(t.email),Me(t.phone),t.notes&&We(t.notes),z({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=De,n.phone=_e,n.fullname=Se,n.notes=Ee,n.service=He,n.bookingDate=Object(Tc.RevertFormatDateFromString)(xe),n.bookingTime=ke,n.bookingRef=t.bookingRef,ft(n)&&xt({bookingId:a,person:n})}}else z({edit:e,person:t}),nt(!1)},ft=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,he(Object(N.a)(Object(N.a)({},pe),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,he(Object(N.a)(Object(N.a)({},pe),{},{bookingTimeError:!0}))),!t},xt=function(e){ae(!0),Sc.updateBooking(e).then((function(e){ae(!1),z({edit:!1,person:null}),Ke(!Ge)})).catch((function(e){ae(!1),z({edit:!1,person:null}),console.log(e)}))},mt=function(e,t){var n;e?V({delete:e,person:t}):e||t?!e&&t&&(n=t._id,re(!0),Sc.deleteBooking(n).then((function(e){re(!1),V({delete:!1,person:null}),Ke(!Ge)})).catch((function(e){re(!1),V({delete:!1,person:null}),console.log(e)}))):V({delete:e,person:t})},Ot=function(e,t){var n;e?Z({restore:e,person:t}):e||t?!e&&t&&(n=t._id,be(!0),Sc.unDeleteBooking(n).then((function(e){be(!1),Z({restore:!1,person:null}),Ke(!Ge)})).catch((function(e){be(!1),Z({restore:!1,person:null}),console.log(e)}))):Z({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Sc.getBookingById(e.booking._id).then((function(e){$e(e.data)})).catch((function(e){console.log(e)})),l((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Ge,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&$e(e.booking)}),[e.booking]);var yt,kt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),e.prev=1,e.next=4,Sc.unPayBooking(Je._id);case 4:ae(!1),bt(!1),Ke(!Ge),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ae(!1),bt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),e.prev=1,e.next=4,Sc.refundBooking(Je._id);case 4:ae(!1),Nt(),P(!1),Ke(!Ge),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ae(!1),P(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sc.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&l((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:Je&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(vt.a,{maxWidth:"sm",open:e.open,TransitionComponent:Fc,keepMounted:!0,onClose:function(){f(!1),e.onClose()},PaperComponent:Ic,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ct.a,{id:"alert-dialog-slide-title",style:Je.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(et.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/std/".concat(Je._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(Zt.a,{style:Je.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Je.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Je.fullname)})}),Je.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:Je.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(St.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(Q.restore&&Q.person._id===Je._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Je.deleted||Q.restore&&Q.person._id===Je._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ot(!0,Je)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Q.restore&&Q.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:le,onClick:function(){Ot(!1,Je)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Q.restore&&Q.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:le,onClick:function(){Ot(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Je.deleted||Y.delete||W.edit&&W.person._id===Je._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){gt(!0,Je)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(W.edit&&W.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ne||!tt,onClick:function(){gt(!1,Je)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(W.edit&&W.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ne,onClick:function(){gt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Je._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Je.deleted||W.edit||Y.delete&&Y.person._id===Je._id,children:[Je.OTCCharges>0&&Object(a.jsx)(et.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Je.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){mt(!0,Je)},className:n.DeleteButton,children:"Delete This Record"})})}),0===Je.OTCCharges&&Object(a.jsx)(R.a,{disabled:Je.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){mt(!0,Je)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ce,onClick:function(){mt(!1,Je)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Je._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ce,onClick:function(){mt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Object(Tc.FormatDateFromString)(Je.bookingDate)}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:pe.bookingDateError,className:n.TextBox,value:xe,onChange:function(e){me(e.target.value),he(Object(N.a)(Object(N.a)({},pe),{},{bookingDateError:!1})),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:pe.bookingTimeError,className:n.TextBox,value:ke,onChange:function(e){ve(e.target.value),he(Object(N.a)(Object(N.a)({},pe),{},{bookingTimeError:!1})),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.fullname}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Se,onChange:function(e){Te(e.target.value),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.email}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:De,onChange:function(e){Re(e.target.value),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:null===(t=Je.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:_e,onChange:function(e){Me(e.target.value),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.packageName})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.notes}),Object(a.jsx)("span",{hidden:!(W.edit&&W.person._id===Je._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){We(e.target.value),rt(!ct)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(yt=Je.status,"booked"===yt?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===yt?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===Je.status&&!(W.edit&&W.person._id===Je._id)&&!Je.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ne,style:{width:"300px"},onClick:function(e){return t=Je._id,ae(!0),void Sc.changeBackToBookingMade(t).then((function(e){ae(!1),Ke(!Ge)})).catch((function(e){console.log(e),ae(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===Je.status&&!(W.edit&&W.person._id===Je._id)&&!Je.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ne,style:{width:"300px"},onClick:function(e){return t=Je._id,ae(!0),void Sc.changeToPatientAttended(t).then((function(e){ae(!1),Ke(!Ge)})).catch((function(e){console.log(e),ae(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:W.edit&&W.person._id===Je._id,className:n.infoData,children:Je.estimatedPrice.toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]}),Object(a.jsx)(Bt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Je.OTCCharges&&0!==Je.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Je.OTCCharges.toLocaleString("en-GB"))}),!(W.edit&&W.person._id===Je._id)&&!Je.paid&&!Je.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return Je._id,F(Je),void v(!0)},children:"Pay"}),!(W.edit&&W.person._id===Je._id)&&Je.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(it.a,{className:n.checkIconSmall})," ","Paid by ",Je.paidBy,"corporate"===Je.paidBy?' "'.concat(Je.corporate,'" '):""]}),Object(a.jsx)(et.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return bt(!0)},children:Object(a.jsx)($t.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(G.a,{className:n.backdrop,open:ne||ce||le,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(_c,{booking:M,open:k,handleClose:function(){v(!1),F(null)}})]}),Object(a.jsxs)(vt.a,{open:lt,onClose:pt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:pt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:kt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(vt.a,{open:D,onClose:ht,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ct.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(St.a,{children:Object(a.jsx)(Dt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(Rt.a,{children:[Object(a.jsx)(R.a,{onClick:ht,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Tt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Wc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),zc=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Uc(e){return Object(a.jsx)(Pt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(E.a,Object(N.a)({},e))})}function Hc(e){var t=Wc(),n=i.a.useState(25),c=Object(s.a)(n,2),r=c[0],d=c[1],l=Object(o.useState)(!1),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(s.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(en(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(s.a)(k,2),B=v[0],S=v[1],T=Object(o.useState)(en(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(s.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),_=Object(s.a)(A,2),M=_[0],F=_[1],I=Object(o.useState)(!0),E=Object(s.a)(I,2),U=E[0],H=E[1],G=Object(o.useState)(!0),q=Object(s.a)(G,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(s.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),se=Object(s.a)(re,2),de=se[0],le=se[1],be=Object(o.useState)(!0),ue=Object(s.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(s.a)(xe,2),ke=Oe[0],Ce=Oe[1],Se=Object(o.useState)(!0),Ne=Object(s.a)(Se,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(s.a)(Le,2),Me=Ae[0],Fe=Ae[1],Ie=Object(o.useState)(!0),Ee=Object(s.a)(Ie,2),We=Ee[0],ze=Ee[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(rt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Tc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Lt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Ht.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(mn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(fn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(rt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Tc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(et.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ye=Object(s.a)(He,2),Ve=Ye[0],Ge=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(s.a)(Ge,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(s.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),tt=Object(s.a)(Ze,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(s.a)(ot,2),ct=it[0],st=it[1],dt=Object(o.useState)(Rc[0]),lt=Object(s.a)(dt,2),bt=lt[0],ut=lt[1],jt=i.a.useState(""),pt=Object(s.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),Nt=function(t){var n=Sc.getAllBookings;"today"===e.date?n=Sc.getTodayBookings:"old"===e.date?n=Sc.getOldBookings:"future"===e.date?n=Sc.getFutureBookings:"recent"===e.date?n=Sc.getRecentBookingsAll:"deleted"===e.date&&(n=Sc.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(xt.a)(e.data),cachedBookings:Object(xt.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),Nt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0||e.service.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(xt.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(xt.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){Nt(r)}),[Ve.bookingDialogDataChanged]);var Dt,Rt,Lt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),st(!0)},Pt=i.a.useState(1),At=Object(s.a)(Pt,2),_t=At[0],Mt=At[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Rt=e.date,"today"===Rt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===Rt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Rt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Rt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Rt?Object(a.jsx)(Be.a,{style:{fontSize:"2.2rem"}}):"completed"===Rt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===Rt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Rt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===Rt?Object(a.jsx)(_e.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",zc(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(et.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),Nt(r)},children:Object(a.jsx)(wt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(bn.a,{style:{color:"#009900"},icon:un.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(Dt=e.date,"live"===Dt||"positive"===Dt||"late"===Dt||"today"===Dt),children:Object(a.jsxs)(W.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(yt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),Nt(e.target.value)},children:[Object(a.jsx)(kt.a,{value:25,children:"25"}),Object(a.jsx)(kt.a,{value:50,children:"50"}),Object(a.jsx)(kt.a,{value:100,children:"100"}),Object(a.jsx)(kt.a,{value:500,children:"500"}),Object(a.jsx)(kt.a,{value:1e3,children:"1000"}),Object(a.jsx)(kt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(mt.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:_t,onPageChange:function(e){Mt(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Ec,{booking:nt,open:ct,onClose:function(){at(null),st(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(vt.a,{maxWidth:"lg",open:u,onClose:function(){ut(Rc[0]),F(!1),j(!1)},PaperComponent:Uc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ct.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(bn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:un.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Bt.a,{})]}),Object(a.jsx)(St.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(Tt.a,{checked:M,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),M&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(yt.a,{labelId:"select-corporate",id:"select-corporate-id",value:bt,onChange:function(e){ut(e.target.value)},children:Rc.map((function(e){return Object(a.jsx)(kt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(pn.a,{utils:jn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),S(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(hn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(en(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(yn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:de,onChange:function(e){le(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:Me,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{control:Object(a.jsx)(V.a,{checked:We,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Me&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),We&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return M?e.bookingDate>=B&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===bt:e.bookingDate>=B&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(Tc.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Me&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),We&&Object(a.jsx)("td",{className:t.td,children:Dc.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Yc(e){return Object(a.jsx)(M.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Vc(e,t){return{time:e,amount:t}}var Gc=[Vc("09:00",0),Vc("10:00",0),Vc("11:00",0),Vc("12:00",0),Vc("13:00",0),Vc("14:00",0),Vc("15:00",0),Vc("16:00",0),Vc("17:00",0),Vc("18:00",void 0)],Kc=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function qc(){var e=Object(Sn.a)(),t=i.a.useState(Gc),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),l=Object(s.a)(d,2),b=l[0],u=l[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=tn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Sc.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Vc("09:00",Kc(o,"09"))),n.push(Vc("10:00",Kc(o,"10"))),n.push(Vc("11:00",Kc(o,"11"))),n.push(Vc("12:00",Kc(o,"12"))),n.push(Vc("13:00",Kc(o,"13"))),n.push(Vc("14:00",Kc(o,"14"))),n.push(Vc("15:00",Kc(o,"15"))),n.push(Vc("16:00",Kc(o,"16"))),n.push(Vc("17:00",Kc(o,"17"))),n.push(Vc("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Yc,{children:"Today"}),Object(a.jsx)(Tn.a,{children:Object(a.jsxs)(Nn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(wn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(Dn.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Rn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Ln.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Xc=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Jc=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",s="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:s:e.getHours()<9||e.getHours()>=18?null:s},$c=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function Qc(){var e=Xc(),t=i.a.useState(new Date),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(null),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(s.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Jc(c);if(e){var t=en(c,"yyyy-mm-dd");C(!0),Sc.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(xt.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var B=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Yc,{children:"Current Visits"}),Object(a.jsx)(M.a,{component:"p",variant:"h6",children:$c(Jc(c))}),Object(a.jsxs)(M.a,{color:"textSecondary",className:e.depositContext,children:["on ",en(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return B(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Ec,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Zc=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function er(){var e=Zc(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(s.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:l.bookings,isFetching:!0}),m(!0),Sc.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:l.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=en(new Date,"yyyy-mm-dd"),n=en(e,"yyyy-mm-dd");return en(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Yc,{children:"Recent Bookings"}),Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"TimeStamp"}),Object(a.jsx)(Yn.a,{children:"Fullname"}),Object(a.jsx)(Yn.a,{children:"Email"}),Object(a.jsx)(Yn.a,{children:"Tel"}),Object(a.jsx)(Yn.a,{children:"Booked Date"}),Object(a.jsx)(Yn.a,{children:"Booked Time"})]})}),Object(a.jsx)(Hn.a,{children:l.bookings.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:y(e.timeStamp)}),Object(a.jsx)(Yn.a,{children:e.fullname}),Object(a.jsx)(Yn.a,{children:e.email}),Object(a.jsx)(Yn.a,{children:e.phone}),Object(a.jsx)(Yn.a,{children:Object(Tc.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Yn.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:ts("gynae","recentBookings")})}))},children:"See more records"})})]})}var tr=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function nr(){var e=tr(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(qc,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Qc,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{className:e.paper,children:Object(a.jsx)(er,{})})})]})})}var ar=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function or(){var e=ar(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState({edit:!1,person:null}),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!1),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState(!1),P=Object(s.a)(D,2),A=P[0],_=P[1],F=i.a.useState(!1),I=Object(s.a)(F,2),E=I[0],W=I[1],z=i.a.useState({}),U=Object(s.a)(z,2),H=U[0],Y=U[1],V=i.a.useState(""),G=Object(s.a)(V,2),q=G[0],X=G[1],J=i.a.useState(""),$=Object(s.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(s.a)(oe,2),ce=ie[0],re=ie[1],se=i.a.useState(""),de=Object(s.a)(se,2),le=de[0],be=de[1],ue=i.a.useState(""),je=Object(s.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(s.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Be=function(e){he(e.target.value)},Se=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),X(Object(Tc.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=le,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Tc.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Y(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Sc.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,_(!0),Sc.deleteBooking(n).then((function(e){_(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){_(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,W(!0),Sc.unDeleteBooking(n).then((function(e){W(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){W(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(Xe.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:l==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)($e.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(Ze.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(et.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(M.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(M.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(Je.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:E,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:E,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Tc.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var ir=function(e){return"boolean"===typeof e};function cr(e){var t=e.inputRef,n=Object(Ue.a)(e,["inputRef"]);return Object(a.jsx)(Ye.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var rr=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function sr(){var e=rr(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(s.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!ir(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(s.a)(d,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Sc.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Sc.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(M.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(W.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:cr,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(or,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(I.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var dr=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),lr=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=dr(),l=i.a.useContext(C),b=Object(s.a)(l,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(s.a)(k,2),B=v[0],w=v[1],D=i.a.useState(!1),R=Object(s.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),_=Object(s.a)(A,2),M=(_[0],_[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=tn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=tn()(new Date,"yyyy-mm-dd");M(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),s=tn()(r,"yyyy-mm-dd");f(s),y(r),P(!0);var d=tn()(new Date,"yyyy-mm-dd");M(s<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Sc.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var s=tn()(new Date,"yyyy-mm-dd")===tn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:s?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=B,-1===F?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(B)]})})},br=function e(){Object(ne.a)(this,e)};br.getMonthRange=function(e,t){return new ka.a.Calendar(ka.a.SUNDAY).itermonthdates(t,e)};var ur=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],jr=[1,2,3,4,5,6,7],pr=[1,2,3,4,5,6],hr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),gr=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=hr(),r=br.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ur.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:pr.map((function(e){return Object(a.jsx)("tr",{children:jr.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(lr,{cellIndex:(e-1)*jr.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*jr.length+i))})}))})}))})]})})},fr=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),xr=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=fr(),d=i.a.useContext(C),l=Object(s.a)(d,2),b=l[0],u=l[1],j=i.a.useState(-1),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(s.a)(y,2),v=k[0],B=k[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");O(t<e),B(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Sc.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(xt.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var S;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(S=h,-1===S?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):S>0?S>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:S<10?" ".concat(S):"".concat(S)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:S<10?" ".concat(S):"".concat(S)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},mr=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Or=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),yr=function(e){var t=e.dates,n=e.dayClicked,o=Or();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:tn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:tn()(e,"mmm ")}),Object(a.jsx)("span",{style:tn()(new Date,"yyyy-mm-dd")===tn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:tn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:mr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(xr,{dayClicked:n,date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},kr=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),vr=function(e){e.key;var t=e.date,n=e.time,c=kr(),r=i.a.useContext(C),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(null),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState(!0),w=Object(s.a)(B,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(s.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(s.a)(P,2),_=A[0],M=A[1];Object(o.useEffect)((function(){var e=tn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(l.dayViewCalFilter&&l.dayViewCalFilter.trim().length>0){var e=l.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(xt.a)(p))}),[l.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(S.a.mark((function e(){var a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=l.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!_){e.next=9;break}return e.next=7,Sc.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(xt.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,l.bookingDialogDataChanged]);var F,I=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(F=x,null===F?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F.length>0?F.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:I(e.status),onClick:function(t){return function(e,t){v(t),M(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})):void 0)}),Object(a.jsx)(Ec,{booking:k,open:_,onClose:function(){M(!1)}})]})},Cr=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Br=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Sr=function(e){var t=e.date,n=Br();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:tn()(new Date,"yyyy-mm-dd")===tn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:tn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Cr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(vr,{date:tn()(t,"yyyy-mm-dd"),time:e},"".concat(tn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Tr=["January","February","March","April","May","June","July","August","September","October","November","December"],Nr=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function wr(){var e=Nr(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState((new Date).getFullYear()),j=Object(s.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(s.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(s.a)(O,2),k=y[0],v=y[1],B=i.a.useState([]),S=Object(s.a)(B,2),T=S[0],w=S[1],D=i.a.useState("month"),P=Object(s.a)(D,2),A=P[0],_=P[1],M=i.a.useState("month"),F=Object(s.a)(M,2),I=F[0],E=F[1],W=i.a.useState(""),z=Object(s.a)(W,2),U=z[0],Y=z[1],V=function(){Y(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var G,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),E("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(et.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===l&&h(p-1);var t=1===l?12:l-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Da.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(et.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===l&&h(p+1);var t=12===l?1:l+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(La.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Tr[l-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?tn()(n,"d"):tn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(tn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(et.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(rt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(da.a,{value:I,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(sa.a,{style:"month"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(sa.a,{style:"week"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(sa.a,{style:"day"===I?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(G=A,"month"===G?Object(a.jsx)(gr,{dayClicked:q,month:l,year:p}):"week"===G?Object(a.jsx)(yr,{dayClicked:q,dates:T}):"day"===G?Object(a.jsx)(Sr,{date:x}):void 0)]})}function Dr(e){return Object(a.jsx)(M.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}var Rr=Object(w.a)((function(e){return{}}));function Lr(){Rr();var e=i.a.useState(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o,i,r,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=en(new Date,"yyyy-mm-dd"),e.prev=2,e.next=5,qe.getAllBookingsCountByDateStr(t);case 5:return n=e.sent,e.next=8,ho.getAllBookingsCountByDateStr(t);case 8:return a=e.sent,e.next=11,yi.getAllBookingsCountByDateStr(t);case 11:o=e.sent,i=parseInt(n.data.count),r=parseInt(a.data.count),s=parseInt(o.data.count),c([{clinic:"PCR",count:i},{clinic:"Gynae",count:r},{clinic:"GP",count:s},{clinic:"Total",count:i+r+s}]),h(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),console.error(e.t0),h(!1);case 24:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[l]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Dr,{children:"Today Bookings"}),n&&Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"Clinic"}),Object(a.jsx)(Yn.a,{children:"Count"})]})}),Object(a.jsx)(Hn.a,{children:n.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:e.clinic}),Object(a.jsx)(Yn.a,{children:e.count})]},e._id)}))})]})]})}var Pr=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ar(){Pr();var e=i.a.useState(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o,i,r,s,d,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=new Date,n=new Date(t.getTime()+864e5),a=en(n,"yyyy-mm-dd"),e.prev=4,e.next=7,qe.getAllBookingsCountByDateStr(a);case 7:return o=e.sent,e.next=10,ho.getAllBookingsCountByDateStr(a);case 10:return i=e.sent,e.next=13,yi.getAllBookingsCountByDateStr(a);case 13:r=e.sent,s=parseInt(o.data.count),d=parseInt(i.data.count),l=parseInt(r.data.count),c([{clinic:"PCR",count:s},{clinic:"Gynae",count:d},{clinic:"GP",count:l},{clinic:"Total",count:s+d+l}]),h(!1),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),console.error(e.t0),h(!1);case 26:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[l]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Dr,{children:"Tomorrow Bookings"}),n&&Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"Clinic"}),Object(a.jsx)(Yn.a,{children:"Count"})]})}),Object(a.jsx)(Hn.a,{children:n.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:e.clinic}),Object(a.jsx)(Yn.a,{children:e.count})]},e._id)}))})]})]})}var _r=Object(w.a)((function(e){return{}}));function Mr(){_r();var e=i.a.useState(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(s.a)(r,2),l=d[0],b=d[1],u=i.a.useState(!1),j=Object(s.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,a,o,i,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,qe.getAllBookingsCountAll();case 4:return t=e.sent,e.next=7,ho.getAllBookingsCountAll();case 7:return n=e.sent,e.next=10,yi.getAllBookingsCountAll();case 10:a=e.sent,o=parseInt(t.data.count),i=parseInt(n.data.count),r=parseInt(a.data.count),c([{clinic:"PCR",count:o},{clinic:"Gynae",count:i},{clinic:"GP",count:r},{clinic:"Total",count:o+i+r}]),h(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0),h(!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[l]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsx)(Dr,{children:"Total Bookings"}),n&&Object(a.jsxs)(Un.a,{size:"small",children:[Object(a.jsx)(Vn.a,{children:Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:"Clinic"}),Object(a.jsx)(Yn.a,{children:"Count"})]})}),Object(a.jsx)(Hn.a,{children:n.map((function(e){return Object(a.jsxs)(Gn.a,{children:[Object(a.jsx)(Yn.a,{children:e.clinic}),Object(a.jsx)(Yn.a,{children:e.count})]},e._id)}))})]})]})}var Fr=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Ir(){var e=Fr(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(s.a)(c,2),d=r[0],l=r[1],b=i.a.useState(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,qe.getLateBookings();case 4:t=e.sent,l(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(Dr,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(_e.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsx)("span",{className:0===d?e.Title:e.TitleRed,children:"PCR 40-Hours Late"})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Er=n(247),Wr=n.n(Er),zr=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Ur(){var e=zr(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(s.a)(c,2),d=r[0],l=r[1],b=i.a.useState(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,qe.getUnmatchedRecords();case 4:t=e.sent,l(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(Dr,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Wr.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsx)("span",{className:0===d?e.Title:e.TitleRed,children:"PCR Unmatched Records"})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Hr=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Yr(){var e=Hr(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(s.a)(c,2),d=r[0],l=r[1],b=i.a.useState(!1),u=Object(s.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(s.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,ho.getShouldRefundsCount();case 4:t=e.sent,l(t.data.count),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Ot.a,{color:"primary"})}),Object(a.jsxs)(Dr,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Wr.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsx)("span",{className:0===d?e.Title:e.TitleRed,children:"Gynae Waiting for Refunds"})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var Vr=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:250}}}));function Gr(){var e=Vr(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Lr,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Ar,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Mr,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Ir,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Ur,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(E.a,{className:o,children:Object(a.jsx)(Yr,{})})})]})})}var Kr=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})}],qr=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})}],Xr=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})}],Jr=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})}],$r=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Be.a,{})},{index:4,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:5,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:6,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:7,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Te.a,{})},{index:8,id:"positiveBookings",title:"Positive Results",icon:Object(a.jsx)(Re.a,{})},{index:9,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(_e.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:11,id:"trBookings",title:"TR Bookings",icon:Object(a.jsx)(ze.a,{})},{index:12,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(we.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:14,id:"adminCalendarView",title:"Admin Calendar",icon:Object(a.jsx)(Ee.a,{})},{index:15,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})}],Qr=function(e,t){if("pcr"===e)switch(t){case 0:return Object(a.jsx)(oa,{});case 1:return Object(a.jsx)(Bn,{date:"recent"});case 2:return Object(a.jsx)(Bn,{date:"today"});case 3:return Object(a.jsx)(Bn,{date:"live"});case 4:return Object(a.jsx)(Bn,{date:"old"});case 5:return Object(a.jsx)(Bn,{date:"future"});case 6:return Object(a.jsx)(Bn,{date:"all"});case 7:return Object(a.jsx)(Bn,{date:"completed"});case 8:return Object(a.jsx)(Bn,{date:"positive"});case 9:return Object(a.jsx)(Bn,{date:"late"});case 10:return Object(a.jsx)(Bn,{date:"deleted"});case 11:return Object(a.jsx)(Bn,{date:"tr"});case 12:return Object(a.jsx)(xa,{});case 13:return Object(a.jsx)(Va,{});case 14:return Object(a.jsx)(jo,{});case 15:return Object(a.jsx)(gt,{});default:return"Page Not Found!"}else if("gynae"===e)switch(t){case 0:return Object(a.jsx)(Go,{});case 1:return Object(a.jsx)(Po,{date:"recent"});case 2:return Object(a.jsx)(Po,{date:"today"});case 3:return Object(a.jsx)(Po,{date:"old"});case 4:return Object(a.jsx)(Po,{date:"future"});case 5:return Object(a.jsx)(Po,{date:"all"});case 6:return Object(a.jsx)(Po,{date:"deleted"});case 7:return Object(a.jsx)(mi,{});case 8:return Object(a.jsx)(Qo,{});default:return"Page Not Found!"}else if("gp"===e)switch(t){case 0:return Object(a.jsx)($i,{});case 1:return Object(a.jsx)(Ii,{date:"recent"});case 2:return Object(a.jsx)(Ii,{date:"today"});case 3:return Object(a.jsx)(Ii,{date:"old"});case 4:return Object(a.jsx)(Ii,{date:"future"});case 5:return Object(a.jsx)(Ii,{date:"all"});case 6:return Object(a.jsx)(Ii,{date:"deleted"});case 7:return Object(a.jsx)(Cc,{});case 8:return Object(a.jsx)(ac,{});default:return"Page Not Found!"}else if("std"===e)switch(t){case 0:return Object(a.jsx)(nr,{});case 1:return Object(a.jsx)(Hc,{date:"recent"});case 2:return Object(a.jsx)(Hc,{date:"today"});case 3:return Object(a.jsx)(Hc,{date:"old"});case 4:return Object(a.jsx)(Hc,{date:"future"});case 5:return Object(a.jsx)(Hc,{date:"all"});case 6:return Object(a.jsx)(Hc,{date:"deleted"});case 7:return Object(a.jsx)(wr,{});case 8:return Object(a.jsx)(sr,{});default:return"Page Not Found!"}else{if("admin"!==e)return"Page Not Found!";switch(t){case 0:return Object(a.jsx)(Gr,{});default:return"Page Not Found!"}}},Zr=function(e){switch(e){case"admin":return Kr;case"pcr":return $r;case"gynae":return qr;case"gp":return Xr;case"std":return Jr;default:return[]}},es=function(e,t){for(var n=Zr(e),a=0;a<n.length;a++)if(n[a].index===t)return n[a].id;return"Page Not Found!"},ts=function(e,t){for(var n=Zr(e),a=0;a<n.length;a++)if(n[a].id===t)return n[a].index;return-1},ns=n(248),as=function(){return sessionStorage.getItem("medexadmin-role")},os=function(e){return sessionStorage.setItem("medexadmin-role",e)},is=Object(w.a)((function(e){return{root:{minHeight:"100vh"},image:{backgroundImage:"url(/images/bg.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{padding:e.spacing(4,4),display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"#f5f5f5"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},alert:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},pageBg:{paddingTop:e.spacing(15),background:"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)",height:"100vh",margin:0,padding:0},appbarCenter:{position:"absolute",top:"-40px",right:"0",marginLeft:"-145px",alignItems:"center",justify:"center",display:"flex",backgroundColor:"#fff",padding:"5px 20px 15px 20px",borderRadius:"8px"},logoImage:{width:"30px",height:"30px",marginLeft:"0px"},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},adminPanelLabel:{color:e.palette.primary.main,marginBottom:"20px"}}}));function cs(){var e=is(),t=i.a.useContext(C),n=Object(s.a)(t,2),o=(n[0],n[1]),c=(Object(ns.useMediaQuery)({maxWidth:1224}),Object(te.d)()),r=i.a.useState(""),d=Object(s.a)(r,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(s.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(s.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(s.a)(y,2),v=k[0],B=k[1],S=i.a.useState(null),T=Object(s.a)(S,2),w=T[0],A=T[1],Z=i.a.useState(!1),ne=Object(s.a)(Z,2),ae=ne[0],oe=ne[1],ie=function(){oe(!0),de.signIn({username:h,password:b}).then((function(e){if(oe(!1),"OK"===e.data.status){A(null);var t=e.data.token;m?localStorage.setItem("medexadmin-auth-token",t):sessionStorage.setItem("medexadmin-auth-token",t),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0})})),os(e.data.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:0})})),c.push(re("/".concat(es(e.data.roles[0],0))))}else"FAILED"===e.data.status?A(e.data.error):A("Sorry, something went wrong, please try again.")})).catch((function(e){oe(!1),console.error(e),A("Sorry, something went wrong, please try again.")}))};return Object(a.jsx)("div",{className:e.pageBg,children:Object(a.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(E.a,{elevation:20,children:Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsxs)("div",{className:e.appbarCenter,children:[Object(a.jsx)("span",{className:e.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:e.logoImage,src:re("/images/logo.png"),alt:"logo image"})]}),Object(a.jsx)(D.a,{className:e.avatar,children:Object(a.jsx)(_.a,{})}),Object(a.jsx)(M.a,{component:"h1",variant:"h6",className:e.adminPanelLabel,children:"Admin Panel"}),w&&Object(a.jsx)("div",{className:e.alert,children:Object(a.jsxs)(I.a,{severity:"error",children:[" ",Object(a.jsx)("div",{style:{lineHeight:"1.5rem",textAlign:"justify"},children:w})]})}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"email",autoComplete:"username",value:h,onChange:function(e){g(e.target.value),A(null)},on:!0,autoFocus:!0}),Object(a.jsxs)(W.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ie()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(U.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:v?"text":"password",value:b,onChange:function(e){u(e.target.value),A(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(X.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){B(!v)},onMouseDown:function(e){e.preventDefault()},children:v?Object(a.jsx)(J.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]}),Object(a.jsx)(Y.a,{style:{textAlign:"left",width:"100%"},control:Object(a.jsx)(V.a,{value:"remember",color:"secondary",checked:m,onChange:function(e){O(e.target.checked)}}),label:"Remember me"}),Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ie,className:e.submit,children:"Sign In"})]})}),Object(a.jsx)(G.a,{className:e.backdrop,open:ae,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(q.a,{color:"inherit"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{textAlign:"center",color:"#fff"},children:" "})})]})}),Object(a.jsx)(P.a,{mt:5,style:{color:"#eee"},children:Object(a.jsx)(ee,{})})]})})}var rs=n(690),ss=n(689),ds=n(668),ls=n(391),bs=n.n(ls),us=n(393),js=n.n(us),ps=n(619),hs=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},icon:{fontSize:"1rem",color:"#777",cursor:"pointer",paddingTop:"10px",paddingBottom:"8px",borderBottom:"1px solid #eee"},iconSelected:{color:"#fff",backgroundColor:e.palette.primary.main,transition:"all 0.1s ease-in-out"},menuText:{fontSize:"1rem",fontWeight:"500"},Badge:{backgroundColor:"rgb(220, 0, 78)",color:"#fff",fontWeight:"600",textAlign:"center",borderRadius:"50%",fontSize:"0.85rem",lineHeight:"0.85rem",padding:"7px",marginTop:"9px",width:"28px"}}}));function gs(){var e=hs(),t=i.a.useContext(C),n=Object(s.a)(t,2),c=n[0],r=n[1],d=i.a.useState(0),l=Object(s.a)(d,2),b=l[0],u=l[1],j=Object(te.d)(),p=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&r((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u(c.currentMenuIndex),p()}),[c.currentMenuIndex]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ps.a,{children:c.role&&Zr(c.role).map((function(t){return!t.hidden&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:Object(Q.a)(e.icon,b===t.index&&e.iconSelected),onClick:function(e){return n=t.index,u(n),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:n})})),void j.push(re("/".concat(es(c.role,n))));var n},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,style:{paddingLeft:"15px"},children:[Object(a.jsx)(K.a,{item:!0,children:t.icon}),Object(a.jsxs)(K.a,{item:!0,style:{textAlign:"left"},children:[Object(a.jsx)("span",{className:e.menuText,children:"".concat(t.title)})," "]}),"gynae"===c.role&&"deletedBookings"===t.id&&c.shouldRefunsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.shouldRefunsCount," "]})]})},"".concat(t.id))},"".concat(t.id))}))})})}var fs=n(293),xs=n.n(fs),ms=n(392),Os=n.n(ms),ys=n(363),ks=Object(O.a)((function(e){return{paper:{marginTop:"10px",width:"270px",height:"240px",border:"1px solid #ddd",borderRadius:"10px",paddingTop:"10px"}}}))((function(e){return Object(a.jsx)(ys.a,Object(N.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),vs=Object(O.a)((function(e){return{paper:{marginTop:"5px",width:"280px",height:"280px",border:"1px solid #ddd",borderRadius:"10px",padding:"10px"}}}))((function(e){return Object(a.jsx)(ys.a,Object(N.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Cs=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(N.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:Object(u.a)({position:"relative",whiteSpace:"nowrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{opacity:.9}),drawerPaperClose:Object(u.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},appbarCenter:{position:"fixed",width:"260px",top:"10px",left:"50%",marginLeft:"-130px",alignItems:"center",justify:"center",display:"flex"},logoImage:{width:"36px",height:"36px",marginLeft:"0px"},userAvatar:{backgroundColor:"#fff",borderColor:"#aaa",border:"1px solid",color:"#aaa",cursor:"pointer"},userAvatarSelected:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,cursor:"pointer"},userAvatarBig:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,width:"60px",height:"60px"},appBarText:Object(u.a)({color:"#888"},e.breakpoints.down("sm"),{display:"none"}),appBarAppsIcon:{cursor:"pointer",fontSize:"1.8rem"},appBarAppsIconSelected:{cursor:"pointer",fontSize:"1.8rem",color:e.palette.primary.main},usernameLabel:{fontSize:"1.2rem",color:e.palette.primary.main,marginTop:"5px",marginBottom:"5px"},lastLoginLabel:{color:"#777",paddingTop:"5px"},appsLogo:{width:"70px",height:"70px"},appsBox:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid #fff",borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.main),transition:"all 0.1s ease-in-out"}},appsBoxSelected:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid".concat(e.palette.primary.light),borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.light),transition:"all 0.1s ease-in-out"}},appsAdminLabel:{color:"#0264d4",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGPLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsSTDLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsInToolbar:{position:"fixed",left:"60px",top:"-5px",height:"65px",width:"200px",overflow:"hidden"}}}));function Bs(){var e,t,n,c=Cs(),r=i.a.useContext(C),d=Object(s.a)(r,2),b=d[0],u=d[1],j=Object(ns.useMediaQuery)({maxWidth:768}),p=i.a.useState(!j),h=Object(s.a)(p,2),g=h[0],f=h[1],x=i.a.useState(0),m=Object(s.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(s.a)(k,2),B=v[0],S=v[1],T=i.a.useState(null),w=Object(s.a)(T,2),L=w[0],P=w[1],A=function(){P(null)},_=Object(te.d)(),M=Object(te.e)();i.a.useEffect((function(){if(b.role){var e=ts(b.role,function(e){try{var t=e.split("/");return t&&t.length>0?t[t.length-1].length>0?t[t.length-1]:t[t.length-2]:""}catch(n){return""}}(M.pathname));u((function(t){return Object(N.a)(Object(N.a)({},t),{},{currentMenuIndex:e})}))}}),[M]),Object(o.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(o.useEffect)((function(){y(b.currentMenuIndex),j&&f(!1)}),[b.currentMenuIndex]);Object(Q.a)(c.paper,c.fixedHeight);var I=function(e){os(e),u((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),_.push(re("/".concat(es(e,0)))),A()},E=function(e){switch(e){case"admin":return Object(a.jsx)("img",{src:re("/images/admin.png"),className:c.appsLogo});case"pcr":return Object(a.jsx)("img",{src:re("/images/corona.png"),className:c.appsLogo});case"gynae":return Object(a.jsx)("img",{src:re("/images/woman.png"),className:c.appsLogo});case"gp":return Object(a.jsx)("img",{src:re("/images/doctor.png"),className:c.appsLogo});case"std":return Object(a.jsx)("img",{src:re("/images/std-icon.png"),className:c.appsLogo});default:return null}},W=function(e){switch(e){case"admin":return Object(a.jsxs)("div",{className:c.appsAdminLabel,children:[" ","Admin"," "]});case"pcr":return Object(a.jsxs)("div",{className:c.appsPCRLabel,children:[" ","PCR"," "]});case"gynae":return Object(a.jsxs)("div",{className:c.appsGynaeLabel,children:[" ","Gynae"," "]});case"gp":return Object(a.jsxs)("div",{className:c.appsGPLabel,children:[" ","GP"," "]});case"std":return Object(a.jsxs)("div",{className:c.appsSTDLabel,children:[" ","STD"," "]});default:return null}};return Object(a.jsx)(i.a.Fragment,{children:b.userId&&b.role&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(ss.a,{style:{backgroundColor:"#fff",color:"#555",height:"60px"},position:"absolute",className:Object(Q.a)(c.appBar,!1),children:Object(a.jsxs)(ds.a,{className:c.toolbar,children:[Object(a.jsx)(X.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!g)},className:Object(Q.a)(c.menuButton),children:Object(a.jsx)(bs.a,{})}),Object(a.jsx)("div",{className:c.appsInToolbar,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:E(b.role)}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"8px"},children:W(b.role)})})]})}),Object(a.jsx)("div",{className:c.appbarCenter,children:!j&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("span",{className:c.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image"})]})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",paddingLeft:"2%"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row-reverse",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:B?c.userAvatarSelected:c.userAvatar,onClick:function(e){S(e.currentTarget)},children:Object(a.jsx)(X.a,{children:Object(a.jsx)(xs.a,{})})})}),(null===(e=b.userId)||void 0===e?void 0:e.roles.find((function(e){return"admin"===e})))&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(X.a,{onClick:function(e){P(e.currentTarget)},children:Object(a.jsx)(Os.a,{className:L?c.appBarAppsIconSelected:c.appBarAppsIcon})})})]})})]})}),Object(a.jsx)(ks,{id:"user-avatar-menu",anchorEl:B,keepMounted:!0,open:Boolean(B),onClose:function(){S(null)},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:c.userAvatarBig,children:Object(a.jsx)(xs.a,{style:{fontSize:"2.5rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{className:c.usernameLabel,children:[" ",null===(t=b.userId)||void 0===t?void 0:t.username," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"#999",fontSize:"0.85rem"},children:"Logged in at :"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:c.lastLoginLabel,children:tn()(null===(n=b.userId)||void 0===n?void 0:n.lastLoginTimeStamp)})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){localStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-role"),u((function(e){return{signedIn:!1}})),_.replace("./login")},variant:"outlined",color:"secondary",style:{marginTop:"30px",width:"150px",borderRadius:"30px"},children:"Logout"})})]})}),Object(a.jsx)(vs,{id:"apps-menu",anchorEl:L,keepMounted:!0,open:Boolean(L),onClose:A,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"admin"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return I("admin")},children:[Object(a.jsx)(K.a,{item:!0,children:E("admin")}),Object(a.jsx)(K.a,{item:!0,children:W("admin")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"pcr"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return I("pcr")},children:[Object(a.jsx)(K.a,{item:!0,children:E("pcr")}),Object(a.jsx)(K.a,{item:!0,children:W("pcr")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gynae"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return I("gynae")},children:[Object(a.jsx)(K.a,{item:!0,children:E("gynae")}),Object(a.jsx)(K.a,{item:!0,children:W("gynae")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gp"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return I("gp")},children:[Object(a.jsx)(K.a,{item:!0,children:E("gp")}),Object(a.jsx)(K.a,{item:!0,children:W("gp")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"std"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return I("std")},children:[Object(a.jsx)(K.a,{item:!0,children:E("std")}),Object(a.jsx)(K.a,{item:!0,children:W("std")})]})})]})}),Object(a.jsxs)(rs.a,{variant:j?"temporary":"persistent",classes:{paper:Object(Q.a)(c.drawerPaper,!g&&c.drawerPaperClose)},open:g,children:[Object(a.jsxs)("div",{className:c.toolbarIcon,children:[Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image",style:{marginRight:"10px"}}),Object(a.jsx)("span",{className:c.appbarTitle,children:Object(a.jsx)("span",{style:{fontSize:"0.9rem"},children:"Medical Express"})})]}),Object(a.jsx)(X.a,{onClick:function(){f(!1)},children:Object(a.jsx)(js.a,{})})]}),Object(a.jsx)(Bt.a,{}),Object(a.jsx)(gs,{})]}),Object(a.jsxs)("main",{className:c.content,children:[Object(a.jsx)("div",{className:c.appBarSpacer}),Object(a.jsx)(F.a,{maxWidth:j?"xs":"xl",className:c.container,children:Qr(b.role,O)})]})]})})})}function Ss(e){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(T.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.checkToken({token:t});case 3:if("OK"!==(n=e.sent).data.status){e.next=8;break}return e.abrupt("return",{username:n.data.userId,forename:n.data.forename,surname:n.data.surname,roles:n.data.roles,lastLoginTimeStamp:n.data.lastLoginTimeStamp});case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Ns=Object(w.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function ws(){Ns();var e=i.a.useContext(C),t=Object(s.a)(e,2),n=t[0],o=t[1],c=i.a.useState(!1),r=Object(s.a)(c,2),d=r[0],b=r[1],u=Object(te.d)(),j=Object(te.e)();i.a.useEffect((function(){(function(){var e=Object(T.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("medexadmin-auth-token")||sessionStorage.getItem("medexadmin-auth-token"),de.setToken(t),t){e.next=8;break}o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),b(!0),u.push(re("/login")),e.next=13;break;case 8:return e.next=10,Ss(t);case 10:(n=e.sent)?j.pathname===re("/")||j.pathname===re("/#")||j.pathname.startsWith(re("/login"))?(as()||os(n.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0,signedUp:!1,forgotPassword:!1,userId:n,role:as()})})),u.push(re("/".concat(es(as(),0))))):(as()||os(n.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0,userId:n,role:as()})}))):(o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),u.push(re("/login"))),b(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j.pathname]);return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(l.a,{}),d&&(n.signedIn?Object(a.jsx)(Bs,{}):Object(a.jsx)(cs,{}))]})}!function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");k?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):v(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):v(t,e)}))}}();var Ds=function(){var e=i.a.useState({currentMenuIndex:0}),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(a.jsx)(C.Provider,{value:[n,o],children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(d.a,{theme:m,children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(y,{}),Object(a.jsx)(ws,{})]})})})};r.a.render(Object(a.jsx)(Ds,{}),document.getElementById("root"))},70:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},71:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},72:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}}},[[616,1,2]]]);
//# sourceMappingURL=main.1ca03a74.chunk.js.map