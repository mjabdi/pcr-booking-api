(this["webpackJsonpmedex-booking-admin"]=this["webpackJsonpmedex-booking-admin"]||[]).push([[0],{108:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},109:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},110:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},111:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},182:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},201:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},231:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},259:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},260:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},261:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},262:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},27:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},279:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},48:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},671:function(e,t){},672:function(e,t){},673:function(e,t){},674:function(e,t){},675:function(e,t){},677:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n.n(o),c=n(43),r=n.n(c),l=n(2),d=n(758),s=n(733),b=n(195),j=n(60),u=n(431),p=n(775),h=n(397),g="rgb(36, 40, 44)",f="rgba(0, 0, 0, 0.13)",x=Object(u.a)({palette:{primary:{main:"#00a1c5",light:"#5bd5f0"},secondary:{main:"#f68529",contrastText:"#fff"},common:{black:"#212121",darkBlack:g},warning:{light:"rgba(253, 200, 69, .3)",main:"rgba(253, 200, 69, .5)",dark:"rgba(253, 200, 69, .7)"},tonalOffset:.2,background:{default:"#f9f9f9"},spacing:8},breakpoints:{values:{xl:1920,lg:1280,md:960,sm:600,xs:0}},border:{borderColor:f,borderWidth:2},overrides:{MuiExpansionPanel:{root:{position:"static"}},MuiTableCell:{root:Object(j.a)({paddingLeft:16,paddingRight:16,borderBottom:"".concat(2,"px solid ").concat(f)},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})},MuiDivider:{root:{backgroundColor:f,height:2}},MuiPrivateNotchedOutline:{root:{borderWidth:2}},MuiListItem:{divider:{borderBottom:"".concat(2,"px solid ").concat(f)}},MuiDialog:{paper:{width:"100%",maxWidth:430,marginLeft:8,marginRight:8}},MuiTooltip:{tooltip:{backgroundColor:g,fontSize:"0.7rem"}},MuiExpansionPanelDetails:{root:Object(j.a)({},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})}}},h.enGB),m=Object(p.a)(x),O=n(13);var y=Object(O.a)((function(e){var t,n,a,o,i;return{"@global":{"*:focus":{outline:0},".text-white":{color:e.palette.common.white},".listItemLeftPadding":(t={paddingTop:"".concat(e.spacing(1.75),"px !important"),paddingBottom:"".concat(e.spacing(1.75),"px !important"),paddingLeft:"".concat(e.spacing(4),"px !important")},Object(j.a)(t,e.breakpoints.down("sm"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),Object(j.a)(t,"@media (max-width:  420px)",{paddingLeft:"".concat(e.spacing(1),"px !important")}),t),".container":(n={width:"100%",paddingRight:e.spacing(4),paddingLeft:e.spacing(4),marginRight:"auto",marginLeft:"auto"},Object(j.a)(n,e.breakpoints.up("sm"),{maxWidth:540}),Object(j.a)(n,e.breakpoints.up("md"),{maxWidth:720}),Object(j.a)(n,e.breakpoints.up("lg"),{maxWidth:1170}),n),".row":{display:"flex",flexWrap:"wrap",marginRight:-e.spacing(2),marginLeft:-e.spacing(2)},".container-fluid":{width:"100%",paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginRight:"auto",marginLeft:"auto",maxWidth:1370},".lg-mg-top":(a={marginTop:"".concat(e.spacing(20),"px !important")},Object(j.a)(a,e.breakpoints.down("md"),{marginTop:"".concat(e.spacing(18),"px !important")}),Object(j.a)(a,e.breakpoints.down("sm"),{marginTop:"".concat(e.spacing(16),"px !important")}),Object(j.a)(a,e.breakpoints.down("xs"),{marginTop:"".concat(e.spacing(14),"px !important")}),a),".lg-mg-bottom":(o={marginBottom:"".concat(e.spacing(20),"px !important")},Object(j.a)(o,e.breakpoints.down("md"),{marginBottom:"".concat(e.spacing(18),"px !important")}),Object(j.a)(o,e.breakpoints.down("sm"),{marginBottom:"".concat(e.spacing(16),"px !important")}),Object(j.a)(o,e.breakpoints.down("xs"),{marginBottom:"".concat(e.spacing(14),"px !important")}),o),".lg-p-top":(i={paddingTop:"".concat(e.spacing(20),"px !important")},Object(j.a)(i,e.breakpoints.down("md"),{paddingTop:"".concat(e.spacing(18),"px !important")}),Object(j.a)(i,e.breakpoints.down("sm"),{paddingTop:"".concat(e.spacing(16),"px !important")}),Object(j.a)(i,e.breakpoints.down("xs"),{paddingTop:"".concat(e.spacing(14),"px !important")}),i)}}}),{withTheme:!0})((function(){return null})),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=i.a.createContext([{},function(){}]),S=n(9),B=n.n(S),N=n(14),T=n(3),w=n(245),D=n(772),R=n(223),L=n(445),A=n(759),P=n(427),I=n.n(P),F=n(244),_=n(753),W=n(762),M=n(222),E=n(246),z=n(333),U=n(774),H=n(742),G=n(682),Y=n(443),V=n(441),K=n(728),q=n(684),X=n(188),J=n(754),$=n(755),Q=n(7),Z=n(727);function ee(){return Object(a.jsxs)(F.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Z.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var te=n(80),ne=n(31),ae=n(56),oe=n.n(ae),ie="Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=",ce="https://www.travelpcrtest.com/";function re(e){return"/medicalexpressclinic/admin"+e}var le=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),de=function e(){Object(ne.a)(this,e)};de.setToken=function(e){de.token=e},de.signIn=function(e){return le.post("/api/medex/user/signin",e)},de.checkToken=function(e){return le.post("/api/medex/user/checktoken",e)};var se=n(187),be=n.n(se),je=n(72),ue=n.n(je),pe=n(50),he=n.n(pe),ge=n(73),fe=n.n(ge),xe=n(75),me=n.n(xe),Oe=n(40),ye=n.n(Oe),ke=n(74),ve=n.n(ke),Ce=n(90),Se=n.n(Ce),Be=n(92),Ne=n.n(Be),Te=n(148),we=n.n(Te),De=n(93),Re=n.n(De),Le=n(29),Ae=n.n(Le),Pe=n(81),Ie=n.n(Pe),Fe=n(86),_e=n.n(Fe),We=n(426),Me=n.n(We),Ee=n(232),ze=n.n(Ee),Ue=n(196),He=n.n(Ue),Ge=n(96),Ye=n.n(Ge),Ve=n(169),Ke=n.n(Ve),qe=n(41),Xe=n(115),Je=n.n(Xe),$e=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),Qe=n(172),Ze=n.n(Qe),et=function e(){Object(ne.a)(this,e)};et.payBooking=function(e,t,n){return $e.post("/api/book/paybooking?id=".concat(e,"&paymentmethod=").concat(t,"&corporate=").concat(n))},et.unPayBooking=function(e){return $e.post("/api/book/unpaybooking?id=".concat(e))},et.getTestsTimeReport=function(){return Ze()($e,{retries:3,retryDelay:function(e){return 1e3*e}}),$e.get("/api/book/getteststimereport")},et.getBookingsStatsByDateStr=function(e){return $e.get("/api/book/getbookingsstatsbydatestr?date=".concat(e))},et.getBookingsCountByDateStr=function(e){return $e.get("/api/book/getbookingscountbydatestr?date=".concat(e))},et.getAllBookingsCountAll=function(){return $e.get("/api/book/getallbookingscountall")},et.getBookingsCountByDateStrandTime=function(e,t,n){return $e.get("/api/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},et.getBookingsByDateStrandTime=function(e,t){return $e.get("/api/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},et.getAllBookingsCountByDateStr=function(e){return $e.get("/api/book/getallbookingscountbydatestr?date=".concat(e))},et.getAllBookingsCountByDateStrandTime=function(e,t,n){return $e.get("/api/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},et.getAllBookingsByDateStrandTime=function(e,t){return $e.get("/api/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},et.changeBackToBookingMade=function(e){return $e.post("/api/book/changebacktobookingmade?id=".concat(e))},et.resendEmailsWithBookingId=function(e){return $e.post("/api/book/resendemailswithbookingid?id=".concat(e))},et.regenerateFilesWithBookingId=function(e){return $e.post("/api/book/regeneratefileswithbookingid?id=".concat(e))},et.resendEmails=function(e){return $e.post("/api/book/resendemails?id=".concat(e))},et.regenerateFiles=function(e){return $e.post("/api/book/regeneratefiles?id=".concat(e))},et.matchRecords=function(e,t){return $e.post("/api/book/matchrecords?bookingid=".concat(e,"&linkid=").concat(t))},et.findBestMatches=function(e){return $e.get("/api/book/getbestmatchedbookings?id=".concat(e))},et.getLinkDetails=function(e){return $e.get("/api/book/getlinkdetails?id=".concat(e))},et.getLinkDetailsWithBookingId=function(e){return $e.get("/api/book/getlinkdetailswithbookingid?id=".concat(e))},et.findBookingByRefBirthDate=function(e,t){return $e.get("/api/book/getbookingsbyrefandbirthdate?ref=".concat(e,"&birthdate=").concat(t))},et.updateBooking=function(e){return $e.post("/api/book/updatebookappointment",e)},et.updateBookingTime=function(e){return $e.post("/api/book/updatebookappointmenttime",e)},et.deleteBooking=function(e){return $e.post("/api/book/deletebookappointment?id=".concat(e))},et.unDeleteBooking=function(e){return $e.post("/api/book/undeletebookappointment?id=".concat(e))},et.getBookingsByRef=function(e){return $e.get("/api/book/getbookingsbyref?ref=".concat(e))},et.getBookingById=function(e){return $e.get("/api/book/getbookingbyid?id=".concat(e))},et.getAllBookings=function(e){return e||(e=25),$e.get("/api/book/getallbookings?limit=".concat(e))},et.getAllTRBookings=function(e){return e||(e=25),$e.get("/api/book/getalltrbookings?limit=".concat(e))},et.getLateBookings=function(){return $e.get("/api/book/getlatebookings")},et.getDeletedBookings=function(e){return e||(e=25),$e.get("/api/book/getdeletedbookings?limit=".concat(e))},et.getLiveBookings=function(){return $e.get("/api/book/getlivebookings")},et.getCompletedBookings=function(e){return e||(e=25),$e.get("/api/book/getcompletedbookings?limit=".concat(e))},et.getPositiveBookings=function(){return $e.get("/api/book/getpositivebookings")},et.getTodayBookings=function(){return $e.get("/api/book/gettodaybookings")},et.getOldBookings=function(e){return e||(e=25),$e.get("/api/book/getoldbookings?limit=".concat(e))},et.getFutureBookings=function(e){return e||(e=25),$e.get("/api/book/getfuturebookings?limit=".concat(e))},et.getRecentBookings=function(){return $e.get("/api/book/getrecentbookings")},et.getRecentBookingsAll=function(e){return e||(e=25),$e.get("/api/book/getrecentbookingsall?limit=".concat(e))},et.getUnmatchedRecords=function(){return $e.get("/api/book/getunmatchedrecords")},et.getUnmatchedRecordsArchived=function(){return $e.get("/api/book/getunmatchedrecordsarchived")},et.archiveRecord=function(e){return $e.post("/api/book/archiverecord?id=".concat(e))},et.unArchiveRecord=function(e){return $e.post("/api/book/unarchiverecord?id=".concat(e))};var tt=n(767),nt=n(730),at=n(729),ot=n(135),it=n.n(ot),ct=n(327),rt=function e(){Object(ne.a)(this,e)};rt.downloadCovidForm1=function(e){return $e.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},rt.downloadCovidForm2=function(e){return $e.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rt.downloadPdfResult=function(e){return $e.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rt.downloadPdfCert=function(e){return $e.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},rt.downloadPdfLabReport=function(e){return $e.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var lt=n(182),dt=n.n(lt),st=n(45),bt=n.n(st),jt=n(26),ut=n.n(jt),pt=n(48),ht=n(53),gt=n.n(ht),ft=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function xt(){var e=ft(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],V=U[1],q=i.a.useState(""),X=Object(l.a)(q,2),J=X[0],$=X[1],Q=i.a.useState(""),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(""),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(""),re=Object(l.a)(ce,2),le=re[0],de=re[1],se=i.a.useState(""),be=Object(l.a)(se,2),je=be[0],ue=be[1],pe=i.a.useState(""),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Ne=Object(l.a)(Be,2),Te=Ne[0],we=Ne[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(""),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=i.a.useState(""),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=Ge[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=Qe[0],ot=Qe[1],dt=i.a.useState(!1),st=Object(l.a)(dt,2),jt=st[0],ht=st[1],xt=function(e){$(e.target.value),V(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},mt=function(e){te(e.target.value),V(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},Ot=function(e){ie(e.target.value)},yt=function(e){de(e.target.value)},kt=function(e){ue(e.target.value)},vt=function(e){fe(e.target.value)},Ct=function(e){ye(e.target.value)},St=function(e){Se(e.target.value),V(Object(T.a)(Object(T.a)({},H),{},{dobError:!1}))},Bt=function(e){we(e.target.value)},Nt=function(e){Pe(e.target.value)},Tt=function(e){We(e.target.value)},wt=function(e){Ve(e.target.value)},Dt=function(e){Je(e.target.value)},Rt=function(e){ot(e.target.checked)},Lt=function(e){ht(e.target.checked)},At=function(e,t){if(e)ue(t.forenameCapital),fe(t.surnameCapital),$(Object(pt.FormatDateFromString)(t.bookingDate)),te(t.bookingTime.toUpperCase()),ie(t.gender.toUpperCase()),de(t.title.toUpperCase()),ye(t.email.toUpperCase()),Se(Object(pt.FormatDateFromString)(t.birthDate)),we(t.phone.toUpperCase()),Pe(t.postCode.toUpperCase()),We(t.address.toUpperCase()),t.notes&&Ue(t.notes.toUpperCase()),t.passportNumber&&Ve(t.passportNumber.toUpperCase()),t.passportNumber2&&Je(t.passportNumber2.toUpperCase()),ot(t.certificate),ht(t.antiBodyTest),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=Ze,n.antiBodyTest=jt,n.gender=oe,n.title=le,n.birthDate=Object(pt.RevertFormatDateFromString)(Ce),n.email=Oe,n.phone=Te,n.postCode=Le,n.address=_e,n.passportNumber=Ye,n.passportNumber2=Xe,n.forename=je,n.surname=ge,n.notes=ze,n.bookingDate=Object(pt.RevertFormatDateFromString)(J),n.bookingTime=ee,n.bookingRef=t.bookingRef,It(n)&&Ft({bookingId:a,person:n})}}else h({edit:e,person:t})},Pt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},It=function(e){var t=!1;return Pt(e.bookingDate)||(t=!0,V(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),Pt(e.birthDate)||(t=!0,V(Object(T.a)(Object(T.a)({},H),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,V(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},Ft=function(e){w(!0),et.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},_t=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),et.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Wt=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),et.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"stretch",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){var o,i,r,l,d,j,u,h,g,f;return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(f="panel".concat(n),function(e,t){b(!!t&&f)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.forenameCapital," ").concat(t.surnameCapital)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Wt(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Wt(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Wt(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){At(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){At(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){At(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){_t(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){_t(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){_t(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(pt.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:J,onChange:xt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:ee,onChange:mt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(o=t.gender)||void 0===o?void 0:o.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:oe,onChange:Ot,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(i=t.title)||void 0===i?void 0:i.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:yt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.forenameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:je,onChange:kt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.surnameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ge,onChange:vt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(r=t.email)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Oe,onChange:Ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(pt.FormatDateFromString)(t.birthDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.dobError,className:e.TextBox,value:Ce,onChange:St,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(l=t.phone)||void 0===l?void 0:l.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Te,onChange:Bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(d=t.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Le,onChange:Nt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(j=t.address)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:_e,onChange:Tt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(u=t.passportNumber)||void 0===u?void 0:u.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ye,onChange:wt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(h=t.passportNumber2)||void 0===h?void 0:h.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Xe,onChange:Dt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.certificate?Object(a.jsx)(bt.a,{className:e.checkIcon}):Object(a.jsx)(ut.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(G.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:Ze,onChange:Rt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.antiBodyTest?Object(a.jsx)(bt.a,{className:e.checkIcon}):Object(a.jsx)(ut.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(G.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:jt,onChange:Lt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(g=t.status,"booked"===g?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===g?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===g?Object(a.jsx)("span",{className:e.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===g?Object(a.jsx)("span",{className:e.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===g?Object(a.jsxs)("span",{className:e.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===g?Object(a.jsxs)("span",{className:e.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"sample_taken"===t.status&&!(p.edit&&p.person._id===t._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:N,onClick:function(e){return n=t._id,w(!0),void et.changeBackToBookingMade(n).then((function(e){w(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e),w(!1)}));var n},children:"Change Back To Booking Made"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(lt.calculatePrice)(t)<=199?e.infoDataCharges:e.infoDataChargesHigher,children:"\xa3".concat(Object(lt.calculatePrice)(t))})]}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,rt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,rt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_sent"!==t.status&&"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,rt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,rt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Certificate"})})]})})]})})},"panel".concat(n))}))]})})}var mt=function(e){return"boolean"===typeof e};function Ot(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var yt=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function kt(){var e=yt(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!mt(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){et.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),et.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Ot,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(xt,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var vt,Ct=n(12),St=n(63),Bt=n(736),Nt=n(331),Tt=n(202),wt=n(737),Dt=n(738),Rt=n(739),Lt=n(740),At=n(683),Pt=n(67),It=n.n(Pt),Ft=n(743),_t=n(741),Wt=n(19),Mt=n.n(Wt),Et=n(686),zt=n(79),Ut=n.n(zt),Ht=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}})),Gt=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Yt(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(Gt,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Vt(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Kt(e){var t=Ht(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],i.a.useState(!1)),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(""),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(10),B=Object(l.a)(S,2),N=B[0],T=B[1],w=i.a.useState(!1),D=Object(l.a)(w,2),L=D[0],A=D[1];Object(o.useEffect)((function(){T((function(e){return e>=100?100:(t=k,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[k]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,onClose:function(){b(!1),h(!1),A(!1),clearInterval(vt),e.handleClose()},PaperComponent:Vt,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ut.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","RESEND EMAILS"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"230px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!p&&!s&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report"," ",e.booking.certificate?" and Certificate":""," ","Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.resendButton,variant:"contained",color:"primary",onClick:function(t){b(!0),T(0),v("downloadFailed"),et.resendEmailsWithBookingId(e.booking._id).then((function(t){vt=setInterval((function(){et.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(vt))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(vt),A(!0))}))}),1e3),setTimeout((function(){A(!0),clearInterval(vt)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.cancelButton,variant:"contained",color:"default",onClick:function(t){e.handleClose()},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:s||p,className:t.resendFilesButton,variant:"contained",color:"primary",onClick:function(t){b(!0),T(0),v("downloadFailed"),m(!0),et.regenerateFilesWithBookingId(e.booking._id).then((function(t){vt=setInterval((function(){et.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(vt))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(vt),A(!0))}))}),1e3),setTimeout((function(){A(!0),clearInterval(vt)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})})]}),L&&!s&&!p&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"error",children:"Error! \u2014 Something is wrong with this record!"})}),(s||p)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[s&&!p&&"Sending ...",p&&!x&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent."]}),p&&x&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]}),(s||p)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Yt,{variant:"determinate",color:"primary",value:N})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:s&&!p&&"PLEASE WAIT ..."})]})]})})]})})})}var qt=n(38),Xt=n.n(qt),Jt=n(763),$t=n(773),Qt=["Visa Medical"],Zt=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function en(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function tn(e){var t=Zt(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(Qt[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=function(){m||(e.handleClose(),j("credit card"),g(Qt[0]),O(!1))},k=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.prev=1,t.next=4,et.payBooking(e.booking._id,b,"corporate"===b?h:"");case 4:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),y(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),O(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"800px",open:e.open,onClose:y,PaperComponent:en,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"270px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"17px"},children:" How do you want to pay? "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Qt.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:y,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:k,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var nn=n(126),an=n.n(nn),on=n(125),cn=n.n(on),rn=n(5),ln=n.n(rn),dn=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},sn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function bn(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function jn(e){var t=sn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],i.a.useState(null)),d=Object(l.a)(r,2),s=d[0],b=d[1],j=function(){b(null),e.handleClose()};Object(o.useEffect)((function(){e.booking&&e.booking.filename&&e.booking.filename.length>0&&et.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status&&b(e.data.link.timeStamp)}))}),[e.booking]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"sm",open:e.open,onClose:j,PaperComponent:bn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:ln()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(dn(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(dn(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),s?Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(s,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),s?Object(a.jsxs)("span",{className:t.itemData,children:[" ",ln()(dn(s,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)(_t.a,{children:Object(a.jsx)(R.a,{onClick:j,color:"default",children:"Back"})})]})})})}var un="#4faef7",pn="#e83caf",hn="#ff4f14",gn="#d6733a",fn="#dc2626",xn="#323e9a",mn=function e(){Object(ne.a)(this,e)};mn.createInvoice=function(e){return le.post("/api/medex/invoice/createinvoice",e)},mn.updateInvoice=function(e,t){return le.post("/api/medex/invoice/updateinvoice?invoiceNumber=".concat(e),t)},mn.deleteinvoice=function(e){return le.post("/api/medex/invoice/deleteinvoice?invoiceNumber=".concat(e))},mn.getInvoiceByBookingId=function(e){return le.get("/api/medex/invoice/getinvoicebybookingid?bookingId=".concat(e))},mn.getInvoiceByInvoiceNumber=function(e){return le.get("/api/medex/invoice/getinvoicebyinvoicenumber?invoiceNumber=".concat(e))},mn.getCodeDetails=function(e){return le.post("/api/medex/invoice/getcodedetails",{code:e})},mn.getAllCodes=function(){return le.get("/api/medex/invoice/getallcodes")},mn.downloadInvoice=function(e){return le.get("/api/pdf/downloadinvoice?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},mn.emailInvoice=function(e,t){return le.post("/api/pdf/emailinvoice?id=".concat(e,"&email=").concat(t))};var On=n(765),yn=n(71),kn=n(403),vn=n.n(kn),Cn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Sn(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Bn(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Nn(e){var t=Cn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],Object(o.useState)(!1)),d=Object(l.a)(r,2),s=d[0],b=d[1],j=null,u=Object(o.useState)(j),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=(x[0],x[1]),O=Object(o.useState)(""),y=Object(l.a)(O,2),k=y[0],v=y[1],S=Object(o.useState)(!1),w=Object(l.a)(S,2),D=w[0],A=w[1],P=Object(o.useState)(""),I=Object(l.a)(P,2),F=I[0],_=I[1],W=i.a.useState([]),M=Object(l.a)(W,2),E=M[0],z=M[1],U=Object(o.useState)(""),G=Object(l.a)(U,2),Y=G[0],J=G[1],$=Object(o.useState)(!1),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState("INVOICE ISSUANCE"),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState([]),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1];Object(o.useEffect)((function(){return e.invoice?(console.log(e.invoice.items),z(e.invoice.items),_(e.invoice.notes||""),oe("EDIT INVOICE")):oe("INVOICE ISSUANCE"),de(),function(){z([])}}),[e.invoice,e.open]),Object(o.useEffect)((function(){return!e.invoice&&e.defaultCodes&&z(e.defaultCodes),function(){z([])}}),[e.defaultCodes]);var de=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mn.getAllCodes();case 3:t=e.sent,le(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),se=function(t){s||(J(""),g(j),v(""),ee(!1),m(!1),A(!1),z([]),_(""),b(!1),e.handleClose(t))},be=function(){var e=!1;return!!h&&(h.description&&0!==h.description.length||(e=!0),h.price&&0!==h.price.length||(e=!0),!e)},je=function(){var e=!1;return k&&0!==k.length||(A(!0),e=!0),Y&&0!==Y.length||(ee(!0),e=!0),!e},ue=function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t},pe=function(){var t=Object(N.a)(B.a.mark((function t(){var n,a,o,i,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==E.length||e.invoice){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,b(!0),n="",a="",o="",e.booking.formData?(i=JSON.parse(e.booking.formData),n="".concat(i.title," ").concat(i.forename," ").concat(i.surname),a=i.postCode,o=i.address):e.booking.forename&&e.booking.surname?(n="".concat(e.booking.forename," ").concat(e.booking.surname),a=e.booking.postCode,o=e.booking.address):e.booking.fullname&&(n="".concat(e.booking.fullname)),c={name:n,date:new Date,dateAttended:new Date(e.booking.bookingDate),items:E,grandTotal:ue(E),bookingId:e.booking._id,postCode:a,address:o,notes:F},e.invoice){t.next=14;break}return t.next=12,mn.createInvoice(c);case 12:t.next=21;break;case 14:if(!(E.length>0)){t.next=19;break}return t.next=17,mn.updateInvoice(e.invoice.invoiceNumber,c);case 17:t.next=21;break;case 19:return t.next=21,mn.deleteinvoice(e.invoice.invoiceNumber);case 21:b(!1),se(!0),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(2),console.error(t.t0),b(!1);case 29:case"end":return t.stop()}}),t,null,[[2,25]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,onClose:function(){return se(!1)},PaperComponent:Bn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(vn.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:"".concat(ae)})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{height:"700px",width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:10,children:Object(a.jsx)(On.a,{id:"code-auto-complete",value:h,onChange:function(e,t){g(t)},options:re,getOptionLabel:function(e){return".".concat(e.code," -- ").concat(e.description," -- ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))},style:{width:"750px"},renderInput:function(e){return Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},e),{},{label:"System Codes",helperText:"Standard codes already defined in the system"}))}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){be()&&(z([].concat(Object(Ct.a)(E),[{code:h.code,description:h.description,price:h.price}])),g(j))},variant:"outlined",color:"primary",style:{marginTop:"15px"},disabled:s,children:"+ Add"})})]})}),Object(a.jsx)(K.a,{item:!0,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:D,value:k,onChange:function(e){v(e.target.value),A(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Z,value:Y,onChange:function(e){J(e.target.value),ee(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:Sn,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){je()&&(z([].concat(Object(Ct.a)(E),[{code:"",description:k,price:Y}])),v(""),J(""))},variant:"outlined",color:"primary",style:{marginTop:"12px"},disabled:s,children:"+ Add"})})]})}),Object(a.jsx)("div",{style:{backgroundColor:"#fff",color:"#1cb2c9",fontWeight:"500",fontSize:"0.95rem",padding:"5px 8px",marginBottom:"-15px",marginLeft:"10px",zIndex:"99",marginTop:"30px"},children:"Invoice Items"}),Object(a.jsx)("div",{style:{width:"100%",height:"300px",overflowY:"scroll",border:"1px solid #ddd",borderRadius:"4px",padding:"25px",position:"relative"},children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%",fontWeight:"500"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:"Code"}),Object(a.jsx)(K.a,{item:!0,xs:5,children:"Description"}),Object(a.jsx)(K.a,{item:!0,xs:2,children:"Price"}),Object(a.jsx)(K.a,{item:!0,xs:3})]})}),E.map((function(e,t){return Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:e.code}),Object(a.jsx)(K.a,{item:!0,xs:5,children:e.description}),Object(a.jsx)(K.a,{item:!0,xs:2,children:parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(ct.a,{title:"Remove Item",children:Object(a.jsx)(X.a,{style:{marginTop:"-15px"},onClick:function(){return function(e){var t=Object(Ct.a)(E);t.splice(e,1),z(t)}(t)},children:Object(a.jsx)(Ae.a,{color:"primary"})})})})]})})}))]})})}),Object(a.jsxs)(K.a,{item:!0,style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:"30px"},children:[Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#777"},children:["Grand Total :"," "]})," ",Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#1cb2c9",marginLeft:"10px",fontSize:"1rem"},children:[" ",ue(E).toLocaleString("en-GB",{style:"currency",currency:"GBP"})," "]})]}),Object(a.jsx)(K.a,{item:!0,style:{marginTop:"10px",width:"100%"},children:Object(a.jsx)(L.a,{value:F,onChange:function(e){_(e.target.value)},multiline:!0,rows:2,helperText:"* notes will be printed on the invoice (optional)",label:"Notes",fullWidth:!0,variant:"outlined",placeholder:"enter any addional notes you want to be printed on the invoice..."})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:s,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(_t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return se(!1)},style:{width:"100px"},disabled:s,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:pe,variant:"contained",color:e.invoice?"secondary":"primary",disabled:s,children:e.invoice?"Save Changes":"Issue Invoice"})})]})})]})})})}var Tn=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green",marginBottom:"-8px"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red",marginBottom:"-8px"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"80px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),wn=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function Dn(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Rn(e){var t,n,c,r,d,s,b,j,u,p=Tn(),h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=g[1],m=Object(o.useState)(!1),O=Object(l.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),S=Object(l.a)(v,2),w=S[0],D=S[1],A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(null),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({edit:!1,person:null}),U=Object(l.a)(z,2),H=U[0],J=U[1],$=i.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState(!1),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState(!1),pe=Object(l.a)(ue,2),ge=pe[0],fe=pe[1],xe=i.a.useState({}),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Ne=Object(l.a)(Be,2),Te=Ne[0],we=Ne[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(""),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=i.a.useState(""),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=Ge[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],tt=Qe[1],nt=i.a.useState(""),at=Object(l.a)(nt,2),ot=at[0],it=at[1],dt=i.a.useState(""),st=Object(l.a)(dt,2),jt=st[0],ht=st[1],ft=i.a.useState(""),xt=Object(l.a)(ft,2),mt=xt[0],Ot=xt[1],yt=i.a.useState(""),kt=Object(l.a)(yt,2),vt=kt[0],Ct=kt[1],St=i.a.useState(""),Bt=Object(l.a)(St,2),Nt=Bt[0],Tt=Bt[1],At=i.a.useState(""),Pt=Object(l.a)(At,2),It=Pt[0],Wt=Pt[1],Mt=i.a.useState(!1),Et=Object(l.a)(Mt,2),zt=Et[0],Ht=Et[1],Gt=i.a.useState(!1),Yt=Object(l.a)(Gt,2),Vt=Yt[0],qt=Yt[1],Xt=i.a.useState(!1),Jt=Object(l.a)(Xt,2),$t=Jt[0],Qt=Jt[1],Zt=i.a.useState(null),en=Object(l.a)(Zt,2),nn=en[0],on=en[1],rn=i.a.useState(!1),ln=Object(l.a)(rn,2),dn=ln[0],sn=ln[1],bn=i.a.useState(!1),pn=Object(l.a)(bn,2),hn=pn[0],gn=pn[1],fn=i.a.useState(!1),xn=Object(l.a)(fn,2),On=xn[0],yn=xn[1],kn=i.a.useState(!1),vn=Object(l.a)(kn,2),Cn=vn[0],Sn=vn[1],Bn=function(){yn(!1)};Object(o.useEffect)((function(){if(nn){var e=Ce!==Object(pt.FormatDateFromString)(nn.bookingDate)||Te!==nn.bookingTime||Le!==nn.gender||ze!==nn.forenameCapital||Ye!==nn.surnameCapital||_e!==nn.title||Xe!==nn.email||Ze!==Object(pt.FormatDateFromString)(nn.birthDate)||ot!==nn.phone||jt!==nn.postCode||mt!==nn.address||Nt!==nn.passportNumber||It!==nn.passportNumber2||zt!==nn.certificate||Vt!==nn.antiBodyTest;sn(e)}}),[hn]),Object(o.useEffect)((function(){e.open||setTimeout((function(){J({edit:!1,person:null}),sn(!1)}),500)}),[e.open]);var Rn=function(e,t){if(e)Ue(t.forenameCapital),Ve(t.surnameCapital),Se(Object(pt.FormatDateFromString)(t.bookingDate)),we(t.bookingTime.toUpperCase()),Pe(t.gender.toUpperCase()),We(t.title.toUpperCase()),Je(t.email.toUpperCase()),tt(Object(pt.FormatDateFromString)(t.birthDate)),it(t.phone.toUpperCase()),ht(t.postCode.toUpperCase()),Ot(t.address.toUpperCase()),t.notes?Ct(t.notes.toUpperCase()):Ct(""),t.passportNumber?Tt(t.passportNumber.toUpperCase()):Tt(""),t.passportNumber2?Wt(t.passportNumber2.toUpperCase()):Wt(""),Ht(t.certificate),qt(t.antiBodyTest),J({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=zt,n.antiBodyTest=Vt,n.gender=Le,n.title=_e,n.birthDate=Object(pt.RevertFormatDateFromString)(Ze),n.email=Xe,n.phone=ot,n.postCode=jt,n.address=mt,n.passportNumber=Nt,n.passportNumber2=It,n.forename=ze,n.surname=Ye,n.notes=vt,n.bookingDate=Object(pt.RevertFormatDateFromString)(Ce),n.bookingTime=Te,n.bookingRef=t.bookingRef,An(n)&&Pn({bookingId:a,person:n})}}else J({edit:e,person:t}),sn(!1)},Ln=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},An=function(e){var t=!1;return Ln(e.bookingDate)||(t=!0,ye(Object(T.a)(Object(T.a)({},Oe),{},{bookingDateError:!0}))),Ln(e.birthDate)||(t=!0,ye(Object(T.a)(Object(T.a)({},Oe),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ye(Object(T.a)(Object(T.a)({},Oe),{},{bookingTimeError:!0}))),!t},Pn=function(e){le(!0),et.updateBooking(e).then((function(e){le(!1),J({edit:!1,person:null}),Qt(!$t)})).catch((function(e){le(!1),J({edit:!1,person:null}),console.log(e)}))},In=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),et.deleteBooking(n).then((function(e){je(!1),ee({delete:!1,person:null}),Qt(!$t)})).catch((function(e){je(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Fn=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),et.unDeleteBooking(n).then((function(e){fe(!1),oe({restore:!1,person:null}),Qt(!$t)})).catch((function(e){fe(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(et.getBookingById(e.booking._id).then((function(e){on(e.data)})).catch((function(e){console.log(e)})),x((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[$t,f.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&on(e.booking)}),[e.booking]);var _n=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,et.unPayBooking(nn._id);case 4:le(!1),yn(!1),Qt(!$t),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),yn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Wn=i.a.useState(null),Mn=Object(l.a)(Wn,2),En=Mn[0],zn=Mn[1],Un=i.a.useState(!1),Hn=Object(l.a)(Un,2),Gn=Hn[0],Yn=Hn[1],Vn=i.a.useState(!1),Kn=Object(l.a)(Vn,2),qn=Kn[0],Xn=Kn[1],Jn=i.a.useState(!1),$n=Object(l.a)(Jn,2),Qn=$n[0],Zn=$n[1],ea=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Yn(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,zn(n.data.invoice),Yn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Yn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&ea()}),[e.booking,e.open]);var ta,na=function(){E(nn),zn(En),Xn(!0)};return Object(a.jsx)(i.a.Fragment,{children:nn&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:wn,keepMounted:!0,onClose:e.onClose,PaperComponent:Dn,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:nn.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},hidden:"pcrlab"===f.role,children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/pcr/".concat(nn._id)),k(!0),setTimeout((function(){k(!1)}),1500)},"aria-label":"delete",className:p.margin,size:"small",children:Object(a.jsx)(cn.a,{style:nn.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!y,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:un,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"PCR"}),nn.tr&&Object(a.jsx)("div",{style:{position:"absolute",right:"15px"},children:"TR"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:nn.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(nn.forenameCapital," ").concat(nn.surnameCapital)})}),nn.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:nn.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"20px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:p.infoDetails,children:Object(a.jsxs)("ul",{className:p.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!nn.deleted||ae.restore&&ae.person._id===nn._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Fn(!0,nn)},className:p.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){Fn(!1,nn)},className:p.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){Fn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:nn.deleted||Z.delete||H.edit&&H.person._id===nn._id||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Rn(!0,nn)},className:p.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!dn,onClick:function(){Rn(!1,nn)},className:p.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){Rn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:e.deleteButtonDisabled||nn.deleted||H.edit||Z.delete&&Z.person._id===nn._id||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){In(!0,nn)},className:p.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){In(!1,nn)},className:p.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===nn._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){In(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:Object(pt.FormatDateFromString)(nn.bookingDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingDateError,className:p.TextBox,value:Ce,onChange:function(e){Se(e.target.value),ye(Object(T.a)(Object(T.a)({},Oe),{},{bookingDateError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingTimeError,className:p.TextBox,value:Te,onChange:function(e){we(e.target.value),ye(Object(T.a)(Object(T.a)({},Oe),{},{bookingTimeError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(t=nn.gender)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Le,onChange:function(e){Pe(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(n=nn.title)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:_e,onChange:function(e){We(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.forenameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:ze,onChange:function(e){Ue(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.surnameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(c=nn.email)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Xe,onChange:function(e){Je(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:Object(pt.FormatDateFromString)(nn.birthDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.dobError,className:p.TextBox,value:Ze,onChange:function(e){tt(e.target.value),ye(Object(T.a)(Object(T.a)({},Oe),{},{dobError:!1})),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(r=nn.phone)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:ot,onChange:function(e){it(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(d=nn.postCode)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:jt,onChange:function(e){ht(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(s=nn.address)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:mt,onChange:function(e){Ot(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),nn.selfIsolate&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Post Code"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.postCodeSI})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Address"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.addressSI})]})]}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(b=nn.passportNumber)||void 0===b?void 0:b.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Nt,onChange:function(e){Tt(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]}),!nn.tr&&Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:null===(j=nn.passportNumber2)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:It,onChange:function(e){Wt(e.target.value),gn(!hn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{hidden:!nn.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"NHS Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:null!==(u=nn.NHSNumber)&&void 0!==u?u:"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Ethnicity"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.ethnicity})]})]})}),Object(a.jsx)("li",{hidden:!nn.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Arrival Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.arrivalDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Flight Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.flightNumber})]})]})}),Object(a.jsx)("li",{hidden:!nn.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Last Departed Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.lastDepartedDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Travelling From"})," ",Object(a.jsx)("span",{className:p.infoData,children:nn.travellingFrom})]})]})}),Object(a.jsx)("li",{hidden:nn.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.certificate?Object(a.jsx)(bt.a,{className:p.checkIcon}):Object(a.jsx)(ut.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(G.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:zt,onChange:function(e){Ht(e.target.checked),gn(!hn)}}),label:""})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===nn._id,className:p.infoData,children:nn.antiBodyTest?Object(a.jsx)(bt.a,{className:p.checkIcon}):Object(a.jsx)(ut.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===nn._id),className:p.infoData,children:Object(a.jsx)(G.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:Vt,onChange:function(e){qt(e.target.checked),gn(!hn)}}),label:""})})]})]})}),Object(a.jsxs)("li",{className:p.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:p.infoTitle,children:"STATUS"})," ",(ta=nn.status,"booked"===ta?Object(a.jsx)("span",{className:p.BookedLabel,children:" Booking Made "}):"patient_attended"===ta?Object(a.jsx)("span",{className:p.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===ta?Object(a.jsx)("span",{className:p.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===ta?Object(a.jsx)("span",{className:p.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===ta?Object(a.jsxs)("span",{className:p.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===ta?Object(a.jsxs)("span",{className:p.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"pcrlab"!==f.role&&"sample_taken"===nn.status&&!(H.edit&&H.person._id===nn._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:re,onClick:function(e){return t=nn._id,le(!0),void et.changeBackToBookingMade(t).then((function(e){le(!1),Qt(!$t)})).catch((function(e){console.log(e),le(!1)}));var t},children:"Change Back To Booking Made"}),("report_sent"===nn.status||"report_cert_sent"===nn.status||"positive"===nn.status)&&!(H.edit&&H.person._id===nn._id)&&"pcrlab"!==f.role&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.ResendEmailsButton,onClick:function(e){return nn._id,E(nn),void D(!0)},children:"Resend emails"})]}),Object(a.jsx)("li",{hidden:nn.deleted||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,rt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:nn.deleted||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,rt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),Qt(!$t)})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role||nn.deleted||"report_sent"!==nn.status&&"report_cert_sent"!==nn.status&&"positive"!==nn.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,rt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role||nn.deleted||"report_cert_sent"!==nn.status&&"positive"!==nn.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=nn._id,rt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Certificate"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){E(nn),Sn(!0)},className:p.DownloadForm,children:"Show Audit Trail"})}),"pcrlab"!==f.role&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:p.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:p.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Gn&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ","..."," "]}),Gn&&En&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ",En.invoiceNumber," "]}),Gn&&!En&&Object(a.jsxs)("span",{className:p.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(H.edit&&H.person._id===nn._id)&&!nn.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Gn&&!En&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.PayButton,onClick:function(){return na()},children:"Issue Invoice"}),Gn&&En&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:p.printInvoiceButton,onClick:function(){return e=En._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.editInvoiceButton,onClick:function(){return na()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!nn.email||nn.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=En._id,t=nn.email,le(!0),Zn(!1),mn.emailInvoice(e,t).then((function(e){le(!1),"OK"===e.data.status&&Zn(!0)})).catch((function(e){console.log(e),le(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Qn&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(lt.calculatePrice)(nn)<=199?p.infoDataCharges:p.infoDataChargesHigher,children:"\xa3".concat(Object(lt.calculatePrice)(nn))}),!(H.edit&&H.person._id===nn._id)&&!nn.paid&&!nn.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.PayButton,onClick:function(e){return nn._id,E(nn),void F(!0)},children:"Pay"}),!(H.edit&&H.person._id===nn._id)&&nn.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:p.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:p.checkIconSmall})," ","Paid by ",nn.paidBy,"corporate"===nn.paidBy?' "'.concat(nn.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return yn(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:p.backdrop,open:re||be||ge,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Kt,{booking:M,open:w,handleClose:function(){D(!1),E(null)}}),Object(a.jsx)(tn,{booking:M,open:I,handleClose:function(){F(!1),E(null)}}),Object(a.jsx)(Nn,{booking:M,invoice:En,open:qn,defaultCodes:function(e){var t=[];if(e)return e.tr?t.push({code:"PCRTR",description:"PCR TEST TO RELEASE",price:250}):(t.push({code:"PCR",description:"PCR SWAB TEST",price:199}),e.antiBodyTest&&(t.push({code:"PCRA",description:"PCR ANTIBODY TEST",price:99}),t.push({code:"PHLE",description:"PHLEBOTOMY",price:50})),e.certificate&&t.push({code:"PCRCERT",description:"PCR FIT TO FLY CERTIFICATE",price:50})),t}(e.booking),handleClose:function(e){Xn(!1),E(null),ea()}}),Object(a.jsx)(jn,{booking:M,open:Cn,handleClose:function(){Sn(!1),E(null)}})]}),Object(a.jsxs)(wt.a,{open:On,onClose:Bn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:Bn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:_n,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]})]})})}var Ln=n(77),An=n(78),Pn=n(100),In=(n(497),n(313),n(102)),Fn=n(760),_n=n(83),Wn=n.n(_n),Mn=n(82),En=n.n(Mn),zn=n(99),Un=n.n(zn),Hn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80}}})),Gn=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"tr"===e?"Test & Release Bookings":"All Bookings"};function Yn(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Vn(e){var t=Hn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=c[0],d=(c[1],i.a.useState(25)),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(!1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(new Date((new Date).getTime()-6048e5)),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date((new Date).getTime()-864e5)),k=Object(l.a)(y,2),v=k[0],S=k[1],B=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),N=Object(l.a)(B,2),w=N[0],D=N[1],A=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),P=Object(l.a)(A,2),I=P[0],F=P[1],_=Object(o.useState)(!1),W=Object(l.a)(_,2),M=W[0],U=W[1],H=Object(o.useState)(!0),V=Object(l.a)(H,2),q=V[0],J=V[1],$=Object(o.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!0),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=Object(o.useState)(!0),re=Object(l.a)(ce,2),le=re[0],de=re[1],se=Object(o.useState)(!0),be=Object(l.a)(se,2),je=be[0],pe=be[1],ge=Object(o.useState)(!0),xe=Object(l.a)(ge,2),Oe=xe[0],ke=xe[1],Ce=Object(o.useState)(!0),Be=Object(l.a)(Ce,2),Te=Be[0],we=Be[1],De=Object(o.useState)(!0),Le=Object(l.a)(De,2),Pe=Le[0],Fe=Le[1],_e=Object(o.useState)(!0),We=Object(l.a)(_e,2),Me=We[0],Ee=We[1],ze=Object(o.useState)(!0),Ue=Object(l.a)(ze,2),He=Ue[0],Ge=Ue[1],Ye=[];Ye="recent"===e.date&&"pcrlab"!==r.role?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==r.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ft(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return yt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(bt.a,{className:t.checkIcon}):Object(a.jsx)(ut.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(bt.a,{className:t.checkIcon}):Object(a.jsx)(ut.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}]:"pcrlab"===r.role?[{field:"bookingDate",headerName:"Booking Date",width:200,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"Booking Time",width:200,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"forenameCapital",headerName:"Forename",width:300},{field:"surnameCapital",headerName:"Surname",width:300},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==r.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return Ft(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(ut.a,{className:t.closeIcon})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,onClick:function(){},children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(bt.a,{className:t.checkIcon}):Object(a.jsx)(ut.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(bt.a,{className:t.checkIcon}):Object(a.jsx)(ut.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}];var Ve=i.a.useState({bookings:[],cachedBookings:[],isFetching:!0}),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),tt=Object(l.a)(Ze,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(l.a)(ot,2),rt=it[0],lt=it[1],st=Object(o.useState)(Qt[0]),jt=Object(l.a)(st,2),ht=jt[0],gt=jt[1],ft=i.a.useState(""),xt=Object(l.a)(ft,2),mt=xt[0],Ot=xt[1],yt=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),kt=function(t){var n=et.getAllBookings;"today"===e.date?n=et.getTodayBookings:"old"===e.date?n=et.getOldBookings:"future"===e.date?n=et.getFutureBookings:"recent"===e.date?n=et.getRecentBookingsAll:"live"===e.date?n=et.getLiveBookings:"completed"===e.date?n=et.getCompletedBookings:"positive"===e.date?n=et.getPositiveBookings:"deleted"===e.date?n=et.getDeletedBookings:"late"===e.date?n=et.getLateBookings:"tr"===e.date&&(n=et.getAllTRBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){j(25),kt(25)}),[e.date]),Object(o.useEffect)((function(){if(mt&&mt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(mt.toLowerCase())>=0||e.surname.toLowerCase().indexOf(mt.toLowerCase())>=0||"".concat(e.forename," ").concat(e.surname).toLowerCase().indexOf(mt.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[mt]),Object(o.useEffect)((function(){kt(b)}),[r.bookingDialogDataChanged]);var vt,Pt,Ft=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));at(n),lt(!0)},_t=i.a.useState(1),Wt=Object(l.a)(_t,2),Mt=Wt[0],Et=Wt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Pt=e.date,"today"===Pt?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Pt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Pt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Pt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Pt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Pt?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Pt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Pt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Pt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Gn(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){Ot(""),kt(b)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&"admin"===r.userId.username&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){g(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:mt,onChange:function(e){Ot(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(vt=e.date,"live"===vt||"positive"===vt||"late"===vt||"today"===vt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:b,onChange:function(e){j(e.target.value),kt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ye,autoPageSize:!0,page:Mt,onPageChange:function(e){Et(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Rn,{booking:nt,open:rt,onClose:function(){at(null),lt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:h,onClose:function(){gt(Qt[0]),U(!1),g(!1)},PaperComponent:Yn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:M,onChange:function(e){U(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),M&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:ht,onChange:function(e){gt(e.target.value)},children:Qt.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:m,onChange:function(e){O(e),D(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:v,onChange:function(e){S(e),F(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(w,".").concat(I),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:q,onChange:function(e){J(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){ie(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){de(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:je,onChange:function(e){pe(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ke(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Te,onChange:function(e){we(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Pe,onChange:function(e){Fe(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){Ee(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:He,onChange:function(e){Ge(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[q&&Object(a.jsx)("th",{className:t.th,children:"Date"}),ee&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),le&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),je&&Object(a.jsx)("th",{className:t.th,children:"Email"}),Oe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Te&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Pe&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Me&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),He&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return M?e.bookingDate>=w&&e.bookingDate<=I&&e.paid&&"corporate"===e.paidBy&&e.corporate===ht:e.bookingDate>=w&&e.bookingDate<=I})).map((function(e){return Object(a.jsxs)("tr",{children:[q&&Object(a.jsx)("td",{className:t.td,children:Object(pt.FormatDateFromString)(e.bookingDate)}),ee&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),oe&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),le&&Object(a.jsx)("th",{className:t.th,children:Object(pt.FormatDateFromString)(e.birthDate)}),je&&Object(a.jsx)("td",{className:t.td,children:e.email}),Oe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Te&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Pe&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Me&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),He&&Object(a.jsx)("td",{className:t.td,children:dt.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Kn=n(89),qn=n(764),Xn=n(744),Jn=n(416),$n=n(417),Qn=n(105),Zn=n(434);function ea(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function ta(e,t){return{time:e,amount:t}}var na=[ta("09:00",0),ta("10:00",0),ta("11:00",0),ta("12:00",0),ta("13:00",0),ta("14:00",0),ta("15:00",0),ta("16:00",0),ta("17:00",0),ta("18:00",void 0)],aa=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function oa(){var e=Object(Kn.a)(),t=i.a.useState(na),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,et.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(ta("09:00",aa(o,"09"))),n.push(ta("10:00",aa(o,"10"))),n.push(ta("11:00",aa(o,"11"))),n.push(ta("12:00",aa(o,"12"))),n.push(ta("13:00",aa(o,"13"))),n.push(ta("14:00",aa(o,"14"))),n.push(ta("15:00",aa(o,"15"))),n.push(ta("16:00",aa(o,"16"))),n.push(ta("17:00",aa(o,"17"))),n.push(ta("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(ea,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var ia=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ca=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},ra=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function la(){var e=ia(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=ca(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),et.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(ea,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:ra(ca(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Rn,{booking:h,open:m,onClose:function(){O(!1)}})]})}var da=n(748),sa=n(751),ba=n(734),ja=n(749),ua=n(750),pa=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ha(){var e=pa(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),et.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O(),setInterval((function(){h((function(e){return!e}))}),3e4)}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(ea,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Name"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.forename}),Object(a.jsx)(ba.a,{children:e.surname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:Object(pt.FormatDateFromString)(e.birthDate)}),Object(a.jsx)(ba.a,{children:Object(pt.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("pcr","recentBookings")})}))},children:"See more records"})})]})}var ga=n(766),fa=n(418),xa=n(420),ma=["#00b33e","#0070e0","#bb00c4"],Oa=Math.PI/180,ya=function(e){var t=e.cx,n=e.cy,o=e.midAngle,i=e.innerRadius,c=e.outerRadius,r=e.value,l=(e.index,i+.5*(c-i)),d=t+l*Math.cos(-o*Oa),s=n+l*Math.sin(-o*Oa);return Object(a.jsx)("text",{x:d,y:s,fontSize:"14px",fontWeight:"500",fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat(r," ")})},ka=Object(w.a)({depositContext:{flex:1},ReportLabels:{position:"absolute",top:"80px",left:"0px"},AverageLabel:{position:"absolute",top:"190px",right:"30px",fontSize:"12px",color:"#0070e0",fontWeight:"600"},less12Label:{fontSize:"12px",color:"#00b33e",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #00b33e",marginBottom:"10px"},less24Label:{fontSize:"12px",color:"#0070e0",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #0070e0",marginBottom:"10px"},less36Label:{fontSize:"12px",color:"#bb00c4",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #bb00c4",marginBottom:"10px"},seeMore:{position:"absolute",top:"191px",left:"2px"}});function va(){var e=ka(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1];Object(o.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){v(!0),et.getTestsTimeReport().then((function(e){var t=[];v(!1),"OK"===e.data.status&&(b(e.data.result),t.push({name:"lessThan12",value:e.data.result.lessThan12}),t.push({name:"lessThan24",value:e.data.result.lessThan24}),t.push({name:"lessThan36",value:e.data.result.lessThan36}),m(t))})).catch((function(e){v(!1),console.error(e)}))}),[]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[k&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(ea,{children:"PCR RESULTS SUMMARY"}),x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ga.a,{width:250,height:150,children:Object(a.jsx)(fa.a,{data:x,cx:170,cy:70,labelLine:!1,label:ya,outerRadius:65,fill:"#8884d8",dataKey:"value",children:x.map((function(e,t){return Object(a.jsx)(xa.a,{fill:ma[t%ma.length]},"cell-".concat(t))}))})}),Object(a.jsxs)("div",{className:e.ReportLabels,children:[Object(a.jsxs)("div",{className:e.less12Label,children:[" ","12 Hours"," "]}),Object(a.jsxs)("div",{className:e.less24Label,children:[" ","24 Hours"," "]}),Object(a.jsxs)("div",{className:e.less36Label,children:[" ","36 Hours"," "]})]}),Object(a.jsxs)("div",{className:e.AverageLabel,children:["avg = ",Object(a.jsxs)("span",{style:{fontSize:"14px"},children:[" ","".concat(s.avg)," "]})," hours"]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),h(!0)},children:"See Details"})}),Object(a.jsxs)(wt.a,{style:{padding:"50px"},onClose:function(){h(!1)},"aria-labelledby":"simple-dialog-title",open:p,children:[Object(a.jsx)(Dt.a,{style:{textAlign:"center"},id:"simple-dialog-title",children:"PCR Results Time Report"}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)(da.a,{children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Recieved in Less Than"}),Object(a.jsx)(ba.a,{children:"Count"}),Object(a.jsx)(ba.a,{children:"Percent"})]})}),Object(a.jsxs)(sa.a,{children:[Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"12 Hours"}),Object(a.jsx)(ba.a,{children:s.lessThan12}),Object(a.jsxs)(ba.a,{children:[s.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"24 Hours"}),Object(a.jsx)(ba.a,{children:s.lessThan24}),Object(a.jsxs)(ba.a,{children:[s.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"36 Hours"}),Object(a.jsx)(ba.a,{children:s.lessThan36}),Object(a.jsxs)(ba.a,{children:[s.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"48 Hours"}),Object(a.jsx)(ba.a,{children:s.lessThan48}),Object(a.jsxs)(ba.a,{children:[s.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(ba.a,{style:{fontWeight:"600"},children:s.lessThan48+s.lessThan36+s.lessThan24+s.lessThan12}),Object(a.jsx)(ba.a,{})]},"row4")]})]})})]})]})]})})}var Ca=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Sa(){var e=Ca(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(oa,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(va,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(la,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(ha,{})})})]})})}var Ba,Na=n(152),Ta=n.n(Na),wa=n(752),Da=n(769),Ra=n(140),La=n.n(Ra),Aa=n(153),Pa=n.n(Aa),Ia=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginLeft:"50px"}}})),Fa=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function _a(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(Fa,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Wa(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Ma(){var e=Ia(),t=[{field:"id",headerName:"#",width:50},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"forename",headerName:"Forename",width:200},{field:"surname",headerName:"Surname",width:200},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(pt.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===P?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(La.a,{}),onClick:function(e){return qe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",variant:"contained",color:"primary",onClick:function(e){return Je(e,t.value)},className:e.archiveButton,children:"archive"}),Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]}):Object(a.jsxs)(i.a.Fragment,{children:["pcrlab"!==r.role&&Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(La.a,{}),onClick:function(e){return qe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),"pcrlab"!==r.role&&Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Undo"}),Object(a.jsx)(R.a,{disabled:t.value===N,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],n=i.a.useContext(C),c=Object(l.a)(n,2),r=c[0],d=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=(p[0],p[1]),g=i.a.useState(""),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(null),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("pcrlab"!==r.role?"unresolved":"archived"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState(!1),_=Object(l.a)(F,2),M=_[0],E=_[1],z=i.a.useState(!1),U=Object(l.a)(z,2),H=U[0],V=U[1],q=i.a.useState(null),J=Object(l.a)(q,2),$=J[0],Q=J[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),de=le[0],se=le[1],be=i.a.useState(null),je=Object(l.a)(be,2),ue=je[0],pe=je[1],he=i.a.useState(!1),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState(!1),Oe=Object(l.a)(me,2),ye=Oe[0],ke=Oe[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Ne=i.a.useState(!1),Te=Object(l.a)(Ne,2),De=Te[0],Re=Te[1],Le=i.a.useState(!1),Ae=Object(l.a)(Le,2),Pe=Ae[0],Ie=Ae[1],Fe=i.a.useState(""),_e=Object(l.a)(Fe,2),We=_e[0],Me=_e[1],Ee=i.a.useState(10),ze=Object(l.a)(Ee,2),Ue=ze[0],He=ze[1],Ge=i.a.useState(!1),Ye=Object(l.a)(Ge,2),Ve=Ye[0],Ke=Ye[1],qe=function(e,t){Q(t),E(!0),Xe(t)};Object(o.useEffect)((function(){$&&Xe($)}),[r.bookingDialogDataChanged]);var Xe=function(e){et.getLinkDetails(e).then((function(e){ne(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),et.findBestMatches(e).then((function(e){ce(e.data.matchedBookings)})).catch((function(e){console.log(e),ce([])}))},Je=function(e,t){N||(w(t),et.archiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},$e=function(e,t){N||(w(t),et.unArchiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},Qe=Object(o.useRef)();Object(o.useEffect)((function(){var e=et.getUnmatchedRecords;"archived"===P&&(e=et.getUnmatchedRecordsArchived),Ke(!0),j({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});return e.data}));Qe.current=t,t.then((function(e){t===Qe.current&&(Ke(!1),j({bookings:e,cachedBookings:Object(Ct.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(Ke(!1),console.log(e),j({bookings:b.bookings,cachedBookings:b.cachedBookings,isFetching:!1}))}))}),[k,P]),Object(o.useEffect)((function(){if(x&&x.trim().length>0){var e=b.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(x.toLowerCase())>=0||e.surname.toLowerCase().indexOf(x.toLowerCase())>=0}));j({bookings:e,cachedBookings:b.cachedBookings,isFetching:!1})}else j({bookings:Object(Ct.a)(b.cachedBookings),cachedBookings:b.cachedBookings,isFetching:!1})}),[x]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=We,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[We]);var Ze=function(e){rt.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:" Unmatched Records "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){m(""),v(!k)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Da.a,{value:P,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){"pcrlab"!==r.role&&t&&t.length&&I(t)},"aria-label":"text alignment",children:[Object(a.jsx)(wa.a,{value:"unresolved","aria-label":"left aligned",children:"UnResolved"}),Object(a.jsx)(wa.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:x,onChange:function(e){m(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:b.bookings,columns:t,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&h(e.rows[0])}})}),Object(a.jsxs)(wt.a,{maxWidth:"lg",open:M,onClose:function(){E(!1),setTimeout((function(){Q(null),ne(null),ce(null),se(null),ke(!1),xe(!1),Me(null),Be(!1),Re(!1),clearInterval(Ba),Ie(!1)}),100)},PaperComponent:Wa,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(La.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"600px"},children:[(!ie||!te)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ta.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),ie&&0===ie.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),ie&&te&&ie.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Forename:"}),Object(a.jsx)("span",{className:e.infoData,children:te.forename})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Surname:"}),Object(a.jsx)("span",{className:e.infoData,children:te.surname})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(pt.FormatDateFromString)(te.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(pt.FormatDateFromString)(te.testDate)})]})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Select"}),Object(a.jsx)(ba.a,{children:"Match"}),Object(a.jsx)(ba.a,{children:"Forename"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Test Date"}),Object(a.jsx)(ba.a,{})]})}),Object(a.jsx)(sa.a,{children:ie.map((function(e){var t;return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:Object(a.jsx)(ct.a,{title:e.birthDate!==te.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de&&de._id===e._id,disabled:ye||fe,onChange:function(t){return function(e,t){e.target.checked?se(t):se(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(ba.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(ba.a,{style:e.forenameCapital===te.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(ba.a,{style:e.surnameCapital===te.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(ba.a,{style:e.birthDate===te.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==te.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Pa.a,{})})}),Object(pt.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(ba.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(ba.a,{style:ln()(e.samplingTimeStamp,"yyyy-mm-dd")===te.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(pt.FormatDateFromString)(ln()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(ba.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){pe(t),V(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ye&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!de||fe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){xe(!0),et.getBookingById(de._id).then((function(e){se(e.data)})),et.matchRecords(de._id,$).then((function(e){"OK"===e.data.status&&(xe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!de&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ye&&!De&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",de.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),Me("downloadFailed"),et.resendEmails($).then((function(e){Ba=setInterval((function(){et.getLinkDetails($).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),v(!k),clearInterval(Ba))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),Me("downloadFailed"),Ie(!0),et.regenerateFiles($).then((function(e){Ba=setInterval((function(){et.getLinkDetails($).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),v(!k),clearInterval(Ba))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ye&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",de.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ye&&(Se||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(_a,{variant:"determinate",color:"primary",value:Ue})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]}),Object(a.jsx)(Rn,{booking:ue,open:H,onClose:function(){V(!1),setTimeout((function(){pe(null)}),500)},deleteButtonDisabled:!0})]})]})]})}var Ea=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),za=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=Ea(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,et.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=50?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/100*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Ua=n(85),Ha=n.n(Ua),Ga=function e(){Object(ne.a)(this,e)};Ga.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var Ya=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Va=[1,2,3,4,5,6,7],Ka=[1,2,3,4,5,6],qa=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Xa=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=qa(),r=Ga.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Ya.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Ka.map((function(e){return Object(a.jsx)("tr",{children:Va.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(za,{cellIndex:(e-1)*Va.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*Va.length+i))})}))})}))})]})})},Ja=n(116),$a=n.n(Ja),Qa=n(117),Za=n.n(Qa),eo=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),to=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=eo(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return et.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B}):void 0),function(e){if(e>0){var t=e/5*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},no=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ao=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),oo=function(e){var t=e.dates,n=e.dayClicked,o=ao();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:no.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(to,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},io=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),co=function(e){e.key;var t=e.date,n=e.time,c=io(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.forenameCapital.indexOf(e)>=0||t.surnameCapital.indexOf(e)>=0||"".concat(t.forenameCapital," ").concat(t.surnameCapital).indexOf(e)>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I){e.next=9;break}return e.next=7,et.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();I&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var _,W=function(e){switch(e){case"sample_taken":return c.bookingBoxSampleTaken;case"positive":return c.bookingBoxPositive;case"report_sent":case"report_cert_sent":return c.bookingBoxReportSent;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(_=x,null===_?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_.length>0?_.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:W(e.status),onClick:function(t){return function(e,t){"pcrlab"!==s.role&&(v(t),F(!0))}(0,e)},children:"".concat(e.forenameCapital,"-").concat(e.surnameCapital).substring(0,15)})})):void 0)}),Object(a.jsx)(Rn,{booking:k,open:I,onClose:function(){F(!1)}})]})},ro=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],lo=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),so=function(e){var t=e.date,n=lo();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:ro.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(co,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},bo=["January","February","March","April","May","June","July","August","September","October","November","December"],jo=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function uo(){var e=jo(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(bo[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Xa,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(oo,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(so,{date:x}):void 0)]})}var po=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),ho=function e(){Object(ne.a)(this,e)};ho.changeDepositBooking=function(e,t){return po.post("/api/gynae/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},ho.addNewBooking=function(e){return po.post("/api/gynae/book/addnewbooking",e)},ho.sendRegFormEmail=function(e){return po.post("/api/gynae/book/sendregformemail?id=".concat(e))},ho.payBooking=function(e,t,n,a){return po.post("/api/gynae/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},ho.unPayBooking=function(e){return po.post("/api/gynae/book/unpaybooking?id=".concat(e))},ho.getShouldRefundsCount=function(){return po.get("/api/gynae/book/getshouldrefundscount")},ho.manualRefundBooking=function(e){return po.post("/api/gynae/payment/manualrefundpayment",{bookingId:e})},ho.refundBooking=function(e){return po.post("/api/gynae/payment/refundpayment",{bookingId:e})},ho.getBookingsStatsByDateStr=function(e){return po.get("/api/gynae/book/getbookingsstatsbydatestr?date=".concat(e))},ho.getBookingsCountByDateStr=function(e){return po.get("/api/gynae/book/getbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountAll=function(){return po.get("/api/gynae/book/getallbookingscountall")},ho.getBookingsCountByDateStrandTime=function(e,t,n){return po.get("/api/gynae/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getBookingsByDateStrandTime=function(e,t){return po.get("/api/gynae/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.getAllBookingsCountByDateStr=function(e){return po.get("/api/gynae/book/getallbookingscountbydatestr?date=".concat(e))},ho.getAllBookingsCountByDateStrandTime=function(e,t,n){return po.get("/api/gynae/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ho.getAllBookingsByDateStrandTime=function(e,t){return po.get("/api/gynae/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ho.changeBackToBookingMade=function(e){return po.post("/api/gynae/book/changebacktobookingmade?id=".concat(e))},ho.changeToPatientAttended=function(e){return po.post("/api/gynae/book/changetopatientattended?id=".concat(e))},ho.updateBooking=function(e){return po.post("/api/gynae/book/updatebookappointment",e)},ho.updateBookingTime=function(e){return po.post("/api/gynae/book/updatebookappointmenttime",e)},ho.deleteBooking=function(e){return po.post("/api/gynae/book/deletebookappointment?id=".concat(e))},ho.unDeleteBooking=function(e){return po.post("/api/gynae/book/undeletebookappointment?id=".concat(e))},ho.getBookingsByRef=function(e){return po.get("/api/gynae/book/getbookingsbyref?ref=".concat(e))},ho.getBookingById=function(e){return po.get("/api/gynae/book/getbookingbyid?id=".concat(e))},ho.getAllBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getallbookings?limit=".concat(e))},ho.getDeletedBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getdeletedbookings?limit=".concat(e))},ho.getTodayBookings=function(){return po.get("/api/gynae/book/gettodaybookings")},ho.getOldBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getoldbookings?limit=".concat(e))},ho.getFutureBookings=function(e){return e||(e=25),po.get("/api/gynae/book/getfuturebookings?limit=".concat(e))},ho.getRecentBookings=function(){return po.get("/api/gynae/book/getrecentbookings")},ho.getRecentBookingsAll=function(e){return e||(e=25),po.get("/api/gynae/book/getrecentbookingsall?limit=".concat(e))};var go=n(108),fo=function e(){Object(ne.a)(this,e)};fo.downloadGynaeRegForm=function(e){return po.get("/api/pdf/downloadgynaeregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},fo.downloadCovidForm1=function(e){return po.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},fo.downloadCovidForm2=function(e){return po.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfResult=function(e){return po.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfCert=function(e){return po.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},fo.downloadPdfLabReport=function(e){return po.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var xo=n(259),mo=n.n(xo),Oo=["Visa Medical"],yo=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function ko(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function vo(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Co(e){var t=yo(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(Oo[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),A=D[0],P=D[1];Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var I=function(){m||(e.handleClose(),j("credit card"),S(""),g(Oo[0]),O(!1))},F=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,ho.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),I(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:I,PaperComponent:vo,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:A,label:"OTC Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:ko,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Oo.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:I,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:F,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var So=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Bo=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function No(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function To(e){var t,n=So(),c=i.a.useContext(C),r=Object(l.a)(c,2),d=r[0],s=r[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(null),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState({edit:!1,person:null}),E=Object(l.a)(M,2),z=E[0],U=E[1],H=i.a.useState({delete:!1,person:null}),Y=Object(l.a)(H,2),J=Y[0],$=Y[1],Q=i.a.useState({restore:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(!1),re=Object(l.a)(ce,2),le=re[0],de=re[1],se=i.a.useState(!1),be=Object(l.a)(se,2),je=be[0],ue=be[1],pe=i.a.useState({}),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Ne=Object(l.a)(Be,2),Te=Ne[0],we=Ne[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(""),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=i.a.useState(""),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=Ge[1],Ke=i.a.useState(!1),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(null),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(!1),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(!1),rt=Object(l.a)(it,2),lt=rt[0],dt=rt[1],st=i.a.useState(!1),jt=Object(l.a)(st,2),ut=jt[0],pt=jt[1],ht=i.a.useState(!1),ft=Object(l.a)(ht,2),xt=(ft[0],ft[1],function(){pt(!1),W(null)}),mt=function(){P(!1),W(null)};Object(o.useEffect)((function(){if(Ze){var e=Oe!==Object(go.FormatDateFromString)(Ze.bookingDate)||Ce!==Ze.bookingTime||Te!==Ze.fullname||Le!==Ze.email||_e!==Ze.phone||Ye!==Ze.service||ze!==Ze.notes;ot(e)}}),[lt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){U({edit:!1,person:null}),ot(!1)}),500)}),[e.open]);var Ot=function(e,t){if(e)we(t.fullname),ye(Object(go.FormatDateFromString)(t.bookingDate)),Se(t.bookingTime.toUpperCase()),Pe(t.email),We(t.phone),Ve(t.service),t.notes&&Ue(t.notes),U({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Le,n.phone=_e,n.fullname=Te,n.notes=ze,n.service=Ye,n.bookingDate=Object(go.RevertFormatDateFromString)(Oe),n.bookingTime=Ce,n.bookingRef=t.bookingRef,yt(n)&&kt({bookingId:a,person:n})}}else U({edit:e,person:t}),ot(!1)},yt=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,fe(Object(T.a)(Object(T.a)({},ge),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,fe(Object(T.a)(Object(T.a)({},ge),{},{bookingTimeError:!0}))),!t},kt=function(e){ie(!0),ho.updateBooking(e).then((function(e){ie(!1),U({edit:!1,person:null}),Je(!Xe)})).catch((function(e){ie(!1),U({edit:!1,person:null}),console.log(e)}))},vt=function(e,t){var n;e?$({delete:e,person:t}):e||t?!e&&t&&(n=t._id,de(!0),ho.deleteBooking(n).then((function(e){de(!1),$({delete:!1,person:null}),Je(!Xe)})).catch((function(e){de(!1),$({delete:!1,person:null}),console.log(e)}))):$({delete:e,person:t})},Ct=function(e,t){var n;e?te({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),ho.unDeleteBooking(n).then((function(e){ue(!1),te({restore:!1,person:null}),Je(!Xe)})).catch((function(e){ue(!1),te({restore:!1,person:null}),console.log(e)}))):te({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(ho.getBookingById(e.booking._id).then((function(e){et(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Xe,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&et(e.booking)}),[e.booking]);var St=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,ho.unPayBooking(Ze._id);case 4:ie(!1),pt(!1),Je(!Xe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ie(!1),pt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,ho.refundBooking(Ze._id);case 4:ie(!1),Nt(),P(!1),Je(!Xe),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ie(!1),P(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,ho.manualRefundBooking(Ze._id);case 4:ie(!1),Nt(),Je(!Xe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ie(!1),P(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(N.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?100:0,ie(!0),e.prev=3,e.next=6,ho.changeDepositBooking(Ze._id,a);case 6:ie(!1),Je(!Xe),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),ie(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),It=i.a.useState(null),Wt=Object(l.a)(It,2),Mt=Wt[0],Et=Wt[1],zt=i.a.useState(!1),Ht=Object(l.a)(zt,2),Gt=Ht[0],Yt=Ht[1],Vt=i.a.useState(!1),Kt=Object(l.a)(Vt,2),qt=Kt[0],Xt=Kt[1],Jt=i.a.useState(!1),$t=Object(l.a)(Jt,2),Qt=$t[0],Zt=$t[1],en=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Yt(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Et(n.data.invoice),Yt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Yt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&en()}),[e.booking,e.open]);var tn,nn=function(){W(Ze),Et(Mt),Xt(!0)};return Object(a.jsx)(i.a.Fragment,{children:Ze&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:Bo,keepMounted:!0,onClose:function(){x(!1),Zt(!1),Et(null),e.onClose()},PaperComponent:No,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:Ze.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/".concat(Ze._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(cn.a,{style:Ze.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!u,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:pn,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GYNAE"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Ze.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Ze.fullname)})}),Ze.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:Ze.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===Ze._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Ze.deleted||ee.restore&&ee.person._id===Ze._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ct(!0,Ze)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:je,onClick:function(){Ct(!1,Ze)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:je,onClick:function(){Ct(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Ze.deleted||J.delete||z.edit&&z.person._id===Ze._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ot(!0,Ze)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:oe||!at,onClick:function(){Ot(!1,Ze)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:oe,onClick:function(){Ot(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(J.delete&&J.person._id===Ze._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Ze.deleted||z.edit||J.delete&&J.person._id===Ze._id,children:[Ze.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Ze.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,Ze)},className:n.DeleteButton,children:"Delete This Record"})})}),0===Ze.OTCCharges&&Object(a.jsx)(R.a,{disabled:Ze.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,Ze)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(J.delete&&J.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:le,onClick:function(){vt(!1,Ze)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(J.delete&&J.person._id===Ze._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:le,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Object(go.FormatDateFromString)(Ze.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingDateError,className:n.TextBox,value:Oe,onChange:function(e){ye(e.target.value),fe(Object(T.a)(Object(T.a)({},ge),{},{bookingDateError:!1})),dt(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Ze.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingTimeError,className:n.TextBox,value:Ce,onChange:function(e){Se(e.target.value),fe(Object(T.a)(Object(T.a)({},ge),{},{bookingTimeError:!1})),dt(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Ze.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Te,onChange:function(e){we(e.target.value),dt(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Ze.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Le,onChange:function(e){Pe(e.target.value),dt(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Ze.service}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),dt(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:null===(t=Ze.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:_e,onChange:function(e){We(e.target.value),dt(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Ze._id,className:n.infoData,children:Ze.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Ze._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ze,onChange:function(e){Ue(e.target.value),dt(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(tn=Ze.status,"booked"===tn?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===tn?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===Ze.status&&!(z.edit&&z.person._id===Ze._id)&&!Ze.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:oe,style:{width:"300px"},onClick:function(e){return t=Ze._id,ie(!0),void ho.changeBackToBookingMade(t).then((function(e){ie(!1),Je(!Xe)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===Ze.status&&!(z.edit&&z.person._id===Ze._id)&&!Ze.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:oe,style:{width:"300px"},onClick:function(e){return t=Ze._id,ie(!0),void ho.changeToPatientAttended(t).then((function(e){ie(!1),Je(!Xe)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:Ze.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!Ze.formData,startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Ze._id,fo.downloadGynaeRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Ze.deleted||z.edit||Ze.formData,children:Object(a.jsxs)(R.a,{disabled:!Ze.email||Ze.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Ze._id,ie(!0),x(!1),ho.sendRegFormEmail(e).then((function(e){ie(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),ie(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Gt&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Gt&&Mt&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Mt.invoiceNumber," "]}),Gt&&!Mt&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(z.edit&&z.person._id===Ze._id)&&!Ze.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Gt&&!Mt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return nn()},children:"Issue Invoice"}),Gt&&Mt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Mt._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return nn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Ze.email||Ze.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Mt._id,t=Ze.email,ie(!0),Zt(!1),mn.emailInvoice(e,t).then((function(e){ie(!1),"OK"===e.data.status&&Zt(!0)})).catch((function(e){console.log(e),ie(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Qt&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,children:[Ze.paymentInfo?"ONLINE":"PHONE"," DEPOSIT"]})," ",Object(a.jsx)("span",{className:Ze.deposit&&0!==Ze.deposit?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Ze.deposit.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Ze._id)&&!Ze.paid&&Ze.deleted&&Ze.deposit>0&&Ze.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return P(!0)},children:"Refund Deposit"}),!(z.edit&&z.person._id===Ze._id)&&!Ze.paid&&Ze.deleted&&Ze.deposit>0&&!Ze.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(e){return Tt()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(z.edit&&z.person._id===Ze._id)&&!Ze.deleted&&!Ze.paymentInfo&&Object(a.jsx)(G.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(At.a,{color:"primary",checked:Ze.deposit>0,onChange:Pt,name:"deposit"}),label:Ze.deposit>0?Object(a.jsx)("span",{className:n.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:n.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})}),!(z.edit&&z.person._id===Ze._id)&&Ze.refund&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:n.checkIconSmall})," ","Refund Done","corporate"===Ze.paidBy?' "'.concat(Ze.corporate,'" '):""]})})]})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Ze.OTCCharges&&0!==Ze.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Ze.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Ze._id)&&!Ze.paid&&!Ze.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return Ze._id,W(Ze),void S(!0)},children:"Pay"}),!(z.edit&&z.person._id===Ze._id)&&Ze.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:n.checkIconSmall})," ","Paid by ",Ze.paidBy,"corporate"===Ze.paidBy?' "'.concat(Ze.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return pt(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Ze.OTCCharges&&0!==Ze.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat((Ze.deposit+Ze.OTCCharges).toLocaleString("en-GB"))})]})})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:oe||le||je,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Co,{booking:_,open:v,price:Mt?Mt.grandTotal-Ze.deposit:null,handleClose:function(){S(!1),W(null)}}),Object(a.jsx)(Nn,{booking:_,invoice:Mt,open:qt,handleClose:function(e){Xt(!1),W(null),en()}})]}),Object(a.jsxs)(wt.a,{open:ut,onClose:xt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:xt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:St,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:A,onClose:mt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:mt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Bt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var wo=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Do=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Ro(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Lo(e){var t=wo(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],d=c[1],s=Object(o.useState)(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),U=M[0],H=M[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),de=le[0],se=le[1],be=Object(o.useState)(!0),je=Object(l.a)(be,2),pe=je[0],ge=je[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Te=Object(l.a)(Be,2),we=Te[0],De=Te[1],Le=Object(o.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],_e=Pe[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(go.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(go.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=(Ge[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=Object(o.useState)(Oo[0]),dt=Object(l.a)(lt,2),st=dt[0],bt=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=ho.getAllBookings;"today"===e.date?n=ho.getTodayBookings:"old"===e.date?n=ho.getOldBookings:"future"===e.date?n=ho.getFutureBookings:"recent"===e.date?n=ho.getRecentBookingsAll:"deleted"===e.date&&(n=ho.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(r)}),[Ye.bookingDialogDataChanged]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Pt=vt[0],Ft=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Do(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(r)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){u(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:Pt,onPageChange:function(e){Ft(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(To,{booking:tt,open:it,onClose:function(){nt(null),rt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){bt(Oo[0]),_(!1),u(!1)},PaperComponent:Ro,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){bt(e.target.value)},children:Oo.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(go.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ee&&Object(a.jsx)("td",{className:t.td,children:mo.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Ao(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Po(e,t){return{time:e,amount:t}}var Io=[Po("09:00",0),Po("10:00",0),Po("11:00",0),Po("12:00",0),Po("13:00",0),Po("14:00",0),Po("15:00",0),Po("16:00",0),Po("17:00",0),Po("18:00",void 0)],Fo=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function _o(){var e=Object(Kn.a)(),t=i.a.useState(Io),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,ho.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(Po("09:00",Fo(o,"09"))),n.push(Po("10:00",Fo(o,"10"))),n.push(Po("11:00",Fo(o,"11"))),n.push(Po("12:00",Fo(o,"12"))),n.push(Po("13:00",Fo(o,"13"))),n.push(Po("14:00",Fo(o,"14"))),n.push(Po("15:00",Fo(o,"15"))),n.push(Po("16:00",Fo(o,"16"))),n.push(Po("17:00",Fo(o,"17"))),n.push(Po("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Wo=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Mo=function(e){if(1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())return null;var t,n=e.getMinutes(),a=e.getHours();if(function(e){return 4===e.getDay()}(e)&&a<13)return null;if(function(e){return 5===e.getDay()}(e)&&a>=13)return null;if(a<10||a>=18)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},Eo=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function zo(){var e=Wo(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Mo(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),ho.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Eo(Mo(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(To,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Uo=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ho(){var e=Uo(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),ho.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Ao,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Fullname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Tel"}),Object(a.jsx)(ba.a,{children:"Service"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.fullname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:e.phone}),Object(a.jsx)(ba.a,{children:e.service}),Object(a.jsx)(ba.a,{children:Object(go.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("gynae","recentBookings")})}))},children:"See more records"})})]})}var Go=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Yo(){var e=Go(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(_o,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(zo,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(Ho,{})})})]})})}var Vo=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Ko(){var e=Vo(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],X=V[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(""),ue=Object(l.a)(je,2),pe=ue[0],he=ue[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Ne=function(e,t){if(e)ae(t.fullname),X(Object(go.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=se,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(go.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),ho.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),ho.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),ho.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ne(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){Ne(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){Ne(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(go.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var qo=function(e){return"boolean"===typeof e};function Xo(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var Jo=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function $o(){var e=Jo(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!qo(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){ho.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),ho.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Xo,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Ko,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Qo=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Zo=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=Qo(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,ho.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_<10?" ".concat(_):"".concat(_)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ei=function e(){Object(ne.a)(this,e)};ei.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var ti=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ni=[1,2,3,4,5,6,7],ai=[1,2,3,4,5,6],oi=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),ii=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=oi(),r=ei.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ti.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:ai.map((function(e){return Object(a.jsx)("tr",{children:ni.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Zo,{cellIndex:(e-1)*ni.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*ni.length+i))})}))})}))})]})})},ci=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),ri=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=ci(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return ho.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},li=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],di=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),si=function(e){var t=e.dates,n=e.dayClicked,o=di();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:li.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(ri,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},bi=n(139),ji=n.n(bi),ui=n(173),pi=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),hi=[{packageName:"Consultation with Consultant Gynaecologist"},{packageName:"Coil Fitting/Coil Removal"},{packageName:"Well Woman Check"},{packageName:"Sexual Health Screening"},{packageName:"Pre-pregnancy/Fertility check"},{packageName:"Gynaecological Ultrasound"},{packageName:"HPV Vaccination"},{packageName:"Cervical / Pap Smear"},{packageName:"HPV Treatment / Wart Cryo-Therapy"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function gi(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function fi(e){var t=pi(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(""),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState(""),U=Object(l.a)(M,2),H=U[0],Y=U[1],X=i.a.useState(!1),J=Object(l.a)(X,2),$=J[0],Q=J[1],Z=function(){b||(g(""),O(!1),S(""),P(""),W(""),Y(""),Q(!1),e.handleClose(),j(!1))},ee=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},te=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ee()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,ho.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:A,service:_,notes:H,deposit:$?100:0});case 6:j(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Z(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:Z,PaperComponent:gi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",style:{position:"relative"},children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:pn,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GYNAE"}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"480px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:A,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(E.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(Nt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:_,onChange:function(e){W(e.target.value)},children:hi.map((function(e){return Object(a.jsx)(Tt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:H,onChange:function(e){Y(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{otem:!0,xs:12,style:{marginTop:"15px"},children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{color:"primary",checked:$,onChange:function(e){Q(e.target.checked)},name:"deposit"}),label:$?Object(a.jsx)("span",{className:t.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:t.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Z,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:te,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var xi=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),mi=function(e){e.key;var t=e.date,n=e.time,c=xi(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,ho.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,U=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){E(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:U(e.status),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(To,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(fi,{date:t,time:n,open:M,handleClose:function(){E(!1)}})]})},Oi=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],yi=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),ki=function(e){var t=e.date,n=yi();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Oi.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(mi,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},vi=["January","February","March","April","May","June","July","August","September","October","November","December"],Ci=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Si(){var e=Ci(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vi[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(ii,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(si,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(ki,{date:x}):void 0)]})}var Bi=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Ni=function e(){Object(ne.a)(this,e)};Ni.addNewBooking=function(e){return Bi.post("/api/gp/book/addnewbooking",e)},Ni.sendRegFormEmail=function(e){return Bi.post("/api/gp/book/sendregformemail?id=".concat(e))},Ni.payBooking=function(e,t,n,a){return Bi.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Ni.unPayBooking=function(e){return Bi.post("/api/gp/book/unpaybooking?id=".concat(e))},Ni.getShouldRefundsCount=function(){return Bi.get("/api/gp/book/getshouldrefundscount?")},Ni.refundBooking=function(e){return Bi.post("/api/gp/payment/refundpayment",{bookingId:e})},Ni.getBookingsStatsByDateStr=function(e){return Bi.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},Ni.getBookingsCountByDateStr=function(e){return Bi.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},Ni.getAllBookingsCountAll=function(){return Bi.get("/api/gp/book/getallbookingscountall")},Ni.getBookingsCountByDateStrandTime=function(e,t,n){return Bi.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ni.getBookingsByDateStrandTime=function(e,t){return Bi.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ni.getAllBookingsCountByDateStr=function(e){return Bi.get("/api/gp/book/getallbookingscountbydatestr?date=".concat(e))},Ni.getAllBookingsCountByDateStrandTime=function(e,t,n){return Bi.get("/api/gp/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ni.getAllBookingsByDateStrandTime=function(e,t){return Bi.get("/api/gp/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ni.changeBackToBookingMade=function(e){return Bi.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},Ni.changeToPatientAttended=function(e){return Bi.post("/api/gp/book/changetopatientattended?id=".concat(e))},Ni.updateBooking=function(e){return Bi.post("/api/gp/book/updatebookappointment",e)},Ni.updateBookingTime=function(e){return Bi.post("/api/gp/book/updatebookappointmenttime",e)},Ni.deleteBooking=function(e){return Bi.post("/api/gp/book/deletebookappointment?id=".concat(e))},Ni.unDeleteBooking=function(e){return Bi.post("/api/gp/book/undeletebookappointment?id=".concat(e))},Ni.getBookingsByRef=function(e){return Bi.get("/api/gp/book/getbookingsbyref?ref=".concat(e))},Ni.getBookingById=function(e){return Bi.get("/api/gp/book/getbookingbyid?id=".concat(e))},Ni.getAllBookings=function(e){return e||(e=25),Bi.get("/api/gp/book/getallbookings?limit=".concat(e))},Ni.getDeletedBookings=function(e){return e||(e=25),Bi.get("/api/gp/book/getdeletedbookings?limit=".concat(e))},Ni.getTodayBookings=function(){return Bi.get("/api/gp/book/gettodaybookings")},Ni.getOldBookings=function(e){return e||(e=25),Bi.get("/api/gp/book/getoldbookings?limit=".concat(e))},Ni.getFutureBookings=function(e){return e||(e=25),Bi.get("/api/gp/book/getfuturebookings?limit=".concat(e))},Ni.getRecentBookings=function(){return Bi.get("/api/gp/book/getrecentbookings")},Ni.getRecentBookingsAll=function(e){return e||(e=25),Bi.get("/api/gp/book/getrecentbookingsall?limit=".concat(e))};var Ti=n(109),wi=function e(){Object(ne.a)(this,e)};wi.downloadGPRegForm=function(e){return Bi.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Di=n(260),Ri=n.n(Di),Li=["Visa Medical"],Ai=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Pi(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Ii(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Fi(e){var t=Ai(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(Li[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),A=D[0],P=D[1];Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var I=function(){m||(e.handleClose(),j("credit card"),S(""),g(Li[0]),O(!1))},F=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Ni.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),I(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:I,PaperComponent:Ii,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:A,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Pi,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Li.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:I,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:F,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var _i=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),Wi=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function Mi(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Ei(e){var t,n=_i(),c=i.a.useContext(C),r=Object(l.a)(c,2),d=r[0],s=r[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),S=Object(l.a)(v,2),w=(S[0],S[1],i.a.useState(!1)),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(!1),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState(!1),E=Object(l.a)(M,2),z=E[0],U=E[1],H=i.a.useState(null),G=Object(l.a)(H,2),Y=G[0],J=G[1],$=i.a.useState({edit:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({delete:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState({restore:!1,person:null}),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState(!1),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState(!1),pe=Object(l.a)(ue,2),he=pe[0],ge=pe[1],fe=i.a.useState(!1),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState({}),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=i.a.useState(""),Be=Object(l.a)(Se,2),Ne=Be[0],Te=Be[1],we=i.a.useState(""),De=Object(l.a)(we,2),Re=De[0],Le=De[1],Pe=i.a.useState(""),Ie=Object(l.a)(Pe,2),Fe=Ie[0],_e=Ie[1],We=i.a.useState(""),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=i.a.useState(""),He=Object(l.a)(Ue,2),Ge=He[0],Ye=He[1],Ve=i.a.useState(""),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(""),$e=Object(l.a)(Je,2),Qe=$e[0],Ze=($e[1],i.a.useState(!1)),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(null),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=i.a.useState(!1),dt=Object(l.a)(lt,2),st=dt[0],jt=dt[1],ut=i.a.useState(!1),pt=Object(l.a)(ut,2),ht=pt[0],ft=pt[1],xt=i.a.useState(!1),mt=Object(l.a)(xt,2),Ot=mt[0],yt=mt[1],kt=i.a.useState(!1),vt=Object(l.a)(kt,2),Ct=(vt[0],vt[1],i.a.useState(null)),St=Object(l.a)(Ct,2),Bt=St[0],Nt=St[1],Tt=i.a.useState(!1),At=Object(l.a)(Tt,2),Pt=At[0],It=At[1],Wt=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,It(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Nt(n.data.invoice),It(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),It(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&Wt()}),[e.booking,e.open]);var Mt=function(){yt(!1),J(null)},Et=function(){W(!1),J(null)};Object(o.useEffect)((function(){if(it){var e=Ne!==Object(Ti.FormatDateFromString)(it.bookingDate)||Re!==it.bookingTime||Fe!==it.fullname||Ee!==it.email||Ge!==it.phone||qe!==it.notes;jt(e)}}),[ht]),Object(o.useEffect)((function(){e.open||setTimeout((function(){ee({edit:!1,person:null}),jt(!1)}),500)}),[e.open]);var zt=function(e,t){if(e)_e(t.fullname),Te(Object(Ti.FormatDateFromString)(t.bookingDate)),Le(t.bookingTime.toUpperCase()),ze(t.email),Ye(t.phone),t.notes&&Xe(t.notes),ee({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Ee,n.phone=Ge,n.fullname=Fe,n.notes=qe,n.service=Qe,n.bookingDate=Object(Ti.RevertFormatDateFromString)(Ne),n.bookingTime=Re,n.bookingRef=t.bookingRef,Ht(n)&&Gt({bookingId:a,person:n})}}else ee({edit:e,person:t}),jt(!1)},Ht=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Ce(Object(T.a)(Object(T.a)({},ve),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Ce(Object(T.a)(Object(T.a)({},ve),{},{bookingTimeError:!0}))),!t},Gt=function(e){je(!0),Ni.updateBooking(e).then((function(e){je(!1),ee({edit:!1,person:null}),nt(!tt)})).catch((function(e){je(!1),ee({edit:!1,person:null}),console.log(e)}))},Yt=function(e,t){var n;e?oe({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),Ni.deleteBooking(n).then((function(e){ge(!1),oe({delete:!1,person:null}),nt(!tt)})).catch((function(e){ge(!1),oe({delete:!1,person:null}),console.log(e)}))):oe({delete:e,person:t})},Vt=function(e,t){var n;e?le({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Oe(!0),Ni.unDeleteBooking(n).then((function(e){Oe(!1),le({restore:!1,person:null}),nt(!tt)})).catch((function(e){Oe(!1),le({restore:!1,person:null}),console.log(e)}))):le({restore:e,person:t})},Kt=function(){J(it),Nt(Bt),U(!0)};Object(o.useEffect)((function(){e.booking&&(Ni.getBookingById(e.booking._id).then((function(e){rt(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[tt,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&rt(e.booking)}),[e.booking]);var qt,Xt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je(!0),e.prev=1,e.next=4,Ni.unPayBooking(it._id);case 4:je(!1),yt(!1),nt(!tt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),je(!1),yt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je(!0),e.prev=1,e.next=4,Ni.refundBooking(it._id);case 4:je(!1),$t(),W(!1),nt(!tt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),je(!1),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),$t=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ni.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:it&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:Wi,keepMounted:!0,onClose:function(){x(!1),k(!1),Nt(null),e.onClose()},PaperComponent:Mi,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:it.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gp/".concat(it._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(cn.a,{style:it.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!u,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:hn,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GP"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:it.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(it.fullname)})}),it.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:it.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===it._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!it.deleted||re.restore&&re.person._id===it._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Vt(!0,it)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:me,onClick:function(){Vt(!1,it)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:me,onClick:function(){Vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:it.deleted||ae.delete||Z.edit&&Z.person._id===it._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){zt(!0,it)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be||!st,onClick:function(){zt(!1,it)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){zt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===it._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||it.deleted||Z.edit||ae.delete&&ae.person._id===it._id,children:[it.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:it.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Yt(!0,it)},className:n.DeleteButton,children:"Delete This Record"})})}),0===it.OTCCharges&&Object(a.jsx)(R.a,{disabled:it.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Yt(!0,it)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){Yt(!1,it)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===it._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){Yt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:Object(Ti.FormatDateFromString)(it.bookingDate)}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ve.bookingDateError,className:n.TextBox,value:Ne,onChange:function(e){Te(e.target.value),Ce(Object(T.a)(Object(T.a)({},ve),{},{bookingDateError:!1})),ft(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:it.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ve.bookingTimeError,className:n.TextBox,value:Re,onChange:function(e){Le(e.target.value),Ce(Object(T.a)(Object(T.a)({},ve),{},{bookingTimeError:!1})),ft(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:it.fullname}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Fe,onChange:function(e){_e(e.target.value),ft(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:it.email}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){ze(e.target.value),ft(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:null===(t=it.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ge,onChange:function(e){Ye(e.target.value),ft(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===it._id,className:n.infoData,children:it.notes}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===it._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:qe,onChange:function(e){Xe(e.target.value),ft(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(qt=it.status,"booked"===qt?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===qt?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===it.status&&!(Z.edit&&Z.person._id===it._id)&&!it.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:be,style:{width:"300px"},onClick:function(e){return t=it._id,je(!0),void Ni.changeBackToBookingMade(t).then((function(e){je(!1),nt(!tt)})).catch((function(e){console.log(e),je(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===it.status&&!(Z.edit&&Z.person._id===it._id)&&!it.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:be,style:{width:"300px"},onClick:function(e){return t=it._id,je(!0),void Ni.changeToPatientAttended(t).then((function(e){je(!1),nt(!tt)})).catch((function(e){console.log(e),je(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:it.deleted||Z.edit,children:Object(a.jsx)(R.a,{disabled:!it.formData,startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=it._id,wi.downloadGPRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:it.deleted||Z.edit||it.formData,children:Object(a.jsxs)(R.a,{disabled:!it.email||it.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=it._id,je(!0),x(!1),Ni.sendRegFormEmail(e).then((function(e){je(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),je(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Pt&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Pt&&Bt&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Bt.invoiceNumber," "]}),Pt&&!Bt&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Z.edit&&Z.person._id===it._id)&&!it.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Pt&&!Bt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return Kt()},children:"Issue Invoice"}),Pt&&Bt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Bt._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return Kt()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!it.email||it.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Bt._id,t=it.email,je(!0),k(!1),mn.emailInvoice(e,t).then((function(e){je(!1),"OK"===e.data.status&&k(!0)})).catch((function(e){console.log(e),je(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",y&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:it.OTCCharges&&0!==it.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(it.OTCCharges.toLocaleString("en-GB"))}),!(Z.edit&&Z.person._id===it._id)&&!it.paid&&!it.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return J(it),void P(!0)},children:"Pay"}),!(Z.edit&&Z.person._id===it._id)&&it.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:n.checkIconSmall})," ","Paid by ",it.paidBy,"corporate"===it.paidBy?' "'.concat(it.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return yt(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:be||he||me,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Fi,{booking:Y,open:A,price:Bt?Bt.grandTotal:null,handleClose:function(){P(!1),J(null)}}),Object(a.jsx)(Nn,{booking:Y,invoice:Bt,open:z,handleClose:function(e){U(!1),J(null),Wt()}})]}),Object(a.jsxs)(wt.a,{open:Ot,onClose:Mt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:Mt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Xt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:_,onClose:Et,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:Et,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Jt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var zi=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Ui=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Hi(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Gi(e){var t=zi(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],d=c[1],s=Object(o.useState)(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),U=M[0],H=M[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),de=le[0],se=le[1],be=Object(o.useState)(!0),je=Object(l.a)(be,2),pe=je[0],ge=je[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Te=Object(l.a)(Be,2),we=Te[0],De=Te[1],Le=Object(o.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],_e=Pe[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Ti.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Ti.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=(Ge[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=Object(o.useState)(Li[0]),dt=Object(l.a)(lt,2),st=dt[0],bt=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=Ni.getAllBookings;"today"===e.date?n=Ni.getTodayBookings:"old"===e.date?n=Ni.getOldBookings:"future"===e.date?n=Ni.getFutureBookings:"recent"===e.date?n=Ni.getRecentBookingsAll:"deleted"===e.date&&(n=Ni.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(r)}),[Ye.bookingDialogDataChanged]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Pt=vt[0],Ft=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Ui(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(r)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){u(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:Pt,onPageChange:function(e){Ft(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Ei,{booking:tt,open:it,onClose:function(){nt(null),rt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){bt(Li[0]),_(!1),u(!1)},PaperComponent:Hi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){bt(e.target.value)},children:Li.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(Ti.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ee&&Object(a.jsx)("td",{className:t.td,children:Ri.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Yi(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Vi(e,t){return{time:e,amount:t}}var Ki=[Vi("09:00",0),Vi("10:00",0),Vi("11:00",0),Vi("12:00",0),Vi("13:00",0),Vi("14:00",0),Vi("15:00",0),Vi("16:00",0),Vi("17:00",0),Vi("18:00",void 0)],qi=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Xi(){var e=Object(Kn.a)(),t=i.a.useState(Ki),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Ni.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(Vi("09:00",qi(o,"09"))),n.push(Vi("10:00",qi(o,"10"))),n.push(Vi("11:00",qi(o,"11"))),n.push(Vi("12:00",qi(o,"12"))),n.push(Vi("13:00",qi(o,"13"))),n.push(Vi("14:00",qi(o,"14"))),n.push(Vi("15:00",qi(o,"15"))),n.push(Vi("16:00",qi(o,"16"))),n.push(Vi("17:00",qi(o,"17"))),n.push(Vi("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Yi,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Ji=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),$i=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},Qi=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function Zi(){var e=Ji(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=$i(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),Ni.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Yi,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:Qi($i(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Ei,{booking:h,open:m,onClose:function(){O(!1)}})]})}var ec=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function tc(){var e=ec(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),Ni.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Yi,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Fullname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Tel"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.fullname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:e.phone}),Object(a.jsx)(ba.a,{children:Object(Ti.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("gynae","recentBookings")})}))},children:"See more records"})})]})}var nc=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function ac(){var e=nc(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(Xi,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(Zi,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(tc,{})})})]})})}var oc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function ic(){var e=oc(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],X=V[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(""),ue=Object(l.a)(je,2),pe=ue[0],he=ue[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Ne=function(e,t){if(e)ae(t.fullname),X(Object(Ti.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=se,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Ti.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Ni.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Ni.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),Ni.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ne(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){Ne(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){Ne(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Ti.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var cc=function(e){return"boolean"===typeof e};function rc(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var lc=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function dc(){var e=lc(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!cc(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Ni.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Ni.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:rc,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(ic,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var sc=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),bc=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=sc(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ni.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_<10?" ".concat(_):"".concat(_)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},jc=function e(){Object(ne.a)(this,e)};jc.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var uc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pc=[1,2,3,4,5,6,7],hc=[1,2,3,4,5,6],gc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),fc=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=gc(),r=jc.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:uc.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:hc.map((function(e){return Object(a.jsx)("tr",{children:pc.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(bc,{cellIndex:(e-1)*pc.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*pc.length+i))})}))})}))})]})})},xc=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),mc=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=xc(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Ni.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Oc=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],yc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),kc=function(e){var t=e.dates,n=e.dayClicked,o=yc();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Oc.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(mc,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},vc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Cc(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Sc(e){var t=vc(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(""),F=Object(l.a)(I,2),_=F[0],W=F[1],M=function(){b||(g(""),O(!1),S(""),P(""),W(""),e.handleClose(),j(!1))},E=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},z=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,Ni.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:A,notes:_});case 6:j(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),M(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:M,PaperComponent:Cc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:hn,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GP"}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"400px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:A,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:_,onChange:function(e){W(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:M,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Bc=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Nc=function(e){e.key;var t=e.date,n=e.time,c=Bc(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,Ni.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,U=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){E(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:U(e.status),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:H,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(Ei,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(Sc,{date:t,time:n,open:M,handleClose:function(){E(!1)}})]})},Tc=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],wc=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Dc=function(e){var t=e.date,n=wc();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Tc.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Nc,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Rc=["January","February","March","April","May","June","July","August","September","October","November","December"],Lc=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Ac(){var e=Lc(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Rc[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(fc,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(kc,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(Dc,{date:x}):void 0)]})}var Pc=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Ic=function e(){Object(ne.a)(this,e)};Ic.addNewBooking=function(e){return Pc.post("/api/std/book/addnewbooking",e)},Ic.sendRegFormEmail=function(e){return Pc.post("/api/std/book/sendregformemail?id=".concat(e))},Ic.payBooking=function(e,t,n,a){return Pc.post("/api/std/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Ic.unPayBooking=function(e){return Pc.post("/api/std/book/unpaybooking?id=".concat(e))},Ic.getShouldRefundsCount=function(){return Pc.get("/api/std/book/getshouldrefundscount?")},Ic.refundBooking=function(e){return Pc.post("/api/std/payment/refundpayment",{bookingId:e})},Ic.getBookingsStatsByDateStr=function(e){return Pc.get("/api/std/book/getbookingsstatsbydatestr?date=".concat(e))},Ic.getBookingsCountByDateStr=function(e){return Pc.get("/api/std/book/getbookingscountbydatestr?date=".concat(e))},Ic.getAllBookingsCountAll=function(){return Pc.get("/api/std/book/getallbookingscountall")},Ic.getBookingsCountByDateStrandTime=function(e,t,n){return Pc.get("/api/std/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ic.getBookingsByDateStrandTime=function(e,t){return Pc.get("/api/std/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ic.getAllBookingsCountByDateStr=function(e){return Pc.get("/api/std/book/getallbookingscountbydatestr?date=".concat(e))},Ic.getAllBookingsCountByDateStrandTime=function(e,t,n){return Pc.get("/api/std/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ic.getAllBookingsByDateStrandTime=function(e,t){return Pc.get("/api/std/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ic.changeBackToBookingMade=function(e){return Pc.post("/api/std/book/changebacktobookingmade?id=".concat(e))},Ic.changeToPatientAttended=function(e){return Pc.post("/api/std/book/changetopatientattended?id=".concat(e))},Ic.updateBooking=function(e){return Pc.post("/api/std/book/updatebookappointment",e)},Ic.updateBookingTime=function(e){return Pc.post("/api/std/book/updatebookappointmenttime",e)},Ic.deleteBooking=function(e){return Pc.post("/api/std/book/deletebookappointment?id=".concat(e))},Ic.unDeleteBooking=function(e){return Pc.post("/api/std/book/undeletebookappointment?id=".concat(e))},Ic.getBookingsByRef=function(e){return Pc.get("/api/std/book/getbookingsbyref?ref=".concat(e))},Ic.getBookingById=function(e){return Pc.get("/api/std/book/getbookingbyid?id=".concat(e))},Ic.getAllBookings=function(e){return e||(e=25),Pc.get("/api/std/book/getallbookings?limit=".concat(e))},Ic.getDeletedBookings=function(e){return e||(e=25),Pc.get("/api/std/book/getdeletedbookings?limit=".concat(e))},Ic.getTodayBookings=function(){return Pc.get("/api/std/book/gettodaybookings")},Ic.getOldBookings=function(e){return e||(e=25),Pc.get("/api/std/book/getoldbookings?limit=".concat(e))},Ic.getFutureBookings=function(e){return e||(e=25),Pc.get("/api/std/book/getfuturebookings?limit=".concat(e))},Ic.getRecentBookings=function(){return Pc.get("/api/std/book/getrecentbookings")},Ic.getRecentBookingsAll=function(e){return e||(e=25),Pc.get("/api/std/book/getrecentbookingsall?limit=".concat(e))};var Fc=n(110),_c=function e(){Object(ne.a)(this,e)};_c.downloadSTDRegForm=function(e){return Pc.get("/api/pdf/downloadstdregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Wc=n(261),Mc=n.n(Wc),Ec=["Visa Medical"],zc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Uc(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Hc(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Gc(e){var t=zc(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(Ec[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),A=D[0],P=D[1];Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var I=function(){m||(e.handleClose(),j("credit card"),S(""),g(Ec[0]),O(!1))},F=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Ic.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),I(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:I,PaperComponent:Hc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:A,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Uc,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Ec.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:I,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:F,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Yc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Vc=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function Kc(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function qc(e){var t,n=Yc(),c=i.a.useContext(C),r=Object(l.a)(c,2),d=r[0],s=r[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(null),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState({edit:!1,person:null}),E=Object(l.a)(M,2),z=E[0],U=E[1],H=i.a.useState({delete:!1,person:null}),G=Object(l.a)(H,2),Y=G[0],J=G[1],$=i.a.useState({restore:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState(!1),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState({}),pe=Object(l.a)(ue,2),he=pe[0],ge=pe[1],fe=i.a.useState(""),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(""),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=i.a.useState(""),Be=Object(l.a)(Se,2),Ne=Be[0],Te=Be[1],we=i.a.useState(""),De=Object(l.a)(we,2),Re=De[0],Le=De[1],Pe=i.a.useState(""),Ie=Object(l.a)(Pe,2),Fe=Ie[0],_e=Ie[1],We=i.a.useState(""),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=i.a.useState(""),He=Object(l.a)(Ue,2),Ge=He[0],Ye=He[1],Ve=i.a.useState(!1),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=$e[0],Ze=$e[1],et=i.a.useState(!1),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(l.a)(ot,2),rt=it[0],lt=it[1],dt=i.a.useState(!1),st=Object(l.a)(dt,2),jt=st[0],ut=st[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),ft=(ht[0],ht[1],function(){ut(!1),W(null)}),xt=function(){P(!1),W(null)};Object(o.useEffect)((function(){if(Qe){var e=me!==Object(Fc.FormatDateFromString)(Qe.bookingDate)||ve!==Qe.bookingTime||Ne!==Qe.fullname||Re!==Qe.email||Fe!==Qe.phone||Ee!==Qe.notes||Ge!==Qe.packageName;at(e)}}),[rt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){U({edit:!1,person:null}),at(!1)}),500)}),[e.open]);var mt=function(e,t){if(e)Te(t.fullname),Oe(Object(Fc.FormatDateFromString)(t.bookingDate)),Ce(t.bookingTime.toUpperCase()),Le(t.email),_e(t.phone),Ye(t.packageName),t.notes&&ze(t.notes),U({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Re,n.phone=Fe,n.fullname=Ne,n.notes=Ee,n.packageName=Ge,n.bookingDate=Object(Fc.RevertFormatDateFromString)(me),n.bookingTime=ve,n.bookingRef=t.bookingRef,Ot(n)&&yt({bookingId:a,person:n})}}else U({edit:e,person:t}),at(!1)},Ot=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,ge(Object(T.a)(Object(T.a)({},he),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ge(Object(T.a)(Object(T.a)({},he),{},{bookingTimeError:!0}))),!t},yt=function(e){oe(!0),Ic.updateBooking(e).then((function(e){oe(!1),U({edit:!1,person:null}),Xe(!qe)})).catch((function(e){oe(!1),U({edit:!1,person:null}),console.log(e)}))},kt=function(e,t){var n;e?J({delete:e,person:t}):e||t?!e&&t&&(n=t._id,le(!0),Ic.deleteBooking(n).then((function(e){le(!1),J({delete:!1,person:null}),Xe(!qe)})).catch((function(e){le(!1),J({delete:!1,person:null}),console.log(e)}))):J({delete:e,person:t})},vt=function(e,t){var n;e?ee({restore:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),Ic.unDeleteBooking(n).then((function(e){je(!1),ee({restore:!1,person:null}),Xe(!qe)})).catch((function(e){je(!1),ee({restore:!1,person:null}),console.log(e)}))):ee({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Ic.getBookingById(e.booking._id).then((function(e){Ze(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[qe,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&Ze(e.booking)}),[e.booking]);var Ct=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,Ic.unPayBooking(Qe._id);case 4:oe(!1),ut(!1),Xe(!qe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),oe(!1),ut(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),St=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,Ic.refundBooking(Qe._id);case 4:oe(!1),Bt(),P(!1),Xe(!qe),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),oe(!1),P(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ic.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Nt=i.a.useState(null),Tt=Object(l.a)(Nt,2),At=Tt[0],Pt=Tt[1],It=i.a.useState(!1),Wt=Object(l.a)(It,2),Mt=Wt[0],Et=Wt[1],zt=i.a.useState(!1),Ht=Object(l.a)(zt,2),Gt=Ht[0],Yt=Ht[1],Vt=i.a.useState(!1),Kt=Object(l.a)(Vt,2),qt=Kt[0],Xt=Kt[1],Jt=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Et(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Pt(n.data.invoice),Et(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Et(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&Jt()}),[e.booking,e.open]);var $t,Qt=function(){W(Qe),Pt(At),Yt(!0)};return Object(a.jsx)(i.a.Fragment,{children:Qe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:Vc,keepMounted:!0,onClose:function(){x(!1),Xt(!1),Pt(null),e.onClose()},PaperComponent:Kc,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:Qe.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/std/".concat(Qe._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(cn.a,{style:Qe.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!u,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:gn,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"STD"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Qe.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Qe.fullname)})}),Qe.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:Qe.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Qe.deleted||Z.restore&&Z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,Qe)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){vt(!1,Qe)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Qe.deleted||Y.delete||z.edit&&z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){mt(!0,Qe)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ae||!nt,onClick:function(){mt(!1,Qe)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ae,onClick:function(){mt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Qe.deleted||z.edit||Y.delete&&Y.person._id===Qe._id,children:[Qe.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})})}),0===Qe.OTCCharges&&Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re,onClick:function(){kt(!1,Qe)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Object(Fc.FormatDateFromString)(Qe.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingDateError,className:n.TextBox,value:me,onChange:function(e){Oe(e.target.value),ge(Object(T.a)(Object(T.a)({},he),{},{bookingDateError:!1})),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingTimeError,className:n.TextBox,value:ve,onChange:function(e){Ce(e.target.value),ge(Object(T.a)(Object(T.a)({},he),{},{bookingTimeError:!1})),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ne,onChange:function(e){Te(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Re,onChange:function(e){Le(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:null===(t=Qe.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Fe,onChange:function(e){_e(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){ze(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.packageName}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ge,onChange:function(e){Ye(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",($t=Qe.status,"booked"===$t?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===$t?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void Ic.changeBackToBookingMade(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void Ic.changeToPatientAttended(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.estimatedPrice})]}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!Qe.formData,startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,_c.downloadSTDRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit||Qe.formData,children:Object(a.jsxs)(R.a,{disabled:!Qe.email||Qe.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,oe(!0),x(!1),Ic.sendRegFormEmail(e).then((function(e){oe(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),oe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Mt&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Mt&&At&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",At.invoiceNumber," "]}),Mt&&!At&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Mt&&!At&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return Qt()},children:"Issue Invoice"}),Mt&&At&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=At._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return Qt()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Qe.email||Qe.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=At._id,t=Qe.email,oe(!0),Xt(!1),mn.emailInvoice(e,t).then((function(e){oe(!1),"OK"===e.data.status&&Xt(!0)})).catch((function(e){console.log(e),oe(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",qt&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Qe.OTCCharges&&0!==Qe.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Qe.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Qe._id)&&!Qe.paid&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return Qe._id,W(Qe),void S(!0)},children:"Pay"}),!(z.edit&&z.person._id===Qe._id)&&Qe.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:n.checkIconSmall})," ","Paid by ",Qe.paidBy,"corporate"===Qe.paidBy?' "'.concat(Qe.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return ut(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:ae||re||be,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Gc,{booking:_,open:v,price:At?At.grandTotal:null,handleClose:function(){S(!1),W(null)}}),Object(a.jsx)(Nn,{booking:_,invoice:At,open:Gt,handleClose:function(e){Yt(!1),W(null),Jt()}})]}),Object(a.jsxs)(wt.a,{open:jt,onClose:ft,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:ft,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ct,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:A,onClose:xt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:xt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:St,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Xc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Jc=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function $c(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Qc(e){var t=Xc(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],d=c[1],s=Object(o.useState)(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),U=M[0],H=M[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),de=le[0],se=le[1],be=Object(o.useState)(!0),je=Object(l.a)(be,2),pe=je[0],ge=je[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Te=Object(l.a)(Be,2),we=Te[0],De=Te[1],Le=Object(o.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],_e=Pe[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Fc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Fc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=(Ge[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=Object(o.useState)(Ec[0]),dt=Object(l.a)(lt,2),st=dt[0],bt=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=Ic.getAllBookings;"today"===e.date?n=Ic.getTodayBookings:"old"===e.date?n=Ic.getOldBookings:"future"===e.date?n=Ic.getFutureBookings:"recent"===e.date?n=Ic.getRecentBookingsAll:"deleted"===e.date&&(n=Ic.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(r)}),[Ye.bookingDialogDataChanged]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Pt=vt[0],Ft=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Jc(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(r)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){u(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:Pt,onPageChange:function(e){Ft(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(qc,{booking:tt,open:it,onClose:function(){nt(null),rt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){bt(Ec[0]),_(!1),u(!1)},PaperComponent:$c,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){bt(e.target.value)},children:Ec.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(Fc.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ee&&Object(a.jsx)("td",{className:t.td,children:Mc.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Zc(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function er(e,t){return{time:e,amount:t}}var tr=[er("09:00",0),er("10:00",0),er("11:00",0),er("12:00",0),er("13:00",0),er("14:00",0),er("15:00",0),er("16:00",0),er("17:00",0),er("18:00",void 0)],nr=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ar(){var e=Object(Kn.a)(),t=i.a.useState(tr),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Ic.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(er("09:00",nr(o,"09"))),n.push(er("10:00",nr(o,"10"))),n.push(er("11:00",nr(o,"11"))),n.push(er("12:00",nr(o,"12"))),n.push(er("13:00",nr(o,"13"))),n.push(er("14:00",nr(o,"14"))),n.push(er("15:00",nr(o,"15"))),n.push(er("16:00",nr(o,"16"))),n.push(er("17:00",nr(o,"17"))),n.push(er("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Zc,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var or=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ir=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},cr=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function rr(){var e=or(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=ir(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),Ic.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Zc,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:cr(ir(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(qc,{booking:h,open:m,onClose:function(){O(!1)}})]})}var lr=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function dr(){var e=lr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),Ic.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Zc,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Fullname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Tel"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.fullname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:e.phone}),Object(a.jsx)(ba.a,{children:Object(Fc.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("gynae","recentBookings")})}))},children:"See more records"})})]})}var sr=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function br(){var e=sr(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(ar,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(rr,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(dr,{})})})]})})}var jr=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function ur(){var e=jr(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],X=V[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(""),ue=Object(l.a)(je,2),pe=ue[0],he=ue[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Ne=function(e,t){if(e)ae(t.fullname),X(Object(Fc.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=se,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Fc.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Ic.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Ic.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),Ic.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ne(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){Ne(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){Ne(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Fc.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var pr=function(e){return"boolean"===typeof e};function hr(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var gr=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function fr(){var e=gr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!pr(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Ic.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Ic.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:hr,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(ur,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var xr=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),mr=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=xr(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ic.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_<10?" ".concat(_):"".concat(_)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Or=function e(){Object(ne.a)(this,e)};Or.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var yr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],kr=[1,2,3,4,5,6,7],vr=[1,2,3,4,5,6],Cr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Sr=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Cr(),r=Or.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:yr.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:vr.map((function(e){return Object(a.jsx)("tr",{children:kr.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(mr,{cellIndex:(e-1)*kr.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*kr.length+i))})}))})}))})]})})},Br=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Nr=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Br(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Ic.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Tr=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],wr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Dr=function(e){var t=e.dates,n=e.dayClicked,o=wr();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Tr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Nr,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Rr=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Lr=[{packageName:"Sexual Health Clinic - Bronze"},{packageName:"Sexual Health Clinic - Silver"},{packageName:"Sexual Health Clinic - Gold"},{packageName:"Sexual Health Clinic - Platinium"},{packageName:"BLOOD SAMPLE AND URINE"},{packageName:"BLOOD SAMPLE AND URINE OR SWAB"},{packageName:"Indivisual Tests"},{packageName:"Combo STD Checks"}],Ar=["HIV TESTING","CHLAMYDIA TESTING","SYPHILIS BLOOD TESTING","HERPES TESTING","GONORRHOEA TESTING","HEPATITIS A PROFILE TESTING","HEPATITIS B PROFILE TESTING","HEPATITIS C ANTIBODIES TESTING","HPV TESTING","BACTERIAL SWAB TESTING"],Pr=["CHLAMYDIA, GONORRHOEA AND TRICHOMONAS","HIV I & II WITH SYPHILIS"];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Ir(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Fr(e){var t=Rr(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(""),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState(!1),U=Object(l.a)(M,2),H=U[0],X=U[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState([]),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=function(){b||(g(""),O(!1),S(""),P(""),W(""),X(!1),Z(""),ae([]),re([]),e.handleClose(),j(!1))},de=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),(!_||_.trim().length<1)&&(X(!0),e=!0),"Indivisual Tests"===_&&0===ne.length&&(X(!0),e=!0),"Combo STD Checks"===_&&0===ce.length&&(X(!0),e=!0),!e},se=function(){var t=Object(N.a)(B.a.mark((function t(){var n,a,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(de()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),n=_,"Indivisual Tests"===_?(a="",ne.forEach((function(e,t){a+=e,t<ne.length-1&&(a+=" - ")})),n="Indivisual Tests : ( ".concat(a," )")):"Combo STD Checks"===_&&(o="",ce.forEach((function(e,t){o+=e,t<ce.length-1&&(o+=" - ")})),n="Combo STD Checks : ( ".concat(o," )")),t.prev=5,t.next=8,Ic.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:A,packageName:n,notes:Q});case 8:j(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),le(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),j(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,onClose:le,PaperComponent:Ir,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:gn,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"STD"}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"600px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:A,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(E.a,{className:t.formControl,fullWidth:!0,required:!0,error:H,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Nt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:_,onChange:function(e){W(e.target.value),X(!1)},children:Lr.map((function(e){return Object(a.jsx)(Tt.a,{value:e.packageName,children:e.packageName})}))})]})}),"Indivisual Tests"===_&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Ar.map((function(e){return Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ne.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(X(!1),ne.findIndex((function(e){return e===t}))<0&&ae([].concat(Object(Ct.a)(ne),[t]))):ae(ne.filter((function(e){return e!==t}))),X(!1)}(t,e)},name:e}),label:e})}))}),"Combo STD Checks"===_&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Pr.map((function(e){return Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ce.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(X(!1),ce.findIndex((function(e){return e===t}))<0&&re([].concat(Object(Ct.a)(ce),[t]))):re(ce.filter((function(e){return e!==t})))}(t,e)},name:e}),label:e})}))}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:Q,onChange:function(e){Z(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:le,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:se,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var _r=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Wr=function(e){e.key;var t=e.date,n=e.time,c=_r(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,Ic.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,U=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){E(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:U(e.status),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(qc,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(Fr,{date:t,time:n,open:M,handleClose:function(){E(!1)}})]})},Mr=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Er=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),zr=function(e){var t=e.date,n=Er();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Mr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Wr,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Ur=["January","February","March","April","May","June","July","August","September","October","November","December"],Hr=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Gr(){var e=Hr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Ur[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Sr,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(Dr,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(zr,{date:x}):void 0)]})}var Yr=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Vr=function e(){Object(ne.a)(this,e)};Vr.getAllCodes=function(){return Yr.get("/api/medex/invoice/getallbloodcodes")},Vr.getNewBloodResultsCount=function(){return Yr.get("/api/blood/book/getnewbloodresultscount")},Vr.getSentBloodReports=function(){return Yr.get("/api/blood/book/getsentbloodreports")},Vr.getArchivedBloodReports=function(){return Yr.get("/api/blood/book/getarchivedbloodreports")},Vr.getNewMatchedBloodReports=function(){return Yr.get("/api/blood/book/getnewmatchedbloodreports")},Vr.getArchivedMatchedBloodReports=function(){return Yr.get("/api/blood/book/getarchivedmatchedbloodreports")},Vr.getNewUnmatchedBloodReports=function(){return Yr.get("/api/blood/book/getnewunmatchedbloodreports")},Vr.getArchivedUnmatchedBloodReports=function(){return Yr.get("/api/blood/book/getarchivedunmatchedbloodreports")},Vr.sendBloodReportEmail=function(e,t,n){return Yr.post("/api/blood/book/sendbloodreportemail?id=".concat(e),{email:t,notes:n})},Vr.updateBloodReport=function(e,t,n){return Yr.post("/api/blood/book/updatebloodreport?id=".concat(e),{email:t,notes:n})},Vr.archiveBloodReport=function(e){return Yr.post("/api/blood/book/archivebloodreport?id=".concat(e))},Vr.unArchiveBloodReport=function(e){return Yr.post("/api/blood/book/unarchivebloodreport?id=".concat(e))},Vr.addNewBooking=function(e){return Yr.post("/api/blood/book/addnewbooking",e)},Vr.sendRegFormEmail=function(e){return Yr.post("/api/blood/book/sendregformemail?id=".concat(e))},Vr.payBooking=function(e,t,n,a){return Yr.post("/api/blood/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Vr.unPayBooking=function(e){return Yr.post("/api/blood/book/unpaybooking?id=".concat(e))},Vr.getShouldRefundsCount=function(){return Yr.get("/api/blood/book/getshouldrefundscount")},Vr.refundBooking=function(e){return Yr.post("/api/blood/payment/refundpayment",{bookingId:e})},Vr.getBookingsStatsByDateStr=function(e){return Yr.get("/api/blood/book/getbookingsstatsbydatestr?date=".concat(e))},Vr.getBookingsCountByDateStr=function(e){return Yr.get("/api/blood/book/getbookingscountbydatestr?date=".concat(e))},Vr.getAllBookingsCountAll=function(){return Yr.get("/api/blood/book/getallbookingscountall")},Vr.getBookingsCountByDateStrandTime=function(e,t,n){return Yr.get("/api/blood/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Vr.getBookingsByDateStrandTime=function(e,t){return Yr.get("/api/blood/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Vr.getAllBookingsCountByDateStr=function(e){return Yr.get("/api/blood/book/getallbookingscountbydatestr?date=".concat(e))},Vr.getAllBookingsCountByDateStrandTime=function(e,t,n){return Yr.get("/api/blood/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Vr.getAllBookingsByDateStrandTime=function(e,t){return Yr.get("/api/blood/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Vr.changeBackToBookingMade=function(e){return Yr.post("/api/blood/book/changebacktobookingmade?id=".concat(e))},Vr.changeToPatientAttended=function(e){return Yr.post("/api/blood/book/changetopatientattended?id=".concat(e))},Vr.updateBooking=function(e){return Yr.post("/api/blood/book/updatebookappointment",e)},Vr.updateBookingTime=function(e){return Yr.post("/api/blood/book/updatebookappointmenttime",e)},Vr.deleteBooking=function(e){return Yr.post("/api/blood/book/deletebookappointment?id=".concat(e))},Vr.unDeleteBooking=function(e){return Yr.post("/api/blood/book/undeletebookappointment?id=".concat(e))},Vr.getBookingsByRef=function(e){return Yr.get("/api/blood/book/getbookingsbyref?ref=".concat(e))},Vr.getBookingById=function(e){return Yr.get("/api/blood/book/getbookingbyid?id=".concat(e))},Vr.getAllBookings=function(e){return e||(e=25),Yr.get("/api/blood/book/getallbookings?limit=".concat(e))},Vr.getDeletedBookings=function(e){return e||(e=25),Yr.get("/api/blood/book/getdeletedbookings?limit=".concat(e))},Vr.getTodayBookings=function(){return Yr.get("/api/blood/book/gettodaybookings")},Vr.getOldBookings=function(e){return e||(e=25),Yr.get("/api/blood/book/getoldbookings?limit=".concat(e))},Vr.getFutureBookings=function(e){return e||(e=25),Yr.get("/api/blood/book/getfuturebookings?limit=".concat(e))},Vr.getRecentBookings=function(){return Yr.get("/api/blood/book/getrecentbookings")},Vr.getRecentBookingsAll=function(e){return e||(e=25),Yr.get("/api/blood/book/getrecentbookingsall?limit=".concat(e))};var Kr=n(27),qr=function e(){Object(ne.a)(this,e)};qr.downloadBloodRegForm=function(e){return Yr.get("/api/pdf/downloadbloodregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},qr.downloadPdfLabReport=function(e){return Yr.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var Xr=n(231),Jr=n.n(Xr),$r=["Visa Medical"],Qr=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Zr(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function el(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function tl(e){var t=Qr(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)($r[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),A=D[0],P=D[1];Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var I=function(){m||(e.handleClose(),j("credit card"),S(""),g($r[0]),O(!1))},F=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Vr.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),I(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:I,PaperComponent:el,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:A,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Zr,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:$r.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:I,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:F,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var nl=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),al=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function ol(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function il(e){var t,n=nl(),c=i.a.useContext(C),r=Object(l.a)(c,2),d=r[0],s=r[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(null),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState({edit:!1,person:null}),E=Object(l.a)(M,2),z=E[0],U=E[1],H=i.a.useState({delete:!1,person:null}),G=Object(l.a)(H,2),Y=G[0],J=G[1],$=i.a.useState({restore:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState(!1),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState({}),pe=Object(l.a)(ue,2),he=pe[0],ge=pe[1],fe=i.a.useState(""),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(""),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=i.a.useState(""),Be=Object(l.a)(Se,2),Ne=Be[0],Te=Be[1],we=i.a.useState(""),De=Object(l.a)(we,2),Re=De[0],Le=De[1],Pe=i.a.useState(""),Ie=Object(l.a)(Pe,2),Fe=Ie[0],_e=Ie[1],We=i.a.useState(""),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=i.a.useState(""),He=Object(l.a)(Ue,2),Ge=He[0],Ye=He[1],Ve=i.a.useState(!1),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=$e[0],Ze=$e[1],et=i.a.useState(!1),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(l.a)(ot,2),rt=it[0],lt=it[1],dt=i.a.useState(!1),st=Object(l.a)(dt,2),jt=st[0],ut=st[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),ft=(ht[0],ht[1],function(){ut(!1),W(null)}),xt=function(){P(!1),W(null)};Object(o.useEffect)((function(){if(Qe){var e=me!==Object(Kr.FormatDateFromString)(Qe.bookingDate)||ve!==Qe.bookingTime||Ne!==Qe.fullname||nn!==Object(Kr.FormatDateFromString)(Qe.birthDate)||Re!==Qe.email||Fe!==Qe.phone||Ee!==Qe.notes||Ge!==Qe.packageName;at(e)}}),[rt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){U({edit:!1,person:null}),at(!1)}),500)}),[e.open]);var mt=function(e,t){if(e)Te(t.fullname),Oe(Object(Kr.FormatDateFromString)(t.bookingDate)),Ce(t.bookingTime.toUpperCase()),Le(t.email),_e(t.phone),on(Object(Kr.FormatDateFromString)(t.birthDate)),Ye(t.packageName),t.notes&&ze(t.notes),U({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Re,n.phone=Fe,n.fullname=Ne,n.notes=Ee,n.birthDate=Object(Kr.RevertFormatDateFromString)(nn),n.packageName=Ge,n.bookingDate=Object(Kr.RevertFormatDateFromString)(me),n.bookingTime=ve,n.bookingRef=t.bookingRef,yt(n)&&kt({bookingId:a,person:n})}}else U({edit:e,person:t}),at(!1)},Ot=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},yt=function(e){var t=!1;return Ot(e.bookingDate)||(t=!0,ge(Object(T.a)(Object(T.a)({},he),{},{bookingDateError:!0}))),Ot(e.birthDate)||(t=!0,ge(Object(T.a)(Object(T.a)({},he),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ge(Object(T.a)(Object(T.a)({},he),{},{bookingTimeError:!0}))),!t},kt=function(e){oe(!0),Vr.updateBooking(e).then((function(e){oe(!1),U({edit:!1,person:null}),Xe(!qe)})).catch((function(e){oe(!1),U({edit:!1,person:null}),console.log(e)}))},vt=function(e,t){var n;e?J({delete:e,person:t}):e||t?!e&&t&&(n=t._id,le(!0),Vr.deleteBooking(n).then((function(e){le(!1),J({delete:!1,person:null}),Xe(!qe)})).catch((function(e){le(!1),J({delete:!1,person:null}),console.log(e)}))):J({delete:e,person:t})},Ct=function(e,t){var n;e?ee({restore:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),Vr.unDeleteBooking(n).then((function(e){je(!1),ee({restore:!1,person:null}),Xe(!qe)})).catch((function(e){je(!1),ee({restore:!1,person:null}),console.log(e)}))):ee({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Vr.getBookingById(e.booking._id).then((function(e){Ze(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[qe,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&Ze(e.booking)}),[e.booking]);var St=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,Vr.unPayBooking(Qe._id);case 4:oe(!1),ut(!1),Xe(!qe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),oe(!1),ut(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,Vr.refundBooking(Qe._id);case 4:oe(!1),Nt(),P(!1),Xe(!qe),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),oe(!1),P(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&s((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Tt=i.a.useState(null),At=Object(l.a)(Tt,2),Pt=At[0],It=At[1],Wt=i.a.useState(!1),Mt=Object(l.a)(Wt,2),Et=Mt[0],zt=Mt[1],Ht=i.a.useState(!1),Gt=Object(l.a)(Ht,2),Yt=Gt[0],Vt=Gt[1],Kt=i.a.useState(!1),qt=Object(l.a)(Kt,2),Xt=qt[0],Jt=qt[1],$t=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,zt(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,It(n.data.invoice),zt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),zt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&$t()}),[e.booking,e.open]);var Qt,Zt=function(){W(Qe),It(Pt),Vt(!0)},en=i.a.useState(""),tn=Object(l.a)(en,2),nn=tn[0],on=tn[1];return Object(a.jsx)(i.a.Fragment,{children:Qe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:al,keepMounted:!0,onClose:function(){x(!1),Jt(!1),It(null),e.onClose()},PaperComponent:ol,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:Qe.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/blood/".concat(Qe._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(cn.a,{style:Qe.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!u,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:fn,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:Qe.doctorConsultation?"Blood + Doctor Consultation":"Blood"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Qe.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Qe.fullname)})}),Qe.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:Qe.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Qe.deleted||Z.restore&&Z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ct(!0,Qe)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Ct(!1,Qe)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Z.restore&&Z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Ct(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Qe.deleted||Y.delete||z.edit&&z.person._id===Qe._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){mt(!0,Qe)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ae||!nt,onClick:function(){mt(!1,Qe)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ae,onClick:function(){mt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Qe.deleted||z.edit||Y.delete&&Y.person._id===Qe._id,children:[Qe.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})})}),0===Qe.OTCCharges&&Object(a.jsx)(R.a,{disabled:Qe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,Qe)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re,onClick:function(){vt(!1,Qe)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Y.delete&&Y.person._id===Qe._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Object(Kr.FormatDateFromString)(Qe.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingDateError,className:n.TextBox,value:me,onChange:function(e){Oe(e.target.value),ge(Object(T.a)(Object(T.a)({},he),{},{bookingDateError:!1})),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.bookingTimeError,className:n.TextBox,value:ve,onChange:function(e){Ce(e.target.value),ge(Object(T.a)(Object(T.a)({},he),{},{bookingTimeError:!1})),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ne,onChange:function(e){Te(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Re,onChange:function(e){Le(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:null===(t=Qe.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Fe,onChange:function(e){_e(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Object(Kr.FormatDateFromString)(Qe.birthDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:he.dobError,className:n.TextBox,value:nn,onChange:function(e){on(e.target.value),ge(Object(T.a)(Object(T.a)({},he),{},{dobError:!1})),lt(!rt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.packageName}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ge,onChange:function(e){Ye(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"Indivisual Tests"}),Object(a.jsx)("span",{className:n.infoData,children:function(e){if(!e)return"-";var t=JSON.parse(e),n="";return t.forEach((function(e){n+=e.description,n+=" , "})),n}(Qe.indivisualTests)})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===Qe._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){ze(e.target.value),lt(!rt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(Qt=Qe.status,"booked"===Qt?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===Qt?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void Vr.changeBackToBookingMade(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===Qe.status&&!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ae,style:{width:"300px"},onClick:function(e){return t=Qe._id,oe(!0),void Vr.changeToPatientAttended(t).then((function(e){oe(!1),Xe(!qe)})).catch((function(e){console.log(e),oe(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===Qe._id,className:n.infoData,children:Qe.estimatedPrice})]}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!Qe.formData,startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,qr.downloadBloodRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Qe.deleted||z.edit||Qe.formData,children:Object(a.jsxs)(R.a,{disabled:!Qe.email||Qe.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Qe._id,oe(!0),x(!1),Vr.sendRegFormEmail(e).then((function(e){oe(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),oe(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Et&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Et&&Pt&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Pt.invoiceNumber," "]}),Et&&!Pt&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(z.edit&&z.person._id===Qe._id)&&!Qe.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Et&&!Pt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return Zt()},children:"Issue Invoice"}),Et&&Pt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Pt._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return Zt()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Qe.email||Qe.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Pt._id,t=Qe.email,oe(!0),Jt(!1),mn.emailInvoice(e,t).then((function(e){oe(!1),"OK"===e.data.status&&Jt(!0)})).catch((function(e){console.log(e),oe(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Xt&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Qe.OTCCharges&&0!==Qe.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(Qe.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===Qe._id)&&!Qe.paid&&!Qe.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return Qe._id,W(Qe),void S(!0)},children:"Pay"}),!(z.edit&&z.person._id===Qe._id)&&Qe.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:n.checkIconSmall})," ","Paid by ",Qe.paidBy,"corporate"===Qe.paidBy?' "'.concat(Qe.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return ut(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:ae||re||be,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(tl,{booking:_,open:v,price:Pt?Pt.grandTotal:null,handleClose:function(){S(!1),W(null)}}),Object(a.jsx)(Nn,{booking:_,invoice:Pt,open:Yt,handleClose:function(e){Vt(!1),W(null),$t()}})]}),Object(a.jsxs)(wt.a,{open:jt,onClose:ft,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:ft,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:St,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:A,onClose:xt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:xt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Bt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var cl=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),rl=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function ll(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function dl(e){var t=cl(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],d=c[1],s=Object(o.useState)(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),U=M[0],H=M[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),de=le[0],se=le[1],be=Object(o.useState)(!0),je=Object(l.a)(be,2),pe=je[0],ge=je[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Te=Object(l.a)(Be,2),we=Te[0],De=Te[1],Le=Object(o.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],_e=Pe[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=(Ge[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=Object(o.useState)($r[0]),dt=Object(l.a)(lt,2),st=dt[0],bt=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=Vr.getAllBookings;"today"===e.date?n=Vr.getTodayBookings:"old"===e.date?n=Vr.getOldBookings:"future"===e.date?n=Vr.getFutureBookings:"recent"===e.date?n=Vr.getRecentBookingsAll:"deleted"===e.date&&(n=Vr.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(r)}),[Ye.bookingDialogDataChanged]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Pt=vt[0],Ft=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",rl(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(r)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){u(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:Pt,onPageChange:function(e){Ft(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(il,{booking:tt,open:it,onClose:function(){nt(null),rt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){bt($r[0]),_(!1),u(!1)},PaperComponent:ll,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){bt(e.target.value)},children:$r.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(Kr.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ee&&Object(a.jsx)("td",{className:t.td,children:Jr.a.calculatePrice(e)})]})}))]})})]})})]})]})}function sl(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function bl(e,t){return{time:e,amount:t}}var jl=[bl("09:00",0),bl("10:00",0),bl("11:00",0),bl("12:00",0),bl("13:00",0),bl("14:00",0),bl("15:00",0),bl("16:00",0),bl("17:00",0),bl("18:00",void 0)],ul=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function pl(){var e=Object(Kn.a)(),t=i.a.useState(jl),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Vr.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(bl("09:00",ul(o,"09"))),n.push(bl("10:00",ul(o,"10"))),n.push(bl("11:00",ul(o,"11"))),n.push(bl("12:00",ul(o,"12"))),n.push(bl("13:00",ul(o,"13"))),n.push(bl("14:00",ul(o,"14"))),n.push(bl("15:00",ul(o,"15"))),n.push(bl("16:00",ul(o,"16"))),n.push(bl("17:00",ul(o,"17"))),n.push(bl("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(sl,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var hl=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),gl=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},fl=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function xl(){var e=hl(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=gl(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),Vr.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(sl,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:fl(gl(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(il,{booking:h,open:m,onClose:function(){O(!1)}})]})}var ml=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ol(){var e=ml(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),Vr.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(sl,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Fullname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Tel"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.fullname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:e.phone}),Object(a.jsx)(ba.a,{children:Object(Kr.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("gynae","recentBookings")})}))},children:"See more records"})})]})}var yl=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function kl(){var e=yl(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(pl,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(xl,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(Ol,{})})})]})})}var vl=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Cl(){var e=vl(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],X=V[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(""),ue=Object(l.a)(je,2),pe=ue[0],he=ue[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Ne=function(e,t){if(e)ae(t.fullname),X(Object(Kr.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=se,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Kr.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Vr.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Vr.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),Vr.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ne(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){Ne(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){Ne(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Kr.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var Sl=function(e){return"boolean"===typeof e};function Bl(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var Nl=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Tl(){var e=Nl(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!Sl(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Vr.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Vr.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Bl,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Cl,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var wl=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Dl=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=wl(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Vr.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_<10?" ".concat(_):"".concat(_)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Rl=function e(){Object(ne.a)(this,e)};Rl.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var Ll=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Al=[1,2,3,4,5,6,7],Pl=[1,2,3,4,5,6],Il=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Fl=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Il(),r=Rl.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Ll.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Pl.map((function(e){return Object(a.jsx)("tr",{children:Al.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Dl,{cellIndex:(e-1)*Al.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*Al.length+i))})}))})}))})]})})},_l=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Wl=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=_l(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Vr.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Ml=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],El=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),zl=function(e){var t=e.dates,n=e.dayClicked,o=El();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Ml.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Wl,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Ul=n(771),Hl=n(325),Gl=(Object(w.a)((function(e){return{loadingBox:{}}})),function(e){var t=e.title,n=e.value,c=e.dateChanged,r=e.error,d=i.a.useState(""),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(""),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState([]),k=Object(l.a)(y,2),v=k[0],C=k[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],T=B[1],w=i.a.useState([]),D=Object(l.a)(w,2),R=D[0],L=D[1],A=function(e,t,n){var a="".concat(e),o="".concat(t+1);1===a.length&&(a="0".concat(a)),1===o.length&&(o="0".concat(o)),c("".concat(n,"-").concat(o,"-").concat(a))};return Object(o.useEffect)((function(){if(n&&10===n.length){var e=parseInt(n.substr(8,2)),t=parseInt(n.substr(5,2)),a=parseInt(n.substr(0,4));j(e),g(t-1),O(a)}}),[n]),Object(o.useEffect)((function(){for(var e=[],t=[],n=[],a=1;a<=31;a++)e.push(a);for(a=0;a<12;a++)t.push(ln()(new Date(2020,a,5),"mmmm"));for(a=1900;a<(new Date).getFullYear();a++)n.push(a);C(e),T(t),L(n)}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px solid ".concat(r?"red":"#ddd"),borderRadius:"10px",padding:"20px",paddingBottom:"50px",marginTop:"20px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-15px",left:"15px",backgroundColor:"#fff",color:"".concat(r?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:t}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(E.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Day"}),Object(a.jsx)(Nt.a,{labelId:"day-label",id:"day-select",value:b,onChange:function(e){j(e.target.value),A(e.target.value,h,m)},children:v.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(E.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"month-label",children:"Month"}),Object(a.jsx)(Nt.a,{labelId:"month-label",id:"month-select",value:h,onChange:function(e){g(e.target.value),A(b,e.target.value,m)},children:N.map((function(e,t){return Object(a.jsx)(Tt.a,{value:t,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(E.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Year"}),Object(a.jsx)(Nt.a,{labelId:"year-label",id:"year-select",value:m,onChange:function(e){O(e.target.value),A(b,h,e.target.value)},children:R.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:e})}))})]})})]})]})})}),Yl=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},listOptions:{backgroundColor:"#dcf0f5",color:"#034859",borderRadius:"30px",padding:"10px",fontWeight:"500",fontSize:"1rem"}}})),Vl=[{packageName:"-"},{packageName:"SLIVER BLOOD TEST"},{packageName:'SLIVER PLUS BLOOD TEST"'},{packageName:"GOLD BLOOD TEST"},{packageName:"PLATINIUM BLOOD TEST"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Kl(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function ql(e){var t=Yl(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),W=_[0],M=_[1],U=i.a.useState(!1),H=Object(l.a)(U,2),G=H[0],Y=H[1],X=i.a.useState(""),J=Object(l.a)(X,2),$=J[0],Q=J[1],Z=i.a.useState([]),ee=Object(l.a)(Z,2),te=(ee[0],ee[1]),ne=i.a.useState([]),ae=Object(l.a)(ne,2),oe=(ae[0],ae[1]),ie=i.a.useState(""),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState([]),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState([]),pe=Object(l.a)(ue,2),he=pe[0],ge=pe[1],fe=i.a.useState(null),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(!1),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr.getAllCodes();case 3:t=e.sent,n=t.data.result,a=n.map((function(e){var t=e.code[0].toUpperCase();return Object(T.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),console.log(a),je(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){window.scrollTo(0,0),be&&0!==be.length||!e.open||Se()}),[e.open]);var Be=function(){b||(g(""),O(!1),S(""),P(""),M(""),Y(!1),Q(""),te([]),oe([]),Oe(null),ge([]),e.handleClose(),j(!1))},Ne=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),me&&10===me.length||(Ce(!0),e=!0),!e},Te=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ne()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),n=W,t.prev=4,t.next=7,Vr.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:A,packageName:n,birthDate:me,indivisualTests:0===he.length?null:JSON.stringify(he),notes:$});case 7:j(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Be(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),j(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,onClose:Be,PaperComponent:Kl,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:fn,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Blood"}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"620px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:A,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(Gl,{error:ve,title:"Date of Birth",value:me,dateChanged:function(e){Oe(e),Ce(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(E.a,{className:t.formControl,fullWidth:!0,error:G,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(Nt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:W,onChange:function(e){M(e.target.value),Y(!1)},children:Vl.map((function(e){return Object(a.jsx)(Tt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{style:{textAlign:"center",width:"100%",fontWeight:"400",color:"#777",marginTop:"20px"},children:Object(a.jsx)(On.a,{multiple:!0,id:"tags-outlined",noOptionsText:re,value:he,onChange:function(e,t){ge(t),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{indivisualTests:t})}))},filterOptions:function(e,t){var n=t.inputValue;return n&&n.length>=3?(le(""),Object(Hl.a)(e,n,{keys:["code","description"]})):(le("Please enter at least 3 characters"),Object(Hl.a)(e,"$$$$",{keys:["code","description"]}))},options:be.sort((function(e,t){return-t.firstLetter.localeCompare(e.firstLetter)})),getOptionLabel:function(e){return Object(a.jsxs)("div",{className:t.listOptions,children:[e.code," - ",e.description," - ",parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})]})},renderTags:function(e,t){return e.map((function(e,n){return Object(a.jsx)(Ul.a,Object(T.a)(Object(T.a)({variant:"outlined",color:"primary",label:Object(a.jsx)(F.a,{style:{whiteSpace:"normal",fontSize:"0.9rem",fontWeight:"500",padding:"10px",width:"100%"},children:"".concat(e.code," - ").concat(e.description," - ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))})},t({index:n})),{},{style:{height:"100%",width:"100%"}}))}))},filterSelectedOptions:!0,renderInput:function(e){return Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({fullWidth:!0},e),{},{variant:"outlined",label:"Blood Tests",placeholder:"Enter blood test"}))}})})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginBottom:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:$,onChange:function(e){Q(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"}})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(_t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Be,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Te,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]})})})}var Xl=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Jl=function(e){e.key;var t=e.date,n=e.time,c=Xl(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,Vr.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,U=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){E(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:U(e.status),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(il,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(ql,{date:t,time:n,open:M,handleClose:function(){E(!1)}})]})},$l=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Ql=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Zl=function(e){var t=e.date,n=Ql();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:$l.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Jl,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},ed=["January","February","March","April","May","June","July","August","September","October","November","December"],td=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function nd(){var e=td(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ed[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Fl,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(zl,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(Zl,{date:x}):void 0)]})}var ad,od=n(425),id=n.n(od),cd=(n(678),Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}}))),rd=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function ld(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function dd(e){var t,n=cd(),c=Object(o.useState)(null),r=Object(l.a)(c,2),d=(r[0],r[1],Object(o.useState)(1)),s=Object(l.a)(d,2);s[0],s[1];var b=i.a.useContext(C),j=Object(l.a)(b,2),u=(j[0],j[1]),p=Object(o.useState)(!1),h=Object(l.a)(p,2),g=(h[0],h[1],i.a.useState(!1)),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState(!1),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(null),z=Object(l.a)(E,2),U=z[0],H=z[1],G=i.a.useState({edit:!1,person:null}),Y=Object(l.a)(G,2),X=Y[0],J=Y[1],$=i.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],de=i.a.useState(!1),se=Object(l.a)(de,2),be=se[0],je=se[1],ue=i.a.useState(!1),pe=Object(l.a)(ue,2),he=pe[0],ge=pe[1],fe=i.a.useState({}),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState(""),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=i.a.useState(""),Be=Object(l.a)(Se,2),Ne=Be[0],Te=Be[1],we=i.a.useState(""),De=Object(l.a)(we,2),Re=De[0],Le=De[1],Pe=i.a.useState(""),Ie=Object(l.a)(Pe,2),Fe=Ie[0],_e=Ie[1],We=i.a.useState(""),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=i.a.useState(""),He=Object(l.a)(Ue,2),Ge=He[0],Ve=He[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(null),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(!1),rt=Object(l.a)(it,2),lt=rt[0],dt=rt[1],st=i.a.useState(!1),bt=Object(l.a)(st,2),jt=bt[0],ut=bt[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=i.a.useState(!1),mt=Object(l.a)(xt,2),Ot=(mt[0],mt[1],function(){ft(!1),H(null)}),yt=function(){M(!1),H(null)},kt=function(e,t){if(e)Le(t.fullname),Ce(Object(Kr.FormatDateFromString)(t.bookingDate)),Te(t.bookingTime.toUpperCase()),_e(t.email),ze(t.phone),rn(Object(Kr.FormatDateFromString)(t.birthDate)),Je(t.packageName),t.notes&&Ve(t.notes),J({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Fe,n.phone=Ee,n.fullname=Re,n.notes=Ge,n.birthDate=Object(Kr.RevertFormatDateFromString)(cn),n.packageName=Xe,n.bookingDate=Object(Kr.RevertFormatDateFromString)(ve),n.bookingTime=Ne,n.bookingRef=t.bookingRef,Ct(n)&&St({bookingId:a,person:n})}}else J({edit:e,person:t}),dt(!1)},vt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Ct=function(e){var t=!1;return vt(e.bookingDate)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{bookingDateError:!0}))),vt(e.birthDate)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Oe(Object(T.a)(Object(T.a)({},me),{},{bookingTimeError:!0}))),!t},St=function(e){le(!0),Vr.updateBooking(e).then((function(e){le(!1),J({edit:!1,person:null}),et(!Ze)})).catch((function(e){le(!1),J({edit:!1,person:null}),console.log(e)}))},Bt=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),Vr.deleteBooking(n).then((function(e){je(!1),ee({delete:!1,person:null}),et(!Ze)})).catch((function(e){je(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Nt=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),Vr.unDeleteBooking(n).then((function(e){ge(!1),oe({restore:!1,person:null}),et(!Ze)})).catch((function(e){ge(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Et(e.booking._id),ot(e.booking),_e(e.booking.email),Ve(e.booking.notes))}),[e.booking]);var Tt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,Vr.unPayBooking(at._id);case 4:le(!1),ft(!1),et(!Ze),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),ft(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,Vr.refundBooking(at._id);case 4:le(!1),At(),M(!1),et(!Ze),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),le(!1),M(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),At=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&u((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Pt=i.a.useState(null),It=Object(l.a)(Pt,2),Wt=It[0],Mt=It[1],Et=function(e){Mt(null),qr.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var e=n.result;console.log(e),Mt(e)}})).catch((function(e){console.log(e)}))},zt=i.a.useState(null),Ht=Object(l.a)(zt,2),Gt=Ht[0],Yt=Ht[1],Vt=i.a.useState(!1),Kt=Object(l.a)(Vt,2),qt=(Kt[0],Kt[1]),Xt=i.a.useState(!1),Jt=Object(l.a)(Xt,2),$t=Jt[0],Qt=Jt[1],Zt=i.a.useState(!1),en=Object(l.a)(Zt,2),tn=(en[0],en[1]),nn=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,qt(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Yt(n.data.invoice),qt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),qt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&nn()}),[e.booking,e.open]);var an=i.a.useState(""),on=Object(l.a)(an,2),cn=on[0],rn=on[1];return Object(a.jsx)(i.a.Fragment,{children:at&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"lg",open:e.open,TransitionComponent:rd,keepMounted:!0,onClose:function(){m(!1),v(!1),tn(!1),Yt(null),_e(""),Ve(""),e.onClose()},PaperComponent:ld,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:at.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"10px",backgroundColor:function(e){switch(e){case"blood":return fn;case"std":return gn;case"gp":return hn;case"gynae":return pn;default:return"#999"}}(at.clinic),color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:null===(t=at.clinic)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"20px",color:"#fff",padding:"0px 5px"},hidden:!at.emailSent,children:Object(a.jsx)(ct.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ye.a,{style:{fontSize:"25px",color:"#009634"}})})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:at.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(at.name)})}),at.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:at.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!at.deleted||ae.restore&&ae.person._id===at._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Nt(!0,at)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){Nt(!1,at)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){Nt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(X.edit&&X.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!lt,onClick:function(){kt(!1,at)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(X.edit&&X.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||at.deleted||X.edit||Z.delete&&Z.person._id===at._id,children:[at.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:at.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Bt(!0,at)},className:n.DeleteButton,children:"Delete This Record"})})}),0===at.OTCCharges&&Object(a.jsx)(R.a,{disabled:at.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Bt(!0,at)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Bt(!1,at)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Bt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:12,md:4,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEST DATE :"}),Object(a.jsx)("span",{hidden:X.edit&&X.person._id===at._id,className:n.infoData,children:Object(Kr.FormatDateFromString)(at.testDate)})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:4,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NAME : "}),Object(a.jsx)("span",{hidden:X.edit&&X.person._id===at._id,className:n.infoData,children:at.name})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:4,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"D.O.B : "}),Object(a.jsx)("span",{hidden:X.edit&&X.person._id===at._id,className:n.infoData,children:Object(Kr.FormatDateFromString)(at.birthDate)})]})]})}),Wt&&Object(a.jsx)("div",{children:Object(a.jsx)("iframe",{style:{width:"100%",minHeight:"500px"},src:Wt})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{label:"EMAIL",style:{margin:"10px"},fullWidth:!0,variant:"outlined",value:Fe||"",onChange:function(e){_e(e.target.value),ut(!jt)}})})}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"0px"},children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"NOTES",style:{margin:"10px"},value:Ge||"",onChange:function(e){Ve(e.target.value),ut(!jt)},variant:"outlined",multiline:!0,rows:4})})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{disabled:!Fe||!ui.validate(Fe),startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=at._id,le(!0),m(!1),Vr.sendBloodReportEmail(e,Fe,Ge).then((function(e){le(!1),"OK"===e.data.status&&(m(!0),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})),at.emailSent=!0)})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Send Email To Patient",x&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{startIcon:Object(a.jsx)(id.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){var e;e=at._id,le(!0),v(!1),Vr.updateBloodReport(e,Fe,Ge).then((function(e){le(!1),"OK"===e.data.status&&(v(!0),u((function(e){return Object(T.a)(Object(T.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})))})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Save Changes",k&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Saved Successfully"})]})})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:re||be||he,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(tl,{booking:U,open:P,price:Gt?Gt.grandTotal:null,handleClose:function(){I(!1),H(null)}}),Object(a.jsx)(Nn,{booking:U,invoice:Gt,open:$t,handleClose:function(e){Qt(!1),H(null),nn()}})]}),Object(a.jsxs)(wt.a,{open:gt,onClose:Ot,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:Ot,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Tt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:W,onClose:yt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:yt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Rt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var sd,bd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}})),jd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function ud(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(jd,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function pd(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function hd(){var e=bd(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(ct.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=m.bookings.find((function(t){return t._id===e}));r(t),j(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:250},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===H?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Je(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],p=i.a.useContext(C),h=Object(l.a)(p,2),g=h[0],f=(h[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(null),k=Object(l.a)(y,2),v=(k[0],k[1]),S=i.a.useState(""),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState(null),_=Object(l.a)(F,2),M=_[0],E=_[1],z=i.a.useState("unresolved"),U=Object(l.a)(z,2),H=U[0],V=U[1],q=i.a.useState(!1),J=Object(l.a)(q,2),$=J[0],Q=J[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),de=le[0],se=le[1],be=i.a.useState(null),je=Object(l.a)(be,2),ue=(je[0],je[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Ne=i.a.useState(!1),Te=Object(l.a)(Ne,2),De=Te[0],Re=Te[1],Le=i.a.useState(!1),Ae=Object(l.a)(Le,2),Pe=Ae[0],Ie=Ae[1],Fe=i.a.useState(""),_e=Object(l.a)(Fe,2),We=_e[0],Me=_e[1],Ee=i.a.useState(10),ze=Object(l.a)(Ee,2),Ue=ze[0],He=ze[1],Ge=i.a.useState(!1),Ve=Object(l.a)(Ge,2),Ke=Ve[0],qe=Ve[1];Object(o.useEffect)((function(){te&&Xe(te)}),[g.bookingDialogDataChanged]);var Xe=function(e){Vr.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Vr.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},Je=function(e,t){M||(E(t),Vr.archiveBloodReport(t).then((function(e){E(null),I(!P)})).catch((function(e){E(null)})))},$e=function(e,t){M||(E(t),Vr.unArchiveBloodReport(t).then((function(e){E(null),I(!P)})).catch((function(e){E(null)})))},Qe=Object(o.useRef)();Object(o.useEffect)((function(){var e=Vr.getNewUnmatchedBloodReports;"archived"===H&&(e=Vr.getArchivedUnmatchedBloodReports),qe(!0),O({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Qe.current=t,t.then((function(e){t===Qe.current&&(qe(!1),O({bookings:e,cachedBookings:Object(Ct.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(qe(!1),console.log(e),O({bookings:m.bookings,cachedBookings:m.cachedBookings,isFetching:!1}))}))}),[P,H,g.bloodReportRefresh]),Object(o.useEffect)((function(){if(N&&N.trim().length>0){var e=m.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(N.toLowerCase())>=0}));O({bookings:e,cachedBookings:m.cachedBookings,isFetching:!1})}else O({bookings:Object(Ct.a)(m.cachedBookings),cachedBookings:m.cachedBookings,isFetching:!1})}),[N]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=We,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[We]);var Ze=function(e){qr.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ke&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#ff8000"},children:[" ",Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Unmatched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){w(""),I(!P)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Da.a,{value:H,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&V(t)},"aria-label":"text alignment",children:[Object(a.jsx)(wa.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(wa.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:N,onChange:function(e){w(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:m.bookings,columns:u,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&v(e.rows[0])}})}),Object(a.jsxs)(wt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),se(null),r(null),ke(!1),fe(!1),Me(null),Be(!1),Re(!1),clearInterval(ad),Ie(!1)}),100)},PaperComponent:pd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(La.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ta.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&ie&&de.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Select"}),Object(a.jsx)(ba.a,{children:"Match"}),Object(a.jsx)(ba.a,{children:"Forename"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Test Date"}),Object(a.jsx)(ba.a,{})]})}),Object(a.jsx)(sa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:Object(a.jsx)(ct.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:c&&c._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?r(t):r(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(ba.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(ba.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(ba.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(ba.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Pa.a,{})})}),Object(Kr.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(ba.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(ba.a,{style:ln()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Kr.FormatDateFromString)(ln()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(ba.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){ue(t),j(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!c||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Vr.getBookingById(c._id).then((function(e){r(e.data)})),Vr.matchRecords(c._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!c&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!De&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",c.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),Me("downloadFailed"),Vr.resendEmails(te).then((function(e){ad=setInterval((function(){Vr.getLinkDetails(te).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),I(!P),clearInterval(ad))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),Me("downloadFailed"),Ie(!0),Vr.regenerateFiles(te).then((function(e){ad=setInterval((function(){Vr.getLinkDetails(te).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),I(!P),clearInterval(ad))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(ud,{variant:"determinate",color:"primary",value:Ue})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(dd,{booking:c,open:b,onClose:function(){j(!1),r(!1)}})]})}var gd,fd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}})),xd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function md(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(xd,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Od(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function yd(){var e=fd(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],d=c[1],s=i.a.useState(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(ct.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),u(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return et(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return et(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return Qe(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),N=Object(l.a)(B,2),w=N[0],D=N[1],A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(null),M=Object(l.a)(_,2),E=M[0],z=M[1],U=i.a.useState("unresolved"),H=Object(l.a)(U,2),V=H[0],q=H[1],J=i.a.useState(!1),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(null),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(null),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(null),ue=Object(l.a)(je,2),pe=(ue[0],ue[1]),he=i.a.useState(!1),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState(!1),Oe=Object(l.a)(me,2),ke=Oe[0],ve=Oe[1],Ce=i.a.useState(!1),Se=Object(l.a)(Ce,2),Be=Se[0],Ne=Se[1],Te=i.a.useState(!1),we=Object(l.a)(Te,2),De=we[0],Re=we[1],Le=i.a.useState(!1),Ae=Object(l.a)(Le,2),Pe=Ae[0],Ie=Ae[1],Fe=i.a.useState(""),_e=Object(l.a)(Fe,2),We=_e[0],Me=_e[1],Ee=i.a.useState(10),ze=Object(l.a)(Ee,2),Ue=ze[0],Ge=ze[1],Ve=i.a.useState(!1),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1];Object(o.useEffect)((function(){ne&&Je(ne)}),[f.bookingDialogDataChanged]);var Je=function(e){Vr.getLinkDetails(e).then((function(e){re(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Vr.findBestMatches(e).then((function(e){be(e.data.matchedBookings)})).catch((function(e){console.log(e),be([])}))},$e=function(e,t){E||(z(t),Vr.archiveBloodReport(t).then((function(e){z(null),F(!I)})).catch((function(e){z(null)})))},Qe=function(e,t){E||(z(t),Vr.unArchiveBloodReport(t).then((function(e){z(null),F(!I)})).catch((function(e){z(null)})))},Ze=Object(o.useRef)();Object(o.useEffect)((function(){var e=Vr.getNewMatchedBloodReports;"archived"===V&&(e=Vr.getArchivedMatchedBloodReports),Xe(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Ze.current=t,t.then((function(e){t===Ze.current&&(Xe(!1),y({bookings:e,cachedBookings:Object(Ct.a)(e),isFetching:!1}))}),(function(e){t===Ze.current&&(Xe(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ct.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){Ge((function(e){return e>=100?100:(t=We,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[We]);var et=function(e){qr.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[qe&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(He.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Matched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!I)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Da.a,{value:V,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&q(t)},"aria-label":"text alignment",children:[Object(a.jsx)(wa.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(wa.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(wt.a,{maxWidth:"lg",open:Q,onClose:function(){Z(!1),setTimeout((function(){ae(null),re(null),be(null),d(null),ve(!1),xe(!1),Me(null),Ne(!1),Re(!1),clearInterval(sd),Ie(!1)}),100)},PaperComponent:Od,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(La.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!se||!ce)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ta.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),se&&0===se.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),se&&ce&&se.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ce.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ce.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ce.testDate)})]})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Select"}),Object(a.jsx)(ba.a,{children:"Match"}),Object(a.jsx)(ba.a,{children:"Forename"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Test Date"}),Object(a.jsx)(ba.a,{})]})}),Object(a.jsx)(sa.a,{children:se.map((function(e){var t;return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:Object(a.jsx)(ct.a,{title:e.birthDate!==ce.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:ke||fe,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(ba.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(ba.a,{style:e.forenameCapital===ce.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(ba.a,{style:e.surnameCapital===ce.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(ba.a,{style:e.birthDate===ce.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ce.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Pa.a,{})})}),Object(Kr.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(ba.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(ba.a,{style:ln()(e.samplingTimeStamp,"yyyy-mm-dd")===ce.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Kr.FormatDateFromString)(ln()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(ba.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Be,onClick:function(t){return function(e,t){pe(t),u(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ke&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||fe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){xe(!0),Vr.getBookingById(r._id).then((function(e){d(e.data)})),Vr.matchRecords(r._id,ne).then((function(e){"OK"===e.data.status&&(xe(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ke&&!De&&!Be&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Ne(!0),Ge(0),Me("downloadFailed"),Vr.resendEmails(ne).then((function(e){sd=setInterval((function(){Vr.getLinkDetails(ne).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Ne(!1),Re(!0),F(!I),clearInterval(sd))}))}),1e3)})).catch((function(e){console.log(e),Ne(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Ne(!0),Ge(0),Me("downloadFailed"),Ie(!0),Vr.regenerateFiles(ne).then((function(e){sd=setInterval((function(){Vr.getLinkDetails(ne).then((function(e){Me(e.data.status),"sent"===e.data.status&&(Ne(!1),Re(!0),F(!I),clearInterval(sd))}))}),1e3)})).catch((function(e){console.log(e),Ne(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ke&&(Be||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Be&&!De&&"Sending ...",De&&!Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Pe&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ke&&(Be||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(md,{variant:"determinate",color:"primary",value:Ue})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Be&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(dd,{booking:r,open:j,onClose:function(){u(!1),d(!1)}})]})}var kd,vd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}})),Cd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Sd(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(Cd,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Bd(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Nd(){var e=vd(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],d=c[1],s=i.a.useState(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(ct.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),u(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return Je(e,t.value)},className:e.archiveButton,children:"Restore"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return Je(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),N=Object(l.a)(B,2),w=N[0],D=N[1],A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(null),M=Object(l.a)(_,2),E=M[0],z=M[1],U=i.a.useState("unresolved"),H=Object(l.a)(U,2),V=H[0],q=(H[1],i.a.useState(!1)),J=Object(l.a)(q,2),$=J[0],Q=J[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),de=le[0],se=le[1],be=i.a.useState(null),je=Object(l.a)(be,2),ue=(je[0],je[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Ne=i.a.useState(!1),Te=Object(l.a)(Ne,2),we=Te[0],De=Te[1],Re=i.a.useState(!1),Le=Object(l.a)(Re,2),Ae=Le[0],Pe=Le[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(10),Ee=Object(l.a)(Me,2),Ue=Ee[0],He=Ee[1],Ge=i.a.useState(!1),Ve=Object(l.a)(Ge,2),Ke=Ve[0],qe=Ve[1];Object(o.useEffect)((function(){te&&Xe(te)}),[f.bookingDialogDataChanged]);var Xe=function(e){Vr.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Vr.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},Je=function(e,t){E||(z(t),Vr.unArchiveBloodReport(t).then((function(e){z(null),F(!I)})).catch((function(e){z(null)})))},$e=Object(o.useRef)();Object(o.useEffect)((function(){var e=Vr.getArchivedBloodReports;qe(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));$e.current=t,t.then((function(e){t===$e.current&&(qe(!1),y({bookings:e,cachedBookings:Object(Ct.a)(e),isFetching:!1}))}),(function(e){t===$e.current&&(qe(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ct.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=_e,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[_e]);var Qe=function(e){qr.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ke&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#777"},children:[" ",Object(a.jsx)(ze.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Archived Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!I)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(wt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),se(null),d(null),ke(!1),fe(!1),We(null),Be(!1),De(!1),clearInterval(gd),Pe(!1)}),100)},PaperComponent:Bd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(La.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ta.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&ie&&de.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Select"}),Object(a.jsx)(ba.a,{children:"Match"}),Object(a.jsx)(ba.a,{children:"Forename"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Test Date"}),Object(a.jsx)(ba.a,{})]})}),Object(a.jsx)(sa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:Object(a.jsx)(ct.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(ba.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(ba.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(ba.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(ba.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Pa.a,{})})}),Object(Kr.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(ba.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(ba.a,{style:ln()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Kr.FormatDateFromString)(ln()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(ba.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){ue(t),u(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Vr.getBookingById(r._id).then((function(e){d(e.data)})),Vr.matchRecords(r._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!we&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),Vr.resendEmails(te).then((function(e){gd=setInterval((function(){Vr.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!I),clearInterval(gd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),Pe(!0),Vr.regenerateFiles(te).then((function(e){gd=setInterval((function(){Vr.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!I),clearInterval(gd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||we)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!we&&"Sending ...",we&&!Ae&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),we&&Ae&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||we)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Sd,{variant:"determinate",color:"primary",value:Ue})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!we&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(dd,{booking:r,open:j,onClose:function(){u(!1),d(!1)}})]})}var Td=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}})),wd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Dd(e){return Object(a.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(A.a,{width:"100%",mr:1,children:Object(a.jsx)(wd,Object(T.a)({variant:"determinate"},e))}),Object(a.jsx)(A.a,{minWidth:35,children:Object(a.jsx)(F.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Rd(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Ld(){var e=Td(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],d=c[1],s=i.a.useState(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(ct.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Ye.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));d(t),u(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Kr.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"})}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===E,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),N=Object(l.a)(B,2),w=N[0],D=N[1],A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(null),M=Object(l.a)(_,2),E=M[0],z=M[1],U=i.a.useState("unresolved"),H=Object(l.a)(U,2),V=H[0],q=(H[1],i.a.useState(!1)),J=Object(l.a)(q,2),$=J[0],Q=J[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),de=le[0],se=le[1],be=i.a.useState(null),je=Object(l.a)(be,2),ue=(je[0],je[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Ne=i.a.useState(!1),Te=Object(l.a)(Ne,2),we=Te[0],De=Te[1],Re=i.a.useState(!1),Le=Object(l.a)(Re,2),Ae=Le[0],Pe=Le[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(10),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=i.a.useState(!1),Ge=Object(l.a)(He,2),Ve=Ge[0],Ke=Ge[1];Object(o.useEffect)((function(){te&&qe(te)}),[f.bookingDialogDataChanged]);var qe=function(e){Vr.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Vr.findBestMatches(e).then((function(e){se(e.data.matchedBookings)})).catch((function(e){console.log(e),se([])}))},Xe=function(e,t){E||(z(t),Vr.unArchiveBloodReport(t).then((function(e){z(null),F(!I)})).catch((function(e){z(null)})))},Je=Object(o.useRef)();Object(o.useEffect)((function(){var e=Vr.getSentBloodReports;Ke(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(T.a)(Object(T.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Je.current=t,t.then((function(e){t===Je.current&&(Ke(!1),y({bookings:e,cachedBookings:Object(Ct.a)(e),isFetching:!1}))}),(function(e){t===Je.current&&(Ke(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Ct.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){Ue((function(e){return e>=100?100:(t=_e,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[_e]);var $e=function(e){qr.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(Ye.a,{style:{fontSize:"1.8rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Sent Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),F(!I)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(wt.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),se(null),d(null),ke(!1),fe(!1),We(null),Be(!1),De(!1),clearInterval(kd),Pe(!1)}),100)},PaperComponent:Rd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(La.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ta.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&ie&&de.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Kr.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Select"}),Object(a.jsx)(ba.a,{children:"Match"}),Object(a.jsx)(ba.a,{children:"Forename"}),Object(a.jsx)(ba.a,{children:"Surname"}),Object(a.jsx)(ba.a,{children:"D.O.B"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Test Date"}),Object(a.jsx)(ba.a,{})]})}),Object(a.jsx)(sa.a,{children:de.map((function(e){var t;return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:Object(a.jsx)(ct.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?d(t):d(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(ba.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(ba.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(ba.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(ba.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Pa.a,{})})}),Object(Kr.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(ba.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(ba.a,{style:ln()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Kr.FormatDateFromString)(ln()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(ba.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){ue(t),u(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Vr.getBookingById(r._id).then((function(e){d(e.data)})),Vr.matchRecords(r._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!we&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ue(0),We("downloadFailed"),Vr.resendEmails(te).then((function(e){kd=setInterval((function(){Vr.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!I),clearInterval(kd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ue(0),We("downloadFailed"),Pe(!0),Vr.regenerateFiles(te).then((function(e){kd=setInterval((function(){Vr.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),F(!I),clearInterval(kd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||we)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!we&&"Sending ...",we&&!Ae&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),we&&Ae&&Object(a.jsxs)(W.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||we)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Dd,{variant:"determinate",color:"primary",value:ze})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!we&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(dd,{booking:r,open:j,onClose:function(){u(!1),d(!1)}})]})}var Ad=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Pd=function e(){Object(ne.a)(this,e)};Pd.addNewBooking=function(e){return Ad.post("/api/derma/book/addnewbooking",e)},Pd.sendRegFormEmail=function(e){return Ad.post("/api/derma/book/sendregformemail?id=".concat(e))},Pd.payBooking=function(e,t,n,a){return Ad.post("/api/derma/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Pd.unPayBooking=function(e){return Ad.post("/api/derma/book/unpaybooking?id=".concat(e))},Pd.getShouldRefundsCount=function(){return Ad.get("/api/derma/book/getshouldrefundscount?")},Pd.refundBooking=function(e){return Ad.post("/api/derma/payment/refundpayment",{bookingId:e})},Pd.getBookingsStatsByDateStr=function(e){return Ad.get("/api/derma/book/getbookingsstatsbydatestr?date=".concat(e))},Pd.getBookingsCountByDateStr=function(e){return Ad.get("/api/derma/book/getbookingscountbydatestr?date=".concat(e))},Pd.getAllBookingsCountAll=function(){return Ad.get("/api/derma/book/getallbookingscountall")},Pd.getBookingsCountByDateStrandTime=function(e,t,n){return Ad.get("/api/derma/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Pd.getBookingsByDateStrandTime=function(e,t){return Ad.get("/api/derma/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Pd.getAllBookingsCountByDateStr=function(e){return Ad.get("/api/derma/book/getallbookingscountbydatestr?date=".concat(e))},Pd.getAllBookingsCountByDateStrandTime=function(e,t,n){return Ad.get("/api/derma/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Pd.getAllBookingsByDateStrandTime=function(e,t){return Ad.get("/api/derma/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Pd.changeBackToBookingMade=function(e){return Ad.post("/api/derma/book/changebacktobookingmade?id=".concat(e))},Pd.changeToPatientAttended=function(e){return Ad.post("/api/derma/book/changetopatientattended?id=".concat(e))},Pd.updateBooking=function(e){return Ad.post("/api/derma/book/updatebookappointment",e)},Pd.updateBookingTime=function(e){return Ad.post("/api/derma/book/updatebookappointmenttime",e)},Pd.deleteBooking=function(e){return Ad.post("/api/derma/book/deletebookappointment?id=".concat(e))},Pd.unDeleteBooking=function(e){return Ad.post("/api/derma/book/undeletebookappointment?id=".concat(e))},Pd.getBookingsByRef=function(e){return Ad.get("/api/derma/book/getbookingsbyref?ref=".concat(e))},Pd.getBookingById=function(e){return Ad.get("/api/derma/book/getbookingbyid?id=".concat(e))},Pd.getAllBookings=function(e){return e||(e=25),Ad.get("/api/derma/book/getallbookings?limit=".concat(e))},Pd.getDeletedBookings=function(e){return e||(e=25),Ad.get("/api/derma/book/getdeletedbookings?limit=".concat(e))},Pd.getTodayBookings=function(){return Ad.get("/api/derma/book/gettodaybookings")},Pd.getOldBookings=function(e){return e||(e=25),Ad.get("/api/derma/book/getoldbookings?limit=".concat(e))},Pd.getFutureBookings=function(e){return e||(e=25),Ad.get("/api/derma/book/getfuturebookings?limit=".concat(e))},Pd.getRecentBookings=function(){return Ad.get("/api/derma/book/getrecentbookings")},Pd.getRecentBookingsAll=function(e){return e||(e=25),Ad.get("/api/derma/book/getrecentbookingsall?limit=".concat(e))};var Id=n(111),Fd=function e(){Object(ne.a)(this,e)};Fd.downloadDermaRegForm=function(e){return Ad.get("/api/pdf/downloaddermaregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var _d=n(262),Wd=n.n(_d),Md=["Visa Medical"],Ed=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function zd(e){var t=e.inputRef,n=e.onChange,o=Object(qe.a)(e,["inputRef","onChange"]);return Object(a.jsx)(yn.a,Object(T.a)(Object(T.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Ud(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Hd(e){var t=Ed(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)("credit card"),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(o.useState)(Md[0]),p=Object(l.a)(u,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),A=D[0],P=D[1];Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var I=function(){m||(e.handleClose(),j("credit card"),S(""),g(Md[0]),O(!1))},F=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return P(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Pd.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),I(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:I,PaperComponent:Ud,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Xt.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:A,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),P(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:zd,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(E.a,{component:"fieldset",children:[Object(a.jsxs)($t.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(G.a,{value:"credit card",control:Object(a.jsx)(Jt.a,{}),label:"Credit Card"}),Object(a.jsx)(G.a,{value:"cash",control:Object(a.jsx)(Jt.a,{}),label:"Cash"}),Object(a.jsx)(G.a,{value:"corporate",control:Object(a.jsx)(Jt.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(E.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:Md.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:I,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:F,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Gd=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),Yd=i.a.forwardRef((function(e,t){return Object(a.jsx)(Et.a,Object(T.a)({direction:"up",ref:t},e))}));function Vd(e){return Object(a.jsx)(Mt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Kd(e){var t,n,c=Gd(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=Object(o.useState)(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState(!1),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(!1),z=Object(l.a)(E,2),U=z[0],H=z[1],G=i.a.useState(null),Y=Object(l.a)(G,2),J=Y[0],$=Y[1],Q=i.a.useState({edit:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState({delete:!1,person:null}),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState({restore:!1,person:null}),re=Object(l.a)(ce,2),le=re[0],de=re[1],se=i.a.useState(!1),be=Object(l.a)(se,2),je=be[0],ue=be[1],pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState({}),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Ne=Object(l.a)(Be,2),Te=Ne[0],we=Ne[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ie=i.a.useState(""),Fe=Object(l.a)(Ie,2),_e=Fe[0],We=Fe[1],Me=i.a.useState(""),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=i.a.useState(""),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=Ge[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(!1),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(null),rt=Object(l.a)(it,2),lt=rt[0],dt=rt[1],st=i.a.useState(!1),jt=Object(l.a)(st,2),ut=jt[0],pt=jt[1],ht=i.a.useState(!1),ft=Object(l.a)(ht,2),xt=ft[0],mt=ft[1],Ot=i.a.useState(!1),yt=Object(l.a)(Ot,2),kt=yt[0],vt=yt[1],Ct=i.a.useState(!1),St=Object(l.a)(Ct,2),Bt=(St[0],St[1],i.a.useState(null)),Nt=Object(l.a)(Bt,2),Tt=Nt[0],At=Nt[1],Pt=i.a.useState(!1),It=Object(l.a)(Pt,2),Wt=It[0],Mt=It[1],Et=function(){var t=Object(N.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Mt(!1),t.next=4,mn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,At(n.data.invoice),Mt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Mt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&Et()}),[e.booking,e.open]);var zt=function(){vt(!1),$(null)},Ht=function(){M(!1),$(null)};Object(o.useEffect)((function(){if(lt){var e=Te!==Object(Id.FormatDateFromString)(lt.bookingDate)||Le!==lt.bookingTime||_e!==lt.fullname||ze!==lt.email||Ye!==lt.phone||Ze!==lt.package||Xe!==lt.notes;pt(e)}}),[xt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){te({edit:!1,person:null}),pt(!1)}),500)}),[e.open]);var Gt=function(e,t){if(e)We(t.fullname),we(Object(Id.FormatDateFromString)(t.bookingDate)),Pe(t.bookingTime.toUpperCase()),Ue(t.email),Ve(t.phone),et(t.package),t.notes&&Je(t.notes),te({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ze,n.phone=Ye,n.fullname=_e,n.notes=Xe,n.package=Ze,n.bookingDate=Object(Id.RevertFormatDateFromString)(Te),n.bookingTime=Le,n.bookingRef=t.bookingRef,Yt(n)&&Vt({bookingId:a,person:n})}}else te({edit:e,person:t}),pt(!1)},Yt=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Se(Object(T.a)(Object(T.a)({},Ce),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Se(Object(T.a)(Object(T.a)({},Ce),{},{bookingTimeError:!0}))),!t},Vt=function(e){ue(!0),Pd.updateBooking(e).then((function(e){ue(!1),te({edit:!1,person:null}),ot(!at)})).catch((function(e){ue(!1),te({edit:!1,person:null}),console.log(e)}))},Kt=function(e,t){var n;e?ie({delete:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),Pd.deleteBooking(n).then((function(e){fe(!1),ie({delete:!1,person:null}),ot(!at)})).catch((function(e){fe(!1),ie({delete:!1,person:null}),console.log(e)}))):ie({delete:e,person:t})},qt=function(e,t){var n;e?de({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ye(!0),Pd.unDeleteBooking(n).then((function(e){ye(!1),de({restore:!1,person:null}),ot(!at)})).catch((function(e){ye(!1),de({restore:!1,person:null}),console.log(e)}))):de({restore:e,person:t})},Xt=function(){$(lt),At(Tt),H(!0)};Object(o.useEffect)((function(){e.booking&&(Pd.getBookingById(e.booking._id).then((function(e){dt(e.data)})).catch((function(e){console.log(e)})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[at,s.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&dt(e.booking)}),[e.booking]);var Jt,$t=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Pd.unPayBooking(lt._id);case 4:ue(!1),vt(!1),ot(!at),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ue(!1),vt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(N.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Pd.refundBooking(lt._id);case 4:ue(!1),Zt(),M(!1),ot(!at),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ue(!1),M(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pd.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&b((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:lt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(wt.a,{maxWidth:"md",open:e.open,TransitionComponent:Yd,keepMounted:!0,onClose:function(){m(!1),v(!1),At(null),e.onClose()},PaperComponent:Vd,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Dt.a,{id:"alert-dialog-slide-title",style:lt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(ct.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(X.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/derma/".concat(lt._id)),h(!0),setTimeout((function(){h(!1)}),1500)},"aria-label":"delete",className:c.margin,size:"small",children:Object(a.jsx)(cn.a,{style:lt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!p,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:xn,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Dermatology"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:lt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(lt.fullname)})}),lt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:lt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:c.infoDetails,children:Object(a.jsxs)("ul",{className:c.ul,children:[Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===lt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!lt.deleted||le.restore&&le.person._id===lt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){qt(!0,lt)},className:c.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Oe,onClick:function(){qt(!1,lt)},className:c.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Oe,onClick:function(){qt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:lt.deleted||oe.delete||ee.edit&&ee.person._id===lt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Gt(!0,lt)},className:c.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:je||!ut,onClick:function(){Gt(!1,lt)},className:c.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:je,onClick:function(){Gt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===lt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||lt.deleted||ee.edit||oe.delete&&oe.person._id===lt._id,children:[lt.OTCCharges>0&&Object(a.jsx)(ct.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:lt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Kt(!0,lt)},className:c.DeleteButton,children:"Delete This Record"})})}),0===lt.OTCCharges&&Object(a.jsx)(R.a,{disabled:lt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Kt(!0,lt)},className:c.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){Kt(!1,lt)},className:c.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===lt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){Kt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:Object(Id.FormatDateFromString)(lt.bookingDate)}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingDateError,className:c.TextBox,value:Te,onChange:function(e){we(e.target.value),Se(Object(T.a)(Object(T.a)({},Ce),{},{bookingDateError:!1})),mt(!xt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:lt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingTimeError,className:c.TextBox,value:Le,onChange:function(e){Pe(e.target.value),Se(Object(T.a)(Object(T.a)({},Ce),{},{bookingTimeError:!1})),mt(!xt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:lt.fullname}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:_e,onChange:function(e){We(e.target.value),mt(!xt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:lt.email}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:ze,onChange:function(e){Ue(e.target.value),mt(!xt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:null===(t=lt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),mt(!xt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:lt.notes}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Xe,onChange:function(e){Je(e.target.value),mt(!xt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"Service"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===lt._id,className:c.infoData,children:null===(n=lt.package)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===lt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ze,onChange:function(e){et(e.target.value),mt(!xt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"STATUS"})," ",(Jt=lt.status,"booked"===Jt?Object(a.jsx)("div",{className:c.BookedLabel,children:" Booking Made "}):"patient_attended"===Jt?Object(a.jsx)("div",{className:c.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===lt.status&&!(ee.edit&&ee.person._id===lt._id)&&!lt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:je,style:{width:"300px"},onClick:function(e){return t=lt._id,ue(!0),void Pd.changeBackToBookingMade(t).then((function(e){ue(!1),ot(!at)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===lt.status&&!(ee.edit&&ee.person._id===lt._id)&&!lt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:je,style:{width:"300px"},onClick:function(e){return t=lt._id,ue(!0),void Pd.changeToPatientAttended(t).then((function(e){ue(!1),ot(!at)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:lt.deleted||ee.edit,children:Object(a.jsx)(R.a,{disabled:!lt.formData,startIcon:Object(a.jsx)(gt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=lt._id,Fd.downloadDermaRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:c.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:lt.deleted||ee.edit||lt.formData,children:Object(a.jsxs)(R.a,{disabled:!lt.email||lt.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=lt._id,ue(!0),m(!1),Pd.sendRegFormEmail(e).then((function(e){ue(!1),"OK"===e.data.status&&m(!0)})).catch((function(e){console.log(e),ue(!1)}))},className:c.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",x&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Rt.a,{}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Wt&&Object(a.jsx)("span",{className:c.invoiceNumber,children:" ... "}),Wt&&Tt&&Object(a.jsxs)("span",{className:c.invoiceNumber,children:[" ",Tt.invoiceNumber," "]}),Wt&&!Tt&&Object(a.jsxs)("span",{className:c.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(ee.edit&&ee.person._id===lt._id)&&!lt.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Wt&&!Tt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:c.PayButton,onClick:function(){return Xt()},children:"Issue Invoice"}),Wt&&Tt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(gt.a,{}),color:"primary",className:c.printInvoiceButton,onClick:function(){return e=Tt._id,void mn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.editInvoiceButton,onClick:function(){return Xt()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!lt.email||lt.email.length<3,startIcon:Object(a.jsx)(Ut.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Tt._id,t=lt.email,ue(!0),v(!1),mn.emailInvoice(e,t).then((function(e){ue(!1),"OK"===e.data.status&&v(!0)})).catch((function(e){console.log(e),ue(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",k&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:lt.OTCCharges&&0!==lt.OTCCharges?c.infoDataCharges:c.infoDataChargesHigher,children:"\xa3".concat(lt.OTCCharges.toLocaleString("en-GB"))}),!(ee.edit&&ee.person._id===lt._id)&&!lt.paid&&!lt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.PayButton,onClick:function(e){return $(lt),void I(!0)},children:"Pay"}),!(ee.edit&&ee.person._id===lt._id)&&lt.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:c.PayLabel,children:[" ",Object(a.jsx)(bt.a,{className:c.checkIconSmall})," ","Paid by ",lt.paidBy,"corporate"===lt.paidBy?' "'.concat(lt.corporate,'" '):""]}),Object(a.jsx)(ct.a,{title:"Undo Payment",children:Object(a.jsx)(X.a,{onClick:function(){return vt(!0)},children:Object(a.jsx)(an.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:c.backdrop,open:je||ge||Oe,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Hd,{booking:J,open:P,price:Tt?Tt.grandTotal:null,handleClose:function(){I(!1),$(null)}}),Object(a.jsx)(Nn,{booking:J,invoice:Tt,open:U,handleClose:function(e){H(!1),$(null),Et()}})]}),Object(a.jsxs)(wt.a,{open:kt,onClose:zt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:zt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:$t,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(wt.a,{open:W,onClose:Ht,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Dt.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Lt.a,{children:Object(a.jsx)(Ft.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(R.a,{onClick:Ht,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Qt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var qd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Xd=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Jd(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function $d(e){var t=qd(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],d=c[1],s=Object(o.useState)(!1),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),U=M[0],H=M[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),J=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),de=le[0],se=le[1],be=Object(o.useState)(!0),je=Object(l.a)(be,2),pe=je[0],ge=je[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Te=Object(l.a)(Be,2),we=Te[0],De=Te[1],Le=Object(o.useState)(!0),Pe=Object(l.a)(Le,2),Fe=Pe[0],_e=Pe[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),Ee=Me[0],ze=Me[1],Ue=[];Ue="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Id.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Id.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ge=Object(l.a)(He,2),Ye=Ge[0],Ve=(Ge[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Xe=Ke[1],Je=i.a.useState(null),$e=Object(l.a)(Je,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],rt=ot[1],lt=Object(o.useState)(Md[0]),dt=Object(l.a)(lt,2),st=dt[0],bt=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=Pd.getAllBookings;"today"===e.date?n=Pd.getTodayBookings:"old"===e.date?n=Pd.getOldBookings:"future"===e.date?n=Pd.getFutureBookings:"recent"===e.date?n=Pd.getRecentBookingsAll:"deleted"===e.date&&(n=Pd.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(ht.toLowerCase())>=0}));Xe({bookings:Object(Ct.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Ct.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(r)}),[Ye.bookingDialogDataChanged]);var mt,Ot,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),rt(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Pt=vt[0],Ft=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(Ot=e.date,"today"===Ot?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===Ot?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===Ot?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===Ot?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===Ot?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===Ot?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===Ot?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===Ot?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===Ot?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Xd(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(r)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){u(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:qe.bookings,columns:Ue,autoPageSize:!0,page:Pt,onPageChange:function(e){Ft(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Kd,{booking:tt,open:it,onClose:function(){nt(null),rt(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){bt(Md[0]),_(!1),u(!1)},PaperComponent:Jd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:st,onChange:function(e){bt(e.target.value)},children:Md.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:U,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){_e(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ee,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("th",{className:t.th,children:"Date"}),J&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Ee&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===st:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[U&&Object(a.jsx)("td",{className:t.td,children:Object(Id.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Ee&&Object(a.jsx)("td",{className:t.td,children:Wd.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Qd(e){return Object(a.jsx)(F.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Zd(e,t){return{time:e,amount:t}}var es=[Zd("09:00",0),Zd("10:00",0),Zd("11:00",0),Zd("12:00",0),Zd("13:00",0),Zd("14:00",0),Zd("15:00",0),Zd("16:00",0),Zd("17:00",0),Zd("18:00",void 0)],ts=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ns(){var e=Object(Kn.a)(),t=i.a.useState(es),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(!1),s=Object(l.a)(d,2),b=s[0],j=s[1];return Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ln()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,j(!0),e.next=6,Pd.getBookingsStatsByDateStr(t);case 6:a=e.sent,j(!1),o=a.data.result,n.push(Zd("09:00",ts(o,"09"))),n.push(Zd("10:00",ts(o,"10"))),n.push(Zd("11:00",ts(o,"11"))),n.push(Zd("12:00",ts(o,"12"))),n.push(Zd("13:00",ts(o,"13"))),n.push(Zd("14:00",ts(o,"14"))),n.push(Zd("15:00",ts(o,"15"))),n.push(Zd("16:00",ts(o,"16"))),n.push(Zd("17:00",ts(o,"17"))),n.push(Zd("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),j(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Qd,{children:"Today"}),Object(a.jsx)(qn.a,{children:Object(a.jsxs)(Xn.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Jn.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)($n.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Qn.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Zn.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var as=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),os=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},is=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function cs(){var e=as(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState([]),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=os(c);if(e){var t=rn(c,"yyyy-mm-dd");C(!0),Pd.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&j(Object(Ct.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Qd,{children:"Current Visits"}),Object(a.jsx)(F.a,{component:"p",variant:"h6",children:is(os(c))}),Object(a.jsxs)(F.a,{color:"textSecondary",className:e.depositContext,children:["on ",rn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Kd,{booking:h,open:m,onClose:function(){O(!1)}})]})}var rs=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ls(){var e=rs(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:s.bookings,isFetching:!0}),m(!0),Pd.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:s.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Qd,{children:"Recent Bookings"}),Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"TimeStamp"}),Object(a.jsx)(ba.a,{children:"Fullname"}),Object(a.jsx)(ba.a,{children:"Email"}),Object(a.jsx)(ba.a,{children:"Tel"}),Object(a.jsx)(ba.a,{children:"Booked Date"}),Object(a.jsx)(ba.a,{children:"Booked Time"})]})}),Object(a.jsx)(sa.a,{children:s.bookings.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:y(e.timeStamp)}),Object(a.jsx)(ba.a,{children:e.fullname}),Object(a.jsx)(ba.a,{children:e.email}),Object(a.jsx)(ba.a,{children:e.phone}),Object(a.jsx)(ba.a,{children:Object(Id.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(ba.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:sj("gynae","recentBookings")})}))},children:"See more records"})})]})}var ds=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function ss(){var e=ds(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(ns,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(M.a,{className:o,children:Object(a.jsx)(cs,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{className:e.paper,children:Object(a.jsx)(ls,{})})})]})})}var bs=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function js(){var e=bs(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState({edit:!1,person:null}),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState(!1),A=Object(l.a)(D,2),P=A[0],I=A[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState({}),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],X=V[1],J=i.a.useState(""),$=Object(l.a)(J,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),de=Object(l.a)(le,2),se=de[0],be=de[1],je=i.a.useState(""),ue=Object(l.a)(je,2),pe=ue[0],he=ue[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){X(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Ne=function(e,t){if(e)ae(t.fullname),X(Object(Id.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.package),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=se,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Id.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Te(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Te=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,G(Object(T.a)(Object(T.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Pd.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Pd.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),Pd.unDeleteBooking(n).then((function(e){E(!1),v({restore:!1,person:null}),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(tt.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:s==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(at.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(it.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(ct.a,{title:"This record has been deleted.",children:Object(a.jsx)(Ae.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(F.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(F.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(nt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:M,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:M,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ne(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:N,onClick:function(){Ne(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:N,onClick:function(){Ne(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:P,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:P,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Id.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:se,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.package}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var us=function(e){return"boolean"===typeof e};function ps(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var hs=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function gs(){var e=hs(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!us(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Pd.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),Pd.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:ps,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(js,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var fs=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),xs=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=fs(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Pd.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,-1===_?Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):_>0?_>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabelBusy,children:_<10?" ".concat(_):"".concat(_)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:d.BookingCountLabel,children:_<10?" ".concat(_):"".concat(_)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:d.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ms=function e(){Object(ne.a)(this,e)};ms.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var Os=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ys=[1,2,3,4,5,6,7],ks=[1,2,3,4,5,6],vs=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Cs=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=vs(),r=ms.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Os.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:ks.map((function(e){return Object(a.jsx)("tr",{children:ys.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(xs,{cellIndex:(e-1)*ys.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*ys.length+i))})}))})}))})]})})},Ss=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Bs=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Ss(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(-1),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Pd.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Ns=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Ts=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),ws=function(e){var t=e.dates,n=e.dayClicked,o=Ts();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Ns.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Bs,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Ds=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Rs=[{packageName:"PRIVATE CONSULTATION WITH CONSULTANT DERMATOLOGIST"},{packageName:"FREE CONSULTATION FOR AESTHETIC TREATMENTS AND BOTOX"},{packageName:"RADIOFREQUNCY"},{packageName:"LASER HAIR"},{packageName:"FILLERS"},{packageName:"MOLE MAPPING / REMOVAL"},{packageName:"DERMABRASION"},{packageName:"PEELS"},{packageName:"WART REMOVAL"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Ls(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function As(e){var t=Ds(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),d=Object(o.useState)(!1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),A=D[0],P=D[1],I=i.a.useState(""),F=Object(l.a)(I,2),_=F[0],W=F[1],M=i.a.useState(""),U=Object(l.a)(M,2),H=U[0],G=U[1],Y=function(){b||(g(""),O(!1),S(""),P(""),W(""),G(""),e.handleClose(),j(!1))},X=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},J=function(){var t=Object(N.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(X()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,Pd.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:A,notes:_,package:H});case 6:j(!1),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Y(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"sm",open:e.open,onClose:Y,PaperComponent:Ls,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:xn,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Dermatology"}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsxs)(Lt.a,{children:[Object(a.jsxs)("div",{style:{height:"450px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:A,onChange:function(e){P(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(E.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(Nt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:H,onChange:function(e){G(e.target.value)},children:Rs.map((function(e){return Object(a.jsx)(Tt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:_,onChange:function(e){W(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Y,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:J,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Ps=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Is=function(e){e.key;var t=e.date,n=e.time,c=Ps(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,Pd.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var z,U=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){E(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:U(e.status),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:H,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(Kd,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(As,{date:t,time:n,open:M,handleClose:function(){E(!1)}})]})},Fs=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],_s=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Ws=function(e){var t=e.date,n=_s();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Fs.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Is,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Ms=["January","February","March","April","May","June","July","August","September","October","November","December"],Es=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function zs(){var e=Es(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState((new Date).getFullYear()),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),N=B[0],w=B[1],D=i.a.useState("month"),A=Object(l.a)(D,2),P=A[0],I=A[1],F=i.a.useState("month"),_=Object(l.a)(F,2),W=_[0],M=_[1],E=i.a.useState(""),z=Object(l.a)(E,2),U=z[0],G=z[1],Y=function(){G(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),M("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(P),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===P){1===s&&h(p-1);var t=1===s?12:s-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(P),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===P){12===s&&h(p+1);var t=12===s?1:s+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===P){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===P){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Ms[s-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(x,"mmmm d, yyyy"))," "]}):void 0}(P)}),"day"===P&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){G(e.target.value),c((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=P,"month"===V?Object(a.jsx)(Cs,{dayClicked:q,month:s,year:p}):"week"===V?Object(a.jsx)(ws,{dayClicked:q,dates:N}):"day"===V?Object(a.jsx)(Ws,{date:x}):void 0)]})}function Us(e){return Object(a.jsx)(F.a,{component:"h6",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}var Hs=Object(w.a)((function(e){return{}}));function Gs(){Hs();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,d,s,b,j,u,p;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=rn(new Date,"yyyy-mm-dd"),e.prev=2,e.next=5,et.getAllBookingsCountByDateStr(t);case 5:return n=e.sent,e.next=8,ho.getAllBookingsCountByDateStr(t);case 8:return a=e.sent,e.next=11,Ni.getAllBookingsCountByDateStr(t);case 11:return o=e.sent,e.next=14,Ic.getAllBookingsCountByDateStr(t);case 14:return i=e.sent,e.next=17,Vr.getAllBookingsCountByDateStr(t);case 17:return r=e.sent,e.next=20,Pd.getAllBookingsCountByDateStr(t);case 20:l=e.sent,d=parseInt(n.data.count),s=parseInt(a.data.count),b=parseInt(o.data.count),j=parseInt(i.data.count),u=parseInt(r.data.count),p=parseInt(l.data.count),c([{clinic:"PCR",count:d},{clinic:"Gynae",count:s},{clinic:"GP",count:b},{clinic:"STD",count:j},{clinic:"Blood",count:u},{clinic:"Dermatology",count:p},{clinic:"Total",count:d+s+b+j+u+p}]),h(!1),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.error(e.t0),h(!1);case 36:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[s]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Us,{children:"Today Bookings"}),n&&Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Clinic"}),Object(a.jsx)(ba.a,{children:"Count"})]})}),Object(a.jsx)(sa.a,{children:n.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:e.clinic}),Object(a.jsx)(ba.a,{children:e.count})]},e._id)}))})]})]})}var Ys=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Vs(){Ys();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,d,s,b,j,u,p,g,f;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=new Date,n=new Date(t.getTime()+864e5),a=rn(n,"yyyy-mm-dd"),e.prev=4,e.next=7,et.getAllBookingsCountByDateStr(a);case 7:return o=e.sent,e.next=10,ho.getAllBookingsCountByDateStr(a);case 10:return i=e.sent,e.next=13,Ni.getAllBookingsCountByDateStr(a);case 13:return r=e.sent,e.next=16,Ic.getAllBookingsCountByDateStr(a);case 16:return l=e.sent,e.next=19,Vr.getAllBookingsCountByDateStr(a);case 19:return d=e.sent,e.next=22,Pd.getAllBookingsCountByDateStr(a);case 22:s=e.sent,b=parseInt(o.data.count),j=parseInt(i.data.count),u=parseInt(r.data.count),p=parseInt(l.data.count),g=parseInt(d.data.count),f=parseInt(s.data.count),c([{clinic:"PCR",count:b},{clinic:"Gynae",count:j},{clinic:"GP",count:u},{clinic:"STD",count:p},{clinic:"Blood",count:g},{clinic:"Dermatology",count:f},{clinic:"Total",count:b+j+u+p+g+f}]),h(!1),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(4),console.error(e.t0),h(!1);case 38:case"end":return e.stop()}}),e,null,[[4,34]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[s]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Us,{children:"Tomorrow Bookings"}),n&&Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Clinic"}),Object(a.jsx)(ba.a,{children:"Count"})]})}),Object(a.jsx)(sa.a,{children:n.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:e.clinic}),Object(a.jsx)(ba.a,{children:e.count})]},e._id)}))})]})]})}var Ks=Object(w.a)((function(e){return{}}));function qs(){Ks();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(!1),u=Object(l.a)(j,2),p=u[0],h=u[1],g=function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,d,s,b,j,u;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,et.getAllBookingsCountAll();case 4:return t=e.sent,e.next=7,ho.getAllBookingsCountAll();case 7:return n=e.sent,e.next=10,Ni.getAllBookingsCountAll();case 10:return a=e.sent,e.next=13,Ic.getAllBookingsCountAll();case 13:return o=e.sent,e.next=16,Vr.getAllBookingsCountAll();case 16:return i=e.sent,e.next=19,Pd.getAllBookingsCountAll();case 19:r=e.sent,l=parseInt(t.data.count),d=parseInt(n.data.count),s=parseInt(a.data.count),b=parseInt(o.data.count),j=parseInt(i.data.count),u=parseInt(r.data.count),c([{clinic:"PCR",count:l},{clinic:"Gynae",count:d},{clinic:"GP",count:s},{clinic:"STD",count:b},{clinic:"Blood",count:j},{clinic:"Dermatology",count:u},{clinic:"Total",count:l+d+s+b+j+u}]),h(!1),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(1),console.error(e.t0),h(!1);case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[s]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsx)(Us,{children:"Total Bookings"}),n&&Object(a.jsxs)(da.a,{size:"small",children:[Object(a.jsx)(ja.a,{children:Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:"Clinic"}),Object(a.jsx)(ba.a,{children:"Count"})]})}),Object(a.jsx)(sa.a,{children:n.map((function(e){return Object(a.jsxs)(ua.a,{children:[Object(a.jsx)(ba.a,{children:e.clinic}),Object(a.jsx)(ba.a,{children:e.count})]},e._id)}))})]})]})}var Xs=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Js(){var e=Xs(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),d=r[0],s=r[1],b=i.a.useState(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,et.getLateBookings();case 4:t=e.sent,s(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[u]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(Us,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Ie.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:un},children:"PCR"})," 40-Hours Late"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var $s=n(217),Qs=n.n($s),Zs=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function eb(){var e=Zs(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),d=r[0],s=r[1],b=i.a.useState(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,et.getUnmatchedRecords();case 4:t=e.sent,s(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[u]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(Us,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Qs.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:un},children:"PCR"})," Unmatched Records"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var tb=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function nb(){var e=tb(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),d=r[0],s=r[1],b=i.a.useState(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,ho.getShouldRefundsCount();case 4:t=e.sent,s(t.data.count),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[u]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(Us,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Qs.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:pn},children:"GYNAE"}),"  Waiting for Refunds"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var ab=function(){return sessionStorage.getItem("medexadmin-role")},ob=function(e){return sessionStorage.setItem("medexadmin-role",e)},ib=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function cb(){var e=ib(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),d=r[0],s=r[1],b=i.a.useState(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Vr.getNewBloodResultsCount();case 4:t=e.sent,s(t.data.result),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[u]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(Us,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Qs.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===d?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:fn},children:"BLOOD"})," New Results"]})})]}),null!==d&&Object(a.jsx)("div",{className:0===d?e.countLabel:e.countLabelRed,children:d})]})]})})}var rb=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:350},fixedHeightSmall:{height:200,cursor:"pointer"}}}));function lb(){var e=rb(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1]),c=Object(Q.a)(e.paper,e.fixedHeight),r=Object(Q.a)(e.paper,e.fixedHeightSmall),d=Object(te.d)();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(M.a,{className:r,onClick:function(){var e="pcr";ob(e),o((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(re("/".concat(dj(e,sj(e,"latebookings")))))},children:Object(a.jsx)(Js,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(M.a,{className:r,onClick:function(){var e="pcr";ob(e),o((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(re("/".concat(dj(e,sj(e,"unmatchedRecords")))))},children:Object(a.jsx)(eb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(M.a,{className:r,onClick:function(){var e="gynae";ob(e),o((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(re("/".concat(dj(e,sj(e,"deletedBookings")))))},children:Object(a.jsx)(nb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(M.a,{className:r,onClick:function(){var e="blood";ob(e),o((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),d.push(re("/".concat(dj(e,sj(e,"dashboard")))))},children:Object(a.jsx)(cb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(M.a,{className:c,children:Object(a.jsx)(Gs,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(M.a,{className:c,children:Object(a.jsx)(Vs,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(M.a,{className:c,children:Object(a.jsx)(qs,{})})})]})})}var db=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),sb=function e(){Object(ne.a)(this,e)};sb.addNewBooking=function(e){return db.post("/api/gp/book/addnewbooking",e)},sb.sendRegFormEmail=function(e){return db.post("/api/gp/book/sendregformemail?id=".concat(e))},sb.payBooking=function(e,t,n,a){return db.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},sb.unPayBooking=function(e){return db.post("/api/gp/book/unpaybooking?id=".concat(e))},sb.getShouldRefundsCount=function(){return db.get("/api/gp/book/getshouldrefundscount?")},sb.refundBooking=function(e){return db.post("/api/gp/payment/refundpayment",{bookingId:e})},sb.getBookingsStatsByDateStr=function(e){return db.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},sb.getBookingsCountByDateStr=function(e){return db.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},sb.getAllBookingsCountAll=function(){return db.get("/api/gp/book/getallbookingscountall")},sb.getBookingsCountByDateStrandTime=function(e,t,n){return db.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},sb.getBookingsByDateStrandTime=function(e,t){return db.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},sb.getAllBookingsCountByDateStr=function(e){return db.get("/api/admin/book/getallbookingscountbydatestr?date=".concat(e))},sb.getAllBookingsCountByDateStrandTime=function(e,t,n){return db.get("/api/admin/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},sb.getAllBookingsByDateStrandTime=function(e,t){return db.get("/api/admin/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},sb.changeBackToBookingMade=function(e){return db.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},sb.changeToPatientAttended=function(e){return db.post("/api/gp/book/changetopatientattended?id=".concat(e))},sb.updateBooking=function(e){return db.post("/api/gp/book/updatebookappointment",e)},sb.updateBookingTime=function(e){return db.post("/api/gp/book/updatebookappointmenttime",e)},sb.deleteBooking=function(e){return db.post("/api/gp/book/deletebookappointment?id=".concat(e))},sb.unDeleteBooking=function(e){return db.post("/api/gp/book/undeletebookappointment?id=".concat(e))},sb.getBookingsByRef=function(e){return db.get("/api/admin/book/getbookingsbyref?ref=".concat(e))},sb.getBookingById=function(e){return db.get("/api/gp/book/getbookingbyid?id=".concat(e))},sb.getAllBookings=function(e){return e||(e=25),db.get("/api/admin/book/getallbookings?limit=".concat(e))},sb.searchAllBookings=function(e){return db.post("/api/admin/book/searchallbookings",{filter:e})},sb.getDeletedBookings=function(e){return e||(e=25),db.get("/api/admin/book/getdeletedbookings?limit=".concat(e))},sb.getTodayBookings=function(){return db.get("/api/admin/book/gettodaybookings")},sb.getOldBookings=function(e){return e||(e=25),db.get("/api/admin/book/getoldbookings?limit=".concat(e))},sb.getFutureBookings=function(e){return e||(e=25),db.get("/api/admin/book/getfuturebookings?limit=".concat(e))},sb.getRecentBookings=function(){return db.get("/api/admin/book/getrecentbookings")},sb.getRecentBookingsAll=function(e){return e||(e=25),db.get("/api/admin/book/getrecentbookingsall?limit=".concat(e))};var bb=function(e){return"boolean"===typeof e};function jb(e){var t=e.inputRef,n=Object(qe.a)(e,["inputRef"]);return Object(a.jsx)(Je.a,Object(T.a)(Object(T.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var ub=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"},boxTitle:{fontWeight:"500",color:e.palette.secondary.main,borderColor:e.palette.secondary.main,border:"1px solid",fontSize:"1.2rem",backgroundColor:"#fff",width:"150px",padding:"5px",borderRadius:"30px",textAlign:"center",marginBottom:"10px",boxShadow:"4px 8px 8px #eee"}}}));function pb(){var e=ub(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!bb(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(d,2),j=b[0],u=b[1];Object(o.useEffect)((function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){sb.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p,h=function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),j()},g=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!0})})):(r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!0})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:[]})})),sb.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(T.a)(Object(T.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(F.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(E.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(T.a)(Object(T.a)({},u),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(T.a)(Object(T.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:jb,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&g()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:h,onTouchTap:h,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:g,onTouchTap:g,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:e.PersonsBox,children:[(p=c.foundRecords[0].clinic,Object(a.jsx)("div",{className:e.boxTitle,children:p.toUpperCase()+" Clinic"})),function(e){switch(e){case"pcr":return Object(a.jsx)(xt,{});case"gp":return Object(a.jsx)(ic,{});case"std":return Object(a.jsx)(ur,{});case"gynae":return Object(a.jsx)(Ko,{});case"blood":return Object(a.jsx)(Cl,{});default:return null}}(c.foundRecords[0].clinic)]})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var hb=n(201),gb=Object(w.a)((function(e){return{}}));function fb(e){gb();if(!e.booking)return null;switch(e.booking.clinic){case"pcr":return Object(a.jsx)(Rn,{booking:e.booking,open:e.open,onClose:e.onClose});case"gp":return Object(a.jsx)(Ei,{booking:e.booking,open:e.open,onClose:e.onClose});case"gynae":return Object(a.jsx)(To,{booking:e.booking,open:e.open,onClose:e.onClose});case"std":return Object(a.jsx)(qc,{booking:e.booking,open:e.open,onClose:e.onClose});case"blood":return Object(a.jsx)(il,{booking:e.booking,open:e.open,onClose:e.onClose});case"derma":return Object(a.jsx)(Kd,{booking:e.booking,open:e.open,onClose:e.onClose});default:return null}}var xb=n(279),mb=n.n(xb),Ob=["Visa Medical"],yb=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:"#323e9a",fontWeight:"600",fontSize:"0.95rem"}}})),kb=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function vb(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Cb(e){var t=yb(),n=function(e){switch(e){case"pcr":return t.PCRLabel;case"gp":return t.GPLabel;case"gynae":return t.GynaeLabel;case"std":return t.STDLabel;case"blood":return t.BloodLabel;case"derma":return t.DermaLabel;default:return t.clinicTitle}},c=i.a.useState(25),r=Object(l.a)(c,2),d=r[0],s=r[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),u=j[0],p=j[1],h=i.a.useState(new Date((new Date).getTime()-6048e5)),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(new Date((new Date).getTime()-864e5)),O=Object(l.a)(m,2),y=O[0],k=O[1],v=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),S=Object(l.a)(v,2),B=S[0],N=S[1],w=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(w,2),A=D[0],P=D[1],I=Object(o.useState)(!1),F=Object(l.a)(I,2),_=F[0],W=F[1],M=Object(o.useState)(!0),U=Object(l.a)(M,2),H=U[0],V=U[1],q=Object(o.useState)(!0),J=Object(l.a)(q,2),$=J[0],Q=J[1],ee=Object(o.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=Object(o.useState)(!0),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=Object(o.useState)(!0),de=Object(l.a)(le,2),se=de[0],be=de[1],je=Object(o.useState)(!0),pe=Object(l.a)(je,2),ge=pe[0],xe=pe[1],Oe=Object(o.useState)(!0),ke=Object(l.a)(Oe,2),Ce=ke[0],Be=ke[1],Te=Object(o.useState)(!0),we=Object(l.a)(Te,2),De=we[0],Le=we[1],Pe=Object(o.useState)(!0),Fe=Object(l.a)(Pe,2),_e=Fe[0],We=Fe[1],Me=Object(o.useState)(!0),Ee=Object(l.a)(Me,2),ze=Ee[0],Ue=Ee[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(ut.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(hb.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(Xt.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(En.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(Wn.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(ut.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(hb.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ge=i.a.useContext(C),Ye=Object(l.a)(Ge,2),Ve=Ye[0],Ke=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),qe=Object(l.a)(Ke,2),Xe=qe[0],Je=qe[1],$e=i.a.useState(null),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=i.a.useState(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(l.a)(ot,2),rt=it[0],lt=it[1],dt=Object(o.useState)(Ob[0]),st=Object(l.a)(dt,2),bt=st[0],jt=st[1],pt=i.a.useState(""),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=(Object(o.useRef)(),function(e){var t=rn(new Date,"yyyy-mm-dd"),n=rn(e,"yyyy-mm-dd");return rn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),mt=function(t){var n=sb.getAllBookings;"today"===e.date?n=sb.getTodayBookings:"old"===e.date?n=sb.getOldBookings:"future"===e.date?n=sb.getFutureBookings:"recent"===e.date?n=sb.getRecentBookingsAll:"deleted"===e.date&&(n=sb.getDeletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),mt(25)}),[e.date]),Object(o.useEffect)((function(){if(gt&&gt.trim().length>0){var e=Xe.cachedBookings.filter((function(e){var t,n,a;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(gt.toLowerCase()))>=0||(null===(n=e.forename)||void 0===n?void 0:n.toLowerCase().indexOf(gt.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(gt.toLowerCase()))>=0}));Je({bookings:Object(Ct.a)(e),cachedBookings:Xe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Ct.a)(Xe.cachedBookings),cachedBookings:Xe.cachedBookings,isFetching:!1})}),[gt]);var Ot,yt,kt=function(e,t){var n=Xe.bookings.find((function(e){return e._id===t}));at(n),lt(!0)},vt=i.a.useState(1),Pt=Object(l.a)(vt,2),Ft=Pt[0],_t=Pt[1];return Object(a.jsxs)(i.a.Fragment,{children:[Xe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Bt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(yt=e.date,"today"===yt?Object(a.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===yt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===yt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===yt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===yt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===yt?Object(a.jsx)(Ne.a,{style:{fontSize:"2.2rem"}}):"positive"===yt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===yt?Object(a.jsx)(Ae.a,{style:{fontSize:"2.2rem"}}):"late"===yt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",kb(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ct.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(X.a,{color:"primary",className:t.refreshButton,onClick:function(e){ft(""),mt(d)},children:Object(a.jsx)(It.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){p(!0)},startIcon:Object(a.jsx)(Ln.a,{style:{color:"#009900"},icon:An.a}),children:"export to excel"})})}),Xe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:gt,onChange:function(e){ft(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(Ot=e.date,"live"===Ot||"positive"===Ot||"late"===Ot||"today"===Ot),children:Object(a.jsxs)(E.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(Nt.a,{labelId:"top-select-label",id:"top-simple-select",value:d,onChange:function(e){s(e.target.value),mt(e.target.value)},children:[Object(a.jsx)(Tt.a,{value:25,children:"25"}),Object(a.jsx)(Tt.a,{value:50,children:"50"}),Object(a.jsx)(Tt.a,{value:100,children:"100"}),Object(a.jsx)(Tt.a,{value:500,children:"500"}),Object(a.jsx)(Tt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Tt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(St.a,{rows:Xe.bookings,columns:He,autoPageSize:!0,page:Ft,onPageChange:function(e){_t(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)(fb,{booking:nt,open:rt,onClose:function(){at(null),lt(!1)}}),Xe.bookings&&Xe.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:u,onClose:function(){jt(Ob[0]),W(!1),p(!1)},PaperComponent:vb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:_,onChange:function(e){W(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:bt,onChange:function(e){jt(e.target.value)},children:Ob.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:f,onChange:function(e){x(e),N(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:y,onChange:function(e){k(e),P(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(A),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){V(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ne,onChange:function(e){ae(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ce,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){be(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ge,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Ce,onChange:function(e){Be(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:De,onChange:function(e){Le(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){We(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ze,onChange:function(e){Ue(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),$&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),ne&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ce&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),ge&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Ce&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),De&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),ze&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Xe.bookings.filter((function(e){return _?e.bookingDate>=B&&e.bookingDate<=A&&e.paid&&"corporate"===e.paidBy&&e.corporate===bt:e.bookingDate>=B&&e.bookingDate<=A})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(hb.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),ne&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ce&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),ge&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Ce&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),De&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),ze&&Object(a.jsx)("td",{className:t.td,children:mb.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Sb=Object(w.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Bb=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,d=Sb(),s=i.a.useContext(C),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],A=R[1],P=i.a.useState(!1),I=Object(l.a)(P,2),F=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=ln()(e,"yyyy-mm-dd");f(a),y(e),A(e.getMonth()!==n-1);var o=ln()(new Date,"yyyy-mm-dd");F(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=ln()(r,"yyyy-mm-dd");f(l),y(r),A(!0);var d=ln()(new Date,"yyyy-mm-dd");F(l<d)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(null),a=null===(t=j.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,sb.getAllBookingsCountByDateStr(g);case 10:a=e.sent,u((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var _,W=function(e){var t=e/50*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:un,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},M=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:pn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},E=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:hn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},z=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:gn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},U=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:fn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},H=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:d.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:xn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:d.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=ln()(new Date,"yyyy-mm-dd")===ln()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(_=S,_?-2!==_?Object(a.jsx)("div",{className:d.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:_.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:(t=e.clinic,n=e.count,Object(a.jsxs)(i.a.Fragment,{children:["pcr"===t&&j.selectedClinics.findIndex((function(e){return"PCR"===e}))>=0&&W(n),"gynae"===t&&j.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&M(n),"gp"===t&&j.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&E(n),"std"===t&&j.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&z(n),"blood"===t&&j.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&U(n),"derma"===t&&j.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&H(n)]}))});var t,n}))})}):void 0:Object(a.jsx)("div",{className:d.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}))]})})},Nb=function e(){Object(ne.a)(this,e)};Nb.getMonthRange=function(e,t){return new Ha.a.Calendar(Ha.a.SUNDAY).itermonthdates(t,e)};var Tb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wb=[1,2,3,4,5,6,7],Db=[1,2,3,4,5,6],Rb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Lb=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Rb(),r=Nb.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Tb.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:Db.map((function(e){return Object(a.jsx)("tr",{children:wb.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Bb,{cellIndex:(e-1)*wb.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*wb.length+i))})}))})}))})]})})},Ab=Object(w.a)((function(e){return{Container:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},PCRGauge:{position:"absolute",bottom:"15px",left:"0",width:"15px",height:"90%"},GynaeGauge:{position:"absolute",bottom:"15px",left:"16px",width:"15px",height:"90%"},GPGauge:{position:"absolute",bottom:"15px",left:"32px",width:"15px",height:"90%"},STDGauge:{position:"absolute",bottom:"15px",left:"48px",width:"15px",height:"90%"},BloodGauge:{position:"absolute",bottom:"15px",left:"64px",width:"15px",height:"90%"},DermaGauge:{position:"absolute",bottom:"15px",left:"80px",width:"15px",height:"90%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",height:"100%"}}})),Pb=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Ab(),d=i.a.useContext(C),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState(null),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(null);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return sb.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count&&(g(e.data.count),j((function(a){return Object(T.a)(Object(T.a)({},a),{},{AdminCalendarCache:[].concat(Object(Ct.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count&&g(o.data.count)}}),[t,n]);var B,N=function(e){var t=e/10*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:un,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},w=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:pn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},D=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:hn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},R=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:gn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},L=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:fn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},A=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:xn,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},P=function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:["pcr"===e&&b.selectedClinics.findIndex((function(e){return"PCR"===e}))>=0&&N(t),"gynae"===e&&b.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&w(t),"gp"===e&&b.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&D(t),"std"===e&&b.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&R(t),"blood"===e&&b.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&L(t),"derma"===e&&b.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&A(t)]})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:(B=h,B?-2!==B?Object(a.jsx)("div",{className:r.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:B.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:P(e.clinic,e.count)})}))})}):void 0:Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}))})})},Ib=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Fb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),_b=function(e){var t=e.dates,n=e.dayClicked,o=Fb();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:ln()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:ln()(e,"mmm ")}),Object(a.jsx)("span",{style:ln()(new Date,"yyyy-mm-dd")===ln()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:ln()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Ib.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Pb,{dayClicked:n,date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Wb=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},BoxDisabled:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",borderColor:"#ddd",cursor:"not-allowed",color:"#ddd",transition:"all 0.2s ease"},BoxGynae:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:pn,color:pn,transition:"all 0.2s ease","&:hover":{backgroundColor:pn,color:"#fff"}},BoxGP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:hn,color:hn,transition:"all 0.2s ease","&:hover":{backgroundColor:hn,color:"#fff"}},BoxSTD:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:gn,color:gn,transition:"all 0.2s ease","&:hover":{backgroundColor:gn,color:"#fff"}},BoxBlood:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:fn,color:fn,transition:"all 0.2s ease","&:hover":{backgroundColor:fn,color:"#fff"}},BoxDerma:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:xn,color:xn,transition:"all 0.2s ease","&:hover":{backgroundColor:xn,color:"#fff"}}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Bt.a);function Mb(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Eb(e){var t=Wb(),n=i.a.useContext(C),o=Object(l.a)(n,2),c=(o[0],o[1],function(){e.handleClose()}),r=function(){return e.time.indexOf(":15")>0||e.time.indexOf(":45")>0||e.time.indexOf("09")>=0},d=function(t){e.clinicClicked(t)};return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(wt.a,{maxWidth:"xs",open:e.open,onClose:c,PaperComponent:Mb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(ji.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{height:"420px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(_e.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:r()?t.BoxDisabled:t.BoxGynae,onClick:function(){return r()?null:d("gynae")},children:"GYNAE"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:r()?t.BoxDisabled:t.BoxGP,onClick:function(){return r()?null:d("gp")},children:"GP"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxSTD,onClick:function(){return d("std")},children:"STD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxBlood,onClick:function(){return d("blood")},children:"BLOOD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxDerma,onClick:function(){return d("derma")},children:"DERMATOLOGY"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:c,style:{width:"100px"},children:"close"})})})})]})})]})})})}var zb=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}},BookingBorderPCR:{border:"4px solid",borderColor:un},BookingBorderGynae:{border:"4px solid",borderColor:pn},BookingBorderGP:{border:"4px solid",borderColor:hn},BookingBorderSTD:{border:"4px solid",borderColor:gn},BookingBorderBlood:{border:"4px solid",borderColor:fn},BookingBorderDerma:{border:"4px solid",borderColor:xn}}})),Ub=function(e){e.key;var t=e.date,n=e.time,c=zb(),r=i.a.useContext(C),d=Object(l.a)(r,2),s=d[0],b=d[1],j=i.a.useState(null),u=Object(l.a)(j,2),p=u[0],h=u[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),A=i.a.useState(!1),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState(!1),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState(!1),U=Object(l.a)(z,2),H=U[0],G=U[1],Y=i.a.useState(!1),V=Object(l.a)(Y,2),K=V[0],X=V[1],J=i.a.useState(!1),$=Object(l.a)(J,2),Z=$[0],ee=$[1],te=i.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1];Object(o.useEffect)((function(){var e=ln()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){var n,a,o;return(null===(n=t.fullname)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(a=t.forename)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(o=t.surname)||void 0===o?void 0:o.toLowerCase().indexOf(e.toLowerCase()))>=0})))}else m(Object(Ct.a)(p))}),[s.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(N.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=s.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!M){e.next=9;break}return e.next=7,sb.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ct.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||M)&&(b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,s.bookingDialogDataChanged]);var de,se=function(e){switch(e){case"sample_taken":case"patient_attended":return c.bookingBoxSampleTaken;case"positive":return c.bookingBoxPositive;case"report_sent":case"report_cert_sent":return c.bookingBoxReportSent;default:return c.bookingBox}},be=function(){E(!0)},je=function(e){switch(e){case"pcr":return c.BookingBorderPCR;case"gynae":return c.BookingBorderGynae;case"gp":return c.BookingBorderGP;case"std":return c.BookingBorderSTD;case"blood":return c.BookingBorderBlood;case"derma":return c.BookingBorderDerma;default:return null}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(de=x,null===de?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):de.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[de.map((function(e){return s.selectedClinics.findIndex((function(t){return t===e.clinic.toUpperCase()}))>=0&&Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:Object(Q.a)(se(e.status),je(e.clinic)),onClick:function(t){return function(e,t){v(t),F(!0)}(0,e)},children:"".concat(e.fullname?e.fullname:"".concat(e.forename," ").concat(e.surname)).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:be,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(fb,{booking:k,open:I,onClose:function(){F(!1)}}),Object(a.jsx)(Eb,{date:t,time:n,open:M,handleClose:function(){E(!1)},clinicClicked:function(e){switch(e){case"gynae":X(!0);break;case"gp":G(!0);break;case"std":ee(!0);break;case"blood":oe(!0);break;case"derma":le(!0)}}}),Object(a.jsx)(Sc,{date:t,time:n,open:H,handleClose:function(){G(!1),E(!1)}}),Object(a.jsx)(Fr,{date:t,time:n,open:Z,handleClose:function(){ee(!1),E(!1)}}),Object(a.jsx)(fi,{date:t,time:n,open:K,handleClose:function(){X(!1),E(!1)}}),Object(a.jsx)(ql,{date:t,time:n,open:ae,handleClose:function(){oe(!1),E(!1)}}),Object(a.jsx)(As,{date:t,time:n,open:re,handleClose:function(){le(!1),E(!1)}})]})},Hb=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Gb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Yb=function(e){var t=e.date,n=Gb();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:ln()(new Date,"yyyy-mm-dd")===ln()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:ln()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Hb.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Ub,{date:ln()(t,"yyyy-mm-dd"),time:e},"".concat(ln()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Vb=[{clinic:"PCR",color:un},{clinic:"GYNAE",color:pn},{clinic:"GP",color:hn},{clinic:"STD",color:gn},{clinic:"BLOOD",color:fn},{clinic:"DERMA",color:xn}],Kb=["January","February","March","April","May","June","July","August","September","October","November","December"],qb=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Xb(){var e=qb(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(d,2),b=s[0],j=s[1],u=i.a.useState((new Date).getFullYear()),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(new Date),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1],B=i.a.useState([]),N=Object(l.a)(B,2),w=N[0],D=N[1],A=i.a.useState("month"),P=Object(l.a)(A,2),I=P[0],F=P[1],_=i.a.useState("month"),W=Object(l.a)(_,2),M=W[0],E=W[1],z=i.a.useState(""),U=Object(l.a)(z,2),G=U[0],Y=U[1],V=function(){Y(""),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{selectedClinics:["PCR","GP","GYNAE","STD","BLOOD","DERMA"]})})),function(){r((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));D(e)}),[v]);var q,J=function(e,t){var n=new Date(t),a=n.getDay();S(new Date(n.getTime()-864e5*a)),O(n),j(n.getMonth()+1),g(n.getFullYear()),E("day"),F("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(K.a,{container:!0,spacing:1,children:Vb.map((function(e){var t;return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:(null===(t=c.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e.clinic})))>=0?{border:"1px solid ".concat(e.color),backgroundColor:"".concat(e.color),color:"#fff",fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"}:{border:"1px solid ".concat(e.color),color:"".concat(e.color),fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"},onClick:function(){return function(e){var t;(null===(t=c.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e})))>=0?r((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:t.selectedClinics.filter((function(t){return t!==e}))})})):r((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:[].concat(Object(Ct.a)(t.selectedClinics),[e])})}))}(e.clinic)},children:e.clinic})})}))})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(ct.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(X.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===I){1===b&&g(h-1);var t=1===b?12:b-1;j(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===I){var o=new Date(v.getTime()-6048e5);S(o),O(o),j(o.getMonth()+1),g(o.getFullYear())}else if("day"===I){var i=new Date(m.getTime()-864e5);O(i);var c=i.getDay();S(new Date(i.getTime()-864e5*c)),j(i.getMonth()+1),g(i.getFullYear())}},children:Object(a.jsx)($a.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(ct.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(X.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===I){12===b&&g(h+1);var t=12===b?1:b+1;j(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===I){var o=new Date(v.getTime()+6048e5);S(o),O(o),j(o.getMonth()+1),g(o.getFullYear())}else if("day"===I){var i=new Date(m.getTime()+864e5);O(i);var c=i.getDay();S(new Date(i.getTime()-864e5*c)),j(i.getMonth()+1),g(i.getFullYear())}},children:Object(a.jsx)(Za.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),j(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Kb[b-1]," ").concat(h)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),o="";return o=n.getMonth()===v.getMonth()?ln()(n,"d"):ln()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(v,"mmm d")," - ").concat(o,", ").concat(h)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(ln()(m,"mmmm d, yyyy"))," "]}):void 0}(I)}),"day"===I&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){Y(e.target.value),r((function(t){var n,a;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(ct.a,{title:"Clear",children:Object(a.jsx)(X.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(ut.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Da.a,{value:M,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),F(t))},"aria-label":"select view mode",children:[Object(a.jsx)(wa.a,{style:"month"===M?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(wa.a,{style:"week"===M?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(wa.a,{style:"day"===M?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(q=I,"month"===q?Object(a.jsx)(Lb,{dayClicked:J,month:b,year:h}):"week"===q?Object(a.jsx)(_b,{dayClicked:J,dates:w}):"day"===q?Object(a.jsx)(Yb,{date:m}):void 0)]})}var Jb=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:"#ff4f14",fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:"#d6733a",fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function $b(e){return Object(a.jsx)(Mt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(M.a,Object(T.a)({},e))})}function Qb(e){var t,n=Jb(),c=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;default:return n.DefaultLabel}},r=i.a.useState(25),d=Object(l.a)(r,2),s=(d[0],d[1],Object(o.useState)(!1)),b=Object(l.a)(s,2),j=b[0],u=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(rn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],N=Object(o.useState)(rn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(N,2),D=w[0],A=w[1],P=Object(o.useState)(!1),I=Object(l.a)(P,2),F=I[0],_=I[1],W=Object(o.useState)(!0),M=Object(l.a)(W,2),z=M[0],U=M[1],H=Object(o.useState)(!0),V=Object(l.a)(H,2),X=V[0],J=V[1],$=Object(o.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!0),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=Object(o.useState)(!0),re=Object(l.a)(ce,2),le=re[0],de=re[1],se=Object(o.useState)(!0),be=Object(l.a)(se,2),je=be[0],ue=be[1],pe=Object(o.useState)(!0),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=Object(o.useState)(!0),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=Object(o.useState)(!0),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Ne=Object(o.useState)(!0),Te=Object(l.a)(Ne,2),we=Te[0],De=Te[1];t=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return dt(t,e.value,e.getValue("clinic"))},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Type",align:"center",width:130,renderCell:function(e){return Object(a.jsx)("span",{className:c(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"fullname",headerName:"Fullname",width:200,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(hb.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:n.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:n.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:n.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:n.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:n.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:n.PositiveLabel,children:" POS "}):""}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(ct.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:n.RefLink,children:e.value})})}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Re=i.a.useContext(C),Le=Object(l.a)(Re,2),Ae=(Le[0],Le[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),Pe=Object(l.a)(Ae,2),Ie=Pe[0],Fe=Pe[1],_e=i.a.useState(null),We=Object(l.a)(_e,2),Me=(We[0],We[1]),Ee=i.a.useState(null),ze=Object(l.a)(Ee,2),Ue=ze[0],He=ze[1],Ge=i.a.useState(!1),Ye=Object(l.a)(Ge,2),Ve=Ye[0],Ke=Ye[1],qe=i.a.useState(!1),Xe=Object(l.a)(qe,2),Je=Xe[0],$e=Xe[1],Qe=Object(o.useState)(Ob[0]),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=i.a.useState(""),at=Object(l.a)(nt,2),ot=at[0],it=at[1],rt=(Object(o.useRef)(),function(){var e=sb.searchAllBookings;Fe({bookings:[],cachedBookings:[],isFetching:!0});e(ot).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});Fe({bookings:Object(Ct.a)(e.data),cachedBookings:Object(Ct.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))}),lt=function(){He(null),Ke(!1),$e(!1)},dt=function(e,t,n){var a=Ie.bookings.find((function(e){return e._id===t}));He(a),"Blood Result"===n?$e(!0):Ke(!0)},st=i.a.useState(1),bt=Object(l.a)(st,2),jt=bt[0],ut=bt[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=function(){!ot||ot.trim().length<3?ft(!0):rt()};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:gt,variant:"standard",value:ot,onChange:function(e){it(e.target.value),ft(!1)},id:"filter",label:"Patient's Name",helperText:"You can search the patients by name ".concat(gt?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{width:"250px"},onKeyPress:function(e){"Enter"===e.key&&xt()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:xt,children:"Search"})}),Object(a.jsx)(K.a,{item:!0,children:Ie.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(q.a,{color:"primary"})})})]})})}),Ie.isFetching&&Object(a.jsx)("div",{className:n.HideNowRows})]}),Ie.bookings&&Ie.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(St.a,{rows:Ie.bookings,columns:t,autoPageSize:!0,page:jt,onPageChange:function(e){ut(e.page)},onSelectionChange:function(e){e.length>0&&Me(e.rows[0])}})}),Object(a.jsx)(fb,{booking:Ue,open:Ve,onClose:lt}),Ie.bookings&&Ie.bookings.length>0&&Object(a.jsxs)(wt.a,{maxWidth:"lg",open:j,onClose:function(){tt(Ob[0]),_(!1),u(!1)},PaperComponent:$b,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Dt.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ln.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:An.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Rt.a,{})]}),Object(a.jsx)(Lt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(At.a,{checked:F,onChange:function(e){_(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"0px"},className:n.formControl,children:Object(a.jsx)(Nt.a,{labelId:"select-corporate",id:"select-corporate-id",value:et,onChange:function(e){tt(e.target.value)},children:Ob.map((function(e){return Object(a.jsx)(Tt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(In.a,{utils:Pn.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),A(rn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Un.a,{id:"test-table-xls-button",className:n.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:z,onChange:function(e){U(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){J(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){ie(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:je,onChange:function(e){ue(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:ge,onChange:function(e){fe(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ke(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:Se,onChange:function(e){Be(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(G.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:n.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("th",{className:n.th,children:"Date"}),X&&Object(a.jsx)("th",{className:n.th,children:"Forename"}),ee&&Object(a.jsx)("th",{className:n.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:n.th,children:"D.O.B"}),le&&Object(a.jsx)("th",{className:n.th,children:"Email"}),je&&Object(a.jsx)("th",{className:n.th,children:"Tel"}),ge&&Object(a.jsx)("th",{className:n.th,children:"Certificate"}),Oe&&Object(a.jsx)("th",{className:n.th,children:"AntiBodyTest"}),Se&&Object(a.jsx)("th",{className:n.th,children:"Lab No."}),we&&Object(a.jsx)("th",{className:n.th,children:"Price (\xa3) "})]}),Ie.bookings.filter((function(e){return F?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===et:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("td",{className:n.td,children:Object(hb.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:n.td,children:e.forenameCapital}),ee&&Object(a.jsx)("td",{className:n.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:n.th}),le&&Object(a.jsx)("td",{className:n.td,children:e.email}),je&&Object(a.jsx)("td",{className:n.td,children:e.phone}),ge&&Object(a.jsx)("td",{className:n.td,children:e.certificate?"YES":"NO"}),Oe&&Object(a.jsx)("td",{className:n.td,children:e.antiBodyTest?"YES":"NO"}),Se&&Object(a.jsx)("td",{className:n.td,children:e.extRef}),we&&Object(a.jsx)("td",{className:n.td,children:mb.a.calculatePrice(e)})]})}))]})})]})})]}),Object(a.jsx)(dd,{booking:Ue,open:Je,onClose:lt})]})}var Zb=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],ej=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],tj=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],nj=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],aj=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"bloodMatchedRecords",title:"Matched Results",icon:Object(a.jsx)(He.a,{})},{index:8,id:"bloodUnatchedRecords",title:"Unmatched Results",icon:Object(a.jsx)(we.a,{})},{index:9,id:"bloodArchived",title:"Archived Results",icon:Object(a.jsx)(ze.a,{})},{index:10,id:"bloodSent",title:"Sent Results",icon:Object(a.jsx)(Ye.a,{})},{index:11,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:12,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:13,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],oj=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:5,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:6,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:7,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Ne.a,{})},{index:8,id:"positiveBookings",title:"Positive Results",icon:Object(a.jsx)(Re.a,{})},{index:9,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ie.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:11,id:"trBookings",title:"TR Bookings",icon:Object(a.jsx)(Me.a,{})},{index:12,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(we.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:15,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:16,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],ij=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Ae.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)(Ke.a,{})}],cj=[{index:0,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:1,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ie.a,{})},{index:2,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(we.a,{})},{index:3,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(_e.a,{})}],rj=function(e,t){if("pcr"===e)switch(t){case 0:return Object(a.jsx)(Sa,{});case 1:return Object(a.jsx)(Vn,{date:"recent"});case 2:return Object(a.jsx)(Vn,{date:"today"});case 3:return Object(a.jsx)(Vn,{date:"live"});case 4:return Object(a.jsx)(Vn,{date:"old"});case 5:return Object(a.jsx)(Vn,{date:"future"});case 6:return Object(a.jsx)(Vn,{date:"all"});case 7:return Object(a.jsx)(Vn,{date:"completed"});case 8:return Object(a.jsx)(Vn,{date:"positive"});case 9:return Object(a.jsx)(Vn,{date:"late"});case 10:return Object(a.jsx)(Vn,{date:"deleted"});case 11:return Object(a.jsx)(Vn,{date:"tr"});case 12:return Object(a.jsx)(Ma,{});case 13:return Object(a.jsx)(uo,{});case 15:return Object(a.jsx)(kt,{});case 16:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else if("pcrlab"===e)switch(t){case 0:return Object(a.jsx)(Vn,{date:"live"});case 1:return Object(a.jsx)(Vn,{date:"late"});case 2:return Object(a.jsx)(Ma,{});case 3:return Object(a.jsx)(uo,{});default:return"Page Not Found!"}else if("gynae"===e)switch(t){case 0:return Object(a.jsx)(Yo,{});case 1:return Object(a.jsx)(Lo,{date:"recent"});case 2:return Object(a.jsx)(Lo,{date:"today"});case 3:return Object(a.jsx)(Lo,{date:"old"});case 4:return Object(a.jsx)(Lo,{date:"future"});case 5:return Object(a.jsx)(Lo,{date:"all"});case 6:return Object(a.jsx)(Lo,{date:"deleted"});case 7:return Object(a.jsx)(Si,{});case 8:return Object(a.jsx)($o,{});case 9:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else if("gp"===e)switch(t){case 0:return Object(a.jsx)(ac,{});case 1:return Object(a.jsx)(Gi,{date:"recent"});case 2:return Object(a.jsx)(Gi,{date:"today"});case 3:return Object(a.jsx)(Gi,{date:"old"});case 4:return Object(a.jsx)(Gi,{date:"future"});case 5:return Object(a.jsx)(Gi,{date:"all"});case 6:return Object(a.jsx)(Gi,{date:"deleted"});case 7:return Object(a.jsx)(Ac,{});case 8:return Object(a.jsx)(dc,{});case 9:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else if("std"===e)switch(t){case 0:return Object(a.jsx)(br,{});case 1:return Object(a.jsx)(Qc,{date:"recent"});case 2:return Object(a.jsx)(Qc,{date:"today"});case 3:return Object(a.jsx)(Qc,{date:"old"});case 4:return Object(a.jsx)(Qc,{date:"future"});case 5:return Object(a.jsx)(Qc,{date:"all"});case 6:return Object(a.jsx)(Qc,{date:"deleted"});case 7:return Object(a.jsx)(Gr,{});case 8:return Object(a.jsx)(fr,{});case 9:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else if("blood"===e)switch(t){case 0:return Object(a.jsx)(kl,{});case 1:return Object(a.jsx)(dl,{date:"recent"});case 2:return Object(a.jsx)(dl,{date:"today"});case 3:return Object(a.jsx)(dl,{date:"old"});case 4:return Object(a.jsx)(dl,{date:"future"});case 5:return Object(a.jsx)(dl,{date:"all"});case 6:return Object(a.jsx)(dl,{date:"deleted"});case 7:return Object(a.jsx)(yd,{});case 8:return Object(a.jsx)(hd,{});case 9:return Object(a.jsx)(Nd,{});case 10:return Object(a.jsx)(Ld,{});case 11:return Object(a.jsx)(nd,{});case 12:return Object(a.jsx)(Tl,{});case 13:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else if("admin"===e)switch(t){case 0:return Object(a.jsx)(lb,{});case 1:return Object(a.jsx)(Cb,{date:"recent"});case 2:return Object(a.jsx)(Cb,{date:"today"});case 3:return Object(a.jsx)(Cb,{date:"old"});case 4:return Object(a.jsx)(Cb,{date:"future"});case 5:return Object(a.jsx)(Cb,{date:"all"});case 6:return Object(a.jsx)(Cb,{date:"deleted"});case 7:return Object(a.jsx)(Xb,{});case 8:return Object(a.jsx)(pb,{});case 9:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}else{if("derma"!==e)return"Page Not Found!";switch(t){case 0:return Object(a.jsx)(ss,{});case 1:return Object(a.jsx)($d,{date:"recent"});case 2:return Object(a.jsx)($d,{date:"today"});case 3:return Object(a.jsx)($d,{date:"old"});case 4:return Object(a.jsx)($d,{date:"future"});case 5:return Object(a.jsx)($d,{date:"all"});case 6:return Object(a.jsx)($d,{date:"deleted"});case 7:return Object(a.jsx)(zs,{});case 8:return Object(a.jsx)(gs,{});case 9:return Object(a.jsx)(Qb,{});default:return"Page Not Found!"}}},lj=function(e){switch(e){case"admin":return Zb;case"pcr":return oj;case"pcrlab":return cj;case"gynae":return ej;case"gp":return tj;case"std":return nj;case"blood":return aj;case"derma":return ij;default:return[]}},dj=function(e,t){for(var n=lj(e),a=0;a<n.length;a++)if(n[a].index===t)return n[a].id;return"Page Not Found!"},sj=function(e,t){for(var n=lj(e),a=0;a<n.length;a++)if(n[a].id===t)return n[a].index;return-1},bj=n(280),jj=Object(w.a)((function(e){return{root:{minHeight:"100vh"},image:{backgroundImage:"url(/images/bg.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{padding:e.spacing(4,4),display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"#f5f5f5"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},alert:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},pageBg:{paddingTop:e.spacing(15),background:"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)",height:"100vh",margin:0,padding:0},appbarCenter:{position:"absolute",top:"-40px",right:"0",marginLeft:"-145px",alignItems:"center",justify:"center",display:"flex",backgroundColor:"#fff",padding:"5px 20px 15px 20px",borderRadius:"8px"},logoImage:{width:"30px",height:"30px",marginLeft:"0px"},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},adminPanelLabel:{color:e.palette.primary.main,marginBottom:"20px"}}}));function uj(){var e=jj(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1]),c=(Object(bj.useMediaQuery)({maxWidth:1224}),Object(te.d)()),r=i.a.useState(""),d=Object(l.a)(r,2),b=d[0],j=d[1],u=i.a.useState(""),p=Object(l.a)(u,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],S=k[1],B=i.a.useState(null),N=Object(l.a)(B,2),w=N[0],P=N[1],Z=i.a.useState(!1),ne=Object(l.a)(Z,2),ae=ne[0],oe=ne[1],ie=function(){oe(!0),de.signIn({username:h,password:b}).then((function(e){if(oe(!1),"OK"===e.data.status){P(null);var t=e.data.token;m?localStorage.setItem("medexadmin-auth-token",t):sessionStorage.setItem("medexadmin-auth-token",t),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0})})),ob(e.data.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:0})})),c.push(re("/".concat(dj(e.data.roles[0],0))))}else"FAILED"===e.data.status?P(e.data.error):P("Sorry, something went wrong, please try again.")})).catch((function(e){oe(!1),console.error(e),P("Sorry, something went wrong, please try again.")}))};return Object(a.jsx)("div",{className:e.pageBg,children:Object(a.jsxs)(_.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(M.a,{elevation:20,children:Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsxs)("div",{className:e.appbarCenter,children:[Object(a.jsx)("span",{className:e.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:e.logoImage,src:re("/images/logo.png"),alt:"logo image"})]}),Object(a.jsx)(D.a,{className:e.avatar,children:Object(a.jsx)(I.a,{})}),Object(a.jsx)(F.a,{component:"h1",variant:"h6",className:e.adminPanelLabel,children:"Admin Panel"}),w&&Object(a.jsx)("div",{className:e.alert,children:Object(a.jsxs)(W.a,{severity:"error",children:[" ",Object(a.jsx)("div",{style:{lineHeight:"1.5rem",textAlign:"justify"},children:w})]})}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"email",autoComplete:"username",value:h,onChange:function(e){g(e.target.value),P(null)},on:!0,autoFocus:!0}),Object(a.jsxs)(E.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ie()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(U.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:v?"text":"password",value:b,onChange:function(e){j(e.target.value),P(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(X.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){S(!v)},onMouseDown:function(e){e.preventDefault()},children:v?Object(a.jsx)(J.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]}),Object(a.jsx)(G.a,{style:{textAlign:"left",width:"100%"},control:Object(a.jsx)(Y.a,{value:"remember",color:"secondary",checked:m,onChange:function(e){O(e.target.checked)}}),label:"Remember me"}),Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ie,className:e.submit,children:"Sign In"})]})}),Object(a.jsx)(V.a,{className:e.backdrop,open:ae,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(q.a,{color:"inherit"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{textAlign:"center",color:"#fff"},children:" "})})]})}),Object(a.jsx)(A.a,{mt:5,style:{color:"#eee"},children:Object(a.jsx)(ee,{})})]})})}var pj=n(757),hj=n(756),gj=n(735),fj=n(428),xj=n.n(fj),mj=n(430),Oj=n.n(mj),yj=n(681),kj=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},icon:{fontSize:"1rem",color:"#777",cursor:"pointer",paddingTop:"10px",paddingBottom:"8px",borderBottom:"1px solid #eee"},iconSelected:{color:"#fff",backgroundColor:e.palette.primary.main,transition:"all 0.1s ease-in-out"},menuText:{fontSize:"1rem",fontWeight:"500"},Badge:{backgroundColor:"rgb(220, 0, 78)",color:"#fff",fontWeight:"600",textAlign:"center",borderRadius:"50%",fontSize:"0.85rem",lineHeight:"0.85rem",padding:"7px",marginTop:"9px",width:"28px"}}}));function vj(){var e=kj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],d=i.a.useState(0),s=Object(l.a)(d,2),b=s[0],j=s[1],u=Object(te.d)(),p=function(){var e=Object(N.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ho.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&r((function(e){return Object(T.a)(Object(T.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){j(c.currentMenuIndex),p()}),[c.currentMenuIndex]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(yj.a,{children:c.role&&lj(c.role).map((function(t){return!t.hidden&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:Object(Q.a)(e.icon,b===t.index&&e.iconSelected),onClick:function(e){return n=t.index,j(n),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:n})})),void u.push(re("/".concat(dj(c.role,n))));var n},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,style:{paddingLeft:"15px"},children:[Object(a.jsx)(K.a,{item:!0,children:t.icon}),Object(a.jsxs)(K.a,{item:!0,style:{textAlign:"left"},children:[Object(a.jsx)("span",{className:e.menuText,children:"".concat(t.title)})," "]}),"gynae"===c.role&&"deletedBookings"===t.id&&c.shouldRefunsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.shouldRefunsCount," "]})]})},"".concat(t.id))},"".concat(t.id))}))})})}var Cj=n(324),Sj=n.n(Cj),Bj=n(429),Nj=n.n(Bj),Tj=n(399),wj=Object(O.a)((function(e){return{paper:{marginTop:"10px",width:"270px",height:"240px",border:"1px solid #ddd",borderRadius:"10px",paddingTop:"10px"}}}))((function(e){return Object(a.jsx)(Tj.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Dj=Object(O.a)((function(e){return{paper:{marginTop:"5px",width:"280px",height:"340px",border:"1px solid #ddd",borderRadius:"10px",padding:"10px"}}}))((function(e){return Object(a.jsx)(Tj.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Rj=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(T.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:Object(j.a)({position:"relative",whiteSpace:"nowrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{opacity:.9}),drawerPaperClose:Object(j.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},appbarCenter:{position:"fixed",width:"260px",top:"10px",left:"50%",marginLeft:"-130px",alignItems:"center",justify:"center",display:"flex"},logoImage:{width:"36px",height:"36px",marginLeft:"0px"},userAvatar:{backgroundColor:"#fff",borderColor:"#aaa",border:"1px solid",color:"#aaa",cursor:"pointer"},userAvatarSelected:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,cursor:"pointer"},userAvatarBig:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,width:"60px",height:"60px"},appBarText:Object(j.a)({color:"#888"},e.breakpoints.down("sm"),{display:"none"}),appBarAppsIcon:{cursor:"pointer",fontSize:"1.8rem"},appBarAppsIconSelected:{cursor:"pointer",fontSize:"1.8rem",color:e.palette.primary.main},usernameLabel:{fontSize:"1.2rem",color:e.palette.primary.main,marginTop:"5px",marginBottom:"5px"},lastLoginLabel:{color:"#777",paddingTop:"5px"},appsLogo:{width:"70px",height:"70px"},appsBox:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid #fff",borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.main),transition:"all 0.1s ease-in-out"}},appsBoxSelected:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid".concat(e.palette.primary.light),borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.light),transition:"all 0.1s ease-in-out"}},appsAdminLabel:{color:"#0264d4",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGPLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsSTDLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsBloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsDermaLabel:{color:"#323e9a",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsInToolbar:{position:"fixed",left:"60px",top:"-5px",height:"65px",width:"200px",overflow:"hidden"}}}));function Lj(){var e,t,n,c=Rj(),r=i.a.useContext(C),d=Object(l.a)(r,2),b=d[0],j=d[1],u=Object(bj.useMediaQuery)({maxWidth:768}),p=i.a.useState(!u),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(0),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=v[0],B=v[1],N=i.a.useState(null),w=Object(l.a)(N,2),L=w[0],A=w[1],P=function(){A(null)},I=Object(te.d)(),F=Object(te.e)();i.a.useEffect((function(){if(b.role){var e=sj(b.role,function(e){try{var t=e.split("/");return t&&t.length>0?t[t.length-1].length>0?t[t.length-1]:t[t.length-2]:""}catch(n){return""}}(F.pathname));j((function(t){return Object(T.a)(Object(T.a)({},t),{},{currentMenuIndex:e})}))}}),[F]),Object(o.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(o.useEffect)((function(){y(b.currentMenuIndex),u&&f(!1)}),[b.currentMenuIndex]);Object(Q.a)(c.paper,c.fixedHeight);var W=function(e){ob(e),j((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),I.push(re("/".concat(dj(e,0)))),P()},M=function(e){switch(e){case"admin":return Object(a.jsx)("img",{src:re("/images/admin.png"),className:c.appsLogo});case"pcr":return Object(a.jsx)("img",{src:re("/images/corona.png"),className:c.appsLogo});case"gynae":return Object(a.jsx)("img",{src:re("/images/woman.png"),className:c.appsLogo});case"gp":return Object(a.jsx)("img",{src:re("/images/doctor.png"),className:c.appsLogo});case"std":return Object(a.jsx)("img",{src:re("/images/std-icon.png"),className:c.appsLogo});case"blood":return Object(a.jsx)("img",{src:re("/images/blood-logo.png"),className:c.appsLogo});case"derma":return Object(a.jsx)("img",{src:re("/images/derma-logo.png"),className:c.appsLogo});default:return null}},E=function(e){switch(e){case"admin":return Object(a.jsxs)("div",{className:c.appsAdminLabel,children:[" ","Admin"," "]});case"pcr":return Object(a.jsxs)("div",{className:c.appsPCRLabel,children:[" ","PCR"," "]});case"gynae":return Object(a.jsxs)("div",{className:c.appsGynaeLabel,children:[" ","Gynae"," "]});case"gp":return Object(a.jsxs)("div",{className:c.appsGPLabel,children:[" ","GP"," "]});case"std":return Object(a.jsxs)("div",{className:c.appsSTDLabel,children:[" ","STD"," "]});case"blood":return Object(a.jsxs)("div",{className:c.appsBloodLabel,children:[" ","Blood"," "]});case"derma":return Object(a.jsxs)("div",{className:c.appsDermaLabel,children:[" ","Dermatology"," "]});default:return null}};return Object(a.jsx)(i.a.Fragment,{children:b.userId&&b.role&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(hj.a,{style:{backgroundColor:"#fff",color:"#555",height:"60px"},position:"absolute",className:Object(Q.a)(c.appBar,!1),children:Object(a.jsxs)(gj.a,{className:c.toolbar,children:[Object(a.jsx)(X.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!g)},className:Object(Q.a)(c.menuButton),children:Object(a.jsx)(xj.a,{})}),Object(a.jsx)("div",{className:c.appsInToolbar,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:M(b.role)}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"8px"},children:E(b.role)})})]})}),Object(a.jsx)("div",{className:c.appbarCenter,children:!u&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("span",{className:c.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image"})]})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",paddingLeft:"2%"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row-reverse",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:S?c.userAvatarSelected:c.userAvatar,onClick:function(e){B(e.currentTarget)},children:Object(a.jsx)(X.a,{children:Object(a.jsx)(Sj.a,{})})})}),(null===(e=b.userId)||void 0===e?void 0:e.roles.find((function(e){return"admin"===e})))&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(X.a,{onClick:function(e){A(e.currentTarget)},children:Object(a.jsx)(Nj.a,{className:L?c.appBarAppsIconSelected:c.appBarAppsIcon})})})]})})]})}),Object(a.jsx)(wj,{id:"user-avatar-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:function(){B(null)},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:c.userAvatarBig,children:Object(a.jsx)(Sj.a,{style:{fontSize:"2.5rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{className:c.usernameLabel,children:[" ",null===(t=b.userId)||void 0===t?void 0:t.username," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"#999",fontSize:"0.85rem"},children:"Logged in at :"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:c.lastLoginLabel,children:ln()(null===(n=b.userId)||void 0===n?void 0:n.lastLoginTimeStamp)})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){localStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-role"),j((function(e){return{signedIn:!1}})),I.replace("./login")},variant:"outlined",color:"secondary",style:{marginTop:"30px",width:"150px",borderRadius:"30px"},children:"Logout"})})]})}),Object(a.jsx)(Dj,{id:"apps-menu",anchorEl:L,keepMounted:!0,open:Boolean(L),onClose:P,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"admin"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("admin")},children:[Object(a.jsx)(K.a,{item:!0,children:M("admin")}),Object(a.jsx)(K.a,{item:!0,children:E("admin")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"pcr"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("pcr")},children:[Object(a.jsx)(K.a,{item:!0,children:M("pcr")}),Object(a.jsx)(K.a,{item:!0,children:E("pcr")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gynae"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("gynae")},children:[Object(a.jsx)(K.a,{item:!0,children:M("gynae")}),Object(a.jsx)(K.a,{item:!0,children:E("gynae")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gp"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("gp")},children:[Object(a.jsx)(K.a,{item:!0,children:M("gp")}),Object(a.jsx)(K.a,{item:!0,children:E("gp")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"std"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("std")},children:[Object(a.jsx)(K.a,{item:!0,children:M("std")}),Object(a.jsx)(K.a,{item:!0,children:E("std")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"blood"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("blood")},children:[Object(a.jsx)(K.a,{item:!0,children:M("blood")}),Object(a.jsx)(K.a,{item:!0,children:E("blood")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"derma"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return W("derma")},children:[Object(a.jsx)(K.a,{item:!0,children:M("derma")}),Object(a.jsx)(K.a,{item:!0,children:E("derma")})]})})]})}),Object(a.jsxs)(pj.a,{variant:u?"temporary":"persistent",classes:{paper:Object(Q.a)(c.drawerPaper,!g&&c.drawerPaperClose)},open:g,children:[Object(a.jsxs)("div",{className:c.toolbarIcon,children:[Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image",style:{marginRight:"10px"}}),Object(a.jsx)("span",{className:c.appbarTitle,children:Object(a.jsx)("span",{style:{fontSize:"0.9rem"},children:"Medical Express"})})]}),Object(a.jsx)(X.a,{onClick:function(){f(!1)},children:Object(a.jsx)(Oj.a,{})})]}),Object(a.jsx)(Rt.a,{}),Object(a.jsx)(vj,{})]}),Object(a.jsxs)("main",{className:c.content,children:[Object(a.jsx)("div",{className:c.appBarSpacer}),Object(a.jsx)(_.a,{maxWidth:u?"xs":"xl",className:c.container,children:rj(b.role,O)})]})]})})})}function Aj(e){return Pj.apply(this,arguments)}function Pj(){return(Pj=Object(N.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.checkToken({token:t});case 3:if("OK"!==(n=e.sent).data.status){e.next=8;break}return e.abrupt("return",{username:n.data.userId,forename:n.data.forename,surname:n.data.surname,roles:n.data.roles,lastLoginTimeStamp:n.data.lastLoginTimeStamp});case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Ij=Object(w.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function Fj(){Ij();var e=i.a.useContext(C),t=Object(l.a)(e,2),n=t[0],o=t[1],c=i.a.useState(!1),r=Object(l.a)(c,2),d=r[0],b=r[1],j=Object(te.d)(),u=Object(te.e)();i.a.useEffect((function(){(function(){var e=Object(N.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("medexadmin-auth-token")||sessionStorage.getItem("medexadmin-auth-token"),de.setToken(t),t){e.next=8;break}o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),b(!0),j.push(re("/login")),e.next=13;break;case 8:return e.next=10,Aj(t);case 10:(n=e.sent)?u.pathname===re("/")||u.pathname===re("/#")||u.pathname.startsWith(re("/login"))?(ab()||ob(n.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,signedUp:!1,forgotPassword:!1,userId:n,role:ab()})})),j.push(re("/".concat(dj(ab(),0))))):(ab()||ob(n.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,userId:n,role:ab()})}))):(o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),j.push(re("/login"))),b(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u.pathname]);return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(s.a,{}),d&&(n.signedIn?Object(a.jsx)(Lj,{}):Object(a.jsx)(uj,{}))]})}!function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");k?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):v(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):v(t,e)}))}}();var _j=function(){var e=i.a.useState({currentMenuIndex:0}),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(a.jsx)(C.Provider,{value:[n,o],children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(d.a,{theme:m,children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(y,{}),Object(a.jsx)(Fj,{})]})})})};r.a.render(Object(a.jsx)(_j,{}),document.getElementById("root"))}},[[677,1,2]]]);
//# sourceMappingURL=main.cfe6529c.chunk.js.map