(this["webpackJsonpmedex-booking-admin"]=this["webpackJsonpmedex-booking-admin"]||[]).push([[0],{1024:function(e,t){},1026:function(e,t){},1027:function(e,t){},1032:function(e,t){},1034:function(e,t){},1053:function(e,t){},1065:function(e,t){},1068:function(e,t){},112:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},1196:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n.n(o),c=n(60),r=n.n(c),l=n(2),s=n(1286),d=n(1257),b=n(214),u=n(84),j=n(683),p=n(1297),h=n(640),g="rgb(36, 40, 44)",f="rgba(0, 0, 0, 0.13)",x=Object(j.a)({palette:{primary:{main:"#00a1c5",light:"#5bd5f0"},secondary:{main:"#f68529",contrastText:"#fff"},common:{black:"#212121",darkBlack:g},tonalOffset:.2,background:{default:"#f9f9f9"},spacing:8},breakpoints:{values:{xl:1920,lg:1280,md:960,sm:600,xs:0}},border:{borderColor:f,borderWidth:2},overrides:{MuiExpansionPanel:{root:{position:"static"}},MuiTableCell:{root:Object(u.a)({paddingLeft:16,paddingRight:16,borderBottom:"".concat(2,"px solid ").concat(f)},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})},MuiDivider:{root:{backgroundColor:f,height:2}},MuiPrivateNotchedOutline:{root:{borderWidth:2}},MuiListItem:{divider:{borderBottom:"".concat(2,"px solid ").concat(f)}},MuiDialog:{paper:{width:"100%",maxWidth:430,marginLeft:8,marginRight:8}},MuiTooltip:{tooltip:{backgroundColor:g,fontSize:"0.7rem"}},MuiExpansionPanelDetails:{root:Object(u.a)({},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})}}},h.enGB),m=Object(p.a)(x),O=n(15);var y=Object(O.a)((function(e){var t,n,a,o,i;return{"@global":{"*:focus":{outline:0},".text-white":{color:e.palette.common.white},".listItemLeftPadding":(t={paddingTop:"".concat(e.spacing(1.75),"px !important"),paddingBottom:"".concat(e.spacing(1.75),"px !important"),paddingLeft:"".concat(e.spacing(4),"px !important")},Object(u.a)(t,e.breakpoints.down("sm"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),Object(u.a)(t,"@media (max-width:  420px)",{paddingLeft:"".concat(e.spacing(1),"px !important")}),t),".container":(n={width:"100%",paddingRight:e.spacing(4),paddingLeft:e.spacing(4),marginRight:"auto",marginLeft:"auto"},Object(u.a)(n,e.breakpoints.up("sm"),{maxWidth:540}),Object(u.a)(n,e.breakpoints.up("md"),{maxWidth:720}),Object(u.a)(n,e.breakpoints.up("lg"),{maxWidth:1170}),n),".row":{display:"flex",flexWrap:"wrap",marginRight:-e.spacing(2),marginLeft:-e.spacing(2)},".container-fluid":{width:"100%",paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginRight:"auto",marginLeft:"auto",maxWidth:1370},".lg-mg-top":(a={marginTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(a,e.breakpoints.down("md"),{marginTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(a,e.breakpoints.down("sm"),{marginTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(a,e.breakpoints.down("xs"),{marginTop:"".concat(e.spacing(14),"px !important")}),a),".lg-mg-bottom":(o={marginBottom:"".concat(e.spacing(20),"px !important")},Object(u.a)(o,e.breakpoints.down("md"),{marginBottom:"".concat(e.spacing(18),"px !important")}),Object(u.a)(o,e.breakpoints.down("sm"),{marginBottom:"".concat(e.spacing(16),"px !important")}),Object(u.a)(o,e.breakpoints.down("xs"),{marginBottom:"".concat(e.spacing(14),"px !important")}),o),".lg-p-top":(i={paddingTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(i,e.breakpoints.down("md"),{paddingTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(i,e.breakpoints.down("sm"),{paddingTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(i,e.breakpoints.down("xs"),{paddingTop:"".concat(e.spacing(14),"px !important")}),i)}}}),{withTheme:!0})((function(){return null})),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=i.a.createContext([{},function(){}]),S=n(5),B=n.n(S),T=n(9),N=n(3),w=n(318),D=n(1301),R=n(280),L=n(695),P=n(1287),A=n(676),I=n.n(A),_=n(317),F=n(1284),E=n(1292),W=n(279),M=n(319),z=n(480),G=n(1298),H=n(1266),U=n(1202),Y=n(694),V=n(692),K=n(1252),q=n(1204),J=n(227),X=n(1278),$=n(1279),Q=n(8),Z=n(1251);function ee(){return Object(a.jsxs)(_.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Z.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var te=n(99),ne=n(25),ae=n(49),oe=n.n(ae),ie="Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=",ce="https://www.travelpcrtest.com/";function re(e){return"/medicalexpressclinic/admin"+e}var le=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),se=function e(){Object(ne.a)(this,e)};se.setToken=function(e){se.token=e},se.signIn=function(e){return le.post("/api/medex/user/signin",e)},se.checkToken=function(e){return le.post("/api/medex/user/checktoken",e)};var de=n(177),be=n.n(de),ue=n(66),je=n.n(ue),pe=n(39),he=n.n(pe),ge=n(64),fe=n.n(ge),xe=n(67),me=n.n(xe),Oe=n(26),ye=n.n(Oe),ke=n(65),ve=n.n(ke),Ce=n(74),Se=n.n(Ce),Be=n(77),Te=n.n(Be),Ne=n(183),we=n.n(Ne),De=n(87),Re=n.n(De),Le=n(23),Pe=n.n(Le),Ae=n(62),Ie=n.n(Ae),_e=n(89),Fe=n.n(_e),Ee=n(674),We=n.n(Ee),Me=n(675),ze=n.n(Me),Ge=n(303),He=n.n(Ge),Ue=n(379),Ye=n.n(Ue),Ve=n(380),Ke=n.n(Ve),qe=n(127),Je=n.n(qe),Xe=n(159),$e=n.n(Xe),Qe=n(245),Ze=n.n(Qe),et=n(114),tt=n.n(et),nt=n(381),at=n.n(nt),ot=n(378),it=n.n(ot),ct=n(76),rt=n.n(ct),lt=n(31),st=n(116),dt=n.n(st),bt=oe.a.create({baseURL:ce,headers:{Authorization:ie}}),ut=n(132),jt=n.n(ut),pt=function e(){Object(ne.a)(this,e)};pt.payBooking=function(e,t,n){return bt.post("/api/book/paybooking?id=".concat(e,"&paymentmethod=").concat(t,"&corporate=").concat(n))},pt.unPayBooking=function(e){return bt.post("/api/book/unpaybooking?id=".concat(e))},pt.getTestsTimeReport=function(){return jt()(bt,{retries:3,retryDelay:function(e){return 1e3*e}}),bt.get("/api/book/getteststimereport")},pt.getTestsTimeReportLast7=function(){return jt()(bt,{retries:3,retryDelay:function(e){return 1e3*e}}),bt.get("/api/book/getteststimereportlast7")},pt.getTestsTimeReportLast30=function(){return jt()(bt,{retries:3,retryDelay:function(e){return 1e3*e}}),bt.get("/api/book/getteststimereportlast30")},pt.getBookingsStatsByDateStr=function(e){return bt.get("/api/book/getbookingsstatsbydatestr?date=".concat(e))},pt.getBookingsCountByDateStr=function(e){return bt.get("/api/book/getbookingscountbydatestr?date=".concat(e))},pt.getAllBookingsCountAll=function(){return bt.get("/api/book/getallbookingscountall")},pt.getBookingsCountByDateStrandTime=function(e,t,n){return bt.get("/api/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},pt.getBookingsByDateStrandTime=function(e,t){return bt.get("/api/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},pt.getAllBookingsCountByDateStr=function(e){return bt.get("/api/book/getallbookingscountbydatestr?date=".concat(e))},pt.getAllBookingsCountByDateStrandTime=function(e,t,n){return bt.get("/api/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},pt.getAllBookingsByDateStrandTime=function(e,t){return bt.get("/api/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},pt.changeBackToBookingMade=function(e){return bt.post("/api/book/changebacktobookingmade?id=".concat(e))},pt.resendEmailsWithBookingId=function(e){return bt.post("/api/book/resendemailswithbookingid?id=".concat(e))},pt.regenerateFilesWithBookingId=function(e){return bt.post("/api/book/regeneratefileswithbookingid?id=".concat(e))},pt.resendEmails=function(e){return bt.post("/api/book/resendemails?id=".concat(e))},pt.regenerateFiles=function(e){return bt.post("/api/book/regeneratefiles?id=".concat(e))},pt.matchRecords=function(e,t){return bt.post("/api/book/matchrecords?bookingid=".concat(e,"&linkid=").concat(t))},pt.findBestMatches=function(e){return bt.get("/api/book/getbestmatchedbookings?id=".concat(e))},pt.getLinkDetails=function(e){return bt.get("/api/book/getlinkdetails?id=".concat(e))},pt.getLinkDetailsWithBookingId=function(e){return bt.get("/api/book/getlinkdetailswithbookingid?id=".concat(e))},pt.findBookingByRefBirthDate=function(e,t){return bt.get("/api/book/getbookingsbyrefandbirthdate?ref=".concat(e,"&birthdate=").concat(t))},pt.updateBooking=function(e){return bt.post("/api/book/updatebookappointment",e)},pt.updateBookingTime=function(e){return bt.post("/api/book/updatebookappointmenttime",e)},pt.deleteBooking=function(e){return bt.post("/api/book/deletebookappointment?id=".concat(e))},pt.unDeleteBooking=function(e){return bt.post("/api/book/undeletebookappointment?id=".concat(e))},pt.getBookingsByRef=function(e){return bt.get("/api/book/getbookingsbyref?ref=".concat(e))},pt.getBookingById=function(e){return bt.get("/api/book/getbookingbyid?id=".concat(e))},pt.getAllBookings=function(e){return e||(e=25),bt.get("/api/book/getallbookings?limit=".concat(e))},pt.getAllTRBookings=function(e){return e||(e=25),bt.get("/api/book/getalltrbookings?limit=".concat(e))},pt.getLateBookings=function(){return bt.get("/api/book/getlatebookings")},pt.getDeletedBookings=function(e){return e||(e=25),bt.get("/api/book/getdeletedbookings?limit=".concat(e))},pt.getLiveBookings=function(){return bt.get("/api/book/getlivebookings")},pt.getCompletedBookings=function(e){return e||(e=25),bt.get("/api/book/getcompletedbookings?limit=".concat(e))},pt.getPositiveBookings=function(){return bt.get("/api/book/getpositivebookings")},pt.getTodayBookings=function(){return bt.get("/api/book/gettodaybookings")},pt.getOldBookings=function(e){return e||(e=25),bt.get("/api/book/getoldbookings?limit=".concat(e))},pt.getFutureBookings=function(e){return e||(e=25),bt.get("/api/book/getfuturebookings?limit=".concat(e))},pt.getRecentBookings=function(){return bt.get("/api/book/getrecentbookings")},pt.getRecentBookingsAll=function(e){return e||(e=25),bt.get("/api/book/getrecentbookingsall?limit=".concat(e))},pt.getUnmatchedRecords=function(){return bt.get("/api/book/getunmatchedrecords")},pt.getUnmatchedRecordsArchived=function(){return bt.get("/api/book/getunmatchedrecordsarchived")},pt.archiveRecord=function(e){return bt.post("/api/book/archiverecord?id=".concat(e))},pt.unArchiveRecord=function(e){return bt.post("/api/book/unarchiverecord?id=".concat(e))};var ht=n(1296),gt=n(1254),ft=n(1253),xt=n(135),mt=n.n(xt),Ot=n(474),yt=function e(){Object(ne.a)(this,e)};yt.downloadCovidForm1=function(e){return bt.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},yt.downloadCovidForm2=function(e){return bt.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},yt.downloadPdfResult=function(e){return bt.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},yt.downloadPdfCert=function(e){return bt.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},yt.downloadPdfLabReport=function(e){return bt.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var kt=n(222),vt=n.n(kt),Ct=n(40),St=n.n(Ct),Bt=n(22),Tt=n.n(Bt),Nt=n(68),wt=n(45),Dt=n.n(wt),Rt=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Lt(){var e=Rt(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],V=G[1],q=i.a.useState(""),J=Object(l.a)(q,2),X=J[0],$=J[1],Q=i.a.useState(""),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(""),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(""),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(""),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=i.a.useState(""),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(!1),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=function(e){$(e.target.value),V(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ct=function(e){te(e.target.value),V(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},rt=function(e){ie(e.target.value)},lt=function(e){se(e.target.value)},st=function(e){je(e.target.value)},dt=function(e){fe(e.target.value)},bt=function(e){ye(e.target.value)},ut=function(e){Se(e.target.value),V(Object(N.a)(Object(N.a)({},H),{},{dobError:!1}))},jt=function(e){we(e.target.value)},xt=function(e){Ae(e.target.value)},vt=function(e){Ee(e.target.value)},Ct=function(e){Ve(e.target.value)},Bt=function(e){Xe(e.target.value)},wt=function(e){et(e.target.checked)},Lt=function(e){ot(e.target.checked)},Pt=function(e,t){if(e)je(t.forenameCapital),fe(t.surnameCapital),$(Object(Nt.FormatDateFromString)(t.bookingDate)),te(t.bookingTime.toUpperCase()),ie(t.gender.toUpperCase()),se(t.title.toUpperCase()),ye(t.email.toUpperCase()),Se(Object(Nt.FormatDateFromString)(t.birthDate)),we(t.phone.toUpperCase()),Ae(t.postCode.toUpperCase()),Ee(t.address.toUpperCase()),t.notes&&Ge(t.notes.toUpperCase()),t.passportNumber&&Ve(t.passportNumber.toUpperCase()),t.passportNumber2&&Xe(t.passportNumber2.toUpperCase()),et(t.certificate),ot(t.antiBodyTest),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=Ze,n.antiBodyTest=at,n.gender=oe,n.title=le,n.birthDate=Object(Nt.RevertFormatDateFromString)(Ce),n.email=Oe,n.phone=Ne,n.postCode=Le,n.address=Fe,n.passportNumber=Ye,n.passportNumber2=Je,n.forename=ue,n.surname=ge,n.notes=ze,n.bookingDate=Object(Nt.RevertFormatDateFromString)(X),n.bookingTime=ee,n.bookingRef=t.bookingRef,It(n)&&_t({bookingId:a,person:n})}}else h({edit:e,person:t})},At=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},It=function(e){var t=!1;return At(e.bookingDate)||(t=!0,V(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),At(e.birthDate)||(t=!0,V(Object(N.a)(Object(N.a)({},H),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,V(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},_t=function(e){w(!0),pt.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},Ft=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),pt.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Et=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),pt.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"stretch",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){var o,i,r,l,s,u,j,h,g,f;return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(f="panel".concat(n),function(e,t){b(!!t&&f)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.forenameCapital," ").concat(t.surnameCapital)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Et(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Et(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Et(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Pt(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Pt(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Pt(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ft(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){Ft(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){Ft(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Nt.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:X,onChange:it,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:ee,onChange:ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(o=t.gender)||void 0===o?void 0:o.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:oe,onChange:rt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(i=t.title)||void 0===i?void 0:i.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:le,onChange:lt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.forenameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ue,onChange:st,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.surnameCapital}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ge,onChange:dt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(r=t.email)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Oe,onChange:bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Nt.FormatDateFromString)(t.birthDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.dobError,className:e.TextBox,value:Ce,onChange:ut,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(l=t.phone)||void 0===l?void 0:l.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ne,onChange:jt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(s=t.postCode)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Le,onChange:xt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(u=t.address)||void 0===u?void 0:u.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Fe,onChange:vt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(j=t.passportNumber)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Ye,onChange:Ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:null===(h=t.passportNumber2)||void 0===h?void 0:h.toUpperCase()}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:Je,onChange:Bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.certificate?Object(a.jsx)(St.a,{className:e.checkIcon}):Object(a.jsx)(Tt.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(U.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:Ze,onChange:wt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.antiBodyTest?Object(a.jsx)(St.a,{className:e.checkIcon}):Object(a.jsx)(Tt.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(U.a,{className:e.formControl,control:Object(a.jsx)(Y.a,{className:e.formControl,color:"secondary",name:"certificate",checked:at,onChange:Lt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(g=t.status,"booked"===g?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===g?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===g?Object(a.jsx)("span",{className:e.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===g?Object(a.jsx)("span",{className:e.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===g?Object(a.jsxs)("span",{className:e.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===g?Object(a.jsxs)("span",{className:e.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"sample_taken"===t.status&&!(p.edit&&p.person._id===t._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:T,onClick:function(e){return n=t._id,w(!0),void pt.changeBackToBookingMade(n).then((function(e){w(!1),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e),w(!1)}));var n},children:"Change Back To Booking Made"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(kt.calculatePrice)(t)<=199?e.infoDataCharges:e.infoDataChargesHigher,children:"\xa3".concat(Object(kt.calculatePrice)(t))})]}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,yt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,yt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_sent"!==t.status&&"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,yt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_cert_sent"!==t.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,yt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Certificate"})})]})})]})})},"panel".concat(n))}))]})})}var Pt=function(e){return"boolean"===typeof e};function At(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var It=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function _t(){var e=It(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!Pt(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){pt.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),pt.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:At,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Lt,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Ft,Et=n(12),Wt=n(61),Mt=n(1260),zt=n(478),Gt=n(247),Ht=n(1261),Ut=n(1262),Yt=n(1263),Vt=n(1264),Kt=n(1203),qt=n(72),Jt=n.n(qt),Xt=n(1267),$t=n(1265),Qt=n(17),Zt=n.n(Qt),en=n(1206),tn=n(54),nn=n.n(tn),an=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"}}})),on=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function cn(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(on,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function rn(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function ln(e){var t=an(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],i.a.useState(!1)),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(""),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(10),B=Object(l.a)(S,2),T=B[0],N=B[1],w=i.a.useState(!1),D=Object(l.a)(w,2),L=D[0],P=D[1];Object(o.useEffect)((function(){N((function(e){return e>=100?100:(t=k,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[k]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:function(){b(!1),h(!1),P(!1),clearInterval(Ft),e.handleClose()},PaperComponent:rn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(nn.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","RESEND EMAILS"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{height:"230px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!p&&!d&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report"," ",e.booking.certificate?" and Certificate":""," ","Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:d||p,className:t.resendButton,variant:"contained",color:"primary",onClick:function(t){b(!0),N(0),v("downloadFailed"),pt.resendEmailsWithBookingId(e.booking._id).then((function(t){Ft=setInterval((function(){pt.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(Ft))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(Ft),P(!0))}))}),1e3),setTimeout((function(){P(!0),clearInterval(Ft)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:d||p,className:t.cancelButton,variant:"contained",color:"default",onClick:function(t){e.handleClose()},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:d||p,className:t.resendFilesButton,variant:"contained",color:"primary",onClick:function(t){b(!0),N(0),v("downloadFailed"),m(!0),pt.regenerateFilesWithBookingId(e.booking._id).then((function(t){Ft=setInterval((function(){pt.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status?(v(e.data.link.status),"sent"===e.data.link.status&&(b(!1),h(!0),clearInterval(Ft))):"FAILED"===e.data.status&&(b(!1),h(!1),clearInterval(Ft),P(!0))}))}),1e3),setTimeout((function(){P(!0),clearInterval(Ft)}),6e4)})).catch((function(e){console.log(e),b(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})})]}),L&&!d&&!p&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"error",children:"Error! \u2014 Something is wrong with this record!"})}),(d||p)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[d&&!p&&"Sending ...",p&&!x&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent."]}),p&&x&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report"," ",e.booking.certificate?" and Certificate ":" "," ","Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]}),(d||p)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(cn,{variant:"determinate",color:"primary",value:T})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:d&&!p&&"PLEASE WAIT ..."})]})]})})]})})})}var sn=n(36),dn=n.n(sn),bn=n(1291),un=n(1299),jn=function e(){Object(ne.a)(this,e)};jn.getCorporates=function(e){return le.get("/api/medex/invoice/getcorporates")},jn.updateCorporates=function(e){return le.post("/api/medex/invoice/updatecorporates",{corporates:e})};var pn=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],e.next=4,jn.getCorporates();case 4:for(n=e.sent,a=n.data.result,o=a.split("\n"),i=0;i<o.length;i++)(c=o[i]).trim().length>0&&t.push(c.trim());return e.abrupt("return",t.sort());case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),hn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function gn(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function fn(e){var t=hn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState([]),k=Object(l.a)(y,2),v=k[0],S=k[1];i.a.useEffect((function(){w()}),[]);var w=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,S(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){m||(e.handleClose(),u("credit card"),g(v[0]),O(!1))},L=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.prev=1,t.next=4,pt.payBooking(e.booking._id,b,"corporate"===b?h:"");case 4:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),D(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),O(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"800px",open:e.open,onClose:D,PaperComponent:gn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"270px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"17px"},children:" How do you want to pay? "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:v.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:D,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:L,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var xn=n(115),mn=n.n(xn),On=n(105),yn=n.n(On),kn=n(4),vn=n.n(kn),Cn=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},Sn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function Bn(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Tn(e){var t=Sn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],i.a.useState(null)),s=Object(l.a)(r,2),d=s[0],b=s[1],u=function(){b(null),e.handleClose()};Object(o.useEffect)((function(){e.booking&&e.booking.filename&&e.booking.filename.length>0&&pt.getLinkDetailsWithBookingId(e.booking._id).then((function(e){"OK"===e.data.status&&b(e.data.link.timeStamp)}))}),[e.booking]);return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:u,PaperComponent:Bn,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:vn()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(Cn(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(Cn(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),d?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(d,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),d?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(Cn(d,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)($t.a,{children:Object(a.jsx)(R.a,{onClick:u,color:"default",children:"Back"})})]})})})}var Nn={PCR_COLOR:"#4faef7",GYNAE_COLOR:"#e83caf",GP_COLOR:"#ff4f14",STD_COLOR:"#d6733a",BLOOD_COLOR:"#dc2626",DERMA_COLOR:"#323e9a",SCREENING_COLOR:"#006b8f",CORPORATE_COLOR:"#009188"},wn=function e(){Object(ne.a)(this,e)};wn.createInvoice=function(e){return le.post("/api/medex/invoice/createinvoice",e)},wn.updateInvoice=function(e,t){return le.post("/api/medex/invoice/updateinvoice?invoiceNumber=".concat(e),t)},wn.deleteinvoice=function(e){return le.post("/api/medex/invoice/deleteinvoice?invoiceNumber=".concat(e))},wn.getInvoiceByBookingId=function(e){return le.get("/api/medex/invoice/getinvoicebybookingid?bookingId=".concat(e))},wn.getInvoiceByInvoiceNumber=function(e){return le.get("/api/medex/invoice/getinvoicebyinvoicenumber?invoiceNumber=".concat(e))},wn.getCodeDetails=function(e){return le.post("/api/medex/invoice/getcodedetails",{code:e})},wn.getAllCodes=function(){return le.get("/api/medex/invoice/getallcodes")},wn.updateCode=function(e,t){return le.post("/api/medex/invoice/updatecode",{id:e,newCode:t})},wn.addCode=function(e,t,n){return le.post("/api/medex/invoice/addcode",{code:e,description:t,price:n})},wn.downloadInvoice=function(e){return le.get("/api/pdf/downloadinvoice?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},wn.emailInvoice=function(e,t){return le.post("/api/pdf/emailinvoice?id=".concat(e,"&email=").concat(t))};var Dn=n(1294),Rn=n(43),Ln=n(369),Pn=n.n(Ln),An=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function In(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function _n(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Fn(e){var t=An(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],b=s[1],u=null,j=Object(o.useState)(u),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=(x[0],x[1]),O=Object(o.useState)(""),y=Object(l.a)(O,2),k=y[0],v=y[1],S=Object(o.useState)(!1),w=Object(l.a)(S,2),D=w[0],P=w[1],A=Object(o.useState)(""),I=Object(l.a)(A,2),_=I[0],F=I[1],E=i.a.useState([]),W=Object(l.a)(E,2),M=W[0],z=W[1],G=Object(o.useState)(""),U=Object(l.a)(G,2),Y=U[0],X=U[1],$=Object(o.useState)(!1),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState("INVOICE ISSUANCE"),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState([]),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1];Object(o.useEffect)((function(){return e.invoice?(console.log(e.invoice.items),z(e.invoice.items),F(e.invoice.notes||""),oe("EDIT INVOICE")):oe("INVOICE ISSUANCE"),se(),function(){z([])}}),[e.invoice,e.open]),Object(o.useEffect)((function(){return!e.invoice&&e.defaultCodes&&z(e.defaultCodes),function(){z([])}}),[e.defaultCodes]);var se=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn.getAllCodes();case 3:t=e.sent,le(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),de=function(t){d||(X(""),g(u),v(""),ee(!1),m(!1),P(!1),z([]),F(""),b(!1),e.handleClose(t))},be=function(){var e=!1;return!!h&&(h.description&&0!==h.description.length||(e=!0),h.price&&0!==h.price.length||(e=!0),!e)},ue=function(){var e=!1;return k&&0!==k.length||(P(!0),e=!0),Y&&0!==Y.length||(ee(!0),e=!0),!e},je=function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t},pe=function(){var t=Object(T.a)(B.a.mark((function t(){var n,a,o,i,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==M.length||e.invoice){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,b(!0),n="",a="",o="",e.booking.formData?(i=JSON.parse(e.booking.formData),n="".concat(i.title," ").concat(i.forename," ").concat(i.surname),a=i.postCode,o=i.address):e.booking.forename&&e.booking.surname?(n="".concat(e.booking.forename," ").concat(e.booking.surname),a=e.booking.postCode,o=e.booking.address):e.booking.fullname&&(n="".concat(e.booking.fullname)),c={name:n,date:new Date,dateAttended:new Date(e.booking.bookingDate),items:M,grandTotal:je(M),bookingId:e.booking._id,postCode:a,address:o,notes:_},e.invoice){t.next=14;break}return t.next=12,wn.createInvoice(c);case 12:t.next=21;break;case 14:if(!(M.length>0)){t.next=19;break}return t.next=17,wn.updateInvoice(e.invoice.invoiceNumber,c);case 17:t.next=21;break;case 19:return t.next=21,wn.deleteinvoice(e.invoice.invoiceNumber);case 21:b(!1),de(!0),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(2),console.error(t.t0),b(!1);case 29:case"end":return t.stop()}}),t,null,[[2,25]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:function(){return de(!1)},PaperComponent:_n,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Pn.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:"".concat(ae)})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{height:"700px",width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:10,children:Object(a.jsx)(Dn.a,{id:"code-auto-complete",value:h,onChange:function(e,t){g(t)},options:re,getOptionLabel:function(e){return".".concat(e.code," -- ").concat(e.description," -- ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))},style:{width:"750px"},renderInput:function(e){return Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},e),{},{label:"System Codes",helperText:"Standard codes already defined in the system"}))}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){be()&&(z([].concat(Object(Et.a)(M),[{code:h.code,description:h.description,price:h.price}])),g(u))},variant:"outlined",color:"primary",style:{marginTop:"15px"},disabled:d,children:"+ Add"})})]})}),Object(a.jsx)(K.a,{item:!0,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:5,children:[Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:D,value:k,onChange:function(e){v(e.target.value),P(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Z,value:Y,onChange:function(e){X(e.target.value),ee(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:In,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(R.a,{onClick:function(){ue()&&(z([].concat(Object(Et.a)(M),[{code:"",description:k,price:Y}])),v(""),X(""))},variant:"outlined",color:"primary",style:{marginTop:"12px"},disabled:d,children:"+ Add"})})]})}),Object(a.jsx)("div",{style:{backgroundColor:"#fff",color:"#1cb2c9",fontWeight:"500",fontSize:"0.95rem",padding:"5px 8px",marginBottom:"-15px",marginLeft:"10px",zIndex:"99",marginTop:"30px"},children:"Invoice Items"}),Object(a.jsx)("div",{style:{width:"100%",height:"300px",overflowY:"scroll",border:"1px solid #ddd",borderRadius:"4px",padding:"25px",position:"relative"},children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%",fontWeight:"500"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:"Code"}),Object(a.jsx)(K.a,{item:!0,xs:5,children:"Description"}),Object(a.jsx)(K.a,{item:!0,xs:2,children:"Price"}),Object(a.jsx)(K.a,{item:!0,xs:3})]})}),M.map((function(e,t){return Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:e.code}),Object(a.jsx)(K.a,{item:!0,xs:5,children:e.description}),Object(a.jsx)(K.a,{item:!0,xs:2,children:parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})}),Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)(Ot.a,{title:"Remove Item",children:Object(a.jsx)(J.a,{style:{marginTop:"-15px"},onClick:function(){return function(e){var t=Object(Et.a)(M);t.splice(e,1),z(t)}(t)},children:Object(a.jsx)(Pe.a,{color:"primary"})})})})]})})}))]})})}),Object(a.jsxs)(K.a,{item:!0,style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:"30px"},children:[Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#777"},children:["Grand Total :"," "]})," ",Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#1cb2c9",marginLeft:"10px",fontSize:"1rem"},children:[" ",je(M).toLocaleString("en-GB",{style:"currency",currency:"GBP"})," "]})]}),Object(a.jsx)(K.a,{item:!0,style:{marginTop:"10px",width:"100%"},children:Object(a.jsx)(L.a,{value:_,onChange:function(e){F(e.target.value)},multiline:!0,rows:2,helperText:"* notes will be printed on the invoice (optional)",label:"Notes",fullWidth:!0,variant:"outlined",placeholder:"enter any addional notes you want to be printed on the invoice..."})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:d,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return de(!1)},style:{width:"100px"},disabled:d,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:pe,variant:"contained",color:e.invoice?"secondary":"primary",disabled:d,children:e.invoice?"Save Changes":"Issue Invoice"})})]})})]})})})}var En=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green",marginBottom:"-8px"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red",marginBottom:"-8px"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"80px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Wn=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function Mn(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function zn(e){var t,n,c,r,s,d,b,u,j,p=En(),h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=g[1],m=Object(o.useState)(!1),O=Object(l.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),S=Object(l.a)(v,2),w=S[0],D=S[1],P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(null),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({edit:!1,person:null}),G=Object(l.a)(z,2),H=G[0],X=G[1],$=i.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),ge=pe[0],fe=pe[1],xe=i.a.useState({}),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(""),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(""),ct=Object(l.a)(it,2),rt=ct[0],lt=ct[1],st=i.a.useState(""),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(""),ht=Object(l.a)(jt,2),gt=ht[0],ft=ht[1],xt=i.a.useState(""),mt=Object(l.a)(xt,2),vt=mt[0],Ct=mt[1],Bt=i.a.useState(""),wt=Object(l.a)(Bt,2),Rt=wt[0],Lt=wt[1],Pt=i.a.useState(!1),At=Object(l.a)(Pt,2),It=At[0],_t=At[1],Ft=i.a.useState(!1),Et=Object(l.a)(Ft,2),Wt=Et[0],Mt=Et[1],zt=i.a.useState(!1),Gt=Object(l.a)(zt,2),Kt=Gt[0],qt=Gt[1],Jt=i.a.useState(null),Qt=Object(l.a)(Jt,2),Zt=Qt[0],en=Qt[1],tn=i.a.useState(!1),an=Object(l.a)(tn,2),on=an[0],cn=an[1],rn=i.a.useState(!1),sn=Object(l.a)(rn,2),dn=sn[0],bn=sn[1],un=i.a.useState(!1),jn=Object(l.a)(un,2),pn=jn[0],hn=jn[1],gn=i.a.useState(!1),xn=Object(l.a)(gn,2),On=xn[0],kn=xn[1],vn=i.a.useState(""),Cn=Object(l.a)(vn,2),Sn=Cn[0],Bn=Cn[1],Dn=function(){hn(!1)};Object(o.useEffect)((function(){if(Zt){var e=Ce!==Object(Nt.FormatDateFromString)(Zt.bookingDate)||Ne!==Zt.bookingTime||Le!==Zt.gender||ze!==Zt.forenameCapital||Ye!==Zt.surnameCapital||Fe!==Zt.title||Je!==Zt.email||Ze!==Object(Nt.FormatDateFromString)(Zt.birthDate)||at!==Zt.phone||rt!==Zt.postCode||bt!==Zt.address||vt!==Zt.passportNumber||Rt!==Zt.passportNumber2||It!==Zt.certificate||Wt!==Zt.antiBodyTest||Sn!==Zt.covidVaccine;cn(e)}}),[dn]),Object(o.useEffect)((function(){e.open||setTimeout((function(){X({edit:!1,person:null}),cn(!1)}),500)}),[e.open]);var Rn=function(e,t){if(e)Ge(t.forenameCapital),Ve(t.surnameCapital),Se(Object(Nt.FormatDateFromString)(t.bookingDate)),we(t.bookingTime.toUpperCase()),Ae(t.gender.toUpperCase()),Ee(t.title.toUpperCase()),Xe(t.email.toUpperCase()),et(Object(Nt.FormatDateFromString)(t.birthDate)),ot(t.phone.toUpperCase()),lt(t.postCode.toUpperCase()),ut(t.address.toUpperCase()),t.notes?ft(t.notes.toUpperCase()):ft(""),t.passportNumber?Ct(t.passportNumber.toUpperCase()):Ct(""),t.passportNumber2?Lt(t.passportNumber2.toUpperCase()):Lt(""),_t(t.certificate),Mt(t.antiBodyTest),Bn(t.covidVaccine),X({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=It,n.antiBodyTest=Wt,n.gender=Le,n.title=Fe,n.birthDate=Object(Nt.RevertFormatDateFromString)(Ze),n.email=Je,n.phone=at,n.postCode=rt,n.address=bt,n.passportNumber=vt,n.passportNumber2=Rt,n.forename=ze,n.surname=Ye,n.notes=gt,n.bookingDate=Object(Nt.RevertFormatDateFromString)(Ce),n.bookingTime=Ne,n.bookingRef=t.bookingRef,n.covidVaccine=Sn,Pn(n)&&An({bookingId:a,person:n})}}else X({edit:e,person:t}),cn(!1)},Ln=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Pn=function(e){var t=!1;return Ln(e.bookingDate)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingDateError:!0}))),Ln(e.birthDate)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingTimeError:!0}))),!t},An=function(e){le(!0),pt.updateBooking(e).then((function(e){le(!1),X({edit:!1,person:null}),qt(!Kt)})).catch((function(e){le(!1),X({edit:!1,person:null}),console.log(e)}))},In=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),pt.deleteBooking(n).then((function(e){ue(!1),ee({delete:!1,person:null}),qt(!Kt)})).catch((function(e){ue(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},_n=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),pt.unDeleteBooking(n).then((function(e){fe(!1),oe({restore:!1,person:null}),qt(!Kt)})).catch((function(e){fe(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(pt.getBookingById(e.booking._id).then((function(e){en(e.data)})).catch((function(e){console.log(e)})),x((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Kt,f.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&en(e.booking)}),[e.booking]);var zn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,pt.unPayBooking(Zt._id);case 4:le(!1),hn(!1),qt(!Kt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),hn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Gn=i.a.useState(null),Hn=Object(l.a)(Gn,2),Un=Hn[0],Yn=Hn[1],Vn=i.a.useState(!1),Kn=Object(l.a)(Vn,2),qn=Kn[0],Jn=Kn[1],Xn=i.a.useState(!1),$n=Object(l.a)(Xn,2),Qn=$n[0],Zn=$n[1],ea=i.a.useState(!1),ta=Object(l.a)(ea,2),na=ta[0],aa=ta[1],oa=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Jn(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Yn(n.data.invoice),Jn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Jn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&oa()}),[e.booking,e.open]);var ia,ca=function(){M(Zt),Yn(Un),Zn(!0)};return Object(a.jsx)(i.a.Fragment,{children:Zt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Wn,keepMounted:!0,onClose:e.onClose,PaperComponent:Mn,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:Zt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},hidden:"pcrlab"===f.role,children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/pcr/".concat(Zt._id)),k(!0),setTimeout((function(){k(!1)}),1500)},"aria-label":"delete",className:p.margin,size:"small",children:Object(a.jsx)(yn.a,{style:Zt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!y,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Nn.PCR_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"PCR"}),Zt.tr&&Object(a.jsx)("div",{style:{position:"absolute",right:"15px"},children:"TR"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Zt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Zt.forenameCapital," ").concat(Zt.surnameCapital)})}),Zt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:Zt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"20px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:p.infoDetails,children:Object(a.jsxs)("ul",{className:p.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===Zt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Zt.deleted||ae.restore&&ae.person._id===Zt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){_n(!0,Zt)},className:p.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){_n(!1,Zt)},className:p.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){_n(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Zt.deleted||Z.delete||H.edit&&H.person._id===Zt._id||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Rn(!0,Zt)},className:p.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!on,onClick:function(){Rn(!1,Zt)},className:p.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(H.edit&&H.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){Rn(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===Zt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:e.deleteButtonDisabled||Zt.deleted||H.edit||Z.delete&&Z.person._id===Zt._id||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){In(!0,Zt)},className:p.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){In(!1,Zt)},className:p.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===Zt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){In(!1,null)},className:p.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Object(Nt.FormatDateFromString)(Zt.bookingDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingDateError,className:p.TextBox,value:Ce,onChange:function(e){Se(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingDateError:!1})),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.bookingTimeError,className:p.TextBox,value:Ne,onChange:function(e){we(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{bookingTimeError:!1})),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(t=Zt.gender)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Le,onChange:function(e){Ae(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(n=Zt.title)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Fe,onChange:function(e){Ee(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.forenameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:ze,onChange:function(e){Ge(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.surnameCapital}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(c=Zt.email)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Je,onChange:function(e){Xe(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Object(Nt.FormatDateFromString)(Zt.birthDate)}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Oe.dobError,className:p.TextBox,value:Ze,onChange:function(e){et(e.target.value),ye(Object(N.a)(Object(N.a)({},Oe),{},{dobError:!1})),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:p.li}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(r=Zt.phone)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:at,onChange:function(e){ot(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(s=Zt.postCode)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:rt,onChange:function(e){lt(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(d=Zt.address)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:bt,onChange:function(e){ut(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Zt.selfIsolate&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Post Code"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.postCodeSI})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Self-Isolate Address"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.addressSI})]})]}),Object(a.jsx)("li",{className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(b=Zt.passportNumber)||void 0===b?void 0:b.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:vt,onChange:function(e){Ct(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),!Zt.tr&&Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:null===(u=Zt.passportNumber2)||void 0===u?void 0:u.toUpperCase()}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Rt,onChange:function(e){Lt(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{hidden:!Zt.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"NHS Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:null!==(j=Zt.NHSNumber)&&void 0!==j?j:"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Ethnicity"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.ethnicity})]})]})}),Object(a.jsx)("li",{hidden:!Zt.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Arrival Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.arrivalDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Flight Number"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.flightNumber})]})]})}),Object(a.jsx)("li",{hidden:!Zt.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Last Departed Date"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.lastDepartedDate})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"Travelling From"})," ",Object(a.jsx)("span",{className:p.infoData,children:Zt.travellingFrom})]})]})}),Object(a.jsx)("li",{hidden:Zt.tr,className:p.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.certificate?Object(a.jsx)(St.a,{className:p.checkIcon}):Object(a.jsx)(Tt.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(U.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:It,onChange:function(e){_t(e.target.checked),bn(!dn)}}),label:""})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.antiBodyTest?Object(a.jsx)(St.a,{className:p.checkIcon}):Object(a.jsx)(Tt.a,{className:p.closeIcon})}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(U.a,{className:p.formControl,control:Object(a.jsx)(Y.a,{className:p.formControl,color:"secondary",name:"certificate",checked:Wt,onChange:function(e){Mt(e.target.checked),bn(!dn)}}),label:""})})]})]})}),Object(a.jsxs)("li",{style:{paddingTop:"10px",paddingBottom:"10px"},children:[Object(a.jsx)("span",{className:p.infoTitle,children:"COVID VACCINE"}),Object(a.jsx)("span",{hidden:H.edit&&H.person._id===Zt._id,className:p.infoData,children:Zt.covidVaccine}),Object(a.jsx)("span",{hidden:!(H.edit&&H.person._id===Zt._id),className:p.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:p.TextBox,value:Sn,onChange:function(e){Bn(e.target.value),bn(!dn)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:p.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:p.infoTitle,children:"STATUS"})," ",(ia=Zt.status,"booked"===ia?Object(a.jsx)("span",{className:p.BookedLabel,children:" Booking Made "}):"patient_attended"===ia?Object(a.jsx)("span",{className:p.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===ia?Object(a.jsx)("span",{className:p.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===ia?Object(a.jsx)("span",{className:p.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===ia?Object(a.jsxs)("span",{className:p.ReportCertSentLabel,children:[" ","Report & Certificate Sent"," "]}):"positive"===ia?Object(a.jsxs)("span",{className:p.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"),"pcrlab"!==f.role&&"sample_taken"===Zt.status&&!(H.edit&&H.person._id===Zt._id)&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:re,onClick:function(e){return t=Zt._id,le(!0),void pt.changeBackToBookingMade(t).then((function(e){le(!1),qt(!Kt)})).catch((function(e){console.log(e),le(!1)}));var t},children:"Change Back To Booking Made"}),("report_sent"===Zt.status||"report_cert_sent"===Zt.status||"positive"===Zt.status)&&!(H.edit&&H.person._id===Zt._id)&&"pcrlab"!==f.role&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.ResendEmailsButton,onClick:function(e){return Zt._id,M(Zt),void D(!0)},children:"Resend emails"})]}),Object(a.jsx)("li",{hidden:Zt.deleted||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Zt._id,yt.downloadCovidForm1(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Zt.deleted||"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Zt._id,yt.downloadCovidForm2(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),qt(!Kt)})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role||Zt.deleted||"report_sent"!==Zt.status&&"report_cert_sent"!==Zt.status&&"positive"!==Zt.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Zt._id,yt.downloadPdfResult(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role||Zt.deleted||"report_cert_sent"!==Zt.status&&"positive"!==Zt.status,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Zt._id,yt.downloadPdfCert(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:p.DownloadForm,children:"Download Certificate"})}),Object(a.jsx)("li",{hidden:"pcrlab"===f.role,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){M(Zt),kn(!0)},className:p.DownloadForm,children:"Show Audit Trail"})}),"pcrlab"!==f.role&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:p.li,style:{marginTop:"20px"},children:[Object(a.jsxs)("span",{className:p.infoTitle,children:["INVOICE # :"," "]})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!qn&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ","..."," "]}),qn&&Un&&Object(a.jsxs)("span",{className:p.invoiceNumber,children:[" ",Un.invoiceNumber," "]}),qn&&!Un&&Object(a.jsxs)("span",{className:p.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(H.edit&&H.person._id===Zt._id)&&!Zt.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[qn&&!Un&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:p.PayButton,onClick:function(){return ca()},children:"Issue Invoice"}),qn&&Un&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:p.printInvoiceButton,onClick:function(){return e=Un._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.editInvoiceButton,onClick:function(){return ca()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Zt.email||Zt.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Un._id,t=Zt.email,le(!0),aa(!1),wn.emailInvoice(e,t).then((function(e){le(!1),"OK"===e.data.status&&aa(!0)})).catch((function(e){console.log(e),le(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",na&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:p.li,children:[Object(a.jsx)("span",{className:p.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(kt.calculatePrice)(Zt)<=199?p.infoDataCharges:p.infoDataChargesHigher,children:"\xa3".concat(Object(kt.calculatePrice)(Zt))}),!(H.edit&&H.person._id===Zt._id)&&!Zt.paid&&!Zt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:p.PayButton,onClick:function(e){return Zt._id,M(Zt),void _(!0)},children:"Pay"}),!(H.edit&&H.person._id===Zt._id)&&Zt.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:p.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:p.checkIconSmall})," ","Paid by ",Zt.paidBy,"corporate"===Zt.paidBy?' "'.concat(Zt.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return hn(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Un&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Un.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:" TOTAL "}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" \xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Un.items)]})]})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:p.backdrop,open:re||be||ge,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(ln,{booking:W,open:w,handleClose:function(){D(!1),M(null)}}),Object(a.jsx)(fn,{booking:W,open:I,handleClose:function(){_(!1),M(null)}}),Object(a.jsx)(Fn,{booking:W,invoice:Un,open:Qn,defaultCodes:function(e){var t=[];if(e)return e.tr?t.push({code:"PCRTR",description:"PCR TEST TO RELEASE",price:250}):(t.push({code:"PCR",description:"PCR SWAB TEST",price:199}),e.antiBodyTest&&(t.push({code:"PCRA",description:"PCR ANTIBODY TEST",price:99}),t.push({code:"PHLE",description:"PHLEBOTOMY",price:50})),e.certificate&&t.push({code:"PCRCERT",description:"PCR FIT TO FLY CERTIFICATE",price:50})),t}(e.booking),handleClose:function(e){Zn(!1),M(null),oa()}}),Object(a.jsx)(Tn,{booking:W,open:On,handleClose:function(){kn(!1),M(null)}})]}),Object(a.jsxs)(Ht.a,{open:pn,onClose:Dn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Dn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:zn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]})]})})}var Gn=n(69),Hn=n(70),Un=n(94),Yn=(n(746),n(460),n(137)),Vn=n(1288),Kn=n(80),qn=n.n(Kn),Jn=n(97),Xn=n.n(Jn),$n=["Visa Medical"],Qn=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80}}})),Zn=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"tr"===e?"Test & Release Bookings":"All Bookings"};function ea(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function ta(e){var t=Qn(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=c[0],s=(c[1],i.a.useState(25)),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(!1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(new Date((new Date).getTime()-6048e5)),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date((new Date).getTime()-864e5)),k=Object(l.a)(y,2),v=k[0],S=k[1],B=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),T=Object(l.a)(B,2),w=T[0],D=T[1],P=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),A=Object(l.a)(P,2),I=A[0],_=A[1],F=Object(o.useState)(!1),E=Object(l.a)(F,2),W=E[0],G=E[1],H=Object(o.useState)(!0),V=Object(l.a)(H,2),q=V[0],X=V[1],$=Object(o.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!0),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=Object(o.useState)(!0),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=Object(o.useState)(!0),be=Object(l.a)(de,2),ue=be[0],pe=be[1],ge=Object(o.useState)(!0),xe=Object(l.a)(ge,2),Oe=xe[0],ke=xe[1],Ce=Object(o.useState)(!0),Be=Object(l.a)(Ce,2),Ne=Be[0],we=Be[1],De=Object(o.useState)(!0),Le=Object(l.a)(De,2),Ae=Le[0],_e=Le[1],Fe=Object(o.useState)(!0),Ee=Object(l.a)(Fe,2),We=Ee[0],Me=Ee[1],ze=Object(o.useState)(!0),Ge=Object(l.a)(ze,2),He=Ge[0],Ue=Ge[1],Ye=[];Ye="recent"===e.date&&"pcrlab"!==r.role?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==r.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(St.a,{className:t.checkIcon}):Object(a.jsx)(Tt.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(St.a,{className:t.checkIcon}):Object(a.jsx)(Tt.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}]:"pcrlab"===r.role?[{field:"bookingDate",headerName:"Booking Date",width:200,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"Booking Time",width:200,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"forenameCapital",headerName:"Forename",width:300},{field:"surnameCapital",headerName:"Surname",width:300},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("tr")?Object(a.jsx)("span",{style:{position:"absolute",fontSize:"12px",fontWeight:"600",color:"#7e0082"},children:"TR"}):"","pcrlab"!==r.role&&Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})]})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(Tt.a,{className:t.closeIcon})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Z.a,{className:t.RefLink,onClick:function(){},children:e.value})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:110,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(St.a,{className:t.checkIcon}):Object(a.jsx)(Tt.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(St.a,{className:t.checkIcon}):Object(a.jsx)(Tt.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}}];var Ve=i.a.useState({bookings:[],cachedBookings:[],isFetching:!0}),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)($n[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),ht=jt[0],gt=jt[1],ft=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=pt.getAllBookings;"today"===e.date?n=pt.getTodayBookings:"old"===e.date?n=pt.getOldBookings:"future"===e.date?n=pt.getFutureBookings:"recent"===e.date?n=pt.getRecentBookingsAll:"live"===e.date?n=pt.getLiveBookings:"completed"===e.date?n=pt.getCompletedBookings:"positive"===e.date?n=pt.getPositiveBookings:"deleted"===e.date?n=pt.getDeletedBookings:"late"===e.date?n=pt.getLateBookings:"tr"===e.date&&(n=pt.getAllTRBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){u(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(ht.toLowerCase())>=0||e.surname.toLowerCase().indexOf(ht.toLowerCase())>=0||"".concat(e.forename," ").concat(e.surname).toLowerCase().indexOf(ht.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[ht]),Object(o.useEffect)((function(){xt(b)}),[r.bookingDialogDataChanged]);var mt,yt,kt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},Ct=i.a.useState(1),Bt=Object(l.a)(Ct,2),wt=Bt[0],Dt=Bt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(yt=e.date,"today"===yt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===yt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===yt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===yt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===yt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===yt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===yt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===yt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===yt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Zn(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(b)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&"admin"===r.userId.username&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){g(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:b,onChange:function(e){u(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ye,autoPageSize:!0,page:wt,onPageChange:function(e){Dt(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(zn,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:h,onClose:function(){bt($n[0]),G(!1),g(!1)},PaperComponent:ea,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:W,onChange:function(e){G(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),W&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:$n.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"From",value:m,onChange:function(e){if(!e||"Invalid Date"===e.toString())return O(null),void D("");O(e),D(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:v,onChange:function(e){if(!e||"Invalid Date"===e.toString())return S(null),void _("");S(e),_(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(w,".").concat(I),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:q,onChange:function(e){X(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){ie(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){se(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ue,onChange:function(e){pe(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ke(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ne,onChange:function(e){we(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ae,onChange:function(e){_e(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:We,onChange:function(e){Me(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:He,onChange:function(e){Ue(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[q&&Object(a.jsx)("th",{className:t.th,children:"Date"}),ee&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),oe&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),le&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),ue&&Object(a.jsx)("th",{className:t.th,children:"Email"}),Oe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Ne&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),Ae&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),We&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),He&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return W?e.bookingDate>=w&&e.bookingDate<=I&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=w&&e.bookingDate<=I})).map((function(e){return Object(a.jsxs)("tr",{children:[q&&Object(a.jsx)("td",{className:t.td,children:Object(Nt.FormatDateFromString)(e.bookingDate)}),ee&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),oe&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),le&&Object(a.jsx)("th",{className:t.th,children:Object(Nt.FormatDateFromString)(e.birthDate)}),ue&&Object(a.jsx)("td",{className:t.td,children:e.email}),Oe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Ne&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Ae&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),We&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),He&&Object(a.jsx)("td",{className:t.td,children:vt.a.calculatePrice(e)})]})}))]})})]})})]})]})}var na=n(102),aa=n(1293),oa=n(1268),ia=n(373),ca=n(374),ra=n(141),la=n(657);function sa(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function da(e,t){return{time:e,amount:t}}var ba=[da("09:00",0),da("10:00",0),da("11:00",0),da("12:00",0),da("13:00",0),da("14:00",0),da("15:00",0),da("16:00",0),da("17:00",0),da("18:00",void 0)],ua=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ja(){var e=Object(na.a)(),t=i.a.useState(ba),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,pt.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(da("09:00",ua(o,"09"))),n.push(da("10:00",ua(o,"10"))),n.push(da("11:00",ua(o,"11"))),n.push(da("12:00",ua(o,"12"))),n.push(da("13:00",ua(o,"13"))),n.push(da("14:00",ua(o,"14"))),n.push(da("15:00",ua(o,"15"))),n.push(da("16:00",ua(o,"16"))),n.push(da("17:00",ua(o,"17"))),n.push(da("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(sa,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var pa=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ha=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},ga=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function fa(){var e=pa(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=ha(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),pt.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(sa,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:ga(ha(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(zn,{booking:h,open:m,onClose:function(){O(!1)}})]})}var xa=n(1272),ma=n(1275),Oa=n(1258),ya=n(1273),ka=n(1274),va=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ca(){var e=va(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),pt.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O(),setInterval((function(){h((function(e){return!e}))}),3e4)}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(sa,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Name"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.forename}),Object(a.jsx)(Oa.a,{children:e.surname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:Object(Nt.FormatDateFromString)(e.birthDate)}),Object(a.jsx)(Oa.a,{children:Object(Nt.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("pcr","recentBookings")})}))},children:"See more records"})})]})}var Sa=n(1295),Ba=n(659),Ta=n(375),Na=["#00b33e","#0070e0","#bb00c4"],wa=Math.PI/180,Da=function(e){var t=e.cx,n=e.cy,o=e.midAngle,i=e.innerRadius,c=e.outerRadius,r=e.value,l=(e.index,i+.5*(c-i)),s=t+l*Math.cos(-o*wa),d=n+l*Math.sin(-o*wa);return Object(a.jsx)("text",{x:s,y:d,fontSize:"14px",fontWeight:"500",fill:"white",textAnchor:s>t?"start":"end",dominantBaseline:"central",children:"".concat(r," ")})},Ra=Object(w.a)({depositContext:{flex:1},ReportLabels:{position:"absolute",top:"80px",left:"0px"},AverageLabel:{position:"absolute",top:"190px",right:"30px",fontSize:"12px",color:"#0070e0",fontWeight:"600"},less12Label:{fontSize:"12px",color:"#00b33e",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #00b33e",marginBottom:"10px"},less24Label:{fontSize:"12px",color:"#0070e0",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #0070e0",marginBottom:"10px"},less36Label:{fontSize:"12px",color:"#bb00c4",fontWeight:"600",paddingLeft:"5px",borderLeft:"5px solid #bb00c4",marginBottom:"10px"},seeMore:{position:"absolute",top:"191px",left:"2px"},TableTitle:{width:"100%",textAlign:"center",fontSize:"1.1rem",fontWeight:"500",backgroundColor:"#00852a",color:"#fff",border:"1px solid #00852a",padding:"5px"},TableBorder:{border:"1px solid #00852a",marginBottom:"20px"}});function La(){var e=Ra(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],C=i.a.useState(null),S=Object(l.a)(C,2),B=S[0],T=S[1],N=i.a.useState(!1),w=Object(l.a)(N,2),D=w[0],R=w[1];Object(o.useEffect)((function(){var e=setInterval((function(){c(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){R(!0),pt.getTestsTimeReport().then((function(e){var t=[];R(!1),"OK"===e.data.status&&(b(e.data.result),t.push({name:"lessThan12",value:e.data.result.lessThan12}),t.push({name:"lessThan24",value:e.data.result.lessThan24}),t.push({name:"lessThan36",value:e.data.result.lessThan36}),T(t))})).catch((function(e){R(!1),console.error(e)})),pt.getTestsTimeReportLast7().then((function(e){"OK"===e.data.status&&h(e.data.result)})).catch((function(e){console.error(e)})),pt.getTestsTimeReportLast30().then((function(e){"OK"===e.data.status&&m(e.data.result)})).catch((function(e){console.error(e)}))}),[]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[D&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(sa,{children:"PCR RESULTS SUMMARY"}),B&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Sa.a,{width:250,height:150,children:Object(a.jsx)(Ba.a,{data:B,cx:170,cy:70,labelLine:!1,label:Da,outerRadius:65,fill:"#8884d8",dataKey:"value",children:B.map((function(e,t){return Object(a.jsx)(Ta.a,{fill:Na[t%Na.length]},"cell-".concat(t))}))})}),Object(a.jsxs)("div",{className:e.ReportLabels,children:[Object(a.jsxs)("div",{className:e.less12Label,children:[" ","12 Hours"," "]}),Object(a.jsxs)("div",{className:e.less24Label,children:[" ","24 Hours"," "]}),Object(a.jsxs)("div",{className:e.less36Label,children:[" ","36 Hours"," "]})]}),Object(a.jsxs)("div",{className:e.AverageLabel,children:["avg = ",Object(a.jsxs)("span",{style:{fontSize:"14px"},children:[" ","".concat(d.avg)," "]})," hours"]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),v(!0)},children:"See Details"})}),Object(a.jsxs)(Ht.a,{style:{padding:"50px"},onClose:function(){v(!1)},"aria-labelledby":"simple-dialog-title",open:k,children:[Object(a.jsx)(Ut.a,{style:{textAlign:"center"},id:"simple-dialog-title",children:"PCR Results Time Report"}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{className:e.TableTitle,children:"All Records"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(xa.a,{children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Oa.a,{children:"Count"}),Object(a.jsx)(Oa.a,{children:"Percent"})]})}),Object(a.jsxs)(ma.a,{children:[Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"12 Hours"}),Object(a.jsx)(Oa.a,{children:d.lessThan12}),Object(a.jsxs)(Oa.a,{children:[d.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"24 Hours"}),Object(a.jsx)(Oa.a,{children:d.lessThan24}),Object(a.jsxs)(Oa.a,{children:[d.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"36 Hours"}),Object(a.jsx)(Oa.a,{children:d.lessThan36}),Object(a.jsxs)(Oa.a,{children:[d.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"48 Hours"}),Object(a.jsx)(Oa.a,{children:d.lessThan48}),Object(a.jsxs)(Oa.a,{children:[d.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Oa.a,{style:{fontWeight:"600"},children:d.lessThan48+d.lessThan36+d.lessThan24+d.lessThan12}),Object(a.jsx)(Oa.a,{})]},"row4")]})]})}),Object(a.jsx)("div",{className:e.TableTitle,children:"Last 7 Days"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(xa.a,{children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Oa.a,{children:"Count"}),Object(a.jsx)(Oa.a,{children:"Percent"})]})}),Object(a.jsxs)(ma.a,{children:[Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"12 Hours"}),Object(a.jsx)(Oa.a,{children:p.lessThan12}),Object(a.jsxs)(Oa.a,{children:[p.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"24 Hours"}),Object(a.jsx)(Oa.a,{children:p.lessThan24}),Object(a.jsxs)(Oa.a,{children:[p.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"36 Hours"}),Object(a.jsx)(Oa.a,{children:p.lessThan36}),Object(a.jsxs)(Oa.a,{children:[p.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"48 Hours"}),Object(a.jsx)(Oa.a,{children:p.lessThan48}),Object(a.jsxs)(Oa.a,{children:[p.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Oa.a,{style:{fontWeight:"600"},children:p.lessThan48+p.lessThan36+p.lessThan24+p.lessThan12}),Object(a.jsx)(Oa.a,{})]},"row4")]})]})}),Object(a.jsx)("div",{className:e.TableTitle,children:"Last 30 Days"}),Object(a.jsx)("div",{className:e.TableBorder,children:Object(a.jsxs)(xa.a,{children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Recieved in Less Than"}),Object(a.jsx)(Oa.a,{children:"Count"}),Object(a.jsx)(Oa.a,{children:"Percent"})]})}),Object(a.jsxs)(ma.a,{children:[Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"12 Hours"}),Object(a.jsx)(Oa.a,{children:x.lessThan12}),Object(a.jsxs)(Oa.a,{children:[x.lessThan12Percent," %"]})]},"row1"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"24 Hours"}),Object(a.jsx)(Oa.a,{children:x.lessThan24}),Object(a.jsxs)(Oa.a,{children:[x.lessThan24Percent," %"]})]},"row2"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"36 Hours"}),Object(a.jsx)(Oa.a,{children:x.lessThan36}),Object(a.jsxs)(Oa.a,{children:[x.lessThan36Percent," %"]})]},"row3"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"48 Hours"}),Object(a.jsx)(Oa.a,{children:x.lessThan48}),Object(a.jsxs)(Oa.a,{children:[x.lessThan48Percent," %"]})]},"row4"),Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{style:{fontWeight:"800"},children:"Total Results Received : "}),Object(a.jsx)(Oa.a,{style:{fontWeight:"600"},children:x.lessThan48+x.lessThan36+x.lessThan24+x.lessThan12}),Object(a.jsx)(Oa.a,{})]},"row4")]})]})})]})]})]})]})})}var Pa=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Aa(){var e=Pa(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:5,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(ja,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:4,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(La,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(fa,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Ca,{})})})]})})}var Ia,_a=n(194),Fa=n.n(_a),Ea=n(1276),Wa=n(1304),Ma=n(173),za=n.n(Ma),Ga=n(195),Ha=n.n(Ga),Ua=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginLeft:"50px"}}})),Ya=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Va(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(Ya,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Ka(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function qa(){var e=Ua(),t=[{field:"id",headerName:"#",width:50},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"forename",headerName:"Forename",width:200},{field:"surname",headerName:"Surname",width:200},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(Nt.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===A?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(za.a,{}),onClick:function(e){return qe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"archive"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]}):Object(a.jsxs)(i.a.Fragment,{children:["pcrlab"!==r.role&&Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",startIcon:Object(a.jsx)(za.a,{}),onClick:function(e){return qe(e,t.value)},className:e.smartMatchButton,children:"smart match"}),"pcrlab"!==r.role&&Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Undo"}),Object(a.jsx)(R.a,{disabled:t.value===T,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],n=i.a.useContext(C),c=Object(l.a)(n,2),r=c[0],s=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=(p[0],p[1]),g=i.a.useState(""),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(null),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("pcrlab"!==r.role?"unresolved":"archived"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(!1),F=Object(l.a)(_,2),W=F[0],M=F[1],z=i.a.useState(!1),G=Object(l.a)(z,2),H=G[0],V=G[1],q=i.a.useState(null),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),se=le[0],de=le[1],be=i.a.useState(null),ue=Object(l.a)(be,2),je=ue[0],pe=ue[1],he=i.a.useState(!1),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState(!1),Oe=Object(l.a)(me,2),ye=Oe[0],ke=Oe[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(!1),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=i.a.useState(!1),Pe=Object(l.a)(Le,2),Ae=Pe[0],Ie=Pe[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(10),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],qe=function(e,t){Q(t),M(!0),Je(t)};Object(o.useEffect)((function(){$&&Je($)}),[r.bookingDialogDataChanged]);var Je=function(e){pt.getLinkDetails(e).then((function(e){ne(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),pt.findBestMatches(e).then((function(e){ce(e.data.matchedBookings)})).catch((function(e){console.log(e),ce([])}))},Xe=function(e,t){T||(w(t),pt.archiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},$e=function(e,t){T||(w(t),pt.unArchiveRecord(t).then((function(e){w(null),v(!k)})).catch((function(e){w(null)})))},Qe=Object(o.useRef)();Object(o.useEffect)((function(){var e=pt.getUnmatchedRecords;"archived"===A&&(e=pt.getUnmatchedRecordsArchived),Ke(!0),u({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});return e.data}));Qe.current=t,t.then((function(e){t===Qe.current&&(Ke(!1),u({bookings:e,cachedBookings:Object(Et.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(Ke(!1),console.log(e),u({bookings:b.bookings,cachedBookings:b.cachedBookings,isFetching:!1}))}))}),[k,A]),Object(o.useEffect)((function(){if(x&&x.trim().length>0){var e=b.cachedBookings.filter((function(e){return e.forename.toLowerCase().indexOf(x.toLowerCase())>=0||e.surname.toLowerCase().indexOf(x.toLowerCase())>=0}));u({bookings:e,cachedBookings:b.cachedBookings,isFetching:!1})}else u({bookings:Object(Et.a)(b.cachedBookings),cachedBookings:b.cachedBookings,isFetching:!1})}),[x]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=Ee,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Ee]);var Ze=function(e){yt.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:" Unmatched Records "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:e.refreshButton,onClick:function(e){m(""),v(!k)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Wa.a,{value:A,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){"pcrlab"!==r.role&&t&&t.length&&I(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Ea.a,{value:"unresolved","aria-label":"left aligned",children:"UnResolved"}),Object(a.jsx)(Ea.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:x,onChange:function(e){m(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:b.bookings,columns:t,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&h(e.rows[0])}})}),Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:W,onClose:function(){M(!1),setTimeout((function(){Q(null),ne(null),ce(null),de(null),ke(!1),xe(!1),We(null),Be(!1),Re(!1),clearInterval(Ia),Ie(!1)}),100)},PaperComponent:Ka,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(za.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"600px"},children:[(!ie||!te)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fa.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),ie&&0===ie.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),ie&&te&&ie.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Forename:"}),Object(a.jsx)("span",{className:e.infoData,children:te.forename})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Surname:"}),Object(a.jsx)("span",{className:e.infoData,children:te.surname})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Nt.FormatDateFromString)(te.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(Nt.FormatDateFromString)(te.testDate)})]})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Select"}),Object(a.jsx)(Oa.a,{children:"Match"}),Object(a.jsx)(Oa.a,{children:"Forename"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Test Date"}),Object(a.jsx)(Oa.a,{})]})}),Object(a.jsx)(ma.a,{children:ie.map((function(e){var t;return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:Object(a.jsx)(Ot.a,{title:e.birthDate!==te.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se&&se._id===e._id,disabled:ye||fe,onChange:function(t){return function(e,t){e.target.checked?de(t):de(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Oa.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Oa.a,{style:e.forenameCapital===te.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Oa.a,{style:e.surnameCapital===te.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Oa.a,{style:e.birthDate===te.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==te.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Ha.a,{})})}),Object(Nt.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Oa.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Oa.a,{style:vn()(e.samplingTimeStamp,"yyyy-mm-dd")===te.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(Nt.FormatDateFromString)(vn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Oa.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){pe(t),V(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ye&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!se||fe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){xe(!0),pt.getBookingById(se._id).then((function(e){de(e.data)})),pt.matchRecords(se._id,$).then((function(e){"OK"===e.data.status&&(xe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!se&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ye&&!De&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",se.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),pt.resendEmails($).then((function(e){Ia=setInterval((function(){pt.getLinkDetails($).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),v(!k),clearInterval(Ia))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),Ie(!0),pt.regenerateFiles($).then((function(e){Ia=setInterval((function(){pt.getLinkDetails($).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),v(!k),clearInterval(Ia))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ye&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",se.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",se.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ye&&(Se||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Va,{variant:"determinate",color:"primary",value:Ge})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]}),Object(a.jsx)(zn,{booking:je,open:H,onClose:function(){V(!1),setTimeout((function(){pe(null)}),500)},deleteButtonDisabled:!0})]})]})]})}var Ja=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Xa=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=Ja(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,pt.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=50?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/100*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},$a=n(88),Qa=n.n($a),Za=function e(){Object(ne.a)(this,e)};Za.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var eo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],to=[1,2,3,4,5,6,7],no=[1,2,3,4,5,6],ao=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),oo=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=ao(),r=Za.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:eo.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:no.map((function(e){return Object(a.jsx)("tr",{children:to.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Xa,{cellIndex:(e-1)*to.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*to.length+i))})}))})}))})]})})},io=n(117),co=n.n(io),ro=n(118),lo=n.n(ro),so=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),bo=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=so(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return pt.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=5?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B}):void 0),function(e){if(e>0){var t=e/5*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},uo=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],jo=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),po=function(e){var t=e.dates,n=e.dayClicked,o=jo();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:uo.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(bo,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},ho=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),go=function(e){e.key;var t=e.date,n=e.time,c=ho(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.forenameCapital.indexOf(e)>=0||t.surnameCapital.indexOf(e)>=0||"".concat(t.forenameCapital," ").concat(t.surnameCapital).indexOf(e)>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I){e.next=9;break}return e.next=7,pt.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();I&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var F,E=function(e){switch(e){case"sample_taken":return c.bookingBoxSampleTaken;case"positive":return c.bookingBoxPositive;case"report_sent":case"report_cert_sent":return c.bookingBoxReportSent;default:return c.bookingBox}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(F=x,null===F?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F.length>0?F.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:E(e.status),onClick:function(t){return function(e,t){"pcrlab"!==d.role&&(v(t),_(!0))}(0,e)},children:"".concat(e.forenameCapital,"-").concat(e.surnameCapital).substring(0,15)})})):void 0)}),Object(a.jsx)(zn,{booking:k,open:I,onClose:function(){_(!1)}})]})},fo=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],xo=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),mo=function(e){var t=e.date,n=xo();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:fo.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(go,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Oo=["January","February","March","April","May","June","July","August","September","October","November","December"],yo=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function ko(){var e=yo(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Oo[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(oo,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(po,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(mo,{date:x}):void 0)]})}var vo=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Co=function e(){Object(ne.a)(this,e)};Co.setClinicNotes=function(e,t){return vo.post("/api/gynae/book/setclinicnotes",{bookingId:e,notes:t})},Co.getBloodReportsByBookingId=function(e){return vo.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Co.changeDepositBooking=function(e,t){return vo.post("/api/gynae/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},Co.addNewBooking=function(e){return vo.post("/api/gynae/book/addnewbooking",e)},Co.sendRegFormEmail=function(e){return vo.post("/api/gynae/book/sendregformemail?id=".concat(e))},Co.payBooking=function(e,t,n,a){return vo.post("/api/gynae/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Co.unPayBooking=function(e){return vo.post("/api/gynae/book/unpaybooking?id=".concat(e))},Co.getShouldRefundsCount=function(){return vo.get("/api/gynae/book/getshouldrefundscount")},Co.manualRefundBooking=function(e){return vo.post("/api/gynae/payment/manualrefundpayment",{bookingId:e})},Co.refundBooking=function(e){return vo.post("/api/gynae/payment/refundpayment",{bookingId:e})},Co.getBookingsStatsByDateStr=function(e){return vo.get("/api/gynae/book/getbookingsstatsbydatestr?date=".concat(e))},Co.getBookingsCountByDateStr=function(e){return vo.get("/api/gynae/book/getbookingscountbydatestr?date=".concat(e))},Co.getAllBookingsCountAll=function(){return vo.get("/api/gynae/book/getallbookingscountall")},Co.getBookingsCountByDateStrandTime=function(e,t,n){return vo.get("/api/gynae/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Co.getBookingsByDateStrandTime=function(e,t){return vo.get("/api/gynae/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Co.getAllBookingsCountByDateStr=function(e){return vo.get("/api/gynae/book/getallbookingscountbydatestr?date=".concat(e))},Co.getAllBookingsCountByDateStrandTime=function(e,t,n){return vo.get("/api/gynae/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Co.getAllBookingsByDateStrandTime=function(e,t){return vo.get("/api/gynae/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Co.changeBackToBookingMade=function(e){return vo.post("/api/gynae/book/changebacktobookingmade?id=".concat(e))},Co.changeToPatientAttended=function(e){return vo.post("/api/gynae/book/changetopatientattended?id=".concat(e))},Co.updateBooking=function(e){return vo.post("/api/gynae/book/updatebookappointment",e)},Co.updateBookingTime=function(e){return vo.post("/api/gynae/book/updatebookappointmenttime",e)},Co.deleteBooking=function(e){return vo.post("/api/gynae/book/deletebookappointment?id=".concat(e))},Co.unDeleteBooking=function(e){return vo.post("/api/gynae/book/undeletebookappointment?id=".concat(e))},Co.getBookingsByRef=function(e){return vo.get("/api/gynae/book/getbookingsbyref?ref=".concat(e))},Co.getBookingById=function(e){return vo.get("/api/gynae/book/getbookingbyid?id=".concat(e))},Co.getAllBookings=function(e){return e||(e=25),vo.get("/api/gynae/book/getallbookings?limit=".concat(e))},Co.getDeletedBookings=function(e){return e||(e=25),vo.get("/api/gynae/book/getdeletedbookings?limit=".concat(e))},Co.getTodayBookings=function(){return vo.get("/api/gynae/book/gettodaybookings")},Co.getOldBookings=function(e){return e||(e=25),vo.get("/api/gynae/book/getoldbookings?limit=".concat(e))},Co.getFutureBookings=function(e){return e||(e=25),vo.get("/api/gynae/book/getfuturebookings?limit=".concat(e))},Co.getRecentBookings=function(){return vo.get("/api/gynae/book/getrecentbookings")},Co.getRecentBookingsAll=function(e){return e||(e=25),vo.get("/api/gynae/book/getrecentbookingsall?limit=".concat(e))};var So=n(143),Bo=function e(){Object(ne.a)(this,e)};Bo.downloadGynaeRegForm=function(e){return vo.get("/api/pdf/downloadgynaeregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Bo.downloadCovidForm1=function(e){return vo.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Bo.downloadCovidForm2=function(e){return vo.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},Bo.downloadPdfResult=function(e){return vo.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},Bo.downloadPdfCert=function(e){return vo.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},Bo.downloadPdfLabReport=function(e){return vo.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var To=n(349),No=n.n(To),wo=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Do(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Ro(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Lo(e){var t=wo(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Co.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Ro,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"OTC Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Do,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Po=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Ao=function e(){Object(ne.a)(this,e)};Ao.downloadBloodRegForm=function(e){return Po.get("/api/pdf/downloadbloodregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Ao.downloadPdfLabReport=function(e){return Po.get("/api/pdf/downloadpdflabreport?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var Io=n(139),_o=n(302),Fo=n.n(_o),Eo=function e(){Object(ne.a)(this,e)};Eo.setClinicNotes=function(e,t){return Po.post("/api/blood/book/setclinicnotes",{bookingId:e,notes:t})},Eo.getAllCodes=function(){return Po.get("/api/medex/invoice/getallbloodcodesadmin")},Eo.getBloodReportsByBookingId=function(e){return Po.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Eo.getNewBloodResultsCount=function(){return Po.get("/api/blood/book/getnewbloodresultscount")},Eo.getSentBloodReports=function(){return Po.get("/api/blood/book/getsentbloodreports")},Eo.getArchivedBloodReports=function(){return Po.get("/api/blood/book/getarchivedbloodreports")},Eo.getNewMatchedBloodReports=function(){return Po.get("/api/blood/book/getnewmatchedbloodreports")},Eo.getArchivedMatchedBloodReports=function(){return Po.get("/api/blood/book/getarchivedmatchedbloodreports")},Eo.getNewUnmatchedBloodReports=function(){return Po.get("/api/blood/book/getnewunmatchedbloodreports")},Eo.getArchivedUnmatchedBloodReports=function(){return Po.get("/api/blood/book/getarchivedunmatchedbloodreports")},Eo.sendBloodReportEmail=function(e,t,n){return Po.post("/api/blood/book/sendbloodreportemail?id=".concat(e),{email:t,notes:n})},Eo.updateBloodReport=function(e,t,n){return Po.post("/api/blood/book/updatebloodreport?id=".concat(e),{email:t,notes:n})},Eo.archiveBloodReport=function(e){return Po.post("/api/blood/book/archivebloodreport?id=".concat(e))},Eo.unArchiveBloodReport=function(e){return Po.post("/api/blood/book/unarchivebloodreport?id=".concat(e))},Eo.addNewBooking=function(e){return Po.post("/api/blood/book/addnewbooking",e)},Eo.sendRegFormEmail=function(e){return Po.post("/api/blood/book/sendregformemail?id=".concat(e))},Eo.sendForPrint=function(e){return Po.post("/api/blood/book/sendforprint?id=".concat(e))},Eo.changeDepositBooking=function(e,t){return Po.post("/api/blood/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},Eo.manualRefundBooking=function(e){return Po.post("/api/blood/payment/manualrefundpayment",{bookingId:e})},Eo.payBooking=function(e,t,n,a){return Po.post("/api/blood/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Eo.unPayBooking=function(e){return Po.post("/api/blood/book/unpaybooking?id=".concat(e))},Eo.getShouldRefundsCount=function(){return Po.get("/api/blood/book/getshouldrefundscount")},Eo.refundBooking=function(e){return Po.post("/api/blood/payment/refundpayment",{bookingId:e})},Eo.getBookingsStatsByDateStr=function(e){return Po.get("/api/blood/book/getbookingsstatsbydatestr?date=".concat(e))},Eo.getBookingsCountByDateStr=function(e){return Po.get("/api/blood/book/getbookingscountbydatestr?date=".concat(e))},Eo.getAllBookingsCountAll=function(){return Po.get("/api/blood/book/getallbookingscountall")},Eo.getBookingsCountByDateStrandTime=function(e,t,n){return Po.get("/api/blood/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Eo.getBookingsByDateStrandTime=function(e,t){return Po.get("/api/blood/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Eo.getAllBookingsCountByDateStr=function(e){return Po.get("/api/blood/book/getallbookingscountbydatestr?date=".concat(e))},Eo.getAllBookingsCountByDateStrandTime=function(e,t,n){return Po.get("/api/blood/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Eo.getAllBookingsByDateStrandTime=function(e,t){return Po.get("/api/blood/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Eo.changeBackToBookingMade=function(e){return Po.post("/api/blood/book/changebacktobookingmade?id=".concat(e))},Eo.changeToPatientAttended=function(e){return Po.post("/api/blood/book/changetopatientattended?id=".concat(e))},Eo.changeToCompleted=function(e){return Po.post("/api/blood/book/changetocompleted?id=".concat(e))},Eo.updateBooking=function(e){return Po.post("/api/blood/book/updatebookappointment",e)},Eo.updateBookingTime=function(e){return Po.post("/api/blood/book/updatebookappointmenttime",e)},Eo.deleteBooking=function(e){return Po.post("/api/blood/book/deletebookappointment?id=".concat(e))},Eo.unDeleteBooking=function(e){return Po.post("/api/blood/book/undeletebookappointment?id=".concat(e))},Eo.getBookingsByRef=function(e){return Po.get("/api/blood/book/getbookingsbyref?ref=".concat(e))},Eo.getBookingById=function(e){return Po.get("/api/blood/book/getbookingbyid?id=".concat(e))},Eo.getAllBookings=function(e){return e||(e=25),Po.get("/api/blood/book/getallbookings?limit=".concat(e))},Eo.getDeletedBookings=function(e){return e||(e=25),Po.get("/api/blood/book/getdeletedbookings?limit=".concat(e))},Eo.getTodayBookings=function(){return Po.get("/api/blood/book/gettodaybookings")},Eo.getLiveBookings=function(){return Po.get("/api/blood/book/getlivebookings")},Eo.getCompletedBookings=function(e){return Po.get("/api/blood/book/getcompletedbookings?limit=".concat(e))},Eo.getOldBookings=function(e){return e||(e=25),Po.get("/api/blood/book/getoldbookings?limit=".concat(e))},Eo.getFutureBookings=function(e){return e||(e=25),Po.get("/api/blood/book/getfuturebookings?limit=".concat(e))},Eo.getRecentBookings=function(){return Po.get("/api/blood/book/getrecentbookings")},Eo.getRecentBookingsAll=function(e){return e||(e=25),Po.get("/api/blood/book/getrecentbookingsall?limit=".concat(e))};var Wo=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Mo=function e(){Object(ne.a)(this,e)};Mo.addNewBooking=function(e){return Wo.post("/api/gp/book/addnewbooking",e)},Mo.sendRegFormEmail=function(e){return Wo.post("/api/gp/book/sendregformemail?id=".concat(e))},Mo.payBooking=function(e,t,n,a){return Wo.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Mo.unPayBooking=function(e){return Wo.post("/api/gp/book/unpaybooking?id=".concat(e))},Mo.getShouldRefundsCount=function(){return Wo.get("/api/gp/book/getshouldrefundscount?")},Mo.refundBooking=function(e){return Wo.post("/api/gp/payment/refundpayment",{bookingId:e})},Mo.getBookingsStatsByDateStr=function(e){return Wo.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},Mo.getBookingsCountByDateStr=function(e){return Wo.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},Mo.getAllBookingsCountAll=function(){return Wo.get("/api/gp/book/getallbookingscountall")},Mo.getBookingsCountByDateStrandTime=function(e,t,n){return Wo.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Mo.getBookingsByDateStrandTime=function(e,t){return Wo.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Mo.getAllBookingsCountByDateStr=function(e){return Wo.get("/api/admin/book/getallbookingscountbydatestr?date=".concat(e))},Mo.getAllBookingsCountByDateStrandTime=function(e,t,n){return Wo.get("/api/admin/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Mo.getAllBookingsByDateStrandTime=function(e,t){return Wo.get("/api/admin/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Mo.changeBackToBookingMade=function(e){return Wo.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},Mo.changeToPatientAttended=function(e){return Wo.post("/api/gp/book/changetopatientattended?id=".concat(e))},Mo.updateBooking=function(e){return Wo.post("/api/gp/book/updatebookappointment",e)},Mo.updateBookingTime=function(e){return Wo.post("/api/gp/book/updatebookappointmenttime",e)},Mo.deleteBooking=function(e){return Wo.post("/api/gp/book/deletebookappointment?id=".concat(e))},Mo.unDeleteBooking=function(e){return Wo.post("/api/gp/book/undeletebookappointment?id=".concat(e))},Mo.getBookingsByRef=function(e){return Wo.get("/api/admin/book/getbookingsbyref?ref=".concat(e))},Mo.getBookingById=function(e){return Wo.get("/api/admin/book/getbookingbyid?id=".concat(e))},Mo.getAllBookings=function(e){return e||(e=25),Wo.get("/api/admin/book/getallbookings?limit=".concat(e))},Mo.searchAllBookings=function(e){return Wo.post("/api/admin/book/searchallbookings",{filter:e})},Mo.getDeletedBookings=function(e){return e||(e=25),Wo.get("/api/admin/book/getdeletedbookings?limit=".concat(e))},Mo.getTodayBookings=function(){return Wo.get("/api/admin/book/gettodaybookings")},Mo.getOldBookings=function(e){return e||(e=25),Wo.get("/api/admin/book/getoldbookings?limit=".concat(e))},Mo.getFutureBookings=function(e){return e||(e=25),Wo.get("/api/admin/book/getfuturebookings?limit=".concat(e))},Mo.getRecentBookings=function(){return Wo.get("/api/admin/book/getrecentbookings")},Mo.getRecentBookingsAll=function(e){return e||(e=25),Wo.get("/api/admin/book/getrecentbookingsall?limit=".concat(e))};var zo=n(38),Go=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Ho(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Uo(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Yo(e){var t=Go(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Eo.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Uo,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"OTC Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Ho,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Vo=n(377),Ko=n.n(Vo),qo=(n(1197),oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}})),Jo=function e(){Object(ne.a)(this,e)};Jo.downloadGPRegForm=function(e){return qo.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Xo=n(350),$o=n.n(Xo),Qo=function e(){Object(ne.a)(this,e)};Qo.setClinicNotes=function(e,t){return qo.post("/api/gp/book/setclinicnotes",{bookingId:e,notes:t})},Qo.getBloodReportsByBookingId=function(e){return qo.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Qo.addNewBooking=function(e){return qo.post("/api/gp/book/addnewbooking",e)},Qo.sendRegFormEmail=function(e){return qo.post("/api/gp/book/sendregformemail?id=".concat(e))},Qo.payBooking=function(e,t,n,a){return qo.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Qo.unPayBooking=function(e){return qo.post("/api/gp/book/unpaybooking?id=".concat(e))},Qo.getShouldRefundsCount=function(){return qo.get("/api/gp/book/getshouldrefundscount?")},Qo.refundBooking=function(e){return qo.post("/api/gp/payment/refundpayment",{bookingId:e})},Qo.getBookingsStatsByDateStr=function(e){return qo.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},Qo.getBookingsCountByDateStr=function(e){return qo.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},Qo.getAllBookingsCountAll=function(){return qo.get("/api/gp/book/getallbookingscountall")},Qo.getBookingsCountByDateStrandTime=function(e,t,n){return qo.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Qo.getBookingsByDateStrandTime=function(e,t){return qo.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Qo.getAllBookingsCountByDateStr=function(e){return qo.get("/api/gp/book/getallbookingscountbydatestr?date=".concat(e))},Qo.getAllBookingsCountByDateStrandTime=function(e,t,n){return qo.get("/api/gp/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Qo.getAllBookingsByDateStrandTime=function(e,t){return qo.get("/api/gp/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Qo.changeBackToBookingMade=function(e){return qo.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},Qo.changeToPatientAttended=function(e){return qo.post("/api/gp/book/changetopatientattended?id=".concat(e))},Qo.updateBooking=function(e){return qo.post("/api/gp/book/updatebookappointment",e)},Qo.updateBookingTime=function(e){return qo.post("/api/gp/book/updatebookappointmenttime",e)},Qo.deleteBooking=function(e){return qo.post("/api/gp/book/deletebookappointment?id=".concat(e))},Qo.unDeleteBooking=function(e){return qo.post("/api/gp/book/undeletebookappointment?id=".concat(e))},Qo.getBookingsByRef=function(e){return qo.get("/api/gp/book/getbookingsbyref?ref=".concat(e))},Qo.getBookingById=function(e){return qo.get("/api/gp/book/getbookingbyid?id=".concat(e))},Qo.getAllBookings=function(e){return e||(e=25),qo.get("/api/gp/book/getallbookings?limit=".concat(e))},Qo.getDeletedBookings=function(e){return e||(e=25),qo.get("/api/gp/book/getdeletedbookings?limit=".concat(e))},Qo.getTodayBookings=function(){return qo.get("/api/gp/book/gettodaybookings")},Qo.getOldBookings=function(e){return e||(e=25),qo.get("/api/gp/book/getoldbookings?limit=".concat(e))},Qo.getFutureBookings=function(e){return e||(e=25),qo.get("/api/gp/book/getfuturebookings?limit=".concat(e))},Qo.getRecentBookings=function(){return qo.get("/api/gp/book/getrecentbookings")},Qo.getRecentBookingsAll=function(e){return e||(e=25),qo.get("/api/gp/book/getrecentbookingsall?limit=".concat(e))};var Zo=n(144),ei=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function ti(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function ni(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function ai(e){var t=ei(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Qo.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:ni,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:ti,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var oi=n(1277),ii=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),ci=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function ri(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function li(e){var t,n=ii(),c=i.a.useContext(C),r=Object(l.a)(c,2),s=r[0],d=r[1],b=Object(o.useState)(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),S=Object(l.a)(v,2),w=(S[0],S[1],i.a.useState(!1)),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(!1),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(!1),M=Object(l.a)(W,2),z=M[0],G=M[1],H=i.a.useState(null),U=Object(l.a)(H,2),Y=U[0],X=U[1],$=i.a.useState({edit:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({delete:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState({restore:!1,person:null}),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState(!1),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ke=i.a.useState({}),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=(Qe[1],i.a.useState(!1)),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(null),it=Object(l.a)(ot,2),ct=it[0],rt=it[1],lt=i.a.useState(!1),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(!1),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=i.a.useState(!1),ft=Object(l.a)(gt,2),xt=ft[0],mt=ft[1],yt=i.a.useState(!1),kt=Object(l.a)(yt,2),vt=(kt[0],kt[1],i.a.useState(null)),Ct=Object(l.a)(vt,2),Bt=Ct[0],Tt=Ct[1],Nt=i.a.useState(!1),wt=Object(l.a)(Nt,2),Rt=wt[0],Lt=wt[1],Pt=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Lt(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Tt(n.data.invoice),Lt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Lt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(Pt(),Qt(),gn(e.booking.clinicNotes||""),kn(e.booking.clinicNotes||""),Bn(!1))}),[e.booking,e.open]);var At=i.a.useState(null),It=Object(l.a)(At,2),_t=It[0],Ft=It[1],Et=i.a.useState(null),Wt=Object(l.a)(Et,2),Mt=Wt[0],zt=Wt[1],Gt=i.a.useState(null),Kt=Object(l.a)(Gt,2),qt=Kt[0],Jt=Kt[1],Qt=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ft(null),t.prev=1,t.next=4,Qo.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&Ft(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),Zt=function(){mt(!1),X(null)},en=function(){E(!1),X(null)};Object(o.useEffect)((function(){if(ct){var e=Ne!==Object(Zo.FormatDateFromString)(ct.bookingDate)||Le!==ct.bookingTime||Fe!==ct.fullname||ze!==ct.email||Ye!==ct.phone||Je!==ct.notes;bt(e)}}),[pt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){ee({edit:!1,person:null}),bt(!1)}),500)}),[e.open]);var tn=function(e,t){if(e)Ee(t.fullname),we(Object(Zo.FormatDateFromString)(t.bookingDate)),Ae(t.bookingTime.toUpperCase()),Ge(t.email),Ve(t.phone),t.notes&&Xe(t.notes),ee({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ze,n.phone=Ye,n.fullname=Fe,n.notes=Je,n.service=Ze,n.bookingDate=Object(Zo.RevertFormatDateFromString)(Ne),n.bookingTime=Le,n.bookingRef=t.bookingRef,an(n)&&on({bookingId:a,person:n})}}else ee({edit:e,person:t}),bt(!1)},an=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingTimeError:!0}))),!t},on=function(e){ue(!0),Qo.updateBooking(e).then((function(e){ue(!1),ee({edit:!1,person:null}),at(!nt)})).catch((function(e){ue(!1),ee({edit:!1,person:null}),console.log(e)}))},cn=function(e,t){var n;e?oe({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),Qo.deleteBooking(n).then((function(e){ge(!1),oe({delete:!1,person:null}),at(!nt)})).catch((function(e){ge(!1),oe({delete:!1,person:null}),console.log(e)}))):oe({delete:e,person:t})},rn=function(e,t){var n;e?le({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Oe(!0),Qo.unDeleteBooking(n).then((function(e){Oe(!1),le({restore:!1,person:null}),at(!nt)})).catch((function(e){Oe(!1),le({restore:!1,person:null}),console.log(e)}))):le({restore:e,person:t})},ln=function(){X(ct),Tt(Bt),G(!0)};Object(o.useEffect)((function(){e.booking&&(Qo.getBookingById(e.booking._id).then((function(e){rt(e.data)})).catch((function(e){console.log(e)})),d((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[nt,s.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&rt(e.booking)}),[e.booking]);var sn,dn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Qo.unPayBooking(ct._id);case 4:ue(!1),mt(!1),at(!nt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ue(!1),mt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),bn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Qo.refundBooking(ct._id);case 4:ue(!1),un(),E(!1),at(!nt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ue(!1),E(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),un=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qo.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&d((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),jn=i.a.useState(""),pn=Object(l.a)(jn,2),hn=pn[0],gn=pn[1],fn=i.a.useState(""),xn=Object(l.a)(fn,2),On=xn[0],kn=xn[1],vn=Object(o.useState)(!1),Cn=Object(l.a)(vn,2),Sn=Cn[0],Bn=Cn[1],Tn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Bn(!0),t.next=4,Qo.setClinicNotes(e.booking._id,hn);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(kn(hn),Bn(!1),at(!nt)):Bn(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Bn(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:ct&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:ci,keepMounted:!0,onClose:function(){x(!1),k(!1),Tt(null),e.onClose()},PaperComponent:ri,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:ct.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gp/".concat(ct._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(yn.a,{style:ct.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(hn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:hn||"",onChange:function(e){gn(e.target.value)},variant:"outlined"})}),Sn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),On!==hn&&!Sn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(hn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:Tn,className:n.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Nn.GP_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GP"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:ct.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(ct.fullname)})}),ct.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:ct.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ct._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!ct.deleted||re.restore&&re.person._id===ct._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){rn(!0,ct)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:me,onClick:function(){rn(!1,ct)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:me,onClick:function(){rn(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:ct.deleted||ae.delete||Z.edit&&Z.person._id===ct._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){tn(!0,ct)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be||!dt,onClick:function(){tn(!1,ct)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){tn(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ct._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||ct.deleted||Z.edit||ae.delete&&ae.person._id===ct._id,children:[ct.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:ct.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){cn(!0,ct)},className:n.DeleteButton,children:"Delete This Record"})})}),0===ct.OTCCharges&&Object(a.jsx)(R.a,{disabled:ct.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){cn(!0,ct)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){cn(!1,ct)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ct._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){cn(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:Object(Zo.FormatDateFromString)(ct.bookingDate)}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingDateError,className:n.TextBox,value:Ne,onChange:function(e){we(e.target.value),Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingDateError:!1})),ht(!pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:ct.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingTimeError,className:n.TextBox,value:Le,onChange:function(e){Ae(e.target.value),Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingTimeError:!1})),ht(!pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:ct.fullname}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Fe,onChange:function(e){Ee(e.target.value),ht(!pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:ct.email}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ze,onChange:function(e){Ge(e.target.value),ht(!pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:null===(t=ct.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),ht(!pt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ct._id,className:n.infoData,children:ct.notes}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ct._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Je,onChange:function(e){Xe(e.target.value),ht(!pt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(sn=ct.status,"booked"===sn?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===sn?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===ct.status&&!(Z.edit&&Z.person._id===ct._id)&&!ct.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:be,style:{width:"300px"},onClick:function(e){return t=ct._id,ue(!0),void Qo.changeBackToBookingMade(t).then((function(e){ue(!1),at(!nt)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===ct.status&&!(Z.edit&&Z.person._id===ct._id)&&!ct.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:be,style:{width:"300px"},onClick:function(e){return t=ct._id,ue(!0),void Qo.changeToPatientAttended(t).then((function(e){ue(!1),at(!nt)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:ct.deleted||Z.edit,children:Object(a.jsx)(R.a,{disabled:!ct.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ct._id,Jo.downloadGPRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:ct.deleted||Z.edit||ct.formData,children:Object(a.jsxs)(R.a,{disabled:!ct.email||ct.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ct._id,ue(!0),x(!1),Qo.sendRegFormEmail(e).then((function(e){ue(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),ue(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Rt&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Rt&&Bt&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Bt.invoiceNumber," "]}),Rt&&!Bt&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Z.edit&&Z.person._id===ct._id)&&!ct.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Rt&&!Bt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return ln()},children:"Issue Invoice"}),Rt&&Bt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Bt._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return ln()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!ct.email||ct.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Bt._id,t=ct.email,ue(!0),k(!1),wn.emailInvoice(e,t).then((function(e){ue(!1),"OK"===e.data.status&&k(!0)})).catch((function(e){console.log(e),ue(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",y&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:ct.OTCCharges&&0!==ct.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(ct.OTCCharges.toLocaleString("en-GB"))}),!(Z.edit&&Z.person._id===ct._id)&&!ct.paid&&!ct.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return X(ct),void A(!0)},children:"Pay"}),!(Z.edit&&Z.person._id===ct._id)&&ct.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:n.checkIconSmall})," ","Paid by ",ct.paidBy,"corporate"===ct.paidBy?' "'.concat(ct.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return mt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Bt&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Bt.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Bt.items)]})]})]}),_t&&_t.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),_t.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return zt(e),void Jt(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:be||he||me,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(ai,{booking:Y,open:P,price:Bt?Bt.grandTotal:null,handleClose:function(){A(!1),X(null)}}),Object(a.jsx)(Fn,{booking:Y,invoice:Bt,open:z,handleClose:function(e){G(!1),X(null),Pt()}}),Object(a.jsx)(Pc,{booking:Mt,open:qt,onClose:function(){Jt(!1),zt(null)}})]}),Object(a.jsxs)(Ht.a,{open:xt,onClose:Zt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Zt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:dn,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:F,onClose:en,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:en,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:bn,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var si=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),di=function e(){Object(ne.a)(this,e)};di.downloadSTDRegForm=function(e){return si.get("/api/pdf/downloadstdregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var bi=n(351),ui=n.n(bi),ji=function e(){Object(ne.a)(this,e)};ji.setClinicNotes=function(e,t){return si.post("/api/std/book/setclinicnotes",{bookingId:e,notes:t})},ji.getBloodReportsByBookingId=function(e){return si.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},ji.addNewBooking=function(e){return si.post("/api/std/book/addnewbooking",e)},ji.sendRegFormEmail=function(e){return si.post("/api/std/book/sendregformemail?id=".concat(e))},ji.sendForPrint=function(e){return si.post("/api/std/book/sendforprint?id=".concat(e))},ji.payBooking=function(e,t,n,a){return si.post("/api/std/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},ji.unPayBooking=function(e){return si.post("/api/std/book/unpaybooking?id=".concat(e))},ji.getShouldRefundsCount=function(){return si.get("/api/std/book/getshouldrefundscount?")},ji.refundBooking=function(e){return si.post("/api/std/payment/refundpayment",{bookingId:e})},ji.getBookingsStatsByDateStr=function(e){return si.get("/api/std/book/getbookingsstatsbydatestr?date=".concat(e))},ji.getBookingsCountByDateStr=function(e){return si.get("/api/std/book/getbookingscountbydatestr?date=".concat(e))},ji.getAllBookingsCountAll=function(){return si.get("/api/std/book/getallbookingscountall")},ji.getBookingsCountByDateStrandTime=function(e,t,n){return si.get("/api/std/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ji.getBookingsByDateStrandTime=function(e,t){return si.get("/api/std/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ji.getAllBookingsCountByDateStr=function(e){return si.get("/api/std/book/getallbookingscountbydatestr?date=".concat(e))},ji.getAllBookingsCountByDateStrandTime=function(e,t,n){return si.get("/api/std/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},ji.getAllBookingsByDateStrandTime=function(e,t){return si.get("/api/std/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},ji.changeBackToBookingMade=function(e){return si.post("/api/std/book/changebacktobookingmade?id=".concat(e))},ji.changeToPatientAttended=function(e){return si.post("/api/std/book/changetopatientattended?id=".concat(e))},ji.changeToCompleted=function(e){return si.post("/api/std/book/changetocompleted?id=".concat(e))},ji.updateBooking=function(e){return si.post("/api/std/book/updatebookappointment",e)},ji.updateBookingTime=function(e){return si.post("/api/std/book/updatebookappointmenttime",e)},ji.deleteBooking=function(e){return si.post("/api/std/book/deletebookappointment?id=".concat(e))},ji.unDeleteBooking=function(e){return si.post("/api/std/book/undeletebookappointment?id=".concat(e))},ji.getBookingsByRef=function(e){return si.get("/api/std/book/getbookingsbyref?ref=".concat(e))},ji.getBookingById=function(e){return si.get("/api/std/book/getbookingbyid?id=".concat(e))},ji.getAllBookings=function(e){return e||(e=25),si.get("/api/std/book/getallbookings?limit=".concat(e))},ji.getDeletedBookings=function(e){return e||(e=25),si.get("/api/std/book/getdeletedbookings?limit=".concat(e))},ji.getTodayBookings=function(){return si.get("/api/std/book/gettodaybookings")},ji.getLiveBookings=function(){return si.get("/api/std/book/getlivebookings")},ji.getCompletedBookings=function(e){return si.get("/api/std/book/getcompletedbookings?limit=".concat(e))},ji.getOldBookings=function(e){return e||(e=25),si.get("/api/std/book/getoldbookings?limit=".concat(e))},ji.getFutureBookings=function(e){return e||(e=25),si.get("/api/std/book/getfuturebookings?limit=".concat(e))},ji.getRecentBookings=function(){return si.get("/api/std/book/getrecentbookings")},ji.getRecentBookingsAll=function(e){return e||(e=25),si.get("/api/std/book/getrecentbookingsall?limit=".concat(e))};var pi=n(120),hi=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function gi(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function fi(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function xi(e){var t=hi(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,ji.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:fi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:gi,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var mi=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Oi=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function yi(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function ki(e){var t,n,c=mi(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=Object(o.useState)(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=(y[0],y[1],i.a.useState(!1)),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(null),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState({edit:!1,person:null}),z=Object(l.a)(M,2),G=z[0],H=z[1],U=i.a.useState({delete:!1,person:null}),Y=Object(l.a)(U,2),X=Y[0],$=Y[1],Q=i.a.useState({restore:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(!1),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(!1),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=i.a.useState({}),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(""),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(""),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1],Re=i.a.useState(""),Le=Object(l.a)(Re,2),Ae=Le[0],Ie=Le[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(""),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(""),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],qe=i.a.useState(""),Je=Object(l.a)(qe,2),Xe=Je[0],$e=Je[1],Qe=i.a.useState(""),Ze=Object(l.a)(Qe,2),et=Ze[0],nt=Ze[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],rt=i.a.useState(null),lt=Object(l.a)(rt,2),st=lt[0],dt=lt[1],bt=i.a.useState(!1),ut=Object(l.a)(bt,2),jt=ut[0],pt=ut[1],ht=i.a.useState(!1),gt=Object(l.a)(ht,2),ft=gt[0],xt=gt[1],mt=i.a.useState(!1),yt=Object(l.a)(mt,2),kt=yt[0],vt=yt[1],Ct=i.a.useState(!1),Bt=Object(l.a)(Ct,2),Tt=(Bt[0],Bt[1],function(){vt(!1),W(null)}),Nt=function(){I(!1),W(null)};Object(o.useEffect)((function(){if(st){var e=Oe!==Object(pi.FormatDateFromString)(st.bookingDate)||Se!==st.bookingTime||we!==st.fullname||Ae!==st.email||Xe!==st.gender||Ee!==st.phone||Ge!==st.notes||Ve!==st.packageName||et!==st.birthDate;pt(e)}}),[ft]),Object(o.useEffect)((function(){e.open||setTimeout((function(){H({edit:!1,person:null}),pt(!1)}),500)}),[e.open]);var wt=function(e,t){var n;if(e)De(t.fullname),ke(Object(pi.FormatDateFromString)(t.bookingDate)),Be(t.bookingTime.toUpperCase()),Ie(t.email),We(t.phone),$e((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),nt(Object(pi.FormatDateFromString)(t.birthDate)),Ke(t.packageName),t.notes&&He(t.notes),H({edit:e,person:t});else if(e||t){if(!e&&t){var a={},o=t._id;a.email=Ae,a.phone=Ee,a.fullname=we,a.notes=Ge,a.packageName=Ve,a.bookingDate=Object(pi.RevertFormatDateFromString)(Oe),a.bookingTime=Se,a.bookingRef=t.bookingRef,a.gender=Xe,a.birthDate=Object(pi.RevertFormatDateFromString)(et),Lt(a)&&Pt({bookingId:o,person:a})}}else H({edit:e,person:t}),pt(!1)},Rt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Lt=function(e){var t=!1;return Rt(e.bookingDate)||(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{bookingTimeError:!0}))),e.birthDate&&!Rt(e.birthDate)&&(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{birthDateError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{genderError:!0}))),!t},Pt=function(e){ie(!0),ji.updateBooking(e).then((function(e){ie(!1),H({edit:!1,person:null}),ct(!it)})).catch((function(e){ie(!1),H({edit:!1,person:null}),console.log(e)}))},At=function(e,t){var n;e?$({delete:e,person:t}):e||t?!e&&t&&(n=t._id,se(!0),ji.deleteBooking(n).then((function(e){se(!1),$({delete:!1,person:null}),ct(!it)})).catch((function(e){se(!1),$({delete:!1,person:null}),console.log(e)}))):$({delete:e,person:t})},It=function(e,t){var n;e?te({restore:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),ji.unDeleteBooking(n).then((function(e){je(!1),te({restore:!1,person:null}),ct(!it)})).catch((function(e){je(!1),te({restore:!1,person:null}),console.log(e)}))):te({restore:e,person:t})},_t=function(e,t){ie(!0),ji.changeToPatientAttended(t).then((function(e){ie(!1),ct(!it)})).catch((function(e){console.log(e),ie(!1)}))};Object(o.useEffect)((function(){e.booking&&(ji.getBookingById(e.booking._id).then((function(e){dt(e.data)})).catch((function(e){console.log(e)})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[it,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&dt(e.booking)}),[e.booking]);var Ft=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,ji.unPayBooking(st._id);case 4:ie(!1),vt(!1),ct(!it),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ie(!1),vt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Et=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,ji.refundBooking(st._id);case 4:ie(!1),Wt(),I(!1),ct(!it),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ie(!1),I(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ji.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&b((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Mt=i.a.useState(null),zt=Object(l.a)(Mt,2),Gt=zt[0],Kt=zt[1],qt=i.a.useState(!1),Jt=Object(l.a)(qt,2),Qt=Jt[0],Zt=Jt[1],en=i.a.useState(!1),tn=Object(l.a)(en,2),an=tn[0],on=tn[1],cn=i.a.useState(!1),rn=Object(l.a)(cn,2),ln=rn[0],sn=rn[1],dn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Zt(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Kt(n.data.invoice),Zt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Zt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(dn(),Bn(),Pn(e.booking.clinicNotes||""),En(e.booking.clinicNotes||""),Gn(!1))}),[e.booking,e.open]);var bn,un=i.a.useState(null),jn=Object(l.a)(un,2),pn=jn[0],hn=jn[1],gn=i.a.useState(null),fn=Object(l.a)(gn,2),xn=fn[0],On=fn[1],kn=i.a.useState(null),vn=Object(l.a)(kn,2),Cn=vn[0],Sn=vn[1],Bn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return hn(null),t.prev=1,t.next=4,ji.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&hn(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),Tn=function(){W(st),Kt(Gt),on(!0)},Dn=i.a.useState(""),Rn=Object(l.a)(Dn,2),Ln=Rn[0],Pn=Rn[1],An=i.a.useState(""),In=Object(l.a)(An,2),_n=In[0],En=In[1],Wn=Object(o.useState)(!1),Mn=Object(l.a)(Wn,2),zn=Mn[0],Gn=Mn[1],Hn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Gn(!0),t.next=4,ji.setClinicNotes(e.booking._id,Ln);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(En(Ln),Gn(!1),ct(!it)):Gn(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Gn(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:st&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Oi,keepMounted:!0,onClose:function(){m(!1),sn(!1),Kt(null),e.onClose()},PaperComponent:yi,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:st.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/std/".concat(st._id)),h(!0),setTimeout((function(){h(!1)}),1500)},"aria-label":"delete",className:c.margin,size:"small",children:Object(a.jsx)(yn.a,{style:st.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!p,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(Ln?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:Ln||"",onChange:function(e){Pn(e.target.value)},variant:"outlined"})}),zn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),_n!==Ln&&!zn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(Ln?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:Hn,className:c.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Nn.STD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"STD"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:st.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(st.fullname)})}),st.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:st.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:c.infoDetails,children:Object(a.jsxs)("ul",{className:c.ul,children:[Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===st._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!st.deleted||ee.restore&&ee.person._id===st._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){It(!0,st)},className:c.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ue,onClick:function(){It(!1,st)},className:c.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ue,onClick:function(){It(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:st.deleted||X.delete||G.edit&&G.person._id===st._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){wt(!0,st)},className:c.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(G.edit&&G.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:oe||!jt,onClick:function(){wt(!1,st)},className:c.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(G.edit&&G.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:oe,onClick:function(){wt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===st._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||st.deleted||G.edit||X.delete&&X.person._id===st._id,children:[st.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:st.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){At(!0,st)},className:c.DeleteButton,children:"Delete This Record"})})}),0===st.OTCCharges&&Object(a.jsx)(R.a,{disabled:st.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){At(!0,st)},className:c.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:le,onClick:function(){At(!1,st)},className:c.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===st._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:le,onClick:function(){At(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:Object(pi.FormatDateFromString)(st.bookingDate)}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingDateError,className:c.TextBox,value:Oe,onChange:function(e){ke(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{bookingDateError:!1})),xt(!ft)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingTimeError,className:c.TextBox,value:Se,onChange:function(e){Be(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{bookingTimeError:!1})),xt(!ft)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.fullname}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:we,onChange:function(e){De(e.target.value),xt(!ft)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.email}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ae,onChange:function(e){Ie(e.target.value),xt(!ft)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:null===(t=st.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ee,onChange:function(e){We(e.target.value),xt(!ft)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.notes}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ge,onChange:function(e){He(e.target.value),xt(!ft)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{style:{marginBottom:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:null===(n=st.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.genderError,className:c.TextBox,value:Xe,onChange:function(e){$e(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{genderError:!1})),xt(!ft)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,md:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:Object(pi.FormatDateFromString)(st.birthDate)}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.birthDateError,className:c.TextBox,value:et,onChange:function(e){nt(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{birthDateError:!1})),xt(!ft)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.packageName}),Object(a.jsx)("span",{hidden:!(G.edit&&G.person._id===st._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ve,onChange:function(e){Ke(e.target.value),xt(!ft)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"STATUS"})," ",(bn=st.status,"booked"===bn?Object(a.jsx)("div",{className:c.BookedLabel,children:" Booking Made "}):"patient_attended"===bn?Object(a.jsx)("div",{className:c.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===bn?Object(a.jsx)("div",{className:c.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===st.status&&!(G.edit&&G.person._id===st._id)&&!st.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:oe,style:{width:"300px"},onClick:function(e){return t=st._id,ie(!0),void ji.changeBackToBookingMade(t).then((function(e){ie(!1),ct(!it)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:oe,style:{width:"200px",margin:"0"},className:c.EditButton,onClick:function(e){return t=st._id,ie(!0),void ji.changeToCompleted(t).then((function(e){ie(!1),ct(!it)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change To Completed"})]}),"booked"===st.status&&!(G.edit&&G.person._id===st._id)&&!st.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:oe,style:{width:"300px"},onClick:function(e){return _t(0,st._id)},children:"Change To Patient Attended"}),"report_sent"===st.status&&!(G.edit&&G.person._id===st._id)&&!st.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:oe,style:{width:"300px"},onClick:function(e){return _t(0,st._id)},children:"Change Back To Patient Attended"})]}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:G.edit&&G.person._id===st._id,className:c.infoData,children:st.estimatedPrice})]}),Object(a.jsx)("li",{hidden:st.deleted||G.edit,children:Object(a.jsxs)(R.a,{disabled:"printing"===st.printStatus||"preparing"===st.printStatus,startIcon:Object(a.jsx)(Dt.a,{}),endIcon:"printed"===st.printStatus?Object(a.jsx)(tt.a,{style:{color:"green"}}):null,type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){ji.sendForPrint(st._id),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),500),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),1500),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),3e3),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),5e3),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),1e4),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),15e3),setTimeout(Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji.getBookingById(st._id);case 2:t=e.sent,dt(Object(N.a)(Object(N.a)({},st),{},{printStatus:null===t||void 0===t?void 0:t.data.printStatus}));case 4:case"end":return e.stop()}}),e)}))),2e4)},className:c.DownloadForm,children:[!st.printStatus&&"Print LAB Label","printed"===st.printStatus&&"Print LAB Label Again","printing"===st.printStatus&&"Printing","preparing"===st.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:st.deleted||G.edit,children:Object(a.jsx)(R.a,{disabled:!st.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=st._id,di.downloadSTDRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:c.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:st.deleted||G.edit||st.formData,children:Object(a.jsxs)(R.a,{disabled:!st.email||st.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=st._id,ie(!0),m(!1),ji.sendRegFormEmail(e).then((function(e){ie(!1),"OK"===e.data.status&&m(!0)})).catch((function(e){console.log(e),ie(!1)}))},className:c.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",x&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Qt&&Object(a.jsx)("span",{className:c.invoiceNumber,children:" ... "}),Qt&&Gt&&Object(a.jsxs)("span",{className:c.invoiceNumber,children:[" ",Gt.invoiceNumber," "]}),Qt&&!Gt&&Object(a.jsxs)("span",{className:c.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(G.edit&&G.person._id===st._id)&&!st.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Qt&&!Gt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:c.PayButton,onClick:function(){return Tn()},children:"Issue Invoice"}),Qt&&Gt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:c.printInvoiceButton,onClick:function(){return e=Gt._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.editInvoiceButton,onClick:function(){return Tn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!st.email||st.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Gt._id,t=st.email,ie(!0),sn(!1),wn.emailInvoice(e,t).then((function(e){ie(!1),"OK"===e.data.status&&sn(!0)})).catch((function(e){console.log(e),ie(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",ln&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:st.OTCCharges&&0!==st.OTCCharges?c.infoDataCharges:c.infoDataChargesHigher,children:"\xa3".concat(st.OTCCharges.toLocaleString("en-GB"))}),!(G.edit&&G.person._id===st._id)&&!st.paid&&!st.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.PayButton,onClick:function(e){return st._id,W(st),void w(!0)},children:"Pay"}),!(G.edit&&G.person._id===st._id)&&st.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:c.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:c.checkIconSmall})," ","Paid by ",st.paidBy,"corporate"===st.paidBy?' "'.concat(st.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return vt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Gt&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Gt.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"125px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{width:"125px",display:"inline-block",fontWeight:"500"},children:" TOTAL "}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" \xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Gt.items)]})]})]}),pn&&pn.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),pn.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return On(e),void Sn(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:c.backdrop,open:oe||le||ue,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(xi,{booking:E,open:S,price:Gt?Gt.grandTotal:null,handleClose:function(){w(!1),W(null)}}),Object(a.jsx)(Fn,{booking:E,invoice:Gt,open:an,handleClose:function(e){on(!1),W(null),dn()}}),Object(a.jsx)(Pc,{booking:xn,open:Cn,onClose:function(){Sn(!1),On(null)}})]}),Object(a.jsxs)(Ht.a,{open:kt,onClose:Tt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Tt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ft,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:A,onClose:Nt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Nt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Et,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var vi=function(e,t){return e=new Date(e),new Date(e.getTime()+60*t*1e3)},Ci=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},itemTitle:{fontWeight:"500",color:"#555"},itemData:{paddingLeft:"10px",fontWeight:"600",color:"#127512"}}}));function Si(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Bi(e){var t=Ci(),n=i.a.useContext(C),o=Object(l.a)(n,2),c=(o[0],o[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(null),u=Object(l.a)(b,2),j=u[0],p=u[1];i.a.useEffect((function(){d(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if(e[t].timeStamp)return e[t].timeStamp;return null}(e.bloodReports)),p(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if(e[t].emailSentTimeStamp)return e[t].emailSentTimeStamp;return null}(e.bloodReports))}),[e.booking,e.bloodReports]);var h=function(){d(null),p(null),e.handleClose()};return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:h,PaperComponent:Si,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(he.a,{style:{color:"#f50057",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"12px",fontWeight:"800"},children:[" ","Audit Trail"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)("div",{style:{height:"370px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:4,alignItems:"flex-start",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["PATIENT BOOKING TIMESTAMP :"," "]}),Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(e.booking.timeStamp,"isoDateTime")," "]})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["BOOKED DATE AND TIME :"," "]}),Object(a.jsx)("span",{className:t.itemData,children:vn()(function(e){var t=new Date(e.bookingDate);return t.setHours(e.bookingTimeNormalized.substr(0,2)),t.setMinutes(e.bookingTimeNormalized.substr(3,2)),t.setSeconds(0),t.setMilliseconds(0),t}(e.booking),"isoDateTime")})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP ATTENDED :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(e.booking.samplingTimeStamp,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SAMPLE TAKEN :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(vi(e.booking.samplingTimeStamp,5),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - COLLECTED BY COURIER :"," "]}),e.booking.samplingTimeStamp?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(vi(e.booking.samplingTimeStamp,35),"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - RESULTS RECEIVED :"," "]}),s?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(s,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("span",{className:t.itemTitle,children:["TIMESTAMP - SENT TO PATIENT :"," "]}),j?Object(a.jsxs)("span",{className:t.itemData,children:[" ",vn()(j,"isoDateTime")," "]}):Object(a.jsx)("span",{className:t.itemData,children:" - "})]})]})})}),Object(a.jsx)($t.a,{children:Object(a.jsx)(R.a,{onClick:h,color:"default",children:"Back"})})]})})})}var Ti=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Ni=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function wi(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Di(e){var t,n,c,r,s,d,b,u,j=Ti(),p=i.a.useContext(C),h=Object(l.a)(p,2),g=h[0],f=h[1],x=Object(o.useState)(!1),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(!1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=(P[0],P[1],i.a.useState(!1)),I=Object(l.a)(A,2),_=I[0],F=I[1],E=i.a.useState(!1),W=Object(l.a)(E,2),M=W[0],z=W[1],G=i.a.useState(null),H=Object(l.a)(G,2),Y=H[0],X=H[1],$=i.a.useState({edit:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({delete:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState({restore:!1,person:null}),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),ge=pe[0],fe=pe[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState({}),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(""),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1],Re=i.a.useState(""),Le=Object(l.a)(Re,2),Ae=Le[0],Ie=Le[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(""),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(""),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],qe=i.a.useState(""),Je=Object(l.a)(qe,2),Xe=Je[0],$e=Je[1],Qe=i.a.useState(""),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=i.a.useState(""),at=Object(l.a)(nt,2),ot=at[0],it=at[1],ct=i.a.useState(!1),rt=Object(l.a)(ct,2),lt=rt[0],st=rt[1],dt=i.a.useState(null),bt=Object(l.a)(dt,2),ut=bt[0],jt=bt[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=i.a.useState(!1),mt=Object(l.a)(xt,2),yt=mt[0],kt=mt[1],vt=i.a.useState(!1),Ct=Object(l.a)(vt,2),Bt=Ct[0],Tt=Ct[1],Nt=i.a.useState(!1),wt=Object(l.a)(Nt,2),Rt=wt[0],Lt=wt[1],Pt=function(){Tt(!1),X(null)},At=function(){z(!1),X(null)};Object(o.useEffect)((function(){if(ut){var e=we!==Object(zo.FormatDateFromString)(ut.bookingDate)||Ae!==ut.bookingTime||Ee!==ut.fullname||Mn!==Object(zo.FormatDateFromString)(ut.birthDate)||Ge!==ut.email||Ve!==ut.phone||Xe!==ut.gender||et!==ut.notes||ot!==ut.packageName;ft(e)}}),[yt]),Object(o.useEffect)((function(){e.open?e.open:setTimeout((function(){ee({edit:!1,person:null}),ft(!1)}),500)}),[e.open]);var It=function(e,t){var n;if(e)We(t.fullname),De(Object(zo.FormatDateFromString)(t.bookingDate)),Ie(t.bookingTime.toUpperCase()),He(t.email),Ke(t.phone),$e((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),zn(Object(zo.FormatDateFromString)(t.birthDate)),it(t.packageName),t.notes&&tt(t.notes),ee({edit:e,person:t});else if(e||t){if(!e&&t){var a={},o=t._id;a.email=Ge,a.phone=Ve,a.fullname=Ee,a.notes=et,a.birthDate=Object(zo.RevertFormatDateFromString)(Mn),a.packageName=ot,a.bookingDate=Object(zo.RevertFormatDateFromString)(we),a.bookingTime=Ae,a.bookingRef=t.bookingRef,a.gender=Xe,Ft(a)&&Et({bookingId:o,person:a})}}else ee({edit:e,person:t}),ft(!1)},_t=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Ft=function(e){console.log(e);var t=!1;return _t(e.bookingDate)||(t=!0,Be(Object(N.a)(Object(N.a)({},Se),{},{bookingDateError:!0}))),_t(e.birthDate)||(t=!0,Be(Object(N.a)(Object(N.a)({},Se),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Be(Object(N.a)(Object(N.a)({},Se),{},{bookingTimeError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Be(Object(N.a)(Object(N.a)({},Se),{},{genderError:!0}))),!t},Et=function(e){ue(!0),Eo.updateBooking(e).then((function(e){ue(!1),ee({edit:!1,person:null}),st(!lt)})).catch((function(e){ue(!1),ee({edit:!1,person:null}),console.log(e)}))},Wt=function(e,t){var n;e?oe({delete:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),Eo.deleteBooking(n).then((function(e){fe(!1),oe({delete:!1,person:null}),st(!lt)})).catch((function(e){fe(!1),oe({delete:!1,person:null}),console.log(e)}))):oe({delete:e,person:t})},Mt=function(e,t){var n;e?le({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ke(!0),Eo.unDeleteBooking(n).then((function(e){ke(!1),le({restore:!1,person:null}),st(!lt)})).catch((function(e){ke(!1),le({restore:!1,person:null}),console.log(e)}))):le({restore:e,person:t})},zt=function(e,t){ue(!0),Eo.changeToPatientAttended(t).then((function(e){ue(!1),st(!lt)})).catch((function(e){console.log(e),ue(!1)}))};Object(o.useEffect)((function(){e.booking&&(Eo.getBookingById(e.booking._id).then((function(e){jt(e.data)})).catch((function(e){console.log(e)})),f((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[lt,g.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&jt(e.booking)}),[e.booking]);var Gt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Eo.unPayBooking(ut._id);case 4:ue(!1),Tt(!1),st(!lt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ue(!1),Tt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),qt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Eo.refundBooking(ut._id);case 4:ue(!1),Jt(),z(!1),st(!lt),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ue(!1),z(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eo.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&f((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Qt=i.a.useState(null),Zt=Object(l.a)(Qt,2),en=Zt[0],tn=Zt[1],an=i.a.useState(!1),on=Object(l.a)(an,2),cn=on[0],rn=on[1],ln=i.a.useState(!1),sn=Object(l.a)(ln,2),dn=sn[0],bn=sn[1],un=i.a.useState(!1),jn=Object(l.a)(un,2),pn=jn[0],hn=jn[1],gn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,rn(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,tn(n.data.invoice),rn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),rn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(gn(),In(),Kn(e.booking.clinicNotes||""),$n(e.booking.clinicNotes||""),ta(!1))}),[e.booking,e.open]);var fn,xn=i.a.useState(null),On=Object(l.a)(xn,2),vn=On[0],Cn=On[1],Sn=i.a.useState(null),Bn=Object(l.a)(Sn,2),Tn=Bn[0],Dn=Bn[1],Rn=i.a.useState(null),Ln=Object(l.a)(Rn,2),Pn=Ln[0],An=Ln[1],In=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Cn(null),t.prev=1,t.next=4,Eo.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&Cn(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),_n=function(){X(ut),tn(en),bn(!0)},En=i.a.useState(""),Wn=Object(l.a)(En,2),Mn=Wn[0],zn=Wn[1],Gn=function(){var e=Object(T.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?50:0,ue(!0),e.prev=3,e.next=6,Eo.changeDepositBooking(ut._id,a);case 6:ue(!1),st(!lt),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),ue(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Hn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Eo.manualRefundBooking(ut._id);case 4:ue(!1),Jt(),st(!lt),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ue(!1),z(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Un=i.a.useState(""),Yn=Object(l.a)(Un,2),Vn=Yn[0],Kn=Yn[1],qn=i.a.useState(""),Jn=Object(l.a)(qn,2),Xn=Jn[0],$n=Jn[1],Qn=Object(o.useState)(!1),Zn=Object(l.a)(Qn,2),ea=Zn[0],ta=Zn[1],na=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ta(!0),t.next=4,Eo.setClinicNotes(e.booking._id,Vn);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?($n(Vn),ta(!1),st(!lt)):ta(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),ta(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),aa=Object(o.useState)(!1),oa=Object(l.a)(aa,2),ia=oa[0],ca=oa[1],ra=function(){var t=Object(T.a)(B.a.mark((function t(){var n,a,o,i,c,r,l,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""}),s=function(e){return"M"===e?"Male":"F"===e?"Female":""};try{ca(!0),o=new Date,i=kn(o,"yyyy-mm-dd"),c=kn(o,"HH:MM:ss"),r=document.createElement("a"),l=new Blob(["Text_3=".concat(null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase()),"\n","Text_3_1=".concat(null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase()),"\n","Text_3_1_1=".concat(s(e.booking.gender)),"\n","Text_3_1_1_1=".concat(e.booking.birthDate),"\n","Text_3_1_1_2=".concat(i),"\n","Text_3_1_1_2_1=".concat(c),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),r.href=URL.createObjectURL(l),r.download="".concat(e.booking.fullname,".values"),document.body.appendChild(r),r.click(),ca(!1)}catch(d){ca(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:ut&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Ni,keepMounted:!0,onClose:function(){w(!1),hn(!1),tn(null),e.onClose()},PaperComponent:wi,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:ut.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/blood/".concat(ut._id)),y(!0),setTimeout((function(){y(!1)}),1500)},"aria-label":"delete",className:j.margin,size:"small",children:Object(a.jsx)(yn.a,{style:ut.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!O,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(Vn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:Vn||"",onChange:function(e){Kn(e.target.value)},variant:"outlined"})}),ea&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Xn!==Vn&&!ea&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(Vn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:na,className:j.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Nn.BLOOD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:ut.doctorConsultation?"Blood + Doctor Consultation":"Blood"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:ut.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(ut.fullname)})}),ut.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:ut.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:j.infoDetails,children:Object(a.jsxs)("ul",{className:j.ul,children:[Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ut._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!ut.deleted||re.restore&&re.person._id===ut._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Mt(!0,ut)},className:j.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Oe,onClick:function(){Mt(!1,ut)},className:j.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(re.restore&&re.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Oe,onClick:function(){Mt(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:ut.deleted||ae.delete||Z.edit&&Z.person._id===ut._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){It(!0,ut)},className:j.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be||!gt,onClick:function(){It(!1,ut)},className:j.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Z.edit&&Z.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){It(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ut._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||ut.deleted||Z.edit||ae.delete&&ae.person._id===ut._id,children:[ut.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:ut.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Wt(!0,ut)},className:j.DeleteButton,children:"Delete This Record"})})}),0===ut.OTCCharges&&Object(a.jsx)(R.a,{disabled:ut.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Wt(!0,ut)},className:j.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){Wt(!1,ut)},className:j.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ae.delete&&ae.person._id===ut._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){Wt(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:Object(zo.FormatDateFromString)(ut.bookingDate)}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.bookingDateError,className:j.TextBox,value:we,onChange:function(e){De(e.target.value),Be(Object(N.a)(Object(N.a)({},Se),{},{bookingDateError:!1})),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.bookingTimeError,className:j.TextBox,value:Ae,onChange:function(e){Ie(e.target.value),Be(Object(N.a)(Object(N.a)({},Se),{},{bookingTimeError:!1})),kt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.fullname}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:Ee,onChange:function(e){We(e.target.value),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.email}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:Ge,onChange:function(e){He(e.target.value),kt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:null===(t=ut.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:Ve,onChange:function(e){Ke(e.target.value),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:Object(zo.FormatDateFromString)(ut.birthDate)}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.dobError,className:j.TextBox,value:Mn,onChange:function(e){zn(e.target.value),Be(Object(N.a)(Object(N.a)({},Se),{},{dobError:!1})),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:null===(n=ut.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Se.genderError,className:j.TextBox,value:Xe,onChange:function(e){$e(e.target.value),Be(Object(N.a)(Object(N.a)({},Se),{},{genderError:!1})),kt(!yt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.packageName}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:ot,onChange:function(e){it(e.target.value),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"Indivisual Tests"}),Object(a.jsx)("span",{className:j.infoData,children:function(e){if(!e)return"-";var t=JSON.parse(e),n="";return t.forEach((function(e){n+=e.description,n+=" , "})),n}(ut.indivisualTests)})]}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.notes}),Object(a.jsx)("span",{hidden:!(Z.edit&&Z.person._id===ut._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:et,onChange:function(e){tt(e.target.value),kt(!yt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"STATUS"})," ",(fn=ut.status,"booked"===fn?Object(a.jsx)("div",{className:j.BookedLabel,children:" Booking Made "}):"patient_attended"===fn?Object(a.jsx)("div",{className:j.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===fn?Object(a.jsx)("div",{className:j.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===ut.status&&!(Z.edit&&Z.person._id===ut._id)&&!ut.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:be,style:{width:"300px"},onClick:function(e){return t=ut._id,ue(!0),void Eo.changeBackToBookingMade(t).then((function(e){ue(!1),st(!lt)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:be,style:{width:"200px",margin:"0"},className:j.EditButton,onClick:function(e){return t=ut._id,ue(!0),void Eo.changeToCompleted(t).then((function(e){ue(!1),st(!lt)})).catch((function(e){console.log(e),ue(!1)}));var t},children:"Change To Completed"})]}),"booked"===ut.status&&!(Z.edit&&Z.person._id===ut._id)&&!ut.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:be,style:{width:"300px"},onClick:function(e){return zt(0,ut._id)},children:"Change To Patient Attended"}),"report_sent"===ut.status&&!(Z.edit&&Z.person._id===ut._id)&&!ut.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:be,style:{width:"300px"},onClick:function(e){return zt(0,ut._id)},children:"Change Back To Patient Attended"})]}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:Z.edit&&Z.person._id===ut._id,className:j.infoData,children:ut.estimatedPrice})]}),Object(a.jsx)("li",{hidden:ut.deleted||Z.edit,children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(Dt.a,{}),disabled:ia,type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:ra,className:j.DownloadForm,children:ia?"Printing...":"Print LAB Label"})}),Object(a.jsx)("li",{hidden:ut.deleted||Z.edit,children:Object(a.jsx)(R.a,{disabled:!ut.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ut._id,Ao.downloadBloodRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:j.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:ut.deleted||Z.edit||ut.formData,children:Object(a.jsxs)(R.a,{disabled:!ut.email||ut.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ut._id,ue(!0),w(!1),Eo.sendRegFormEmail(e).then((function(e){ue(!1),"OK"===e.data.status&&w(!0)})).catch((function(e){console.log(e),ue(!1)}))},className:j.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",S&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{children:Object(a.jsx)(R.a,{startIcon:Object(a.jsx)(he.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){X(ut),Lt(!0)},className:j.DownloadForm,children:"Show Audit Trail"})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:j.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!cn&&Object(a.jsx)("span",{className:j.invoiceNumber,children:" ... "}),cn&&en&&Object(a.jsxs)("span",{className:j.invoiceNumber,children:[" ",en.invoiceNumber," "]}),cn&&!en&&Object(a.jsxs)("span",{className:j.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Z.edit&&Z.person._id===ut._id)&&!ut.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[cn&&!en&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:j.PayButton,onClick:function(){return _n()},children:"Issue Invoice"}),cn&&en&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:j.printInvoiceButton,onClick:function(){return e=en._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.editInvoiceButton,onClick:function(){return _n()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!ut.email||ut.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=en._id,t=ut.email,ue(!0),hn(!1),wn.emailInvoice(e,t).then((function(e){ue(!1),"OK"===e.data.status&&hn(!0)})).catch((function(e){console.log(e),ue(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",pn&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:j.infoTitle,children:[ut.paymentInfo?"ONLINE":"PHONE"," DEPOSIT"]})," ",Object(a.jsx)("span",{className:ut.deposit&&0!==ut.deposit?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat(ut.deposit.toLocaleString("en-GB"))}),!(Z.edit&&Z.person._id===ut._id)&&!ut.paid&&ut.deleted&&ut.deposit>0&&ut.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.PayButton,onClick:function(e){return z(!0)},children:"Refund Deposit"}),!(Z.edit&&Z.person._id===ut._id)&&!ut.paid&&ut.deleted&&ut.deposit>0&&!ut.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:j.PayButton,onClick:function(e){return Hn()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(Z.edit&&Z.person._id===ut._id)&&!ut.deleted&&!ut.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Kt.a,{color:"primary",checked:ut.deposit>0,onChange:Gn,name:"deposit"}),label:ut.deposit>0?Object(a.jsx)("span",{className:j.PriceLabelPaid,children:"\xa350 Deposit Paid"}):Object(a.jsx)("span",{className:j.PriceLabelNotPaid,children:"\xa350 Deposit Not Paid"})}),!(Z.edit&&Z.person._id===ut._id)&&ut.refund&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("span",{className:j.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:j.checkIconSmall})," ","Refund Done","corporate"===ut.paidBy?' "'.concat(ut.corporate,'" '):""]})})]})}),ut.paymentInfo&&Object(a.jsx)("li",{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px dashed #84b076",borderRadius:"8px",padding:"10px",marginBottom:"10px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-10px",fontSize:"0.85em",background:"#fff",fontWeight:"600",color:"#32701d",padding:"0px 5px"},children:"Payment Details"}),JSON.parse(ut.paymentInfo).cardDetails?Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["cardBrand:"," ",Object(a.jsx)("strong",{children:null===(c=JSON.parse(ut.paymentInfo).cardDetails)||void 0===c?void 0:c.card.cardBrand})]}),Object(a.jsxs)(K.a,{item:!0,children:["expDate:"," ",Object(a.jsxs)("strong",{children:[null===(r=JSON.parse(ut.paymentInfo).cardDetails)||void 0===r?void 0:r.card.expMonth,"/",null===(s=JSON.parse(ut.paymentInfo).cardDetails)||void 0===s?void 0:s.card.expYear]})]}),Object(a.jsxs)(K.a,{item:!0,children:["last4:"," ",Object(a.jsx)("strong",{children:null===(d=JSON.parse(ut.paymentInfo).cardDetails)||void 0===d?void 0:d.card.last4})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(ut.paymentInfo).createdAt})]})]}):Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["Operator:"," ",Object(a.jsx)("strong",{children:"PAYPAL"})]}),Object(a.jsxs)(K.a,{item:!0,children:["Payer Name:"," ",Object(a.jsx)("strong",{children:"".concat(null===(b=JSON.parse(ut.paymentInfo).payer)||void 0===b?void 0:b.name.given_name," ").concat(null===(u=JSON.parse(ut.paymentInfo).payer)||void 0===u?void 0:u.name.surname," ")})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(ut.paymentInfo).create_time})]})]})]})}),Object(a.jsxs)("li",{className:j.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:ut.OTCCharges&&0!==ut.OTCCharges?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat((ut.OTCCharges&&ut.OTCCharges>0?ut.OTCCharges:en?en.grandTotal-(ut.deposit||0):0).toLocaleString("en-GB"))}),!(Z.edit&&Z.person._id===ut._id)&&!ut.paid&&!ut.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.PayButton,onClick:function(e){return ut._id,X(ut),void F(!0)},children:"Pay"}),!(Z.edit&&Z.person._id===ut._id)&&ut.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:j.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:j.checkIconSmall})," ","Paid by ",ut.paidBy,"corporate"===ut.paidBy?' "'.concat(ut.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return Tt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:ut.OTCCharges&&0!==ut.OTCCharges?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat((ut.deposit+ut.OTCCharges).toLocaleString("en-GB"))})]})}),en&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[en.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"130px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"130px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(en.items)]})]})]}),vn&&vn.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),vn.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return Dn(e),void An(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:j.backdrop,open:be||ge||Oe,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Yo,{booking:Y,open:_,price:en?en.grandTotal-(ut.deposit||0):null,handleClose:function(){F(!1),X(null)}}),Object(a.jsx)(Fn,{booking:Y,invoice:en,open:dn,handleClose:function(e){bn(!1),X(null),gn()}}),Object(a.jsx)(Pc,{booking:Tn,open:Pn,onClose:function(){An(!1),Dn(null)}}),Object(a.jsx)(Bi,{booking:Y,open:Rt,bloodReports:vn,handleClose:function(){Lt(!1),X(null)}})]}),Object(a.jsxs)(Ht.a,{open:Bt,onClose:Pt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Pt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Gt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:M,onClose:At,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:At,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:qt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Ri=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Li=function e(){Object(ne.a)(this,e)};Li.downloadDermaRegForm=function(e){return Ri.get("/api/pdf/downloaddermaregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Pi=n(352),Ai=n.n(Pi),Ii=function e(){Object(ne.a)(this,e)};Ii.addNewBooking=function(e){return Ri.post("/api/derma/book/addnewbooking",e)},Ii.sendRegFormEmail=function(e){return Ri.post("/api/derma/book/sendregformemail?id=".concat(e))},Ii.payBooking=function(e,t,n,a){return Ri.post("/api/derma/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Ii.unPayBooking=function(e){return Ri.post("/api/derma/book/unpaybooking?id=".concat(e))},Ii.getShouldRefundsCount=function(){return Ri.get("/api/derma/book/getshouldrefundscount?")},Ii.refundBooking=function(e){return Ri.post("/api/derma/payment/refundpayment",{bookingId:e})},Ii.getBookingsStatsByDateStr=function(e){return Ri.get("/api/derma/book/getbookingsstatsbydatestr?date=".concat(e))},Ii.getBookingsCountByDateStr=function(e){return Ri.get("/api/derma/book/getbookingscountbydatestr?date=".concat(e))},Ii.getAllBookingsCountAll=function(){return Ri.get("/api/derma/book/getallbookingscountall")},Ii.getBookingsCountByDateStrandTime=function(e,t,n){return Ri.get("/api/derma/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ii.getBookingsByDateStrandTime=function(e,t){return Ri.get("/api/derma/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ii.getAllBookingsCountByDateStr=function(e){return Ri.get("/api/derma/book/getallbookingscountbydatestr?date=".concat(e))},Ii.getAllBookingsCountByDateStrandTime=function(e,t,n){return Ri.get("/api/derma/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ii.getAllBookingsByDateStrandTime=function(e,t){return Ri.get("/api/derma/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ii.changeBackToBookingMade=function(e){return Ri.post("/api/derma/book/changebacktobookingmade?id=".concat(e))},Ii.changeToPatientAttended=function(e){return Ri.post("/api/derma/book/changetopatientattended?id=".concat(e))},Ii.updateBooking=function(e){return Ri.post("/api/derma/book/updatebookappointment",e)},Ii.updateBookingTime=function(e){return Ri.post("/api/derma/book/updatebookappointmenttime",e)},Ii.deleteBooking=function(e){return Ri.post("/api/derma/book/deletebookappointment?id=".concat(e))},Ii.unDeleteBooking=function(e){return Ri.post("/api/derma/book/undeletebookappointment?id=".concat(e))},Ii.getBookingsByRef=function(e){return Ri.get("/api/derma/book/getbookingsbyref?ref=".concat(e))},Ii.getBookingById=function(e){return Ri.get("/api/derma/book/getbookingbyid?id=".concat(e))},Ii.getAllBookings=function(e){return e||(e=25),Ri.get("/api/derma/book/getallbookings?limit=".concat(e))},Ii.getDeletedBookings=function(e){return e||(e=25),Ri.get("/api/derma/book/getdeletedbookings?limit=".concat(e))},Ii.getTodayBookings=function(){return Ri.get("/api/derma/book/gettodaybookings")},Ii.getOldBookings=function(e){return e||(e=25),Ri.get("/api/derma/book/getoldbookings?limit=".concat(e))},Ii.getFutureBookings=function(e){return e||(e=25),Ri.get("/api/derma/book/getfuturebookings?limit=".concat(e))},Ii.getRecentBookings=function(){return Ri.get("/api/derma/book/getrecentbookings")},Ii.getRecentBookingsAll=function(e){return e||(e=25),Ri.get("/api/derma/book/getrecentbookingsall?limit=".concat(e))};var _i=n(145),Fi=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Ei(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Wi(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Mi(e){var t=Fi(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Ii.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Wi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Ei,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var zi=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main}}})),Gi=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function Hi(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Ui(e){var t,n,c=zi(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=Object(o.useState)(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(!1),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(!1),z=Object(l.a)(M,2),G=z[0],H=z[1],U=i.a.useState(null),Y=Object(l.a)(U,2),X=Y[0],$=Y[1],Q=i.a.useState({edit:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState({delete:!1,person:null}),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState({restore:!1,person:null}),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(!1),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState({}),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(!1),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(null),ct=Object(l.a)(it,2),rt=ct[0],lt=ct[1],st=i.a.useState(!1),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(!1),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=i.a.useState(!1),xt=Object(l.a)(ft,2),mt=xt[0],yt=xt[1],kt=i.a.useState(!1),vt=Object(l.a)(kt,2),Ct=(vt[0],vt[1],i.a.useState(null)),Bt=Object(l.a)(Ct,2),Tt=Bt[0],Nt=Bt[1],wt=i.a.useState(!1),Rt=Object(l.a)(wt,2),Lt=Rt[0],Pt=Rt[1],At=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Pt(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,Nt(n.data.invoice),Pt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Pt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&At()}),[e.booking,e.open]);var It=function(){yt(!1),$(null)},_t=function(){W(!1),$(null)};Object(o.useEffect)((function(){if(rt){var e=Ne!==Object(_i.FormatDateFromString)(rt.bookingDate)||Le!==rt.bookingTime||Fe!==rt.fullname||ze!==rt.email||Ye!==rt.phone||Ze!==rt.package||Je!==rt.notes;ut(e)}}),[ht]),Object(o.useEffect)((function(){e.open||setTimeout((function(){te({edit:!1,person:null}),ut(!1)}),500)}),[e.open]);var Ft=function(e,t){if(e)Ee(t.fullname),we(Object(_i.FormatDateFromString)(t.bookingDate)),Ae(t.bookingTime.toUpperCase()),Ge(t.email),Ve(t.phone),et(t.package),t.notes&&Xe(t.notes),te({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ze,n.phone=Ye,n.fullname=Fe,n.notes=Je,n.package=Ze,n.bookingDate=Object(_i.RevertFormatDateFromString)(Ne),n.bookingTime=Le,n.bookingRef=t.bookingRef,Et(n)&&Wt({bookingId:a,person:n})}}else te({edit:e,person:t}),ut(!1)},Et=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingTimeError:!0}))),!t},Wt=function(e){je(!0),Ii.updateBooking(e).then((function(e){je(!1),te({edit:!1,person:null}),ot(!at)})).catch((function(e){je(!1),te({edit:!1,person:null}),console.log(e)}))},Mt=function(e,t){var n;e?ie({delete:e,person:t}):e||t?!e&&t&&(n=t._id,fe(!0),Ii.deleteBooking(n).then((function(e){fe(!1),ie({delete:!1,person:null}),ot(!at)})).catch((function(e){fe(!1),ie({delete:!1,person:null}),console.log(e)}))):ie({delete:e,person:t})},zt=function(e,t){var n;e?se({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ye(!0),Ii.unDeleteBooking(n).then((function(e){ye(!1),se({restore:!1,person:null}),ot(!at)})).catch((function(e){ye(!1),se({restore:!1,person:null}),console.log(e)}))):se({restore:e,person:t})},Gt=function(){$(rt),Nt(Tt),H(!0)};Object(o.useEffect)((function(){e.booking&&(Ii.getBookingById(e.booking._id).then((function(e){lt(e.data)})).catch((function(e){console.log(e)})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[at,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&lt(e.booking)}),[e.booking]);var Kt,qt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je(!0),e.prev=1,e.next=4,Ii.unPayBooking(rt._id);case 4:je(!1),yt(!1),ot(!at),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),je(!1),yt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je(!0),e.prev=1,e.next=4,Ii.refundBooking(rt._id);case 4:je(!1),Qt(),W(!1),ot(!at),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),je(!1),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ii.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&b((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:rt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Gi,keepMounted:!0,onClose:function(){m(!1),v(!1),Nt(null),e.onClose()},PaperComponent:Hi,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:rt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/derma/".concat(rt._id)),h(!0),setTimeout((function(){h(!1)}),1500)},"aria-label":"delete",className:c.margin,size:"small",children:Object(a.jsx)(yn.a,{style:rt.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!p,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Nn.DERMA_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Dermatology"}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:rt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(rt.fullname)})}),rt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:rt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:c.infoDetails,children:Object(a.jsxs)("ul",{className:c.ul,children:[Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===rt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!rt.deleted||le.restore&&le.person._id===rt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){zt(!0,rt)},className:c.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Oe,onClick:function(){zt(!1,rt)},className:c.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(le.restore&&le.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Oe,onClick:function(){zt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:rt.deleted||oe.delete||ee.edit&&ee.person._id===rt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Ft(!0,rt)},className:c.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ue||!bt,onClick:function(){Ft(!1,rt)},className:c.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(ee.edit&&ee.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ue,onClick:function(){Ft(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===rt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||rt.deleted||ee.edit||oe.delete&&oe.person._id===rt._id,children:[rt.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:rt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Mt(!0,rt)},className:c.DeleteButton,children:"Delete This Record"})})}),0===rt.OTCCharges&&Object(a.jsx)(R.a,{disabled:rt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Mt(!0,rt)},className:c.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ge,onClick:function(){Mt(!1,rt)},className:c.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(oe.delete&&oe.person._id===rt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ge,onClick:function(){Mt(!1,null)},className:c.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:Object(_i.FormatDateFromString)(rt.bookingDate)}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingDateError,className:c.TextBox,value:Ne,onChange:function(e){we(e.target.value),Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingDateError:!1})),gt(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:rt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:Ce.bookingTimeError,className:c.TextBox,value:Le,onChange:function(e){Ae(e.target.value),Se(Object(N.a)(Object(N.a)({},Ce),{},{bookingTimeError:!1})),gt(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:rt.fullname}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Fe,onChange:function(e){Ee(e.target.value),gt(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:rt.email}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:ze,onChange:function(e){Ge(e.target.value),gt(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:c.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:null===(t=rt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),gt(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:c.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:rt.notes}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Je,onChange:function(e){Xe(e.target.value),gt(!ht)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"Service"}),Object(a.jsx)("span",{hidden:ee.edit&&ee.person._id===rt._id,className:c.infoData,children:null===(n=rt.package)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(ee.edit&&ee.person._id===rt._id),className:c.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:c.TextBox,value:Ze,onChange:function(e){et(e.target.value),gt(!ht)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:c.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"STATUS"})," ",(Kt=rt.status,"booked"===Kt?Object(a.jsx)("div",{className:c.BookedLabel,children:" Booking Made "}):"patient_attended"===Kt?Object(a.jsx)("div",{className:c.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===rt.status&&!(ee.edit&&ee.person._id===rt._id)&&!rt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:ue,style:{width:"300px"},onClick:function(e){return t=rt._id,je(!0),void Ii.changeBackToBookingMade(t).then((function(e){je(!1),ot(!at)})).catch((function(e){console.log(e),je(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===rt.status&&!(ee.edit&&ee.person._id===rt._id)&&!rt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:ue,style:{width:"300px"},onClick:function(e){return t=rt._id,je(!0),void Ii.changeToPatientAttended(t).then((function(e){je(!1),ot(!at)})).catch((function(e){console.log(e),je(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:rt.deleted||ee.edit,children:Object(a.jsx)(R.a,{disabled:!rt.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=rt._id,Li.downloadDermaRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:c.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:rt.deleted||ee.edit||rt.formData,children:Object(a.jsxs)(R.a,{disabled:!rt.email||rt.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=rt._id,je(!0),m(!1),Ii.sendRegFormEmail(e).then((function(e){je(!1),"OK"===e.data.status&&m(!0)})).catch((function(e){console.log(e),je(!1)}))},className:c.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",x&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Lt&&Object(a.jsx)("span",{className:c.invoiceNumber,children:" ... "}),Lt&&Tt&&Object(a.jsxs)("span",{className:c.invoiceNumber,children:[" ",Tt.invoiceNumber," "]}),Lt&&!Tt&&Object(a.jsxs)("span",{className:c.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(ee.edit&&ee.person._id===rt._id)&&!rt.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Lt&&!Tt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:c.PayButton,onClick:function(){return Gt()},children:"Issue Invoice"}),Lt&&Tt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:c.printInvoiceButton,onClick:function(){return e=Tt._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.editInvoiceButton,onClick:function(){return Gt()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!rt.email||rt.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Tt._id,t=rt.email,je(!0),v(!1),wn.emailInvoice(e,t).then((function(e){je(!1),"OK"===e.data.status&&v(!0)})).catch((function(e){console.log(e),je(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",k&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:c.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:c.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:rt.OTCCharges&&0!==rt.OTCCharges?c.infoDataCharges:c.infoDataChargesHigher,children:"\xa3".concat(rt.OTCCharges.toLocaleString("en-GB"))}),!(ee.edit&&ee.person._id===rt._id)&&!rt.paid&&!rt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:c.PayButton,onClick:function(e){return $(rt),void I(!0)},children:"Pay"}),!(ee.edit&&ee.person._id===rt._id)&&rt.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:c.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:c.checkIconSmall})," ","Paid by ",rt.paidBy,"corporate"===rt.paidBy?' "'.concat(rt.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return yt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:c.backdrop,open:ue||ge||Oe,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Mi,{booking:X,open:A,price:Tt?Tt.grandTotal:null,handleClose:function(){I(!1),$(null)}}),Object(a.jsx)(Fn,{booking:X,invoice:Tt,open:G,handleClose:function(e){H(!1),$(null),At()}})]}),Object(a.jsxs)(Ht.a,{open:mt,onClose:It,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:It,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:qt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:E,onClose:_t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:_t,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Jt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Yi=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Vi=function e(){Object(ne.a)(this,e)};Vi.downloadScreeningRegForm=function(e){return Yi.get("/api/pdf/downloadscreeningregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var Ki=n(353),qi=n.n(Ki),Ji=function e(){Object(ne.a)(this,e)};Ji.downloadPDFReport=function(e,t){return Yi.post("/api/screening/book/downloadpdfreport?id=".concat(e),{reportData:t},{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Ji.getReportData=function(e){return Yi.get("/api/screening/book/getreportdata?id=".concat(e))},Ji.setReportData=function(e,t){return Yi.post("/api/screening/book/setreportdata",{bookingId:e,reportData:t})},Ji.setClinicNotes=function(e,t){return Yi.post("/api/screening/book/setclinicnotes",{bookingId:e,notes:t})},Ji.getBloodReportsByBookingId=function(e){return Yi.get("/api/blood/book/getbloodreportsbybookingid?id=".concat(e))},Ji.changeDepositBooking=function(e,t){return Yi.post("/api/screening/book/changedepositbooking?id=".concat(e,"&deposit=").concat(t))},Ji.manualRefundBooking=function(e){return Yi.post("/api/screening/payment/manualrefundpayment",{bookingId:e})},Ji.addNewBooking=function(e){return Yi.post("/api/screening/book/addnewbooking",e)},Ji.sendForPrint=function(e){return Yi.post("/api/screening/book/sendforprint?id=".concat(e))},Ji.sendRegFormEmail=function(e){return Yi.post("/api/screening/book/sendregformemail?id=".concat(e))},Ji.payBooking=function(e,t,n,a){return Yi.post("/api/screening/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Ji.unPayBooking=function(e){return Yi.post("/api/screening/book/unpaybooking?id=".concat(e))},Ji.getShouldRefundsCount=function(){return Yi.get("/api/screening/book/getshouldrefundscount?")},Ji.refundBooking=function(e){return Yi.post("/api/screening/payment/refundpayment",{bookingId:e})},Ji.getBookingsStatsByDateStr=function(e){return Yi.get("/api/screening/book/getbookingsstatsbydatestr?date=".concat(e))},Ji.getBookingsCountByDateStr=function(e){return Yi.get("/api/screening/book/getbookingscountbydatestr?date=".concat(e))},Ji.getAllBookingsCountAll=function(){return Yi.get("/api/screening/book/getallbookingscountall")},Ji.getBookingsCountByDateStrandTime=function(e,t,n){return Yi.get("/api/screening/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ji.getBookingsByDateStrandTime=function(e,t){return Yi.get("/api/screening/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ji.getAllBookingsCountByDateStr=function(e){return Yi.get("/api/screening/book/getallbookingscountbydatestr?date=".concat(e))},Ji.getAllBookingsCountByDateStrandTime=function(e,t,n){return Yi.get("/api/screening/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Ji.getAllBookingsByDateStrandTime=function(e,t){return Yi.get("/api/screening/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Ji.changeBackToBookingMade=function(e){return Yi.post("/api/screening/book/changebacktobookingmade?id=".concat(e))},Ji.changeToCompleted=function(e){return Yi.post("/api/screening/book/changetocompleted?id=".concat(e))},Ji.changeToPatientAttended=function(e){return Yi.post("/api/screening/book/changetopatientattended?id=".concat(e))},Ji.updateBooking=function(e){return Yi.post("/api/screening/book/updatebookappointment",e)},Ji.updateBookingTime=function(e){return Yi.post("/api/screening/book/updatebookappointmenttime",e)},Ji.deleteBooking=function(e){return Yi.post("/api/screening/book/deletebookappointment?id=".concat(e))},Ji.unDeleteBooking=function(e){return Yi.post("/api/screening/book/undeletebookappointment?id=".concat(e))},Ji.moveTBCFolder=function(e){return Yi.post("/api/screening/book/movetbcfolder?id=".concat(e))},Ji.undoMoveTBCFolder=function(e){return Yi.post("/api/screening/book/undomovetbcfolder?id=".concat(e))},Ji.confirmBooking=function(e){return Yi.post("/api/screening/book/confirmbookappointment?bookingId=".concat(e))},Ji.getBookingsByRef=function(e){return Yi.get("/api/screening/book/getbookingsbyref?ref=".concat(e))},Ji.getBookingById=function(e){return Yi.get("/api/screening/book/getbookingbyid?id=".concat(e))},Ji.getAllBookings=function(e){return e||(e=25),Yi.get("/api/screening/book/getallbookings?limit=".concat(e))},Ji.getDeletedBookings=function(e){return e||(e=25),Yi.get("/api/screening/book/getdeletedbookings?limit=".concat(e))},Ji.getTBCFolderBookings=function(e){return e||(e=25),Yi.get("/api/screening/book/gettbcfolderbookings?limit=".concat(e))},Ji.getTodayBookings=function(){return Yi.get("/api/screening/book/gettodaybookings")},Ji.getLiveBookings=function(){return Yi.get("/api/screening/book/getlivebookings")},Ji.getCompletedBookings=function(e){return Yi.get("/api/screening/book/getcompletedbookings?limit=".concat(e))},Ji.getOldBookings=function(e){return e||(e=25),Yi.get("/api/screening/book/getoldbookings?limit=".concat(e))},Ji.getFutureBookings=function(e){return e||(e=25),Yi.get("/api/screening/book/getfuturebookings?limit=".concat(e))},Ji.getRecentBookings=function(){return Yi.get("/api/screening/book/getrecentbookings")},Ji.getPendingBookings=function(){return Yi.get("/api/screening/book/getpendingbookings")},Ji.getRecentBookingsAll=function(e){return e||(e=25),Yi.get("/api/screening/book/getrecentbookingsall?limit=".concat(e))};var Xi=n(112),$i=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function Qi(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Zi(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function ec(e){var t=$i(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,Ji.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:Zi,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"OTC Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:Qi,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var tc=n(376),nc=n.n(tc),ac=n(354),oc=n.n(ac),ic=n(664),cc=n.n(ic),rc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function lc(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function sc(e){var t=rc(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(null),p=Object(l.a)(j,2),h=p[0],g=p[1];i.a.useEffect((function(){e.open&&f()}),[e.open]);var f=function(){var t=Object(T.a)(B.a.mark((function t(){var n,a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.getReportData(e.booking._id);case 2:(n=t.sent)&&n.data&&"OK"===n.data.status&&(a=n.data.reportData,g(a),console.log(a));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){b||(e.handleClose(),g(null),S(!1),u(!1))},m=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,Ji.setReportData(e.booking._id,h);case 4:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),x(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),u(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),O=function(e){switch(e){case"low":return"#fa7d2f";case"high":return"#ff1f1f";case"inRange":return"#00b524";default:return"grey"}},y=Object(o.useState)(!1),k=Object(l.a)(y,2),v=k[0],S=k[1],w=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(!0),Ji.downloadPDFReport(e.booking._id,h).then((function(e){S(!1);var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e),S(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:x,PaperComponent:lc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(nc.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:["Report Details -"," ",Object(a.jsxs)("span",{style:{color:"#33a198"},children:[" ",Object(a.jsxs)("i",{children:[" ","".concat(e.booking.fullname)," "]})]})]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{minHeight:"700px",paddingBottom:"80px"},children:[!h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(K.a,{container:!0,spacing:2,children:h&&h.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{padding:"5px",border:"#ddd 1px solid",borderRadius:"4px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"".concat(O(e.value)),fontWeight:"".concat(e.value?"500":"400")},children:e.param})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(zt.a,{variant:"standard",value:e.value,style:{width:"100px",textAlign:"center"},onChange:function(t){return function(e,t){var n=Object(Et.a)(h),a=n.findIndex((function(e){return e.param===t}));a>-1&&(n[a].value=e,g((function(e){return n})))}(t.target.value,e.param)},children:[Object(a.jsx)(Gt.a,{value:null}),Object(a.jsx)(Gt.a,{value:"low",children:"Low"}),Object(a.jsx)(Gt.a,{value:"inRange",children:"In Range"}),Object(a.jsx)(Gt.a,{value:"high",children:"High"})]})})]})})})}))})]}),Object(a.jsx)("div",{style:{position:"absolute",width:"100%",bottom:"0",right:"0",height:"60px",background:"#fff"}}),Object(a.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"20px",background:"white",width:"100%"},children:[Object(a.jsx)(R.a,{onClick:function(){var e=Object(Et.a)(h);e.forEach((function(e){e.value=null})),g((function(t){return e}))},variant:"outlined",color:"secondary",style:{width:"150px"},disabled:b,children:"Reset Data"}),Object(a.jsx)(R.a,{onClick:w,disabled:v,variant:"contained",color:"secondary",startIcon:Object(a.jsx)(cc.a,{}),style:{width:"250px",marginLeft:"10px"},children:v?"Generating PDF ...":"Download PDF Report"})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"10px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:x,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:m,variant:"contained",color:"primary",style:{width:"150px"},disabled:b,children:"Save Changes"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var dc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900",width:"150px",display:"inline-block"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:999,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},PackageBox:{width:"100%",color:"#005bb5",fontWeight:"600",padding:"10px",borderRadius:"8px",fontSize:"1rem"}}})),bc=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function uc(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function jc(e){var t,n,c,r,s,d,b,u,j=dc(),p=i.a.useContext(C),h=Object(l.a)(p,2),g=h[0],f=h[1],x=Object(o.useState)(!1),m=Object(l.a)(x,2),O=(m[0],m[1],i.a.useState(!1)),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),w=Object(l.a)(S,2),D=w[0],P=w[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1],i.a.useState(!1)),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(!1),z=Object(l.a)(M,2),G=z[0],H=z[1],Y=i.a.useState(!1),X=Object(l.a)(Y,2),$=X[0],Q=X[1],Z=i.a.useState(!1),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(!1),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(!1),le=Object(l.a)(re,2),se=le[0],de=le[1],be=i.a.useState(null),ue=Object(l.a)(be,2),je=ue[0],pe=ue[1],he=i.a.useState({edit:!1,person:null}),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState({delete:!1,person:null}),Oe=Object(l.a)(me,2),ke=Oe[0],ve=Oe[1],Ce=i.a.useState({restore:!1,person:null}),Se=Object(l.a)(Ce,2),Be=Se[0],Te=Se[1],Ne=i.a.useState(!1),we=Object(l.a)(Ne,2),De=we[0],Re=we[1],Le=i.a.useState(!1),Ae=Object(l.a)(Le,2),Ie=Ae[0],_e=Ae[1],Fe=i.a.useState(!1),Ee=Object(l.a)(Fe,2),We=Ee[0],Me=Ee[1],ze=i.a.useState({}),Ge=Object(l.a)(ze,2),He=Ge[0],Ue=Ge[1],Ye=i.a.useState(""),Ve=Object(l.a)(Ye,2),Ke=Ve[0],qe=Ve[1],Je=i.a.useState(""),Xe=Object(l.a)(Je,2),$e=Xe[0],Qe=Xe[1],Ze=i.a.useState(""),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(""),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],rt=i.a.useState(""),lt=Object(l.a)(rt,2),st=lt[0],dt=lt[1],bt=i.a.useState(""),ut=Object(l.a)(bt,2),jt=ut[0],pt=ut[1],ht=i.a.useState(""),gt=Object(l.a)(ht,2),ft=gt[0],xt=gt[1],mt=i.a.useState(""),yt=Object(l.a)(mt,2),kt=(yt[0],yt[1],i.a.useState("")),vt=Object(l.a)(kt,2),Ct=vt[0],Bt=vt[1],Nt=i.a.useState(""),wt=Object(l.a)(Nt,2),Rt=wt[0],Lt=wt[1],Pt=i.a.useState(!1),At=Object(l.a)(Pt,2),It=At[0],_t=At[1],Ft=i.a.useState(null),Et=Object(l.a)(Ft,2),Wt=Et[0],Mt=Et[1],zt=i.a.useState(!1),Gt=Object(l.a)(zt,2),qt=Gt[0],Jt=Gt[1],Qt=i.a.useState(!1),Zt=Object(l.a)(Qt,2),en=Zt[0],tn=Zt[1],an=i.a.useState(!1),on=Object(l.a)(an,2),cn=on[0],rn=on[1],ln=i.a.useState(!1),sn=Object(l.a)(ln,2),dn=(sn[0],sn[1],i.a.useState(null)),bn=Object(l.a)(dn,2),un=bn[0],jn=bn[1],pn=i.a.useState(!1),hn=Object(l.a)(pn,2),gn=hn[0],fn=hn[1],xn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,fn(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,jn(n.data.invoice),fn(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),fn(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(xn(),In(),la(e.booking.clinicNotes||""),ua(e.booking.clinicNotes||""),ga(!1))}),[e.booking,e.open]);var On=i.a.useState(null),yn=Object(l.a)(On,2),vn=yn[0],Cn=yn[1],Sn=i.a.useState(null),Bn=Object(l.a)(Sn,2),Tn=Bn[0],Dn=Bn[1],Rn=i.a.useState(null),Ln=Object(l.a)(Rn,2),Pn=Ln[0],An=Ln[1],In=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Cn(null),t.prev=1,t.next=4,Ji.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&Cn(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),_n=function(){var e=Object(T.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?100:0,Re(!0),e.prev=3,e.next=6,Ji.changeDepositBooking(Wt._id,a);case 6:Re(!1),_t(!It),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),Re(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),En=function(){rn(!1),pe(null)},Wn=function(){H(!1),pe(null)},Mn=function(){ne(!1),pe(null)},zn=function(){ce(!1),pe(null)};Object(o.useEffect)((function(){if(Wt){var e=Ke!==Object(Xi.FormatDateFromString)(Wt.bookingDate)||$e!==Wt.bookingTime||tt!==Wt.fullname||it!==Wt.email||Ct!==Wt.gender||st!==Wt.phone||jt!==Wt.notes||ft!==Wt.address||Rt!==Wt.birthDate;Jt(e)}}),[en]),Object(o.useEffect)((function(){e.open||setTimeout((function(){xe({edit:!1,person:null}),Jt(!1)}),500)}),[e.open]);var Gn=function(e,t){var n;if(e)nt(t.fullname),qe(Object(Xi.FormatDateFromString)(t.bookingDate)),Qe(t.bookingTime.toUpperCase()),ct(t.email),Bt((null===(n=t.gender)||void 0===n?void 0:n.toUpperCase())||""),dt(t.phone),t.notes&&pt(t.notes),t.address&&xt(t.address),Lt(Object(Xi.FormatDateFromString)(t.birthDate)),xe({edit:e,person:t});else if(e||t){if(!e&&t){var a={},o=t._id;a.email=it,a.phone=st,a.fullname=tt,a.notes=jt,a.address=ft,a.service=t.service,a.bookingDate=Object(Xi.RevertFormatDateFromString)(Ke),a.bookingTime=$e,a.bookingRef=t.bookingRef,a.birthDate=Object(Xi.RevertFormatDateFromString)(Rt),a.gender=Ct,Un(a)&&Yn({bookingId:o,person:a})}}else xe({edit:e,person:t}),Jt(!1)},Hn=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Un=function(e){var t=!1;return Hn(e.bookingDate)||(t=!0,Ue(Object(N.a)(Object(N.a)({},He),{},{bookingDateError:!0}))),e.birthDate&&!Hn(e.birthDate)&&(t=!0,Ue(Object(N.a)(Object(N.a)({},He),{},{birthDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Ue(Object(N.a)(Object(N.a)({},He),{},{bookingTimeError:!0}))),e.gender&&"F"!==e.gender.toUpperCase()&&"M"!==e.gender.toUpperCase()&&(t=!0,Ue(Object(N.a)(Object(N.a)({},He),{},{genderError:!0}))),!t},Yn=function(e){Re(!0),Ji.updateBooking(e).then((function(e){Re(!1),xe({edit:!1,person:null}),_t(!It)})).catch((function(e){Re(!1),xe({edit:!1,person:null}),console.log(e)}))},Vn=function(e,t){var n;e?ve({delete:e,person:t}):e||t?!e&&t&&(n=t._id,_e(!0),Ji.deleteBooking(n).then((function(e){_e(!1),ve({delete:!1,person:null}),_t(!It)})).catch((function(e){_e(!1),ve({delete:!1,person:null}),console.log(e)}))):ve({delete:e,person:t})},Kn=function(e,t){var n;e?Te({restore:e,person:t}):e||t?!e&&t&&(n=t._id,Me(!0),Ji.unDeleteBooking(n).then((function(e){Me(!1),Te({restore:!1,person:null}),_t(!It)})).catch((function(e){Me(!1),Te({restore:!1,person:null}),console.log(e)}))):Te({restore:e,person:t})},qn=function(e,t){Re(!0),Ji.changeToPatientAttended(t).then((function(e){Re(!1),_t(!It)})).catch((function(e){console.log(e),Re(!1)}))},Jn=function(){pe(Wt),jn(un),de(!0)};Object(o.useEffect)((function(){e.booking&&(Ji.getBookingById(e.booking._id).then((function(e){Mt(e.data)})).catch((function(e){console.log(e)})),f((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[It,g.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&Mt(e.booking)}),[e.booking]);var Xn,$n=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.unPayBooking(Wt._id);case 4:Re(!1),rn(!1),_t(!It),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Re(!1),rn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Qn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.refundBooking(Wt._id);case 4:Re(!1),aa(),H(!1),_t(!It),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),Re(!1),H(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Zn=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.manualRefundBooking(Wt._id);case 4:Re(!1),aa(),_t(!It),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Re(!1),H(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ea=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.confirmBooking(Wt._id);case 4:Re(!1),ne(!1),_t(!It),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),Re(!1),ne(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ta=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.moveTBCFolder(Wt._id);case 4:Re(!1),ce(!1),_t(!It),oa(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),Re(!1),ce(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),na=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(!0),e.prev=1,e.next=4,Ji.undoMoveTBCFolder(Wt._id);case 4:Re(!1),ce(!1),_t(!It),oa(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),Re(!1),ce(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),aa=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&f((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),oa=function(){v(!1),P(!1),jn(null),e.onClose()},ia=i.a.useState(""),ca=Object(l.a)(ia,2),ra=ca[0],la=ca[1],sa=i.a.useState(""),da=Object(l.a)(sa,2),ba=da[0],ua=da[1],ja=Object(o.useState)(!1),pa=Object(l.a)(ja,2),ha=pa[0],ga=pa[1],fa=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ga(!0),t.next=4,Ji.setClinicNotes(e.booking._id,ra);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(ua(ra),ga(!1),_t(!It)):ga(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),ga(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),xa=Object(o.useState)(!1),ma=Object(l.a)(xa,2),Oa=ma[0],ya=ma[1],ka=function(){var t=Object(T.a)(B.a.mark((function t(){var n,a,o,i,c,r,l,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(function(e){return e&&10==e.length?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""}),s=function(e){return"M"===e?"Male":"F"===e?"Female":""};try{ya(!0),o=new Date,i=kn(o,"yyyy-mm-dd"),c=kn(o,"HH:MM:ss"),r=document.createElement("a"),l=new Blob(["Text_3=".concat(null===(n=e.booking.fullname)||void 0===n?void 0:n.trim().split(" ").slice(-1).join(" ").toUpperCase()),"\n","Text_3_1=".concat(null===(a=e.booking.fullname)||void 0===a?void 0:a.trim().split(" ").slice(0,-1).join(" ").toUpperCase()),"\n","Text_3_1_1=".concat(s(e.booking.gender)),"\n","Text_3_1_1_1=".concat(e.booking.birthDate),"\n","Text_3_1_1_2=".concat(i),"\n","Text_3_1_1_2_1=".concat(c),"\n","Text_3_1_1_2_2=".concat(e.booking.bookingRef),"\n"],{type:"text/plain;charset=utf-8"}),r.href=URL.createObjectURL(l),r.download="".concat(e.booking.fullname,".values"),document.body.appendChild(r),r.click(),ya(!1)}catch(d){ya(!1)}case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)(i.a.Fragment,{children:[Wt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:bc,keepMounted:!0,onClose:oa,PaperComponent:uc,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:Wt.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[!Wt.confirmed&&Object(a.jsx)("div",{style:{color:"red",fontSize:"1.1rem",fontWeight:"500",border:"2px solid red",padding:"5px",borderRadius:"8px"},children:"NOT CONFIRMED!"}),Wt.confirmed&&Object(a.jsx)("div",{style:{color:"#258200",fontSize:"1.1rem",fontWeight:"500",border:"2px solid #258200",padding:"5px",borderRadius:"8px"},children:"CONFIRMED"})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"190px",background:"".concat(ra?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"580px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:ra||"",onChange:function(e){la(e.target.value)},variant:"outlined"})}),ha&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),ba!==ra&&!ha&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(ra?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:fa,className:j.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Nn.SCREENING_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Screening"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:Wt.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(Wt.fullname)})}),Wt.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:Wt.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)("div",{style:{paddingTop:"10px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:j.infoDetails,children:Object(a.jsxs)("ul",{className:j.ul,children:[!Wt.confirmed&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"primary",fullWidth:!0,variant:"contained",onClick:function(){pe(Wt),ne(!0)},children:"Confirm Booking"})}),!Wt.confirmed&&!Wt.tbcFolder&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"secondary",fullWidth:!0,variant:"contained",onClick:function(){pe(Wt),ce(!0)},children:"Move To Patients TBC"})}),!Wt.confirmed&&Wt.tbcFolder&&Object(a.jsx)("li",{style:{margin:"20px 0px"},children:Object(a.jsx)(R.a,{style:{height:"50px"},color:"secondary",fullWidth:!0,variant:"contained",onClick:function(){pe(Wt),ce(!0)},children:"Move Back To Pending Bookings"})}),Object(a.jsx)("li",{hidden:!(Be.restore&&Be.person._id===Wt._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!Wt.deleted||Be.restore&&Be.person._id===Wt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Kn(!0,Wt)},className:j.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(Be.restore&&Be.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:We,onClick:function(){Kn(!1,Wt)},className:j.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(Be.restore&&Be.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:We,onClick:function(){Kn(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:Wt.deleted||ke.delete||fe.edit&&fe.person._id===Wt._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Gn(!0,Wt)},className:j.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(fe.edit&&fe.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:De||!qt,onClick:function(){Gn(!1,Wt)},className:j.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(fe.edit&&fe.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:De,onClick:function(){Gn(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(ke.delete&&ke.person._id===Wt._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||Wt.deleted||fe.edit||ke.delete&&ke.person._id===Wt._id,children:[Wt.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Wt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Vn(!0,Wt)},className:j.DeleteButton,children:"Delete This Record"})})}),0===Wt.OTCCharges&&Object(a.jsx)(R.a,{disabled:Wt.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Vn(!0,Wt)},className:j.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(ke.delete&&ke.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:Ie,onClick:function(){Vn(!1,Wt)},className:j.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(ke.delete&&ke.person._id===Wt._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:Ie,onClick:function(){Vn(!1,null)},className:j.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Object(Xi.FormatDateFromString)(Wt.bookingDate)}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:He.bookingDateError,className:j.TextBox,value:Ke,onChange:function(e){qe(e.target.value),Ue(Object(N.a)(Object(N.a)({},He),{},{bookingDateError:!1})),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Wt.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:He.bookingTimeError,className:j.TextBox,value:$e,onChange:function(e){Qe(e.target.value),Ue(Object(N.a)(Object(N.a)({},He),{},{bookingTimeError:!1})),tn(!en)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Wt.fullname}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:tt,onChange:function(e){nt(e.target.value),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Wt.email}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:it,onChange:function(e){ct(e.target.value),tn(!en)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:null===(t=Wt.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:st,onChange:function(e){dt(e.target.value),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Object(Xi.FormatDateFromString)(Wt.birthDate)}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:He.birthDateError,className:j.TextBox,value:Rt,onChange:function(e){Lt(e.target.value),Ue(Object(N.a)(Object(N.a)({},He),{},{birthDateError:!1})),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:4,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:null===(n=Wt.gender)||void 0===n?void 0:n.toUpperCase()}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:He.genderError,className:j.TextBox,value:Ct,onChange:function(e){Bt(e.target.value),Ue(Object(N.a)(Object(N.a)({},He),{},{genderError:!1})),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Wt.notes}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:jt,onChange:function(e){pt(e.target.value),tn(!en)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"Address"}),Object(a.jsx)("span",{hidden:fe.edit&&fe.person._id===Wt._id,className:j.infoData,children:Wt.address}),Object(a.jsx)("span",{hidden:!(fe.edit&&fe.person._id===Wt._id),className:j.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:j.TextBox,value:ft,onChange:function(e){xt(e.target.value),tn(!en)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"PACKAGE"}),Object(a.jsx)("span",{className:j.PackageBox,children:Wt.service})]}),Object(a.jsxs)("li",{className:j.li,style:{paddingTop:"20px",width:"100%"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"STATUS"})," ",(Xn=Wt.status,"booked"===Xn?Object(a.jsx)("div",{className:j.BookedLabel,children:" Booking Made "}):"patient_attended"===Xn?Object(a.jsx)("div",{className:j.PatientAttendedLabel,children:" Patient Attended "}):"report_sent"===Xn?Object(a.jsx)("div",{className:j.ReportSentLabel,children:" Report Sent "}):"Unknown"),"patient_attended"===Wt.status&&!(fe.edit&&fe.person._id===Wt._id)&&!Wt.deleted&&Object(a.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%",paddingTop:"10px"},children:[Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:De,style:{width:"300px"},onClick:function(e){return t=Wt._id,Re(!0),void Ji.changeBackToBookingMade(t).then((function(e){Re(!1),_t(!It)})).catch((function(e){console.log(e),Re(!1)}));var t},children:"Change Back To Booking Made"}),Object(a.jsx)(R.a,{variant:"contained",color:"secondary",disabled:De,style:{width:"200px",margin:"0"},className:j.EditButton,onClick:function(e){return t=Wt._id,Re(!0),void Ji.changeToCompleted(t).then((function(e){Re(!1),_t(!It)})).catch((function(e){console.log(e),Re(!1)}));var t},children:"Change To Completed"})]}),"booked"===Wt.status&&!(fe.edit&&fe.person._id===Wt._id)&&!Wt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:De,style:{width:"300px"},onClick:function(e){return qn(0,Wt._id)},children:"Change To Patient Attended"}),"report_sent"===Wt.status&&!(fe.edit&&fe.person._id===Wt._id)&&!Wt.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",disabled:De,style:{width:"300px"},onClick:function(e){return qn(0,Wt._id)},children:"Change Back To Patient Attended"}),Object(a.jsx)(R.a,{variant:"outlined",color:"primary",startIcon:Object(a.jsx)(nc.a,{}),endIcon:Wt.reportData&&JSON.parse(Wt.reportData)&&JSON.parse(Wt.reportData).find((function(e){return!!e.value}))?Object(a.jsx)(oc.a,{style:{color:"green"}}):Object(a.jsx)(Tt.a,{style:{color:"red"}}),disabled:De,style:{width:"300px",marginLeft:"20px"},onClick:function(){return pe(Wt),void Q(!0)},children:"Report Details..."})]})]}),Object(a.jsx)("li",{hidden:Wt.deleted||fe.edit,children:Object(a.jsxs)(R.a,{disabled:Oa,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:ka,className:j.DownloadForm,children:[!Wt.printStatus&&"Print LAB Label","printed"===Wt.printStatus&&"Print LAB Label Again","printing"===Wt.printStatus&&"Printing","preparing"===Wt.printStatus&&"Preparing for print"]})}),Object(a.jsx)("li",{hidden:Wt.deleted||fe.edit,children:Object(a.jsx)(R.a,{disabled:!Wt.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Wt._id,Vi.downloadScreeningRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:j.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:Wt.deleted||fe.edit||Wt.formData,children:Object(a.jsxs)(R.a,{disabled:!Wt.email||Wt.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=Wt._id,Re(!0),v(!1),Ji.sendRegFormEmail(e).then((function(e){Re(!1),"OK"===e.data.status&&v(!0)})).catch((function(e){console.log(e),Re(!1)}))},className:j.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",k&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:j.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!gn&&Object(a.jsx)("span",{className:j.invoiceNumber,children:" ... "}),gn&&un&&Object(a.jsxs)("span",{className:j.invoiceNumber,children:[" ",un.invoiceNumber," "]}),gn&&!un&&Object(a.jsxs)("span",{className:j.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(fe.edit&&fe.person._id===Wt._id)&&!Wt.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[gn&&!un&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:j.PayButton,onClick:function(){return Jn()},children:"Issue Invoice"}),gn&&un&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:j.printInvoiceButton,onClick:function(){return e=un._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.editInvoiceButton,onClick:function(){return Jn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!Wt.email||Wt.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=un._id,t=Wt.email,Re(!0),P(!1),wn.emailInvoice(e,t).then((function(e){Re(!1),"OK"===e.data.status&&P(!0)})).catch((function(e){console.log(e),Re(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",D&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:j.infoTitle,children:[Wt.paymentInfo?"ONLINE":"PHONE"," DEPOSIT"]})," ",Object(a.jsx)("span",{className:Wt.deposit&&0!==Wt.deposit?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat(Wt.deposit.toLocaleString("en-GB"))}),!(fe.edit&&fe.person._id===Wt._id)&&!Wt.paid&&Wt.deleted&&Wt.deposit>0&&Wt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.PayButton,onClick:function(e){return H(!0)},children:"Refund Deposit"}),!(fe.edit&&fe.person._id===Wt._id)&&!Wt.paid&&Wt.deleted&&Wt.deposit>0&&!Wt.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:j.PayButton,onClick:function(e){return Zn()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(fe.edit&&fe.person._id===Wt._id)&&!Wt.deleted&&!Wt.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Kt.a,{color:"primary",checked:Wt.deposit>0,onChange:_n,name:"deposit"}),label:Wt.deposit>0?Object(a.jsx)("span",{className:j.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:j.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})}),!(fe.edit&&fe.person._id===Wt._id)&&Wt.refund&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("span",{className:j.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:j.checkIconSmall})," ","Refund Done","corporate"===Wt.paidBy?' "'.concat(Wt.corporate,'" '):""]})})]})}),Wt.paymentInfo&&Object(a.jsx)("li",{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px dashed #84b076",borderRadius:"8px",padding:"10px",marginBottom:"10px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-10px",fontSize:"0.85em",background:"#fff",fontWeight:"600",color:"#32701d",padding:"0px 5px"},children:"Payment Details"}),JSON.parse(Wt.paymentInfo).cardDetails?Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["cardBrand:"," ",Object(a.jsx)("strong",{children:null===(c=JSON.parse(Wt.paymentInfo).cardDetails)||void 0===c?void 0:c.card.cardBrand})]}),Object(a.jsxs)(K.a,{item:!0,children:["expDate:"," ",Object(a.jsxs)("strong",{children:[null===(r=JSON.parse(Wt.paymentInfo).cardDetails)||void 0===r?void 0:r.card.expMonth,"/",null===(s=JSON.parse(Wt.paymentInfo).cardDetails)||void 0===s?void 0:s.card.expYear]})]}),Object(a.jsxs)(K.a,{item:!0,children:["last4:"," ",Object(a.jsx)("strong",{children:null===(d=JSON.parse(Wt.paymentInfo).cardDetails)||void 0===d?void 0:d.card.last4})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(Wt.paymentInfo).createdAt})]})]}):Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-around",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:["Operator:"," ",Object(a.jsx)("strong",{children:"PAYPAL"})]}),Object(a.jsxs)(K.a,{item:!0,children:["Payer Name:"," ",Object(a.jsx)("strong",{children:"".concat(null===(b=JSON.parse(Wt.paymentInfo).payer)||void 0===b?void 0:b.name.given_name," ").concat(null===(u=JSON.parse(Wt.paymentInfo).payer)||void 0===u?void 0:u.name.surname," ")})]}),Object(a.jsxs)(K.a,{item:!0,children:["timeStamp:"," ",Object(a.jsx)("strong",{children:JSON.parse(Wt.paymentInfo).create_time})]})]})]})}),Object(a.jsxs)("li",{className:j.li,children:[Object(a.jsx)("span",{className:j.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:Wt.OTCCharges&&0!==Wt.OTCCharges?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat((Wt.OTCCharges&&Wt.OTCCharges>0?Wt.OTCCharges:un?un.grandTotal-(Wt.deposit||0):0).toLocaleString("en-GB"))}),!(fe.edit&&fe.person._id===Wt._id)&&!Wt.paid&&!Wt.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:j.PayButton,onClick:function(e){return Wt._id,pe(Wt),void W(!0)},children:"Pay"}),!(fe.edit&&fe.person._id===Wt._id)&&Wt.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:j.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:j.checkIconSmall})," ","Paid by ",Wt.paidBy,"corporate"===Wt.paidBy?' "'.concat(Wt.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return rn(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:j.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:j.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Wt.OTCCharges&&0!==Wt.OTCCharges?j.infoDataCharges:j.infoDataChargesHigher,children:"\xa3".concat((Wt.deposit+Wt.OTCCharges).toLocaleString("en-GB"))})]})}),un&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[un.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:[" ","TOTAL"," "]}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" ","\xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(un.items)]})]})]}),vn&&vn.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),vn.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return Dn(e),void An(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")})}),Object(a.jsx)(ec,{booking:je,open:E,price:un?un.grandTotal-(Wt.deposit||0):null,handleClose:function(){W(!1),pe(null)}}),Object(a.jsx)(Fn,{booking:je,invoice:un,open:se,handleClose:function(e){de(!1),pe(null),xn()}}),Object(a.jsx)(sc,{booking:je,open:$,handleClose:function(){Q(!1),pe(null)}}),Object(a.jsx)(Pc,{booking:Tn,open:Pn,onClose:function(){An(!1),Dn(null)}}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsxs)(Ht.a,{open:cn,onClose:En,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:En,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:$n,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsxs)(Ht.a,{open:G,onClose:Wn,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Wn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Qn,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsxs)(Ht.a,{open:te,onClose:Mn,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#00a1c5"},id:"confirm-dialog-title",children:"Confirm Booking"}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:[Object(a.jsx)("span",{style:{fontWeight:"500"},children:"Are you sure you want to confirm this booking?"}),Object(a.jsx)("p",{children:"* After confirmation, email/sms will also be sent to the patient."})]})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Mn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:ea,color:"primary",variant:"contained",autoFocus:!0,children:"Yes, Confirm Booking"})]}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsxs)(Ht.a,{open:ie,onClose:zn,"aria-labelledby":"tbc-dialog-title","aria-describedby":"tbc-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#f68529"},id:"tbc-dialog-title",children:Wt.tbcFolder?"Move Back To Pending Bookings":"Move To Patients TBC"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:Object(a.jsx)("span",{style:{fontWeight:"500"},children:Wt.tbcFolder?'Are you sure you want to move this record to "Pending Bookings"?':'Are you sure you want to move this record to "Patients TBC"?'})})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:zn,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Wt.tbcFolder?na:ta,color:"secondary",variant:"contained",autoFocus:!0,children:Wt.tbcFolder?"Yes, move to Pending Bookings":"Yes, move to Patients TBC"})]}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]}),Object(a.jsx)(V.a,{className:j.backdrop,open:De||Ie||We,children:Object(a.jsx)(q.a,{color:"inherit"})})]})}var pc=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),hc=function e(){Object(ne.a)(this,e)};hc.downloadCorporateRegForm=function(e){return pc.get("/api/pdf/downloadcorporateregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var gc=n(355),fc=n.n(gc),xc=function e(){Object(ne.a)(this,e)};xc.setClinicNotes=function(e,t){return pc.post("/api/corporate/book/setclinicnotes",{bookingId:e,notes:t})},xc.getCorporateReportsByBookingId=function(e){return pc.get("/api/blood/book/getcorporatereportsbybookingid?id=".concat(e))},xc.addNewBooking=function(e){return pc.post("/api/corporate/book/addnewbooking",e)},xc.sendRegFormEmail=function(e){return pc.post("/api/corporate/book/sendregformemail?id=".concat(e))},xc.payBooking=function(e,t,n,a){return pc.post("/api/corporate/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},xc.unPayBooking=function(e){return pc.post("/api/corporate/book/unpaybooking?id=".concat(e))},xc.getShouldRefundsCount=function(){return pc.get("/api/corporate/book/getshouldrefundscount?")},xc.refundBooking=function(e){return pc.post("/api/corporate/payment/refundpayment",{bookingId:e})},xc.getBookingsStatsByDateStr=function(e){return pc.get("/api/corporate/book/getbookingsstatsbydatestr?date=".concat(e))},xc.getBookingsCountByDateStr=function(e){return pc.get("/api/corporate/book/getbookingscountbydatestr?date=".concat(e))},xc.getAllBookingsCountAll=function(){return pc.get("/api/corporate/book/getallbookingscountall")},xc.getBookingsCountByDateStrandTime=function(e,t,n){return pc.get("/api/corporate/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},xc.getBookingsByDateStrandTime=function(e,t){return pc.get("/api/corporate/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},xc.getAllBookingsCountByDateStr=function(e){return pc.get("/api/corporate/book/getallbookingscountbydatestr?date=".concat(e))},xc.getAllBookingsCountByDateStrandTime=function(e,t,n){return pc.get("/api/corporate/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},xc.getAllBookingsByDateStrandTime=function(e,t){return pc.get("/api/corporate/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},xc.changeBackToBookingMade=function(e){return pc.post("/api/corporate/book/changebacktobookingmade?id=".concat(e))},xc.changeToPatientAttended=function(e){return pc.post("/api/corporate/book/changetopatientattended?id=".concat(e))},xc.updateBooking=function(e){return pc.post("/api/corporate/book/updatebookappointment",e)},xc.updateBookingTime=function(e){return pc.post("/api/corporate/book/updatebookappointmenttime",e)},xc.deleteBooking=function(e){return pc.post("/api/corporate/book/deletebookappointment?id=".concat(e))},xc.unDeleteBooking=function(e){return pc.post("/api/corporate/book/undeletebookappointment?id=".concat(e))},xc.getBookingsByRef=function(e){return pc.get("/api/corporate/book/getbookingsbyref?ref=".concat(e))},xc.getBookingById=function(e){return pc.get("/api/corporate/book/getbookingbyid?id=".concat(e))},xc.getAllBookings=function(e){return e||(e=25),pc.get("/api/corporate/book/getallbookings?limit=".concat(e))},xc.getDeletedBookings=function(e){return e||(e=25),pc.get("/api/corporate/book/getdeletedbookings?limit=".concat(e))},xc.getTodayBookings=function(){return pc.get("/api/corporate/book/gettodaybookings")},xc.getOldBookings=function(e){return e||(e=25),pc.get("/api/corporate/book/getoldbookings?limit=".concat(e))},xc.getFutureBookings=function(e){return e||(e=25),pc.get("/api/corporate/book/getfuturebookings?limit=".concat(e))},xc.getRecentBookings=function(){return pc.get("/api/corporate/book/getrecentbookings")},xc.getRecentBookingsAll=function(e){return e||(e=25),pc.get("/api/corporate/book/getrecentbookingsall?limit=".concat(e))};var mc=n(121),Oc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function yc(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function kc(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function vc(e){var t=Oc(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)("credit card"),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(o.useState)(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=Object(o.useState)(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState([]),_=Object(l.a)(I,2),F=_[0],E=_[1];i.a.useEffect((function(){W()}),[]);var W=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,E(t),g(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){e.price?S("".concat(e.price)):S("")}),[e.price,e.open]);var z=function(){m||(e.handleClose(),u("credit card"),S(""),g(F[0]),O(!1))},G=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&0!==v.trim().length&&"0"!==v){t.next=3;break}return A(!0),t.abrupt("return");case 3:return O(!0),t.prev=4,t.next=7,xc.payBooking(e.booking._id,v,b,"corporate"===b?h:"");case 7:O(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingPayChanged:!e.bookingPayChanged})})),z(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),O(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:z,PaperComponent:kc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(dn.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","PAY the CHARGE"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"300px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"space-between",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{autoFocus:!0,error:P,label:"TOTAL Charges",value:v,fullWidth:!0,required:!0,onChange:function(e){S(e.target.value),A(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:yc,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"17px"},children:[" ","How do you want to pay?"," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{component:"fieldset",children:[Object(a.jsxs)(un.a,{"aria-label":"paymentMethod",name:"paymentMethod",value:b,onChange:function(e){u(e.target.value)},children:[Object(a.jsx)(U.a,{value:"credit card",control:Object(a.jsx)(bn.a,{}),label:"Credit Card"}),Object(a.jsx)(U.a,{value:"cash",control:Object(a.jsx)(bn.a,{}),label:"Cash"}),Object(a.jsx)(U.a,{value:"corporate",control:Object(a.jsx)(bn.a,{}),label:"Corporate"})]}),"corporate"===b&&Object(a.jsx)(M.a,{style:{marginTop:"10px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:h,onChange:function(e){g(e.target.value)},children:F.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})]})})]}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,style:{width:"100px"},disabled:m,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:G,variant:"contained",color:"secondary",style:{width:"100px"},disabled:m,children:"Pay"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:m,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Cc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Sc=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function Bc(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Tc(e){var t,n=Cc(),c=i.a.useContext(C),r=Object(l.a)(c,2),s=r[0],d=r[1],b=Object(o.useState)(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(null),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(""),M=Object(l.a)(W,2),z=M[0],G=M[1],H=i.a.useState({edit:!1,person:null}),U=Object(l.a)(H,2),Y=U[0],X=U[1],$=i.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState({}),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=i.a.useState(null),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=i.a.useState(!1),ct=Object(l.a)(it,2),rt=ct[0],lt=ct[1],st=i.a.useState(!1),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(!1),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=i.a.useState(!1),xt=Object(l.a)(ft,2),mt=(xt[0],xt[1],function(){gt(!1),E(null)}),yt=function(){A(!1),E(null)};Object(o.useEffect)((function(){if(at){var e=Ce!==Object(mc.FormatDateFromString)(at.bookingDate)||Ne!==at.bookingTime||Le!==at.fullname||Fe!==at.email||ze!==at.phone||Ye!==at.notes||Je!==at.packageName||z!==at.birthDate;lt(e)}}),[bt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){X({edit:!1,person:null}),lt(!1)}),500)}),[e.open]);var kt=function(e,t){if(e)Ae(t.fullname),Se(Object(mc.FormatDateFromString)(t.bookingDate)),we(t.bookingTime.toUpperCase()),Ee(t.email),Ge(t.phone),Xe(t.service),t.notes&&Ve(t.notes),G(Object(mc.FormatDateFromString)(t.birthDate)),X({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Fe,n.phone=ze,n.fullname=Le,n.notes=Ye,n.packageName=Je,n.bookingDate=Object(mc.RevertFormatDateFromString)(Ce),n.bookingTime=Ne,n.bookingRef=t.bookingRef,n.birthDate=Object(mc.RevertFormatDateFromString)(z),Ct(n)&&Bt({bookingId:a,person:n})}}else X({edit:e,person:t}),lt(!1)},vt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},Ct=function(e){var t=!1;return vt(e.bookingDate)||(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{bookingDateError:!0}))),e.birthDate&&!vt(e.birthDate)&&(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{birthDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{bookingTimeError:!0}))),!t},Bt=function(e){le(!0),xc.updateBooking(e).then((function(e){le(!1),X({edit:!1,person:null}),et(!Ze)})).catch((function(e){le(!1),X({edit:!1,person:null}),console.log(e)}))},Tt=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),xc.deleteBooking(n).then((function(e){ue(!1),ee({delete:!1,person:null}),et(!Ze)})).catch((function(e){ue(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Nt=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),xc.unDeleteBooking(n).then((function(e){ge(!1),oe({restore:!1,person:null}),et(!Ze)})).catch((function(e){ge(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(xc.getBookingById(e.booking._id).then((function(e){ot(e.data)})).catch((function(e){console.log(e)})),d((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Ze,s.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&ot(e.booking)}),[e.booking]);var wt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,xc.unPayBooking(at._id);case 4:le(!1),gt(!1),et(!Ze),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),gt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,xc.refundBooking(at._id);case 4:le(!1),Lt(),A(!1),et(!Ze),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),le(!1),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xc.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&d((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Pt=i.a.useState(null),At=Object(l.a)(Pt,2),It=At[0],_t=At[1],Ft=i.a.useState(!1),Et=Object(l.a)(Ft,2),Wt=Et[0],Mt=Et[1],zt=i.a.useState(!1),Gt=Object(l.a)(zt,2),Kt=Gt[0],qt=Gt[1],Jt=i.a.useState(!1),Qt=Object(l.a)(Jt,2),Zt=Qt[0],en=Qt[1],tn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Mt(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,_t(n.data.invoice),Mt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Mt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(tn(),fn(),Cn(e.booking.clinicNotes||""),Dn(e.booking.clinicNotes||""),An(!1))}),[e.booking,e.open]);var an,on=i.a.useState(null),cn=Object(l.a)(on,2),rn=cn[0],ln=cn[1],sn=i.a.useState(null),dn=Object(l.a)(sn,2),bn=dn[0],un=dn[1],jn=i.a.useState(null),pn=Object(l.a)(jn,2),hn=pn[0],gn=pn[1],fn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ln(null),t.prev=1,t.next=4,xc.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&ln(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),xn=function(){E(at),_t(It),qt(!0)},On=i.a.useState(""),kn=Object(l.a)(On,2),vn=kn[0],Cn=kn[1],Sn=i.a.useState(""),Bn=Object(l.a)(Sn,2),Tn=Bn[0],Dn=Bn[1],Rn=Object(o.useState)(!1),Ln=Object(l.a)(Rn,2),Pn=Ln[0],An=Ln[1],In=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,An(!0),t.next=4,xc.setClinicNotes(e.booking._id,vn);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(Dn(vn),An(!1),et(!Ze)):An(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),An(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:at&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Sc,keepMounted:!0,onClose:function(){x(!1),en(!1),_t(null),e.onClose()},PaperComponent:Bc,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:at.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/corporate/".concat(at._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(yn.a,{style:at.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(vn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:vn||"",onChange:function(e){Cn(e.target.value)},variant:"outlined"})}),Pn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Tn!==vn&&!Pn&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(vn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:In,className:n.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"20px",backgroundColor:Nn.CORPORATE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"Corporate"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:at.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(at.fullname)})}),at.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:at.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!at.deleted||ae.restore&&ae.person._id===at._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Nt(!0,at)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){Nt(!1,at)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){Nt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:at.deleted||Z.delete||Y.edit&&Y.person._id===at._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,at)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(Y.edit&&Y.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!rt,onClick:function(){kt(!1,at)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(Y.edit&&Y.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||at.deleted||Y.edit||Z.delete&&Z.person._id===at._id,children:[at.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:at.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,at)},className:n.DeleteButton,children:"Delete This Record"})})}),0===at.OTCCharges&&Object(a.jsx)(R.a,{disabled:at.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,at)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Tt(!1,at)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===at._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Tt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:Object(mc.FormatDateFromString)(at.bookingDate)}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:me.bookingDateError,className:n.TextBox,value:Ce,onChange:function(e){Se(e.target.value),Oe(Object(N.a)(Object(N.a)({},me),{},{bookingDateError:!1})),ut(!bt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:me.bookingTimeError,className:n.TextBox,value:Ne,onChange:function(e){we(e.target.value),Oe(Object(N.a)(Object(N.a)({},me),{},{bookingTimeError:!1})),ut(!bt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.fullname}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Le,onChange:function(e){Ae(e.target.value),ut(!bt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.email}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Fe,onChange:function(e){Ee(e.target.value),ut(!bt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:null===(t=at.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:ze,onChange:function(e){Ge(e.target.value),ut(!bt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.notes}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ye,onChange:function(e){Ve(e.target.value),ut(!bt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"Package"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.service}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Je,onChange:function(e){Xe(e.target.value),ut(!bt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsx)(K.a,{item:!0,xs:6,children:Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"DOB"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:Object(mc.FormatDateFromString)(at.birthDate)}),Object(a.jsx)("span",{hidden:!(Y.edit&&Y.person._id===at._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:me.birthDateError,className:n.TextBox,value:z,onChange:function(e){G(e.target.value),Oe(Object(N.a)(Object(N.a)({},me),{},{birthDateError:!1})),ut(!bt)},inputProps:{style:{padding:0}}})})]})})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(an=at.status,"booked"===an?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===an?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===at.status&&!(Y.edit&&Y.person._id===at._id)&&!at.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:re,style:{width:"300px"},onClick:function(e){return t=at._id,le(!0),void xc.changeBackToBookingMade(t).then((function(e){le(!1),et(!Ze)})).catch((function(e){console.log(e),le(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===at.status&&!(Y.edit&&Y.person._id===at._id)&&!at.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:re,style:{width:"300px"},onClick:function(e){return t=at._id,le(!0),void xc.changeToPatientAttended(t).then((function(e){le(!1),et(!Ze)})).catch((function(e){console.log(e),le(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoTitle,children:"Estimated Price"}),Object(a.jsx)("span",{hidden:Y.edit&&Y.person._id===at._id,className:n.infoData,children:at.estimatedPrice})]}),Object(a.jsx)("li",{hidden:at.deleted||Y.edit,children:Object(a.jsx)(R.a,{disabled:!at.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=at._id,hc.downloadCorporateRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:at.deleted||Y.edit||at.formData,children:Object(a.jsxs)(R.a,{disabled:!at.email||at.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=at._id,le(!0),x(!1),xc.sendRegFormEmail(e).then((function(e){le(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Wt&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Wt&&It&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",It.invoiceNumber," "]}),Wt&&!It&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(Y.edit&&Y.person._id===at._id)&&!at.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Wt&&!It&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return xn()},children:"Issue Invoice"}),Wt&&It&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=It._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return xn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!at.email||at.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=It._id,t=at.email,le(!0),en(!1),wn.emailInvoice(e,t).then((function(e){le(!1),"OK"===e.data.status&&en(!0)})).catch((function(e){console.log(e),le(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Zt&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:at.OTCCharges&&0!==at.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(at.OTCCharges.toLocaleString("en-GB"))}),!(Y.edit&&Y.person._id===at._id)&&!at.paid&&!at.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return at._id,E(at),void S(!0)},children:"Pay"}),!(Y.edit&&Y.person._id===at._id)&&at.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:n.checkIconSmall})," ","Paid by ",at.paidBy,"corporate"===at.paidBy?' "'.concat(at.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return gt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),It&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[It.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:" TOTAL "}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" \xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(It.items)]})]})]}),rn&&rn.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),rn.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return un(e),void gn(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:re||be||he,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(vc,{booking:F,open:v,price:It?It.grandTotal:null,handleClose:function(){S(!1),E(null)}}),Object(a.jsx)(Fn,{booking:F,invoice:It,open:Kt,handleClose:function(e){qt(!1),E(null),tn()}}),Object(a.jsx)(Pc,{booking:bn,open:hn,onClose:function(){gn(!1),un(null)}})]}),Object(a.jsxs)(Ht.a,{open:ht,onClose:mt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:mt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:wt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:P,onClose:yt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:yt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Rt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Nc=Object(w.a)((function(e){return{}}));function wc(e){Nc();if(!e.booking)return null;switch(e.booking.clinic){case"pcr":return Object(a.jsx)(zn,{booking:e.booking,open:e.open,onClose:e.onClose});case"gp":return Object(a.jsx)(li,{booking:e.booking,open:e.open,onClose:e.onClose});case"gynae":return Object(a.jsx)(Fc,{booking:e.booking,open:e.open,onClose:e.onClose});case"std":return Object(a.jsx)(ki,{booking:e.booking,open:e.open,onClose:e.onClose});case"blood":return Object(a.jsx)(Di,{booking:e.booking,open:e.open,onClose:e.onClose});case"derma":return Object(a.jsx)(Ui,{booking:e.booking,open:e.open,onClose:e.onClose});case"screening":case"visa":return Object(a.jsx)(jc,{booking:e.booking,open:e.open,onClose:e.onClose});case"corporate":return Object(a.jsx)(Tc,{booking:e.booking,open:e.open,onClose:e.onClose});default:return null}}var Dc=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Rc=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function Lc(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Pc(e){var t,n=Dc(),c=Object(o.useState)(null),r=Object(l.a)(c,2),s=(r[0],r[1],Object(o.useState)(1)),d=Object(l.a)(s,2);d[0],d[1];var b=i.a.useContext(C),u=Object(l.a)(b,2),j=(u[0],u[1]),p=Object(o.useState)(!1),h=Object(l.a)(p,2),g=(h[0],h[1],i.a.useState(!1)),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(!1),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(!1),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(null),z=Object(l.a)(M,2),G=z[0],H=z[1],U=i.a.useState({edit:!1,person:null}),Y=Object(l.a)(U,2),J=Y[0],X=Y[1],$=i.a.useState({delete:!1,person:null}),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState({restore:!1,person:null}),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState({}),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ke=i.a.useState(""),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(""),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(""),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(""),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(""),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(""),qe=Object(l.a)(Ke,2),Xe=qe[0],$e=qe[1],Qe=i.a.useState(!1),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=i.a.useState(null),at=Object(l.a)(nt,2),ot=at[0],it=at[1],ct=i.a.useState(!1),rt=Object(l.a)(ct,2),lt=rt[0],st=rt[1],dt=i.a.useState(!1),bt=Object(l.a)(dt,2),ut=bt[0],jt=bt[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=i.a.useState(!1),mt=Object(l.a)(xt,2),yt=(mt[0],mt[1],function(){ft(!1),H(null)}),kt=function(){W(!1),H(null)},vt=function(e,t){if(e)Ae(t.fullname),Se(Object(zo.FormatDateFromString)(t.bookingDate)),we(t.bookingTime.toUpperCase()),Ee(t.email),Ge(t.phone),sn(Object(zo.FormatDateFromString)(t.birthDate)),$e(t.packageName),t.notes&&Ve(t.notes),X({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Fe,n.phone=ze,n.fullname=Le,n.notes=Ye,n.birthDate=Object(zo.RevertFormatDateFromString)(ln),n.packageName=Xe,n.bookingDate=Object(zo.RevertFormatDateFromString)(Ce),n.bookingTime=Ne,n.bookingRef=t.bookingRef,St(n)&&Bt({bookingId:a,person:n})}}else X({edit:e,person:t}),st(!1)},Ct=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t},St=function(e){var t=!1;return Ct(e.bookingDate)||(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{bookingDateError:!0}))),Ct(e.birthDate)||(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,Oe(Object(N.a)(Object(N.a)({},me),{},{bookingTimeError:!0}))),!t},Bt=function(e){le(!0),Eo.updateBooking(e).then((function(e){le(!1),X({edit:!1,person:null}),tt(!et)})).catch((function(e){le(!1),X({edit:!1,person:null}),console.log(e)}))},Tt=function(e,t){var n;e?ee({delete:e,person:t}):e||t?!e&&t&&(n=t._id,ue(!0),Eo.deleteBooking(n).then((function(e){ue(!1),ee({delete:!1,person:null}),tt(!et)})).catch((function(e){ue(!1),ee({delete:!1,person:null}),console.log(e)}))):ee({delete:e,person:t})},Nt=function(e,t){var n;e?oe({restore:e,person:t}):e||t?!e&&t&&(n=t._id,ge(!0),Eo.unDeleteBooking(n).then((function(e){ge(!1),oe({restore:!1,person:null}),tt(!et)})).catch((function(e){ge(!1),oe({restore:!1,person:null}),console.log(e)}))):oe({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&e.open&&(Ft(e.booking._id),wt(e.booking.bookingId),it(e.booking),Ee(e.booking.email),Ve(e.booking.notes))}),[e.booking,e.open]);var wt=function(){var e=Object(T.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(null),t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Mo.getBookingById(t);case 6:(n=e.sent).data&&n.data.length>0&&H(n.data[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,Eo.unPayBooking(ot._id);case 4:le(!1),ft(!1),tt(!et),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),le(!1),ft(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,Eo.refundBooking(ot._id);case 4:le(!1),Lt(),W(!1),tt(!et),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),le(!1),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eo.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&j((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Pt=i.a.useState(null),At=Object(l.a)(Pt,2),It=At[0],_t=At[1],Ft=function(e){_t(null),Ao.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var e=n.result;console.log(e),_t(e)}})).catch((function(e){console.log(e)}))},Et=i.a.useState(null),Wt=Object(l.a)(Et,2),Mt=Wt[0],zt=Wt[1],Gt=i.a.useState(!1),Yt=Object(l.a)(Gt,2),Kt=(Yt[0],Yt[1]),qt=i.a.useState(!1),Jt=Object(l.a)(qt,2),Qt=Jt[0],Zt=Jt[1],en=i.a.useState(!1),tn=Object(l.a)(en,2),an=(tn[0],tn[1]),on=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Kt(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,zt(n.data.invoice),Kt(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Kt(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&on()}),[e.booking,e.open]);var cn=i.a.useState(""),rn=Object(l.a)(cn,2),ln=rn[0],sn=rn[1],dn=i.a.useState(!1),bn=Object(l.a)(dn,2),un=bn[0],jn=bn[1];return Object(a.jsx)(i.a.Fragment,{children:ot&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:e.open,TransitionComponent:Rc,keepMounted:!0,onClose:function(){m(!1),v(!1),an(!1),zt(null),Ee(""),Ve(""),e.onClose()},PaperComponent:Lc,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:ot.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"10px",backgroundColor:function(e){switch(e){case"blood":return Nn.BLOOD_COLOR;case"std":return Nn.STD_COLOR;case"gp":return Nn.GP_COLOR;case"gynae":return Nn.GYNAE_COLOR;default:return"#999"}}(ot.clinic),color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:null===(t=ot.clinic)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"20px",color:"#fff",padding:"0px 5px"},hidden:!ot.emailSent,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,justify:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Je.a,{style:{fontSize:"25px",color:"#009634"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{fontSize:"16px",color:"#009634",paddingBottom:"3px"},children:vn()(ot.emailSentTimeStamp,"yyyy-mm-dd, h:MM:ss TT")})})]})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:ot.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(ot.name)})}),ot.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:ot.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===ot._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!ot.deleted||ae.restore&&ae.person._id===ot._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Nt(!0,ot)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:he,onClick:function(){Nt(!1,ot)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ae.restore&&ae.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:he,onClick:function(){Nt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(J.edit&&J.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:re||!lt,onClick:function(){vt(!1,ot)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(J.edit&&J.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:re,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===ot._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||ot.deleted||J.edit||Z.delete&&Z.person._id===ot._id,children:[ot.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:ot.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,ot)},className:n.DeleteButton,children:"Delete This Record"})})}),0===ot.OTCCharges&&Object(a.jsx)(R.a,{disabled:ot.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,ot)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:be,onClick:function(){Tt(!1,ot)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(Z.delete&&Z.person._id===ot._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:be,onClick:function(){Tt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEST DATE :"}),Object(a.jsx)("span",{hidden:J.edit&&J.person._id===ot._id,className:n.infoData,children:Object(zo.FormatDateFromString)(ot.testDate)})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NAME : "}),Object(a.jsx)("span",{hidden:J.edit&&J.person._id===ot._id,className:n.infoData,children:ot.name})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:3,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"D.O.B : "}),Object(a.jsx)("span",{hidden:J.edit&&J.person._id===ot._id,className:n.infoData,children:Object(zo.FormatDateFromString)(ot.birthDate)})]}),G&&Object(a.jsx)(K.a,{item:!0,xs:12,md:3,children:Object(a.jsx)(R.a,{onClick:function(){jn(!0)},startIcon:Object(a.jsx)(ye.a,{}),color:"primary",variant:"contained",children:"Show Booking Detail ..."})})]})}),It&&Object(a.jsx)("div",{children:Object(a.jsx)("iframe",{style:{width:"100%",minHeight:"500px"},src:It})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{label:"EMAIL",style:{margin:"10px"},fullWidth:!0,variant:"outlined",value:Fe||"",onChange:function(e){Ee(e.target.value),jt(!ut)}})})}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"0px"},children:Object(a.jsx)("span",{className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"NOTES",style:{margin:"10px"},value:Ye||"",onChange:function(e){Ve(e.target.value),jt(!ut)},variant:"outlined",multiline:!0,rows:4})})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{disabled:!Fe||!Io.validate(Fe),startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=ot._id,le(!0),m(!1),Eo.sendBloodReportEmail(e,Fe,Ye).then((function(e){le(!1),"OK"===e.data.status&&(m(!0),j((function(e){return Object(N.a)(Object(N.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})),ot.emailSent=!0)})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Send Email To Patient",x&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)("li",{children:Object(a.jsxs)(R.a,{startIcon:Object(a.jsx)(Ko.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){var e;e=ot._id,le(!0),v(!1),Eo.updateBloodReport(e,Fe,Ye).then((function(e){le(!1),"OK"===e.data.status&&(v(!0),j((function(e){return Object(N.a)(Object(N.a)({},e),{},{bloodReportRefresh:!e.bloodReportRefresh})})))})).catch((function(e){console.log(e),le(!1)}))},className:n.DownloadForm,style:{position:"relative",marginBottom:"10px"},children:["Save Changes",k&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Saved Successfully"})]})})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:re||be||he,children:Object(a.jsx)(q.a,{color:"inherit"})}),Object(a.jsx)(wc,{booking:G,open:un,onClose:function(){jn(!1)}})]}),Object(a.jsx)(Yo,{booking:G,open:A,price:Mt?Mt.grandTotal:null,handleClose:function(){I(!1),H(null)}}),Object(a.jsx)(Fn,{booking:G,invoice:Mt,open:Qt,handleClose:function(e){Zt(!1),H(null),on()}})]}),Object(a.jsxs)(Ht.a,{open:gt,onClose:yt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:yt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Dt,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:E,onClose:kt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:kt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Rt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Ac=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"}}})),Ic=i.a.forwardRef((function(e,t){return Object(a.jsx)(en.a,Object(N.a)({direction:"up",ref:t},e))}));function _c(e){return Object(a.jsx)(Zt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Fc(e){var t,n=Ac(),c=i.a.useContext(C),r=Object(l.a)(c,2),s=r[0],d=r[1],b=Object(o.useState)(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(null),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState({edit:!1,person:null}),M=Object(l.a)(W,2),z=M[0],G=M[1],H=i.a.useState({delete:!1,person:null}),Y=Object(l.a)(H,2),X=Y[0],$=Y[1],Q=i.a.useState({restore:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(!1),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(!1),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=i.a.useState({}),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(""),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(""),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(""),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1],Re=i.a.useState(""),Le=Object(l.a)(Re,2),Ae=Le[0],Ie=Le[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(""),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(""),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],qe=i.a.useState(!1),Je=Object(l.a)(qe,2),Xe=Je[0],$e=Je[1],Qe=i.a.useState(null),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=i.a.useState(!1),at=Object(l.a)(nt,2),ot=at[0],it=at[1],ct=i.a.useState(!1),rt=Object(l.a)(ct,2),lt=rt[0],st=rt[1],dt=i.a.useState(!1),bt=Object(l.a)(dt,2),ut=bt[0],jt=bt[1],pt=i.a.useState(!1),ht=Object(l.a)(pt,2),gt=(ht[0],ht[1],function(){jt(!1),E(null)}),ft=function(){A(!1),E(null)};Object(o.useEffect)((function(){if(et){var e=Oe!==Object(So.FormatDateFromString)(et.bookingDate)||Se!==et.bookingTime||we!==et.fullname||Ae!==et.email||Ee!==et.phone||Ve!==et.service||Ge!==et.notes;it(e)}}),[lt]),Object(o.useEffect)((function(){e.open||setTimeout((function(){G({edit:!1,person:null}),it(!1)}),500)}),[e.open]);var xt=function(e,t){if(e)De(t.fullname),ke(Object(So.FormatDateFromString)(t.bookingDate)),Be(t.bookingTime.toUpperCase()),Ie(t.email),We(t.phone),Ke(t.service),t.notes&&He(t.notes),G({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=Ae,n.phone=Ee,n.fullname=we,n.notes=Ge,n.service=Ve,n.bookingDate=Object(So.RevertFormatDateFromString)(Oe),n.bookingTime=Se,n.bookingRef=t.bookingRef,mt(n)&&yt({bookingId:a,person:n})}}else G({edit:e,person:t}),it(!1)},mt=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,fe(Object(N.a)(Object(N.a)({},ge),{},{bookingTimeError:!0}))),!t},yt=function(e){ie(!0),Co.updateBooking(e).then((function(e){ie(!1),G({edit:!1,person:null}),$e(!Xe)})).catch((function(e){ie(!1),G({edit:!1,person:null}),console.log(e)}))},kt=function(e,t){var n;e?$({delete:e,person:t}):e||t?!e&&t&&(n=t._id,se(!0),Co.deleteBooking(n).then((function(e){se(!1),$({delete:!1,person:null}),$e(!Xe)})).catch((function(e){se(!1),$({delete:!1,person:null}),console.log(e)}))):$({delete:e,person:t})},vt=function(e,t){var n;e?te({restore:e,person:t}):e||t?!e&&t&&(n=t._id,je(!0),Co.unDeleteBooking(n).then((function(e){je(!1),te({restore:!1,person:null}),$e(!Xe)})).catch((function(e){je(!1),te({restore:!1,person:null}),console.log(e)}))):te({restore:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Co.getBookingById(e.booking._id).then((function(e){tt(e.data)})).catch((function(e){console.log(e)})),d((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[Xe,s.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&tt(e.booking)}),[e.booking]);var Ct=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,Co.unPayBooking(et._id);case 4:ie(!1),jt(!1),$e(!Xe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ie(!1),jt(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,Co.refundBooking(et._id);case 4:ie(!1),Tt(),A(!1),$e(!Xe),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),ie(!1),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Co.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&d((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.prev=1,e.next=4,Co.manualRefundBooking(et._id);case 4:ie(!1),Tt(),$e(!Xe),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ie(!1),A(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=Object(T.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.checked,a=n?100:0,ie(!0),e.prev=3,e.next=6,Co.changeDepositBooking(et._id,a);case 6:ie(!1),$e(!Xe),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),ie(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Rt=i.a.useState(null),Lt=Object(l.a)(Rt,2),Pt=Lt[0],At=Lt[1],It=i.a.useState(!1),_t=Object(l.a)(It,2),Ft=_t[0],Et=_t[1],Wt=i.a.useState(!1),Mt=Object(l.a)(Wt,2),zt=Mt[0],Gt=Mt[1],qt=i.a.useState(!1),Jt=Object(l.a)(qt,2),Qt=Jt[0],Zt=Jt[1],en=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Et(!1),t.next=4,wn.getInvoiceByBookingId(e.booking._id);case 4:n=t.sent,At(n.data.invoice),Et(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),Et(!0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();i.a.useEffect((function(){e.booking&&e.open&&(en(),gn(),vn(e.booking.clinicNotes||""),Tn(e.booking.clinicNotes||""),Pn(!1))}),[e.booking,e.open]);var tn,an=i.a.useState(null),on=Object(l.a)(an,2),cn=on[0],rn=on[1],ln=i.a.useState(null),sn=Object(l.a)(ln,2),dn=sn[0],bn=sn[1],un=i.a.useState(null),jn=Object(l.a)(un,2),pn=jn[0],hn=jn[1],gn=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return rn(null),t.prev=1,t.next=4,Co.getBloodReportsByBookingId(e.booking._id);case 4:(n=t.sent).data&&n.data.result&&n.data.result.length>0&&rn(n.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),fn=function(){E(et),At(Pt),Gt(!0)},xn=i.a.useState(""),On=Object(l.a)(xn,2),kn=On[0],vn=On[1],Cn=i.a.useState(""),Sn=Object(l.a)(Cn,2),Bn=Sn[0],Tn=Sn[1],Dn=Object(o.useState)(!1),Rn=Object(l.a)(Dn,2),Ln=Rn[0],Pn=Rn[1],An=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Pn(!0),t.next=4,Co.setClinicNotes(e.booking._id,kn);case 4:(n=t.sent)&&n.data&&n.data.status&&"OK"===n.data.status?(Tn(kn),Pn(!1),$e(!Xe)):Pn(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),Pn(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:et&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,TransitionComponent:Ic,keepMounted:!0,onClose:function(){x(!1),Zt(!1),At(null),e.onClose()},PaperComponent:_c,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsxs)(Ut.a,{id:"alert-dialog-slide-title",style:et.tr?{backgroundColor:"#7e0082",color:"#fff"}:{},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"25x",left:"25px"},children:[Object(a.jsx)(Ot.a,{title:"COPY EDIT LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText("https://londonmedicalclinic.co.uk/medicalexpressclinic/user/edit/gynae/".concat(et._id)),p(!0),setTimeout((function(){p(!1)}),1500)},"aria-label":"delete",className:n.margin,size:"small",children:Object(a.jsx)(yn.a,{style:et.tr?{color:"#ddd"}:{},fontSize:"14px"})})}),Object(a.jsxs)("span",{hidden:!j,style:{fontSize:"12px",transition:"all 1s ease-in"},children:[" ","Copied"," "]})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"150px",background:"".concat(kn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem",width:"620px",height:"60px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes on the patient - staff only",style:{margin:"0px",height:"100%",fontSize:"0.7em"},value:kn||"",onChange:function(e){vn(e.target.value)},variant:"outlined"})}),Ln&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",borderRadius:"0px 4px 4px 0px",background:'"#fff"',fontSize:"0.8rem",fontWeight:"500",backgroundColor:"#e84331",padding:"0px 2px",color:"#fff"},children:"saving"}),Bn!==kn&&!Ln&&Object(a.jsx)("div",{style:{position:"absolute",top:"25x",left:"770px",background:"".concat(kn?"#d4fffe":"#fff"," "),borderRadius:"4px",fontSize:"0.7rem"},children:Object(a.jsx)(Ot.a,{title:"SAVE NOTES",children:Object(a.jsx)(J.a,{onClick:An,className:n.margin,size:"small",children:Object(a.jsx)(oi.a,{style:{color:"#fff6f5",background:"#d91b07",borderRadius:"4px"},fontSize:"14px"})})})}),Object(a.jsx)("div",{style:{position:"absolute",top:"25x",right:"60px",backgroundColor:Nn.GYNAE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px"},children:"GYNAE"}),Object(a.jsxs)(K.a,{container:!0,style:{paddingTop:"60px"},direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:et.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:{},children:"".concat(et.fullname)})}),et.deleted&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:et.tr?{padding:0,margin:0,color:"#fff",fontSize:25}:{padding:0,margin:0,color:"#333",fontSize:25}})})})]})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{paddingTop:"0px"},children:Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:n.infoDetails,children:Object(a.jsxs)("ul",{className:n.ul,children:[Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===et._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!et.deleted||ee.restore&&ee.person._id===et._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){vt(!0,et)},className:n.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ue,onClick:function(){vt(!1,et)},className:n.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(ee.restore&&ee.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ue,onClick:function(){vt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:et.deleted||X.delete||z.edit&&z.person._id===et._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){xt(!0,et)},className:n.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:oe||!ot,onClick:function(){xt(!1,et)},className:n.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(z.edit&&z.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:oe,onClick:function(){xt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===et._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)("li",{hidden:e.deleteButtonDisabled||et.deleted||z.edit||X.delete&&X.person._id===et._id,children:[et.OTCCharges>0&&Object(a.jsx)(Ot.a,{title:"Paid Records Cannot be Deleted!",children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:et.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,et)},className:n.DeleteButton,children:"Delete This Record"})})}),0===et.OTCCharges&&Object(a.jsx)(R.a,{disabled:et.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){kt(!0,et)},className:n.DeleteButton,children:"Delete This Record"})]}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:le,onClick:function(){kt(!1,et)},className:n.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(X.delete&&X.person._id===et._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:le,onClick:function(){kt(!1,null)},className:n.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:Object(So.FormatDateFromString)(et.bookingDate)}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingDateError,className:n.TextBox,value:Oe,onChange:function(e){ke(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{bookingDateError:!1})),st(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:et.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:ge.bookingTimeError,className:n.TextBox,value:Se,onChange:function(e){Be(e.target.value),fe(Object(N.a)(Object(N.a)({},ge),{},{bookingTimeError:!1})),st(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:et.fullname}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:we,onChange:function(e){De(e.target.value),st(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:et.email}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ae,onChange:function(e){Ie(e.target.value),st(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:et.service}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ve,onChange:function(e){Ke(e.target.value),st(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsx)("li",{className:n.li,style:{paddingTop:"10px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:null===(t=et.phone)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ee,onChange:function(e){We(e.target.value),st(!lt)},inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)(K.a,{item:!0,xs:6,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:z.edit&&z.person._id===et._id,className:n.infoData,children:et.notes}),Object(a.jsx)("span",{hidden:!(z.edit&&z.person._id===et._id),className:n.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:n.TextBox,value:Ge,onChange:function(e){He(e.target.value),st(!lt)},inputProps:{style:{padding:0}}})})]})]})}),Object(a.jsxs)("li",{className:n.li,style:{paddingTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"STATUS"})," ",(tn=et.status,"booked"===tn?Object(a.jsx)("div",{className:n.BookedLabel,children:" Booking Made "}):"patient_attended"===tn?Object(a.jsx)("div",{className:n.PatientAttendedLabel,children:" Patient Attended "}):"Unknown"),"patient_attended"===et.status&&!(z.edit&&z.person._id===et._id)&&!et.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",disabled:oe,style:{width:"300px"},onClick:function(e){return t=et._id,ie(!0),void Co.changeBackToBookingMade(t).then((function(e){ie(!1),$e(!Xe)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change Back To Booking Made"}),"booked"===et.status&&!(z.edit&&z.person._id===et._id)&&!et.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"default",disabled:oe,style:{width:"300px"},onClick:function(e){return t=et._id,ie(!0),void Co.changeToPatientAttended(t).then((function(e){ie(!1),$e(!Xe)})).catch((function(e){console.log(e),ie(!1)}));var t},children:"Change To Patient Attended"})]}),Object(a.jsx)("li",{hidden:et.deleted||z.edit,children:Object(a.jsx)(R.a,{disabled:!et.formData,startIcon:Object(a.jsx)(Dt.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=et._id,Bo.downloadGynaeRegForm(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))},className:n.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:et.deleted||z.edit||et.formData,children:Object(a.jsxs)(R.a,{disabled:!et.email||et.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=et._id,ie(!0),x(!1),Co.sendRegFormEmail(e).then((function(e){ie(!1),"OK"===e.data.status&&x(!0)})).catch((function(e){console.log(e),ie(!1)}))},className:n.DownloadForm,style:{position:"relative"},children:["Send Registration Form Email",f&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})}),Object(a.jsx)(Yt.a,{}),Object(a.jsxs)("li",{className:n.li,style:{marginTop:"20px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"INVOICE # : "})," ",Object(a.jsxs)("span",{style:{paddingLeft:"0px"},children:[!Ft&&Object(a.jsx)("span",{className:n.invoiceNumber,children:" ... "}),Ft&&Pt&&Object(a.jsxs)("span",{className:n.invoiceNumber,children:[" ",Pt.invoiceNumber," "]}),Ft&&!Pt&&Object(a.jsxs)("span",{className:n.invoiceNumber,style:{color:"red",fontSize:"0.9rem"},children:[" ","N/A"," "]})]}),!(z.edit&&z.person._id===et._id)&&!et.deleted&&Object(a.jsxs)(i.a.Fragment,{children:[Ft&&!Pt&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(){return fn()},children:"Issue Invoice"}),Ft&&Pt&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{variant:"outlined",startIcon:Object(a.jsx)(Dt.a,{}),color:"primary",className:n.printInvoiceButton,onClick:function(){return e=Pt._id,void wn.downloadInvoice(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}));var e},children:"Download Invoice"}),Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.editInvoiceButton,onClick:function(){return fn()},children:"Edit Invoice"}),Object(a.jsxs)(R.a,{disabled:!et.email||et.email.length<3,startIcon:Object(a.jsx)(nn.a,{}),type:"button",variant:"outlined",color:"primary",onClick:function(){var e,t;e=Pt._id,t=et.email,ie(!0),Zt(!1),wn.emailInvoice(e,t).then((function(e){ie(!1),"OK"===e.data.status&&Zt(!0)})).catch((function(e){console.log(e),ie(!1)}))},style:{position:"relative",marginLeft:"10px",paddingRight:"130px",fontSize:"0.8rem"},children:["Send Invoice By Email",Qt&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"5px",color:"#05ad19"},children:"Email Sent"})]})]})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"20px"},children:[Object(a.jsxs)("span",{className:n.infoTitle,children:[et.paymentInfo?"ONLINE":"PHONE"," DEPOSIT"]})," ",Object(a.jsx)("span",{className:et.deposit&&0!==et.deposit?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(et.deposit.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===et._id)&&!et.paid&&et.deleted&&et.deposit>0&&et.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return A(!0)},children:"Refund Deposit"}),!(z.edit&&z.person._id===et._id)&&!et.paid&&et.deleted&&et.deposit>0&&!et.paymentInfo&&Object(a.jsx)(R.a,{variant:"outlined",color:"primary",className:n.PayButton,onClick:function(e){return Nt()},children:Object(a.jsx)("span",{style:{textTransform:"capitalize"},children:"I made the refund manually"})}),!(z.edit&&z.person._id===et._id)&&!et.deleted&&!et.paymentInfo&&Object(a.jsx)(U.a,{style:{marginLeft:"90px"},control:Object(a.jsx)(Kt.a,{color:"primary",checked:et.deposit>0,onChange:wt,name:"deposit"}),label:et.deposit>0?Object(a.jsx)("span",{className:n.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:n.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})}),!(z.edit&&z.person._id===et._id)&&et.refund&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:n.checkIconSmall})," ","Refund Done","corporate"===et.paidBy?' "'.concat(et.corporate,'" '):""]})})]})}),Object(a.jsxs)("li",{className:n.li,children:[Object(a.jsx)("span",{className:n.infoTitle,children:"OTC CHARGES"})," ",Object(a.jsx)("span",{style:{paddingLeft:"15px"},className:et.OTCCharges&&0!==et.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat(et.OTCCharges.toLocaleString("en-GB"))}),!(z.edit&&z.person._id===et._id)&&!et.paid&&!et.deleted&&Object(a.jsx)(R.a,{variant:"outlined",color:"secondary",className:n.PayButton,onClick:function(e){return et._id,E(et),void S(!0)},children:"Pay"}),!(z.edit&&z.person._id===et._id)&&et.paid&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{className:n.PayLabel,children:[" ",Object(a.jsx)(St.a,{className:n.checkIconSmall})," ","Paid by ",et.paidBy,"corporate"===et.paidBy?' "'.concat(et.corporate,'" '):""]}),Object(a.jsx)(Ot.a,{title:"Undo Payment",children:Object(a.jsx)(J.a,{onClick:function(){return jt(!0)},children:Object(a.jsx)(mn.a,{style:{color:"red"}})})})]})]}),Object(a.jsx)("li",{className:n.li,children:Object(a.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"10px"},children:[Object(a.jsx)("span",{className:n.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:et.OTCCharges&&0!==et.OTCCharges?n.infoDataCharges:n.infoDataChargesHigher,children:"\xa3".concat((et.deposit+et.OTCCharges).toLocaleString("en-GB"))})]})}),Pt&&Object(a.jsxs)("li",{style:{lineHeight:"0.5rem",border:"1px dashed #999",padding:"0px 10px",marginBottom:"10px",marginTop:"-10px"},children:[Pt.items.map((function(e){return Object(a.jsxs)("p",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[" ",e.code," "]}),Object(a.jsxs)("span",{children:[" \xa3",e.price]})]})})),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{width:"110px",display:"inline-block",fontWeight:"500"},children:" TOTAL "}),Object(a.jsxs)("span",{style:{fontWeight:"600",color:"green"},children:[" \xa3",function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t}(Pt.items)]})]})]}),cn&&cn.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Yt.a,{}),Object(a.jsx)("li",{children:Object(a.jsx)("div",{style:{padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{color:"#dc2626",fontWeight:"600",fontSize:"1rem"},children:"Blood Results :"})}),cn.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return bn(e),void hn(!0)},startIcon:Object(a.jsx)(ye.a,{}),style:{color:"#dc2626"},variant:"outlined",children:e.filename})})}))]})})})]})]})})},"panel0")}),Object(a.jsx)(V.a,{className:n.backdrop,open:oe||le||ue,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)(Lo,{booking:F,open:v,price:Pt?Pt.grandTotal-et.deposit:null,handleClose:function(){S(!1),E(null)}}),Object(a.jsx)(Fn,{booking:F,invoice:Pt,open:zt,handleClose:function(e){Gt(!1),E(null),en()}}),Object(a.jsx)(Pc,{booking:dn,open:pn,onClose:function(){hn(!1),bn(null)}})]}),Object(a.jsxs)(Ht.a,{open:ut,onClose:gt,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Undo Payment"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to undo payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:gt,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ct,color:"secondary",autoFocus:!0,children:"Yes, Undo Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:P,onClose:ft,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#999"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund deposit payment for this booking?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:ft,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Bt,color:"secondary",autoFocus:!0,children:"Yes, Refund Payment"})]})]})]})})}var Ec=["Visa Medical"],Wc=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Mc=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function zc(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Gc(e){var t=Wc(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(So.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(So.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"service",headerName:"Service",width:250},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(Ec[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=Co.getAllBookings;"today"===e.date?n=Co.getTodayBookings:"old"===e.date?n=Co.getOldBookings:"future"===e.date?n=Co.getFutureBookings:"recent"===e.date?n=Co.getRecentBookingsAll:"deleted"===e.date&&(n=Co.getDeletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Mc(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Fc,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(Ec[0]),F(!1),j(!1)},PaperComponent:zc,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:Ec.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(So.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:No.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Hc(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Uc(e,t){return{time:e,amount:t}}var Yc=[Uc("09:00",0),Uc("10:00",0),Uc("11:00",0),Uc("12:00",0),Uc("13:00",0),Uc("14:00",0),Uc("15:00",0),Uc("16:00",0),Uc("17:00",0),Uc("18:00",void 0)],Vc=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Kc(){var e=Object(na.a)(),t=i.a.useState(Yc),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Co.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Uc("09:00",Vc(o,"09"))),n.push(Uc("10:00",Vc(o,"10"))),n.push(Uc("11:00",Vc(o,"11"))),n.push(Uc("12:00",Vc(o,"12"))),n.push(Uc("13:00",Vc(o,"13"))),n.push(Uc("14:00",Vc(o,"14"))),n.push(Uc("15:00",Vc(o,"15"))),n.push(Uc("16:00",Vc(o,"16"))),n.push(Uc("17:00",Vc(o,"17"))),n.push(Uc("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hc,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var qc=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Jc=function(e){if(1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())return null;var t,n=e.getMinutes(),a=e.getHours();if(function(e){return 4===e.getDay()}(e)&&a<13)return null;if(function(e){return 5===e.getDay()}(e)&&a>=13)return null;if(a<10||a>=18)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},Xc=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function $c(){var e=qc(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Jc(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),Co.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hc,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:Xc(Jc(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Fc,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Qc=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Zc(){var e=Qc(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),Co.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hc,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Service"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:e.service}),Object(a.jsx)(Oa.a,{children:Object(So.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var er=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function tr(){var e=er(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Kc,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)($c,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Zc,{})})})]})})}var nr=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function ar(){var e=nr(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(So.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(So.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Co.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Co.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Co.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(So.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var or=function(e){return"boolean"===typeof e};function ir(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var cr=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function rr(){var e=cr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!or(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Co.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Co.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:ir,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(ar,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var lr=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),sr=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=lr(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Co.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},dr=function e(){Object(ne.a)(this,e)};dr.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var br=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ur=[1,2,3,4,5,6,7],jr=[1,2,3,4,5,6],pr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),hr=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=pr(),r=dr.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:br.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:jr.map((function(e){return Object(a.jsx)("tr",{children:ur.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(sr,{cellIndex:(e-1)*ur.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*ur.length+i))})}))})}))})]})})},gr=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),fr=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=gr(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Co.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},xr=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],mr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Or=function(e){var t=e.dates,n=e.dayClicked,o=mr();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:xr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(fr,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},yr=n(119),kr=n.n(yr),vr=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Cr=[{packageName:"Consultation with Consultant Gynaecologist"},{packageName:"Coil Fitting/Coil Removal"},{packageName:"Well Woman Check"},{packageName:"Sexual Health Screening"},{packageName:"Pre-pregnancy/Fertility check"},{packageName:"Gynaecological Ultrasound"},{packageName:"HPV Vaccination"},{packageName:"Cervical / Pap Smear"},{packageName:"HPV Treatment / Wart Cryo-Therapy"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Sr(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Br(e){var t=vr(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(""),G=Object(l.a)(W,2),H=G[0],Y=G[1],J=i.a.useState(!1),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=function(){b||(g(""),O(!1),S(""),A(""),E(""),Y(""),Q(!1),e.handleClose(),u(!1))},ee=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},te=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ee()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,Co.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,service:F,notes:H,deposit:$?100:0,smsPush:!0});case 6:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Z(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),u(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:Z,PaperComponent:Sr,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",style:{position:"relative"},children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.GYNAE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GYNAE"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"480px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:F,onChange:function(e){E(e.target.value)},children:Cr.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:H,onChange:function(e){Y(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{otem:!0,xs:12,style:{marginTop:"15px"},children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{color:"primary",checked:$,onChange:function(e){Q(e.target.checked)},name:"deposit"}),label:$?Object(a.jsx)("span",{className:t.PriceLabelPaid,children:"\xa3100 Deposit Paid"}):Object(a.jsx)("span",{className:t.PriceLabelNotPaid,children:"\xa3100 Deposit Not Paid"})})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Z,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:te,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Tr=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Nr=function(e){e.key;var t=e.date,n=e.time,c=Tr(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Co.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(Fc,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(Br,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},wr=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Dr=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Rr=function(e){var t=e.date,n=Dr();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:wr.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Nr,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Lr=["January","February","March","April","May","June","July","August","September","October","November","December"],Pr=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Ar(){var e=Pr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Lr[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(hr,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(Or,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(Rr,{date:x}):void 0)]})}var Ir=["Visa Medical"],_r=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Fr=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Er(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Wr(e){var t=_r(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Zo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Zo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(Ir[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=Qo.getAllBookings;"today"===e.date?n=Qo.getTodayBookings:"old"===e.date?n=Qo.getOldBookings:"future"===e.date?n=Qo.getFutureBookings:"recent"===e.date?n=Qo.getRecentBookingsAll:"deleted"===e.date&&(n=Qo.getDeletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Fr(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(li,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(Ir[0]),F(!1),j(!1)},PaperComponent:Er,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:Ir.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(Zo.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:$o.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Mr(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function zr(e,t){return{time:e,amount:t}}var Gr=[zr("09:00",0),zr("10:00",0),zr("11:00",0),zr("12:00",0),zr("13:00",0),zr("14:00",0),zr("15:00",0),zr("16:00",0),zr("17:00",0),zr("18:00",void 0)],Hr=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Ur(){var e=Object(na.a)(),t=i.a.useState(Gr),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Qo.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(zr("09:00",Hr(o,"09"))),n.push(zr("10:00",Hr(o,"10"))),n.push(zr("11:00",Hr(o,"11"))),n.push(zr("12:00",Hr(o,"12"))),n.push(zr("13:00",Hr(o,"13"))),n.push(zr("14:00",Hr(o,"14"))),n.push(zr("15:00",Hr(o,"15"))),n.push(zr("16:00",Hr(o,"16"))),n.push(zr("17:00",Hr(o,"17"))),n.push(zr("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Mr,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Yr=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Vr=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},Kr=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function qr(){var e=Yr(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Vr(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),Qo.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Mr,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:Kr(Vr(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(li,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Jr=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Xr(){var e=Jr(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),Qo.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Mr,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(Zo.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var $r=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Qr(){var e=$r(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Ur,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(qr,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Xr,{})})})]})})}var Zr=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function el(){var e=Zr(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(Zo.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Zo.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Qo.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Qo.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Qo.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Zo.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var tl=function(e){return"boolean"===typeof e};function nl(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var al=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function ol(){var e=al(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!tl(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Qo.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Qo.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:nl,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(el,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var il=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),cl=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=il(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Qo.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},rl=function e(){Object(ne.a)(this,e)};rl.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var ll=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],sl=[1,2,3,4,5,6,7],dl=[1,2,3,4,5,6],bl=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),ul=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=bl(),r=rl.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ll.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:dl.map((function(e){return Object(a.jsx)("tr",{children:sl.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(cl,{cellIndex:(e-1)*sl.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*sl.length+i))})}))})}))})]})})},jl=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),pl=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=jl(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Qo.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},hl=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],gl=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),fl=function(e){var t=e.dates,n=e.dayClicked,o=gl();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:hl.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(pl,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},xl=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function ml(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Ol(e){var t=xl(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=function(){b||(g(""),O(!1),S(""),A(""),E(""),e.handleClose(),u(!1))},M=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},z=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,Qo.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,notes:F,smsPush:!0});case 6:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),W(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),u(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:W,PaperComponent:ml,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.GP_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"GP"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"400px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:F,onChange:function(e){E(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:W,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:z,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var yl=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),kl=function(e){e.key;var t=e.date,n=e.time,c=yl(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Qo.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:H,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(li,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(Ol,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},vl=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Cl=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Sl=function(e){var t=e.date,n=Cl();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:vl.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(kl,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Bl=["January","February","March","April","May","June","July","August","September","October","November","December"],Tl=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Nl(){var e=Tl(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Bl[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(ul,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(fl,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(Sl,{date:x}):void 0)]})}var wl=["Visa Medical"],Dl=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Rl=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Ll(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Pl(e){var t=Dl(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(pi.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(pi.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(wl[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=ji.getAllBookings;"today"===e.date?n=ji.getTodayBookings:"old"===e.date?n=ji.getOldBookings:"future"===e.date?n=ji.getFutureBookings:"recent"===e.date?n=ji.getRecentBookingsAll:"deleted"===e.date?n=ji.getDeletedBookings:"live"===e.date?n=ji.getLiveBookings:"completed"===e.date&&(n=ji.getCompletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Rl(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(ki,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(wl[0]),F(!1),j(!1)},PaperComponent:Ll,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:wl.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(pi.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:ui.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Al(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Il(e,t){return{time:e,amount:t}}var _l=[Il("09:00",0),Il("10:00",0),Il("11:00",0),Il("12:00",0),Il("13:00",0),Il("14:00",0),Il("15:00",0),Il("16:00",0),Il("17:00",0),Il("18:00",void 0)],Fl=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function El(){var e=Object(na.a)(),t=i.a.useState(_l),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,ji.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Il("09:00",Fl(o,"09"))),n.push(Il("10:00",Fl(o,"10"))),n.push(Il("11:00",Fl(o,"11"))),n.push(Il("12:00",Fl(o,"12"))),n.push(Il("13:00",Fl(o,"13"))),n.push(Il("14:00",Fl(o,"14"))),n.push(Il("15:00",Fl(o,"15"))),n.push(Il("16:00",Fl(o,"16"))),n.push(Il("17:00",Fl(o,"17"))),n.push(Il("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Al,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Wl=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Ml=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},zl=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function Gl(){var e=Wl(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Ml(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),ji.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Al,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:zl(Ml(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(ki,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Hl=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Ul(){var e=Hl(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),ji.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Al,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(pi.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var Yl=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Vl(){var e=Yl(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(El,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Gl,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Ul,{})})})]})})}var Kl=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function ql(){var e=Kl(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(pi.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(pi.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),ji.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),ji.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),ji.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(pi.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var Jl=function(e){return"boolean"===typeof e};function Xl(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var $l=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Ql(){var e=$l(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!Jl(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){ji.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),ji.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:Xl,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(ql,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var Zl=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),es=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=Zl(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,ji.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},ts=function e(){Object(ne.a)(this,e)};ts.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var ns=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],as=[1,2,3,4,5,6,7],os=[1,2,3,4,5,6],is=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),cs=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=is(),r=ts.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ns.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:os.map((function(e){return Object(a.jsx)("tr",{children:as.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(es,{cellIndex:(e-1)*as.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*as.length+i))})}))})}))})]})})},rs=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),ls=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=rs(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return ji.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},ss=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ds=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),bs=function(e){var t=e.dates,n=e.dayClicked,o=ds();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:ss.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(ls,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},us=(Object(w.a)((function(e){return{loadingBox:{}}})),function(e){var t=e.title,n=e.value,c=e.dateChanged,r=e.error,s=i.a.useState(""),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(""),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState([]),k=Object(l.a)(y,2),v=k[0],C=k[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],N=B[1],w=i.a.useState([]),D=Object(l.a)(w,2),R=D[0],L=D[1],P=function(e,t,n){var a="".concat(e),o="".concat(t+1);1===a.length&&(a="0".concat(a)),1===o.length&&(o="0".concat(o)),c("".concat(n,"-").concat(o,"-").concat(a))};return Object(o.useEffect)((function(){if(n&&10===n.length){var e=parseInt(n.substr(8,2)),t=parseInt(n.substr(5,2)),a=parseInt(n.substr(0,4));u(e),g(t-1),O(a)}}),[n]),Object(o.useEffect)((function(){for(var e=[],t=[],n=[],a=1;a<=31;a++)e.push(a);for(a=0;a<12;a++)t.push(vn()(new Date(2020,a,5),"mmmm"));for(a=1900;a<(new Date).getFullYear();a++)n.push(a);C(e),N(t),L(n)}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative",border:"1px solid ".concat(r?"red":"#ddd"),borderRadius:"10px",padding:"20px",paddingBottom:"50px",marginTop:"20px"},children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-15px",left:"15px",backgroundColor:"#fff",color:"".concat(r?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:t}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Day"}),Object(a.jsx)(zt.a,{labelId:"day-label",id:"day-select",value:b,onChange:function(e){u(e.target.value),P(e.target.value,h,m)},children:v.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"month-label",children:"Month"}),Object(a.jsx)(zt.a,{labelId:"month-label",id:"month-select",value:h,onChange:function(e){g(e.target.value),P(b,e.target.value,m)},children:T.map((function(e,t){return Object(a.jsx)(Gt.a,{value:t,children:e})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)(M.a,{fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"day-label",children:"Year"}),Object(a.jsx)(zt.a,{labelId:"year-label",id:"year-select",value:m,onChange:function(e){O(e.target.value),P(b,h,e.target.value)},children:R.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:e})}))})]})})]})]})})}),js=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),ps=[{packageName:"Sexual Health Clinic - Bronze"},{packageName:"Sexual Health Clinic - Silver"},{packageName:"Sexual Health Clinic - Gold"},{packageName:"Sexual Health Clinic - Platinium"},{packageName:"BLOOD SAMPLE AND URINE"},{packageName:"BLOOD SAMPLE AND URINE OR SWAB"},{packageName:"Indivisual Tests"},{packageName:"Combo STD Checks"}],hs=["HIV TESTING","CHLAMYDIA TESTING","SYPHILIS BLOOD TESTING","HERPES TESTING","GONORRHOEA TESTING","HEPATITIS A PROFILE TESTING","HEPATITIS B PROFILE TESTING","HEPATITIS C ANTIBODIES TESTING","HPV TESTING","BACTERIAL SWAB TESTING"],gs=["CHLAMYDIA, GONORRHOEA AND TRICHOMONAS","HIV I & II WITH SYPHILIS"];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function fs(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function xs(e){var t=js(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(!1),G=Object(l.a)(W,2),H=G[0],J=G[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState([]),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(!1),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(null),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=i.a.useState(!1),ye=Object(l.a)(Oe,2),ke=ye[0],ve=ye[1],Ce=function(){b||(g(""),O(!1),S(""),A(""),E(""),J(!1),Z(""),ae([]),re([]),be(null),me(null),e.handleClose(),u(!1))},Se=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),(!F||F.trim().length<1)&&(J(!0),e=!0),"Indivisual Tests"===F&&0===ne.length&&(J(!0),e=!0),"Combo STD Checks"===F&&0===ce.length&&(J(!0),e=!0),de||(he(!0),e=!0),xe&&10===xe.length||(ve(!0),e=!0),!e},Be=function(){var t=Object(T.a)(B.a.mark((function t(){var n,a,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Se()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),n=F,"Indivisual Tests"===F?(a="",ne.forEach((function(e,t){a+=e,t<ne.length-1&&(a+=" - ")})),n="Indivisual Tests : ( ".concat(a," )")):"Combo STD Checks"===F&&(o="",ce.forEach((function(e,t){o+=e,t<ce.length-1&&(o+=" - ")})),n="Combo STD Checks : ( ".concat(o," )")),t.prev=5,t.next=8,ji.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,packageName:n,notes:Q,gender:de,birthDate:xe});case 8:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ce(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),u(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:Ce,PaperComponent:fs,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.STD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"STD"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"650px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(us,{error:ke,title:"Date of Birth",value:xe,dateChanged:function(e){me(e),ve(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(zt.a,{error:!!pe,required:!0,labelId:"gender-label",id:"gender-select",value:de,onChange:function(e){be(e.target.value),he(!1)},children:[Object(a.jsx)(Gt.a,{value:"M",children:"Male"}),Object(a.jsx)(Gt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,required:!0,error:H,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:F,onChange:function(e){E(e.target.value),J(!1)},children:ps.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),"Indivisual Tests"===F&&Object(a.jsx)(K.a,{item:!0,xs:12,children:hs.map((function(e){return Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ne.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(J(!1),ne.findIndex((function(e){return e===t}))<0&&ae([].concat(Object(Et.a)(ne),[t]))):ae(ne.filter((function(e){return e!==t}))),J(!1)}(t,e)},name:e}),label:e})}))}),"Combo STD Checks"===F&&Object(a.jsx)(K.a,{item:!0,xs:12,children:gs.map((function(e){return Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ce.findIndex((function(t){return t===e}))>=0,onChange:function(t){return function(e,t){e.target.checked?(J(!1),ce.findIndex((function(e){return e===t}))<0&&re([].concat(Object(Et.a)(ce),[t]))):re(ce.filter((function(e){return e!==t})))}(t,e)},name:e}),label:e})}))}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:Q,onChange:function(e){Z(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Ce,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Be,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var ms=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Os=function(e){e.key;var t=e.date,n=e.time,c=ms(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,ji.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(ki,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(xs,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},ys=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ks=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),vs=function(e){var t=e.date,n=ks();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:ys.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Os,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Cs=["January","February","March","April","May","June","July","August","September","October","November","December"],Ss=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Bs(){var e=Ss(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Cs[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(cs,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(bs,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(vs,{date:x}):void 0)]})}var Ts=["Visa Medical"],Ns=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),ws=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function Ds(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Rs(e){var t=Ns(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(Ts[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=Eo.getAllBookings;"today"===e.date?n=Eo.getTodayBookings:"old"===e.date?n=Eo.getOldBookings:"future"===e.date?n=Eo.getFutureBookings:"recent"===e.date?n=Eo.getRecentBookingsAll:"deleted"===e.date?n=Eo.getDeletedBookings:"live"===e.date?n=Eo.getLiveBookings:"completed"===e.date&&(n=Eo.getCompletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",ws(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Di,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(Ts[0]),F(!1),j(!1)},PaperComponent:Ds,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:Ts.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(zo.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:Fo.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Ls(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Ps(e,t){return{time:e,amount:t}}var As=[Ps("09:00",0),Ps("10:00",0),Ps("11:00",0),Ps("12:00",0),Ps("13:00",0),Ps("14:00",0),Ps("15:00",0),Ps("16:00",0),Ps("17:00",0),Ps("18:00",void 0)],Is=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function _s(){var e=Object(na.a)(),t=i.a.useState(As),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Eo.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Ps("09:00",Is(o,"09"))),n.push(Ps("10:00",Is(o,"10"))),n.push(Ps("11:00",Is(o,"11"))),n.push(Ps("12:00",Is(o,"12"))),n.push(Ps("13:00",Is(o,"13"))),n.push(Ps("14:00",Is(o,"14"))),n.push(Ps("15:00",Is(o,"15"))),n.push(Ps("16:00",Is(o,"16"))),n.push(Ps("17:00",Is(o,"17"))),n.push(Ps("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Ls,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Fs=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Es=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},Ws=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function Ms(){var e=Fs(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Es(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),Eo.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Ls,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:Ws(Es(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Di,{booking:h,open:m,onClose:function(){O(!1)}})]})}var zs=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Gs(){var e=zs(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),Eo.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Ls,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(zo.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var Hs=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Us(){var e=Hs(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(_s,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Ms,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Gs,{})})})]})})}var Ys=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function Vs(){var e=Ys(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(zo.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(zo.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Eo.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Eo.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Eo.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(zo.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,hidden:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var Ks=function(e){return"boolean"===typeof e};function qs(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var Js=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function Xs(){var e=Js(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!Ks(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Eo.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Eo.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:qs,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(Vs,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var $s=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),Qs=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=$s(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Eo.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Zs=function e(){Object(ne.a)(this,e)};Zs.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var ed=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],td=[1,2,3,4,5,6,7],nd=[1,2,3,4,5,6],ad=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),od=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=ad(),r=Zs.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:ed.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:nd.map((function(e){return Object(a.jsx)("tr",{children:td.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(Qs,{cellIndex:(e-1)*td.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*td.length+i))})}))})}))})]})})},id=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),cd=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=id(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Eo.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},rd=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],ld=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),sd=function(e){var t=e.dates,n=e.dayClicked,o=ld();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:rd.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(cd,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},dd=n(1300),bd=n(472),ud=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},listOptions:{backgroundColor:"#dcf0f5",color:"#034859",borderRadius:"30px",padding:"10px",fontWeight:"500",fontSize:"1rem"}}})),jd=[{packageName:"-"},{packageName:"SLIVER BLOOD TEST"},{packageName:'SLIVER PLUS BLOOD TEST"'},{packageName:"GOLD BLOOD TEST"},{packageName:"PLATINIUM BLOOD TEST"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function pd(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function hd(e){var t=ud(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(!1),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),F=Object(l.a)(I,2),E=F[0],W=F[1],G=i.a.useState(""),H=Object(l.a)(G,2),U=H[0],Y=H[1],J=i.a.useState(""),X=Object(l.a)(J,2),$=X[0],Q=X[1],Z=i.a.useState(!1),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(""),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState([]),le=Object(l.a)(re,2),se=(le[0],le[1]),de=i.a.useState([]),be=Object(l.a)(de,2),ue=(be[0],be[1]),je=i.a.useState(""),pe=Object(l.a)(je,2),he=pe[0],ge=pe[1],fe=i.a.useState([]),xe=Object(l.a)(fe,2),me=xe[0],Oe=xe[1],ye=i.a.useState([]),ke=Object(l.a)(ye,2),ve=ke[0],Ce=ke[1],Se=i.a.useState(null),Be=Object(l.a)(Se,2),Te=Be[0],Ne=Be[1],we=i.a.useState(!1),De=Object(l.a)(we,2),Re=De[0],Le=De[1],Pe=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eo.getAllCodes();case 3:t=e.sent,n=t.data.result,a=n.map((function(e){var t=e.code[0].toUpperCase();return Object(N.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),console.log(a),Oe(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){window.scrollTo(0,0),me&&0!==me.length||!e.open||Pe()}),[e.open]);var Ae=function(){b||(g(""),O(!1),W(""),Y(""),Q(""),ne(!1),ce(""),se([]),ue([]),Ne(null),S(null),Ce([]),e.handleClose(),u(!1))},Ie=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),Te&&10===Te.length||(Le(!0),e=!0),v||(A(!0),e=!0),!e},_e=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ie()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),n=$,t.prev=4,t.next=7,Eo.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:E,email:U,packageName:n,birthDate:Te,gender:v,indivisualTests:0===ve.length?null:JSON.stringify(ve),notes:ie,smsPush:!0});case 7:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ae(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),u(!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:Ae,PaperComponent:pd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.BLOOD_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Blood"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"620px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:E,onChange:function(e){W(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:U,onChange:function(e){Y(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(us,{error:Re,title:"Date of Birth",value:Te,dateChanged:function(e){Ne(e),Le(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(zt.a,{error:!!P,required:!0,labelId:"gender-label",id:"gender-select",value:v,onChange:function(e){S(e.target.value),A(!1)},children:[Object(a.jsx)(Gt.a,{value:"M",children:"Male"}),Object(a.jsx)(Gt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,error:te,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:$,onChange:function(e){Q(e.target.value),ne(!1)},children:jd.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{style:{textAlign:"center",width:"100%",fontWeight:"400",color:"#777",marginTop:"20px"},children:Object(a.jsx)(Dn.a,{multiple:!0,id:"tags-outlined",noOptionsText:he,value:ve,onChange:function(e,t){Ce(t),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{indivisualTests:t})}))},filterOptions:function(e,t){var n=t.inputValue;return n&&n.length>=3?(ge(""),Object(bd.a)(e,n,{keys:["code","description"]})):(ge("Please enter at least 3 characters"),Object(bd.a)(e,"$$$$",{keys:["code","description"]}))},options:me.sort((function(e,t){return-t.firstLetter.localeCompare(e.firstLetter)})),getOptionLabel:function(e){return Object(a.jsxs)("div",{className:t.listOptions,children:[e.code," - ",e.description," - ",parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})]})},renderTags:function(e,t){return e.map((function(e,n){return Object(a.jsx)(dd.a,Object(N.a)(Object(N.a)({variant:"outlined",color:"primary",label:Object(a.jsx)(_.a,{style:{whiteSpace:"normal",fontSize:"0.9rem",fontWeight:"500",padding:"10px",width:"100%"},children:"".concat(e.code," - ").concat(e.description," - ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))})},t({index:n})),{},{style:{height:"100%",width:"100%"}}))}))},filterSelectedOptions:!0,renderInput:function(e){return Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({fullWidth:!0},e),{},{variant:"outlined",label:"Blood Tests",placeholder:"Enter blood test"}))}})})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginBottom:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:ie,onChange:function(e){ce(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"}})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Ae,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:_e,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]})})})}var gd,fd=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),xd=function(e){e.key;var t=e.date,n=e.time,c=fd(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Eo.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(Di,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(hd,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},md=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Od=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),yd=function(e){var t=e.date,n=Od();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:md.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(xd,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},kd=["January","February","March","April","May","June","July","August","September","October","November","December"],vd=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Cd(){var e=vd(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(kd[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(od,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(sd,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(yd,{date:x}):void 0)]})}var Sd,Bd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),Td=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Nd(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(Td,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function wd(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Dd(){var e=Bd(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Ot.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=m.bookings.find((function(t){return t._id===e}));r(t),u(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:250},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===H?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===W,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===W,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===W,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===W,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],p=i.a.useContext(C),h=Object(l.a)(p,2),g=h[0],f=(h[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(null),k=Object(l.a)(y,2),v=(k[0],k[1]),S=i.a.useState(""),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(null),F=Object(l.a)(_,2),W=F[0],M=F[1],z=i.a.useState("unresolved"),G=Object(l.a)(z,2),H=G[0],V=G[1],q=i.a.useState(!1),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),se=le[0],de=le[1],be=i.a.useState(null),ue=Object(l.a)(be,2),je=(ue[0],ue[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(!1),Ne=Object(l.a)(Te,2),De=Ne[0],Re=Ne[1],Le=i.a.useState(!1),Pe=Object(l.a)(Le,2),Ae=Pe[0],Ie=Pe[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(10),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(o.useEffect)((function(){te&&qe(te)}),[g.bookingDialogDataChanged]);var qe=function(e){Eo.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Eo.findBestMatches(e).then((function(e){de(e.data.matchedBookings)})).catch((function(e){console.log(e),de([])}))},Xe=function(e,t){W||(M(t),Eo.archiveBloodReport(t).then((function(e){M(null),I(!A)})).catch((function(e){M(null)})))},$e=function(e,t){W||(M(t),Eo.unArchiveBloodReport(t).then((function(e){M(null),I(!A)})).catch((function(e){M(null)})))},Qe=Object(o.useRef)();Object(o.useEffect)((function(){var e=Eo.getNewUnmatchedBloodReports;"archived"===H&&(e=Eo.getArchivedUnmatchedBloodReports),Ke(!0),O({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Qe.current=t,t.then((function(e){t===Qe.current&&(Ke(!1),O({bookings:e,cachedBookings:Object(Et.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(Ke(!1),console.log(e),O({bookings:m.bookings,cachedBookings:m.cachedBookings,isFetching:!1}))}))}),[A,H,g.bloodReportRefresh]),Object(o.useEffect)((function(){if(T&&T.trim().length>0){var e=m.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(T.toLowerCase())>=0}));O({bookings:e,cachedBookings:m.cachedBookings,isFetching:!1})}else O({bookings:Object(Et.a)(m.cachedBookings),cachedBookings:m.cachedBookings,isFetching:!1})}),[T]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=Ee,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Ee]);var Ze=function(e){Ao.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#ff8000"},children:[" ",Object(a.jsx)(we.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Unmatched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:e.refreshButton,onClick:function(e){w(""),I(!A)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Wa.a,{value:H,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&V(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Ea.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(Ea.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:T,onChange:function(e){w(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:m.bookings,columns:j,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&v(e.rows[0])}})}),Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),de(null),r(null),ke(!1),fe(!1),We(null),Be(!1),Re(!1),clearInterval(gd),Ie(!1)}),100)},PaperComponent:wd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(za.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!se||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fa.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),se&&0===se.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),se&&ie&&se.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Select"}),Object(a.jsx)(Oa.a,{children:"Match"}),Object(a.jsx)(Oa.a,{children:"Forename"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Test Date"}),Object(a.jsx)(Oa.a,{})]})}),Object(a.jsx)(ma.a,{children:se.map((function(e){var t;return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:Object(a.jsx)(Ot.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:c&&c._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?r(t):r(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Oa.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Oa.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Oa.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Oa.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Ha.a,{})})}),Object(zo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Oa.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Oa.a,{style:vn()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(zo.FormatDateFromString)(vn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Oa.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){je(t),u(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!c||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Eo.getBookingById(c._id).then((function(e){r(e.data)})),Eo.matchRecords(c._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!c&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!De&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",c.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),Eo.resendEmails(te).then((function(e){gd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),I(!A),clearInterval(gd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),He(0),We("downloadFailed"),Ie(!0),Eo.regenerateFiles(te).then((function(e){gd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){We(e.data.status),"sent"===e.data.status&&(Be(!1),Re(!0),I(!A),clearInterval(gd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!De&&"Sending ...",De&&!Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",c.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Nd,{variant:"determinate",color:"primary",value:Ge})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Pc,{booking:c,open:b,onClose:function(){u(!1),r(!1)}})]})}var Rd,Ld=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),Pd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Ad(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(Pd,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Id(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function _d(){var e=Ld(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],s=c[1],d=i.a.useState(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Ot.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));s(t),j(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"archive"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Ze(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return $e(e,t.value)},className:e.archiveButton,children:"Restore"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),T=Object(l.a)(B,2),w=T[0],D=T[1],P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(null),W=Object(l.a)(F,2),M=W[0],z=W[1],G=i.a.useState("unresolved"),H=Object(l.a)(G,2),V=H[0],q=H[1],X=i.a.useState(!1),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(null),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(null),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(null),je=Object(l.a)(ue,2),pe=(je[0],je[1]),he=i.a.useState(!1),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=i.a.useState(!1),Oe=Object(l.a)(me,2),ke=Oe[0],ve=Oe[1],Ce=i.a.useState(!1),Se=Object(l.a)(Ce,2),Be=Se[0],Te=Se[1],Ne=i.a.useState(!1),we=Object(l.a)(Ne,2),De=we[0],Re=we[1],Le=i.a.useState(!1),Pe=Object(l.a)(Le,2),Ae=Pe[0],Ie=Pe[1],_e=i.a.useState(""),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(10),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(o.useEffect)((function(){ne&&qe(ne)}),[f.bookingDialogDataChanged]);var qe=function(e){Eo.getLinkDetails(e).then((function(e){re(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Eo.findBestMatches(e).then((function(e){be(e.data.matchedBookings)})).catch((function(e){console.log(e),be([])}))},Xe=function(e,t){M||(z(t),Eo.archiveBloodReport(t).then((function(e){z(null),_(!I)})).catch((function(e){z(null)})))},$e=function(e,t){M||(z(t),Eo.unArchiveBloodReport(t).then((function(e){z(null),_(!I)})).catch((function(e){z(null)})))},Qe=Object(o.useRef)();Object(o.useEffect)((function(){var e=Eo.getNewMatchedBloodReports;"archived"===V&&(e=Eo.getArchivedMatchedBloodReports),Ke(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Qe.current=t,t.then((function(e){t===Qe.current&&(Ke(!1),y({bookings:e,cachedBookings:Object(Et.a)(e),isFetching:!1}))}),(function(e){t===Qe.current&&(Ke(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Et.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){He((function(e){return e>=100?100:(t=Ee,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Ee]);var Ze=function(e){Ao.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(tt.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Matched Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),_(!I)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)(Wa.a,{value:V,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&q(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Ea.a,{value:"unresolved","aria-label":"left aligned",children:"NEW"}),Object(a.jsx)(Ea.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:Q,onClose:function(){Z(!1),setTimeout((function(){ae(null),re(null),be(null),s(null),ve(!1),xe(!1),We(null),Te(!1),Re(!1),clearInterval(Sd),Ie(!1)}),100)},PaperComponent:Id,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(za.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!de||!ce)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fa.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),de&&0===de.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),de&&ce&&de.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ce.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ce.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ce.testDate)})]})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Select"}),Object(a.jsx)(Oa.a,{children:"Match"}),Object(a.jsx)(Oa.a,{children:"Forename"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Test Date"}),Object(a.jsx)(Oa.a,{})]})}),Object(a.jsx)(ma.a,{children:de.map((function(e){var t;return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:Object(a.jsx)(Ot.a,{title:e.birthDate!==ce.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:ke||fe,onChange:function(t){return function(e,t){e.target.checked?s(t):s(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Oa.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Oa.a,{style:e.forenameCapital===ce.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Oa.a,{style:e.surnameCapital===ce.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Oa.a,{style:e.birthDate===ce.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ce.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Ha.a,{})})}),Object(zo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Oa.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Oa.a,{style:vn()(e.samplingTimeStamp,"yyyy-mm-dd")===ce.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(zo.FormatDateFromString)(vn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Oa.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Be,onClick:function(t){return function(e,t){pe(t),j(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!ke&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||fe,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){xe(!0),Eo.getBookingById(r._id).then((function(e){s(e.data)})),Eo.matchRecords(r._id,ne).then((function(e){"OK"===e.data.status&&(xe(!1),ve(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),ke&&!De&&!Be&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Te(!0),He(0),We("downloadFailed"),Eo.resendEmails(ne).then((function(e){Sd=setInterval((function(){Eo.getLinkDetails(ne).then((function(e){We(e.data.status),"sent"===e.data.status&&(Te(!1),Re(!0),_(!I),clearInterval(Sd))}))}),1e3)})).catch((function(e){console.log(e),Te(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ve(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Be||De,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Te(!0),He(0),We("downloadFailed"),Ie(!0),Eo.regenerateFiles(ne).then((function(e){Sd=setInterval((function(){Eo.getLinkDetails(ne).then((function(e){We(e.data.status),"sent"===e.data.status&&(Te(!1),Re(!0),_(!I),clearInterval(Sd))}))}),1e3)})).catch((function(e){console.log(e),Te(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),ke&&(Be||De)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Be&&!De&&"Sending ...",De&&!Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),De&&Ae&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),ke&&(Be||De)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Ad,{variant:"determinate",color:"primary",value:Ge})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Be&&!De&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Pc,{booking:r,open:u,onClose:function(){j(!1),s(!1)}})]})}var Fd,Ed=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),Wd=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Md(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(Wd,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function zd(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Gd(){var e=Ed(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],s=c[1],d=i.a.useState(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Ot.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));s(t),j(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"Restore"})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return Xe(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return Qe(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),T=Object(l.a)(B,2),w=T[0],D=T[1],P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(null),W=Object(l.a)(F,2),M=W[0],z=W[1],G=i.a.useState("unresolved"),H=Object(l.a)(G,2),V=H[0],q=(H[1],i.a.useState(!1)),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),se=le[0],de=le[1],be=i.a.useState(null),ue=Object(l.a)(be,2),je=(ue[0],ue[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(!1),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1],Re=i.a.useState(!1),Le=Object(l.a)(Re,2),Pe=Le[0],Ae=Le[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(10),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],Ue=i.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1];Object(o.useEffect)((function(){te&&qe(te)}),[f.bookingDialogDataChanged]);var qe=function(e){Eo.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Eo.findBestMatches(e).then((function(e){de(e.data.matchedBookings)})).catch((function(e){console.log(e),de([])}))},Xe=function(e,t){M||(z(t),Eo.unArchiveBloodReport(t).then((function(e){z(null),_(!I)})).catch((function(e){z(null)})))},$e=Object(o.useRef)();Object(o.useEffect)((function(){var e=Eo.getArchivedBloodReports;Ke(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));$e.current=t,t.then((function(e){t===$e.current&&(Ke(!1),y({bookings:e,cachedBookings:Object(Et.a)(e),isFetching:!1}))}),(function(e){t===$e.current&&(Ke(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Et.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){Ge((function(e){return e>=100?100:(t=Fe,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Fe]);var Qe=function(e){Ao.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ve&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#777"},children:[" ",Object(a.jsx)(He.a,{style:{fontSize:"2.2rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Archived Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),_(!I)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),de(null),s(null),ke(!1),fe(!1),Ee(null),Be(!1),De(!1),clearInterval(Rd),Ae(!1)}),100)},PaperComponent:zd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(za.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!se||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fa.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),se&&0===se.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),se&&ie&&se.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Select"}),Object(a.jsx)(Oa.a,{children:"Match"}),Object(a.jsx)(Oa.a,{children:"Forename"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Test Date"}),Object(a.jsx)(Oa.a,{})]})}),Object(a.jsx)(ma.a,{children:se.map((function(e){var t;return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:Object(a.jsx)(Ot.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?s(t):s(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Oa.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Oa.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Oa.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Oa.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Ha.a,{})})}),Object(zo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Oa.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Oa.a,{style:vn()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(zo.FormatDateFromString)(vn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Oa.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){je(t),j(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Eo.getBookingById(r._id).then((function(e){s(e.data)})),Eo.matchRecords(r._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!we&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Eo.resendEmails(te).then((function(e){Rd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),_(!I),clearInterval(Rd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Ae(!0),Eo.regenerateFiles(te).then((function(e){Rd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),_(!I),clearInterval(Rd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||we)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!we&&"Sending ...",we&&!Pe&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),we&&Pe&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||we)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Md,{variant:"determinate",color:"primary",value:ze})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!we&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Pc,{booking:r,open:u,onClose:function(){j(!1),s(!1)}})]})}var Hd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},downloadPDFButton:{marginRight:"50px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.85rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.85rem"}}})),Ud=Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Yd(e){return Object(a.jsxs)(P.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(P.a,{width:"100%",mr:1,children:Object(a.jsx)(Ud,Object(N.a)({variant:"determinate"},e))}),Object(a.jsx)(P.a,{minWidth:35,children:Object(a.jsx)(_.a,{style:{fontWeight:"800",color:"#5e855e"},variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}function Vd(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Kd(){var e=Hd(),t=function(t){switch(t){case"pcr":return e.PCRLabel;case"gp":return e.GPLabel;case"gynae":return e.GynaeLabel;case"std":return e.STDLabel;case"blood":return e.BloodLabel;case"screening":return e.ScreeningLabel;case"corporate":return e.CorporateLabel;default:return e.clinicTitle}},n=i.a.useState(null),c=Object(l.a)(n,2),r=c[0],s=c[1],d=i.a.useState(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=[{field:"id",headerName:" ",width:100,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.getValue("emailSent")&&Object(a.jsx)(Ot.a,{style:{fontSize:"20px"},title:"Email has been sent",children:Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#009634"}})}),!e.getValue("emailSent")&&Object(a.jsx)(Je.a,{style:{fontSize:"20px",color:"#fafafa"}}),Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return function(e){var t=O.bookings.find((function(t){return t._id===e}));s(t),j(!0)}(e.getValue("_id"))},children:Object(a.jsx)(ye.a,{})})]})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:t(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"testDate",headerName:"Test Date",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"name",headerName:"Name",width:150},{field:"birthDate",headerName:"D.O.B",width:120,valueFormatter:function(e){return Object(zo.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:150},{field:"_id",headerName:"Action",width:500,renderCell:function(t){return"unresolved"===V?Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"})}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",variant:"contained",color:"primary",onClick:function(e){return qe(e,t.value)},className:e.archiveButton,children:"Restore"}),Object(a.jsx)(R.a,{disabled:t.value===M,type:"button",color:"primary",onClick:function(e){return $e(t.value)},className:e.downloadPDFButton,children:"view pdf"})]})}}],h=i.a.useContext(C),g=Object(l.a)(h,2),f=g[0],x=(g[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(""),T=Object(l.a)(B,2),w=T[0],D=T[1],P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(null),W=Object(l.a)(F,2),M=W[0],z=W[1],G=i.a.useState("unresolved"),H=Object(l.a)(G,2),V=H[0],q=(H[1],i.a.useState(!1)),X=Object(l.a)(q,2),$=X[0],Q=X[1],Z=i.a.useState(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(null),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=i.a.useState(null),le=Object(l.a)(re,2),se=le[0],de=le[1],be=i.a.useState(null),ue=Object(l.a)(be,2),je=(ue[0],ue[1]),pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=i.a.useState(!1),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=i.a.useState(!1),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1],Re=i.a.useState(!1),Le=Object(l.a)(Re,2),Pe=Le[0],Ae=Le[1],Ie=i.a.useState(""),_e=Object(l.a)(Ie,2),Fe=_e[0],Ee=_e[1],We=i.a.useState(10),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=i.a.useState(!1),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1];Object(o.useEffect)((function(){te&&Ke(te)}),[f.bookingDialogDataChanged]);var Ke=function(e){Eo.getLinkDetails(e).then((function(e){ce(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Eo.findBestMatches(e).then((function(e){de(e.data.matchedBookings)})).catch((function(e){console.log(e),de([])}))},qe=function(e,t){M||(z(t),Eo.unArchiveBloodReport(t).then((function(e){z(null),_(!I)})).catch((function(e){z(null)})))},Xe=Object(o.useRef)();Object(o.useEffect)((function(){var e=Eo.getSentBloodReports;Ve(!0),y({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});return e.data.result}));Xe.current=t,t.then((function(e){t===Xe.current&&(Ve(!1),y({bookings:e,cachedBookings:Object(Et.a)(e),isFetching:!1}))}),(function(e){t===Xe.current&&(Ve(!1),console.log(e),y({bookings:O.bookings,cachedBookings:O.cachedBookings,isFetching:!1}))}))}),[I,V,f.bloodReportRefresh]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=O.cachedBookings.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));y({bookings:e,cachedBookings:O.cachedBookings,isFetching:!1})}else y({bookings:Object(Et.a)(O.cachedBookings),cachedBookings:O.cachedBookings,isFetching:!1})}),[w]);Object(o.useEffect)((function(){Ge((function(e){return e>=100?100:(t=Fe,console.log("status : ".concat(t)),"downloadFailed"===t?10:"downloading"===t?30:"downloadSuccess"===t?70:"sent"===t?100:0);var t}))}),[Fe]);var $e=function(e){Ao.downloadPdfLabReport(e).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(i.a.Fragment,{children:[Ye&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:5,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#008c00"},children:[" ",Object(a.jsx)(Je.a,{style:{fontSize:"1.8rem"}})," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#555"},children:" Sent Blood Results "})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:e.refreshButton,onClick:function(e){D(""),_(!I)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:O.bookings,columns:p,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&S(e.rows[0])}})}),Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:$,onClose:function(){Q(!1),setTimeout((function(){ne(null),ce(null),de(null),s(null),ke(!1),fe(!1),Ee(null),Be(!1),De(!1),clearInterval(Fd),Ae(!1)}),100)},PaperComponent:Vd,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(za.a,{style:{color:"#2f942e",fontSize:"2rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SMART MATCH"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{height:"600px"},children:[(!se||!ie)&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fa.a,{style:{marginTop:"170px"},type:"Grid",color:"#2f942e",height:100,width:100,timeout:0})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800"},children:[" ","SEARCHING ..."," "]})})]})}),se&&0===se.length&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"12px",fontWeight:"800",marginTop:"230px"},children:[" ","SORRY, NO RECORDS FOUND !"," "]})})})}),se&&ie&&se.length>0&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:2,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","LAB RECORD :"]}),Object(a.jsxs)(K.a,{style:{paddingLeft:"20px",paddingBottom:"20px"},container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4,children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Name:"}),Object(a.jsx)("span",{className:e.infoData,children:ie.name})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.birthDate)})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"Test Date:"}),Object(a.jsx)("span",{className:e.infoData,children:Object(zo.FormatDateFromString)(ie.testDate)})]})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2f942e",marginBottom:"15px"},children:[" ","BEST MATCHES :"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Select"}),Object(a.jsx)(Oa.a,{children:"Match"}),Object(a.jsx)(Oa.a,{children:"Forename"}),Object(a.jsx)(Oa.a,{children:"Surname"}),Object(a.jsx)(Oa.a,{children:"D.O.B"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Test Date"}),Object(a.jsx)(Oa.a,{})]})}),Object(a.jsx)(ma.a,{children:se.map((function(e){var t;return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:Object(a.jsx)(Ot.a,{title:e.birthDate!==ie.birthDate?'"D.O.B" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE "D.O.B" OF THE SELECTED BOOKING IS CORRECT !':"",children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:r&&r._id===e._id,disabled:Oe||ge,onChange:function(t){return function(e,t){e.target.checked?s(t):s(null)}(t,e)},name:"checkedA"}),label:""})})}),Object(a.jsx)(Oa.a,{style:{fontWeight:"800",color:"#2f942e",fontSize:"1.1rem"},children:"".concat(e.likelihood," %")}),Object(a.jsx)(Oa.a,{style:e.forenameCapital===ie.forename?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.forenameCapital}),Object(a.jsx)(Oa.a,{style:e.surnameCapital===ie.surname?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"#ff871f"},children:e.surnameCapital}),Object(a.jsx)(Oa.a,{style:e.birthDate===ie.birthDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:e.birthDate!==ie.birthDate&&Object(a.jsx)("span",{style:{textAlign:"center"},children:Object(a.jsx)(Ha.a,{})})}),Object(zo.FormatDateFromString)(e.birthDate),Object(a.jsx)(K.a,{item:!0})]})}),Object(a.jsx)(Oa.a,{children:null===(t=e.email)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsx)(Oa.a,{style:vn()(e.samplingTimeStamp,"yyyy-mm-dd")===ie.testDate?{fontWeight:"800",color:"#2f942e"}:{fontWeight:"800",color:"red"},children:Object(zo.FormatDateFromString)(vn()(e.samplingTimeStamp,"yyyy-mm-dd"))}),Object(a.jsx)(Oa.a,{children:Object(a.jsx)(R.a,{color:"primary",disabled:Se,onClick:function(t){return function(e,t){je(t),j(!0)}(0,e)},children:"See Details"})})]},e._id)}))})]})})]}),Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",spacing:1,alignItems:"center",children:[!Oe&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:!r||ge,className:e.matchButton,variant:"contained",color:"primary",onClick:function(e){fe(!0),Eo.getBookingById(r._id).then((function(e){s(e.data)})),Eo.matchRecords(r._id,te).then((function(e){"OK"===e.data.status&&(fe(!1),ke(!0))})).catch((function(e){console.log(e)}))},children:"GO Match THE Records"})}),!r&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{severity:"warning",children:"No Record is Selected ! \u2014 Please select a record you think it is a match."})})]}),Oe&&!we&&!Se&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:" Success \u2014 The Records are Matched Now !"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"5px",fontSize:"1rem",fontWeight:"500",color:"#555"},children:["Do you want to Resend the LAB Report ",r.certificate?" and Certificate":"","  Now?"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Eo.resendEmails(te).then((function(e){Fd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),_(!I),clearInterval(Fd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"YES ! RESEND THE EMAILS"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.cancelButton,variant:"contained",color:"default",onClick:function(e){ke(!1)},children:"NO ! NOT NOW"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:Se||we,className:e.resendFilesButton,variant:"contained",color:"primary",onClick:function(e){Be(!0),Ge(0),Ee("downloadFailed"),Ae(!0),Eo.regenerateFiles(te).then((function(e){Fd=setInterval((function(){Eo.getLinkDetails(te).then((function(e){Ee(e.data.status),"sent"===e.data.status&&(Be(!1),De(!0),_(!I),clearInterval(Fd))}))}),1e3)})).catch((function(e){console.log(e),Be(!1)}))},children:"Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"warning",children:"Caution! \u2014 The LAB Report and Certificate will be Sent According to the Record you have Selected !"})})]}),Oe&&(Se||we)&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{paddingTop:"50px",color:"#2f942e",fontWeight:"600",fontSize:"1rem"},children:[Se&&!we&&"Sending ...",we&&!Pe&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent."]}),we&&Pe&&Object(a.jsxs)(E.a,{style:{marginTop:"10px",paddingLeft:"50px",paddingRight:"50px"},severity:"success",children:["Success! \u2014 The LAB Report ",r.certificate?" and Certificate ":" ","  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk ."]})]})})]})]}),Oe&&(Se||we)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{marginTop:"10px",width:"50%",marginLeft:"27%"},children:Object(a.jsx)(Yd,{variant:"determinate",color:"primary",value:ze})}),Object(a.jsx)("div",{style:{paddingTop:"30px",color:"#2f942e",fontWeight:"600",fontSize:"1rem",marginLeft:"45%"},children:Se&&!we&&"PLEASE WAIT ..."})]})]})})]}),Object(a.jsx)(Pc,{booking:r,open:u,onClose:function(){j(!1),s(!1)}})]})}var qd=["Visa Medical"],Jd=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Xd=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function $d(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Qd(e){var t=Jd(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(_i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(_i.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"package",headerName:"Service",width:200},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(qd[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=Ii.getAllBookings;"today"===e.date?n=Ii.getTodayBookings:"old"===e.date?n=Ii.getOldBookings:"future"===e.date?n=Ii.getFutureBookings:"recent"===e.date?n=Ii.getRecentBookingsAll:"deleted"===e.date&&(n=Ii.getDeletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Xd(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Ui,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(qd[0]),F(!1),j(!1)},PaperComponent:$d,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:qd.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(_i.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:Ai.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Zd(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function eb(e,t){return{time:e,amount:t}}var tb=[eb("09:00",0),eb("10:00",0),eb("11:00",0),eb("12:00",0),eb("13:00",0),eb("14:00",0),eb("15:00",0),eb("16:00",0),eb("17:00",0),eb("18:00",void 0)],nb=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function ab(){var e=Object(na.a)(),t=i.a.useState(tb),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Ii.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(eb("09:00",nb(o,"09"))),n.push(eb("10:00",nb(o,"10"))),n.push(eb("11:00",nb(o,"11"))),n.push(eb("12:00",nb(o,"12"))),n.push(eb("13:00",nb(o,"13"))),n.push(eb("14:00",nb(o,"14"))),n.push(eb("15:00",nb(o,"15"))),n.push(eb("16:00",nb(o,"16"))),n.push(eb("17:00",nb(o,"17"))),n.push(eb("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Zd,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var ob=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),ib=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},cb=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function rb(){var e=ob(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=ib(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),Ii.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Zd,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:cb(ib(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Ui,{booking:h,open:m,onClose:function(){O(!1)}})]})}var lb=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function sb(){var e=lb(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),Ii.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Zd,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(_i.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var db=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function bb(){var e=db(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(ab,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(rb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(sb,{})})})]})})}var ub=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function jb(){var e=ub(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(_i.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.package),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(_i.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Ii.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Ii.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Ii.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(_i.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.package}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var pb=function(e){return"boolean"===typeof e};function hb(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var gb=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function fb(){var e=gb(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!pb(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Ii.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Ii.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:hb,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(jb,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var xb=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),mb=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=xb(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ii.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},Ob=function e(){Object(ne.a)(this,e)};Ob.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var yb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],kb=[1,2,3,4,5,6,7],vb=[1,2,3,4,5,6],Cb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Sb=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Cb(),r=Ob.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:yb.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:vb.map((function(e){return Object(a.jsx)("tr",{children:kb.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(mb,{cellIndex:(e-1)*kb.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*kb.length+i))})}))})}))})]})})},Bb=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),Tb=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Bb(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Ii.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},Nb=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],wb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Db=function(e){var t=e.dates,n=e.dayClicked,o=wb();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Nb.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Tb,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Rb=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Lb=[{packageName:"PRIVATE CONSULTATION WITH CONSULTANT DERMATOLOGIST"},{packageName:"FREE CONSULTATION FOR AESTHETIC TREATMENTS AND BOTOX"},{packageName:"RADIOFREQUNCY"},{packageName:"LASER HAIR"},{packageName:"FILLERS"},{packageName:"MOLE MAPPING / REMOVAL"},{packageName:"DERMABRASION"},{packageName:"PEELS"},{packageName:"WART REMOVAL"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Pb(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Ab(e){var t=Rb(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(""),G=Object(l.a)(W,2),H=G[0],U=G[1],Y=function(){b||(g(""),O(!1),S(""),A(""),E(""),U(""),e.handleClose(),u(!1))},J=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),!e},X=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(J()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,Ii.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,notes:F,package:H});case 6:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Y(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),u(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:Y,PaperComponent:Pb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.DERMA_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Dermatology"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)("div",{style:{height:"450px"},children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Service"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:H,onChange:function(e){U(e.target.value)},children:Lb.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:F,onChange:function(e){E(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(a.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Y,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:X,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]})]})})})}var Ib=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),_b=function(e){e.key;var t=e.date,n=e.time,c=Ib(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Ii.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:H,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(Ui,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(Ab,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},Fb=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Eb=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Wb=function(e){var t=e.date,n=Eb();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Fb.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(_b,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Mb=["January","February","March","April","May","June","July","August","September","October","November","December"],zb=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Gb(){var e=zb(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Mb[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(Sb,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(Db,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(Wb,{date:x}):void 0)]})}var Hb=["Visa Medical"],Ub=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Yb=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"pending"===e?"Pending Bookings":"tbc"===e?"Patients TBC":"All Bookings"};function Vb(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Kb(e){var t=Ub(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Xi.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:"pending"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return xt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Xi.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return vt(t,e.value)},children:Object(a.jsx)(ye.a,{style:parseInt(e.getValue("deposit"))>0?{color:"green"}:{}})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(dn.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"cash"===n.getValue("paidBy")?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(qn.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"corporate"===n.getValue("paidBy")?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(rt.a,{className:t.checkIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(Xi.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ve=Ue[0],Ke=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(null),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=i.a.useState(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),ct=Object(l.a)(ot,2),lt=ct[0],st=ct[1],dt=Object(o.useState)(Hb[0]),bt=Object(l.a)(dt,2),ut=bt[0],jt=bt[1],pt=i.a.useState(""),ht=Object(l.a)(pt,2),gt=ht[0],ft=ht[1],xt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),mt=function(t){var n=Ji.getAllBookings;"today"===e.date?n=Ji.getTodayBookings:"old"===e.date?n=Ji.getOldBookings:"future"===e.date?n=Ji.getFutureBookings:"recent"===e.date?n=Ji.getRecentBookingsAll:"deleted"===e.date?n=Ji.getDeletedBookings:"pending"===e.date?n=Ji.getPendingBookings:"tbc"===e.date?n=Ji.getTBCFolderBookings:"live"===e.date?n=Ji.getLiveBookings:"completed"===e.date&&(n=Ji.getCompletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),mt(25)}),[e.date]),Object(o.useEffect)((function(){if(gt&&gt.trim().length>0){var e=Je.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(gt.toLowerCase())>=0}));Xe({bookings:Object(Et.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Et.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[gt]),Object(o.useEffect)((function(){mt(r)}),[Ve.bookingDialogDataChanged]);var yt,kt,vt=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));at(n),st(!0)},Ct=i.a.useState(1),St=Object(l.a)(Ct,2),Bt=St[0],Nt=St[1];return Object(a.jsxs)(i.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(kt=e.date,"today"===kt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===kt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===kt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===kt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===kt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===kt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===kt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===kt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===kt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"pending"===kt?Object(a.jsx)(it.a,{style:{fontSize:"2.2rem"}}):"tbc"===kt?Object(a.jsx)(Ye.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Yb(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ft(""),mt(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:gt,onChange:function(e){ft(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(yt=e.date,"live"===yt||"positive"===yt||"late"===yt||"today"===yt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),mt(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:Je.bookings,columns:Ge,autoPageSize:!0,page:Bt,onPageChange:function(e){Nt(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)(jc,{booking:nt,open:lt,onClose:function(){at(null),st(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){jt(Hb[0]),F(!1),j(!1)},PaperComponent:Vb,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:ut,onChange:function(e){jt(e.target.value)},children:Hb.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===ut:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(Xi.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:qi.a.calculatePrice(e)})]})}))]})})]})})]})]})}function qb(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Jb(e,t){return{time:e,amount:t}}var Xb=[Jb("09:00",0),Jb("10:00",0),Jb("11:00",0),Jb("12:00",0),Jb("13:00",0),Jb("14:00",0),Jb("15:00",0),Jb("16:00",0),Jb("17:00",0),Jb("18:00",void 0)],$b=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Qb(){var e=Object(na.a)(),t=i.a.useState(Xb),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,Ji.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Jb("09:00",$b(o,"09"))),n.push(Jb("10:00",$b(o,"10"))),n.push(Jb("11:00",$b(o,"11"))),n.push(Jb("12:00",$b(o,"12"))),n.push(Jb("13:00",$b(o,"13"))),n.push(Jb("14:00",$b(o,"14"))),n.push(Jb("15:00",$b(o,"15"))),n.push(Jb("16:00",$b(o,"16"))),n.push(Jb("17:00",$b(o,"17"))),n.push(Jb("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(qb,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var Zb=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),eu=function(e){var t,n=e.getMinutes(),a=e.getHours();if((1===(t=e).getDay()||2===t.getDay()||3===t.getDay()||6===t.getDay()||0===t.getDay())&&(a>=14||a<10))return null;if(a>=18||a<10)return null;var o=n<30?"00":"30",i=a>=12?"PM":"AM";a>12&&(a-=12);var c="0".concat(a);return"".concat(c,":").concat(o," ").concat(i)},tu=function(e){if(!e)return"Closed";var t="";switch(e){case"10:00 AM":t="10:30 AM";break;case"10:30 AM":t="11:00 AM";break;case"11:00 AM":t="11:30 AM";break;case"11:30 AM":t="12:00 PM";break;case"12:00 PM":t="12:30 PM";break;case"12:30 PM":t="01:00 PM";break;case"01:00 PM":t="01:30 PM";break;case"01:30 PM":t="02:00 PM";break;case"02:00 PM":t="02:30 PM";break;case"02:30 PM":t="03:00 PM";break;case"03:00 PM":t="03:30 PM";break;case"03:30 PM":t="04:00 PM";break;case"04:00 PM":t="04:30 PM";break;case"04:30 PM":t="05:00 PM";break;case"05:00 PM":t="05:30 PM";break;case"05:30 PM":t="06:00 PM";break;default:t=""}return"".concat(e," - ").concat(t)};function nu(){var e=Zb(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=eu(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),Ji.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(qb,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:tu(eu(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(jc,{booking:h,open:m,onClose:function(){O(!1)}})]})}var au=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ou(){var e=au(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),Ji.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(qb,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(Xi.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var iu=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function cu(){var e=iu(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Qb,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(nu,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(ou,{})})})]})})}var ru=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function lu(){var e=ru(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(Xi.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(Xi.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),Ji.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),Ji.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),Ji.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{style:{marginBottom:"10px",maxWidth:"400px"},children:[!t.confirmed&&Object(a.jsx)("div",{style:{color:"red",fontSize:"1.1rem",fontWeight:"500",border:"0px solid red",padding:"5px",borderRadius:"8px"},children:"NOT CONFIRMED!"}),t.confirmed&&Object(a.jsx)("div",{style:{color:"#258200",fontSize:"1.1rem",fontWeight:"500",border:"0px solid #258200",padding:"5px",borderRadius:"8px"},children:"CONFIRMED"})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(Xi.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var su=function(e){return"boolean"===typeof e};function du(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var bu=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function uu(){var e=bu(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!su(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Ji.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Ji.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:du,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(lu,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var ju=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),pu=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=ju(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Ji.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},hu=function e(){Object(ne.a)(this,e)};hu.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var gu=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fu=[1,2,3,4,5,6,7],xu=[1,2,3,4,5,6],mu=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Ou=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=mu(),r=hu.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:gu.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:xu.map((function(e){return Object(a.jsx)("tr",{children:fu.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(pu,{cellIndex:(e-1)*fu.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*fu.length+i))})}))})}))})]})})},yu=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),ku=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=yu(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Ji.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},vu=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Cu=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Su=function(e){var t=e.dates,n=e.dayClicked,o=Cu();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:vu.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(ku,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Bu=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),Tu=[{packageName:"HEALTH SCREENING / MEDISCREEN BASIC MOT"},{packageName:"HEALTH SCREENING / HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / MEN'S HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / PLATINIUM HEALTH SCREEN MEN"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH BASICS MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH ADVANCED MOT"},{packageName:"HEALTH SCREENING / WOMEN'S HEALTH ELITE MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"HEALTH SCREENING / HEALTH ADVANCED PLUS MOT"},{packageName:"HEALTH SCREENING / MEDISCREEN SEXUAL HEALTH MOT"},{packageName:"ALLERGY SCREENING / ALLERGY BASICS MOT PACKAGE"},{packageName:"ALLERGY SCREENING / ALLERGY ADVANCED MOT PACKAGE"},{packageName:"OCCUPATIONAL HEALTH / PRE EMPLOYMENT"},{packageName:"TRAVEL HEALTH & VACCINATION"},{packageName:"VISA MEDICAL"},{packageName:"CANCER SCREEENING"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Nu(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function wu(e){var t=Bu(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(""),G=Object(l.a)(W,2),H=G[0],U=G[1],Y=i.a.useState(!1),J=Object(l.a)(Y,2),X=J[0],$=J[1],Q=i.a.useState(null),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=i.a.useState(""),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(!1),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=function(){b||(g(""),O(!1),S(""),A(""),E(""),U(""),te(null),$(!1),se(null),e.handleClose(),u(!1))},he=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),ee&&10===ee.length||(ie(!0),e=!0),H||$(!0),le||(je(!0),e=!0),!e},ge=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(he()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,Ji.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,notes:F,service:H,birthDate:ee,gender:le,smsPush:!0});case 6:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),pe(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),u(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:pe,PaperComponent:Nu,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.SCREENING_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Screening"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{height:"500px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:1,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{required:!0,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"gender-label",children:"Gender"}),Object(a.jsxs)(zt.a,{error:!!ue,required:!0,labelId:"gender-label",id:"gender-select",value:le,onChange:function(e){se(e.target.value),je(!1)},children:[Object(a.jsx)(Gt.a,{value:"M",children:"Male"}),Object(a.jsx)(Gt.a,{value:"F",children:"Female"})]})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:H,onChange:function(e){U(e.target.value),$(!1)},error:X,children:Tu.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(us,{error:oe,title:"Date of Birth",value:ee,dateChanged:function(e){te(e),ie(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:F,onChange:function(e){E(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:pe,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:ge,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]})})})}var Du=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPending:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ddd",color:"#777",boxShadow:"2px 4px #fafafa","&:hover":{background:"#eee",color:"#333"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Ru=function(e){e.key;var t=e.date,n=e.time,c=Du(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Ji.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){var t=e.status;if(!e.confirmed)return c.bookingBoxPending;switch(t){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:H,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(jc,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(wu,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},Lu=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"],Pu=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Au=function(e){var t=e.date,n=Pu();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Lu.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Ru,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Iu=["January","February","March","April","May","June","July","August","September","October","November","December"],_u=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Fu(){var e=_u(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Iu[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(Ou,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(Su,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(Au,{date:x}):void 0)]})}var Eu=["Visa Medical"],Wu=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Mu=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function zu(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Gu(e){var t=Wu(),n=i.a.useState(25),c=Object(l.a)(n,2),r=c[0],s=c[1],d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),G=W[0],H=W[1],V=Object(o.useState)(!0),q=Object(l.a)(V,2),X=q[0],$=q[1],Q=Object(o.useState)(!0),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),pe=ue[0],ge=ue[1],xe=Object(o.useState)(!0),Oe=Object(l.a)(xe,2),ke=Oe[0],Ce=Oe[1],Be=Object(o.useState)(!0),Ne=Object(l.a)(Be,2),we=Ne[0],De=Ne[1],Le=Object(o.useState)(!0),Ae=Object(l.a)(Le,2),_e=Ae[0],Fe=Ae[1],Ee=Object(o.useState)(!0),We=Object(l.a)(Ee,2),Me=We[0],ze=We[1],Ge=[];Ge="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return gt(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(mc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:200},{field:"service",headerName:"Package",width:200},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return yt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(mc.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:"  BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:200},{field:"service",headerName:"Package",width:200},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var He=i.a.useContext(C),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=(Ue[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Ke=Object(l.a)(Ve,2),qe=Ke[0],Je=Ke[1],Xe=i.a.useState(null),$e=Object(l.a)(Xe,2),Qe=($e[0],$e[1]),Ze=i.a.useState(null),et=Object(l.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(!1),ot=Object(l.a)(at,2),it=ot[0],ct=ot[1],lt=Object(o.useState)(Eu[0]),st=Object(l.a)(lt,2),dt=st[0],bt=st[1],ut=i.a.useState(""),jt=Object(l.a)(ut,2),pt=jt[0],ht=jt[1],gt=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),ft=function(t){var n=xc.getAllBookings;"today"===e.date?n=xc.getTodayBookings:"old"===e.date?n=xc.getOldBookings:"future"===e.date?n=xc.getFutureBookings:"recent"===e.date?n=xc.getRecentBookingsAll:"deleted"===e.date&&(n=xc.getDeletedBookings),Je({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Je({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){s(25),ft(25)}),[e.date]),Object(o.useEffect)((function(){if(pt&&pt.trim().length>0){var e=qe.cachedBookings.filter((function(e){return e.fullname.toLowerCase().indexOf(pt.toLowerCase())>=0}));Je({bookings:Object(Et.a)(e),cachedBookings:qe.cachedBookings,isFetching:!1})}else Je({bookings:Object(Et.a)(qe.cachedBookings),cachedBookings:qe.cachedBookings,isFetching:!1})}),[pt]),Object(o.useEffect)((function(){ft(r)}),[Ye.bookingDialogDataChanged]);var xt,mt,yt=function(e,t){var n=qe.bookings.find((function(e){return e._id===t}));nt(n),ct(!0)},kt=i.a.useState(1),vt=Object(l.a)(kt,2),Ct=vt[0],St=vt[1];return Object(a.jsxs)(i.a.Fragment,{children:[qe.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(mt=e.date,"today"===mt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===mt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===mt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===mt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===mt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===mt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===mt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===mt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===mt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Mu(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){ht(""),ft(r)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ye.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){j(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),qe.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:pt,onChange:function(e){ht(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(xt=e.date,"live"===xt||"positive"===xt||"late"===xt||"today"===xt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:r,onChange:function(e){s(e.target.value),ft(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:qe.bookings,columns:Ge,autoPageSize:!0,page:Ct,onPageChange:function(e){St(e.page)},onSelectionChange:function(e){e.length>0&&Qe(e.rows[0])}})}),Object(a.jsx)(Tc,{booking:tt,open:it,onClose:function(){nt(null),ct(!1)}}),qe.bookings&&qe.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){bt(Eu[0]),F(!1),j(!1)},PaperComponent:zu,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:dt,onChange:function(e){bt(e.target.value)},children:Eu.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:pe,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:_e,onChange:function(e){Fe(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Me,onChange:function(e){ze(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:t.th,children:"Date"}),X&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:t.th,children:"Email"}),pe&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),ke&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),we&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),_e&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),Me&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),qe.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===dt:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:t.td,children:Object(mc.FormatDateFromString)(e.bookingDate)}),X&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:t.th}),se&&Object(a.jsx)("td",{className:t.td,children:e.email}),pe&&Object(a.jsx)("td",{className:t.td,children:e.phone}),ke&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),we&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),_e&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),Me&&Object(a.jsx)("td",{className:t.td,children:fc.a.calculatePrice(e)})]})}))]})})]})})]})]})}function Hu(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Uu(e,t){return{time:e,amount:t}}var Yu=[Uu("09:00",0),Uu("10:00",0),Uu("11:00",0),Uu("12:00",0),Uu("13:00",0),Uu("14:00",0),Uu("15:00",0),Uu("16:00",0),Uu("17:00",0),Uu("18:00",void 0)],Vu=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length;a++)e[a]._id.substr(0,2)===t&&(n+=e[a].count);return n};function Ku(){var e=Object(na.a)(),t=i.a.useState(Yu),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1];return Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vn()(new Date,"yyyy-mm-dd"),n=[],e.prev=2,u(!0),e.next=6,xc.getBookingsStatsByDateStr(t);case 6:a=e.sent,u(!1),o=a.data.result,n.push(Uu("09:00",Vu(o,"09"))),n.push(Uu("10:00",Vu(o,"10"))),n.push(Uu("11:00",Vu(o,"11"))),n.push(Uu("12:00",Vu(o,"12"))),n.push(Uu("13:00",Vu(o,"13"))),n.push(Uu("14:00",Vu(o,"14"))),n.push(Uu("15:00",Vu(o,"15"))),n.push(Uu("16:00",Vu(o,"16"))),n.push(Uu("17:00",Vu(o,"17"))),n.push(Uu("18:00",void 0)),r(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),u(!1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(i.a.Fragment,{children:[b&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hu,{children:"Today"}),Object(a.jsx)(aa.a,{children:Object(a.jsxs)(oa.a,{data:c,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(ia.a,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(ca.a,{stroke:e.palette.text.secondary,children:Object(a.jsx)(ra.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(la.a,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}var qu=Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}}),Ju=function(e){var t=e.getMinutes(),n=e.getHours(),a=n>=12;n>12&&(n-=12),t>=0&&t<15?t=0:t>=15&&t<30?t=15:t>=30&&t<45?t=30:t>=45&&(t=45);var o,i=t<10?"0".concat(t):"".concat(t),c=n<10?"0".concat(n):"".concat(n),r=a?"PM":"AM",l="".concat(c,":").concat(i," ").concat(r);return 0===(o=e).getDay()||6===o.getDay()?e.getHours()<10||e.getHours()>=14?null:l:e.getHours()<9||e.getHours()>=18?null:l},Xu=function(e){if(!e)return"Closed";var t=parseInt(e.substr(0,2)),n=parseInt(e.substr(3,2)),a=e.indexOf("PM")>0;45!==n?n+=15:(n=0,(t+=1)>=12&&(a=!0),t>12&&(t-=12));var o=n<10?"0".concat(n):"".concat(n),i=t<10?"0".concat(t):"".concat(t),c=a?"PM":"AM",r="".concat(i,":").concat(o," ").concat(c);return"".concat(e," - ").concat(r)};function $u(){var e=qu(),t=i.a.useState(new Date),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState([]),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],C=k[1];Object(o.useEffect)((function(){var e=setInterval((function(){r(new Date)}),3e4);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){var e=Ju(c);if(e){var t=kn(c,"yyyy-mm-dd");C(!0),xc.getBookingsByDateStrandTime(t,e).then((function(e){C(!1),"OK"===e.data.status&&u(Object(Et.a)(e.data.bookings))})).catch((function(e){C(!1),console.log(e)}))}}),[c]);var S=function(e,t){g(t),O(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[v&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hu,{children:"Current Visits"}),Object(a.jsx)(_.a,{component:"p",variant:"h6",children:Xu(Ju(c))}),Object(a.jsxs)(_.a,{color:"textSecondary",className:e.depositContext,children:["on ",kn(c,"dd mmmm, yyyy")]}),function(t){if(t&&t.length>0)return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(K.a,{container:!0,justify:"flex-start",alignItems:"flex-start",spacing:0,children:t.map((function(t){return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:e.bookingBox,onClick:function(e){return S(e,t)},children:Object(a.jsxs)("span",{style:{textAlign:"center"},children:[" ","".concat(t.surnameCapital).substring(0,10)," "]})})})}))})})}(b),Object(a.jsx)(Tc,{booking:h,open:m,onClose:function(){O(!1)}})]})}var Qu=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Zu(){var e=Qu(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({bookings:[],isFetching:!1}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){b({bookings:d.bookings,isFetching:!0}),m(!0),xc.getRecentBookings().then((function(e){m(!1),b({bookings:e.data,isFetching:!1})})).catch((function(e){m(!1),console.log(e),b({bookings:d.bookings,isFetching:!1})}))};Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Hu,{children:"Recent Bookings"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"TimeStamp"}),Object(a.jsx)(Oa.a,{children:"Fullname"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Booked Date"}),Object(a.jsx)(Oa.a,{children:"Booked Time"})]})}),Object(a.jsx)(ma.a,{children:d.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:y(e.timeStamp)}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:Object(mc.FormatDateFromString)(e.bookingDate)}),Object(a.jsx)(Oa.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(Z.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:Sg("gynae","recentBookings")})}))},children:"See more records"})})]})}var ej=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function tj(){var e=ej(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Ku,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,lg:6,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)($u,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,children:Object(a.jsx)(Zu,{})})})]})})}var nj=Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060"},PatientAttendedLabel:{color:"#0066aa",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",width:"400px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px",width:"400px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px",width:"400px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"},width:"400px"},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function aj(){var e=nj(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=n[0],c=n[1],r=i.a.useState("panel0"),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState({edit:!1,person:null}),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState({delete:!1,person:null}),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState({restore:!1,person:null}),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!1),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState({}),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(""),V=Object(l.a)(Y,2),q=V[0],J=V[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=function(e){J(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!1}))},ye=function(e){Z(e.target.value),U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!1}))},ke=function(e){ae(e.target.value)},ve=function(e){re(e.target.value)},Ce=function(e){be(e.target.value)},Se=function(e){he(e.target.value)},Be=function(e){me(e.target.value)},Te=function(e,t){if(e)ae(t.fullname),J(Object(mc.FormatDateFromString)(t.bookingDate)),Z(t.bookingTime),re(t.email),be(t.phone),he(t.service),t.notes&&me(t.notes),h({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.email=ce,n.phone=de,n.fullname=ne,n.notes=xe,n.service=pe,n.bookingDate=Object(mc.RevertFormatDateFromString)(q),n.bookingTime=Q,n.bookingRef=t.bookingRef,Ne(n)&&we({bookingId:a,person:n})}}else h({edit:e,person:t})},Ne=function(e){var t=!1;return function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),o=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),o>31&&(t=!0)}catch(i){t=!0}return!t}(e.bookingDate)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingDateError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(o){t=!0}return!t}(e.bookingTime)||(t=!0,U(Object(N.a)(Object(N.a)({},H),{},{bookingTimeError:!0}))),!t},we=function(e){w(!0),xc.updateBooking(e).then((function(e){w(!1),h({edit:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){w(!1),h({edit:!1,person:null}),console.log(e)}))},De=function(e,t){var n;e?m({delete:e,person:t}):e||t?!e&&t&&(n=t._id,I(!0),xc.deleteBooking(n).then((function(e){I(!1),m({delete:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){I(!1),m({delete:!1,person:null}),console.log(e)}))):m({delete:e,person:t})},Re=function(e,t){var n;e?v({restore:e,person:t}):e||t?!e&&t&&(n=t._id,M(!0),xc.unDeleteBooking(n).then((function(e){M(!1),v({restore:!1,person:null}),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){M(!1),v({restore:!1,person:null}),console.log(e)}))):v({restore:e,person:t})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),o.foundRecords.map((function(t,n){return Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(ht.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:d==="panel".concat(n),onChange:(i="panel".concat(n),function(e,t){b(!!t&&i)}),children:[Object(a.jsxs)(ft.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)(mt.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(Ot.a,{title:"This record has been deleted.",children:Object(a.jsx)(Pe.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(_.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(_.a,{className:e.secondaryHeading,children:"".concat(t.fullname)})]}),Object(a.jsx)(gt.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||k.restore&&k.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Re(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:W,onClick:function(){Re(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(k.restore&&k.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:W,onClick:function(){Re(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||x.delete||p.edit&&p.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Te(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:T,onClick:function(){Te(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(p.edit&&p.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:T,onClick:function(){Te(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||p.edit||x.delete&&x.person._id===t._id,children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){De(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){De(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(x.delete&&x.person._id===t._id),children:Object(a.jsx)(R.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){De(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:Object(mc.FormatDateFromString)(t.bookingDate)}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingDateError,className:e.TextBox,value:q,onChange:Oe,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.bookingTime}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,error:H.bookingTimeError,className:e.TextBox,value:Q,onChange:ye,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FULLNAME"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.fullname}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ne,onChange:ke,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.email}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:ce,onChange:ve,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.phone}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:de,onChange:Ce,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SERVICE"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.service}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:pe,onChange:Se,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:p.edit&&p.person._id===t._id,className:e.infoData,children:t.notes}),Object(a.jsx)("span",{hidden:!(p.edit&&p.person._id===t._id),className:e.infoData,children:Object(a.jsx)(L.a,{fullWidth:!0,className:e.TextBox,value:xe,onChange:Be,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"}),(o=t.status,"booked"===o?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===o?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"Unknown")]})]})})]})})},"panel".concat(n));var o,i}))]})})}var oj=function(e){return"boolean"===typeof e};function ij(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var cj=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function rj(){var e=cj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!oj(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){xc.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},h=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),xc.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:ij,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&h()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:p,onTouchTap:p,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:h,onTouchTap:h,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(aj,{})})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var lj=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"}}})),sj=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=lj(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(-1),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(-1),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,xc.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count>=0&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,children:c>0?"".concat(c):""})}(t,n,c),(F=S,-1===F?Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):F>0?F>=5?Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabelBusy,children:F<10?" ".concat(F):"".concat(F)}):Object(a.jsx)("div",{onClick:function(e){return r(e,O)},className:s.BookingCountLabel,children:F<10?" ".concat(F):"".concat(F)}):void 0),function(e){if(e>0){var t=e/10*100;return t>100&&(t=100),t=100-t,Object(a.jsx)("div",{className:s.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#3f51b5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(t,"%"),backgroundColor:"#fafafa"}})})})}}(S)]})})},dj=function e(){Object(ne.a)(this,e)};dj.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var bj=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],uj=[1,2,3,4,5,6,7],jj=[1,2,3,4,5,6],pj=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),hj=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=pj(),r=dj.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:bj.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:jj.map((function(e){return Object(a.jsx)("tr",{children:uj.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(sj,{cellIndex:(e-1)*uj.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*uj.length+i))})}))})}))})]})})},gj=Object(w.a)((function(e){return{Container:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"}}})),fj=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=gj(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(-1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(-1);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return xc.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count>=0&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count>=0&&g(o.data.count)}}),[t,n]);var B;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:[(B=h,-1===B?Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):B>0?B>=1?Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabelBusy,children:B<10?" ".concat(B):"".concat(B)}):Object(a.jsx)("div",{onClick:function(e){return c(e,v)},className:r.BookingCountLabel,children:B<10?" ".concat(B):"".concat(B)}):void 0),function(e){if(e>0){var t=e/1*100;return t>100&&(t=100),Object(a.jsx)("div",{className:r.BookingCountGauge,children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:"#f5f5f5"},children:Object(a.jsx)("div",{style:{padding:"0",margin:"0",height:"100%",width:"".concat(t,"%"),backgroundColor:"#3f51b5"}})})})}}(h)]})})},xj=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],mj=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Oj=function(e){var t=e.dates,n=e.dayClicked,o=mj();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:xj.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(fj,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},yj=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}})),kj=[{packageName:"BLOODS ONLY"},{packageName:"HEALTH SURVEILLANCE"}];Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function vj(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Cj(e){var t=yj(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1]),s=Object(o.useState)(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(""),k=Object(l.a)(y,2),v=k[0],S=k[1],w=i.a.useState(""),D=Object(l.a)(w,2),P=D[0],A=D[1],I=i.a.useState(""),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(""),G=Object(l.a)(W,2),H=G[0],U=G[1],Y=i.a.useState(!1),J=Object(l.a)(Y,2),X=J[0],$=J[1],Q=i.a.useState(null),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=function(){b||(g(""),O(!1),S(""),A(""),E(""),U(""),te(null),$(!1),e.handleClose(),u(!1))},re=function(){var e=!1;return(!h||h.trim().length<1)&&(O(!0),e=!0),ee&&10!==ee.length&&(ie(!0),e=!0),H||$(!0),!e},le=function(){var t=Object(T.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(re()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,xc.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:h,phone:v,email:P,notes:F,service:H,birthDate:ee});case 6:u(!1),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),ce(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),u(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:ce,PaperComponent:vj,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:Nn.CORPORATE_COLOR,color:"#fff",padding:"0px 5px",borderRadius:"10px",fontSize:"1rem"},children:"Corporate"}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{height:"500px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:1,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,autoFocus:!0,error:m,label:"Full Name",value:h,required:!0,onChange:function(e){g(e.target.value),O(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Telephone",value:v,onChange:function(e){S(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Email",value:P,onChange:function(e){A(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsxs)(M.a,{className:t.formControl,fullWidth:!0,children:[Object(a.jsx)(z.a,{id:"service-label-id",children:"Package"}),Object(a.jsx)(zt.a,{fullWidth:!0,labelId:"service-label-id",id:"service-id",value:H,onChange:function(e){U(e.target.value),$(!1)},error:X,children:kj.map((function(e){return Object(a.jsx)(Gt.a,{value:e.packageName,children:e.packageName})}))})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(us,{error:oe,title:"Date of Birth",value:ee,dateChanged:function(e){te(e),ie(!1)}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,label:"Notes",value:F,onChange:function(e){E(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:b,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:ce,style:{width:"100px"},disabled:b,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:le,variant:"contained",color:"secondary",style:{width:"100px"},disabled:b,children:"Save"})})]})})]})})})}var Sj=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}}}})),Bj=function(e){e.key;var t=e.date,n=e.time,c=Sj(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){return t.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,xc.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var z,G=function(e){switch(e){case"patient_attended":return c.bookingBoxSampleTaken;default:return c.bookingBox}},H=function(){M(!0)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(z=x,null===z?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):z.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[z.map((function(e){return Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:G(e.status),onClick:function(t){return function(e,t){v(t),_(!0)}(0,e)},children:"".concat(e.fullname).substring(0,15)})})),Object(a.jsx)("div",{className:c.bookingBoxNew,onClick:H,children:" + Add New Booking"})]}):void 0)}),Object(a.jsx)(Tc,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(Cj,{date:t,time:n,open:W,handleClose:function(){M(!1)}})]})},Tj=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Nj=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),wj=function(e){var t=e.date,n=Nj();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:Tj.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Bj,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Dj=["January","February","March","April","May","June","July","August","September","October","November","December"],Rj=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Lj(){var e=Rj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState((new Date).getFullYear()),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(new Date),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(new Date),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState([]),B=Object(l.a)(S,2),T=B[0],w=B[1],D=i.a.useState("month"),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState("month"),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=function(){U(""),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return v(n),c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),function(){c((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(k.getTime()+864e5*t));w(e)}),[k]);var V,q=function(e,t){var n=new Date(t),a=n.getDay();v(new Date(n.getTime()-864e5*a)),m(n),b(n.getMonth()+1),h(n.getFullYear()),W("day"),I("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(A),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===A){1===d&&h(p-1);var t=1===d?12:d-1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()-6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()-864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(A),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===A){12===d&&h(p+1);var t=12===d?1:d+1;b(t);var n=new Date(p,t-1,1,0,0,0,0);m(n);var a=n.getDay();v(new Date(n.getTime()-864e5*a))}else if("week"===A){var o=new Date(k.getTime()+6048e5);v(o),m(o),b(o.getMonth()+1),h(o.getFullYear())}else if("day"===A){var i=new Date(x.getTime()+864e5);m(i);var c=i.getDay();v(new Date(i.getTime()-864e5*c)),b(i.getMonth()+1),h(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();v(new Date(t.getTime()-864e5*n)),m(t),b(t.getMonth()+1),h(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Dj[d-1]," ").concat(p)," "]});if("week"===t){var n=new Date(k.getTime()+5184e5),o="";return o=n.getMonth()===k.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(k,"mmm d")," - ").concat(o,", ").concat(p)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(x,"mmmm d, yyyy"))," "]}):void 0}(A)}),"day"===A&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){U(e.target.value),c((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:E,exclusive:!0,onChange:function(e,t){t&&t.length&&(W(t),I(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===E?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(V=A,"month"===V?Object(a.jsx)(hj,{dayClicked:q,month:d,year:p}):"week"===V?Object(a.jsx)(Oj,{dayClicked:q,dates:T}):"day"===V?Object(a.jsx)(wj,{date:x}):void 0)]})}function Pj(e){return Object(a.jsx)(_.a,{component:"h6",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}var Aj=Object(w.a)((function(e){return{}}));function Ij(){Aj();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,s,d,b,u,j,p,g,f;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=kn(new Date,"yyyy-mm-dd"),e.prev=2,e.next=5,pt.getAllBookingsCountByDateStr(t);case 5:return n=e.sent,e.next=8,Co.getAllBookingsCountByDateStr(t);case 8:return a=e.sent,e.next=11,Qo.getAllBookingsCountByDateStr(t);case 11:return o=e.sent,e.next=14,ji.getAllBookingsCountByDateStr(t);case 14:return i=e.sent,e.next=17,Eo.getAllBookingsCountByDateStr(t);case 17:return r=e.sent,e.next=20,Ii.getAllBookingsCountByDateStr(t);case 20:return l=e.sent,e.next=23,Ji.getAllBookingsCountByDateStr(t);case 23:s=e.sent,d=parseInt(n.data.count),b=parseInt(a.data.count),u=parseInt(o.data.count),j=parseInt(i.data.count),p=parseInt(r.data.count),g=parseInt(l.data.count),f=parseInt(s.data.count),c([{clinic:"PCR",count:d},{clinic:"Gynae",count:b},{clinic:"GP",count:u},{clinic:"STD",count:j},{clinic:"Blood",count:p},{clinic:"Dermatology",count:g},{clinic:"Screening",count:f},{clinic:"Total",count:d+b+u+j+p+g+f}]),h(!1),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(2),console.error(e.t0),h(!1);case 40:case"end":return e.stop()}}),e,null,[[2,36]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[d]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Pj,{children:"Today Bookings"}),n&&Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Clinic"}),Object(a.jsx)(Oa.a,{children:"Count"})]})}),Object(a.jsx)(ma.a,{children:n.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:e.clinic}),Object(a.jsx)(Oa.a,{children:e.count})]},e._id)}))})]})]})}var _j=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Fj(){_j();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,s,d,b,u,j,p,g,f,x,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=new Date,n=new Date(t.getTime()+864e5),a=kn(n,"yyyy-mm-dd"),e.prev=4,e.next=7,pt.getAllBookingsCountByDateStr(a);case 7:return o=e.sent,e.next=10,Co.getAllBookingsCountByDateStr(a);case 10:return i=e.sent,e.next=13,Qo.getAllBookingsCountByDateStr(a);case 13:return r=e.sent,e.next=16,ji.getAllBookingsCountByDateStr(a);case 16:return l=e.sent,e.next=19,Eo.getAllBookingsCountByDateStr(a);case 19:return s=e.sent,e.next=22,Ii.getAllBookingsCountByDateStr(a);case 22:return d=e.sent,e.next=25,Ji.getAllBookingsCountByDateStr(a);case 25:b=e.sent,u=parseInt(o.data.count),j=parseInt(i.data.count),p=parseInt(r.data.count),g=parseInt(l.data.count),f=parseInt(s.data.count),x=parseInt(d.data.count),m=parseInt(b.data.count),c([{clinic:"PCR",count:u},{clinic:"Gynae",count:j},{clinic:"GP",count:p},{clinic:"STD",count:g},{clinic:"Blood",count:f},{clinic:"Dermatology",count:x},{clinic:"Screening",count:m},{clinic:"Total",count:u+j+p+g+f+x+m}]),h(!1),e.next=42;break;case 38:e.prev=38,e.t0=e.catch(4),console.error(e.t0),h(!1);case 42:case"end":return e.stop()}}),e,null,[[4,38]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[d]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Pj,{children:"Tomorrow Bookings"}),n&&Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Clinic"}),Object(a.jsx)(Oa.a,{children:"Count"})]})}),Object(a.jsx)(ma.a,{children:n.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:e.clinic}),Object(a.jsx)(Oa.a,{children:e.count})]},e._id)}))})]})]})}var Ej=Object(w.a)((function(e){return{}}));function Wj(){Ej();var e=i.a.useState(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,r,l,s,d,b,u,j,p,g;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,pt.getAllBookingsCountAll();case 4:return t=e.sent,e.next=7,Co.getAllBookingsCountAll();case 7:return n=e.sent,e.next=10,Qo.getAllBookingsCountAll();case 10:return a=e.sent,e.next=13,ji.getAllBookingsCountAll();case 13:return o=e.sent,e.next=16,Eo.getAllBookingsCountAll();case 16:return i=e.sent,e.next=19,Ii.getAllBookingsCountAll();case 19:return r=e.sent,e.next=22,Ji.getAllBookingsCountAll();case 22:l=e.sent,s=parseInt(t.data.count),d=parseInt(n.data.count),b=parseInt(a.data.count),u=parseInt(o.data.count),j=parseInt(i.data.count),p=parseInt(r.data.count),g=parseInt(l.data.count),c([{clinic:"PCR",count:s},{clinic:"Gynae",count:d},{clinic:"GP",count:b},{clinic:"STD",count:u},{clinic:"Blood",count:j},{clinic:"Dermatology",count:p},{clinic:"Screening",count:g},{clinic:"Total",count:s+d+b+u+j+p+g}]),h(!1),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),console.error(e.t0),h(!1);case 39:case"end":return e.stop()}}),e,null,[[1,35]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[d]),Object(o.useEffect)((function(){g();var e=setInterval((function(){b((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsxs)(i.a.Fragment,{children:[p&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Pj,{children:"Total Bookings"}),n&&Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Clinic"}),Object(a.jsx)(Oa.a,{children:"Count"})]})}),Object(a.jsx)(ma.a,{children:n.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:e.clinic}),Object(a.jsx)(Oa.a,{children:e.count})]},e._id)}))})]})]})}var Mj=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function zj(){var e=Mj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,pt.getLateBookings();case 4:t=e.sent,d(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Ie.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.PCR_COLOR},children:"PCR"})," 40-Hours Late"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var Gj=n(198),Hj=n.n(Gj),Uj=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Yj(){var e=Uj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,pt.getUnmatchedRecords();case 4:t=e.sent,d(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Hj.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.PCR_COLOR},children:"PCR"})," Unmatched Records"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var Vj=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Kj(){var e=Vj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Co.getShouldRefundsCount();case 4:t=e.sent,d(t.data.count),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Hj.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.GYNAE_COLOR},children:"GYNAE"}),"  Waiting for Refunds"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var qj=function(){return sessionStorage.getItem("medexadmin-role")},Jj=function(e){return sessionStorage.setItem("medexadmin-role",e)},Xj=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function $j(){var e=Xj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Eo.getNewBloodResultsCount();case 4:t=e.sent,d(t.data.result),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Hj.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.BLOOD_COLOR},children:"BLOOD"})," New Results"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var Qj=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function Zj(){var e=Qj(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Ji.getPendingBookings();case 4:t=e.sent,d(t.data.length),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Hj.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.SCREENING_COLOR},children:"Health Screening"})," Pending Bookings"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var ep=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{}}}));function tp(){var e=ep(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(null)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Ji.getShouldRefundsCount();case 4:t=e.sent,d(t.data.count),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[j]),Object(o.useEffect)((function(){m();var e=setInterval((function(){p((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[f&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(Pj,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"5px"},children:Object(a.jsx)(Hj.a,{className:0===s?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsxs)("span",{className:0===s?e.Title:e.TitleRed,children:[Object(a.jsx)("span",{style:{color:Nn.SCREENING_COLOR},children:"Health Screening"}),"  Waiting for Refunds"]})})]}),null!==s&&Object(a.jsx)("div",{className:0===s?e.countLabel:e.countLabelRed,children:s})]})]})})}var np=Object(w.a)((function(e){return{countLabel:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem"},countLabelRed:{position:"absolute",top:"65px",left:"44%",fontSize:"3rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"},IconRed:{fontSize:"2rem"},TitleRed:{},LiveTitle:{fontSize:"1.3rem",fontWeight:"500",color:"#eee"},LiveItem:{fontSize:"2rem",color:"#fff",fontWeight:"700"}}}));function ap(){var e=np(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1]),r=i.a.useState({screen:0,std:0,blood:0}),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1],O=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ji.getLiveBookings();case 4:return t=e.sent,e.next=7,Eo.getLiveBookings();case 7:return n=e.sent,e.next=10,Ji.getLiveBookings();case 10:a=e.sent,o=0,i=0,c=0,t&&(o=t.data.length),n&&(i=n.data.length),a&&(c=a.data.length),b({std:o,blood:i,screening:c}),m(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){O()}),[p]),Object(o.useEffect)((function(){O();var e=setInterval((function(){h((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var y=Object(te.d)();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative",paddingBottom:"20px"},children:[x&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(Pj,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row-reverse",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{padding:"10px"},children:Object(a.jsx)(Se.a,{className:0===d?e.Icon:e.IconRed})})}),Object(a.jsx)(K.a,{item:!0,style:{textAlign:"left"},children:Object(a.jsx)("span",{className:0===d?e.Title:e.TitleRed,children:Object(a.jsx)("span",{style:{padding:"10px"},children:"Live Bookings"})})})]})}),Object(a.jsxs)(K.a,{container:!0,alignItems:"center",justify:"space-around",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="screening";Jj(e),c((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),y.push(re("/".concat(Cg(e,Sg(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Nn.SCREENING_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"Screening"}),Object(a.jsx)("p",{className:e.LiveItem,children:d.screening||0})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="blood";Jj(e),c((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),y.push(re("/".concat(Cg(e,Sg(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Nn.BLOOD_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"Blood"}),Object(a.jsx)("p",{className:e.LiveItem,children:d.blood||0})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{onClick:function(){var e="std";Jj(e),c((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),y.push(re("/".concat(Cg(e,Sg(e,"liveBookings")))))},style:{width:"100%",textAlign:"center",cursor:"pointer",background:Nn.STD_COLOR,padding:"5px 50px",borderRadius:"10px"},children:[Object(a.jsx)("p",{className:e.LiveTitle,children:"STD"}),Object(a.jsx)("p",{className:e.LiveItem,children:d.std||0})]})})]})]})})}var op=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:400},fixedHeightSmall:{height:200,cursor:"pointer"}}}));function ip(){var e=op(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1]),c=Object(Q.a)(e.paper,e.fixedHeight),r=Object(Q.a)(e.paper,e.fixedHeightSmall),s=Object(te.d)();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(W.a,{style:{background:"linear-gradient(0deg, rgba(230,249,255,1) 0%, rgba(255,255,255,1) 100%)"},children:Object(a.jsx)(ap,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="pcr";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"latebookings")))))},children:Object(a.jsx)(zj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="pcr";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"unmatchedRecords")))))},children:Object(a.jsx)(Yj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="gynae";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"deletedBookings")))))},children:Object(a.jsx)(Kj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="blood";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"dashboard")))))},children:Object(a.jsx)($j,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="screening";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"pendingBookings")))))},children:Object(a.jsx)(Zj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(W.a,{className:r,onClick:function(){var e="screening";Jj(e),o((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),s.push(re("/".concat(Cg(e,Sg(e,"deletedBookings")))))},children:Object(a.jsx)(tp,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(W.a,{className:c,children:Object(a.jsx)(Ij,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(W.a,{className:c,children:Object(a.jsx)(Fj,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:4,children:Object(a.jsx)(W.a,{className:c,children:Object(a.jsx)(Wj,{})})})]})})}var cp=function(e){return"boolean"===typeof e};function rp(e){var t=e.inputRef,n=Object(lt.a)(e,["inputRef"]);return Object(a.jsx)(dt.a,Object(N.a)(Object(N.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var lp=Object(w.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"},boxTitle:{fontWeight:"500",color:e.palette.secondary.main,borderColor:e.palette.secondary.main,border:"1px solid",fontSize:"1.2rem",backgroundColor:"#fff",width:"150px",padding:"5px",borderRadius:"30px",textAlign:"center",marginBottom:"10px",boxShadow:"4px 8px 8px #eee"}}}));function sp(){var e=lp(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i.a.useState(e),a=Object(l.a)(n,2),o=a[0],c=a[1];return[function(e){return c(!cp(e)||e)},{autoFocus:o,key:"".concat(t).concat(o),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(l.a)(s,2),u=b[0],j=b[1];Object(o.useEffect)((function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})}))}),[]),Object(o.useEffect)((function(){Mo.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var p,h=function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),u()},g=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!0})})):(r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!0})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:[]})})),Mo.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(N.a)(Object(N.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(_.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(K.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(M.a,{className:e.TextBox,children:Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},j),{},{autoFocus:!0,pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:rp,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&g()}}))})}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(R.a,{disabled:c.submiting,color:"default",onClick:h,onTouchTap:h,className:e.Clear,children:"Clear"}),Object(a.jsx)(R.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:g,onTouchTap:g,className:e.Find,children:"Find"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:e.PersonsBox,children:[(p=c.foundRecords[0].clinic,Object(a.jsx)("div",{className:e.boxTitle,children:p.toUpperCase()+" Clinic"})),function(e){switch(e){case"pcr":return Object(a.jsx)(Lt,{});case"gp":return Object(a.jsx)(el,{});case"std":return Object(a.jsx)(ql,{});case"gynae":return Object(a.jsx)(ar,{});case"blood":return Object(a.jsx)(Vs,{});case"derma":return Object(a.jsx)(jb,{});case"screening":return Object(a.jsx)(lu,{});default:return null}}(c.foundRecords[0].clinic)]})}),!c.foundRecords&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var dp=n(202),bp=n(241),up=n.n(bp),jp=["Visa Medical"],pp=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DERMA_COLOR,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"}}})),hp=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"40 Hours Late":"All Bookings"};function gp(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function fp(e){var t=pp(),n=function(e){switch(e){case"pcr":return t.PCRLabel;case"gp":return t.GPLabel;case"gynae":return t.GynaeLabel;case"std":return t.STDLabel;case"blood":return t.BloodLabel;case"derma":return t.DermaLabel;case"screening":return t.ScreeningLabel;case"corporate":return t.CorporateLabel;default:return t.clinicTitle}},c=i.a.useState(25),r=Object(l.a)(c,2),s=r[0],d=r[1],b=Object(o.useState)(!1),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(new Date((new Date).getTime()-6048e5)),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(new Date((new Date).getTime()-864e5)),O=Object(l.a)(m,2),y=O[0],k=O[1],v=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),S=Object(l.a)(v,2),B=S[0],T=S[1],w=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(w,2),P=D[0],A=D[1],I=Object(o.useState)(!1),_=Object(l.a)(I,2),F=_[0],E=_[1],W=Object(o.useState)(!0),G=Object(l.a)(W,2),H=G[0],V=G[1],q=Object(o.useState)(!0),X=Object(l.a)(q,2),$=X[0],Q=X[1],ee=Object(o.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=Object(o.useState)(!0),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=Object(o.useState)(!0),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=Object(o.useState)(!0),pe=Object(l.a)(ue,2),ge=pe[0],xe=pe[1],Oe=Object(o.useState)(!0),ke=Object(l.a)(Oe,2),Ce=ke[0],Be=ke[1],Ne=Object(o.useState)(!0),we=Object(l.a)(Ne,2),De=we[0],Le=we[1],Ae=Object(o.useState)(!0),_e=Object(l.a)(Ae,2),Fe=_e[0],Ee=_e[1],We=Object(o.useState)(!0),Me=Object(l.a)(We,2),ze=Me[0],Ge=Me[1],He=[];He="recent"===e.date?[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:115,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(e){return e.value?"credit card"===e.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===e.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===e.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Tt.a,{className:t.closeIcon})})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return ft(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(dp.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}]:[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return kt(t,e.value)},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Clinic",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{className:n(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"paid",headerName:"Paid",align:"center",width:90,renderCell:function(n){return n.value?"credit card"===n.getValue("paidBy")?Object(a.jsx)(dn.a,{className:t.checkIcon}):"cash"===n.getValue("paidBy")?Object(a.jsx)(qn.a,{className:t.checkIcon}):"corporate"===n.getValue("paidBy")?Object(a.jsx)(rt.a,{className:t.checkIcon}):"":Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(Tt.a,{className:t.closeIcon}),parseInt(n.getValue("deposit"))>0&&"deleted"===e.date&&Object(a.jsx)("span",{className:t.notifyIcon,children:"\xa0"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(dp.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:t.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:t.PositiveLabel,children:" POS "}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:t.RefLink,children:e.value})})}},{field:"fullname",headerName:"Fullname",width:250,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Ue=i.a.useContext(C),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=(Ye[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(null),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=i.a.useState(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(!1),it=Object(l.a)(ot,2),ct=it[0],lt=it[1],st=Object(o.useState)(jp[0]),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(""),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),xt=function(t){var n=Mo.getAllBookings;"today"===e.date?n=Mo.getTodayBookings:"old"===e.date?n=Mo.getOldBookings:"future"===e.date?n=Mo.getFutureBookings:"recent"===e.date?n=Mo.getRecentBookingsAll:"deleted"===e.date&&(n=Mo.getDeletedBookings),Xe({bookings:[],cachedBookings:[],isFetching:!0});n(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});Xe({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),xt(25)}),[e.date]),Object(o.useEffect)((function(){if(ht&&ht.trim().length>0){var e=Je.cachedBookings.filter((function(e){var t,n,a;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(ht.toLowerCase()))>=0||(null===(n=e.forename)||void 0===n?void 0:n.toLowerCase().indexOf(ht.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(ht.toLowerCase()))>=0}));Xe({bookings:Object(Et.a)(e),cachedBookings:Je.cachedBookings,isFetching:!1})}else Xe({bookings:Object(Et.a)(Je.cachedBookings),cachedBookings:Je.cachedBookings,isFetching:!1})}),[ht]);var mt,yt,kt=function(e,t){var n=Je.bookings.find((function(e){return e._id===t}));at(n),lt(!0)},vt=i.a.useState(1),Ct=Object(l.a)(vt,2),St=Ct[0],Bt=Ct[1];return Object(a.jsxs)(i.a.Fragment,{children:[Je.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(yt=e.date,"today"===yt?Object(a.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"old"===yt?Object(a.jsx)(he.a,{style:{fontSize:"2.2rem"}}):"future"===yt?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===yt?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"live"===yt?Object(a.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"completed"===yt?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===yt?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===yt?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===yt?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(me.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",hp(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){gt(""),xt(s)},children:Object(a.jsx)(Jt.a,{})})})})]})})}),Object(a.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&Ve.showCreateExcel&&Object(a.jsx)("div",{style:{paddingBottom:"5px"},children:Object(a.jsx)(R.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){p(!0)},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"export to excel"})})}),Je.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:ht,onChange:function(e){gt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(a.jsx)(K.a,{item:!0,hidden:(mt=e.date,"live"===mt||"positive"===mt||"late"===mt||"today"===mt),children:Object(a.jsxs)(M.a,{className:t.topSelect,children:[Object(a.jsx)(z.a,{id:"top-select-label",children:"Limit"}),Object(a.jsxs)(zt.a,{labelId:"top-select-label",id:"top-simple-select",value:s,onChange:function(e){d(e.target.value),xt(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:25,children:"25"}),Object(a.jsx)(Gt.a,{value:50,children:"50"}),Object(a.jsx)(Gt.a,{value:100,children:"100"}),Object(a.jsx)(Gt.a,{value:500,children:"500"}),Object(a.jsx)(Gt.a,{value:1e3,children:"1000"}),Object(a.jsx)(Gt.a,{value:1e4,children:"ALL"})]})]})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:Je.bookings,columns:He,autoPageSize:!0,page:St,onPageChange:function(e){Bt(e.page)},onSelectionChange:function(e){e.length>0&&Ze(e.rows[0])}})}),Object(a.jsx)(wc,{booking:nt,open:ct,onClose:function(){at(null),lt(!1)}}),Je.bookings&&Je.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:j,onClose:function(){ut(jp[0]),E(!1),p(!1)},PaperComponent:gp,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:F,onChange:function(e){E(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:bt,onChange:function(e){ut(e.target.value)},children:jp.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:f,onChange:function(e){x(e),T(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:y,onChange:function(e){k(e),A(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(P),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:H,onChange:function(e){V(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ne,onChange:function(e){ae(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ce,onChange:function(e){re(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:de,onChange:function(e){be(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ge,onChange:function(e){xe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Ce,onChange:function(e){Be(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:De,onChange:function(e){Le(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Fe,onChange:function(e){Ee(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ze,onChange:function(e){Ge(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("th",{className:t.th,children:"Date"}),$&&Object(a.jsx)("th",{className:t.th,children:"Forename"}),ne&&Object(a.jsx)("th",{className:t.th,children:"Surename"}),ce&&Object(a.jsx)("th",{className:t.th,children:"D.O.B"}),de&&Object(a.jsx)("th",{className:t.th,children:"Email"}),ge&&Object(a.jsx)("th",{className:t.th,children:"Tel"}),Ce&&Object(a.jsx)("th",{className:t.th,children:"Certificate"}),De&&Object(a.jsx)("th",{className:t.th,children:"AntiBodyTest"}),Fe&&Object(a.jsx)("th",{className:t.th,children:"Lab No."}),ze&&Object(a.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),Je.bookings.filter((function(e){return F?e.bookingDate>=B&&e.bookingDate<=P&&e.paid&&"corporate"===e.paidBy&&e.corporate===bt:e.bookingDate>=B&&e.bookingDate<=P})).map((function(e){return Object(a.jsxs)("tr",{children:[H&&Object(a.jsx)("td",{className:t.td,children:Object(dp.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:t.td,children:e.forenameCapital}),ne&&Object(a.jsx)("td",{className:t.td,children:e.surnameCapital}),ce&&Object(a.jsx)("th",{className:t.th}),de&&Object(a.jsx)("td",{className:t.td,children:e.email}),ge&&Object(a.jsx)("td",{className:t.td,children:e.phone}),Ce&&Object(a.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),De&&Object(a.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),Fe&&Object(a.jsx)("td",{className:t.td,children:e.extRef}),ze&&Object(a.jsx)("td",{className:t.td,children:up.a.calculatePrice(e)})]})}))]})})]})})]})]})}var xp=Object(w.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DermaGauge:{position:"absolute",bottom:"-20px",left:"115px",width:"20px",height:"120%"},ScreeningGauge:{position:"absolute",bottom:"-20px",left:"136px",width:"20px",height:"120%"},CorporateGauge:{position:"absolute",bottom:"-20px",left:"157px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),mp=function(e){e.key;var t=e.cellIndex,n=e.month,c=e.daysInMonth,r=e.dayClicked,s=xp(),d=i.a.useContext(C),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),R=Object(l.a)(D,2),L=R[0],P=R[1],A=i.a.useState(!1),I=Object(l.a)(A,2),_=(I[0],I[1]);Object(o.useEffect)((function(){if(t<=c.length){var e=c[t-1],a=vn()(e,"yyyy-mm-dd");f(a),y(e),P(e.getMonth()!==n-1);var o=vn()(new Date,"yyyy-mm-dd");_(a<o)}else{var i=t-c.length,r=new Date(c[c.length-1].getTime()+864e5*i),l=vn()(r,"yyyy-mm-dd");f(l),y(r),P(!0);var s=vn()(new Date,"yyyy-mm-dd");_(l<s)}}),[t,n,c]),Object(o.useEffect)((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&!(g.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return w(-2),e.abrupt("return");case 5:if(w(null),a=null===(t=u.AdminCalendarCache)||void 0===t||null===(n=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===g})))||void 0===n?void 0:n.res){e.next=12;break}return e.next=10,Mo.getAllBookingsCountByDateStr(g);case 10:a=e.sent,j((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:g,res:a}])})}));case 12:a.data.count&&w(a.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]);var F,E=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.PCR_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},W=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.GYNAE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},M=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.GP_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},z=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.STD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},G=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.BLOOD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},H=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.DERMA_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},U=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.ScreeningGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.SCREENING_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},Y=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:s.CorporateGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.CORPORATE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:s.Container,onClick:function(e){return r(e,O)},children:[function(e,t,n){var o=null,i=!1,c=-1;if(e<=n.length)c=(o=n[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var r=e-n.length;c=new Date(n[n.length-1].getTime()+864e5*r).getDate(),i=!0}var l=vn()(new Date,"yyyy-mm-dd")===vn()(o,"yyyy-mm-dd");return Object(a.jsx)("span",{className:i?s.DayLabelDisabled:l?s.DayLabelToday:s.DayLabel,style:{zIndex:2},children:c>0?"".concat(c):""})}(t,n,c),(F=S,F?-2!==F?Object(a.jsx)("div",{className:s.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:F.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:(t=e.clinic,n=e.count,Object(a.jsxs)(i.a.Fragment,{children:["visa"===t&&u.selectedClinics.findIndex((function(e){return"VISA"===e}))>=0&&E(n),"gynae"===t&&u.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&W(n),"gp"===t&&u.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&M(n),"std"===t&&u.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&z(n),"blood"===t&&u.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&G(n),"derma"===t&&u.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&H(n),"screening"===t&&u.selectedClinics.findIndex((function(e){return"SCREENING"===e}))>=0&&U(n),"corporate"===t&&u.selectedClinics.findIndex((function(e){return"CORPORATE"===e}))>=0&&Y(n)]}))});var t,n}))})}):void 0:Object(a.jsx)("div",{className:s.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}))]})})},Op=function e(){Object(ne.a)(this,e)};Op.getMonthRange=function(e,t){return new Qa.a.Calendar(Qa.a.SUNDAY).itermonthdates(t,e)};var yp=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],kp=[1,2,3,4,5,6,7],vp=[1,2,3,4,5,6],Cp=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),Sp=function(e){var t=e.month,n=e.year,o=e.dayClicked,c=Cp(),r=Op.getMonthRange(t,n);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("table",{className:c.table,children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:yp.map((function(e){return Object(a.jsx)("th",{className:c.th,children:e},"th-".concat(e))}))})}),Object(a.jsx)("tbody",{children:vp.map((function(e){return Object(a.jsx)("tr",{children:kp.map((function(i){return Object(a.jsx)("td",{className:c.td,children:Object(a.jsx)(mp,{cellIndex:(e-1)*kp.length+i,month:t,daysInMonth:r,dayClicked:o},"".concat(t).concat(n).concat((e-1)*kp.length+i))})}))})}))})]})})},Bp=Object(w.a)((function(e){return{Container:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},PCRGauge:{position:"absolute",bottom:"15px",left:"0",width:"15px",height:"90%"},GynaeGauge:{position:"absolute",bottom:"15px",left:"16px",width:"15px",height:"90%"},GPGauge:{position:"absolute",bottom:"15px",left:"32px",width:"15px",height:"90%"},STDGauge:{position:"absolute",bottom:"15px",left:"48px",width:"15px",height:"90%"},BloodGauge:{position:"absolute",bottom:"15px",left:"64px",width:"15px",height:"90%"},DermaGauge:{position:"absolute",bottom:"15px",left:"80px",width:"15px",height:"90%"},ScreeningGauge:{position:"absolute",bottom:"15px",left:"96px",width:"15px",height:"90%"},CorporateGauge:{position:"absolute",bottom:"15px",left:"112px",width:"15px",height:"90%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",height:"100%"}}})),Tp=function(e){e.key;var t=e.date,n=e.time,c=e.dayClicked,r=Bp(),s=i.a.useContext(C),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(null),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");O(t<e),S(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,a;if(!(!t||t.length<=0||!n||n.length<=0)){g(null);var o=null===(e=b.AdminCalendarCache)||void 0===e||null===(a=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===a?void 0:a.res;if(!o){var i=oe.a.CancelToken.source();return Mo.getAllBookingsCountByDateStrandTime(t,n,i).then((function(e){e.data.count&&(g(e.data.count),u((function(a){return Object(N.a)(Object(N.a)({},a),{},{AdminCalendarCache:[].concat(Object(Et.a)(a.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(n),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count&&g(o.data.count)}}),[t,n]);var B,T=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.PCRGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.PCR_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},w=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.GynaeGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.GYNAE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},D=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.GPGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.GP_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},R=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.STDGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.STD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},L=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.BloodGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.BLOOD_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},P=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.DermaGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.DERMA_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},A=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.ScreeningGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.SCREENING_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},I=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var n=100-t;return Object(a.jsx)("div",{className:r.CorporateGauge,children:Object(a.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Nn.CORPORATE_COLOR,position:"relative"},children:[Object(a.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(a.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(n,"%"),backgroundColor:"#fafafa"}})]})})},_=function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:["visa"===e&&b.selectedClinics.findIndex((function(e){return"VISA"===e}))>=0&&T(t),"gynae"===e&&b.selectedClinics.findIndex((function(e){return"GYNAE"===e}))>=0&&w(t),"gp"===e&&b.selectedClinics.findIndex((function(e){return"GP"===e}))>=0&&D(t),"std"===e&&b.selectedClinics.findIndex((function(e){return"STD"===e}))>=0&&R(t),"blood"===e&&b.selectedClinics.findIndex((function(e){return"BLOOD"===e}))>=0&&L(t),"derma"===e&&b.selectedClinics.findIndex((function(e){return"DERMA"===e}))>=0&&P(t),"screening"===e&&b.selectedClinics.findIndex((function(e){return"SCREENING"===e}))>=0&&A(t),"corporate"===e&&b.selectedClinics.findIndex((function(e){return"CORPORATE"===e}))>=0&&I(t)]})};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:m?r.ContainerPast:r.Container,onClick:function(e){return c(e,v)},children:(B=h,B?-2!==B?Object(a.jsx)("div",{className:r.DayLabelContainer,children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:B.map((function(e){return Object(a.jsx)(K.a,{item:!0,children:_(e.clinic,e.count)})}))})}):void 0:Object(a.jsx)("div",{className:r.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}))})})},Np=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],wp=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),Dp=function(e){var t=e.dates,n=e.dayClicked,o=wp();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(a.jsxs)("th",{className:o.th,children:[Object(a.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:vn()(e,"ddd")}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:"#aaa"},children:vn()(e,"mmm ")}),Object(a.jsx)("span",{style:vn()(new Date,"yyyy-mm-dd")===vn()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:vn()(e," d")})]})]})}))]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:o.table,children:Object(a.jsx)("tbody",{children:Np.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(a.jsx)("td",{className:o.td,children:Object(a.jsx)(Tp,{dayClicked:n,date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},Rp=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"500",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},BoxDisabled:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",borderColor:"#ddd",cursor:"not-allowed",color:"#ddd",transition:"all 0.2s ease"},BoxGynae:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.GYNAE_COLOR,color:Nn.GYNAE_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.GYNAE_COLOR,color:"#fff"}},BoxGP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.GP_COLOR,color:Nn.GP_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.GP_COLOR,color:"#fff"}},BoxSTD:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.STD_COLOR,color:Nn.STD_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.STD_COLOR,color:"#fff"}},BoxBlood:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.BLOOD_COLOR,color:Nn.BLOOD_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.BLOOD_COLOR,color:"#fff"}},BoxScreening:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.SCREENING_COLOR,color:Nn.SCREENING_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.SCREENING_COLOR,color:"#fff"}},BoxCorporate:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.CORPORATE_COLOR,color:Nn.CORPORATE_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.CORPORATE_COLOR,color:"#fff"}},BoxDerma:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Nn.DERMA_COLOR,color:Nn.DERMA_COLOR,transition:"all 0.2s ease","&:hover":{backgroundColor:Nn.DERMA_COLOR,color:"#fff"}}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Lp(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Pp(e){var t=Rp(),n=i.a.useContext(C),o=Object(l.a)(n,2),c=(o[0],o[1],function(){e.handleClose()}),r=function(){return e.time.indexOf(":15")>0||e.time.indexOf(":45")>0||e.time.indexOf("09")>=0},s=function(t){e.clinicClicked(t)};return Object(a.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"xs",open:e.open,onClose:c,PaperComponent:Lp,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(kr.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)("div",{style:{height:"420px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Fe.a,{className:t.CalendarIcon})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:r()?t.BoxDisabled:t.BoxGynae,onClick:function(){return r()?null:s("gynae")},children:"GYNAE"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:r()?t.BoxDisabled:t.BoxGP,onClick:function(){return r()?null:s("gp")},children:"GP"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxSTD,onClick:function(){return s("std")},children:"STD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxBlood,onClick:function(){return s("blood")},children:"BLOOD"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxCorporate,onClick:function(){return s("screening")},children:"SCREENING"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxScreening,onClick:function(){return s("corporate")},children:"CORPORATE"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{className:t.BoxDerma,onClick:function(){return s("derma")},children:"DERMATOLOGY"})})]})})}),Object(a.jsx)($t.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:c,style:{width:"100px"},children:"close"})})})})]})})})}var Ap=Object(w.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxSampleTaken:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#0066cc",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#0059b3",color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}},BookingBorderPCR:{border:"4px solid",borderColor:Nn.PCR_COLOR},BookingBorderGynae:{border:"4px solid",borderColor:Nn.GYNAE_COLOR},BookingBorderGP:{border:"4px solid",borderColor:Nn.GP_COLOR},BookingBorderSTD:{border:"4px solid",borderColor:Nn.STD_COLOR},BookingBorderBlood:{border:"4px solid",borderColor:Nn.BLOOD_COLOR},BookingBorderDerma:{border:"4px solid",borderColor:Nn.DERMA_COLOR},BookingBorderScreening:{border:"4px solid",borderColor:Nn.SCREENING_COLOR},BookingBorderCorporate:{border:"4px solid",borderColor:Nn.CORPORATE_COLOR},bookingBoxPending:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"10px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ddd",color:"#777",boxShadow:"2px 4px #fafafa","&:hover":{background:"#eee",color:"#333"}}}})),Ip=function(e){e.key;var t=e.date,n=e.time,c=Ap(),r=i.a.useContext(C),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(null),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(null),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(null),y=Object(l.a)(O,2),k=y[0],v=y[1],S=i.a.useState(!0),w=Object(l.a)(S,2),D=(w[0],w[1],i.a.useState(!1)),R=Object(l.a)(D,2),L=(R[0],R[1]),P=i.a.useState(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState(!1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState(!1),G=Object(l.a)(z,2),H=G[0],U=G[1],Y=i.a.useState(!1),V=Object(l.a)(Y,2),K=V[0],J=V[1],X=i.a.useState(!1),$=Object(l.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState(!1),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=i.a.useState(!1),ce=Object(l.a)(ie,2),re=ce[0],le=ce[1],se=i.a.useState(!1),de=Object(l.a)(se,2),be=de[0],ue=de[1],je=i.a.useState(!1),pe=Object(l.a)(je,2),he=pe[0],ge=pe[1];Object(o.useEffect)((function(){var e=vn()(new Date,"yyyy-mm-dd");L(t<e)}),[t]),Object(o.useEffect)((function(){if(p)if(d.dayViewCalFilter&&d.dayViewCalFilter.trim().length>0){var e=d.dayViewCalFilter.trim().toUpperCase();m(p.filter((function(t){var n,a,o;return(null===(n=t.fullname)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(a=t.forename)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))>=0||(null===(o=t.surname)||void 0===o?void 0:o.toLowerCase().indexOf(e.toLowerCase()))>=0})))}else m(Object(Et.a)(p))}),[d.dayViewCalFilter,p]),Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){var a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!n||n.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(h(null),(i=null===(a=d.AdminCalendarCache)||void 0===a||null===(o=a.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n)})))||void 0===o?void 0:o.res)&&!I&&!W){e.next=9;break}return e.next=7,Mo.getAllBookingsByDateStrandTime(t,n);case 7:i=e.sent,b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[].concat(Object(Et.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(n),res:i}])})}));case 9:"OK"===i.data.status&&h(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(I||W)&&(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(n))}))})})),b((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,n,d.bookingDialogDataChanged]);var fe,xe=function(e){var t=e.status,n=e.confirmed,a=e.clinic;if(("screening"===a||"visa"===a)&&!n)return c.bookingBoxPending;switch(t){case"sample_taken":case"patient_attended":return c.bookingBoxSampleTaken;case"positive":return c.bookingBoxPositive;case"report_sent":case"report_cert_sent":return c.bookingBoxReportSent;default:return c.bookingBox}},me=function(){M(!0)},Oe=function(e){switch(e){case"visa":return c.BookingBorderPCR;case"gynae":return c.BookingBorderGynae;case"gp":return c.BookingBorderGP;case"std":return c.BookingBorderSTD;case"blood":return c.BookingBorderBlood;case"derma":return c.BookingBorderDerma;case"screening":return c.BookingBorderScreening;case"corporate":return c.BookingBorderCorporate;default:return null}};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:c.Container,children:(fe=x,null===fe?Object(a.jsx)("div",{className:c.LoadingProgress,children:Object(a.jsx)(q.a,{disableShrink:!0})}):fe.length>=0?Object(a.jsxs)(i.a.Fragment,{children:[fe.map((function(e){return d.selectedClinics.findIndex((function(t){return t===e.clinic.toUpperCase()}))>=0&&Object(a.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:Object(Q.a)(xe(e),Oe(e.clinic)),onClick:function(t){return function(e,t){console.log(t),v(t),_(!0)}(0,e)},children:"".concat(e.fullname?e.fullname:"".concat(e.forename," ").concat(e.surname)).substring(0,15)})})),Object(a.jsxs)("div",{className:c.bookingBoxNew,onClick:me,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(a.jsx)(wc,{booking:k,open:I,onClose:function(){_(!1)}}),Object(a.jsx)(Pp,{date:t,time:n,open:W,handleClose:function(){M(!1)},clinicClicked:function(e){switch(e){case"gynae":J(!0);break;case"gp":U(!0);break;case"std":ee(!0);break;case"blood":oe(!0);break;case"derma":le(!0);break;case"screening":case"visa":ue(!0);break;case"corporate":ge(!0)}}}),Object(a.jsx)(Ol,{date:t,time:n,open:H,handleClose:function(){U(!1),M(!1)}}),Object(a.jsx)(xs,{date:t,time:n,open:Z,handleClose:function(){ee(!1),M(!1)}}),Object(a.jsx)(Br,{date:t,time:n,open:K,handleClose:function(){J(!1),M(!1)}}),Object(a.jsx)(hd,{date:t,time:n,open:ae,handleClose:function(){oe(!1),M(!1)}}),Object(a.jsx)(Ab,{date:t,time:n,open:re,handleClose:function(){le(!1),M(!1)}}),Object(a.jsx)(wu,{date:t,time:n,open:be,handleClose:function(){ue(!1),M(!1)}}),Object(a.jsx)(Cj,{date:t,time:n,open:he,handleClose:function(){ge(!1),M(!1)}})]})},_p=["09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM"],Fp=Object(w.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),Ep=function(e){var t=e.date,n=Fp();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"7%"}}),Object(a.jsx)("th",{style:{width:"84%"},children:Object(a.jsx)("div",{className:vn()(new Date,"yyyy-mm-dd")===vn()(t,"yyyy-mm-dd")?n.titleLabelToday:n.titleLabel,children:vn()(t,"dddd")})})]})})})}),Object(a.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(a.jsx)("table",{className:n.table,children:Object(a.jsx)("tbody",{children:_p.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"7%"},children:e}),Object(a.jsx)("td",{className:n.td,children:Object(a.jsx)(Ip,{date:vn()(t,"yyyy-mm-dd"),time:e},"".concat(vn()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},Wp=[{clinic:"VISA",color:Nn.PCR_COLOR},{clinic:"GYNAE",color:Nn.GYNAE_COLOR},{clinic:"GP",color:Nn.GP_COLOR},{clinic:"STD",color:Nn.STD_COLOR},{clinic:"BLOOD",color:Nn.BLOOD_COLOR},{clinic:"DERMA",color:Nn.DERMA_COLOR},{clinic:"SCREENING",color:Nn.SCREENING_COLOR},{clinic:"CORPORATE",color:Nn.CORPORATE_COLOR}],Mp=["January","February","March","April","May","June","July","August","September","October","November","December"],zp=Object(w.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function Gp(){var e=zp(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState((new Date).getMonth()+1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState((new Date).getFullYear()),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(new Date),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(new Date),k=Object(l.a)(y,2),v=k[0],S=k[1],B=i.a.useState([]),T=Object(l.a)(B,2),w=T[0],D=T[1],P=i.a.useState("month"),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState("month"),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState(""),G=Object(l.a)(z,2),U=G[0],Y=G[1],V=function(){Y(""),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-864e5*t);return S(n),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{selectedClinics:["VISA","GP","GYNAE","STD","BLOOD","DERMA","SCREENING","CORPORATE"]})})),function(){r((function(e){return Object(N.a)(Object(N.a)({},e),{},{AdminCalendarCache:[]})})),V()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(v.getTime()+864e5*t));D(e)}),[v]);var q,X=function(e,t){var n=new Date(t),a=n.getDay();S(new Date(n.getTime()-864e5*a)),O(n),u(n.getMonth()+1),g(n.getFullYear()),M("day"),_("day")};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(K.a,{container:!0,spacing:1,children:Wp.map((function(e){var t;return Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:(null===(t=c.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e.clinic})))>=0?{border:"1px solid ".concat(e.color),backgroundColor:"".concat(e.color),color:"#fff",fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"}:{border:"1px solid ".concat(e.color),color:"".concat(e.color),fontSize:"0.95rem",fontWeight:"500",padding:"5px",minWidth:"70px",textAlign:"center",cursor:"pointer"},onClick:function(){return function(e){var t;(null===(t=c.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e})))>=0?r((function(t){return Object(N.a)(Object(N.a)({},t),{},{selectedClinics:t.selectedClinics.filter((function(t){return t!==e}))})})):r((function(t){return Object(N.a)(Object(N.a)({},t),{},{selectedClinics:[].concat(Object(Et.a)(t.selectedClinics),[e])})}))}(e.clinic)},children:e.clinic})})}))})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(a.jsx)(Ot.a,{title:"Previuos ".concat(I),placement:"bottom-start",children:Object(a.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===I){1===b&&g(h-1);var t=1===b?12:b-1;u(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===I){var o=new Date(v.getTime()-6048e5);S(o),O(o),u(o.getMonth()+1),g(o.getFullYear())}else if("day"===I){var i=new Date(m.getTime()-864e5);O(i);var c=i.getDay();S(new Date(i.getTime()-864e5*c)),u(i.getMonth()+1),g(i.getFullYear())}},children:Object(a.jsx)(co.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(Ot.a,{title:"Next ".concat(I),placement:"bottom-end",children:Object(a.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===I){12===b&&g(h+1);var t=12===b?1:b+1;u(t);var n=new Date(h,t-1,1,0,0,0,0);O(n);var a=n.getDay();S(new Date(n.getTime()-864e5*a))}else if("week"===I){var o=new Date(v.getTime()+6048e5);S(o),O(o),u(o.getMonth()+1),g(o.getFullYear())}else if("day"===I){var i=new Date(m.getTime()+864e5);O(i);var c=i.getDay();S(new Date(i.getTime()-864e5*c)),u(i.getMonth()+1),g(i.getFullYear())}},children:Object(a.jsx)(lo.a,{style:{fontSize:"2rem"}})})}),Object(a.jsx)(R.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,n=t.getDay();S(new Date(t.getTime()-864e5*n)),O(t),u(t.getMonth()+1),g(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(a.jsx)(K.a,{item:!0,md:6,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(Mp[b-1]," ").concat(h)," "]});if("week"===t){var n=new Date(v.getTime()+5184e5),o="";return o=n.getMonth()===v.getMonth()?vn()(n,"d"):vn()(n,"mmm d"),Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(v,"mmm d")," - ").concat(o,", ").concat(h)," "]})}return"day"===t?Object(a.jsxs)("span",{className:e.title,children:[" ","".concat(vn()(m,"mmmm d, yyyy"))," "]}):void 0}(I)}),"day"===I&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{variant:"standard",style:{marginBottom:"5px"},value:U,onChange:function(e){Y(e.target.value),r((function(t){var n,a;return Object(N.a)(Object(N.a)({},t),{},{dayViewCalFilter:null===(n=e.target.value)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(Ot.a,{title:"Clear",children:Object(a.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return V()},onMouseDown:function(){return V()},children:Object(a.jsx)(Tt.a,{})})})})}})})]})}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(a.jsxs)(Wa.a,{value:W,exclusive:!0,onChange:function(e,t){t&&t.length&&(M(t),_(t))},"aria-label":"select view mode",children:[Object(a.jsx)(Ea.a,{style:"month"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(a.jsx)(Ea.a,{style:"week"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(a.jsx)(Ea.a,{style:"day"===W?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(q=I,"month"===q?Object(a.jsx)(Sp,{dayClicked:X,month:b,year:h}):"week"===q?Object(a.jsx)(Dp,{dayClicked:X,dates:w}):"day"===q?Object(a.jsx)(Ep,{date:m}):void 0)]})}var Hp=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"}}}));function Up(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Yp(e){var t,n=Hp(),c=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.DefaultLabel}},r=i.a.useState(25),s=Object(l.a)(r,2),d=(s[0],s[1],Object(o.useState)(!1)),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(new Date((new Date).getTime()-6048e5)),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(x,2),O=m[0],y=m[1],k=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),v=Object(l.a)(k,2),S=v[0],B=v[1],T=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),w=Object(l.a)(T,2),D=w[0],P=w[1],A=Object(o.useState)(!1),I=Object(l.a)(A,2),_=I[0],F=I[1],E=Object(o.useState)(!0),W=Object(l.a)(E,2),z=W[0],G=W[1],H=Object(o.useState)(!0),V=Object(l.a)(H,2),J=V[0],X=V[1],$=Object(o.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!0),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],ce=Object(o.useState)(!0),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=Object(o.useState)(!0),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=Object(o.useState)(!0),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=Object(o.useState)(!0),me=Object(l.a)(xe,2),Oe=me[0],ke=me[1],ve=Object(o.useState)(!0),Ce=Object(l.a)(ve,2),Se=Ce[0],Be=Ce[1],Te=Object(o.useState)(!0),Ne=Object(l.a)(Te,2),we=Ne[0],De=Ne[1];t=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(R.a,{color:"primary",onClick:function(t){return lt(t,e.value,e.getValue("clinic"))},children:Object(a.jsx)(ye.a,{})})})}},{field:"clinic",headerName:"Type",align:"center",width:130,renderCell:function(e){return Object(a.jsx)("span",{className:c(e.value),children:e.value?e.value.toUpperCase():"N/A"})}},{field:"fullname",headerName:"Fullname",width:200,valueGetter:function(e){return e.value&&0!==e.value.length?e.value:"".concat(e.getValue("forename")," ").concat(e.getValue("surname"))}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(dp.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:105,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:100,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:n.BookedLabel,children:" BM "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:n.PatientAttendedLabel,children:" PA "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:n.SampleTakenLabel,children:" ST "}):"report_sent"===e.value?Object(a.jsx)("span",{className:n.ReportSentLabel,children:" RS "}):"report_cert_sent"===e.value?Object(a.jsx)("span",{className:n.ReportCertSentLabel,children:" RCS "}):"positive"===e.value?Object(a.jsx)("span",{className:n.PositiveLabel,children:" POS "}):""}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(Ot.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(Z.a,{className:n.RefLink,children:e.value})})}},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Tel",width:150},{field:"notes",headerName:"Notes",width:500}];var Re=i.a.useContext(C),Le=Object(l.a)(Re,2),Pe=(Le[0],Le[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),Ae=Object(l.a)(Pe,2),Ie=Ae[0],_e=Ae[1],Fe=i.a.useState(null),Ee=Object(l.a)(Fe,2),We=(Ee[0],Ee[1]),Me=i.a.useState(null),ze=Object(l.a)(Me,2),Ge=ze[0],He=ze[1],Ue=i.a.useState(!1),Ye=Object(l.a)(Ue,2),Ve=Ye[0],Ke=Ye[1],qe=i.a.useState(!1),Je=Object(l.a)(qe,2),Xe=Je[0],$e=Je[1],Qe=Object(o.useState)(jp[0]),Ze=Object(l.a)(Qe,2),et=Ze[0],tt=Ze[1],nt=i.a.useState(""),at=Object(l.a)(nt,2),ot=at[0],it=at[1],ct=(Object(o.useRef)(),function(){var e=Mo.searchAllBookings;_e({bookings:[],cachedBookings:[],isFetching:!0});e(ot).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(N.a)(Object(N.a)({},e.data[t]),{},{id:t+1});_e({bookings:Object(Et.a)(e.data),cachedBookings:Object(Et.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))}),rt=function(){He(null),Ke(!1),$e(!1)},lt=function(e,t,n){var a=Ie.bookings.find((function(e){return e._id===t}));He(a),"Blood Result"===n?$e(!0):Ke(!0)},st=i.a.useState(1),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(!1),pt=Object(l.a)(jt,2),ht=pt[0],gt=pt[1],ft=function(){!ot||ot.trim().length<3?gt(!0):ct()};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:ht,variant:"standard",value:ot,onChange:function(e){it(e.target.value),gt(!1)},id:"filter",label:"Patient's Name",helperText:"You can search the patients by name ".concat(ht?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{width:"250px"},onKeyPress:function(e){"Enter"===e.key&&ft()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:ft,children:"Search"})}),Object(a.jsx)(K.a,{item:!0,children:Ie.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(q.a,{color:"primary"})})})]})})}),Ie.isFetching&&Object(a.jsx)("div",{className:n.HideNowRows})]}),Ie.bookings&&Ie.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"20px"},children:Object(a.jsx)(Wt.a,{rows:Ie.bookings,columns:t,autoPageSize:!0,page:bt,onPageChange:function(e){ut(e.page)},onSelectionChange:function(e){e.length>0&&We(e.rows[0])}})}),Object(a.jsx)(wc,{booking:Ge,open:Ve,onClose:rt}),Ie.bookings&&Ie.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:u,onClose:function(){tt(jp[0]),F(!1),j(!1)},PaperComponent:Up,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:_,onChange:function(e){F(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),_&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:n.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:et,onChange:function(e){tt(e.target.value)},children:jp.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:g,onChange:function(e){f(e),B(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){y(e),P(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:n.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(S,".").concat(D),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:z,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:J,onChange:function(e){X(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:oe,onChange:function(e){ie(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:le,onChange:function(e){se(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ue,onChange:function(e){je(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ge,onChange:function(e){fe(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Oe,onChange:function(e){ke(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Se,onChange:function(e){Be(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:we,onChange:function(e){De(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:n.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("th",{className:n.th,children:"Date"}),J&&Object(a.jsx)("th",{className:n.th,children:"Forename"}),ee&&Object(a.jsx)("th",{className:n.th,children:"Surename"}),oe&&Object(a.jsx)("th",{className:n.th,children:"D.O.B"}),le&&Object(a.jsx)("th",{className:n.th,children:"Email"}),ue&&Object(a.jsx)("th",{className:n.th,children:"Tel"}),ge&&Object(a.jsx)("th",{className:n.th,children:"Certificate"}),Oe&&Object(a.jsx)("th",{className:n.th,children:"AntiBodyTest"}),Se&&Object(a.jsx)("th",{className:n.th,children:"Lab No."}),we&&Object(a.jsx)("th",{className:n.th,children:"Price (\xa3) "})]}),Ie.bookings.filter((function(e){return _?e.bookingDate>=S&&e.bookingDate<=D&&e.paid&&"corporate"===e.paidBy&&e.corporate===et:e.bookingDate>=S&&e.bookingDate<=D})).map((function(e){return Object(a.jsxs)("tr",{children:[z&&Object(a.jsx)("td",{className:n.td,children:Object(dp.FormatDateFromString)(e.bookingDate)}),J&&Object(a.jsx)("td",{className:n.td,children:e.forenameCapital}),ee&&Object(a.jsx)("td",{className:n.td,children:e.surnameCapital}),oe&&Object(a.jsx)("th",{className:n.th}),le&&Object(a.jsx)("td",{className:n.td,children:e.email}),ue&&Object(a.jsx)("td",{className:n.td,children:e.phone}),ge&&Object(a.jsx)("td",{className:n.td,children:e.certificate?"YES":"NO"}),Oe&&Object(a.jsx)("td",{className:n.td,children:e.antiBodyTest?"YES":"NO"}),Se&&Object(a.jsx)("td",{className:n.td,children:e.extRef}),we&&Object(a.jsx)("td",{className:n.td,children:up.a.calculatePrice(e)})]})}))]})})]})})]}),Object(a.jsx)(Pc,{booking:Ge,open:Xe,onClose:rt})]})}var Vp=n(667),Kp=n.n(Vp),qp=n(666),Jp=n.n(qp),Xp=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},formControl:{marginBottom:"20px",minWidth:"200px"},submit:{color:"#f5f5f5",height:"50px",marginTop:"2px",width:"100px"},codeTitle:{fontSize:"1.2rem",fontWeight:"500",color:e.palette.primary.main,padding:"10px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function $p(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}function Qp(){var e=Xp(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=(n[0],n[1],i.a.useState(!1)),r=Object(l.a)(c,2),s=r[0],d=r[1],b=i.a.useState(""),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(!1),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(!1),O=Object(l.a)(m,2),y=O[0],k=O[1],v=i.a.useState(!1),S=Object(l.a)(v,2),w=S[0],D=S[1],P=Object(o.useState)(!1),A=Object(l.a)(P,2),I=A[0],_=A[1],F=Object(o.useState)(!1),Y=Object(l.a)(F,2),Z=Y[0],ee=Y[1],te=i.a.useState(null),ne=Object(l.a)(te,2),ae=(ne[0],ne[1]),oe=i.a.useState(null),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState([]),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(null),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(null),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=i.a.useState(null),ye=Object(l.a)(Oe,2),ke=ye[0],ve=ye[1],Ce=i.a.useState(!1),Se=Object(l.a)(Ce,2),Be=Se[0],Te=Se[1],Ne=i.a.useState(!1),we=Object(l.a)(Ne,2),De=we[0],Re=we[1],Le=i.a.useState(!1),Pe=Object(l.a)(Le,2),Ae=Pe[0],Ie=Pe[1],_e=i.a.useState(!1),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn.getAllCodes();case 3:t=e.sent,be(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,Me();case 4:d(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d(!1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();de&&0!==de.length||e()}),[]);var ze=function(){"steve@2021"===j?x(!0):(x(!1),ae("Invalid Password!"))},Ge=Object(o.useState)(""),He=Object(l.a)(Ge,2),Ue=He[0],Ye=He[1],Ve=Object(o.useState)(!1),qe=Object(l.a)(Ve,2),Je=qe[0],Xe=qe[1],$e=Object(o.useState)(""),Qe=Object(l.a)($e,2),Ze=Qe[0],et=Qe[1],tt=Object(o.useState)(!1),nt=Object(l.a)(tt,2),at=nt[0],ot=nt[1],it=Object(o.useState)(!1),ct=Object(l.a)(it,2),rt=ct[0],lt=ct[1],st=Object(o.useState)(!1),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,ke||(t=!0,Ie(!0)),xe||(t=!0,Re(!0)),pe||(t=!0,Te(!0)),!t){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,ut(!0),e.next=10,wn.addCode(pe,xe,ke);case 10:Me(),ut(!1),ve(null),me(null),he(null),ee(!0),setTimeout((function(){We(!1),ee(!1)}),3e3),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),console.error(e.t0),ut(!1);case 23:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ht()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ut(!0),e.next=6,wn.updateCode(ce._id,{description:Ue,price:Ze,hidden:rt,isBloodTable:ce.isBloodTable});case 6:(t=e.sent)&&t.data&&"OK"===t.data.status&&(n=Object(Et.a)(de),a=n.findIndex((function(e){return e._id===ce._id})),n[a].description=Ue,n[a].price=Ze,n[a].hidden=rt,be(n),re(null),re(n[a]),_(!0),setTimeout((function(){_(!1)}),3e3)),ut(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),ut(!1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=!1;return Ue&&0!==Ue.trim().length||(e=!0,Xe(!0)),Ze&&0!==Ze||(e=!0,ot(!0)),!e};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{style:{textAlign:"left",padding:"20px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[Object(a.jsx)(Ke.a,{style:{fontSize:"2.2rem"}}),";"]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:"System Codes"})})]})}),s&&f&&Object(a.jsx)("div",{style:{minHeight:"80vh"},children:Object(a.jsx)(Mt.a,{color:"secondary"})}),!f&&Object(a.jsxs)(K.a,{container:!0,alignContent:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{severity:"warning",style:{fontSize:"1rem",fontWeight:"400"},children:"Alert - In order to proceed, please enter your password."})}),Object(a.jsx)(K.a,{item:!0,sm:6,xs:12,children:Object(a.jsxs)(M.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ze()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(G.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:y?"text":"password",placeholder:"Please Enter Your Password",value:j,onChange:function(e){p(e.target.value),ae(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(J.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){k(!y)},onMouseDown:function(e){e.preventDefault()},children:y?Object(a.jsx)(X.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ze,className:e.submit,children:"Enter"})})]}),!s&&f&&Object(a.jsxs)(K.a,{container:!0,alignContent:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(Dn.a,{id:"code-auto-complete",value:ce,onChange:function(e,t){re(t),function(e){e&&(Ye(e.description),et(e.price),lt(!!e.hidden),Xe(!1),ot(!1),setTimeout((function(){D(!1)}),200))}(t)},options:de,getOptionLabel:function(e){return".".concat(e.code," -- ").concat(e.description," -- ").concat(parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))},fullWidth:!0,renderInput:function(e){return Object(a.jsx)(L.a,Object(N.a)(Object(N.a)({},e),{},{label:"System Codes",helperText:"Standard codes already defined in the system"}))}})}),!ce&&!Ee&&Object(a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",margin:"0px 20px"},children:Object(a.jsx)(Ot.a,{title:"Add New Item",children:Object(a.jsx)(J.a,{"aria-label":"add",size:"large",onClick:function(){We(!Ee)},children:Object(a.jsx)(Jp.a,{color:"primary",fontSize:"inherit"})})})}),!ce&&Ee&&Object(a.jsx)(o.Fragment,{children:Object(a.jsx)(K.a,{item:!0,xs:12,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(W.a,{elevation:4,style:{position:"relative"},children:[Object(a.jsx)(V.a,{className:e.backdrop,open:bt,children:Object(a.jsx)(q.a,{color:"inherit"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:2,style:{padding:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Be,value:pe,onChange:function(e){he(e.target.value),e.target.value&&Te(!1)},fullWidth:!0,label:"Code",name:"code",id:"code-id"})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:De,value:xe,onChange:function(e){me(e.target.value),e.target.value&&Re(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:Ae,value:ke,onChange:function(e){ve(e.target.value),e.target.value&&Ie(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:$p,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Z&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"400"},children:"Success - New Code Saved."})}),Object(a.jsx)(K.a,{item:!0,xs:6,md:4,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:jt,style:{height:"40px"},children:"Add New Code"})})]})]})})}),ce&&Object(a.jsx)(o.Fragment,{children:Object(a.jsx)(K.a,{item:!0,xs:12,style:{width:"100%",marginTop:"20px"},children:Object(a.jsxs)(W.a,{elevation:4,style:{position:"relative"},children:[Object(a.jsx)(V.a,{className:e.backdrop,open:bt,children:Object(a.jsx)(q.a,{color:"inherit"})}),ce&&ce.isBloodTable&&Object(a.jsx)("div",{style:{position:"absolute",right:"10px",top:"10px"},children:Object(a.jsx)(Ot.a,{title:"Blood Test",children:Object(a.jsx)(Kp.a,{style:{color:"red",fontSize:"1.5rem"}})})}),Object(a.jsxs)("div",{className:e.codeTitle,children:[Object(a.jsx)("span",{style:{fontSize:"0.9rem",color:"#999"},children:"CODE: "})," ",ce.code]}),Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:2,style:{padding:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(L.a,{error:Je,value:Ue,onChange:function(e){Ue!==e.target.value&&D(!0),Ye(e.target.value),Xe(!1)},fullWidth:!0,label:"Description (Custom)",name:"desc",helperText:"You can enter any description you want to be placed on the invoice",id:"desc-id"})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(L.a,{error:at,value:Ze,onChange:function(e){Ze!==e.target.value&&D(!0),et(e.target.value),ot(!1)},fullWidth:!0,label:"Price",name:"price",id:"price-id",InputProps:{inputComponent:$p,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),ce.isBloodTable&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:rt,onChange:function(e){rt!==e.target.checked&&D(!0),lt(e.target.checked)},color:"secondary",name:"hide-canceled",inputProps:{"aria-label":"secondary checkbox"}}),label:"Hide From Online Patients"})}),I&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"400"},children:"Success - Changes Saved Successfully."})}),Object(a.jsx)(K.a,{item:!0,xs:6,md:4,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:pt,style:{height:"40px"},disabled:!w,children:"Save Changes"})})]})]})})}),Object(a.jsx)(K.a,{item:!0,xs:12})]})]})}n(271);var Zp=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),eh=function e(){Object(ne.a)(this,e)};eh.downloadGPRegForm=function(e){return Zp.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};n(547);var th=function e(){Object(ne.a)(this,e)};th.addNewBooking=function(e){return Zp.post("/api/optimalvision/book/bookappointment",e)},th.sendRegFormEmail=function(e){return Zp.post("/api/optimalvision/book/sendregformemail?id=".concat(e))},th.payBooking=function(e,t,n,a){return Zp.post("/api/optimalvision/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},th.unPayBooking=function(e){return Zp.post("/api/optimalvision/book/unpaybooking?id=".concat(e))},th.getShouldRefundsCount=function(){return Zp.get("/api/optimalvision/book/getshouldrefundscount?")},th.refundBooking=function(e){return Zp.post("/api/optimalvision/payment/refundpayment",{bookingId:e})},th.getBookingsStatsByDateStr=function(e){return Zp.get("/api/optimalvision/book/getbookingsstatsbydatestr?date=".concat(e))},th.getBookingsCountByDateStr=function(e){return Zp.get("/api/optimalvision/book/getbookingscountbydatestr?date=".concat(e))},th.getAllBookingsCountAll=function(){return Zp.get("/api/optimalvision/book/getallbookingscountall")},th.getBookingsCountByDateStrandTime=function(e,t,n){return Zp.get("/api/optimalvision/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},th.getBookingsByDateStrandTime=function(e,t){return Zp.get("/api/optimalvision/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},th.getAllBookingsCountByDateStr=function(e){return Zp.get("/api/optimalvision/book/getallbookingscountbydatestr?date=".concat(e))},th.getAllBookingsCountByDateStrandTime=function(e,t,n){return Zp.get("/api/optimalvision/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},th.getAllBookingsByDateStrandTime=function(e,t){return Zp.get("/api/optimalvision/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},th.changeBackToBookingMade=function(e){return Zp.post("/api/optimalvision/book/changebacktobookingmade?id=".concat(e))},th.changeToPatientAttended=function(e){return Zp.post("/api/optimalvision/book/changetopatientattended?id=".concat(e))},th.updateBooking=function(e){return Zp.post("/api/optimalvision/book/updatebookappointment",e)},th.updateBookingTime=function(e){return Zp.post("/api/optimalvision/book/updatebookappointmenttime",e)},th.deleteBooking=function(e){return Zp.post("/api/optimalvision/book/deletebookappointment?id=".concat(e))},th.unDeleteBooking=function(e){return Zp.post("/api/optimalvision/book/undeletebookappointment?id=".concat(e))},th.getBookingsByRef=function(e){return Zp.get("/api/optimalvision/book/getbookingsbyref?ref=".concat(e))},th.getBookingById=function(e){return Zp.get("/api/optimalvision/book/getbookingbyid?id=".concat(e))},th.getAllBookings=function(e){return e||(e=25),Zp.get("/api/optimalvision/book/getallbookings?limit=".concat(e))},th.getDeletedBookings=function(e){return e||(e=25),Zp.get("/api/optimalvision/book/getdeletedbookings?limit=".concat(e))},th.getTodayBookings=function(){return Zp.get("/api/optimalvision/book/gettodaybookings")},th.getOldBookings=function(e){return e||(e=25),Zp.get("/api/optimalvision/book/getoldbookings?limit=".concat(e))},th.getFutureBookings=function(e){return e||(e=25),Zp.get("/api/optimalvision/book/getfuturebookings?limit=".concat(e))},th.getRecentBookings=function(){return Zp.get("/api/optimalvision/book/getrecentbookings")},th.getRecentBookingsAll=function(e){return e||(e=25),Zp.get("/api/optimalvision/book/getrecentbookingsall?limit=".concat(e))};var nh=["Visa Medical"];Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);Object(w.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px",color:e.palette.secondary.main,fontSize:"0.9rem"},infoData:{fontWeight:"500",fontSize:"1rem"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#b80012",color:"#fff","&:hover":{background:"#d90015",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",color:"#fff",backgroundColor:"#bd0d50","&:hover":{background:"#d1175e",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},dialogTitle:{backgroundColor:e.palette.secondary.main,color:"#fff"},question:{fontSize:"1.3rem",fontWeight:"400",color:e.palette.secondary.main,marginTop:"30px"},answer:{fontSize:"1.3rem",fontWeight:"500",color:e.palette.primary.main}}}));var ah=function e(){Object(ne.a)(this,e)};ah.sendPaymentLinkTextMessage=function(e,t){return Zp.post("/api/medex/payment/sendpaymentlinktext",{medexPaymentId:e,phone:t})},ah.sendPaymentLinkEmail=function(e,t){return Zp.post("/api/medex/payment/sendpaymentlinkemail",{medexPaymentId:e,email:t})},ah.doPayment=function(e,t){return Zp.post("/api/medex/payment/dopayment",{paymentId:e,medexPaymentId:t})},ah.refundPayment=function(e){return Zp.post("/api/medex/payment/refundpayment",{medexPaymentId:e})},ah.createNewPaymentLink=function(e){return Zp.post("/api/medex/payment/createpayment",{paymentRecord:e})},ah.deletePaymentLink=function(e){return Zp.post("/api/medex/payment/deletepayment",{medexPaymentId:e})},ah.getAllPayments=function(){return Zp.get("/api/medex/payment/getallpayments")},ah.getDeletedPayments=function(){return Zp.get("/api/medex/payment/getdeletedpayments")},ah.getPaidPayments=function(){return Zp.get("/api/medex/payment/getpaidpayments")},ah.getNotPaidPayments=function(){return Zp.get("/api/medex/payment/getnotpaidpayments")},ah.getLatePayments=function(){return Zp.get("/api/medex/payment/getlatepayments")},ah.getRefundPayments=function(){return Zp.get("/api/medex/payment/getrefundpayments")},ah.getRecentPayments=function(){return Zp.get("/api/medex/payment/getrecentpayments")},ah.getPaymentById=function(e){return Zp.get("/api/medex/payment/getpaymentbyid?id=".concat(e))},ah.getTotalReceivedAmount=function(){return Zp.get("/api/medex/payment/gettotalreceivedamount")},ah.getTodayReceivedAmount=function(){return Zp.get("/api/medex/payment/gettodayreceivedamount")},ah.getTotalLinkSent=function(){return Zp.get("/api/medex/payment/gettotallinksent")},ah.getTodayLinkSent=function(){return Zp.get("/api/medex/payment/gettodaylinksent")};var oh=n(1280),ih=n(1259),ch=(n(668),Object(w.a)((function(e){return{loadingBox:{}}})),n(1290),n(1281),function e(){Object(ne.a)(this,e)});ch.registerNewPatient=function(e){return Zp.post("/api/optimalvision/patient/registernewpatient",e)},ch.updatePatient=function(e){return Zp.post("/api/optimalvision/patient/updatepatient",e)},ch.deletePatient=function(e){return Zp.post("/api/optimalvision/patient/deletepatient?id=".concat(e))},ch.unDeletePatient=function(e){return Zp.post("/api/optimalvision/patient/undeletepatient?id=".concat(e))},ch.getPatientById=function(e){return Zp.get("/api/optimalvision/patient/getpatientbyid?id=".concat(e))},ch.getPatientByPatientId=function(e){return Zp.get("/api/optimalvision/patient/getpatientbypatientid?patiantID=".concat(e))},ch.getAllPatients=function(){return Zp.get("/api/optimalvision/patient/getallpatients")},ch.getDeletedPatients=function(e){return e||(e=25),Zp.get("/api/optimalvision/patiant/getdeletedpatients")};Object(w.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},root:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},titleCenter:{width:"100%",textAlign:"center",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",borderBottom:"2px dashed ".concat(e.palette.primary.main)},eyeText:{width:"100%",textAlign:"left",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",paddingTop:"15px"}}}));var rh=n(221),lh=n.n(rh),sh=n(277),dh=n.n(sh),bh=n(278),uh=n.n(bh),jh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));function ph(e){var t=e.inputRef,n=e.onChange,o=Object(lt.a)(e,["inputRef","onChange"]);return Object(a.jsx)(Rn.a,Object(N.a)(Object(N.a)({},o),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:""}))}Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function hh(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function gh(e){var t=jh(),n=i.a.useRef(null),c=i.a.useContext(C),r=Object(l.a)(c,2),s=(r[0],r[1]),d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=Object(o.useState)(""),h=Object(l.a)(p,2),g=h[0],f=h[1],x=Object(o.useState)(!1),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(""),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(!1),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(!1),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=i.a.useState(!1),X=Object(l.a)(Y,2),$=X[0],Q=X[1],ee=i.a.useState(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=i.a.useState(""),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=i.a.useState(""),se=Object(l.a)(le,2),de=se[0],be=se[1],ue=i.a.useState(""),je=Object(l.a)(ue,2),pe=je[0],he=je[1],ge=i.a.useState(""),fe=Object(l.a)(ge,2),xe=fe[0],me=fe[1],Oe=i.a.useState(null),ye=Object(l.a)(Oe,2),ke=ye[0],ve=ye[1],Ce=i.a.useState(null),Se=Object(l.a)(Ce,2),Be=Se[0],Te=Se[1],Ne=function(){u||(e.handleClose(),f(""),w(""),be(""),re(""),me(""),he(""),ve(null),Te(null),y(!1),I(!1),W(!1),U(!1),j(!1),Q(!1),ae(!1))},we=function(){var e=Object(T.a)(B.a.mark((function e(){var t,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,j(!0),t={amount:g,fullname:S,description:xe,notes:pe},e.next=7,ah.createNewPaymentLink(t);case 7:(a=e.sent)&&a.data&&"OK"===a.data.status&&(o=a.data.payment,ve(Re(o._id)),Te(o._id),s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),n.current.scrollIntoView({behavior:"smooth",block:"start"})),j(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),j(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=!1;return(!g||0===g.trim().length||parseFloat(g)<=0)&&(y(!0),e=!0),S&&0!==S.trim().length||(I(!0),e=!0),!e},Re=function(e){return"https://londonmedicalclinic.co.uk/medicalexpressclinic/pay/".concat(e)},Le=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de&&!(de.length<3)&&Io.validate(de)){e.next=3;break}return W(!0),e.abrupt("return");case 3:return e.prev=3,j(!0),e.next=7,ah.sendPaymentLinkEmail(Be,de);case 7:(t=e.sent)&&t.data&&"OK"===t.data.status&&(s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),Q(!0)),j(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),j(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce&&!(ce.trim().length<10)){e.next=3;break}return U(!0),e.abrupt("return");case 3:return e.prev=3,j(!0),e.next=7,ah.sendPaymentLinkTextMessage(Be,ce);case 7:(t=e.sent)&&t.data&&"OK"===t.data.status&&(s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),ae(!0)),j(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),j(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:Ne,PaperComponent:hh,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(lh.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","Create New Payment Link"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsxs)(K.a,{container:!0,justify:"space-between",spacing:2,alignItems:"flex-start",style:{marginBottom:"20px"},children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ke||u,autoFocus:!0,error:O,label:"Amount",value:g,fullWidth:!0,required:!0,onChange:function(e){f(e.target.value),y(!1)},name:"product-price",id:"product-price-id",InputProps:{inputComponent:ph,startAdornment:Object(a.jsx)(H.a,{position:"start",children:"\xa3"})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ke||u,fullWidth:!0,error:A,label:"Customer/Payer Name",value:S,required:!0,onChange:function(e){w(e.target.value),I(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ke||u,fullWidth:!0,label:"Description",value:xe,onChange:function(e){me(e.target.value)},name:"description",id:"description-id",helperText:"This will be shown to the users at payment time.",autoComplete:"none"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{disabled:null!==ke||u,fullWidth:!0,label:"Notes",value:pe,onChange:function(e){he(e.target.value)},name:"notes",id:"notes-id",helperText:"This is just for your use, it will not be shown to the users.",autoComplete:"none"})}),ke&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("div",{style:{fontSize:"1rem",fontWeight:"500",marginBottom:"5px",marginTop:"5px",color:"#333"},children:"Payment Link URL :"}),Object(a.jsxs)("div",{style:{width:"100%",overflowWrap:"break-word"},ref:n,children:[Object(a.jsx)(Z.a,{style:{fontSize:"1rem",fontWeight:"500"},href:ke,target:"_blank",rel:"noopener",children:ke}),Object(a.jsx)("span",{children:Object(a.jsx)(Ot.a,{title:"COPY LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText(ke)},"aria-label":"delete",className:t.margin,size:"small",children:Object(a.jsx)(yn.a,{style:{color:"#bf9b30",fontSize:"1.3rem",marginLeft:"10px"}})})})})]})]}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,error:E,label:"Customer Email Address",value:de,onChange:function(e){be(e.target.value),Io.validate(e.target.value)&&W(!1)},name:"email",id:"email-id",autoComplete:"none",variant:"outlined",placeholder:"Enter customer email address",InputProps:$?{endAdornment:Object(a.jsxs)(H.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Email Sent"}),Object(a.jsx)(nn.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsx)(H.a,{position:"start",children:Object(a.jsx)(dh.a,{style:{color:"#05acb2"}})})}:{startAdornment:Object(a.jsx)(H.a,{position:"start",children:Object(a.jsx)(dh.a,{style:{color:"#05acb2"}})})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:u,fullWidth:!0,onClick:Le,variant:"contained",color:"primary",children:"Send Link With Email"})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,error:G,label:"Customer Mobile Number",value:ce,onChange:function(e){re(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none",variant:"outlined",placeholder:"1234567891",helperText:"* Please enter only the mobile number (10 numbers) without the country code. Just UK numbers are accepted.",InputProps:ne?{endAdornment:Object(a.jsxs)(H.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Text MSG Sent"}),Object(a.jsx)(nn.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsxs)(H.a,{position:"start",children:[Object(a.jsx)(uh.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}:{startAdornment:Object(a.jsxs)(H.a,{position:"start",children:[Object(a.jsx)(uh.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:u,fullWidth:!0,onClick:Pe,variant:"contained",color:"primary",children:"Send Link With Text Message"})})]})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:Ne,style:{width:"100px"},disabled:u,children:"back"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:null!==ke||u,onClick:we,variant:"contained",color:"primary",children:"Create Link"})})]})})]})})})}var fh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+999,color:"#fff"},itemLabel:{color:"#555",fontWeight:"500",fontSize:"1rem"},itemData:{color:e.palette.primary.main,fontWeight:"600",fontSize:"1rem"},TextSecondary:{color:e.palette.secondary.main}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function xh(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function mh(e){var t=fh(),n=i.a.useRef(null),c=i.a.useContext(C),r=Object(l.a)(c,2),s=(r[0],r[1]),d=Object(o.useState)(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=Object(o.useState)(""),h=Object(l.a)(p,2),g=(h[0],h[1]),f=Object(o.useState)(!1),x=Object(l.a)(f,2),m=(x[0],x[1]),O=i.a.useState(""),y=Object(l.a)(O,2),k=(y[0],y[1]),v=i.a.useState(!1),S=Object(l.a)(v,2),w=(S[0],S[1]),D=i.a.useState(!1),P=Object(l.a)(D,2),A=P[0],I=P[1],_=i.a.useState(!1),F=Object(l.a)(_,2),E=F[0],W=F[1],M=i.a.useState(""),z=Object(l.a)(M,2),G=z[0],U=z[1],Y=i.a.useState(""),X=Object(l.a)(Y,2),$=X[0],Q=X[1],ee=i.a.useState(""),te=Object(l.a)(ee,2),ne=(te[0],te[1]),ae=i.a.useState(""),oe=Object(l.a)(ae,2),ie=(oe[0],oe[1]),ce=i.a.useState(null),re=Object(l.a)(ce,2),le=re[0],se=re[1],de=i.a.useState(!1),be=Object(l.a)(de,2),ue=be[0],je=be[1],pe=i.a.useState(!1),he=Object(l.a)(pe,2),ge=he[0],fe=he[1],xe=i.a.useState(!1),me=Object(l.a)(xe,2),Oe=me[0],ye=me[1],ke=i.a.useState(!1),ve=Object(l.a)(ke,2),Ce=ve[0],Se=ve[1],Be=i.a.useState(null),Te=Object(l.a)(Be,2),Ne=Te[0],we=Te[1],De=i.a.useState(!1),Re=Object(l.a)(De,2),Le=Re[0],Ae=Re[1],Ie=function(){Ae(!1)},_e=i.a.useState(!1),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=function(){We(!1)};i.a.useEffect((function(){e.payment&&e.open&&(se(Ge(e.payment._id)),Q(e.payment.email||""),U(e.payment.phone||""))}),[e.payment,e.open]);var ze=function(){u||(e.handleClose(),g(""),k(""),Q(""),U(""),ie(""),ne(""),se(null),we(null),m(!1),w(!1),I(!1),W(!1),j(!1),je(!1),ye(!1),We(!1),Ae(!1),Se(!1),fe(!1))},Ge=function(e){return"https://londonmedicalclinic.co.uk/medicalexpressclinic/pay/".concat(e)},He=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($&&!($.length<3)&&Io.validate($)){t.next=3;break}return I(!0),t.abrupt("return");case 3:return t.prev=3,j(!0),t.next=7,ah.sendPaymentLinkEmail(e.payment._id,$);case 7:(n=t.sent)&&n.data&&"OK"===n.data.status&&(s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),je(!0)),j(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),j(!1);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}(),Ue=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),t.next=4,ah.refundPayment(e.payment._id);case 4:n=t.sent,j(!1),We(!1),n&&n.data&&"OK"===n.data.status&&(ye(!0),we(new Date),s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),j(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),Ye=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),t.next=4,ah.deletePaymentLink(e.payment._id);case 4:n=t.sent,j(!1),Ae(!1),n&&n.data&&"OK"===n.data.status&&(Se(!0),s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),j(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),Ve=function(){var t=Object(T.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G&&!(G.trim().length<10)){t.next=3;break}return W(!0),t.abrupt("return");case 3:return t.prev=3,j(!0),t.next=7,ah.sendPaymentLinkTextMessage(e.payment._id,G);case 7:(n=t.sent)&&n.data&&"OK"===n.data.status&&(s((function(e){return Object(N.a)(Object(N.a)({},e),{},{paymentDialogDataChanged:!e.paymentDialogDataChanged})})),fe(!0)),j(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),j(!1);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:e.payment&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(Ht.a,{maxWidth:"sm",open:e.open,onClose:ze,PaperComponent:xh,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",style:{position:"relative"},children:[Object(a.jsxs)("div",{style:{position:"absolute",top:"15px"},children:[e.payment.paymentInfo&&!e.payment.refund&&!Oe&&Object(a.jsx)(Ot.a,{title:"Successful Payment",children:Object(a.jsx)(tt.a,{style:{color:"#009c39",fontSize:"2.5rem"}})}),e.payment.paymentInfo&&(e.payment.refund||Oe)&&Object(a.jsx)(Ot.a,{title:"Refunded Payment",children:Object(a.jsx)(Ze.a,{style:{color:"#f06400",fontSize:"2.5rem"}})})]}),Object(a.jsx)("div",{style:{position:"absolute",top:"15px",right:"15px"},children:(e.payment.deleted||Ce)&&Object(a.jsx)(Ot.a,{title:"Deleted Payment",children:Object(a.jsx)(Pe.a,{style:{color:"#d40000",fontSize:"2.5rem"}})})}),Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(lh.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","Payment Link Info"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{style:e.payment.deleted||Ce?{backgroundColor:"#bbb"}:{},children:Object(a.jsxs)(K.a,{container:!0,justify:"space-between",spacing:2,alignItems:"flex-start",style:{marginBottom:"20px"},children:[e.payment.paymentInfo&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#009c39",marginRight:"10px"},children:" Square Ref # : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#009c39"},children:JSON.parse(e.payment.paymentInfo).id})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#009c39",marginRight:"10px"},children:" Payment done at : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#009c39"},children:vn()(e.payment.paymentTimeStamp,"dddd, mmmm dS, yyyy, h:MM:ss TT")})]})]}),e.payment.paymentInfo&&!e.payment.refund&&!Oe&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){We(!0)},children:"Refund Payment"})}),e.payment.paymentInfo&&(e.payment.refund||Oe)&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"600",textAlign:"left",color:"#f06400"},children:"Payment has been Refunded."})}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,style:{color:"#f06400",marginRight:"10px"},children:" Refund done at : "}),Object(a.jsx)("span",{className:t.itemData,style:{color:"#f06400"},children:vn()(e.payment.refundTimeStamp||Ne,"dddd, mmmm dS, yyyy, h:MM:ss TT")})]})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Amount: "}),Object(a.jsx)("span",{className:t.itemData,children:"\xa3".concat(e.payment.amount.toLocaleString("en-GB"))})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Customer/Payer Name: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.fullname||"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Description: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.description||"-"})]}),Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("span",{className:t.itemLabel,children:" Notes: "}),Object(a.jsx)("span",{className:t.itemData,children:e.payment.notes||"-"})]}),le&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{item:!0,xs:12,children:[Object(a.jsx)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#333"},children:"Payment Link URL :"}),Object(a.jsxs)("div",{style:{width:"100%",overflowWrap:"break-word"},ref:n,children:[Object(a.jsx)(Z.a,{style:{fontSize:"1rem",fontWeight:"500"},href:le,target:"_blank",rel:"noopener",children:le}),Object(a.jsx)("span",{children:Object(a.jsx)(Ot.a,{title:"COPY LINK TO CLIPBOARD",children:Object(a.jsx)(J.a,{onClick:function(){navigator.clipboard.writeText(le)},"aria-label":"delete",className:t.margin,size:"small",children:Object(a.jsx)(yn.a,{style:{color:"#bf9b30",fontSize:"1.3rem",marginLeft:"10px"}})})})})]})]}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(L.a,{fullWidth:!0,error:A,label:"Customer Email Address",value:$,onChange:function(e){Q(e.target.value)},name:"email",id:"email-id",autoComplete:"none",variant:"outlined",placeholder:"Enter customer email address",InputProps:ue||e.payment.emailSent?{endAdornment:Object(a.jsxs)(H.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Email Sent"}),Object(a.jsx)(nn.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsx)(H.a,{position:"start",children:Object(a.jsx)(dh.a,{style:{color:"#05acb2"}})})}:{startAdornment:Object(a.jsx)(H.a,{position:"start",children:Object(a.jsx)(dh.a,{style:{color:"#05acb2"}})})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:u||e.payment.paymentInfo||e.payment.refund||e.payment.deleted,fullWidth:!0,onClick:He,variant:"contained",color:"primary",children:"Send Link With Email"})}),Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(L.a,{fullWidth:!0,error:E,label:"Customer Mobile Number",value:G,onChange:function(e){U(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none",variant:"outlined",placeholder:"1234567891",helperText:"* Please enter only the mobile number (10 numbers) without the country code. Just UK numbers are accepted.",InputProps:ge||e.payment.textSent?{endAdornment:Object(a.jsxs)(H.a,{position:"end",children:[Object(a.jsx)("span",{style:{marginRight:"10px",color:"#009c39",fontSize:"1rem",fontWeight:"500"},children:"Text MSG Sent"}),Object(a.jsx)(nn.a,{style:{marginRight:"10px",color:"#009c39",fontSize:"1.6rem"}})]}),startAdornment:Object(a.jsxs)(H.a,{position:"start",children:[Object(a.jsx)(uh.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}:{startAdornment:Object(a.jsxs)(H.a,{position:"start",children:[Object(a.jsx)(uh.a,{style:{color:"#05acb2"}}),Object(a.jsx)("span",{style:{color:"#05acb2"},children:" (+44) "})]})}})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(R.a,{disabled:u||e.payment.paymentInfo||e.payment.refund||e.payment.deleted,fullWidth:!0,onClick:Ve,variant:"contained",color:"primary",children:"Send Link With Text Message"})}),!e.payment.deleted&&!Ce&&Object(a.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(a.jsx)(R.a,{onClick:function(){return Ae(!0)},variant:"contained",fullWidth:!0,color:"primary",style:{backgroundColor:"#c70000",color:"#fff"},disabled:u,children:"Delete This Record"})})]})]})}),Object(a.jsx)($t.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:ze,style:{width:"100px"},disabled:u,children:"close"})})})}),Object(a.jsxs)(Ht.a,{open:Ee,onClose:Me,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#bf0000"},id:"alert-dialog-title",children:"Refund Deposit"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#333",fontWeight:"400"},id:"alert-dialog-description",children:"Are you sure you want to refund this payment?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Me,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ue,color:"secondary",style:{fontWeight:"600"},variant:"contained",autoFocus:!0,children:"Yes, Refund Payment"})]})]}),Object(a.jsxs)(Ht.a,{open:Le,onClose:Ie,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ut.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete Record"}),Object(a.jsx)(Vt.a,{children:Object(a.jsx)(Xt.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:"Are you sure you want to delete this record?"})}),Object(a.jsxs)($t.a,{children:[Object(a.jsx)(R.a,{onClick:Ie,color:"default",children:"Back"}),Object(a.jsx)(R.a,{onClick:Ye,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this record"})]})]})]}),Object(a.jsx)(V.a,{className:t.backdrop,open:u,children:Object(a.jsx)(q.a,{color:"inherit"})})]})})}var Oh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),yh=function(e){return"paid"===e?"Successful Payments":"refund"===e?"Refunded Payments":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"notpaid"===e?"Not Yet Paid":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Deleted Records":"late"===e?"4 Hours Late":"Payment Links"};function kh(e){var t=Oh(),n=[{field:"_id",headerName:" ",width:120,renderCell:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(J.a,{color:"primary",onClick:function(t){return _(t,e.value)},children:Object(a.jsx)(ye.a,{})}),e.getValue("paymentInfo")&&!e.getValue("refund")&&Object(a.jsx)(tt.a,{style:{color:"#009c39",fontSize:"1.6rem"}}),e.getValue("paymentInfo")&&e.getValue("refund")&&Object(a.jsx)(Ze.a,{style:{color:"#f06400",fontSize:"1.6rem"}}),!e.getValue("paymentInfo")&&(e.getValue("emailSent")||e.getValue("textSent"))&&Object(a.jsx)(nn.a,{style:{color:"#008082",fontSize:"1.6rem"}})]})}},{field:"timeStamp",headerName:"Created at",width:180,valueFormatter:function(e){return P(e.value)}},{field:"amount",headerName:"Amount",width:150,valueFormatter:function(e){return"\xa3".concat(e.value.toLocaleString("en-GB"))}},{field:"fullname",headerName:"Customer Name",width:200},{field:"description",headerName:"Description",width:250},{field:"email",headerName:"Email",width:150},{field:"phone",headerName:"Telephone",width:150},{field:"notes",headerName:"Notes",width:300}],c=i.a.useContext(C),r=Object(l.a)(c,2),s=r[0],d=(r[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(null),h=Object(l.a)(p,2),g=(h[0],h[1]),f=i.a.useState(null),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=(k[0],k[1],Object(o.useState)(nh[0])),S=Object(l.a)(v,2),B=(S[0],S[1],i.a.useState("")),T=Object(l.a)(B,2),w=T[0],D=T[1],P=(Object(o.useRef)(),function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),A=function(){var t=ah.getAllPayments;"deleted"===e.date?t=ah.getDeletedPayments:"paid"===e.date?t=ah.getPaidPayments:"refund"===e.date?t=ah.getRefundPayments:"notpaid"===e.date?t=ah.getNotPaidPayments:"late"===e.date&&(t=ah.getLatePayments),j({bookings:[],cachedBookings:[],isFetching:!0});t().then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});j({bookings:Object(Et.a)(e.data.result),cachedBookings:Object(Et.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){A()}),[e.date]),Object(o.useEffect)((function(){if(w&&w.trim().length>0){var e=u.cachedBookings.filter((function(e){var t;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(w.toLowerCase()))>=0}));j({bookings:Object(Et.a)(e),cachedBookings:u.cachedBookings,isFetching:!1})}else j({bookings:Object(Et.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[w]),Object(o.useEffect)((function(){A()}),[s.paymentDialogDataChanged]);var I,_=function(e,t){var n=u.bookings.find((function(e){return e._id===t}));n&&(O(n),ie(!0))},F=i.a.useState(1),E=Object(l.a)(F,2),W=E[0],M=E[1],z=i.a.useState(null),G=Object(l.a)(z,2),H=(G[0],G[1]),U=i.a.useState(!1),Y=Object(l.a)(U,2),V=Y[0],q=Y[1],X=i.a.useState(""),$=Object(l.a)(X,2),Q=($[0],$[1]),Z=i.a.useState(""),ee=Object(l.a)(Z,2),te=(ee[0],ee[1]),ne=i.a.useState(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1];return Object(a.jsxs)(i.a.Fragment,{children:[u.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,md:4,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(I=e.date,"paid"===I?Object(a.jsx)(tt.a,{style:{fontSize:"2.2rem"}}):"refund"===I?Object(a.jsx)(Ze.a,{style:{fontSize:"2.2rem"}}):"future"===I?Object(a.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===I?Object(a.jsx)(ve.a,{style:{fontSize:"2.2rem"}}):"notpaid"===I?Object(a.jsx)(at.a,{style:{fontSize:"2.2rem"}}):"completed"===I?Object(a.jsx)(Te.a,{style:{fontSize:"2.2rem"}}):"positive"===I?Object(a.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):"deleted"===I?Object(a.jsx)(Pe.a,{style:{fontSize:"2.2rem"}}):"late"===I?Object(a.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):Object(a.jsx)(lh.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"#444",marginTop:"-5px"},children:[" ",yh(e.date)," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Ot.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){D(""),A()},children:Object(a.jsx)(Jt.a,{})})})})]})})}),"all"===e.date&&Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)("div",{style:{paddingBottom:"10px"},children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){H(null),Q("Register New Patient"),te("Save"),q(!0)},startIcon:Object(a.jsx)(kr.a,{}),children:"Create New Link"})})}),u.isFetching&&Object(a.jsx)("div",{className:t.HideNowRows}),Object(a.jsx)(K.a,{item:!0,md:3,children:Object(a.jsx)(L.a,{variant:"standard",value:w,onChange:function(e){D(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(Wt.a,{rows:u.bookings,columns:n,autoPageSize:!0,page:W,onPageChange:function(e){M(e.page)},onSelectionChange:function(e){e.length>0&&g(e.rows[0])}})}),Object(a.jsx)(gh,{open:V,handleClose:function(){q(!1)}}),Object(a.jsx)(mh,{payment:m,open:oe,handleClose:function(){ie(!1)}})]})}function vh(e){return Object(a.jsx)(_.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Ch(e,t){return{time:e,amount:t}}Ch("09:00",0),Ch("10:00",0),Ch("11:00",0),Ch("12:00",0),Ch("13:00",0),Ch("14:00",0),Ch("15:00",0),Ch("16:00",0),Ch("17:00",0),Ch("18:00",void 0);Object(w.a)({depositContext:{flex:1},bookingBox:{display:"flex",margin:"5px",padding:"5px",maxWidth:"90px",minHeight:"30px",border:"1px solid #eee",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa",borderRadius:"5px",textAlign:"center",alignItems:"center",justifyItems:"center",align:"center","&:hover":{background:"#3f51b5",color:"#ebedf7"}}});var Sh=Object(w.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Bh(){Sh();var e=i.a.useContext(C),t=Object(l.a)(e,2),n=(t[0],t[1],i.a.useState({bookings:[],isFetching:!1})),c=Object(l.a)(n,2),r=c[0],s=c[1],d=i.a.useState(!1),b=Object(l.a)(d,2),u=b[0],j=b[1],p=i.a.useState(!1),h=Object(l.a)(p,2),g=h[0],f=h[1],x=function(){s({bookings:r.bookings,isFetching:!0}),f(!0),ah.getRecentPayments().then((function(e){f(!1),s({bookings:e.data.result,isFetching:!1})})).catch((function(e){f(!1),console.log(e),s({bookings:r.bookings.result,isFetching:!1})}))};Object(o.useEffect)((function(){x()}),[u]),Object(o.useEffect)((function(){x();var e=setInterval((function(){j((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]);var m=function(e){var t=kn(new Date,"yyyy-mm-dd"),n=kn(e,"yyyy-mm-dd");return kn(e,t===n?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")};return Object(a.jsxs)(i.a.Fragment,{children:[g&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(vh,{children:"Recent Payments Received"}),Object(a.jsxs)(xa.a,{size:"small",children:[Object(a.jsx)(ya.a,{children:Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:"Recived at"}),Object(a.jsx)(Oa.a,{children:"Amount"}),Object(a.jsx)(Oa.a,{children:"Customer"}),Object(a.jsx)(Oa.a,{children:"Email"}),Object(a.jsx)(Oa.a,{children:"Tel"}),Object(a.jsx)(Oa.a,{children:"Desctiption"})]})}),Object(a.jsx)(ma.a,{children:r.bookings.map((function(e){return Object(a.jsxs)(ka.a,{children:[Object(a.jsx)(Oa.a,{children:m(e.paymentTimeStamp)}),Object(a.jsx)(Oa.a,{style:{fontWeight:"600"},children:"\xa3".concat(e.amount.toLocaleString("en-GB"))}),Object(a.jsx)(Oa.a,{children:e.fullname}),Object(a.jsx)(Oa.a,{children:e.email}),Object(a.jsx)(Oa.a,{children:e.phone}),Object(a.jsx)(Oa.a,{children:e.description})]},e._id)}))})]})]})}var Th=Object(w.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function Nh(){var e=Th(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(!1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,ah.getTotalReceivedAmount();case 4:t=e.sent,r(t.data.result),g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[b]),Object(o.useEffect)((function(){f();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(vh,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Total Money Received"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==c&&Object(a.jsx)("div",{className:e.countLabel,children:"\xa3".concat(c.toLocaleString("en-GB"))})})]})})]})})}var wh=Object(w.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function Dh(){var e=wh(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(!1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,ah.getTodayReceivedAmount();case 4:t=e.sent,r(t.data.result),g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[b]),Object(o.useEffect)((function(){f();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(vh,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Today Money Received"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==c&&Object(a.jsx)("div",{className:e.countLabel,children:"\xa3".concat(c.toLocaleString("en-GB"))})})]})})]})})}var Rh=Object(w.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},Icon:{fontSize:"2rem"}}}));function Lh(){var e=Rh(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(!1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,ah.getTodayLinkSent();case 4:t=e.sent,r(t.data.result),g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[b]),Object(o.useEffect)((function(){f();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(vh,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"Today Payment Links Sent"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==c&&Object(a.jsx)("div",{className:e.countLabel,children:c})})]})})]})})}var Ph=Object(w.a)((function(e){return{countLabel:{fontSize:"2rem",color:e.palette.secondary.main},countLabelRed:{fontSize:"2rem",color:"red"},TitleRed:{color:"red"}}}));function Ah(){var e=Ph(),t=i.a.useState(null),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),d=Object(l.a)(s,2),b=d[0],u=d[1],j=i.a.useState(!1),p=Object(l.a)(j,2),h=p[0],g=p[1],f=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,ah.getLatePayments();case 4:n=e.sent,r((null===(t=n.data.result)||void 0===t?void 0:t.length)||0),g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[b]),Object(o.useEffect)((function(){f();var e=setInterval((function(){u((function(e){return!e}))}),3e4);return function(){clearInterval(e)}}),[]),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{style:{position:"relative"},children:[h&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(Mt.a,{color:"primary"})}),Object(a.jsx)(vh,{children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},className:0===c?e.Title:e.TitleRed,children:"4 Hours Late Payments"})}),Object(a.jsx)(K.a,{item:!0}),Object(a.jsx)(K.a,{item:!0,children:null!==c&&Object(a.jsx)("div",{className:0===c?e.countLabel:e.countLabelRed,children:c})})]})})]})})}var Ih=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function _h(){var e=Ih(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight),Object(Q.a)(e.paper,e.fixedHeightSmall)),c=Object(te.d)(),r="payment";return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Nh,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Dh,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(W.a,{className:o,onClick:function(){c.push(re("/".concat(Cg(r,Sg(r,"latepaymentsTable")))))},style:{cursor:"pointer"},children:Object(a.jsx)(Ah,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,lg:3,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(Lh,{})})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:e.paper,style:{minHeight:"250px"},children:Object(a.jsx)(Bh,{})})})]})})}var Fh=oe.a.create({baseURL:ce,headers:{Authorization:ie,"Content-Type":"application/json"}}),Eh=function e(){Object(ne.a)(this,e)};Eh.searchAllInvoicesByName=function(e){return Fh.post("/api/medex/invoice/searchallinvoicesbyname",{search:{name:e}})},Eh.searchAllInvoicesByDate=function(e){return Fh.post("/api/medex/invoice/searchallinvoicesbydate",{search:e})},Eh.getInvoiceReports=function(){return Fh.get("/api/medex/invoice/getinvoicereports")},Eh.addNewBooking=function(e){return Fh.post("/api/gp/book/addnewbooking",e)},Eh.sendRegFormEmail=function(e){return Fh.post("/api/gp/book/sendregformemail?id=".concat(e))},Eh.payBooking=function(e,t,n,a){return Fh.post("/api/gp/book/paybooking?id=".concat(e,"&paymentmethod=").concat(n,"&corporate=").concat(a,"&price=").concat(t))},Eh.unPayBooking=function(e){return Fh.post("/api/gp/book/unpaybooking?id=".concat(e))},Eh.getShouldRefundsCount=function(){return Fh.get("/api/gp/book/getshouldrefundscount?")},Eh.refundBooking=function(e){return Fh.post("/api/gp/payment/refundpayment",{bookingId:e})},Eh.getBookingsStatsByDateStr=function(e){return Fh.get("/api/gp/book/getbookingsstatsbydatestr?date=".concat(e))},Eh.getBookingsCountByDateStr=function(e){return Fh.get("/api/gp/book/getbookingscountbydatestr?date=".concat(e))},Eh.getAllBookingsCountAll=function(){return Fh.get("/api/gp/book/getallbookingscountall")},Eh.getBookingsCountByDateStrandTime=function(e,t,n){return Fh.get("/api/gp/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Eh.getBookingsByDateStrandTime=function(e,t){return Fh.get("/api/gp/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Eh.getAllBookingsCountByDateStr=function(e){return Fh.get("/api/admin/book/getallbookingscountbydatestr?date=".concat(e))},Eh.getAllBookingsCountByDateStrandTime=function(e,t,n){return Fh.get("/api/admin/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:n.token})},Eh.getAllBookingsByDateStrandTime=function(e,t){return Fh.get("/api/admin/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Eh.changeBackToBookingMade=function(e){return Fh.post("/api/gp/book/changebacktobookingmade?id=".concat(e))},Eh.changeToPatientAttended=function(e){return Fh.post("/api/gp/book/changetopatientattended?id=".concat(e))},Eh.updateBooking=function(e){return Fh.post("/api/gp/book/updatebookappointment",e)},Eh.updateBookingTime=function(e){return Fh.post("/api/gp/book/updatebookappointmenttime",e)},Eh.deleteBooking=function(e){return Fh.post("/api/gp/book/deletebookappointment?id=".concat(e))},Eh.unDeleteBooking=function(e){return Fh.post("/api/gp/book/undeletebookappointment?id=".concat(e))},Eh.getBookingsByRef=function(e){return Fh.get("/api/admin/book/getbookingsbyref?ref=".concat(e))},Eh.getBookingById=function(e){return Fh.get("/api/admin/book/getbookingbyid?id=".concat(e))},Eh.getAllBookings=function(e){return e||(e=25),Fh.get("/api/admin/book/getallbookings?limit=".concat(e))},Eh.searchAllBookings=function(e){return Fh.post("/api/admin/book/searchallbookings",{filter:e})},Eh.getDeletedBookings=function(e){return e||(e=25),Fh.get("/api/admin/book/getdeletedbookings?limit=".concat(e))},Eh.getTodayBookings=function(){return Fh.get("/api/admin/book/gettodaybookings")},Eh.getOldBookings=function(e){return e||(e=25),Fh.get("/api/admin/book/getoldbookings?limit=".concat(e))},Eh.getFutureBookings=function(e){return e||(e=25),Fh.get("/api/admin/book/getfuturebookings?limit=".concat(e))},Eh.getRecentBookings=function(){return Fh.get("/api/admin/book/getrecentbookings")},Eh.getRecentBookingsAll=function(e){return e||(e=25),Fh.get("/api/admin/book/getrecentbookingsall?limit=".concat(e))};var Wh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))(Mt.a);function Mh(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function zh(e){var t=Wh(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],b=s[1],u=null,j=Object(o.useState)(u),p=Object(l.a)(j,2),h=(p[0],p[1]),g=Object(o.useState)(!1),f=Object(l.a)(g,2),x=(f[0],f[1]),m=Object(o.useState)(""),O=Object(l.a)(m,2),y=(O[0],O[1]),k=Object(o.useState)(!1),v=Object(l.a)(k,2),S=(v[0],v[1]),B=i.a.useState(null),T=Object(l.a)(B,2),w=T[0],D=T[1],P=Object(o.useState)(""),A=Object(l.a)(P,2),I=A[0],_=A[1],F=i.a.useState([]),E=Object(l.a)(F,2),W=E[0],M=E[1],z=Object(o.useState)(""),G=Object(l.a)(z,2),H=(G[0],G[1]),U=Object(o.useState)(!1),Y=Object(l.a)(U,2),J=(Y[0],Y[1]),X=i.a.useState("INVOICE ISSUANCE"),$=Object(l.a)(X,2),Q=$[0],Z=$[1],ee=i.a.useState([]),te=Object(l.a)(ee,2);te[0],te[1];Object(o.useEffect)((function(){return e.invoice?(M(e.invoice.items),_(e.invoice.notes||""),Z(e.invoice.name.toUpperCase()),D(Object(N.a)(Object(N.a)({},e.invoice.booking),{},{clinic:e.invoice.clinic}))):ne(),function(){M([])}}),[e.invoice,e.open]),Object(o.useEffect)((function(){return!e.invoice&&e.defaultCodes&&M(e.defaultCodes),function(){M([])}}),[e.defaultCodes]);var ne=function(t){d||(H(""),h(u),y(""),J(!1),x(!1),S(!1),M([]),_(""),b(!1),D(null),re(!1),e.handleClose(t))},ae=function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.price)})),t},oe=i.a.useState(!1),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1];return Object(a.jsx)(i.a.Fragment,{children:e.booking&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Ht.a,{maxWidth:"md",open:e.open,onClose:function(){return ne(!1)},PaperComponent:Mh,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Pn.a,{style:{color:"#1cb2c9",fontSize:"3rem"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{color:"#1cb2c9",paddingBottom:"10px",fontWeight:"800"},children:"".concat(Q)})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsxs)(Vt.a,{children:[Object(a.jsx)("div",{style:{height:"700px",width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"flex-start",children:[w&&Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsx)(R.a,{fullWidth:!0,onClick:function(){re(!0)},startIcon:Object(a.jsx)(ye.a,{}),color:"primary",variant:"contained",children:"Show Booking Detail ..."})}),Object(a.jsx)("div",{style:{backgroundColor:"#fff",color:"#1cb2c9",fontWeight:"500",fontSize:"0.95rem",padding:"5px 8px",marginBottom:"-15px",marginLeft:"10px",zIndex:"99",marginTop:"0px"},children:"Invoice Items"}),Object(a.jsx)("div",{style:{width:"100%",minHeight:"150px",overflowY:"scroll",border:"1px solid #ddd",borderRadius:"4px",padding:"25px",position:"relative"},children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"flex-start",spacing:2,alignItems:"flex-start",children:[Object(a.jsx)(K.a,{item:!0,style:{width:"100%",fontWeight:"500"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:"Code"}),Object(a.jsx)(K.a,{item:!0,xs:5,children:"Description"}),Object(a.jsx)(K.a,{item:!0,xs:2,children:"Price"}),Object(a.jsx)(K.a,{item:!0,xs:3})]})}),W.map((function(e,t){return Object(a.jsx)(K.a,{item:!0,style:{width:"100%"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:e.code}),Object(a.jsx)(K.a,{item:!0,xs:5,children:e.description}),Object(a.jsx)(K.a,{item:!0,xs:2,children:parseFloat(e.price).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})})}))]})})}),Object(a.jsxs)(K.a,{item:!0,style:{marginTop:"10px",width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:"30px"},children:[Object(a.jsxs)("span",{style:{fontWeight:"500",color:"#777",fontSize:"1.5rem"},children:["Grand Total :"," "]})," ",Object(a.jsxs)("span",{style:{fontWeight:"700",color:"#1cb2c9",marginLeft:"10px",fontSize:"1.5rem"},children:[" ",ae(W).toLocaleString("en-GB",{style:"currency",currency:"GBP"})," "]})]}),Object(a.jsx)(K.a,{item:!0,style:{marginTop:"10px",width:"100%"},children:Object(a.jsx)(L.a,{value:I,onChange:function(e){_(e.target.value)},multiline:!0,rows:2,helperText:"* notes will be printed on the invoice (optional)",label:"Notes",fullWidth:!0,variant:"outlined",placeholder:"enter any addional notes you want to be printed on the invoice..."})})]})}),Object(a.jsx)(V.a,{className:t.backdrop,open:d,children:Object(a.jsx)(q.a,{color:"inherit"})})]}),Object(a.jsx)($t.a,{children:Object(a.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){return ne(!1)},style:{width:"100px"},disabled:d,children:"close"})})})}),Object(a.jsx)(wc,{booking:w,open:ce,onClose:function(){re(!1)}})]})})})}var Gh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},Summary:{marginTop:"10px",padding:"15px 30px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#333",color:"#fff",fontWeight:"500",fontSize:"1rem"}}}));function Hh(e){return Object(a.jsx)(Zt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(a.jsx)(W.a,Object(N.a)({},e))})}function Uh(e){var t,n,c=Gh(),r=function(e){switch(e){case"pcr":return c.PCRLabel;case"gp":return c.GPLabel;case"gynae":return c.GynaeLabel;case"std":return c.STDLabel;case"blood":return c.BloodLabel;case"derma":return c.DermaLabel;case"screening":return c.ScreeningLabel;default:return c.DefaultLabel}},s=i.a.useState(25),d=Object(l.a)(s,2),b=(d[0],d[1],Object(o.useState)(!1)),u=Object(l.a)(b,2),j=u[0],p=u[1],h=i.a.useState(new Date((new Date).getTime()-6048e5)),g=Object(l.a)(h,2),f=g[0],x=g[1],m=i.a.useState(new Date((new Date).getTime()-864e5)),O=Object(l.a)(m,2),y=O[0],k=O[1],v=Object(o.useState)(kn(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),S=Object(l.a)(v,2),B=S[0],T=S[1],w=Object(o.useState)(kn(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(w,2),P=D[0],A=D[1],I=Object(o.useState)(!1),_=Object(l.a)(I,2),F=_[0],E=_[1],W=Object(o.useState)(!0),z=Object(l.a)(W,2),G=z[0],H=z[1],V=Object(o.useState)(!0),X=Object(l.a)(V,2),$=X[0],Q=X[1],Z=Object(o.useState)(!0),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!0),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=le[0],de=le[1],be=Object(o.useState)(!0),ue=Object(l.a)(be,2),je=ue[0],pe=ue[1],he=Object(o.useState)(!0),ge=Object(l.a)(he,2),fe=ge[0],xe=ge[1],me=Object(o.useState)(!0),Oe=Object(l.a)(me,2),ke=Oe[0],ve=Oe[1],Ce=Object(o.useState)(!0),Se=Object(l.a)(Ce,2),Be=Se[0],Te=Se[1],Ne=Object(o.useState)(!0),we=Object(l.a)(Ne,2),De=we[0],Re=we[1],Le=function(e){var t=e;return["Mr","Mrs","Miss","Ms","Dr"].forEach((function(n){0===e.indexOf("".concat(n," "))&&(t=e.substring(n.length))})),t},Pe=function(e){if(!e)return"NONE";switch(e){case"credit card":return"C/CARD";case"cash":return"CASH";case"corporate":return"CORP";default:return"OTHERS"}};n=[{field:"_id",headerName:"Invoice #",width:130,renderCell:function(e){return Object(a.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){return dt(t,e.value,e.getValue("clinic"))},children:[Object(a.jsx)("span",{style:{minWidth:"60px",color:"#00a1c5",display:"inline-block"},children:e.getValue("invoiceNumber")}),Object(a.jsx)(J.a,{color:"primary",children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"Date",width:100,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:lt(e.value)})}},{field:"grandTotal",headerName:"Fee",align:"center",width:140,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#067500"},children:parseFloat(e.value).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})}},{field:"name",headerName:"Patient Name",width:200,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:Le(e.value)})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:r(e.value),style:{fontSize:"0.8rem"},children:e.value?e.value.toUpperCase():"N/A"})}},{field:"booking.paidBy",headerName:"Payment",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:Pe(e.getValue("booking").paidBy)})}},{field:"booking.corporate",headerName:"Corporate",align:"center",width:150,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:e.getValue("booking").corporate||""})}}];var Ae=i.a.useContext(C),Ie=Object(l.a)(Ae,2),_e=(Ie[0],Ie[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(null),ze=Object(l.a)(Me,2),Ge=(ze[0],ze[1]),He=i.a.useState(null),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(!1),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=Object(o.useState)(jp[0]),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(""),it=Object(l.a)(ot,2),ct=it[0],rt=it[1],lt=(Object(o.useRef)(),function(e){return kn(e,"dd-mm-yyyy")}),st=function(){var e=Eh.searchAllInvoicesByName;We({bookings:[],cachedBookings:[],isFetching:!0});e(ct).then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});We({bookings:Object(Et.a)(e.data.result),cachedBookings:Object(Et.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))},dt=function(e,t,n){var a=Ee.bookings.find((function(e){return e._id===t}));Ve(a),Xe(!0)},bt=i.a.useState(1),ut=Object(l.a)(bt,2),jt=ut[0],pt=ut[1],ht=i.a.useState(!1),gt=Object(l.a)(ht,2),ft=gt[0],xt=gt[1],mt=function(){!ct||ct.trim().length<3?xt(!0):st()};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:4,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(L.a,{error:ft,variant:"standard",value:ct,onChange:function(e){rt(e.target.value),xt(!1)},id:"filter",label:"Patient's Name / Invoice#",helperText:"You can search the invoices by patient's name or Invoice Number ".concat(ft?"- Please Enter at least 3 characters":""),name:"filter",autoComplete:"off",style:{maxWidth:"450px"},onKeyPress:function(e){"Enter"===e.key&&mt()}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{variant:"contained",color:"primary",onClick:mt,children:"Search in the invoices"})}),Object(a.jsx)(K.a,{item:!0,children:Ee.isFetching&&Object(a.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(a.jsx)(q.a,{color:"primary"})})})]})})}),Ee.isFetching&&Object(a.jsx)("div",{className:c.HideNowRows})]}),Ee.bookings&&Ee.bookings.length>0&&Object(a.jsx)("div",{className:c.Summary,children:Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-between",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total Records :"}),Object(a.jsx)("span",{children:null===(t=Ee.bookings)||void 0===t?void 0:t.length})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total FEE :"}),Object(a.jsx)("span",{children:parseFloat(function(e){var t=0;return e.forEach((function(e){t+=e.grandTotal})),t}(Ee.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})]})}),Ee.bookings&&Ee.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"0px"},children:Object(a.jsx)(Wt.a,{rows:Ee.bookings,columns:n,autoPageSize:!0,page:jt,onPageChange:function(e){pt(e.page)},onSelectionChange:function(e){e.length>0&&Ge(e.rows[0])}})}),Object(a.jsx)(zh,{booking:Ye,invoice:Ye,open:Je,handleClose:function(){Ve(null),Xe(!1),Ze(!1)}}),Ee.bookings&&Ee.bookings.length>0&&Object(a.jsxs)(Ht.a,{maxWidth:"lg",open:j,onClose:function(){at(jp[0]),E(!1),p(!1)},PaperComponent:Hh,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Ut.a,{id:"draggable-dialog-title",children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Gn.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:Hn.a})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(a.jsx)(Yt.a,{})]}),Object(a.jsx)(Vt.a,{children:Object(a.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Kt.a,{checked:F,onChange:function(e){E(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),F&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"0px"},className:c.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:nt,onChange:function(e){at(e.target.value)},children:jp.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})})]}),Object(a.jsx)(Yn.a,{utils:Un.a,children:Object(a.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:f,onChange:function(e){x(e),T(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:y,onChange:function(e){k(e),A(kn(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(a.jsx)(Xn.a,{id:"test-table-xls-button",className:c.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(B,".").concat(P),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(K.a,{container:!0,spacing:3,children:[Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:G,onChange:function(e){H(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:$,onChange:function(e){Q(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:te,onChange:function(e){ne(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:se,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:je,onChange:function(e){pe(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:fe,onChange:function(e){xe(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:ke,onChange:function(e){ve(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:Be,onChange:function(e){Te(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(a.jsx)(K.a,{item:!0,xs:!0,children:Object(a.jsx)(U.a,{control:Object(a.jsx)(Y.a,{checked:De,onChange:function(e){Re(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(a.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(a.jsxs)("table",{className:c.table,id:"table-to-xls",children:[Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("th",{className:c.th,children:"Date"}),$&&Object(a.jsx)("th",{className:c.th,children:"Forename"}),te&&Object(a.jsx)("th",{className:c.th,children:"Surename"}),ie&&Object(a.jsx)("th",{className:c.th,children:"D.O.B"}),se&&Object(a.jsx)("th",{className:c.th,children:"Email"}),je&&Object(a.jsx)("th",{className:c.th,children:"Tel"}),fe&&Object(a.jsx)("th",{className:c.th,children:"Certificate"}),ke&&Object(a.jsx)("th",{className:c.th,children:"AntiBodyTest"}),Be&&Object(a.jsx)("th",{className:c.th,children:"Lab No."}),De&&Object(a.jsx)("th",{className:c.th,children:"Price (\xa3) "})]}),Ee.bookings.filter((function(e){return F?e.bookingDate>=B&&e.bookingDate<=P&&e.paid&&"corporate"===e.paidBy&&e.corporate===nt:e.bookingDate>=B&&e.bookingDate<=P})).map((function(e){return Object(a.jsxs)("tr",{children:[G&&Object(a.jsx)("td",{className:c.td,children:Object(dp.FormatDateFromString)(e.bookingDate)}),$&&Object(a.jsx)("td",{className:c.td,children:e.forenameCapital}),te&&Object(a.jsx)("td",{className:c.td,children:e.surnameCapital}),ie&&Object(a.jsx)("th",{className:c.th}),se&&Object(a.jsx)("td",{className:c.td,children:e.email}),je&&Object(a.jsx)("td",{className:c.td,children:e.phone}),fe&&Object(a.jsx)("td",{className:c.td,children:e.certificate?"YES":"NO"}),ke&&Object(a.jsx)("td",{className:c.td,children:e.antiBodyTest?"YES":"NO"}),Be&&Object(a.jsx)("td",{className:c.td,children:e.extRef}),De&&Object(a.jsx)("td",{className:c.td,children:up.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Yh=n(669),Vh=n.n(Yh),Kh=n(670),qh=n.n(Kh),Jh=Object(w.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},clinicTitle:{fontWeight:"600",textAlign:"center",color:e.palette.primary.main,padding:"2px 10px"},PCRLabel:{color:Nn.PCR_COLOR,fontWeight:"600",fontSize:"0.95rem"},GynaeLabel:{color:Nn.GYNAE_COLOR,fontWeight:"600",fontSize:"0.95rem"},GPLabel:{color:Nn.GP_COLOR,fontWeight:"600",fontSize:"0.95rem"},STDLabel:{color:Nn.STD_COLOR,fontWeight:"600",fontSize:"0.95rem"},BloodLabel:{color:Nn.BLOOD_COLOR,fontWeight:"600",fontSize:"0.95rem"},DermaLabel:{color:Nn.DermaLabel,fontWeight:"600",fontSize:"0.95rem"},ScreeningLabel:{color:Nn.SCREENING_COLOR,fontWeight:"600",fontSize:"0.95rem"},CorporateLabel:{color:Nn.CORPORATE_COLOR,fontWeight:"600",fontSize:"0.95rem"},DefaultLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem"},Summary:{marginTop:"10px",padding:"15px 30px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#333",color:"#fff",fontWeight:"500",fontSize:"1rem"}}}));function Xh(e){var t,n=Jh(),c=i.a.useState([]),r=Object(l.a)(c,2),s=r[0],d=r[1];i.a.useEffect((function(){u()}),[]);var b,u=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:t=e.sent,d(t),at(t[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){switch(e){case"pcr":return n.PCRLabel;case"gp":return n.GPLabel;case"gynae":return n.GynaeLabel;case"std":return n.STDLabel;case"blood":return n.BloodLabel;case"derma":return n.DermaLabel;case"screening":return n.ScreeningLabel;case"corporate":return n.CorporateLabel;default:return n.DefaultLabel}},p=i.a.useState(25),h=Object(l.a)(p,2),g=(h[0],h[1],Object(o.useState)(!1)),f=Object(l.a)(g,2),x=(f[0],f[1],i.a.useState("all")),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=v[0],w=v[1],D=i.a.useState(null),L=Object(l.a)(D,2),P=L[0],A=L[1],I=i.a.useState(!1),_=Object(l.a)(I,2),F=_[0],E=_[1],W=i.a.useState(!1),G=Object(l.a)(W,2),H=G[0],Y=G[1],V=Object(o.useState)(""),X=Object(l.a)(V,2),$=X[0],Q=X[1],Z=Object(o.useState)(""),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(o.useState)(!1),oe=Object(l.a)(ae,2),ie=oe[0],ce=oe[1],re=Object(o.useState)(!0),le=Object(l.a)(re,2),se=(le[0],le[1],Object(o.useState)(!0)),de=Object(l.a)(se,2),be=(de[0],de[1],Object(o.useState)(!0)),ue=Object(l.a)(be,2),je=(ue[0],ue[1],Object(o.useState)(!0)),pe=Object(l.a)(je,2),he=(pe[0],pe[1],Object(o.useState)(!0)),ge=Object(l.a)(he,2),fe=(ge[0],ge[1],Object(o.useState)(!0)),xe=Object(l.a)(fe,2),me=(xe[0],xe[1],Object(o.useState)(!0)),Oe=Object(l.a)(me,2),ke=(Oe[0],Oe[1],Object(o.useState)(!0)),ve=Object(l.a)(ke,2),Ce=(ve[0],ve[1],Object(o.useState)(!0)),Se=Object(l.a)(Ce,2),Be=(Se[0],Se[1],Object(o.useState)(!0)),Te=Object(l.a)(Be,2),Ne=(Te[0],Te[1],function(e){var t=e;return["Mr","Mrs","Miss","Ms","Dr"].forEach((function(n){0===e.indexOf("".concat(n," "))&&(t=e.substring(n.length))})),t}),we=function(e){if(!e)return"NONE";switch(e){case"credit card":return"C/CARD";case"cash":return"CASH";case"corporate":return"CORP";default:return"OTHERS"}};b=[{field:"_id",headerName:"Invoice #",width:130,renderCell:function(e){return Object(a.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){return lt(t,e.value,e.getValue("clinic"))},children:[Object(a.jsx)("span",{style:{minWidth:"60px",color:"#00a1c5",display:"inline-block"},children:e.getValue("invoiceNumber")}),Object(a.jsx)(J.a,{color:"primary",children:Object(a.jsx)(ye.a,{})})]})}},{field:"timeStamp",headerName:"Date",width:100,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:ct(e.value)})}},{field:"grandTotal",headerName:"Fee",align:"center",width:140,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#067500"},children:parseFloat(e.value).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})}},{field:"name",headerName:"Patient Name",width:200,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"500"},children:Ne(e.value)})}},{field:"clinic",headerName:"Clinic",align:"center",width:90,renderCell:function(e){return Object(a.jsx)("span",{className:j(e.value),style:{fontSize:"0.8rem"},children:e.value?e.value.toUpperCase():"N/A"})}},{field:"booking.paidBy",headerName:"Payment",align:"center",width:110,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:we(e.getValue("booking").paidBy)})}},{field:"booking.corporate",headerName:"Corporate",align:"center",width:150,renderCell:function(e){return Object(a.jsx)("span",{style:{fontSize:"0.8rem"},children:e.getValue("booking").corporate||""})}}];var De=i.a.useState(!1),Re=Object(l.a)(De,2),Le=Re[0],Pe=Re[1],Ae=i.a.useContext(C),Ie=Object(l.a)(Ae,2),_e=(Ie[0],Ie[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),Fe=Object(l.a)(_e,2),Ee=Fe[0],We=Fe[1],Me=i.a.useState(null),ze=Object(l.a)(Me,2),Ge=(ze[0],ze[1]),He=i.a.useState(null),Ue=Object(l.a)(He,2),Ye=Ue[0],Ve=Ue[1],Ke=i.a.useState(!1),qe=Object(l.a)(Ke,2),Je=qe[0],Xe=qe[1],$e=i.a.useState(!1),Qe=Object(l.a)($e,2),Ze=(Qe[0],Qe[1]),et=Object(o.useState)(s[0]),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],ot=i.a.useState(""),it=Object(l.a)(ot,2),ct=(it[0],it[1],Object(o.useRef)(),function(e){return kn(e,"dd-mm-yyyy")}),rt=function(){var e=Eh.searchAllInvoicesByDate;We({bookings:[],cachedBookings:[],isFetching:!0});e({from:S,until:P,clinic:O,corporate:ie?nt:null}).then((function(e){for(var t=0;t<e.data.result.length;t++)e.data.result[t]=Object(N.a)(Object(N.a)({},e.data.result[t]),{},{id:t+1});We({bookings:Object(Et.a)(e.data.result),cachedBookings:Object(Et.a)(e.data.result),isFetching:!1})})).catch((function(e){console.error(e)}))},lt=function(e,t,n){var a=Ee.bookings.find((function(e){return e._id===t}));Ve(a),Xe(!0)},st=i.a.useState(1),dt=Object(l.a)(st,2),bt=dt[0],ut=dt[1],jt=i.a.useState(!1),pt=Object(l.a)(jt,2),ht=(pt[0],pt[1],function(e){var t=0;return e.forEach((function(e){t+=e.grandTotal})),t}),gt=function(){var e=Object(T.a)(B.a.mark((function e(){var t,n,a,o,i,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Pe(!0),t=new Vh.a.Workbook,(n=t.addWorksheet()).properties.defaultRowHeight=15,n.properties.defaultColWidth=15,n.getRow(1).getCell(1).value="MEDICAL EXPRESS CLINIC PERIODIC REPORT : ".concat($," | ").concat(te),(a=n.getRow(2)).getCell(1).value="TOTAL RECORDS :",a.getCell(2).value="".concat(Ee.bookings.length),a.getCell(2).font={name:"Calibri",family:4,size:14,bold:!0},(o=n.getRow(3)).getCell(1).value="TOTAL FEE :",o.getCell(2).value="".concat(parseFloat(ht(Ee.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})),o.getCell(2).font={name:"Calibri",family:4,size:14,bold:!0},(i=n.getRow(5)).height=25,["Invoice #","Date","Fee","Patient Name","Clinic","Payment","Corporate"].forEach((function(e,t){i.getCell(t+1).value=e,i.getCell(t+1).font={name:"Calibri",family:4,size:10,bold:!0}})),6,Ee.bookings&&Ee.bookings.length>0&&Ee.bookings.forEach((function(e,t){n.getRow(6+t).height=30,n.getRow(6+t).getCell(1).value=e.invoiceNumber,n.getRow(6+t).getCell(1).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(2).value=kn(e.timeStamp,"dd/mm/yyyy"),n.getRow(6+t).getCell(2).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(3).value="".concat(parseFloat(e.grandTotal).toLocaleString("en-GB",{style:"currency",currency:"GBP"})),n.getRow(6+t).getCell(3).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(4).value=Ne(e.name).toUpperCase(),n.getRow(6+t).getCell(4).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(5).value=e.clinic.toUpperCase(),n.getRow(6+t).getCell(5).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(6).value=we(e.booking.paidBy).toUpperCase(),n.getRow(6+t).getCell(6).font={name:"Calibri",family:4,size:12,bold:!1},n.getRow(6+t).getCell(7).value=e.booking.corporate,n.getRow(6+t).getCell(7).font={name:"Calibri",family:4,size:12,bold:!1}})),e.next=24,t.xlsx.writeBuffer();case 24:c=e.sent,qh()(new Blob([c]),"MEDEX-REPORT-".concat(O.toUpperCase(),"-").concat($,"-").concat(te,".xlsx")),Pe(!1),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0),Pe(!1);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(Yn.a,{utils:Un.a,children:[Object(a.jsx)("div",{style:{padding:"0px 10px 20px 10px",border:"2px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{error:F,autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"From",value:S,onChange:function(e){e&&"Invalid Date"!==e.toString()?(w(e),Q(kn(e,"yyyy-mm-dd")),E(!1)):Q("")},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(Vn.a,{error:H,autoOk:!0,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:P,onChange:function(e){e&&"Invalid Date"!==e.toString()?(A(e),ne(kn(e,"yyyy-mm-dd")),Y(!1)):ne("")},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(M.a,{style:{marginTop:"5px",width:"150px"},children:[Object(a.jsx)(z.a,{id:"demo-simple-select-label",children:"Clinic"}),Object(a.jsxs)(zt.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:O,onChange:function(e){return y(e.target.value)},children:[Object(a.jsx)(Gt.a,{value:"all",children:"All Clinics"}),Object(a.jsx)(Gt.a,{value:"pcr",children:"PCR"}),Object(a.jsx)(Gt.a,{value:"gynae",children:"Gynae"}),Object(a.jsx)(Gt.a,{value:"gp",children:"GP"}),Object(a.jsx)(Gt.a,{value:"std",children:"STD"}),Object(a.jsx)(Gt.a,{value:"blood",children:"Blood"}),Object(a.jsx)(Gt.a,{value:"screening",children:"Screening"}),Object(a.jsx)(Gt.a,{value:"corporate",children:"Corporate"}),Object(a.jsx)(Gt.a,{value:"derma",children:"Derma"})]})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(U.a,{style:{marginTop:"30px"},control:Object(a.jsx)(Kt.a,{checked:ie,onChange:function(e){ce(e.target.checked)},name:"justCorporate"}),label:"Corporate"})}),ie&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(M.a,{style:{marginTop:"20px",width:"150px"},className:n.formControl,children:Object(a.jsx)(zt.a,{labelId:"select-corporate",id:"select-corporate-id",value:nt,onChange:function(e){at(e.target.value)},children:s.map((function(e){return Object(a.jsx)(Gt.a,{value:e,children:"".concat(e)})}))})})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)(R.a,{disabled:Ee.isFetching,fullWidth:!0,style:{marginTop:"0px"},variant:"contained",color:"primary",onClick:function(){(function(){var e=!1;return $||(E(!0),e=!0),te||(Y(!0),e=!0),!e})()&&rt()},children:"Generate Report"})}),Ee.isFetching&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"0px"},children:Object(a.jsx)(q.a,{color:"primary"})})}),!Ee.isFetching&&Ee.bookings&&Ee.bookings.length>0&&Object(a.jsx)(K.a,{item:!0,xs:3,children:Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{disabled:Le,className:n.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){gt()},startIcon:Object(a.jsx)(Gn.a,{style:{color:"#009900"},icon:Hn.a}),children:"Save as Excel file"})})})]})}),Ee.bookings&&Ee.bookings.length>0&&Object(a.jsx)("div",{className:n.Summary,children:Object(a.jsxs)(K.a,{container:!0,spacing:4,justify:"space-between",alignItems:"center",children:[Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total Records :"}),Object(a.jsx)("span",{children:null===(t=Ee.bookings)||void 0===t?void 0:t.length})]}),Object(a.jsxs)(K.a,{item:!0,children:[Object(a.jsx)("span",{style:{width:"115px",display:"inline-block",color:"#eee"},children:"Total FEE :"}),Object(a.jsx)("span",{style:{fontWeight:"700"},children:parseFloat(ht(Ee.bookings)).toLocaleString("en-GB",{style:"currency",currency:"GBP"})})]})]})}),Ee.bookings&&Ee.bookings.length>0&&Object(a.jsx)("div",{style:{height:700,width:"100%",marginTop:"0px"},children:Object(a.jsx)(Wt.a,{rows:Ee.bookings,columns:b,autoPageSize:!0,page:bt,onPageChange:function(e){ut(e.page)},onSelectionChange:function(e){e.length>0&&Ge(e.rows[0])}})}),Object(a.jsx)(zh,{booking:Ye,invoice:Ye,open:Je,handleClose:function(){Ve(null),Xe(!1),Ze(!1)}})]})})}function $h(){var e=i.a.useState(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],m=f[1];Object(o.useEffect)((function(){O()}),[]);var O=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn.getCorporates();case 3:"OK"===(t=e.sent).data.status&&(c(t.data.result),h(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(T.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,jn.updateCorporates(n);case 4:b(!1),m(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),b(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(i.a.Fragment,{children:p&&Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(E.a,{severity:"info",style:{fontSize:"1rem"},children:"Please enter each corporate in a new line."})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(L.a,{disabled:d,value:n,onChange:function(e){c(e.target.value)},multiline:!0,rows:20,label:"Corporates List",fullWidth:!0,variant:"outlined",inputProps:{style:{lineHeight:"1.8rem"}}})}),Object(a.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(a.jsxs)(K.a,{container:!0,spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{disabled:d,variant:"contained",color:"primary",onClick:y,children:"Save Changes"})}),d&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{width:"100%",paddingTop:"0px"},children:Object(a.jsx)(q.a,{color:"primary"})})}),x&&!d&&Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{children:Object(a.jsx)(E.a,{severity:"success",style:{fontSize:"1rem",fontWeight:"500"},children:"Success! - Your changes have been saved successfully."})})})]})})]})})}var Qh=n(671),Zh=n.n(Qh),eg=n(672),tg=n.n(eg),ng=n(1282),ag=n(1283),og=n(385),ig=n(673),cg=Object(w.a)((function(e){return{Title:{fontSize:"1.5rem",color:e.palette.primary.main,fontWeight:"500",width:"100%",textAlign:"center"},Arrow:{fontSize:"2rem",color:e.palette.primary.main,fontWeight:"500"},ArrowRight:{fontSize:"2rem",color:e.palette.primary.main,fontWeight:"500"},TotalAmount:{fontSize:"1.5rem",backgroundColor:e.palette.primary.dark,fontWeight:"500",width:"100%",textAlign:"center",padding:"10px",color:"#fff",borderRadius:"8px",letterSpacing:"5px"},content:{fontSize:"1rem",color:"#777",fontWeight:"500"},primaryColor:{color:e.palette.primary.main,fontWeight:"500"}}}));function rg(e){var t=cg(),n=i.a.useContext(C),c=Object(l.a)(n,2),r=(c[0],c[1],i.a.useState(e.defaultMonth||vn()(new Date,"mmmm-yyyy"))),s=Object(l.a)(r,2),d=s[0],b=s[1],u=i.a.useState([]),j=Object(l.a)(u,2),p=j[0],h=j[1],g=i.a.useState([]),f=Object(l.a)(g,2),x=f[0],m=f[1],O=i.a.useState(0),y=Object(l.a)(O,2),k=y[0],v=y[1];Object(o.useEffect)((function(){N()}),[]),Object(o.useEffect)((function(){p&&p.length>0&&S()}),[d,p]);var S=function(){var e=p[w()]?p[w()].data:{pcr:0,gynae:0,gp:0,std:0,blood:0,screening:0,corporate:0,derma:0},t=[];t.push({name:"PCR",Income:e.pcr}),t.push({name:"GYNAE",Income:e.gynae}),t.push({name:"GP",Income:e.gp}),t.push({name:"STD",Income:e.std}),t.push({name:"BLOOD",Income:e.blood}),t.push({name:"SCREENING",Income:e.screening}),t.push({name:"CORPORATE",Income:e.corporate}),t.push({name:"DERMA",Income:e.derma}),m(t)},N=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eh.getInvoiceReports();case 3:t=e.sent,h(JSON.parse(t.data.result)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){return p.findIndex((function(e){return e.month===d}))},D=function(e){switch(e){case 0:return Nn.PCR_COLOR;case 1:return Nn.GYNAE_COLOR;case 2:return Nn.GP_COLOR;case 3:return Nn.STD_COLOR;case 4:return Nn.BLOOD_COLOR;case 5:return Nn.SCREENING_COLOR;case 6:return Nn.CORPORATE_COLOR;case 7:return Nn.DERMA_COLOR;default:return"#777"}};return Object(a.jsx)(i.a.Fragment,{children:p&&p.length>0&&x&&x.length>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(K.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{width:"100%"},children:[Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)(Ot.a,{title:"Previous Month",children:Object(a.jsx)(J.a,{onClick:function(){var e=p.findIndex((function(e){return e.month===d}));e>0&&b(p[e-1].month)},disabled:0===w(),children:Object(a.jsx)(Zh.a,{className:t.Arrow,style:0===w()?{color:"#ddd"}:{}})})})}),Object(a.jsx)(K.a,{item:!0,xs:8,children:Object(a.jsx)("div",{className:t.Title,children:d.replace("-"," ")})}),Object(a.jsx)(K.a,{item:!0,xs:2,children:Object(a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:Object(a.jsx)(Ot.a,{title:"Next Month",children:Object(a.jsx)(J.a,{onClick:function(){var e=p.findIndex((function(e){return e.month===d}));e<p.length-1&&b(p[e+1].month)},disabled:w()===p.length-1,children:Object(a.jsx)(tg.a,{className:t.ArrowRight,style:w()===p.length-1?{color:"#ddd"}:{}})})})})})]}),Object(a.jsx)("div",{className:t.TotalAmount,children:Object(a.jsxs)(K.a,{container:!0,spacing:1,justify:"center",alignItems:"center",style:{width:"100%"},children:[Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{fontSize:"0.95rem",letterSpacing:"1px",color:"#f1f1f1"},children:"Total Income:"})}),Object(a.jsx)(K.a,{item:!0,xs:12,children:p[w()]?"".concat(parseFloat(p[w()].data.total).toLocaleString("en-GB",{style:"currency",currency:"GBP"})):"\xa30.00"})]})}),Object(a.jsx)("div",{style:{marginTop:"30px"},children:Object(a.jsx)(aa.a,{width:"100%",height:300,children:Object(a.jsxs)(ng.a,{width:900,height:300,data:x,children:[Object(a.jsx)(ag.a,{strokeDasharray:"3 3"}),Object(a.jsx)(ia.a,{dataKey:"name"}),Object(a.jsx)(ca.a,{}),Object(a.jsx)(og.a,{}),Object(a.jsx)(ig.a,{dataKey:"Income",onClick:function(e,t){v(t)},children:x.map((function(e,t){return Object(a.jsx)(Ta.a,{cursor:"pointer",fill:D(t)},"cell-".concat(t))}))})]})})}),Object(a.jsxs)("p",{className:t.content,children:['Income of "'.concat(x[k].name,'":')," ",Object(a.jsxs)("span",{className:t.primaryColor,children:[" ","".concat(parseFloat(x[k].Income).toLocaleString("en-GB",{style:"currency",currency:"GBP"}))]})," "]}),Object(a.jsx)("span",{style:{color:"#777"},children:"* Click on each bar to view the details."})]})})}var lg=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{}}}));function sg(){var e=lg(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1],Object(Q.a)(e.paper,e.fixedHeight));return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(K.a,{container:!0,spacing:3,children:Object(a.jsx)(K.a,{item:!0,xs:12,children:Object(a.jsx)(W.a,{className:o,children:Object(a.jsx)(rg,{defaultMonth:"".concat(vn()(function(){var e=new Date;return new Date(e.getTime()-24*(e.getDate()+1)*60*60*1e3)}(),"mmmm-yyyy"))})})})})})}var dg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"periodicReport",title:"Periodic Report",icon:Object(a.jsx)(We.a,{})},{index:2,id:"searchInvoices",title:"Search Invoices",icon:Object(a.jsx)(ye.a,{})},{index:3,id:"corporates",title:"Corporates List",icon:Object(a.jsx)(rt.a,{})}],bg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"paymentsTable",title:"Payment Links",icon:Object(a.jsx)(lh.a,{})},{index:2,id:"paidpaymentsTable",title:"Successful Payments",icon:Object(a.jsx)(tt.a,{})},{index:3,id:"latepaymentsTable",title:"4 Hours Late",icon:Object(a.jsx)(Ie.a,{})},{index:4,id:"notyetPaid",title:"Not Yet Paid",icon:Object(a.jsx)(at.a,{})},{index:5,id:"refundpaymentsTable",title:"Refunded Payments",icon:Object(a.jsx)(Ze.a,{})},{index:6,id:"deletedpaymentsTable",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})}],ug=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})},{index:10,id:"systemCodes",title:"System Codes",icon:Object(a.jsx)(Ke.a,{})}],jg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],pg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],hg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Te.a,{})},{index:5,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:6,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:7,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:8,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:9,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:10,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:11,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],gg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Te.a,{})},{index:5,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:6,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:7,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:8,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:9,id:"bloodMatchedRecords",title:"Matched Results",icon:Object(a.jsx)(tt.a,{})},{index:10,id:"bloodUnatchedRecords",title:"Unmatched Results",icon:Object(a.jsx)(we.a,{})},{index:11,id:"bloodArchived",title:"Archived Results",icon:Object(a.jsx)(He.a,{})},{index:12,id:"bloodSent",title:"Sent Results",icon:Object(a.jsx)(Je.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:14,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:15,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],fg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:4,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:5,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:6,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:7,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Te.a,{})},{index:8,id:"positiveBookings",title:"Positive Results",icon:Object(a.jsx)(Re.a,{})},{index:9,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ie.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:11,id:"trBookings",title:"TR Bookings",icon:Object(a.jsx)(ze.a,{})},{index:12,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(we.a,{})},{index:13,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:15,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:16,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],xg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],mg=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"pendingBookings",title:"Pending Bookings",icon:Object(a.jsx)(it.a,{})},{index:2,id:"tbcBookings",title:"Patients TBC",icon:Object(a.jsx)(Ye.a,{})},{index:3,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:4,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:5,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:6,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(Te.a,{})},{index:7,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:8,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:9,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:10,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:11,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:12,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:13,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],Og=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(be.a,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(ve.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(je.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)(he.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(me.a,{})},{index:6,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(Pe.a,{})},{index:7,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})},{index:8,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(ye.a,{})},{index:9,id:"searchBooking",title:"Search By Name",icon:Object(a.jsx)($e.a,{})}],yg=[{index:0,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(Se.a,{})},{index:1,id:"latebookings",title:"40 Hours Late",icon:Object(a.jsx)(Ie.a,{})},{index:2,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(we.a,{})},{index:3,id:"calendarView",title:"Calendar View",icon:Object(a.jsx)(Fe.a,{})}],kg=function(e,t){if("pcr"===e)switch(t){case 0:return Object(a.jsx)(Aa,{});case 1:return Object(a.jsx)(ta,{date:"recent"});case 2:return Object(a.jsx)(ta,{date:"today"});case 3:return Object(a.jsx)(ta,{date:"live"});case 4:return Object(a.jsx)(ta,{date:"old"});case 5:return Object(a.jsx)(ta,{date:"future"});case 6:return Object(a.jsx)(ta,{date:"all"});case 7:return Object(a.jsx)(ta,{date:"completed"});case 8:return Object(a.jsx)(ta,{date:"positive"});case 9:return Object(a.jsx)(ta,{date:"late"});case 10:return Object(a.jsx)(ta,{date:"deleted"});case 11:return Object(a.jsx)(ta,{date:"tr"});case 12:return Object(a.jsx)(qa,{});case 13:return Object(a.jsx)(ko,{});case 15:return Object(a.jsx)(_t,{});case 16:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("pcrlab"===e)switch(t){case 0:return Object(a.jsx)(ta,{date:"live"});case 1:return Object(a.jsx)(ta,{date:"late"});case 2:return Object(a.jsx)(qa,{});case 3:return Object(a.jsx)(ko,{});default:return"Page Not Found!"}else if("gynae"===e)switch(t){case 0:return Object(a.jsx)(tr,{});case 1:return Object(a.jsx)(Gc,{date:"recent"});case 2:return Object(a.jsx)(Gc,{date:"today"});case 3:return Object(a.jsx)(Gc,{date:"old"});case 4:return Object(a.jsx)(Gc,{date:"future"});case 5:return Object(a.jsx)(Gc,{date:"all"});case 6:return Object(a.jsx)(Gc,{date:"deleted"});case 7:return Object(a.jsx)(Ar,{});case 8:return Object(a.jsx)(rr,{});case 9:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("gp"===e)switch(t){case 0:return Object(a.jsx)(Qr,{});case 1:return Object(a.jsx)(Wr,{date:"recent"});case 2:return Object(a.jsx)(Wr,{date:"today"});case 3:return Object(a.jsx)(Wr,{date:"old"});case 4:return Object(a.jsx)(Wr,{date:"future"});case 5:return Object(a.jsx)(Wr,{date:"all"});case 6:return Object(a.jsx)(Wr,{date:"deleted"});case 7:return Object(a.jsx)(Nl,{});case 8:return Object(a.jsx)(ol,{});case 9:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("std"===e)switch(t){case 0:return Object(a.jsx)(Vl,{});case 1:return Object(a.jsx)(Pl,{date:"recent"});case 2:return Object(a.jsx)(Pl,{date:"today"});case 3:return Object(a.jsx)(Pl,{date:"live"});case 4:return Object(a.jsx)(Pl,{date:"completed"});case 5:return Object(a.jsx)(Pl,{date:"old"});case 6:return Object(a.jsx)(Pl,{date:"future"});case 7:return Object(a.jsx)(Pl,{date:"all"});case 8:return Object(a.jsx)(Pl,{date:"deleted"});case 9:return Object(a.jsx)(Bs,{});case 10:return Object(a.jsx)(Ql,{});case 11:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("blood"===e)switch(t){case 0:return Object(a.jsx)(Us,{});case 1:return Object(a.jsx)(Rs,{date:"recent"});case 2:return Object(a.jsx)(Rs,{date:"today"});case 3:return Object(a.jsx)(Rs,{date:"live"});case 4:return Object(a.jsx)(Rs,{date:"completed"});case 5:return Object(a.jsx)(Rs,{date:"old"});case 6:return Object(a.jsx)(Rs,{date:"future"});case 7:return Object(a.jsx)(Rs,{date:"all"});case 8:return Object(a.jsx)(Rs,{date:"deleted"});case 9:return Object(a.jsx)(_d,{});case 10:return Object(a.jsx)(Dd,{});case 11:return Object(a.jsx)(Gd,{});case 12:return Object(a.jsx)(Kd,{});case 13:return Object(a.jsx)(Cd,{});case 14:return Object(a.jsx)(Xs,{});case 15:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("admin"===e)switch(t){case 0:return Object(a.jsx)(ip,{});case 1:return Object(a.jsx)(fp,{date:"recent"});case 2:return Object(a.jsx)(fp,{date:"today"});case 3:return Object(a.jsx)(fp,{date:"old"});case 4:return Object(a.jsx)(fp,{date:"future"});case 5:return Object(a.jsx)(fp,{date:"all"});case 6:return Object(a.jsx)(fp,{date:"deleted"});case 7:return Object(a.jsx)(Gp,{});case 8:return Object(a.jsx)(sp,{});case 9:return Object(a.jsx)(Yp,{});case 10:return Object(a.jsx)(Qp,{});default:return"Page Not Found!"}else if("derma"===e)switch(t){case 0:return Object(a.jsx)(bb,{});case 1:return Object(a.jsx)(Qd,{date:"recent"});case 2:return Object(a.jsx)(Qd,{date:"today"});case 3:return Object(a.jsx)(Qd,{date:"old"});case 4:return Object(a.jsx)(Qd,{date:"future"});case 5:return Object(a.jsx)(Qd,{date:"all"});case 6:return Object(a.jsx)(Qd,{date:"deleted"});case 7:return Object(a.jsx)(Gb,{});case 8:return Object(a.jsx)(fb,{});case 9:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("payment"===e)switch(t){case 0:return Object(a.jsx)(_h,{});case 1:return Object(a.jsx)(kh,{date:"all"});case 2:return Object(a.jsx)(kh,{date:"paid"});case 3:return Object(a.jsx)(kh,{date:"late"});case 4:return Object(a.jsx)(kh,{date:"notpaid"});case 5:return Object(a.jsx)(kh,{date:"refund"});case 6:return Object(a.jsx)(kh,{date:"deleted"});default:return"Page Not Found!"}else if("screening"===e)switch(t){case 0:return Object(a.jsx)(cu,{});case 1:return Object(a.jsx)(Kb,{date:"pending"});case 2:return Object(a.jsx)(Kb,{date:"tbc"});case 3:return Object(a.jsx)(Kb,{date:"recent"});case 4:return Object(a.jsx)(Kb,{date:"today"});case 5:return Object(a.jsx)(Kb,{date:"live"});case 6:return Object(a.jsx)(Kb,{date:"completed"});case 7:return Object(a.jsx)(Kb,{date:"old"});case 8:return Object(a.jsx)(Kb,{date:"future"});case 9:return Object(a.jsx)(Kb,{date:"all"});case 10:return Object(a.jsx)(Kb,{date:"deleted"});case 11:return Object(a.jsx)(Fu,{});case 12:return Object(a.jsx)(uu,{});case 13:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else if("corporate"===e)switch(t){case 0:return Object(a.jsx)(tj,{});case 1:return Object(a.jsx)(Gu,{date:"recent"});case 2:return Object(a.jsx)(Gu,{date:"today"});case 3:return Object(a.jsx)(Gu,{date:"old"});case 4:return Object(a.jsx)(Gu,{date:"future"});case 5:return Object(a.jsx)(Gu,{date:"all"});case 6:return Object(a.jsx)(Gu,{date:"deleted"});case 7:return Object(a.jsx)(Lj,{});case 8:return Object(a.jsx)(rj,{});case 9:return Object(a.jsx)(Yp,{});default:return"Page Not Found!"}else{if("reports"!==e)return"Page Not Found!";switch(t){case 0:return Object(a.jsx)(sg,{});case 1:return Object(a.jsx)(Xh,{});case 2:return Object(a.jsx)(Uh,{});case 3:return Object(a.jsx)($h,{});default:return"Page Not Found!"}}},vg=function(e){switch(e){case"admin":return ug;case"pcr":return fg;case"pcrlab":return yg;case"gynae":return jg;case"gp":return pg;case"std":return hg;case"blood":return gg;case"derma":return xg;case"payment":return bg;case"screening":return mg;case"corporate":return Og;case"reports":return dg;default:return[]}},Cg=function(e,t){for(var n=vg(e),a=0;a<n.length;a++)if(n[a].index===t)return n[a].id;return"Page Not Found!"},Sg=function(e,t){for(var n=vg(e),a=0;a<n.length;a++)if(n[a].id===t)return n[a].index;return-1},Bg=n(382),Tg=Object(w.a)((function(e){return{root:{minHeight:"100vh"},image:{backgroundImage:"url(/images/bg.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{padding:e.spacing(4,4),display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"#f5f5f5"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},alert:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},pageBg:{paddingTop:e.spacing(15),background:"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)",height:"100vh",margin:0,padding:0},appbarCenter:{position:"absolute",top:"-40px",right:"0",marginLeft:"-145px",alignItems:"center",justify:"center",display:"flex",backgroundColor:"#fff",padding:"5px 20px 15px 20px",borderRadius:"8px"},logoImage:{width:"30px",height:"30px",marginLeft:"0px"},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},adminPanelLabel:{color:e.palette.primary.main,marginBottom:"20px"}}}));function Ng(){var e=Tg(),t=i.a.useContext(C),n=Object(l.a)(t,2),o=(n[0],n[1]),c=(Object(Bg.useMediaQuery)({maxWidth:1224}),Object(te.d)()),r=i.a.useState(""),s=Object(l.a)(r,2),b=s[0],u=s[1],j=i.a.useState(""),p=Object(l.a)(j,2),h=p[0],g=p[1],f=i.a.useState(!1),x=Object(l.a)(f,2),m=x[0],O=x[1],y=i.a.useState(!1),k=Object(l.a)(y,2),v=k[0],S=k[1],B=i.a.useState(null),T=Object(l.a)(B,2),w=T[0],A=T[1],Z=i.a.useState(!1),ne=Object(l.a)(Z,2),ae=ne[0],oe=ne[1],ie=function(){oe(!0),se.signIn({username:h,password:b}).then((function(e){if(oe(!1),"OK"===e.data.status){A(null);var t=e.data.token;m?localStorage.setItem("medexadmin-auth-token",t):sessionStorage.setItem("medexadmin-auth-token",t),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0})})),Jj(e.data.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:0})})),c.push(re("/".concat(Cg(e.data.roles[0],0))))}else"FAILED"===e.data.status?A(e.data.error):A("Sorry, something went wrong, please try again.")})).catch((function(e){oe(!1),console.error(e),A("Sorry, something went wrong, please try again.")}))};return Object(a.jsx)("div",{className:e.pageBg,children:Object(a.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(W.a,{elevation:20,children:Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsxs)("div",{className:e.appbarCenter,children:[Object(a.jsx)("span",{className:e.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:e.logoImage,src:re("/images/logo.png"),alt:"logo image"})]}),Object(a.jsx)(D.a,{className:e.avatar,children:Object(a.jsx)(I.a,{})}),Object(a.jsx)(_.a,{component:"h1",variant:"h6",className:e.adminPanelLabel,children:"Admin Panel"}),w&&Object(a.jsx)("div",{className:e.alert,children:Object(a.jsxs)(E.a,{severity:"error",children:[" ",Object(a.jsx)("div",{style:{lineHeight:"1.5rem",textAlign:"justify"},children:w})]})}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"email",autoComplete:"username",value:h,onChange:function(e){g(e.target.value),A(null)},on:!0,autoFocus:!0}),Object(a.jsxs)(M.a,{fullWidth:!0,required:!0,className:Object(Q.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ie()},children:[Object(a.jsxs)(z.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(a.jsx)(G.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:v?"text":"password",value:b,onChange:function(e){u(e.target.value),A(null)},autoComplete:"current-password",endAdornment:Object(a.jsx)(H.a,{position:"end",children:Object(a.jsx)(J.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){S(!v)},onMouseDown:function(e){e.preventDefault()},children:v?Object(a.jsx)(X.a,{}):Object(a.jsx)($.a,{})})}),labelWidth:100})]}),Object(a.jsx)(U.a,{style:{textAlign:"left",width:"100%"},control:Object(a.jsx)(Y.a,{value:"remember",color:"secondary",checked:m,onChange:function(e){O(e.target.checked)}}),label:"Remember me"}),Object(a.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ie,className:e.submit,children:"Sign In"})]})}),Object(a.jsx)(V.a,{className:e.backdrop,open:ae,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(q.a,{color:"inherit"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{textAlign:"center",color:"#fff"},children:" "})})]})}),Object(a.jsx)(P.a,{mt:5,style:{color:"#eee"},children:Object(a.jsx)(ee,{})})]})})}var wg=n(1285),Dg=n(680),Rg=n.n(Dg),Lg=n(682),Pg=n.n(Lg),Ag=n(1201),Ig=Object(w.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},icon:{fontSize:"1rem",color:"#777",cursor:"pointer",paddingTop:"10px",paddingBottom:"8px",borderBottom:"1px solid #eee"},iconSelected:{color:"#fff",backgroundColor:e.palette.primary.main,transition:"all 0.1s ease-in-out"},menuText:{fontSize:"1rem",fontWeight:"500"},Badge:{backgroundColor:"rgb(220, 0, 78)",color:"#fff",fontWeight:"600",textAlign:"center",borderRadius:"50%",fontSize:"0.85rem",lineHeight:"0.85rem",padding:"7px",marginTop:"9px",width:"28px"}}}));function _g(){var e=Ig(),t=i.a.useContext(C),n=Object(l.a)(t,2),c=n[0],r=n[1],s=i.a.useState(0),d=Object(l.a)(s,2),b=d[0],u=d[1],j=Object(te.d)(),p=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Co.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&r((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCount:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&r((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCountScreening:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eo.getShouldRefundsCount();case 3:(t=e.sent)&&t.data&&"OK"===t.data.status&&r((function(e){return Object(N.a)(Object(N.a)({},e),{},{shouldRefunsCountBlood:t.data.count})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(T.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji.getPendingBookings();case 3:(t=e.sent)&&t.data&&r((function(e){return Object(N.a)(Object(N.a)({},e),{},{hsPendingBookingsCount:t.data.length})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u(c.currentMenuIndex),p(),h(),g(),f()}),[c.currentMenuIndex,c.bookingDialogDataChanged]);return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Ag.a,{children:c.role&&vg(c.role).map((function(t){return!t.hidden&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{className:Object(Q.a)(e.icon,b===t.index&&e.iconSelected),onClick:function(e){return n=t.index,u(n),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{currentMenuIndex:n})})),void j.push(re("/".concat(Cg(c.role,n))));var n},children:Object(a.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,style:{paddingLeft:"15px"},children:[Object(a.jsx)(K.a,{item:!0,children:t.icon}),Object(a.jsxs)(K.a,{item:!0,style:{textAlign:"left"},children:[Object(a.jsx)("span",{className:e.menuText,children:"".concat(t.title)})," "]}),"gynae"===c.role&&"deletedBookings"===t.id&&c.shouldRefunsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.shouldRefunsCount," "]}),"screening"===c.role&&"pendingBookings"===t.id&&c.hsPendingBookingsCount>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.hsPendingBookingsCount," "]}),"screening"===c.role&&"deletedBookings"===t.id&&c.shouldRefunsCountScreening>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.shouldRefunsCountScreening," "]}),"blood"===c.role&&"deletedBookings"===t.id&&c.shouldRefunsCountBlood>0&&Object(a.jsxs)("span",{className:e.Badge,children:[" ",c.shouldRefunsCountBlood," "]})]})},"".concat(t.id))},"".concat(t.id))}))})})}var Fg=n(471),Eg=n.n(Fg),Wg=n(681),Mg=n.n(Wg),zg=n(642),Gg=n(677),Hg=n.n(Gg),Ug=n(678),Yg=n.n(Ug),Vg=n(679),Kg=n.n(Vg),qg=Object(O.a)((function(e){return{paper:{marginTop:"10px",width:"270px",height:"240px",border:"1px solid #ddd",borderRadius:"10px",paddingTop:"10px"}}}))((function(e){return Object(a.jsx)(zg.a,Object(N.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Jg=Object(O.a)((function(e){return{paper:{marginTop:"5px",width:"290px",height:"450px",border:"1px solid #ddd",borderRadius:"10px",padding:"10px"}}}))((function(e){return Object(a.jsx)(zg.a,Object(N.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Xg=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(N.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:Object(u.a)({position:"relative",whiteSpace:"nowrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{opacity:.9}),drawerPaperClose:Object(u.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},appbarCenter:{position:"fixed",width:"260px",top:"10px",left:"50%",marginLeft:"-130px",alignItems:"center",justify:"center",display:"flex"},logoImage:{width:"36px",height:"36px",marginLeft:"0px"},userAvatar:{backgroundColor:"#fff",borderColor:"#aaa",border:"1px solid",color:"#aaa",cursor:"pointer"},userAvatarSelected:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,cursor:"pointer"},userAvatarBig:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,width:"60px",height:"60px"},appBarText:Object(u.a)({color:"#888"},e.breakpoints.down("sm"),{display:"none"}),appBarAppsIcon:{cursor:"pointer",fontSize:"1.8rem"},appBarAppsIconSelected:{cursor:"pointer",fontSize:"1.8rem",color:e.palette.primary.main},usernameLabel:{fontSize:"1.2rem",color:e.palette.primary.main,marginTop:"5px",marginBottom:"5px"},lastLoginLabel:{color:"#777",paddingTop:"5px"},appsLogo:{width:"70px",height:"70px"},appsBox:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid #fff",borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.main),transition:"all 0.1s ease-in-out"}},appsBoxSelected:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid".concat(e.palette.primary.light),borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.light),transition:"all 0.1s ease-in-out"}},appsAdminLabel:{color:"#0264d4",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGPLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsSTDLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsBloodLabel:{color:"#dc2626",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsDermaLabel:{color:"#323e9a",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPaymentLabel:{color:"#008c77",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsScreeningLabel:{color:"#006b8f",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsCorporateLabel:{color:"#009188",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsReportsLabel:{color:"#008c34",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsInToolbar:{position:"fixed",left:"60px",top:"-5px",height:"65px",width:"200px",overflow:"hidden"}}}));function $g(){var e,t,n,c=Xg(),r=i.a.useContext(C),s=Object(l.a)(r,2),b=s[0],u=s[1],j=Object(Bg.useMediaQuery)({maxWidth:768}),p=i.a.useState(!j),h=Object(l.a)(p,2),g=h[0],f=h[1],x=i.a.useState(0),m=Object(l.a)(x,2),O=m[0],y=m[1],k=i.a.useState(null),v=Object(l.a)(k,2),S=v[0],B=v[1],T=i.a.useState(null),w=Object(l.a)(T,2),L=w[0],P=w[1],A=function(){P(null)},I=Object(te.d)(),_=Object(te.e)();i.a.useEffect((function(){if(b.role){var e=Sg(b.role,function(e){try{var t=e.split("/");return t&&t.length>0?t[t.length-1].length>0?t[t.length-1]:t[t.length-2]:""}catch(n){return""}}(_.pathname));u((function(t){return Object(N.a)(Object(N.a)({},t),{},{currentMenuIndex:e})}))}}),[_]),Object(o.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(o.useEffect)((function(){y(b.currentMenuIndex),j&&f(!1)}),[b.currentMenuIndex]);Object(Q.a)(c.paper,c.fixedHeight);var E=function(e){Jj(e),u((function(t){return Object(N.a)(Object(N.a)({},t),{},{role:e})})),I.push(re("/".concat(Cg(e,0)))),A()},W=function(e){switch(e){case"admin":return Object(a.jsx)("img",{src:re("/images/admin.png"),className:c.appsLogo});case"pcr":return Object(a.jsx)("img",{src:re("/images/corona.png"),className:c.appsLogo});case"gynae":return Object(a.jsx)("img",{src:re("/images/woman.png"),className:c.appsLogo});case"gp":return Object(a.jsx)("img",{src:re("/images/doctor.png"),className:c.appsLogo});case"std":return Object(a.jsx)("img",{src:re("/images/std-icon.png"),className:c.appsLogo});case"blood":return Object(a.jsx)("img",{src:re("/images/blood-logo.png"),className:c.appsLogo});case"derma":return Object(a.jsx)("img",{src:re("/images/derma-logo.png"),className:c.appsLogo});case"payment":return Object(a.jsx)(Hg.a,{className:c.appsLogo,style:{color:"#008c77",fontSize:"2rem",padding:"15px"}});case"screening":return Object(a.jsx)(Yg.a,{className:c.appsLogo,style:{color:"#006b8f",fontSize:"2rem",padding:"16px"}});case"corporate":return Object(a.jsx)("img",{src:re("/images/corporate.png"),style:{padding:"10px"},className:c.appsLogo});case"reports":return Object(a.jsx)(Kg.a,{className:c.appsLogo,style:{color:"#008c34",fontSize:"2rem",padding:"13px"}});default:return null}},M=function(e){switch(e){case"admin":return Object(a.jsxs)("div",{className:c.appsAdminLabel,children:[" ","Admin"," "]});case"pcr":return Object(a.jsxs)("div",{className:c.appsPCRLabel,children:[" ","PCR"," "]});case"gynae":return Object(a.jsxs)("div",{className:c.appsGynaeLabel,children:[" ","Gynae"," "]});case"gp":return Object(a.jsxs)("div",{className:c.appsGPLabel,children:[" ","GP"," "]});case"std":return Object(a.jsxs)("div",{className:c.appsSTDLabel,children:[" ","STD"," "]});case"blood":return Object(a.jsxs)("div",{className:c.appsBloodLabel,children:[" ","Blood"," "]});case"derma":return Object(a.jsxs)("div",{className:c.appsDermaLabel,children:[" ","Derma"," "]});case"payment":return Object(a.jsxs)("div",{className:c.appsPaymentLabel,children:[" ","Payments"," "]});case"screening":return Object(a.jsxs)("div",{className:c.appsScreeningLabel,children:[" ","Screening"," "]});case"corporate":return Object(a.jsxs)("div",{className:c.appsCorporateLabel,children:[" ","Corporate"," "]});case"reports":return Object(a.jsxs)("div",{className:c.appsReportsLabel,children:[" ","Reports"," "]});default:return null}};return Object(a.jsx)(i.a.Fragment,{children:b.userId&&b.role&&Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(oh.a,{style:{backgroundColor:"#fff",color:"#555",height:"60px"},position:"absolute",className:Object(Q.a)(c.appBar,!1),children:Object(a.jsxs)(ih.a,{className:c.toolbar,children:[Object(a.jsx)(J.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!g)},className:Object(Q.a)(c.menuButton),children:Object(a.jsx)(Rg.a,{})}),Object(a.jsx)("div",{className:c.appsInToolbar,children:Object(a.jsxs)(K.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:W(b.role)}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{style:{paddingTop:"8px"},children:M(b.role)})})]})}),Object(a.jsx)("div",{className:c.appbarCenter,children:!j&&Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("span",{className:c.appbarTitle,children:"Medical Express Clinic"}),Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image"})]})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",paddingLeft:"2%"},children:Object(a.jsxs)(K.a,{container:!0,spacing:2,direction:"row-reverse",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:S?c.userAvatarSelected:c.userAvatar,onClick:function(e){B(e.currentTarget)},children:Object(a.jsx)(J.a,{children:Object(a.jsx)(Eg.a,{})})})}),(null===(e=b.userId)||void 0===e?void 0:e.roles.find((function(e){return"admin"===e})))&&Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(J.a,{onClick:function(e){P(e.currentTarget)},children:Object(a.jsx)(Mg.a,{className:L?c.appBarAppsIconSelected:c.appBarAppsIcon})})})]})})]})}),Object(a.jsx)(qg,{id:"user-avatar-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:function(){B(null)},children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(D.a,{className:c.userAvatarBig,children:Object(a.jsx)(Eg.a,{style:{fontSize:"2.5rem"}})})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)("div",{className:c.usernameLabel,children:[" ",null===(t=b.userId)||void 0===t?void 0:t.username," "]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("span",{style:{color:"#999",fontSize:"0.85rem"},children:"Logged in at :"})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)("div",{className:c.lastLoginLabel,children:vn()(null===(n=b.userId)||void 0===n?void 0:n.lastLoginTimeStamp)})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsx)(R.a,{onClick:function(){localStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-auth-token"),sessionStorage.removeItem("medexadmin-role"),u((function(e){return{signedIn:!1}})),I.replace("./login")},variant:"outlined",color:"secondary",style:{marginTop:"30px",width:"150px",borderRadius:"30px"},children:"Logout"})})]})}),Object(a.jsx)(Jg,{id:"apps-menu",anchorEl:L,keepMounted:!0,open:Boolean(L),onClose:A,children:Object(a.jsxs)(K.a,{container:!0,justify:"center",alignItems:"center",spacing:1,children:[Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"admin"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("admin")},children:[Object(a.jsx)(K.a,{item:!0,children:W("admin")}),Object(a.jsx)(K.a,{item:!0,children:M("admin")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"pcr"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("pcr")},children:[Object(a.jsx)(K.a,{item:!0,children:W("pcr")}),Object(a.jsx)(K.a,{item:!0,children:M("pcr")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gynae"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("gynae")},children:[Object(a.jsx)(K.a,{item:!0,children:W("gynae")}),Object(a.jsx)(K.a,{item:!0,children:M("gynae")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gp"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("gp")},children:[Object(a.jsx)(K.a,{item:!0,children:W("gp")}),Object(a.jsx)(K.a,{item:!0,children:M("gp")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"std"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("std")},children:[Object(a.jsx)(K.a,{item:!0,children:W("std")}),Object(a.jsx)(K.a,{item:!0,children:M("std")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"blood"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("blood")},children:[Object(a.jsx)(K.a,{item:!0,children:W("blood")}),Object(a.jsx)(K.a,{item:!0,children:M("blood")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"screening"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("screening")},children:[Object(a.jsx)(K.a,{item:!0,children:W("screening")}),Object(a.jsx)(K.a,{item:!0,children:M("screening")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"derma"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("derma")},children:[Object(a.jsx)(K.a,{item:!0,children:W("derma")}),Object(a.jsx)(K.a,{item:!0,children:M("derma")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"corporate"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("corporate")},children:[Object(a.jsx)(K.a,{item:!0,children:W("corporate")}),Object(a.jsx)(K.a,{item:!0,children:M("corporate")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"payment"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("payment")},children:[Object(a.jsx)(K.a,{item:!0,children:W("payment")}),Object(a.jsx)(K.a,{item:!0,children:M("payment")})]})}),Object(a.jsx)(K.a,{item:!0,children:Object(a.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"reports"===b.role?c.appsBoxSelected:c.appsBox,onClick:function(){return E("reports")},children:[Object(a.jsx)(K.a,{item:!0,children:W("reports")}),Object(a.jsx)(K.a,{item:!0,children:M("reports")})]})}),Object(a.jsx)(K.a,{item:!0,style:{width:"85px"}})]})}),Object(a.jsxs)(wg.a,{variant:j?"temporary":"persistent",classes:{paper:Object(Q.a)(c.drawerPaper,!g&&c.drawerPaperClose)},open:g,children:[Object(a.jsxs)("div",{className:c.toolbarIcon,children:[Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("img",{className:c.logoImage,src:re("/images/logo.png"),alt:"logo image",style:{marginRight:"10px"}}),Object(a.jsx)("span",{className:c.appbarTitle,children:Object(a.jsx)("span",{style:{fontSize:"0.9rem"},children:"Medical Express"})})]}),Object(a.jsx)(J.a,{onClick:function(){f(!1)},children:Object(a.jsx)(Pg.a,{})})]}),Object(a.jsx)(Yt.a,{}),Object(a.jsx)(_g,{})]}),Object(a.jsxs)("main",{className:c.content,children:[Object(a.jsx)("div",{className:c.appBarSpacer}),Object(a.jsx)(F.a,{maxWidth:j?"xs":"xl",className:c.container,children:kg(b.role,O)})]})]})})})}function Qg(e){return Zg.apply(this,arguments)}function Zg(){return(Zg=Object(T.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.checkToken({token:t});case 3:if("OK"!==(n=e.sent).data.status){e.next=8;break}return e.abrupt("return",{username:n.data.userId,forename:n.data.forename,surname:n.data.surname,roles:n.data.roles,lastLoginTimeStamp:n.data.lastLoginTimeStamp});case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var ef=Object(w.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function tf(){ef();var e=i.a.useContext(C),t=Object(l.a)(e,2),n=t[0],o=t[1],c=i.a.useState(!1),r=Object(l.a)(c,2),s=r[0],b=r[1],u=Object(te.d)(),j=Object(te.e)();i.a.useEffect((function(){(function(){var e=Object(T.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("medexadmin-auth-token")||sessionStorage.getItem("medexadmin-auth-token"),se.setToken(t),t){e.next=8;break}o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),b(!0),u.push(re("/login")),e.next=13;break;case 8:return e.next=10,Qg(t);case 10:(n=e.sent)?j.pathname===re("/")||j.pathname===re("/#")||j.pathname.startsWith(re("/login"))?(qj()||Jj(n.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0,signedUp:!1,forgotPassword:!1,userId:n,role:qj()})})),u.push(re("/".concat(Cg(qj(),0))))):(qj()||Jj(n.roles[0]),o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!0,userId:n,role:qj()})}))):(o((function(e){return Object(N.a)(Object(N.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),u.push(re("/login"))),b(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j.pathname]);return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{}),s&&(n.signedIn?Object(a.jsx)($g,{}):Object(a.jsx)(Ng,{}))]})}!function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");k?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):v(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):v(t,e)}))}}();var nf=function(){var e=i.a.useState({currentMenuIndex:0}),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(a.jsx)(C.Provider,{value:[n,o],children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(s.a,{theme:m,children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(y,{}),Object(a.jsx)(tf,{})]})})})};r.a.render(Object(a.jsx)(nf,{}),document.getElementById("root"))},120:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},121:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},143:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},144:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},145:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},202:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},222:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},241:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},271:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},302:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},349:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},350:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},351:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},352:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},353:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},355:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},38:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return e?"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4)):""}}},547:function(e,t){var n=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:n,calculateTotalPrice:function(e){for(var t=0,a=0;a<e.length;a++)t+=n(e[a]);return t}}},68:function(e,t){e.exports={FormatDateFromString:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4))},FormatDateFromStringShortYear:function(e){return"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2))},RevertFormatDateFromString:function(e){return"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2))},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}},918:function(e,t){},919:function(e,t){},920:function(e,t){},921:function(e,t){},922:function(e,t){},984:function(e,t){},986:function(e,t){},997:function(e,t){},999:function(e,t){}},[[1196,1,2]]]);
//# sourceMappingURL=main.e633d6af.chunk.js.map