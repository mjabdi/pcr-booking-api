{"version":3,"sources":["PCR/PriceCalculator.js","PCR/DateFormatter.js","theme.js","GlobalStyles.js","serviceWorker.js","GlobalState.js","CopyRight.js","services/api.js","services/UserService.js","PCR/services/api.js","PCR/services/BookService.js","PCR/services/PDFService.js","PCR/PersonsBox.js","PCR/FindByRef.js","PCR/ResendEmailsDialog.js","PCR/Corporates.js","PCR/PayDialog.js","PCR/TimeStampDialog.js","PCR/BookingDialog.js","PCR/BookingTable.js","PCR/Title.js","PCR/Chart.js","PCR/CurrentVisits.js","PCR/BookingView.js","PCR/ResultsTimeReport.js","PCR/DashboardPreview.js","PCR/UnmatchedRecords.js","PCR/calendar/MonthViewCell.js","PCR/calendar/calendar-util.js","PCR/calendar/MonthView.js","PCR/calendar/WeekViewCell.js","PCR/calendar/WeekView.js","PCR/calendar/DayViewCell.js","PCR/calendar/DayView.js","PCR/calendar/CalendarView.js","PCR/calendar-admin/MonthViewCell.js","PCR/calendar-admin/calendar-util.js","PCR/calendar-admin/MonthView.js","PCR/calendar-admin/WeekViewCell.js","PCR/calendar-admin/WeekView.js","PCR/calendar-admin/DayViewCell.js","PCR/calendar-admin/DayView.js","PCR/calendar-admin/CalendarView.js","MenuList.js","Role.js","SignIn.js","Menu.js","Dashboard.js","TokenVerifier.js","Navigator.js","App.js","index.js"],"names":["calculatePrice","person","price","tr","certificate","antiBodyTest","module","exports","calculateTotalPrice","persons","totalPrice","i","length","FormatDateFromString","str","substr","FormatDateFromStringShortYear","RevertFormatDateFromString","FormatDateFromStringWithSlash","darkBlack","borderColor","theme","createMuiTheme","palette","primary","main","light","secondary","common","black","warning","dark","tonalOffset","background","default","spacing","breakpoints","values","xl","lg","md","sm","xs","border","borderWidth","overrides","MuiExpansionPanel","root","position","MuiTableCell","paddingLeft","paddingRight","borderBottom","MuiDivider","backgroundColor","height","MuiPrivateNotchedOutline","MuiListItem","divider","MuiDialog","paper","width","maxWidth","marginLeft","marginRight","MuiTooltip","tooltip","fontSize","MuiExpansionPanelDetails","enGB","responsiveFontSizes","withStyles","outline","color","white","paddingTop","paddingBottom","down","up","display","flexWrap","marginTop","marginBottom","withTheme","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","GlobalState","React","createContext","Copyright","Typography","variant","align","Link","href","Date","getFullYear","axios","create","baseURL","headers","UserService","setToken","token","signIn","payload","API","post","checkToken","BookService","payBooking","bookingId","paymentMethod","corporate","unPayBooking","getTestsTimeReport","axiosRetry","retries","retryDelay","retryCount","get","getBookingsStatsByDateStr","dateStr","getBookingsCountByDateStr","getBookingsCountByDateStrandTime","time","source","cancelToken","getBookingsByDateStrandTime","getAllBookingsCountByDateStr","getAllBookingsCountByDateStrandTime","getAllBookingsByDateStrandTime","changeBackToBookingMade","id","resendEmailsWithBookingId","regenerateFilesWithBookingId","resendEmails","linkId","regenerateFiles","matchRecords","findBestMatches","getLinkDetails","getLinkDetailsWithBookingId","findBookingByRefBirthDate","bookingRef","birthDate","updateBooking","updateBookingTime","deleteBooking","unDeleteBooking","getBookingsByRef","ref","getBookingById","getAllBookings","limit","getLateBookings","getDeletedBookings","getLiveBookings","getCompletedBookings","getPositiveBookings","getTodayBookings","getOldBookings","getFutureBookings","getRecentBookings","getRecentBookingsAll","getUnmatchedRecords","getUnmatchedRecordsArchived","archiveRecord","unArchiveRecord","PDFService","downloadCovidForm1","responseType","Accept","downloadCovidForm2","downloadPdfResult","downloadPdfCert","downloadPdfLabReport","useStyles","makeStyles","box","padding","borderRadius","textAlign","boxRed","boxInfo","ul","listStyle","margin","li","icon","lineThrough","textDecoration","heading","typography","pxToRem","flexBasis","flexShrink","text","secondaryHeading","infoDetails","infoTitle","fontWeight","infoData","title","Accordion","AccordionDeleted","DownloadForm","infoDataCharges","infoDataChargesHigher","BookedLabel","borderLeft","PatientAttendedLabel","SampleTakenLabel","ReportSentLabel","ReportCertSentLabel","PositiveLabel","EditButton","RestoreButton","DeleteButton","SaveButton","CancelButton","TextBox","checkIcon","closeIcon","centeredLabel","alignItems","PersonsBox","classes","useContext","setState","useState","expanded","setExpanded","edit","editMode","setEditMode","delete","deleteMode","setDeleteMode","restore","restoreMode","setRestoreMode","saving","setSaving","deleting","setDeleting","restoring","setRestoring","validationError","setValidationError","bookingDate","setBookingDate","bookingTime","setBookingTime","gender","setGender","setTitle","forename","setForename","surname","setSurnme","email","setEmail","dob","setDOB","tel","setTel","postCode","setPostCode","address","setAddress","notes","setNotes","passport","setPassport","passport2","setPassport2","setCertificate","setAntiBodyTest","bookingDateChanged","event","target","value","bookingDateError","bookingTimeChanged","bookingTimeError","genderChanged","titleChanged","forenameChanged","surnameChanged","emailChanged","dobChanged","dobError","telChanged","postCodeChanged","addressChanged","passportChanged","passport2Changed","certificateChanged","checked","antiBodyTestChanged","handleEditModeChanged","forenameCapital","surnameCapital","toUpperCase","phone","passportNumber","passportNumber2","booking","_id","validateBooking","validateDate","charAt","test","year","parseInt","month","day","err","hour","minute","validateTime","bookingService","res","RefreshPersonInfo","handleDeleteModeChanged","del","handleRestoreModeChanged","Fragment","Grid","container","direction","justify","className","foundRecords","map","index","status","panel","item","deleted","onChange","isExpanded","AccordionSummary","expandIcon","aria-controls","Tooltip","style","AccordionDetails","hidden","Button","type","fullWidth","onClick","disabled","TextField","inputProps","FormControlLabel","formControl","control","Checkbox","name","label","startIcon","file","Blob","data","fileURL","URL","createObjectURL","open","isBoolean","param","TextMaskCustom","props","inputRef","other","inputElement","mask","showMask","flexDirection","avatar","form","Find","Clear","NoRecordsFound","FindByRef","initialFocus","focus","setFocus","autoFocus","key","onFocus","onBlur","useFocus","focusProps","useEffect","clearField","refError","findRecords","indexOf","submiting","CssBaseline","component","FormControl","pattern","helperText","size","InputProps","inputComponent","onKeyPress","onTouchTap","Alert","severity","interval","refreshButton","RefLink","cursor","archiveButton","smartMatchButton","matchButton","resendButton","resendFilesButton","cancelButton","BorderLinearProgress","colorPrimary","bar","LinearProgress","LinearProgressWithLabel","Box","mr","minWidth","Math","round","PaperComponent","handle","cancel","Paper","ResendEmailsDialog","sending","setSending","sent","setSent","sendJustToPCR","setSendJustToPCR","sendingStatus","setSendingStatus","sendingProgress","setSendingProgress","setError","prevProgress","Dialog","onClose","clearInterval","handleClose","aria-labelledby","DialogTitle","Divider","DialogContent","setInterval","link","setTimeout","corporates","PayDialog","setPaymentMethod","setCorporate","payClicked","a","bookingPayChanged","RadioGroup","aria-label","Radio","Select","labelId","element","MenuItem","bottom","right","Backdrop","backdrop","CircularProgress","addMinutes","date","minutes","getTime","itemTitle","itemData","TimeStampDialog","linkTimeStamp","setLinkTimeStamp","filename","timeStamp","dateformat","setHours","bookingTimeNormalized","setMinutes","setSeconds","setMilliseconds","getDateFromBooking","samplingTimeStamp","DialogActions","ResendEmailsButton","PayButton","PayLabel","checkIconSmall","zIndex","drawer","Transition","forwardRef","Slide","BookingDialog","copied","setCopied","openResendDialog","setOpenResendDialog","openPayDialog","setOpenPayDialog","selectedBooking","setSelectedBooking","refreshData","setRefreshData","setBooking","recordChanged","setRecordChanged","fieldChanged","setFieldChanged","openUndoPayDialog","setOpenUndoPayDialog","openTimeStampDialog","setOpenTimeStampDialog","handleCloseUndoPayDialog","isChanged","bookingDialogDataChanged","undoPaymentClicked","TransitionComponent","keepMounted","aria-describedby","top","left","IconButton","clipboard","writeText","transition","minHeight","maxHeight","deleteButtonDisabled","selfIsolate","postCodeSI","addressSI","NHSNumber","ethnicity","arrivalDate","flightNumber","lastDepartedDate","travellingFrom","paid","paidBy","DialogContentText","HideNowRows","justifyItems","ExportToExcelButton","ExportToExcelButtonInline","table","borderCollapse","th","verticalAlign","fontcolor","td","topSelect","getTableTitle","BookingTable","topCount","setTopCount","openDialogExcel","setOpenDialogExcel","fromDate","setFromDate","untilDate","setUntilDate","fromDateStr","setFromDateStr","untilDateStr","seUntilDateStr","justCorporate","setJustCorporate","chkDate","setChkDate","chkForename","setChkForename","chkSurname","setChkSurname","chkDOB","setChkDOB","chkEmail","setChkEmail","chkTel","setChkTel","chkCertificate","setChkCertidicate","chkAntiBodyTest","setChkAntiBodyTest","chkextRef","setChkExtRef","chkPrice","setChkPrice","columns","field","headerName","renderCell","params","getValue","openDetailsDialog","valueFormatter","formatTimeStamp","valueGetter","placement","bookings","cachedBookings","isFetching","setData","setSelectedRow","seeDetailsDialogOpen","setSeeDetailsDialogOpen","filter","setFilter","useRef","todayStr","timeStampStr","loadData","api","trim","filteredData","toLowerCase","find","page","setPage","showCreateExcel","faFileExcel","autoComplete","InputLabel","rows","autoPageSize","onPageChange","onSelectionChange","newSelection","row","Switch","utils","DateFnsUtils","disableToolbar","format","KeyboardButtonProps","sheet","buttonText","extRef","PriceCalculator","Title","gutterBottom","children","createData","amount","emptyData","undefined","getCount","count","Chart","useTheme","loading","setLoading","result","push","fetchData","ResponsiveContainer","LineChart","XAxis","dataKey","stroke","YAxis","Label","angle","textAnchor","fill","Line","dot","depositContext","flex","bookingBox","boxShadow","getCurrentTimeSlot","now","min","getMinutes","getHours","pm","minStr","hourStr","pmStr","timeStr","getDay","getCurrentTimeSlotLabel","endTimeStr","CurrentVisits","current","setCurrent","setBookings","openDialog","setOpenDialog","currentTimeSlot","bookingCliked","_bookings","substring","getBookingsBox","seeMore","BookingView","refresh","setRefresh","Table","TableHead","TableRow","TableCell","TableBody","preventDefault","currentMenuIndex","getMenuIndex","COLORS","RADIAN","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","radius","x","cos","y","sin","dominantBaseline","ReportLabels","AverageLabel","less12Label","less24Label","less36Label","ResultsTimeReport","report","setReport","setOpen","lessThan12","lessThan24","lessThan36","PieChart","Pie","labelLine","entry","Cell","avg","lessThan12Percent","lessThan24Percent","lessThan36Percent","lessThan48","lessThan48Percent","overflow","fixedHeight","DashboardPreview","fixedHeightPaper","clsx","downloadPDFButton","UnmatchedRecords","selectedTab","disableId","smartMatchClicked","downloadLabReport","setDisableId","setSeletedTab","smartLinkId","setSmartLinkId","smartLinkDetails","setSmartLinkDetails","likelyBookings","setLikelyBookings","seeDetailsBooking","setSeeDetailsBooking","matching","setMatching","matched","setMatched","matchedBookings","lastPromise","currentPromise","e","ToggleButtonGroup","exclusive","ToggleButton","timeout","testDate","handleCheckChanged","likelihood","seeDetailsClicked","Container","ContainerPast","DayLabel","DayLabelToday","lineHight","DayLabelDisabled","BookingCountLabel","BookingCountLabelBusy","LoadingProgress","BookingCountGauge","MonthViewCell","cellIndex","daysInMonth","dayClicked","setDateStr","cellDate","setCellDate","bookingsCount","setBookingsCount","disableDay","setDisableDay","isPast","setIsPast","getMonth","calendarCache","record","method","query","fecthData","_bookingsCount","_cellIndex","_month","_daysInMonth","getDate","_day","isToday","getDayLabel","disableShrink","MAX_BOOKING_COUNT","percent","getBookingsCountGauge","CalendarUtil","getMonthRange","calendar","Calendar","SUNDAY","itermonthdates","dayLables","days","MonthView","WeekViewCell","CancelToken","overflowY","WeekView","dates","replace","overflowX","DayViewCell","filteredBookings","setFilteredBookings","dayViewCalFilter","search","borderTop","titleLabel","titleLabelToday","DayView","monthNames","fontColor","CalendarView","setMonth","setYear","setDay","firstDayofWeek","setFirstDayofWeek","weekDates","setWeekDates","mode","setMode","removeFilter","today","dayofWeek","firstdayofweek","_mode","newDay","justifyContent","newMonth","newFirstDayofWeek","endOfWeek","endofWeekStr","getCalendarTitleFromMode","endAdornment","InputAdornment","onMouseDown","AdminCalendarCache","bookingBoxSampleTaken","bookingBoxPositive","bookingBoxReportSent","getBookingClass","MenuList_Admin","MenuList_Gynae","MenuList_PCR","getMenuContent","role","getMenuRole","getMenuId","MenuList","getRole","sessionStorage","getItem","setRole","setItem","image","backgroundImage","backgroundRepeat","grey","backgroundSize","backgroundPosition","submit","alert","pageBg","appbarCenter","logoImage","appbarTitle","adminPanelLabel","SignIn","history","useMediaQuery","useHistory","password","setPassword","username","setUsername","saveChecked","setSaveChecked","showPassword","setShowPassword","setSubmiting","localStorage","signedIn","roles","src","alt","elevation","Avatar","lineHeight","required","on","textField","htmlFor","OutlinedInput","tabindex","Visibility","VisibilityOff","labelWidth","mt","iconSelected","menuText","MyMenu","selectedIndex","setSelectedIndex","List","StyledMenu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuApps","toolbar","toolbarIcon","mixins","appBar","transitions","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","menuButtonHidden","flexGrow","drawerPaper","whiteSpace","opacity","drawerPaperClose","appBarSpacer","content","userAvatar","userAvatarSelected","userAvatarBig","appBarText","appBarAppsIcon","appBarAppsIconSelected","usernameLabel","lastLoginLabel","appsLogo","appsBox","appsBoxSelected","appsAdminLabel","appsPCRLabel","appsGynaeLabel","appsInToolbar","Dashboard","isMobile","setCurrentMenuIndex","anchorUserAvatar","setAnchorUserAvatar","anchorApps","setAnchorApps","useLocation","pathname","scrollTo","appsClicked","getAppsLogo","getAppsLabel","userId","AppBar","Toolbar","edge","currentTarget","anchorEl","lastLoginTimeStamp","removeItem","Drawer","getUserIdFromToken","signOutButton","Navigator","loaded","setLoaded","authToken","signedUp","forgotPassword","startsWith","process","origin","addEventListener","fetch","response","contentType","ready","unregister","reload","checkValidServiceWorker","App","Provider","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d0e4aa4e.chunk.js","sourcesContent":["\r\nconst calculatePrice = (person) =>\r\n{\r\n\r\n    var price = 199;\r\n\r\n    if (person.tr)\r\n    {\r\n        price = 250;\r\n    }\r\n    \r\n    if (person.certificate)\r\n    {\r\n        price += 50;\r\n    }\r\n\r\n    if (person.antiBodyTest)\r\n    {\r\n        price += (99 + 50);\r\n    }\r\n\r\n    return price;\r\n\r\n}\r\n\r\nconst calculateTotalPrice = (persons) =>\r\n{\r\n    var totalPrice = 0;\r\n    for (var i = 0 ; i < persons.length ; i++)\r\n    {\r\n        totalPrice += calculatePrice(persons[i]);\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n\r\nmodule.exports = {\r\n    calculatePrice : calculatePrice,\r\n    calculateTotalPrice : calculateTotalPrice\r\n}","\r\n\r\n\r\nconst FormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(0,4)}`;\r\n}\r\n\r\nconst FormatDateFromStringWithSlash = (str) =>\r\n{\r\n    return `${str.substr(8,2)}/${str.substr(5,2)}/${str.substr(0,4)}`;\r\n}\r\n\r\nconst RevertFormatDateFromString = (str) =>\r\n{\r\n    return `${str.substr(6,4)}-${str.substr(3,2)}-${str.substr(0,2)}`;\r\n}\r\n\r\n\r\nconst FormatDateFromStringShortYear = (str) =>\r\n{\r\n    return `${str.substr(8,2)}-${str.substr(5,2)}-${str.substr(2,2)}`;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    FormatDateFromString : FormatDateFromString,\r\n    FormatDateFromStringShortYear : FormatDateFromStringShortYear,\r\n    RevertFormatDateFromString: RevertFormatDateFromString,\r\n    FormatDateFromStringWithSlash: FormatDateFromStringWithSlash\r\n}","import { createMuiTheme, responsiveFontSizes } from \"@material-ui/core\";\r\nimport { enGB } from '@material-ui/core/locale';\r\n\r\n\r\nconst black = \"#212121\";\r\nconst darkBlack = \"rgb(36, 40, 44)\";\r\nconst background = \"#f9f9f9\";\r\n\r\nconst warningLight = \"rgba(253, 200, 69, .3)\";\r\nconst warningMain = \"rgba(253, 200, 69, .5)\";\r\nconst warningDark = \"rgba(253, 200, 69, .7)\";\r\n\r\n// border\r\nconst borderWidth = 2;\r\nconst borderColor = \"rgba(0, 0, 0, 0.13)\";\r\n\r\n// breakpoints\r\nconst xl = 1920;\r\nconst lg = 1280;\r\nconst md = 960;\r\nconst sm = 600;\r\nconst xs = 0;\r\n\r\n// spacing\r\nconst spacing = 8;\r\n\r\nconst theme = createMuiTheme({\r\n\r\n  palette: {\r\n\r\n    primary: { main: \"#00a1c5\",\r\n               light: \"#5bd5f0\"\r\n              //  dark: \"#0288D1\",\r\n              //  light: \"#B3E5FC\"\r\n\r\n      },\r\n    secondary: { main: \"#f68529\" },\r\n    common: {\r\n      black,\r\n      darkBlack\r\n    },\r\n    warning: {\r\n      light: warningLight,\r\n      main: warningMain,\r\n      dark: warningDark\r\n    },\r\n    // Used to shift a color's luminance by approximately\r\n    // two indexes within its tonal palette.\r\n    // E.g., shift from Red 500 to Red 300 or Red 700.\r\n    tonalOffset: 0.2,\r\n    background: {\r\n      default: background\r\n    },\r\n    spacing\r\n  },\r\n  breakpoints: {\r\n    // Define custom breakpoint values.\r\n    // These will apply to Material-UI components that use responsive\r\n    // breakpoints, such as `Grid` and `Hidden`. You can also use the\r\n    // theme breakpoint functions `up`, `down`, and `between` to create\r\n    // media queries for these breakpoints\r\n    values: {\r\n      xl,\r\n      lg,\r\n      md,\r\n      sm,\r\n      xs\r\n    }\r\n  },\r\n  border: {\r\n    borderColor: borderColor,\r\n    borderWidth: borderWidth\r\n  },\r\n  overrides: {\r\n    MuiExpansionPanel: {\r\n      root: {\r\n        position: \"static\"\r\n      }\r\n    },\r\n    MuiTableCell: {\r\n      root: {\r\n        paddingLeft: spacing * 2,\r\n        paddingRight: spacing * 2,\r\n        borderBottom: `${borderWidth}px solid ${borderColor}`,\r\n        [`@media (max-width:  ${sm}px)`]: {\r\n          paddingLeft: spacing,\r\n          paddingRight: spacing\r\n        }\r\n      }\r\n    },\r\n    MuiDivider: {\r\n      root: {\r\n        backgroundColor: borderColor,\r\n        height: borderWidth\r\n      }\r\n    },\r\n    MuiPrivateNotchedOutline: {\r\n      root: {\r\n        borderWidth: borderWidth\r\n      }\r\n    },\r\n    MuiListItem: {\r\n      divider: {\r\n        borderBottom: `${borderWidth}px solid ${borderColor}`\r\n      }\r\n    },\r\n    MuiDialog: {\r\n      paper: {\r\n        width: \"100%\",\r\n        maxWidth: 430,\r\n        marginLeft: spacing,\r\n        marginRight: spacing\r\n      }\r\n    },\r\n    MuiTooltip: {\r\n      tooltip: {\r\n        backgroundColor: darkBlack,\r\n        fontSize: \"0.7rem\"\r\n      }\r\n    },\r\n    MuiExpansionPanelDetails: {\r\n      root: {\r\n        [`@media (max-width:  ${sm}px)`]: {\r\n          paddingLeft: spacing,\r\n          paddingRight: spacing\r\n        }\r\n      }\r\n    }\r\n  },\r\n \r\n}, enGB);\r\n\r\nexport default responsiveFontSizes(theme);\r\n","import { withStyles } from \"@material-ui/core\";\r\n\r\nconst styles = theme => ({\r\n  \"@global\": {\r\n    /**\r\n     * Disable the focus outline, which is default on some browsers like\r\n     * chrome when focusing elements\r\n     */\r\n    \"*:focus\": {\r\n      outline: 0\r\n    },\r\n    \".text-white\": {\r\n      color: theme.palette.common.white\r\n    },\r\n    \".listItemLeftPadding\": {\r\n      paddingTop: `${theme.spacing(1.75)}px !important`,\r\n      paddingBottom: `${theme.spacing(1.75)}px !important`,\r\n      paddingLeft: `${theme.spacing(4)}px !important`,\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        paddingLeft: `${theme.spacing(4)}px !important`\r\n      },\r\n      \"@media (max-width:  420px)\": {\r\n        paddingLeft: `${theme.spacing(1)}px !important`\r\n      }\r\n    },\r\n    \".container\": {\r\n      width: \"100%\",\r\n      paddingRight: theme.spacing(4),\r\n      paddingLeft: theme.spacing(4),\r\n      marginRight: \"auto\",\r\n      marginLeft: \"auto\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        maxWidth: 540\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        maxWidth: 720\r\n      },\r\n      [theme.breakpoints.up(\"lg\")]: {\r\n        maxWidth: 1170\r\n      }\r\n    },\r\n    \".row\": {\r\n      display: \"flex\",\r\n      flexWrap: \"wrap\",\r\n      marginRight: -theme.spacing(2),\r\n      marginLeft: -theme.spacing(2)\r\n    },\r\n    \".container-fluid\": {\r\n      width: \"100%\",\r\n      paddingRight: theme.spacing(2),\r\n      paddingLeft: theme.spacing(2),\r\n      marginRight: \"auto\",\r\n      marginLeft: \"auto\",\r\n      maxWidth: 1370\r\n    },\r\n    \".lg-mg-top\": {\r\n      marginTop: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        marginTop: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        marginTop: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        marginTop: `${theme.spacing(14)}px !important`\r\n      }\r\n    },\r\n    \".lg-mg-bottom\": {\r\n      marginBottom: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        marginBottom: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        marginBottom: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        marginBottom: `${theme.spacing(14)}px !important`\r\n      }\r\n    },\r\n    \".lg-p-top\": {\r\n      paddingTop: `${theme.spacing(20)}px !important`,\r\n      [theme.breakpoints.down(\"md\")]: {\r\n        paddingTop: `${theme.spacing(18)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        paddingTop: `${theme.spacing(16)}px !important`\r\n      },\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        paddingTop: `${theme.spacing(14)}px !important`\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nfunction globalStyles() {\r\n  return null;\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(globalStyles);\r\n","/* eslint-disable */\r\n\r\n// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'; \r\nconst GlobalState = React.createContext([{}, () => {}]); \r\nexport default GlobalState;","import Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nexport default function Copyright() {\r\n    return (\r\n      <Typography variant=\"body2\" align=\"center\">\r\n        {'Copyright  '}\r\n        <Link color=\"inherit\" href=\"#\">\r\n          Medical Express Clinic\r\n        </Link>{' '}\r\n        {new Date().getFullYear()}\r\n        {'.'}\r\n      </Typography>\r\n    );\r\n  }\r\n  ","import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: 'https://www.travelpcrtest.com/',\r\n  // baseURL: 'http://localhost:9090/',\r\n\r\n  headers : {\r\n      'Authorization' : 'Basic QXp1cmXEaWFtb45kOmh1bnRlcjO='\r\n  }\r\n});","import API from './api';\r\n\r\nexport default class UserService{\r\n\r\n    static setToken = (token) =>\r\n    {\r\n        this.token = token\r\n    }\r\n  \r\n    static signIn = (payload) =>\r\n    {\r\n        return  API.post('/api/medex/user/signin', payload)\r\n    }\r\n\r\n    static checkToken = (payload) =>\r\n    {\r\n        return  API.post('/api/medex/user/checktoken', payload)\r\n    }\r\n\r\n}","import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  // baseURL: 'http://localhost:9090',\r\n  baseURL: 'https://www.travelpcrtest.com',\r\n  headers : {\r\n      'Authorization' : 'Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=',\r\n       'Content-Type': 'application/json',\r\n  }\r\n});","import API from './api';\r\nimport axiosRetry from 'axios-retry';\r\n\r\nexport default class BookService {\r\n\r\n\r\n   static payBooking = (bookingId, paymentMethod, corporate) =>\r\n   {\r\n      return API.post(`/api/book/paybooking?id=${bookingId}&paymentmethod=${paymentMethod}&corporate=${corporate}`);\r\n   }\r\n\r\n   static unPayBooking = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/unpaybooking?id=${bookingId}`);\r\n   }\r\n\r\n   static getTestsTimeReport = () =>\r\n   {\r\n      axiosRetry( API, { retries: 3,  retryDelay: (retryCount) => {\r\n         return retryCount * 1000;\r\n       } });\r\n      return API.get(`/api/book/getteststimereport`);\r\n   }\r\n\r\n   static getBookingsStatsByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsstatsbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/book/getbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n   static getAllBookingsCountByDateStr = (dateStr) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingscountbydatestr?date=${dateStr}`);\r\n   }\r\n\r\n   static getAllBookingsCountByDateStrandTime = (dateStr, time, source) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingscountbydatestrandtime?date=${dateStr}&time=${time}`, {cancelToken: source.token});\r\n   }\r\n\r\n   static getAllBookingsByDateStrandTime = (dateStr, time) =>\r\n   {\r\n      return API.get(`/api/book/getallbookingsbydatestrandtime?date=${dateStr}&time=${time}`);\r\n   }\r\n\r\n\r\n\r\n\r\n   static changeBackToBookingMade = (id) =>\r\n   {\r\n      return API.post(`/api/book/changebacktobookingmade?id=${id}`);\r\n   }\r\n\r\n   static resendEmailsWithBookingId = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/resendemailswithbookingid?id=${bookingId}`);\r\n   }\r\n\r\n   static regenerateFilesWithBookingId  = (bookingId) =>\r\n   {\r\n      return API.post(`/api/book/regeneratefileswithbookingid?id=${bookingId}`);\r\n   }\r\n\r\n\r\n   static resendEmails  = (linkId) =>\r\n   {\r\n      return API.post(`/api/book/resendemails?id=${linkId}`);\r\n   }\r\n\r\n   static regenerateFiles  = (linkId) =>\r\n   {\r\n      return API.post(`/api/book/regeneratefiles?id=${linkId}`);\r\n   }\r\n\r\n   static matchRecords  = (bookingId, linkId) =>\r\n   {\r\n      return API.post(`/api/book/matchrecords?bookingid=${bookingId}&linkid=${linkId}`);\r\n   }\r\n\r\n   static findBestMatches = (id) =>\r\n   {\r\n      return API.get(`/api/book/getbestmatchedbookings?id=${id}`);\r\n   } \r\n\r\n   static getLinkDetails = (id) =>\r\n   {\r\n      return API.get(`/api/book/getlinkdetails?id=${id}`);\r\n   } \r\n\r\n   static getLinkDetailsWithBookingId = (id) =>\r\n   {\r\n      return API.get(`/api/book/getlinkdetailswithbookingid?id=${id}`);\r\n   } \r\n\r\n\r\n\r\n   static findBookingByRefBirthDate = (bookingRef, birthDate) =>\r\n   {\r\n      return API.get(`/api/book/getbookingsbyrefandbirthdate?ref=${bookingRef}&birthdate=${birthDate}`);\r\n   }\r\n\r\n   static updateBooking = (payload) =>\r\n   {\r\n      return API.post(`/api/book/updatebookappointment`, payload);\r\n   } \r\n\r\n   static updateBookingTime = (payload) =>\r\n   {\r\n      return API.post(`/api/book/updatebookappointmenttime`, payload);\r\n   } \r\n\r\n   static deleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/book/deletebookappointment?id=${id}`);\r\n   } \r\n\r\n   static unDeleteBooking = (id) =>\r\n   {\r\n      return API.post(`/api/book/undeletebookappointment?id=${id}`);\r\n   } \r\n   \r\n   \r\n    static getBookingsByRef = (ref) =>\r\n    {\r\n       return API.get(`/api/book/getbookingsbyref?ref=${ref}`);\r\n    }\r\n\r\n    static getBookingById = (id) =>\r\n    {\r\n       return API.get(`/api/book/getbookingbyid?id=${id}`);\r\n    }\r\n\r\n    static getAllBookings = (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n      return API.get(`/api/book/getallbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getLateBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getlatebookings`);\r\n    }\r\n\r\n    static getDeletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getdeletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getLiveBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getlivebookings`);\r\n    }\r\n\r\n    static getCompletedBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getcompletedbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getPositiveBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getpositivebookings`);\r\n    }\r\n\r\n\r\n\r\n    static getTodayBookings= () =>\r\n    {\r\n       return API.get(`/api/book/gettodaybookings`);\r\n    }\r\n\r\n    static getOldBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getoldbookings?limit=${limit}`);\r\n    }\r\n\r\n    static getFutureBookings= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getfuturebookings?limit=${limit}`);\r\n    }\r\n\r\n    static getRecentBookings= () =>\r\n    {\r\n       return API.get(`/api/book/getrecentbookings`);\r\n    }\r\n\r\n    static getRecentBookingsAll= (limit) =>\r\n    {\r\n      if (!limit) limit = 25 \r\n       return API.get(`/api/book/getrecentbookingsall?limit=${limit}`);\r\n    }\r\n\r\n    static getUnmatchedRecords= () =>\r\n    {\r\n       return API.get(`/api/book/getunmatchedrecords`);\r\n    }\r\n\r\n    static getUnmatchedRecordsArchived= () =>\r\n    {\r\n       return API.get(`/api/book/getunmatchedrecordsarchived`);\r\n    }\r\n\r\n    static archiveRecord = (id) =>\r\n    {\r\n       return API.post(`/api/book/archiverecord?id=${id}`);\r\n    }\r\n\r\n    static unArchiveRecord = (id) =>\r\n    {\r\n       return API.post(`/api/book/unarchiverecord?id=${id}`);\r\n    }\r\n\r\n\r\n}","import API from './api';\r\n\r\nexport default class PDFService {\r\n\r\n    static downloadCovidForm1 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform1?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        id: id,\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadCovidForm2 = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadcovidform2?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfResult = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfresult?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfCert = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdfcert?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n    static downloadPdfLabReport = (id) =>\r\n    {\r\n       return API.get(`/api/pdf/downloadpdflabreport?id=${id}`, {\r\n        responseType: 'arraybuffer',\r\n        headers: {\r\n            Accept: 'application/pdf',\r\n        }\r\n        });\r\n    }\r\n\r\n\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Button, Checkbox, FormControlLabel, Link, TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    // textAlign : \"center\",\r\n    // fontWeight : \"500\",\r\n    // margin: \"10px\",\r\n    // backgroundColor : \"#eee\",\r\n    // padding : \"10px\",\r\n    // borderRadius : \"4px\"\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#555\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\"\r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\nexport default function PersonsBox() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [expanded, setExpanded] = React.useState('panel0');\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [gender, setGender] = React.useState('');\r\n    const [title, setTitle] = React.useState('');\r\n    const [forename, setForename] = React.useState('');\r\n    const [surname, setSurnme] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [dob, setDOB] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [postCode, setPostCode] = React.useState('');\r\n    const [address, setAddress] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n    const [passport, setPassport] = React.useState('');\r\n    const [passport2, setPassport2] = React.useState('');\r\n    const [certificate, setCertificate] = React.useState(false);\r\n    const [antiBodyTest, setAntiBodyTest] = React.useState(false);\r\n\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n    }\r\n\r\n    const genderChanged = (event) =>\r\n    {\r\n      setGender(event.target.value);\r\n    }\r\n\r\n    const titleChanged = (event) =>\r\n    {\r\n      setTitle(event.target.value);\r\n    }\r\n\r\n    const forenameChanged = (event) =>\r\n    {\r\n      setForename(event.target.value);\r\n    }\r\n\r\n    const surnameChanged = (event) =>\r\n    {\r\n      setSurnme(event.target.value);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n    }\r\n\r\n    const dobChanged = (event) =>\r\n    {\r\n      setDOB(event.target.value);\r\n      setValidationError({...validationError, dobError : false});\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n    }\r\n\r\n    const postCodeChanged = (event) =>\r\n    {\r\n      setPostCode(event.target.value);\r\n    }\r\n\r\n    const addressChanged = (event) =>\r\n    {\r\n      setAddress(event.target.value);\r\n    }\r\n\r\n    const passportChanged = (event) =>\r\n    {\r\n      setPassport(event.target.value);\r\n    }\r\n\r\n    const passport2Changed = (event) =>\r\n    {\r\n      setPassport2(event.target.value);\r\n    }\r\n\r\n    const certificateChanged = (event) =>\r\n    {\r\n      setCertificate(event.target.checked);\r\n    }\r\n\r\n    const antiBodyTestChanged = (event) =>\r\n    {\r\n      setAntiBodyTest(event.target.checked);\r\n    }\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n      setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }else if (status === 'sample_taken')\r\n      {\r\n        return (\r\n          <span  className={classes.SampleTakenLabel}> Sample Taken </span>\r\n        );\r\n    \r\n      }else if (status === 'report_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportSentLabel}> Report Sent </span>\r\n        );\r\n    \r\n      }else if (status === 'report_cert_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportCertSentLabel}> {`Report & Certificate Sent`} </span>\r\n        );\r\n      }\r\n      else if (status === 'positive')\r\n      {\r\n        return (\r\n          <span  className={classes.PositiveLabel}> {`POSITIVE`} </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n   const downloadForm1 = (id) =>\r\n   {\r\n       PDFService.downloadCovidForm1(id).then( (res) => \r\n       {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n   }\r\n\r\n   const downloadForm2 = (id) =>\r\n   {\r\n        PDFService.downloadCovidForm2(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadLabResults = (id) =>\r\n   {\r\n        PDFService.downloadPdfResult(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadCertificate = (id) =>\r\n   {\r\n        PDFService.downloadPdfCert(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setForename(person.forenameCapital);\r\n         setSurnme(person.surnameCapital);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime.toUpperCase());\r\n         setGender(person.gender.toUpperCase());\r\n         setTitle(person.title.toUpperCase());\r\n         setEmail(person.email.toUpperCase());\r\n         setDOB(FormatDateFromString(person.birthDate));\r\n         setTel(person.phone.toUpperCase());\r\n         setPostCode(person.postCode.toUpperCase());\r\n         setAddress(person.address.toUpperCase());\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber)\r\n         {\r\n           setPassport(person.passportNumber.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber2)\r\n         {\r\n           setPassport2(person.passportNumber2.toUpperCase());\r\n         }\r\n        \r\n         setCertificate(person.certificate);\r\n         setAntiBodyTest(person.antiBodyTest);\r\n\r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.certificate = certificate;\r\n          booking.antiBodyTest = antiBodyTest;\r\n          booking.gender = gender;\r\n          booking.title = title;\r\n          booking.birthDate = RevertFormatDateFromString(dob);\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.postCode = postCode;\r\n          booking.address = address;\r\n          booking.passportNumber = passport;\r\n          booking.passportNumber2 = passport2;\r\n          booking.forename = forename;\r\n          booking.surname = surname;\r\n          booking.notes = notes;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateDate(booking.birthDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, dobError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const changeBackToBookingMade = (event, id) =>\r\n   {\r\n     setSaving(true);\r\n     bookingService.changeBackToBookingMade(id).then(res => {\r\n       setSaving(false);\r\n       setState(state => ({...state, RefreshPersonInfo : !state.RefreshPersonInfo}));\r\n     }).catch(err => {\r\n       console.log(err);\r\n       setSaving(false);\r\n     })\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n          \r\n      <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"stretch\">\r\n          <div className={classes.title}> Following Records Found :</div>\r\n\r\n          {state.foundRecords.map((person,index) => (\r\n   \r\n                <Grid item xs={12} md={12} key={`panel${index}`}>\r\n                <div className={classes.root}>\r\n                    <Accordion className={person.deleted ? classes.AccordionDeleted : classes.Accordion} expanded={expanded === `panel${index}`} onChange={handleChange(`panel${index}`)}>\r\n                    <AccordionSummary className={person.deleted ? classes.lineThrough : ''}\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls=\"panel1bh-content\"\r\n                        id={`panel${index}bh-header`}\r\n                    >\r\n                      {person.deleted && (\r\n                          <Tooltip  title=\"This record has been deleted.\">\r\n                            <DeleteIcon  style={{padding: 0, margin: 0,  color: \"#fff\", fontSize: 25 }}/>\r\n                        </Tooltip>\r\n                      )}\r\n\r\n                        <Typography className={classes.heading}> {`#${index+1}`} </Typography>\r\n                        <Typography className={classes.secondaryHeading}>\r\n                        {`${person.forenameCapital} ${person.surnameCapital}`}\r\n                        </Typography>\r\n                    </AccordionSummary>\r\n\r\n                    <AccordionDetails className={classes.infoDetails}>\r\n                        \r\n\r\n\r\n                        <ul className={classes.ul}>\r\n\r\n                        {/* Restore Functionality ******************************************* */}  \r\n                        <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"500\", paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\" , color:\"#fff\"}}>\r\n                                Are you sure you want to restore this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={!person.deleted || (restoreMode.restore && restoreMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleRestoreModeChanged(true, person)}}\r\n                                    className={classes.RestoreButton}\r\n                                 >\r\n                                   Restore This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Restore this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(restoreMode.restore && restoreMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {restoring}\r\n                                    onClick = {() => {handleRestoreModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n\r\n                           {/*  ******************************************************************* */}\r\n\r\n                              {/* Edit Functionality ******************************************* */}\r\n\r\n                            <li hidden={person.deleted || deleteMode.delete || (editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleEditModeChanged(true, person)}}\r\n                                    className={classes.EditButton}\r\n                                 >\r\n                                    Edit Booking Info\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    Save Changes\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(editMode.edit && editMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {saving}\r\n                                    onClick = {() => {handleEditModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                            \r\n                            {/* ****************************************************************************************** */}\r\n\r\n\r\n                            {/* Delete Functionality ******************************************* */}\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                              <div style={{fontWeight: \"600\",  paddingBottom: \"5px\", paddingLeft: \"5px\", fontSize:\"16px\"}}>\r\n                                Are you sure you want to delete this record?\r\n                              </div>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted ||  editMode.edit || (deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {handleDeleteModeChanged(true, person)}}\r\n                                    className={classes.DeleteButton}\r\n                                 >\r\n                                   Delete This Record\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id  === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, person)}}\r\n                                    className={classes.SaveButton}\r\n                                 >\r\n                                    YES, Delete this!\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={!(deleteMode.delete && deleteMode.person._id === person._id)}>\r\n                                 <Button\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"default\"\r\n                                    disabled = {deleting}\r\n                                    onClick = {() => {handleDeleteModeChanged(false, null)}}\r\n                                    className={classes.CancelButton}\r\n                                 >\r\n                                    Cancel\r\n                                </Button>\r\n                            </li>\r\n                                 \r\n                            {/* ****************************************************************************************** */}\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED DATE</span> \r\n                            \r\n\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                   {FormatDateFromString(person.bookingDate) }\r\n                                  </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingDateError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingDate}\r\n                                                      onChange = {bookingDateChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>BOOKED TIME</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.bookingTime.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.bookingTimeError}\r\n                                                      className={classes.TextBox} \r\n                                                      value={bookingTime}\r\n                                                      onChange = {bookingTimeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n\r\n\r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>GENDER</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.gender?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={gender}\r\n                                                      onChange = {genderChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>TITLE</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.title?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                          <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={title}\r\n                                                      onChange = {titleChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                             \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                            <span className={classes.infoTitle}>FORENAME</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.forenameCapital}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={forename}\r\n                                                      onChange = {forenameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span> \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SURNAME</span>\r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.surnameCapital}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={surname}\r\n                                                      onChange = {surnameChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>EMAIL</span> \r\n                                       <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.email?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={email}\r\n                                                      onChange = {emailChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>D.O.B</span>\r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                            {FormatDateFromString(person.birthDate) }\r\n                                          </span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      error={validationError.dobError} \r\n                                                      className={classes.TextBox} \r\n                                                      value={dob}\r\n                                                      onChange = {dobChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TEL</span>\r\n                                 <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.phone?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={tel}\r\n                                                      onChange = {telChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>POST CODE</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.postCode?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={postCode}\r\n                                                      onChange = {postCodeChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>ADDRESS</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.address?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={address}\r\n                                                      onChange = {addressChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>PASSPORT NO.</span>\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.passportNumber?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={passport}\r\n                                                      onChange = {passportChanged}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>  \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>SECOND PASSPORT NO.</span> \r\n                                        <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.passportNumber2?.toUpperCase()}</span>  \r\n                                        <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                        <TextField \r\n                                                      fullWidth\r\n                                                      className={classes.TextBox} \r\n                                                      value={passport2}\r\n                                                      onChange = {passport2Changed}\r\n                                                      inputProps= {{\r\n                                                          style:{\r\n                                                            padding: 0\r\n                                                          }\r\n                                                        }\r\n                                                      }\r\n                                                      > \r\n                                          </TextField> \r\n                                        </span>   \r\n                            </li>\r\n\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>REQUEST FOR CERTIFICATE</span> \r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.certificate ? ( <CheckIcon className={classes.checkIcon}/> ) :  <CloseIcon className={classes.closeIcon}/> }</span>\r\n                                <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                    <FormControlLabel className={classes.formControl} \r\n                                          control={<Checkbox className={classes.formControl}  color=\"secondary\" name=\"certificate\" checked={certificate} onChange={certificateChanged} />}\r\n                                          label=''\r\n                                        />\r\n                                </span>    \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>REQUEST FOR ANTIBODY TEST</span>\r\n                                <span hidden={(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>{person.antiBodyTest ? <CheckIcon className={classes.checkIcon}/> :  <CloseIcon className={classes.closeIcon}/> }</span>  \r\n                                <span hidden={!(editMode.edit && editMode.person._id  === person._id)} className={classes.infoData}>\r\n                                    <FormControlLabel className={classes.formControl} \r\n                                          control={<Checkbox className={classes.formControl}  color=\"secondary\" name=\"certificate\" checked={antiBodyTest} onChange={antiBodyTestChanged} />}\r\n                                          label=''\r\n                                        />\r\n                                </span>   \r\n                            </li>\r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>STATUS</span> \r\n                                {getStatusLabel(person.status)} \r\n                                \r\n                                {person.status === \"sample_taken\" &&\r\n                                          !(\r\n                                            editMode.edit && editMode.person._id === person._id\r\n                                          ) && (\r\n                                            <Button \r\n                                                  variant=\"outlined\"\r\n                                                  color=\"primary\"\r\n                                                  disabled = {saving}\r\n                                                  onClick = {event => changeBackToBookingMade(event,person._id)}\r\n\r\n                                                    >\r\n                                              Change Back To Booking Made\r\n                                            </Button>\r\n                                          )}\r\n\r\n                            </li>\r\n      \r\n                            <li className={classes.li}>\r\n                                <span className={classes.infoTitle}>TOTAL CHARGES</span> <span className={calculatePrice(person) <= 199 ? classes.infoDataCharges : classes.infoDataChargesHigher}>{`${calculatePrice(person)}`}</span>  \r\n                            </li>\r\n\r\n                            <li  hidden={person.deleted} >\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadForm1(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Registration Form\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li  hidden={person.deleted}>\r\n                                  <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadForm2(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm2(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                    >\r\n                                    Download Lab Form\r\n                                 </Button>\r\n                            </li>\r\n\r\n                            <li hidden={ person.deleted || (person.status !== 'report_sent' && person.status !== 'report_cert_sent') }>\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadLabResults(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Lab Results\r\n                                </Button>\r\n                            </li>\r\n\r\n                            <li hidden={person.deleted || person.status !== 'report_cert_sent'}>\r\n                                 <Button\r\n                                    startIcon = {<PrintIcon/>}\r\n                                    type=\"button\"\r\n                                    fullWidth\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                    onClick = {() => {downloadCertificate(person._id)}}\r\n                                    // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                                    className={classes.DownloadForm}\r\n                                 >\r\n                                    Download Certificate\r\n                                </Button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </AccordionDetails>\r\n                    </Accordion>\r\n                </div>\r\n            </Grid> \r\n          ))}\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport PropTypes from 'prop-types';\r\nimport MaskedInput from 'react-text-mask';\r\nimport { FormControl, Grid, Input, InputLabel } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\nimport PersonsBox from './PersonsBox';\r\n\r\n\r\nconst isBoolean = (param) => typeof(param) === \"boolean\"\r\n\r\nconst useFocus = (initialFocus = false, id = \"\") => {\r\n    const [focus, setFocus] = React.useState(initialFocus)\r\n    const setFocusWithTrueDefault = (param) => setFocus(isBoolean(param)? param : true)\r\n    return ([\r\n        setFocusWithTrueDefault, {\r\n            autoFocus: focus,\r\n            key: `${id}${focus}`,\r\n            onFocus: () => setFocus(true),\r\n            onBlur: () => setFocus(false),\r\n        },\r\n    ])\r\n}\r\n\r\n\r\nfunction TextMaskCustom(props) {\r\n    const { inputRef, ...other } = props;\r\n  \r\n    return (\r\n      <MaskedInput\r\n        {...other}\r\n        ref={(ref) => {\r\n          inputRef(ref ? ref.inputElement : null);\r\n        }}\r\n        mask={[/\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/]}\r\n        // placeholderChar={'\\u2000'}\r\n        showMask\r\n      />\r\n    );\r\n  }\r\n  \r\n  TextMaskCustom.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    root: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n        marginTop: \"20px\"\r\n      },  \r\n\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n\r\n    Find: {\r\n        width: \"80px\"\r\n    },\r\n\r\n    Clear:{\r\n        marginRight: \"20px\"\r\n    },\r\n\r\n    title:{\r\n        marginTop : \"20px\"\r\n    },\r\n\r\n    TextBox:{\r\n        marginTop: \"30px\",\r\n        \"& > *\" :\r\n        {\r\n            textAlign: \"center\"\r\n        },\r\n  \r\n    },\r\n\r\n    TextField:{\r\n\r\n    },\r\n\r\n    NoRecordsFound:{\r\n        marginTop: \"20px\",\r\n        color: \"red\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"14px\",\r\n    },\r\n\r\n    PersonsBox:{\r\n        marginTop : \"20px\",\r\n        marginBottom: \"50px\"\r\n    }\r\n\r\n}));\r\n\r\nexport default function FindByRef() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  \r\n  const [setFocus, focusProps] = useFocus(true);\r\n\r\n//   useEffect( () =>\r\n//   {\r\n//      findRecords();\r\n//   }, [state.findRecords]);\r\n\r\n useEffect ( () => {\r\n    setState(state => ({...state, foundRecords : []}));\r\n }, [])\r\n\r\n  useEffect( () => {\r\n    BookService.getBookingsByRef(state.ref).then( (res)=>\r\n    {\r\n        if (res.data.length > 0)\r\n        {\r\n            setState(state => ({...state, foundRecords : res.data}));\r\n        }\r\n    });\r\n    }, [state.RefreshPersonInfo]);\r\n\r\n    const handleChange = (event) =>\r\n    {\r\n        setState(state => ({...state, ref : event.target.value}));\r\n        setState(state => ({...state, refError : false})); \r\n    }\r\n\r\n    const clearField = () =>\r\n    {\r\n        setState(state => ({...state, refError : false})); \r\n        setState(state => ({...state, ref : '___-___-___'}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n        setFocus();\r\n    }\r\n\r\n    const findRecords = () =>\r\n    {\r\n        if (!state.ref || state.ref.indexOf('_') >= 0)\r\n        {\r\n            setState(state => ({...state, refError : true}));  \r\n            return;\r\n        }\r\n\r\n        setState(state => ({...state, submiting : true}));\r\n        setState(state => ({...state, foundRecords : []}));\r\n\r\n        BookService.getBookingsByRef(state.ref).then( (res)=>\r\n        {\r\n            setState(state => ({...state, submiting : false}));\r\n            if (res.data.length > 0)\r\n            {\r\n                setState(state => ({...state, foundRecords : res.data}));\r\n            }\r\n            else\r\n            {\r\n                setState(state => ({...state, foundRecords : null}));\r\n            }\r\n            \r\n            console.log(res.data);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n            setState(state => ({...state, submiting : false}));\r\n        });\r\n    }\r\n\r\n  return (\r\n    <React.Fragment>\r\n        <CssBaseline />\r\n        <div className={classes.title}>\r\n            <Typography component=\"h6\" variant=\"h6\" align=\"center\">\r\n                Find Booking Appoinments\r\n            </Typography>  \r\n        </div> \r\n\r\n        <Grid container direction=\"column\" spacing={1} justify=\"flex-start\"  alignItems=\"center\">\r\n\r\n        <Grid item xs={12} md={12}>\r\n            <FormControl className={classes.TextBox}>\r\n                <TextField\r\n                    {...focusProps}\r\n                    autoFocus \r\n                    pattern=\"[0-9]*\"\r\n                    error = {state.refError ? true : false} \r\n                    value = {state.ref}\r\n                    className = {classes.TextField}\r\n                    width = \"50px\"\r\n                    onChange={handleChange}\r\n                    label=\"Reference No.\"\r\n                    helperText=\"Enter Your 9-digits Reference No.\"\r\n                    name=\"refNo\"\r\n                    id=\"refNo\"\r\n                    variant=\"outlined\"\r\n                    \r\n                    size=\"medium\"\r\n                    margin=\"normal\"\r\n                    fullWidth = {true}\r\n                    InputProps={{\r\n                        inputComponent: TextMaskCustom,\r\n                        style: { textAlign: 'center', fontSize:\"24px\", width: \"210px\", paddingLeft: \"20px\" }\r\n                    }}\r\n\r\n                    onKeyPress= {event => {\r\n                        if (event.key === 'Enter') {\r\n                            findRecords();\r\n                        }\r\n                      }}\r\n                />         \r\n            </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n               \r\n                <Button\r\n                    disabled = {state.submiting}\r\n                    color=\"default\"\r\n                    onClick = {clearField}\r\n                    onTouchTap = {clearField}\r\n                    className={classes.Clear}\r\n                >\r\n                    Clear \r\n                </Button>  \r\n            \r\n                <Button\r\n                    type=\"button\"\r\n                    disabled = {state.submiting}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = {findRecords}\r\n                    onTouchTap = {findRecords}\r\n                    className={classes.Find}\r\n                >\r\n                    Find \r\n                </Button>  \r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={12}>\r\n\r\n                    \r\n\r\n            {state.foundRecords && state.foundRecords.length > 0 && (\r\n                <React.Fragment>\r\n\r\n                    <div className={classes.PersonsBox}>\r\n                          <PersonsBox/>\r\n                    </div>\r\n                    \r\n\r\n\r\n                </React.Fragment>\r\n            )}   \r\n\r\n            {!state.foundRecords && (\r\n                <React.Fragment>\r\n\r\n                <div className={classes.root}>\r\n                    <Alert severity=\"error\"> <strong>No Records Found !</strong> <br/> Please check you reference number again.</Alert>\r\n                </div> \r\n                   \r\n                </React.Fragment>\r\n            )}\r\n\r\n        </Grid>\r\n        \r\n        \r\n        </Grid>\r\n        \r\n    </React.Fragment>\r\n   \r\n  );\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  Link,\r\n  makeStyles,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\", //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#2f942e\",\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography\r\n          style={{ fontWeight: \"800\", color: \"#5e855e\" }}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n        >{`${Math.round(props.value)}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function ResendEmailsDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [sending, setSending] = React.useState(false);\r\n  const [sent, setSent] = React.useState(false);\r\n\r\n  const [sendJustToPCR, setSendJustToPCR] = React.useState(false);\r\n\r\n  const [sendingStatus, setSendingStatus] = React.useState(\"\");\r\n\r\n  const [sendingProgress, setSendingProgress] = React.useState(10);\r\n\r\n  const [error, setError] = React.useState(false);\r\n\r\n  const getProgress = (status) => {\r\n    console.log(`status : ${status}`);\r\n\r\n    if (status === \"downloadFailed\") return 10;\r\n    else if (status === \"downloading\") return 30;\r\n    else if (status === \"downloadSuccess\") return 70;\r\n    else if (status === \"sent\") return 100;\r\n    else return 0;\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSending(false);\r\n    setSent(false);\r\n    setError(false);\r\n    clearInterval(interval);\r\n    props.handleClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSendingProgress((prevProgress) =>\r\n      prevProgress >= 100 ? 100 : getProgress(sendingStatus)\r\n    );\r\n  }, [sendingStatus]);\r\n\r\n  const resendFilesClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus(\"downloadFailed\");\r\n    setSendJustToPCR(true);\r\n\r\n    BookService.regenerateFilesWithBookingId(props.booking._id)\r\n      .then((res) => {\r\n        interval = setInterval(() => {\r\n          BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n            (res) => {\r\n              if (res.data.status === \"OK\") {\r\n                setSendingStatus(res.data.link.status);\r\n\r\n                if (res.data.link.status === \"sent\") {\r\n                  setSending(false);\r\n                  setSent(true);\r\n                  clearInterval(interval);\r\n                }\r\n              } else if (res.data.status === \"FAILED\") {\r\n                setSending(false);\r\n                setSent(false);\r\n                clearInterval(interval);\r\n                setError(true);\r\n              }\r\n            }\r\n          );\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n          setError(true);\r\n          clearInterval(interval);\r\n        }, 60000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSending(false);\r\n      });\r\n  };\r\n\r\n  const resendEmailsClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus(\"downloadFailed\");\r\n\r\n    BookService.resendEmailsWithBookingId(props.booking._id)\r\n      .then((res) => {\r\n        interval = setInterval(() => {\r\n          BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n            (res) => {\r\n              if (res.data.status === \"OK\") {\r\n                setSendingStatus(res.data.link.status);\r\n\r\n                if (res.data.link.status === \"sent\") {\r\n                  setSending(false);\r\n                  setSent(true);\r\n                  clearInterval(interval);\r\n                }\r\n              } else if (res.data.status === \"FAILED\") {\r\n                setSending(false);\r\n                setSent(false);\r\n                clearInterval(interval);\r\n                setError(true);\r\n              }\r\n            }\r\n          );\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n          setError(true);\r\n          clearInterval(interval);\r\n        }, 60000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setSending(false);\r\n      });\r\n  };\r\n\r\n  const cancelResendEmailsClicked = (event) => {\r\n    props.handleClose();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"md\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <SendIcon style={{ color: \"#2f942e\", fontSize: \"2rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#2f942e\",\r\n                      paddingBottom: \"12px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    RESEND EMAILS{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"230px\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  spacing={1}\r\n                  alignItems=\"center\"\r\n                >\r\n                  {!sent && !sending && (\r\n                    <React.Fragment>\r\n                      <Grid item>\r\n                        <div\r\n                          style={{\r\n                            paddingTop: \"5px\",\r\n                            fontSize: \"1rem\",\r\n                            fontWeight: \"500\",\r\n                            color: \"#555\",\r\n                          }}\r\n                        >\r\n                          Do you want to Resend the LAB Report{\" \"}\r\n                          {props.booking.certificate ? \" and Certificate\" : \"\"}{\" \"}\r\n                          Now?\r\n                        </div>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.resendButton}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={resendEmailsClicked}\r\n                        >\r\n                          YES ! RESEND THE EMAILS\r\n                        </Button>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.cancelButton}\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          onClick={cancelResendEmailsClicked}\r\n                        >\r\n                          NO ! NOT NOW\r\n                        </Button>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <Button\r\n                          disabled={sending || sent}\r\n                          className={classes.resendFilesButton}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={resendFilesClicked}\r\n                        >\r\n                          Just Generate The Files and send to\r\n                          pcrresults@medicalexpressclinic.co.uk\r\n                        </Button>\r\n                      </Grid>\r\n                    </React.Fragment>\r\n                  )}\r\n\r\n                  {error && !sending && !sent && (\r\n                    <Grid item>\r\n                      <Alert\r\n                        style={{\r\n                          marginTop: \"10px\",\r\n                          paddingLeft: \"50px\",\r\n                          paddingRight: \"50px\",\r\n                        }}\r\n                        severity=\"error\"\r\n                      >\r\n                        Error!  Something is wrong with this record!\r\n                      </Alert>\r\n                    </Grid>\r\n                  )}\r\n\r\n                  {(sending || sent) && (\r\n                    <Grid item>\r\n                      <div\r\n                        style={{\r\n                          paddingTop: \"50px\",\r\n                          color: \"#2f942e\",\r\n                          fontWeight: \"600\",\r\n                          fontSize: \"1rem\",\r\n                        }}\r\n                      >\r\n                        {sending && !sent && \"Sending ...\"}\r\n\r\n                        {sent && !sendJustToPCR && (\r\n                          <Alert\r\n                            style={{\r\n                              marginTop: \"10px\",\r\n                              paddingLeft: \"50px\",\r\n                              paddingRight: \"50px\",\r\n                            }}\r\n                            severity=\"success\"\r\n                          >\r\n                            Success!  The LAB Report{\" \"}\r\n                            {props.booking.certificate\r\n                              ? \" and Certificate \"\r\n                              : \" \"}{\" \"}\r\n                            Successfully Sent.\r\n                          </Alert>\r\n                        )}\r\n\r\n                        {sent && sendJustToPCR && (\r\n                          <Alert\r\n                            style={{\r\n                              marginTop: \"10px\",\r\n                              paddingLeft: \"50px\",\r\n                              paddingRight: \"50px\",\r\n                            }}\r\n                            severity=\"success\"\r\n                          >\r\n                            Success!  The LAB Report{\" \"}\r\n                            {props.booking.certificate\r\n                              ? \" and Certificate \"\r\n                              : \" \"}{\" \"}\r\n                            Successfully Sent Just to\r\n                            pcrresults@medicalexpressclinic.co.uk .\r\n                          </Alert>\r\n                        )}\r\n                      </div>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                {(sending || sent) && (\r\n                  <React.Fragment>\r\n                    <div\r\n                      style={{\r\n                        marginTop: \"10px\",\r\n                        width: \"50%\",\r\n                        marginLeft: \"27%\",\r\n                      }}\r\n                    >\r\n                      <LinearProgressWithLabel\r\n                        variant=\"determinate\"\r\n                        color=\"primary\"\r\n                        value={sendingProgress}\r\n                      />\r\n                    </div>\r\n\r\n                    <div\r\n                      style={{\r\n                        paddingTop: \"30px\",\r\n                        color: \"#2f942e\",\r\n                        fontWeight: \"600\",\r\n                        fontSize: \"1rem\",\r\n                        marginLeft: \"45%\",\r\n                      }}\r\n                    >\r\n                      {sending && !sent && \"PLEASE WAIT ...\"}\r\n                    </div>\r\n                  </React.Fragment>\r\n                )}\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","export const corporates = [\r\n    'Visa Medical'\r\n]","import React, {useEffect, useRef, useState} from 'react';\r\nimport BookService from './services/BookService';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Backdrop, Button, Checkbox, CircularProgress, Divider, FormControlLabel, Grid, InputLabel, Link, makeStyles, MenuItem, Select, TextField, Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\n\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport { corporates } from './Corporates';\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  archiveButton: {\r\n\r\n  },\r\n\r\n  smartMatchButton: {\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    marginRight : \"10px\"\r\n    // padding: \"10px\"  \r\n  },\r\n\r\n  infoTitle:  {\r\n    fontWeight: \"400\"\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\"\r\n  },\r\n\r\n  matchButton:\r\n  {\r\n    marginTop: \"30px\",\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendButton:\r\n  {\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendFilesButton:{\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  cancelButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"90px\",\r\n    paddingRight: \"90px\"   \r\n  },\r\n  \r\n  \r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\" //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: '#2f942e',\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography style={{fontWeight:\"800\", color :  \"#5e855e\"  }} variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value,\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default function PayDialog(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n  const [paymentMethod, setPaymentMethod] = useState('credit card');\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const paymentMethodChanged = (event) =>\r\n  {\r\n    setPaymentMethod(event.target.value);\r\n  }\r\n\r\n  const handleClose = () =>\r\n  {\r\n      if (saving)\r\n        return;\r\n\r\n      props.handleClose();  \r\n      setPaymentMethod('credit card');\r\n      setCorporate(corporates[0]);\r\n      setSaving(false);\r\n  }\r\n\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n\r\n  const payClicked = async () =>\r\n  {\r\n    setSaving(true);\r\n\r\n    try\r\n    {\r\n         await BookService.payBooking(props.booking._id,paymentMethod, paymentMethod === 'corporate' ? corporate : '');\r\n         setSaving(false);\r\n         setState(state => ({...state, bookingPayChanged : !state.bookingPayChanged ? true : false}));\r\n         handleClose();\r\n    }\r\n    catch(err)\r\n    {\r\n        console.error(err);\r\n        setSaving(false);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n        {props.booking && ( \r\n\r\n                <React.Fragment>\r\n<Dialog\r\nmaxWidth=\"800px\"\r\nopen={props.open}\r\nonClose={handleClose}\r\nPaperComponent={PaperComponent}\r\naria-labelledby=\"form-dialog-title\"\r\n>\r\n<DialogTitle id=\"draggable-dialog-title\">\r\n  <Grid\r\n    container\r\n    spacing={2}\r\n    direction=\"row\"\r\n    justify=\"center\"\r\n    alignItems=\"center\"\r\n  >\r\n    <Grid item>\r\n      <CreditCardIcon\r\n        style={{ color: \"#f50057\", fontSize: \"3rem\" }}\r\n      />\r\n    </Grid>\r\n\r\n    <Grid item>\r\n      <div\r\n        style={{\r\n          color: \"#f50057\",\r\n          paddingBottom: \"10px\",\r\n          fontWeight: \"800\",\r\n        }}\r\n      >\r\n        {\" \"}\r\n        PAY the CHARGE{\" \"}\r\n      </div>\r\n    </Grid>\r\n  </Grid>\r\n\r\n  <Divider />\r\n</DialogTitle>\r\n<DialogContent>\r\n  <div\r\n    style={{\r\n      height: \"270px\",\r\n    \r\n    }}\r\n  >\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          justify=\"space-between\"\r\n          spacing = {2}\r\n          alignItems=\"flex-start\"\r\n        >\r\n            <Grid item>\r\n               <div style={{fontSize: \"17px\"}}> How do you want to pay? </div> \r\n            </Grid>\r\n\r\n            <Grid item>\r\n      \r\n            <FormControl component=\"fieldset\">\r\n                \r\n                <RadioGroup aria-label=\"paymentMethod\" name=\"paymentMethod\" value={paymentMethod} onChange={paymentMethodChanged}>\r\n                    <FormControlLabel value=\"credit card\" control={<Radio />} label=\"Credit Card\" />\r\n                    <FormControlLabel value=\"cash\" control={<Radio />} label=\"Cash\" />\r\n                    <FormControlLabel value=\"corporate\" control={<Radio />} label=\"Corporate\" />\r\n                </RadioGroup>\r\n\r\n                { paymentMethod === 'corporate' && (\r\n\r\n                        <FormControl style={{marginTop: \"10px\"}} className={classes.formControl}>\r\n                        <Select\r\n                            labelId=\"select-corporate\"\r\n                            id=\"select-corporate-id\"\r\n                            value={corporate}\r\n                            onChange={corporateChanged}\r\n                        >\r\n                        {\r\n                        corporates.map(element => (\r\n                                    <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                        ))\r\n                        }     \r\n\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                )}\r\n              \r\n\r\n                </FormControl>\r\n            </Grid>\r\n\r\n\r\n        </Grid>\r\n\r\n        <Grid item>\r\n           \r\n    </Grid>\r\n\r\n    <div style={{position:\"absolute\", bottom:\"20px\", right:\"20px\"}}>\r\n            <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"flex-end\"\r\n                alignItems=\"center\"\r\n                spacing = {1}\r\n            >\r\n               \r\n                <Grid item>\r\n                    <Button onClick={handleClose}  style= {{width : '100px'}} disabled={saving}>\r\n                        back\r\n                    </Button>\r\n                        \r\n                </Grid>\r\n                <Grid item>\r\n                    <Button \r\n                        onClick = {payClicked}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        style= {{width : '100px'}}\r\n                        disabled={saving}\r\n                    >\r\n                        Pay\r\n                    </Button>\r\n                </Grid>  \r\n          </Grid>\r\n\r\n    </div>\r\n\r\n    \r\n  </div>\r\n\r\n             <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n\r\n</DialogContent>\r\n</Dialog>\r\n\r\n\r\n\r\n\r\n</React.Fragment>\r\n\r\n\r\n        )}\r\n  \r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport BookService from \"./services/BookService\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  DialogActions,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  Link,\r\n  makeStyles,\r\n  TextField,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./../GlobalState\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\n\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Draggable from \"react-draggable\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport dateformat from \"dateformat\";\r\n\r\nconst addMinutes = (date, minutes) => {\r\n  date = new Date(date);\r\n  return new Date(date.getTime() + minutes * 60 * 1000);\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n\r\n  refreshButton: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  closeIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  BookedLabel: {\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  PatientAttendedLabel: {\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  SampleTakenLabel: {\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  ReportCertSentLabel: {\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n\r\n  archiveButton: {},\r\n\r\n  smartMatchButton: {\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    marginRight: \"10px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  infoTitle: {\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\",\r\n  },\r\n\r\n  matchButton: {\r\n    marginTop: \"30px\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  resendFilesButton: {\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n    backgroundColor: \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\",\r\n    },\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\",\r\n  },\r\n\r\n  cancelButton: {\r\n    marginBottom: \"10px\",\r\n    textDecoration: \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft: \"90px\",\r\n    paddingRight: \"90px\",\r\n  },\r\n\r\n  itemTitle: {\r\n    fontWeight: \"500\",\r\n    color: \"#555\",\r\n  },\r\n\r\n  itemData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"600\",\r\n    color: \"#127512\",\r\n  },\r\n}));\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function TimeStampDialog(props) {\r\n  const classes = useStyles();\r\n\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [linkTimeStamp, setLinkTimeStamp] = React.useState(null);\r\n\r\n  const handleClose = () => {\r\n    setLinkTimeStamp(null);\r\n\r\n    props.handleClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.booking) {\r\n      if (props.booking.filename && props.booking.filename.length > 0) {\r\n        BookService.getLinkDetailsWithBookingId(props.booking._id).then(\r\n          (res) => {\r\n            if (res.data.status === \"OK\") {\r\n              setLinkTimeStamp(res.data.link.timeStamp);\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }, [props.booking]);\r\n\r\n  const getDateFromBooking = (booking) => {\r\n    let date = new Date(booking.bookingDate);\r\n    date.setHours(booking.bookingTimeNormalized.substr(0, 2));\r\n    date.setMinutes(booking.bookingTimeNormalized.substr(3, 2));\r\n    date.setSeconds(0);\r\n    date.setMilliseconds(0);\r\n    return date;\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            maxWidth=\"sm\"\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <DialogTitle id=\"draggable-dialog-title\">\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <HistoryIcon style={{ color: \"#f50057\", fontSize: \"2rem\" }} />\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <div\r\n                    style={{\r\n                      color: \"#f50057\",\r\n                      paddingBottom: \"12px\",\r\n                      fontWeight: \"800\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    Audit Trail{\" \"}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Divider />\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  height: \"370px\",\r\n              \r\n                }}\r\n              >\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"flex-start\"\r\n                  spacing={4}\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      PATIENT BOOKING TIMESTAMP :{\" \"}\r\n                    </span>\r\n                    <span className={classes.itemData}>\r\n                      {\" \"}\r\n                      {dateformat(props.booking.timeStamp, \"isoDateTime\")}{\" \"}\r\n                    </span>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      BOOKED DATE AND TIME :{\" \"}\r\n                    </span>\r\n                    <span className={classes.itemData}>\r\n                      {dateformat(\r\n                        getDateFromBooking(props.booking),\r\n                        \"isoDateTime\"\r\n                      )}\r\n                    </span>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP ATTENDED :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          props.booking.samplingTimeStamp,\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - SAMPLE TAKEN :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(props.booking.samplingTimeStamp, 5),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - COLLECTED BY COURIER :{\" \"}\r\n                    </span>\r\n                    {props.booking.samplingTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(props.booking.samplingTimeStamp, 35),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - RESULTS RECEIVED :{\" \"}\r\n                    </span>\r\n                    {linkTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(linkTimeStamp, \"isoDateTime\")}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <span className={classes.itemTitle}>\r\n                      TIMESTAMP - SENT TO PATIENT :{\" \"}\r\n                    </span>\r\n                    {linkTimeStamp ? (\r\n                      <span className={classes.itemData}>\r\n                        {\" \"}\r\n                        {dateformat(\r\n                          addMinutes(linkTimeStamp, 5),\r\n                          \"isoDateTime\"\r\n                        )}{\" \"}\r\n                      </span>\r\n                    ) : (\r\n                      <span className={classes.itemData}> - </span>\r\n                    )}\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleClose} color=\"default\">\r\n                Back\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GlobalState from './../GlobalState';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Button, Checkbox, DialogActions, DialogContentText, FormControlLabel, IconButton,  TextField, Tooltip } from '@material-ui/core';\r\nimport PDFService from './services/PDFService';\r\n\r\nimport {calculatePrice} from './PriceCalculator';\r\n\r\nimport bookingService from './services/BookService';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Slide from '@material-ui/core/Slide'  \r\n\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport BookService from './services/BookService';\r\n\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\nimport ResendEmailsDialog from './ResendEmailsDialog';\r\nimport PayDialog from './PayDialog';\r\n\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport UndoIcon from '@material-ui/icons/Undo';\r\n\r\nimport HistoryIcon from '@material-ui/icons/History';\r\n\r\n\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport TimeStampDialog from './TimeStampDialog';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    backgroundColor : \"#373737\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxRed: {\r\n    backgroundColor : \"#dc2626\",\r\n    color: \"#fff\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    textAlign: \"justify\",\r\n    paddingRight: \"40px\"\r\n  },\r\n\r\n  boxInfo: {\r\n    textAlign: \"justify\",\r\n    backgroundColor : \"#fafafa\",\r\n    color: \"#333\",\r\n    padding : \"1px\",\r\n    borderRadius : \"4px\",\r\n    paddingRight: \"40px\",\r\n    border: \"1px solid #eee\",\r\n  },\r\n\r\n  ul: {\r\n     listStyle: \"none\",\r\n     padding: \"0\",\r\n     margin: \"0\"\r\n  },\r\n\r\n  li: {\r\n    marginBottom : \"15px\"\r\n  },\r\n\r\n\r\n  icon: {\r\n    marginRight : \"8px\"\r\n  },\r\n\r\n  root: {\r\n    width: '100%',\r\n  },\r\n\r\n  lineThrough:{\r\n    textDecoration : \"line-through\",\r\n  },\r\n\r\n\r\n\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: '33.33%',\r\n    flexShrink: 0,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n  },\r\n\r\n  infoDetails:{\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  infoTitle:{\r\n    fontWeight: \"800\",\r\n    marginRight: \"10px\"\r\n  },\r\n\r\n  infoData:{\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  title:\r\n  {\r\n    textAlign: \"center\",\r\n    fontWeight : \"600\",\r\n    marginLeft: \"10px\",\r\n    marginBottom: \"5px\"\r\n  },\r\n\r\n  Accordion:{\r\n    backgroundColor : \"#f5f5f5\",\r\n    color: \"#222\"\r\n  },\r\n\r\n  AccordionDeleted:{\r\n    backgroundColor : \"#aaa\",\r\n    color: \"#555\"\r\n  },\r\n\r\n  DownloadForm:{\r\n      marginTop: \"10px\",\r\n      marginBottom : \"10px\"\r\n  },\r\n\r\n  infoDataCharges:{\r\n    fontSize : \"18px\",\r\n    color: \"green\",\r\n    fontWeight : \"600\"\r\n  },\r\n\r\n  infoDataChargesHigher:{\r\n    fontSize : \"18px\",\r\n    color: \"red\",\r\n    fontWeight : \"600\"\r\n  },\r\n  BookedLabel:{\r\n    color: \"#606060\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#606060\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    color: \"#0066aa\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066aa\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    color: \"#0066cc\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#0066cc\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    color: \"#009900\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"#009900\"\r\n  },\r\n\r\n  PositiveLabel:{\r\n    color: \"red\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    paddingTop: \"3px\",\r\n    fontWeight: \"800\",\r\n    borderLeft: \"5px solid\",\r\n    borderColor: \"red\"\r\n  },\r\n\r\n  EditButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n  ResendEmailsButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\",\r\n    paddingLeft: \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  PayButton:\r\n  {\r\n    marginLeft : \"83px\",\r\n    paddingLeft: \"30px\",\r\n    paddingRight: \"30px\"   \r\n  },\r\n\r\n  PayLabel:\r\n  {\r\n    marginLeft : \"20px\",\r\n    \r\n    color : \"#2f942e\",\r\n    fontWeight : \"500\",\r\n    textAlign: 'center'\r\n\r\n  },\r\n\r\n\r\n\r\n\r\n  RestoreButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#eee\",\r\n    color: \"#333\",\r\n    \"&:hover\": {\r\n      background: \"#f1f1f1\",\r\n      color: \"#111\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\"   \r\n  },\r\n\r\n\r\n  DeleteButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#d90015\",\r\n    \"&:hover\": {\r\n      background: \"#b80012\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n    padding: \"10px\"\r\n    \r\n  },\r\n\r\n  SaveButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    padding: \"10px\",\r\n\r\n    backgroundColor : \"#d1175e\",\r\n    \"&:hover\": {\r\n      background: \"#bd0d50\",\r\n      color: \"#fff\"\r\n    },\r\n\r\n  },\r\n\r\n  CancelButton:\r\n  {\r\n    marginBottom : \"20px\",\r\n    // padding: \"10px\"\r\n  },\r\n\r\n  TextBox: {\r\n    \r\n    padding : \"0px\"\r\n\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\",   \r\n  },\r\n\r\n  checkIconSmall:{\r\n    color: \"green\",\r\n    paddingTop: \"5px\"   \r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  centeredLabel : {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n\r\n\r\n\r\n\r\n\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#alert-dialog-slide-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default function BookingDialog(props) {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [copied, setCopied] = useState(false);\r\n  \r\n    const [openResendDialog, setOpenResendDialog] = React.useState(false);\r\n    const [openPayDialog, setOpenPayDialog] = React.useState(false);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [editMode, setEditMode] = React.useState({edit : false, person : null});\r\n    const [deleteMode, setDeleteMode] = React.useState({delete : false, person : null});\r\n    const [restoreMode, setRestoreMode] = React.useState({restore : false, person : null});\r\n\r\n    const [saving, setSaving] =  React.useState(false);\r\n    const [deleting, setDeleting] =  React.useState(false);\r\n    const [restoring, setRestoring] =  React.useState(false);\r\n\r\n    const [validationError, setValidationError] = React.useState({});\r\n\r\n\r\n    const [bookingDate, setBookingDate] = React.useState('');\r\n    const [bookingTime, setBookingTime] = React.useState('');\r\n\r\n    const [gender, setGender] = React.useState('');\r\n    const [title, setTitle] = React.useState('');\r\n    const [forename, setForename] = React.useState('');\r\n    const [surname, setSurnme] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n    const [dob, setDOB] = React.useState('');\r\n    const [tel, setTel] = React.useState('');\r\n    const [postCode, setPostCode] = React.useState('');\r\n    const [address, setAddress] = React.useState('');\r\n    const [notes, setNotes] = React.useState('');\r\n    const [passport, setPassport] = React.useState('');\r\n    const [passport2, setPassport2] = React.useState('');\r\n    const [certificate, setCertificate] = React.useState(false);\r\n    const [antiBodyTest, setAntiBodyTest] = React.useState(false);\r\n\r\n    const [refreshData, setRefreshData] = React.useState(false);\r\n\r\n    const [booking, setBooking] = React.useState(null);\r\n\r\n    const [recordChanged, setRecordChanged] = React.useState(false);\r\n\r\n    const [fieldChanged, setFieldChanged] = React.useState(false);\r\n\r\n    const [openUndoPayDialog, setOpenUndoPayDialog] = React.useState(false);\r\n\r\n    const [openTimeStampDialog, setOpenTimeStampDialog] = React.useState(false);\r\n\r\n    const handleCloseTimeStampDialog = () =>\r\n    {\r\n      setOpenTimeStampDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    const handleCloseUndoPayDialog = () =>\r\n    {\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n\r\n    const handleCloseResendDialog = () =>\r\n    {\r\n      setOpenResendDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    const handleClosePayDialog = () =>\r\n    {\r\n      setOpenPayDialog(false);\r\n      setSelectedBooking(null);\r\n    }\r\n\r\n    useEffect( () => {\r\n\r\n      if (booking)\r\n      {\r\n        const isChanged = (             \r\n           bookingDate !== FormatDateFromString(booking.bookingDate) \r\n        || bookingTime !== booking.bookingTime\r\n        || gender !== booking.gender\r\n        || forename !== booking.forenameCapital\r\n        || surname !== booking.surnameCapital\r\n        || title !== booking.title\r\n        || email !== booking.email\r\n        || dob !== FormatDateFromString(booking.birthDate)\r\n        || tel !== booking.phone\r\n        || postCode !== booking.postCode\r\n        || address !== booking.address\r\n        || passport !== booking.passportNumber\r\n        || passport2 !== booking.passportNumber2\r\n        || certificate !== booking.certificate\r\n        || antiBodyTest !== booking.antiBodyTest\r\n        );\r\n\r\n        setRecordChanged(isChanged);\r\n\r\n  \r\n\r\n      }\r\n    }, [fieldChanged]);\r\n\r\n    useEffect( () => {\r\n      if (!props.open)\r\n      {\r\n        setTimeout(() => {\r\n          setEditMode({edit: false, person: null});\r\n          setRecordChanged(false);\r\n        }, 500);\r\n       \r\n      }\r\n    }, [props.open])\r\n\r\n    const bookingDateChanged = (event) =>\r\n    {\r\n      setBookingDate(event.target.value);\r\n      setValidationError({...validationError, bookingDateError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const bookingTimeChanged = (event) =>\r\n    {\r\n      setBookingTime(event.target.value);\r\n      setValidationError({...validationError, bookingTimeError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const genderChanged = (event) =>\r\n    {\r\n      setGender(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const titleChanged = (event) =>\r\n    {\r\n      setTitle(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const forenameChanged = (event) =>\r\n    {\r\n      setForename(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const surnameChanged = (event) =>\r\n    {\r\n      setSurnme(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const emailChanged = (event) =>\r\n    {\r\n      setEmail(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const dobChanged = (event) =>\r\n    {\r\n      setDOB(event.target.value);\r\n      setValidationError({...validationError, dobError : false});\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const telChanged = (event) =>\r\n    {\r\n      setTel(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const postCodeChanged = (event) =>\r\n    {\r\n      setPostCode(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const addressChanged = (event) =>\r\n    {\r\n      setAddress(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const passportChanged = (event) =>\r\n    {\r\n      setPassport(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const passport2Changed = (event) =>\r\n    {\r\n      setPassport2(event.target.value);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const certificateChanged = (event) =>\r\n    {\r\n      setCertificate(event.target.checked);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n    const antiBodyTestChanged = (event) =>\r\n    {\r\n      setAntiBodyTest(event.target.checked);\r\n      setFieldChanged(!fieldChanged);\r\n    }\r\n\r\n\r\n    const getStatusLabel = (status) => {\r\n      if (status === 'booked')\r\n      {\r\n        return (\r\n          <span className={classes.BookedLabel}> Booking Made </span>\r\n        );\r\n    \r\n      }else if (status === 'patient_attended')\r\n      {\r\n        return (\r\n          <span  className={classes.PatientAttendedLabel}> Patient Attended </span>\r\n        );\r\n    \r\n      }else if (status === 'sample_taken')\r\n      {\r\n        return (\r\n          <span  className={classes.SampleTakenLabel}> Sample Taken </span>\r\n        );\r\n    \r\n      }else if (status === 'report_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportSentLabel}> Report Sent </span>\r\n        );\r\n    \r\n      }else if (status === 'report_cert_sent')\r\n      {\r\n        return (\r\n          <span  className={classes.ReportCertSentLabel}> {`Report & Certificate Sent`} </span>\r\n        );\r\n      }\r\n      else if (status === 'positive')\r\n      {\r\n        return (\r\n          <span  className={classes.PositiveLabel}> {`POSITIVE`} </span>\r\n        );\r\n    \r\n      }\r\n      else{\r\n        return 'Unknown';\r\n      }\r\n    }\r\n\r\n   const downloadForm1 = (id) =>\r\n   {\r\n       PDFService.downloadCovidForm1(id).then( (res) => \r\n       {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n   }\r\n\r\n   const downloadForm2 = (id) =>\r\n   {\r\n        PDFService.downloadCovidForm2(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        setRefreshData(!refreshData);\r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadLabResults = (id) =>\r\n   {\r\n        PDFService.downloadPdfResult(id).then( (res) => \r\n        {       \r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n\r\n        \r\n\r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const downloadCertificate = (id) =>\r\n   {\r\n        PDFService.downloadPdfCert(id).then( (res) => \r\n        {\r\n          const file = new Blob(\r\n            [res.data], \r\n            {type: 'application/pdf'});\r\n\r\n          const fileURL = URL.createObjectURL(file);   \r\n          window.open(fileURL, \"_blank\");\r\n      \r\n        }).catch( (err) =>\r\n        {\r\n            console.log(err);\r\n        });\r\n   }\r\n\r\n   const handleEditModeChanged = (edit, person) => {\r\n\r\n       if (edit)\r\n       {\r\n         setForename(person.forenameCapital);\r\n         setSurnme(person.surnameCapital);\r\n         setBookingDate(FormatDateFromString(person.bookingDate));\r\n         setBookingTime(person.bookingTime.toUpperCase());\r\n         setGender(person.gender.toUpperCase());\r\n         setTitle(person.title.toUpperCase());\r\n         setEmail(person.email.toUpperCase());\r\n         setDOB(FormatDateFromString(person.birthDate));\r\n         setTel(person.phone.toUpperCase());\r\n         setPostCode(person.postCode.toUpperCase());\r\n         setAddress(person.address.toUpperCase());\r\n         if (person.notes)\r\n         {\r\n          setNotes(person.notes.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber)\r\n         {\r\n           setPassport(person.passportNumber.toUpperCase());\r\n         }\r\n        \r\n         if (person.passportNumber2)\r\n         {\r\n           setPassport2(person.passportNumber2.toUpperCase());\r\n         }\r\n        \r\n         setCertificate(person.certificate);\r\n         setAntiBodyTest(person.antiBodyTest);\r\n\r\n         setEditMode({edit: edit, person: person});\r\n\r\n       }\r\n       else if (!edit && !person)\r\n       {\r\n         setEditMode({edit: edit, person: person});\r\n         setRecordChanged(false);\r\n       }\r\n       else if (!edit && person)\r\n       {\r\n          const booking = {};\r\n          const bookingId = person._id;\r\n          booking.certificate = certificate;\r\n          booking.antiBodyTest = antiBodyTest;\r\n          booking.gender = gender;\r\n          booking.title = title;\r\n          booking.birthDate = RevertFormatDateFromString(dob);\r\n          booking.email = email;\r\n          booking.phone = tel;\r\n          booking.postCode = postCode;\r\n          booking.address = address;\r\n          booking.passportNumber = passport;\r\n          booking.passportNumber2 = passport2;\r\n          booking.forename = forename;\r\n          booking.surname = surname;\r\n          booking.notes = notes;\r\n          booking.bookingDate = RevertFormatDateFromString(bookingDate);\r\n          booking.bookingTime = bookingTime;\r\n          booking.bookingRef = person.bookingRef;\r\n\r\n          if  (validateBooking(booking))\r\n          {\r\n            updateBooking({bookingId: bookingId, person: booking});\r\n          }\r\n       }\r\n   }\r\n\r\n   const validateDate = (str) =>\r\n   {\r\n     var error = false;\r\n     if (!str || str.length !== 10)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     if (str.charAt(4) !== '-'  || str.charAt(7) !== '-')\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     try\r\n     {\r\n       \r\n       const result = /^\\d{4}-\\d{2}-\\d{2}$/.test(str);\r\n       if (!result)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       const year = parseInt(str.substr(0,4));\r\n       const month = parseInt(str.substr(5,2));\r\n       const day = parseInt(str.substr(8,2));\r\n\r\n       if (year < 1900)\r\n       {\r\n          error = true;\r\n       }\r\n\r\n       if (month < 1 || month > 12)\r\n       {\r\n         error = true;\r\n       }        \r\n\r\n       if (day > 31)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateTime =(str) =>\r\n   {\r\n     var error = false;\r\n\r\n     const result = /^\\d{2}:\\d{2} AM$|^\\d{2}:\\d{2} PM$/.test(str);\r\n     if (!result)\r\n     {\r\n        error = true;\r\n     }\r\n\r\n     try{\r\n       const hour = parseInt(str.substr(0,2));\r\n       const minute = parseInt(str.substr(3,2));\r\n\r\n       if (hour < 0 || hour > 12)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n       if (minute < 0 || minute > 59)\r\n       {\r\n         error = true;\r\n       }\r\n\r\n     }catch(err)\r\n     {\r\n       error = true;\r\n     }\r\n\r\n     return !error;\r\n   }\r\n\r\n   const validateBooking = (booking) =>\r\n   {\r\n      var error = false;\r\n\r\n      if (!validateDate(booking.bookingDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingDateError : true});\r\n      }\r\n\r\n      if (!validateDate(booking.birthDate))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, dobError : true});\r\n      }\r\n\r\n      if (!validateTime(booking.bookingTime))\r\n      {\r\n        error = true;\r\n        setValidationError({...validationError, bookingTimeError : true});\r\n      }\r\n     \r\n\r\n      return !error;\r\n   }\r\n\r\n   const updateBooking = (payload) =>\r\n   {\r\n       setSaving(true);\r\n       bookingService.updateBooking(payload).then( (res) => {\r\n        setSaving(false);\r\n        setEditMode({edit: false, person: null});\r\n        setRefreshData(!refreshData);\r\n        \r\n\r\n       }).catch ( (err) => {\r\n         setSaving(false);\r\n         setEditMode({edit: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const deleteBooking = (id) =>\r\n   {\r\n       setDeleting(true);\r\n       bookingService.deleteBooking(id).then( (res) => {\r\n        setDeleting(false);\r\n        setDeleteMode({delete: false, person: null});\r\n        setRefreshData(!refreshData);\r\n\r\n       }).catch ( (err) => {\r\n          setDeleting(false);\r\n          setDeleteMode({delete: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n   const restoreBooking = (id) =>\r\n   {\r\n       setRestoring(true);\r\n       bookingService.unDeleteBooking(id).then( (res) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n        setRefreshData(!refreshData);\r\n\r\n       }).catch ( (err) => {\r\n        setRestoring(false);\r\n        setRestoreMode({restore: false, person: null});\r\n         console.log(err);\r\n       });\r\n   }\r\n\r\n\r\n\r\n   const handleDeleteModeChanged = (del, person) => {\r\n\r\n    if (del)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && !person)\r\n    {\r\n      setDeleteMode({delete: del, person: person});\r\n    }\r\n    else if (!del && person)\r\n    {\r\n        deleteBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const handleRestoreModeChanged = (restore, person) => {\r\n\r\n    if (restore)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && !person)\r\n    {\r\n      setRestoreMode({restore: restore, person: person});\r\n    }\r\n    else if (!restore && person)\r\n    {\r\n        restoreBooking(person._id);\r\n    }\r\n  }\r\n\r\n  const changeBackToBookingMade = (event, id) =>\r\n  {\r\n    setSaving(true);\r\n    BookService.changeBackToBookingMade(id).then(res => {\r\n      setSaving(false);\r\n      setRefreshData(!refreshData);\r\n    }).catch(err => {\r\n      console.log(err);\r\n      setSaving(false);\r\n    })\r\n  }\r\n\r\n  const resendEmails = (event, id) =>\r\n  {\r\n    setSelectedBooking(booking);\r\n    setOpenResendDialog(true);\r\n  }\r\n\r\n  const Pay = (event, id) =>\r\n  {\r\n    setSelectedBooking(booking);\r\n    setOpenPayDialog(true);\r\n  }\r\n\r\n  useEffect( () => \r\n  {\r\n    if (props.booking)\r\n    {\r\n      BookService.getBookingById(props.booking._id).then( res => {\r\n        setBooking(res.data);\r\n      }).catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n      setState(state => ({...state, bookingDialogDataChanged : !state.bookingDialogDataChanged ? true : false}));\r\n    }\r\n\r\n  } , [refreshData,state.bookingPayChanged]);\r\n\r\n\r\n  useEffect( () => {\r\n    if (props.booking)\r\n    {\r\n      setBooking(props.booking);\r\n    }\r\n\r\n  }, [props.booking]);\r\n\r\n  const undoPaymentClicked = async () =>\r\n  {\r\n    setSaving(true);\r\n    try{\r\n      await BookService.unPayBooking(booking._id);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n      setRefreshData(!refreshData);\r\n    }\r\n    catch(err)\r\n    {\r\n      console.error(err);\r\n      setSaving(false);\r\n      setOpenUndoPayDialog(false);\r\n    }\r\n  \r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {booking && (\r\n        <React.Fragment>\r\n          <Dialog\r\n            open={props.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={props.onClose}\r\n            PaperComponent={PaperComponent}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-slide-title\" style={booking.tr ? {backgroundColor:'#7e0082', color: \"#fff\"} : {}}>\r\n\r\n              <div style={{position:\"absolute\", top: \"25x\", left: \"25px\"}}>\r\n                <Tooltip title=\"COPY EDIT LINK TO CLIPBOARD\">\r\n                    <IconButton onClick={() => {navigator.clipboard.writeText(`https://travelpcrtest.com/user/edit/${booking.bookingRef}-${booking.birthDate}`); setCopied(true); setTimeout(() => { \r\n                      setCopied(false)\r\n                    }, 1500);}}\r\n\r\n                           aria-label=\"delete\" \r\n                           className={classes.margin} \r\n                           size=\"small\">\r\n                          <FileCopyOutlinedIcon style={booking.tr ? { color: \"#ddd\"} : {}} fontSize=\"14px\" />\r\n                    </IconButton>\r\n                </Tooltip>\r\n          \r\n                  <span hidden={!copied} style={{fontSize:\"12px\", transition: \"all 1s ease-in\"}}> Copied </span>\r\n               \r\n              </div>\r\n              \r\n              {booking.tr && (\r\n                <div style={{position:\"absolute\",  right: \"15px\"}}>\r\n                     TR\r\n                </div>\r\n\r\n              )}\r\n              \r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                spacing={2}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <div\r\n                    style={\r\n                      booking.deleted\r\n                        ? {\r\n                            paddingBottom: \"5px\",\r\n                            textDecoration: \"line-through\",\r\n                          }\r\n                        : {}\r\n                    }\r\n                  >\r\n                    {`${booking.forenameCapital} ${booking.surnameCapital}`}\r\n                  </div>\r\n                </Grid>\r\n\r\n                {booking.deleted && (\r\n                  <Grid item>\r\n                    <Tooltip title=\"This record has been deleted.\">\r\n                      <DeleteIcon\r\n                        style={booking.tr ? \r\n                          {\r\n                            padding: 0,\r\n                            margin: 0,\r\n                            color: \"#fff\",\r\n                            fontSize: 25,\r\n                          }\r\n                          \r\n                          : {\r\n                          padding: 0,\r\n                          margin: 0,\r\n                          color: \"#333\",\r\n                          fontSize: 25,\r\n                        }}\r\n                      />\r\n                    </Tooltip>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <div\r\n                style={{\r\n                  minHeight: \"600px\",\r\n                  maxHeight: \"600px\",\r\n                  minWidth: \"500px\",\r\n                  maxWidth: \"800px\",\r\n                  paddingTop: \"20px\",\r\n                }}\r\n              >\r\n                <Grid item xs={12} md={12} key={`panel0`}>\r\n                  <div className={classes.infoDetails}>\r\n                    <ul className={classes.ul}>\r\n                      {/* Restore Functionality ******************************************* */}\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"500\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                            color: \"#333\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to restore this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !booking.deleted ||\r\n                          (restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.RestoreButton}\r\n                        >\r\n                          Restore This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Restore this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            restoreMode.restore &&\r\n                            restoreMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={restoring}\r\n                          onClick={() => {\r\n                            handleRestoreModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/*  ******************************************************************* */}\r\n\r\n                      {/* Edit Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          deleteMode.delete ||\r\n                          (editMode.edit && editMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleEditModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.EditButton}\r\n                        >\r\n                          Edit Booking Info\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={saving || !recordChanged}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          Save Changes\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={saving}\r\n                          onClick={() => {\r\n                            handleEditModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      {/* Delete Functionality ******************************************* */}\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontWeight: \"600\",\r\n                            paddingBottom: \"5px\",\r\n                            paddingLeft: \"5px\",\r\n                            fontSize: \"16px\",\r\n                          }}\r\n                        >\r\n                          Are you sure you want to delete this record?\r\n                        </div>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          props.deleteButtonDisabled ||\r\n                          booking.deleted ||\r\n                          editMode.edit ||\r\n                          (deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id)\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(true, booking);\r\n                          }}\r\n                          className={classes.DeleteButton}\r\n                        >\r\n                          Delete This Record\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, booking);\r\n                          }}\r\n                          className={classes.SaveButton}\r\n                        >\r\n                          YES, Delete this!\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          !(\r\n                            deleteMode.delete &&\r\n                            deleteMode.person._id === booking._id\r\n                          )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"default\"\r\n                          disabled={deleting}\r\n                          onClick={() => {\r\n                            handleDeleteModeChanged(false, null);\r\n                          }}\r\n                          className={classes.CancelButton}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </li>\r\n\r\n                      {/* ****************************************************************************************** */}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED DATE</span>\r\n\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.bookingDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingDateError}\r\n                            className={classes.TextBox}\r\n                            value={bookingDate}\r\n                            onChange={bookingDateChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>BOOKED TIME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.bookingTime.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.bookingTimeError}\r\n                            className={classes.TextBox}\r\n                            value={bookingTime}\r\n                            onChange={bookingTimeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>GENDER</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.gender?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={gender}\r\n                            onChange={genderChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TITLE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.title?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={title}\r\n                            onChange={titleChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>FORENAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.forenameCapital}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={forename}\r\n                            onChange={forenameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>SURNAME</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.surnameCapital}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={surname}\r\n                            onChange={surnameChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>EMAIL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.email?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={email}\r\n                            onChange={emailChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>D.O.B</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {FormatDateFromString(booking.birthDate)}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            error={validationError.dobError}\r\n                            className={classes.TextBox}\r\n                            value={dob}\r\n                            onChange={dobChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TEL</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.phone?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={tel}\r\n                            onChange={telChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>POST CODE</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.postCode?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={postCode}\r\n                            onChange={postCodeChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>ADDRESS</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.address?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={address}\r\n                            onChange={addressChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      {booking.selfIsolate && (\r\n                                    <React.Fragment>\r\n                                            <li className={classes.li}>\r\n                                            <span className={classes.infoTitle}>Self-Isolate Post Code</span> <span className={classes.infoData}>{booking.postCodeSI}</span>  \r\n                                            </li>\r\n                                            <li className={classes.li}>\r\n                                            <span className={classes.infoTitle}>Self-Isolate Address</span> <span className={classes.infoData}>{booking.addressSI}</span>  \r\n                                            </li>\r\n                                    </React.Fragment>\r\n                      )}\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>PASSPORT NO.</span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.passportNumber?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={passport}\r\n                            onChange={passportChanged}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                                     <span className={classes.infoTitle}>NHS Number</span> <span className={classes.infoData}>{booking.NHSNumber ?? '-'}</span>  \r\n                                  </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Ethnicity</span> <span className={classes.infoData}>{booking.ethnicity}</span>  \r\n                      </li>\r\n\r\n                    \r\n\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Arrival Date</span> <span className={classes.infoData}>{booking.arrivalDate}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Flight Number</span> <span className={classes.infoData}>{booking.flightNumber}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Last Departed Date</span> <span className={classes.infoData}>{booking.lastDepartedDate}</span>  \r\n                      </li>\r\n                      <li hidden={!booking.tr} className={classes.li}>\r\n                          <span className={classes.infoTitle}>Travelling From</span> <span className={classes.infoData}>{booking.travellingFrom}</span>  \r\n                      </li>\r\n\r\n\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          SECOND PASSPORT NO.\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.passportNumber2?.toUpperCase()}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <TextField\r\n                            fullWidth\r\n                            className={classes.TextBox}\r\n                            value={passport2}\r\n                            onChange={passport2Changed}\r\n                            inputProps={{\r\n                              style: {\r\n                                padding: 0,\r\n                              },\r\n                            }}\r\n                          ></TextField>\r\n                        </span>\r\n                      </li>\r\n\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          REQUEST FOR CERTIFICATE\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.certificate ? (\r\n                            <CheckIcon className={classes.checkIcon} />\r\n                          ) : (\r\n                            <CloseIcon className={classes.closeIcon} />\r\n                          )}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <FormControlLabel\r\n                            className={classes.formControl}\r\n                            control={\r\n                              <Checkbox\r\n                                className={classes.formControl}\r\n                                color=\"secondary\"\r\n                                name=\"certificate\"\r\n                                checked={certificate}\r\n                                onChange={certificateChanged}\r\n                              />\r\n                            }\r\n                            label=\"\"\r\n                          />\r\n                        </span>\r\n                      </li>\r\n                      <li hidden={booking.tr} className={classes.li}>\r\n                        <span className={classes.infoTitle}>\r\n                          REQUEST FOR ANTIBODY TEST\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          {booking.antiBodyTest ? (\r\n                            <CheckIcon className={classes.checkIcon} />\r\n                          ) : (\r\n                            <CloseIcon className={classes.closeIcon} />\r\n                          )}\r\n                        </span>\r\n                        <span\r\n                          hidden={\r\n                            !(\r\n                              editMode.edit &&\r\n                              editMode.person._id === booking._id\r\n                            )\r\n                          }\r\n                          className={classes.infoData}\r\n                        >\r\n                          <FormControlLabel\r\n                            className={classes.formControl}\r\n                            control={\r\n                              <Checkbox\r\n                                className={classes.formControl}\r\n                                color=\"secondary\"\r\n                                name=\"certificate\"\r\n                                checked={antiBodyTest}\r\n                                onChange={antiBodyTestChanged}\r\n                              />\r\n                            }\r\n                            label=\"\"\r\n                          />\r\n                        </span>\r\n                      </li>\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>STATUS</span>{\" \"}\r\n                        {getStatusLabel(booking.status)}\r\n                        {booking.status === \"sample_taken\" &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"primary\"\r\n                                  disabled = {saving}\r\n                                  onClick = {event => changeBackToBookingMade(event,booking._id)}\r\n\r\n                                     >\r\n                              Change Back To Booking Made\r\n                            </Button>\r\n                          )}\r\n\r\n                          {(booking.status === \"report_sent\" || booking.status === \"report_cert_sent\" ||  booking.status === \"positive\") &&\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"primary\"\r\n                                  className = {classes.ResendEmailsButton}\r\n                                  onClick = {event => resendEmails(event,booking._id)}\r\n\r\n                                     >\r\n                              Resend emails\r\n                            </Button>\r\n                          )}\r\n                      </li>\r\n\r\n                      <li className={classes.li}>\r\n                        <span className={classes.infoTitle}>TOTAL CHARGES</span>{\" \"}\r\n                        <span\r\n                          className={\r\n                            calculatePrice(booking) <= 199\r\n                              ? classes.infoDataCharges\r\n                              : classes.infoDataChargesHigher\r\n                          }\r\n                        >{`${calculatePrice(booking)}`}</span>\r\n\r\n                          {\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (!booking.paid) && (!booking.deleted) && (\r\n                            <Button \r\n                                  variant=\"outlined\"\r\n                                  color=\"secondary\"\r\n                                  className = {classes.PayButton}\r\n                                  onClick = {event => Pay(event,booking._id)}\r\n\r\n                                     >\r\n                              Pay\r\n                            </Button>\r\n                          )}\r\n\r\n                          {\r\n                          !(\r\n                            editMode.edit && editMode.person._id === booking._id\r\n                          ) && (booking.paid) && (\r\n                                 <React.Fragment>\r\n                                      <span className={classes.PayLabel}>  <CheckIcon className={classes.checkIconSmall} /> Paid by {booking.paidBy} \r\n                                         {booking.paidBy === 'corporate' ? ` \"${booking.corporate}\" ` : ''}\r\n                                      </span>\r\n\r\n                                      <Tooltip title='Undo Payment'>\r\n                                          <IconButton onClick={() => setOpenUndoPayDialog(true)}>\r\n                                            <UndoIcon style={{color: 'red'}}/>\r\n                                          </IconButton>\r\n                                      </Tooltip>\r\n\r\n                                </React.Fragment>                    \r\n                          )}\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted}>\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadForm1(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Registration Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li hidden={booking.deleted}>\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadForm2(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm2(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Lab Form\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          (booking.status !== \"report_sent\" &&\r\n                            booking.status !== \"report_cert_sent\" &&\r\n                            booking.status !== \"positive\"\r\n                            )\r\n                        }\r\n                      >\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadLabResults(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Lab Results\r\n                        </Button>\r\n                      </li>\r\n\r\n                      <li\r\n                        hidden={\r\n                          booking.deleted ||\r\n                          (booking.status !== \"report_cert_sent\" && booking.status !== \"positive\")\r\n                        }\r\n                      >\r\n                        <Button\r\n                          startIcon = {<PrintIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          onClick={() => {\r\n                            downloadCertificate(booking._id);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Download Certificate\r\n                        </Button>\r\n                      </li>\r\n\r\n\r\n                      <li>\r\n\r\n                        <Button\r\n                          startIcon = {<HistoryIcon/>}\r\n                          type=\"button\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          color=\"secondary\"\r\n                          onClick={() => {\r\n                            setSelectedBooking(booking);\r\n                            setOpenTimeStampDialog(true);\r\n                          }}\r\n                          // onTouchTap = {() => {downloadForm1(person._id)}}\r\n                          className={classes.DownloadForm}\r\n                        >\r\n                          Show Audit Trail\r\n                        </Button>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </Grid>\r\n              </div>\r\n              <Backdrop\r\n                className={classes.backdrop}\r\n                open={saving || deleting || restoring}\r\n              >\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n            </DialogContent>\r\n\r\n\r\n            <ResendEmailsDialog booking={selectedBooking} open={openResendDialog} handleClose={handleCloseResendDialog} />\r\n            <PayDialog booking={selectedBooking} open={openPayDialog} handleClose={handleClosePayDialog} />\r\n            <TimeStampDialog booking={selectedBooking} open={openTimeStampDialog} handleClose={handleCloseTimeStampDialog} />\r\n\r\n          </Dialog>\r\n\r\n\r\n          <Dialog\r\n              open={openUndoPayDialog}\r\n              onClose={handleCloseUndoPayDialog}\r\n              aria-labelledby=\"alert-dialog-title\"\r\n              aria-describedby=\"alert-dialog-description\"\r\n            >\r\n              <DialogTitle style={{color:\"#999\"}} id=\"alert-dialog-title\">{\"Undo Payment\"}</DialogTitle>\r\n              <DialogContent>\r\n                <DialogContentText style={{color:\"#333\", fontWeight:\"400\"}} id=\"alert-dialog-description\">\r\n                  Are you sure you want to undo payment for this booking?  \r\n                </DialogContentText>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={handleCloseUndoPayDialog} color=\"default\">\r\n                  Back\r\n                </Button>\r\n                <Button onClick={undoPaymentClicked} color=\"secondary\" autoFocus>\r\n                  Yes, Undo Payment\r\n                </Button>\r\n              </DialogActions>\r\n      </Dialog>\r\n\r\n        \r\n\r\n        </React.Fragment>\r\n      )}\r\n\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport { Button, Checkbox, CircularProgress, Dialog, DialogContent, DialogTitle, Divider, FormControl, FormControlLabel, Grid, Icon, InputLabel, LinearProgress, Link, makeStyles, MenuItem, Paper, Select, SvgIcon, Switch, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport BookingDialog from './BookingDialog';\r\n\r\nimport NewReleasesIcon from '@material-ui/icons/NewReleases';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Draggable from 'react-draggable';\r\n\r\nimport * as dateformat from 'dateformat';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\n\r\n\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport PriceCalculator from './PriceCalculator';\r\nimport { corporates } from './Corporates';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  PositiveLabel:{\r\n    backgroundColor: \"red\",\r\n    color: \"#fff\",\r\n    width: \"70px\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  HideNowRows: {\r\n    position: \"absolute\",\r\n    top: \"40%\",\r\n    left: \"40%\",\r\n    width: \"600px\",\r\n    height: \"300px\",\r\n    backgroundColor : \"#fafafa\",\r\n    color : \"#111\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\"\r\n  },\r\n\r\n  ExportToExcelButton:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n   \r\n  },\r\n\r\n  ExportToExcelButtonInline:\r\n  {\r\n    // marginBottom : \"20px\",\r\n    color : \"#2f942e\",\r\n    borderColor: \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"#fafffa\",\r\n      borderColor: \"#2f942e\",\r\n    },\r\n    textDecoration : \"none !important\", \r\n    cursor: \"pointer\",\r\n    padding: \"10px\"\r\n   \r\n  },\r\n\r\n  table: {\r\n    width: \"100%\",\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n},\r\n\r\nth: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    fontcolor: \"#555\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"15px\",\r\n    paddingTop: \"5px\",\r\n    paddingBottom: \"5px\",\r\n    width: \"14%\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntd: {\r\n    border: \"1px solid #ddd\",\r\n    borderCollapse: \"collapse\",\r\n    verticalAlign: \"middle\",\r\n    paddingLeft: \"5px\",\r\n},\r\n\r\ntopSelect: {\r\n  margin: theme.spacing(1),\r\n  minWidth: 80,\r\n}\r\n\r\n}));\r\n\r\nconst getTableTitle = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return `Today's Bookings`;\r\n  }else if (str === 'old')\r\n  {\r\n    return `Old Bookings`;\r\n  }else if (str === 'future')\r\n  {\r\n    return `Future Bookings`;\r\n  }else if (str === 'recent')\r\n  {\r\n    return `Recent Bookings`;\r\n  }else if (str === 'live')\r\n  {\r\n    return `Live Bookings`;\r\n  }else if (str === 'completed')\r\n  {\r\n    return `Completed Bookings`;\r\n  }else if (str === 'positive')\r\n  {\r\n    return `Positive Results`;\r\n  }else if (str === 'deleted')\r\n  {\r\n    return `Deleted Records`;\r\n  }else if (str === 'late')\r\n  {\r\n    return `40 Hours Late`;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return `All Bookings`;\r\n  }\r\n\r\n}\r\n\r\nconst getTableIcon = (str) =>{\r\n\r\n  if (str === 'today')\r\n  {\r\n    return <NewReleasesIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'old')\r\n  {\r\n    return <HistoryIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'future')\r\n  {\r\n    return <TimelineIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'recent')\r\n  {\r\n    return <AutorenewIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'live')\r\n  {\r\n    return <LiveTvIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'completed')\r\n  {\r\n    return  <PlaylistAddCheckIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'positive')\r\n  {\r\n    return <AddCircleOutlineIcon style={{fontSize:\"2.2rem\"}} />\r\n  }else if (str === 'deleted')\r\n  {\r\n    return <DeleteIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }else if (str === 'late')\r\n  {\r\n    return <HourglassEmptyIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n  \r\n  else\r\n  {\r\n    return <DescriptionIcon style={{fontSize:\"2.2rem\"}} />;\r\n  }\r\n\r\n}\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function BookingTable(props) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [topCount, setTopCount] = React.useState(25)\r\n  const topCountChanged = (event) =>\r\n  {\r\n    setTopCount(event.target.value)\r\n    loadData(event.target.value)\r\n  }\r\n  \r\n\r\n  const [openDialogExcel, setOpenDialogExcel] = useState(false);\r\n  const handleCloseDialogExcel = () =>\r\n  {\r\n    setCorporate(corporates[0]);\r\n    setJustCorporate(false);\r\n    setOpenDialogExcel(false);\r\n  }\r\n\r\n\r\n  const [fromDate, setFromDate] = React.useState(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ));\r\n  const handleFromDateChange = (date) => {\r\n    setFromDate(date);\r\n    setFromDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [untilDate, setUntilDate] = React.useState(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ));\r\n  const handleUntilDateChange = (date) => {\r\n    setUntilDate(date);\r\n    seUntilDateStr(dateformat(date,'yyyy-mm-dd'));\r\n  };\r\n\r\n  const [fromDateStr, setFromDateStr] = useState(dateformat(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n  const [untilDateStr, seUntilDateStr] = useState(dateformat(new Date(new Date().getTime() - 1 * 24 * 60 * 60 * 1000 ), 'yyyy-mm-dd'));\r\n\r\n  const [justCorporate, setJustCorporate] = useState(false);\r\n\r\n  const[chkDate, setChkDate] = useState(true);\r\n  const[chkForename, setChkForename] = useState(true);\r\n  const[chkSurname, setChkSurname] = useState(true);\r\n  const[chkDOB, setChkDOB] = useState(true);\r\n  const[chkEmail, setChkEmail] = useState(true);\r\n  const[chkTel, setChkTel] = useState(true);\r\n  const[chkCertificate, setChkCertidicate] = useState(true);\r\n  const[chkAntiBodyTest, setChkAntiBodyTest] = useState(true);\r\n  const[chkextRef, setChkExtRef] = useState(true);\r\n  const[chkPrice, setChkPrice] = useState(true);\r\n\r\n  const justCorporateChanged = (event) =>\r\n  {\r\n    setJustCorporate(event.target.checked);\r\n  }\r\n  \r\n\r\n  const chkDateChanged = (event) =>\r\n  {\r\n    setChkDate(event.target.checked);\r\n  }\r\n\r\n  const chkForenameChanged = (event) =>\r\n  {\r\n    setChkForename(event.target.checked);\r\n  }\r\n\r\n  const chkSurnameChanged = (event) =>\r\n  {\r\n    setChkSurname(event.target.checked);\r\n  }\r\n\r\n  const chkDOBChanged = (event) =>\r\n  {\r\n    setChkDOB(event.target.checked);\r\n  }\r\n\r\n  const chkEmailChanged = (event) =>\r\n  {\r\n    setChkEmail(event.target.checked);\r\n  }\r\n\r\n  const chkTelChanged = (event) =>\r\n  {\r\n    setChkTel(event.target.checked);\r\n  }\r\n\r\n  const chkCertificateChanged = (event) =>\r\n  {\r\n    setChkCertidicate(event.target.checked);\r\n  }\r\n\r\n  const chkAntiBodyTestChanged = (event) =>\r\n  {\r\n    setChkAntiBodyTest(event.target.checked);\r\n  }\r\n\r\n  const chkextRefChanged = (event) =>\r\n  {\r\n    setChkExtRef(event.target.checked);\r\n  }\r\n\r\n  const chkPriceChanged = (event) =>\r\n  {\r\n    setChkPrice(event.target.checked);\r\n  }\r\n\r\n\r\n\r\n  var columns = [];\r\n\r\n  if (props.date === 'recent')\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n\r\n           <React.Fragment>\r\n\r\n                {params.getValue('tr') ? \r\n                \r\n                  <span style={{ position:\"absolute\", fontSize:\"12px\", fontWeight:\"600\", color:\"#7e0082\"}}>\r\n                    TR\r\n                  </span> \r\n                \r\n                : \r\n                \r\n                ''}\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n\r\n          \r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'timeStamp', headerName: 'TimeStamp', width: 200, valueFormatter: (params) => { \r\n        return formatTimeStamp(params.value);\r\n        }\r\n      },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n  \r\n          }else if (params.value === 'sample_taken')\r\n          {\r\n            return (\r\n              <span  className={classes.SampleTakenLabel}>  ST </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportSentLabel}>  RS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_cert_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportCertSentLabel}>  RCS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'positive')\r\n          {\r\n            return (\r\n              <span  className={classes.PositiveLabel}> POS </span>\r\n            );\r\n          }\r\n          \r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink}\r\n              //  onClick={\r\n              //   () => {\r\n              //     console.log(params.value);\r\n  \r\n              //     setState(state => ({...state, currentMenuIndex: getMenuIndex(`pcr` , `findByRef`)}));\r\n              //     setState(state => ({...state, ref : params.value}));\r\n              //     setState(state => ({...state, refError : false})); \r\n              //     setState(state => ({...state, foundRecords : []}));\r\n              //     setState(state => ({...state, findRecords : !state.findRecords}));\r\n              //   }\r\n              // }\r\n              \r\n              >\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'forenameCapital', headerName: 'Forename', width: 150 },\r\n      { field: 'surnameCapital', headerName: 'Surname', width: 150 },\r\n      { field: 'birthDate', headerName: 'D.O.B', width: 110, valueFormatter: (params) => { \r\n        return FormatDateFromString(params.value);\r\n         }\r\n      },\r\n      { field: 'email', headerName: 'Email', width: 200 , valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      }},\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'passportNumber', headerName: 'Passport No.', width: 250, \r\n      //  valueGetter: (params) => {\r\n      //   const pass2 = params.getValue('passportNumber2');\r\n      //   if (pass2 && pass2.length > 0 && pass2.trim().length > 0)\r\n      //   {\r\n      //     return `${params.getValue('passportNumber')?.toUpperCase()} - ${params.getValue('passportNumber2')?.toUpperCase()}`\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     return params.getValue('passportNumber')?.toUpperCase();\r\n      //   }\r\n      // }\r\n    },\r\n      { field: 'certificate', headerName: 'Certificate', width: 120,  renderCell: (params) => {\r\n          return params.value ? (\r\n            <CheckIcon className={classes.checkIcon}/>\r\n          ) :\r\n          (\r\n            <CloseIcon className={classes.closeIcon}/> \r\n          );\r\n      } },\r\n      { field: 'antiBodyTest', headerName: 'Antibody Test', width: 120,  renderCell: (params) => {\r\n        return params.value ? (\r\n          <CheckIcon className={classes.checkIcon}/>\r\n        ) :\r\n        (\r\n        <  CloseIcon className={classes.closeIcon}/> \r\n        );\r\n    } },\r\n      { field: 'postCode', headerName: 'Post Code', width: 150, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      { field: 'address', headerName: 'Address', width: 500, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      // { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n\r\n  }\r\n  else\r\n  {\r\n    columns = [\r\n      // { field: 'id', headerName: '#', width: 70 },\r\n  \r\n      {field: '_id', headerName:' ', width: 70, renderCell: (params) =>{\r\n          return (\r\n            <React.Fragment>\r\n\r\n                {params.getValue('tr') ? \r\n                \r\n                  <span style={{ position:\"absolute\", fontSize:\"12px\", fontWeight:\"600\", color:\"#7e0082\"}}>\r\n                    TR\r\n                  </span> \r\n                \r\n                : \r\n                \r\n                ''}\r\n\r\n                <Button \r\n                        color=\"primary\"\r\n                        onClick = {event => openDetailsDialog(event, params.value)}\r\n                > \r\n            \r\n            <SearchIcon/> \r\n            \r\n            </Button>\r\n\r\n           </React.Fragment>\r\n  \r\n          ); \r\n      \r\n        }\r\n      },\r\n\r\n      { field: 'paid', headerName: 'Paid', align: 'center' , width: 90, renderCell: (params) => { \r\n               if (!params.value)\r\n               {\r\n                  return ( <CloseIcon className={classes.closeIcon}/> );\r\n               }\r\n               else\r\n               {\r\n                  if (params.getValue('paidBy') === 'credit card')\r\n                  {\r\n                    return ( <CreditCardIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'cash')\r\n                  {\r\n                    return ( <LocalAtmIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else if (params.getValue('paidBy') === 'corporate')\r\n                  {\r\n                    return ( <BusinessIcon className={classes.checkIcon}/> );\r\n                  }\r\n                  else\r\n                  {\r\n                    return '';  \r\n                  }\r\n               }\r\n         }\r\n        },\r\n  \r\n      { field: 'bookingDate', headerName: 'B Date', width: 110, valueFormatter: (params) => { \r\n              return FormatDateFromString(params.value);\r\n          }\r\n       },\r\n      { field: 'bookingTimeNormalized', headerName: 'B Time', width: 105 , valueGetter: (params) => {\r\n        return params.getValue('bookingTime');\r\n      }},\r\n      { field: 'status', headerName: 'Status', width: 100, renderCell: (params) =>{\r\n          if (params.value === 'booked')\r\n          {\r\n            return (\r\n              <span className={classes.BookedLabel}>  BM </span>\r\n            );\r\n        \r\n          }else if (params.value === 'patient_attended')\r\n          {\r\n            return (\r\n              <span  className={classes.PatientAttendedLabel}> PA </span>\r\n            );\r\n  \r\n          }else if (params.value === 'sample_taken')\r\n          {\r\n            return (\r\n              <span  className={classes.SampleTakenLabel}>  ST </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportSentLabel}>  RS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'report_cert_sent')\r\n          {\r\n            return (\r\n              <span  className={classes.ReportCertSentLabel}>  RCS </span>\r\n            );\r\n  \r\n          }else if (params.value === 'positive')\r\n          {\r\n            return (\r\n              <span  className={classes.PositiveLabel}> POS </span>\r\n            );\r\n          }\r\n          \r\n          else{\r\n            return 'Unknown';\r\n          }\r\n        }\r\n      },\r\n      { field: 'bookingRef', headerName: 'Ref No.', width: 120 , renderCell: (params) =>{\r\n        return (\r\n          <Tooltip title=\"Go Find By Ref\" placement=\"right\">\r\n              <Link className={classes.RefLink} onClick={\r\n                () => {\r\n                  // console.log(params.value);\r\n  \r\n                  // setState(state => ({...state, currentMenuIndex: getMenuIndex(`findByRef`)}));\r\n                  // setState(state => ({...state, ref : params.value}));\r\n                  // setState(state => ({...state, refError : false})); \r\n                  // setState(state => ({...state, foundRecords : []}));\r\n                  // setState(state => ({...state, findRecords : !state.findRecords}));\r\n                }\r\n              }>\r\n                {params.value}\r\n              </Link>\r\n          </Tooltip>\r\n  \r\n        );\r\n      }},\r\n      { field: 'forenameCapital', headerName: 'Forename', width: 150 },\r\n      { field: 'surnameCapital', headerName: 'Surname', width: 150 },\r\n      { field: 'birthDate', headerName: 'D.O.B', width: 110, valueFormatter: (params) => { \r\n        return FormatDateFromString(params.value);\r\n         }\r\n      },\r\n      { field: 'email', headerName: 'Email', width: 200 , valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      }},\r\n      { field: 'phone', headerName: 'Tel', width: 150 },\r\n      { field: 'passportNumber', headerName: 'Passport No.', width: 250,  \r\n      // valueGetter: (params) => {\r\n      //   const pass2 = params.getValue('passportNumber2');\r\n      //   if (pass2 && pass2.length > 0 && pass2.trim().length > 0)\r\n      //   {\r\n      //     return `${params.getValue('passportNumber')?.toUpperCase()} - ${params.getValue('passportNumber2')?.toUpperCase()}`\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     return params.getValue('passportNumber')?.toUpperCase();\r\n      //   }\r\n      // }\r\n    },\r\n      { field: 'certificate', headerName: 'Certificate', width: 120,  renderCell: (params) => {\r\n          return params.value ? (\r\n            <CheckIcon className={classes.checkIcon}/>\r\n          ) :\r\n          (\r\n            <CloseIcon className={classes.closeIcon}/> \r\n          );\r\n      } },\r\n      { field: 'antiBodyTest', headerName: 'Antibody Test', width: 120,  renderCell: (params) => {\r\n        return params.value ? (\r\n          <CheckIcon className={classes.checkIcon}/>\r\n        ) :\r\n        (\r\n        <  CloseIcon className={classes.closeIcon}/> \r\n        );\r\n    } },\r\n      { field: 'postCode', headerName: 'Post Code', width: 150, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      { field: 'address', headerName: 'Address', width: 500, valueFormatter : (params) => {\r\n        return params.value.toUpperCase();\r\n      } },\r\n      // { field: 'notes', headerName: 'Notes', width: 500 },\r\n    \r\n    ];\r\n  \r\n\r\n  }\r\n\r\n\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : true});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [corporate, setCorporate] = useState(corporates[0]);\r\n  const corporateChanged = (event) =>\r\n  {\r\n    setCorporate(event.target.value);\r\n  }\r\n  \r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  const formatTimeStamp = (timeStamp) =>\r\n  {\r\n    const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n    const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n    if (todayStr === timeStampStr)\r\n    {\r\n      return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n    }\r\n    else\r\n    {\r\n       return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n    }\r\n  }\r\n\r\n  const loadData = (top) =>\r\n  {\r\n    var api = BookService.getAllBookings;\r\n    if (props.date === 'today')\r\n    {\r\n      api = BookService.getTodayBookings;\r\n    }else if (props.date === 'old')\r\n    {\r\n      api = BookService.getOldBookings;\r\n    }else if (props.date === 'future')\r\n    {\r\n      api = BookService.getFutureBookings;\r\n    }else if (props.date === 'recent')\r\n    {\r\n      api = BookService.getRecentBookingsAll;\r\n    }else if (props.date === 'live')\r\n    {\r\n      api = BookService.getLiveBookings;\r\n    }else if (props.date === 'completed')\r\n    {\r\n      api = BookService.getCompletedBookings;\r\n    }\r\n    else if (props.date === 'positive')\r\n    {\r\n      api = BookService.getPositiveBookings;\r\n    }\r\n    else if (props.date === 'deleted')\r\n    {\r\n      api = BookService.getDeletedBookings;\r\n    }\r\n    else if (props.date === 'late')\r\n    {\r\n      api = BookService.getLateBookings;\r\n    }\r\n               \r\n    setData({bookings: [], cachedBookings: [], isFetching: true});\r\n   \r\n    // console.log(props)\r\n\r\n    const currentPromise = api(top).then( (res) =>{\r\n      // console.log(res)\r\n      for (var i=0; i < res.data.length; i++)\r\n      {\r\n        res.data[i] = {...res.data[i], id : i + 1}\r\n      }  \r\n      setData({bookings: [...res.data], cachedBookings: [...res.data], isFetching: false});\r\n      // return res.data;\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    // lastPromise.current = currentPromise;\r\n\r\n    // currentPromise.then(\r\n    //   result => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //       setData({bookings: [...result], cachedBookings: [...result], isFetching: false});\r\n    //       setPage(1);\r\n    //     }\r\n    //   },\r\n    //   e => {\r\n    //     if (currentPromise === lastPromise.current) {\r\n    //         console.error(e);\r\n    //         setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n    //     }\r\n    //   });\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n            setTopCount(25)\r\n            loadData(25)\r\n        },\r\n        [props.date]);\r\n\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => \r\n\r\n             (element.forename.toLowerCase().indexOf(filter.toLowerCase()) >= 0) ||\r\n                   (element.surname.toLowerCase().indexOf(filter.toLowerCase()) >= 0) \r\n                  || (`${element.forename} ${element.surname}`.toLowerCase().indexOf(filter.toLowerCase()) >= 0)\r\n          );\r\n  \r\n  \r\n          setData({bookings: [...filteredData], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n  \r\n      useEffect(() => {\r\n\r\n       loadData(topCount)\r\n    \r\n      }, [state.bookingDialogDataChanged]);    \r\n\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSelectedBooking(null);\r\n    setSeeDetailsDialogOpen(false);\r\n  }    \r\n  \r\n  const openDetailsDialog = (event, id) =>\r\n  {\r\n    const booking = data.bookings.find(element => element._id === id);\r\n    setSelectedBooking(booking);\r\n    setSeeDetailsDialogOpen(true);\r\n\r\n  }\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    loadData(topCount)\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n    \r\n  }\r\n\r\n  const [page, setPage] = React.useState(1);\r\n\r\n  const handleExcelButtonClicked = (event) =>\r\n  {\r\n    setOpenDialogExcel(true);\r\n  }\r\n\r\n  const isTopSelectHidden = (date)=>\r\n  {\r\n    return date === 'live' || date === 'positive' || date === 'late' || date === 'today'\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {data.isFetching && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={4}>\r\n          <div style={{ textAlign: \"left\", paddingLeft: \"10px\" }}>\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <span style={{ paddingRight: \"15px\", color: \"#555\" }}>\r\n                  {\" \"}\r\n                  {getTableIcon(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"1.4rem\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#444\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {getTableTitle(props.date)}{\" \"}\r\n                </span>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title=\"Refresh\" placement=\"right\">\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    className={classes.refreshButton}\r\n                    onClick={refreshClicked}\r\n                  >\r\n                    <RefreshIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          {props.date === \"completed\" && state.showCreateExcel && (\r\n            <div style={{ paddingBottom: \"5px\" }}>\r\n              <Button\r\n                className={classes.ExportToExcelButton}\r\n                variant=\"outlined\"\r\n                color=\"default\"\r\n                onClick={handleExcelButtonClicked}\r\n                startIcon={\r\n                  <FontAwesomeIcon\r\n                    style={{ color: \"#009900\" }}\r\n                    icon={faFileExcel}\r\n                  />\r\n                }\r\n              >\r\n                export to excel\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Grid>\r\n\r\n        {data.isFetching && <div className={classes.HideNowRows}></div>}\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item hidden={isTopSelectHidden(props.date)}>\r\n          <FormControl className={classes.topSelect}>\r\n            <InputLabel id=\"top-select-label\">Limit</InputLabel>\r\n            <Select\r\n              labelId=\"top-select-label\"\r\n              id=\"top-simple-select\"\r\n              value={topCount}\r\n              onChange={topCountChanged}\r\n            >\r\n              <MenuItem value={25}>25</MenuItem>\r\n              <MenuItem value={50}>50</MenuItem>\r\n              <MenuItem value={100}>100</MenuItem>\r\n              <MenuItem value={500}>500</MenuItem>\r\n              <MenuItem value={1000}>1000</MenuItem>\r\n              <MenuItem value={10000}>ALL</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {/* <Button onClick={() => loadData(true)}> Show all records </Button> */}\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          page={page}\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }}\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <BookingDialog\r\n        booking={selectedBooking}\r\n        open={seeDetailsDialogOpen}\r\n        onClose={handleCloseSeeDetaisDialog}\r\n      />\r\n\r\n      {data.bookings && data.bookings.length > 0 && (\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={openDialogExcel}\r\n          onClose={handleCloseDialogExcel}\r\n          PaperComponent={PaperComponent}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"draggable-dialog-title\">\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item>\r\n                <FontAwesomeIcon\r\n                  style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n                  icon={faFileExcel}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <div\r\n                  style={{\r\n                    color: \"#2f942e\",\r\n                    paddingBottom: \"5px\",\r\n                    fontWeight: \"800\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Export to EXCEL{\" \"}\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div\r\n              style={{\r\n                minHeight: \"600px\",\r\n                maxHeight: \"600px\",\r\n                minWidth: \"1200px\",\r\n                maxWidth: \"1200px\",\r\n              }}\r\n            >\r\n              <div>\r\n                <Grid row container justify=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Switch\r\n                          checked={justCorporate}\r\n                          onChange={justCorporateChanged}\r\n                          name=\"justCorporate\"\r\n                        />\r\n                      }\r\n                      label=\"Just Corporate Records\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  {justCorporate && (\r\n                    <Grid item>\r\n                      <FormControl\r\n                        style={{ marginTop: \"0px\" }}\r\n                        className={classes.formControl}\r\n                      >\r\n                        <Select\r\n                          labelId=\"select-corporate\"\r\n                          id=\"select-corporate-id\"\r\n                          value={corporate}\r\n                          onChange={corporateChanged}\r\n                        >\r\n                          {corporates.map((element) => (\r\n                            <MenuItem value={element}>{`${element}`}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <Grid row container justify=\"center\" spacing={3}>\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-from\"\r\n                        label=\"From\"\r\n                        value={fromDate}\r\n                        onChange={handleFromDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"dd/MM/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-until\"\r\n                        label=\"Until\"\r\n                        value={untilDate}\r\n                        onChange={handleUntilDateChange}\r\n                        KeyboardButtonProps={{\r\n                          \"aria-label\": \"change date\",\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <div style={{ paddingTop: \"30px\", marginLeft: \"20px\" }}>\r\n                        <ReactHTMLTableToExcel\r\n                          id=\"test-table-xls-button\"\r\n                          className={classes.ExportToExcelButtonInline}\r\n                          table=\"table-to-xls\"\r\n                          filename={`PCR.Report.${fromDateStr}.${untilDateStr}`}\r\n                          sheet=\"PCR-Report\"\r\n                          buttonText=\"Download as XLS\"\r\n                        />\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n                </MuiPickersUtilsProvider>\r\n              </div>\r\n\r\n              <div>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDate}\r\n                          onChange={chkDateChanged}\r\n                          name=\"chkDate\"\r\n                        />\r\n                      }\r\n                      label=\"Date\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkForename}\r\n                          onChange={chkForenameChanged}\r\n                          name=\"chkForename\"\r\n                        />\r\n                      }\r\n                      label=\"Forename\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkSurname}\r\n                          onChange={chkSurnameChanged}\r\n                          name=\"chkSurname\"\r\n                        />\r\n                      }\r\n                      label=\"Surname\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkDOB}\r\n                          onChange={chkDOBChanged}\r\n                          name=\"chkDOB\"\r\n                        />\r\n                      }\r\n                      label=\"D.O.B\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkEmail}\r\n                          onChange={chkEmailChanged}\r\n                          name=\"chkEmail\"\r\n                        />\r\n                      }\r\n                      label=\"Email\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkTel}\r\n                          onChange={chkTelChanged}\r\n                          name=\"chkTel\"\r\n                        />\r\n                      }\r\n                      label=\"Tel\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkCertificate}\r\n                          onChange={chkCertificateChanged}\r\n                          name=\"chkCertificate\"\r\n                        />\r\n                      }\r\n                      label=\"Certificate\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkAntiBodyTest}\r\n                          onChange={chkAntiBodyTestChanged}\r\n                          name=\"chkAntiBodyTest\"\r\n                        />\r\n                      }\r\n                      label=\"AntiBodyTest\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkextRef}\r\n                          onChange={chkextRefChanged}\r\n                          name=\"chkextRef\"\r\n                        />\r\n                      }\r\n                      label=\"Lab No.\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={chkPrice}\r\n                          onChange={chkPriceChanged}\r\n                          name=\"chkPrice\"\r\n                        />\r\n                      }\r\n                      label=\"Price\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n\r\n              <div style={{ width: \"100%\", paddingTop: \"20px\" }}>\r\n                <table className={classes.table} id=\"table-to-xls\">\r\n                  <tr>\r\n                    {chkDate && <th className={classes.th}>Date</th>}\r\n                    {chkForename && <th className={classes.th}>Forename</th>}\r\n                    {chkSurname && <th className={classes.th}>Surename</th>}\r\n                    {chkDOB && <th className={classes.th}>D.O.B</th>}\r\n                    {chkEmail && <th className={classes.th}>Email</th>}\r\n                    {chkTel && <th className={classes.th}>Tel</th>}\r\n                    {chkCertificate && (\r\n                      <th className={classes.th}>Certificate</th>\r\n                    )}\r\n                    {chkAntiBodyTest && (\r\n                      <th className={classes.th}>AntiBodyTest</th>\r\n                    )}\r\n                    {chkextRef && <th className={classes.th}>Lab No.</th>}\r\n                    {chkPrice && <th className={classes.th}>Price () </th>}\r\n                  </tr>\r\n\r\n                  {data.bookings\r\n                    .filter((booking) => {\r\n                      if (!justCorporate) {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          booking.bookingDate >= fromDateStr &&\r\n                          booking.bookingDate <= untilDateStr &&\r\n                          booking.paid &&\r\n                          booking.paidBy === \"corporate\" &&\r\n                          booking.corporate === corporate\r\n                        );\r\n                      }\r\n                    })\r\n\r\n                    .map((booking) => (\r\n                      <tr>\r\n                        {chkDate && (\r\n                          <td className={classes.td}>\r\n                            {FormatDateFromString(booking.bookingDate)}\r\n                          </td>\r\n                        )}\r\n                        {chkForename && (\r\n                          <td className={classes.td}>\r\n                            {booking.forenameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkSurname && (\r\n                          <td className={classes.td}>\r\n                            {booking.surnameCapital}\r\n                          </td>\r\n                        )}\r\n                        {chkDOB && (\r\n                          <th className={classes.th}>\r\n                            {FormatDateFromString(booking.birthDate)}\r\n                          </th>\r\n                        )}\r\n                        {chkEmail && (\r\n                          <td className={classes.td}>{booking.email}</td>\r\n                        )}\r\n                        {chkTel && (\r\n                          <td className={classes.td}>{booking.phone}</td>\r\n                        )}\r\n                        {chkCertificate && (\r\n                          <td className={classes.td}>\r\n                            {booking.certificate ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkAntiBodyTest && (\r\n                          <td className={classes.td}>\r\n                            {booking.antiBodyTest ? \"YES\" : \"NO\"}\r\n                          </td>\r\n                        )}\r\n                        {chkextRef && (\r\n                          <td className={classes.td}>{booking.extRef}</td>\r\n                        )}\r\n                        {chkPrice && (\r\n                          <td className={classes.td}>\r\n                            {PriceCalculator.calculatePrice(booking)}\r\n                          </td>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n} ","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTitle.propTypes = {\r\n  children: PropTypes.node,\r\n};","import React, { useEffect } from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts';\r\nimport Title from './Title';\r\nimport dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n// Generate Sales Data\r\nfunction createData(time, amount) {\r\n  return { time, amount };\r\n}\r\n\r\n\r\nconst emptyData = [\r\n  createData('09:00', 0),\r\n  createData('10:00', 0),\r\n  createData('11:00', 0),\r\n  createData('12:00', 0),\r\n  createData('13:00', 0),\r\n  createData('14:00', 0),\r\n  createData('15:00', 0),\r\n  createData('16:00', 0),\r\n  createData('17:00', 0),\r\n  createData('18:00', undefined),\r\n\r\n];\r\n\r\nconst getCount = (data, str) =>\r\n{\r\n  if (!data)\r\n    return 0;\r\n\r\n  var count = 0;\r\n  for (var i=0; i < data.length; i++)\r\n  {\r\n    if (data[i]._id.substr(0,2) === str)\r\n    {\r\n      count += data[i].count;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nexport default function Chart() {\r\n  const theme = useTheme();\r\n\r\n  const [data, setData] = React.useState(emptyData);\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() =>\r\n  {\r\n    const fetchData = async () =>\r\n    {\r\n      const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n      var result = [];\r\n      try\r\n      {\r\n          setLoading(true)\r\n          const res = await BookService.getBookingsStatsByDateStr(todayStr);\r\n          setLoading(false)\r\n          const data = res.data.result;\r\n          result.push(createData('09:00', getCount(data,'09')));\r\n          result.push(createData('10:00', getCount(data,'10')));\r\n          result.push(createData('11:00', getCount(data,'11')));\r\n          result.push(createData('12:00', getCount(data,'12')));\r\n          result.push(createData('13:00', getCount(data,'13')));\r\n          result.push(createData('14:00', getCount(data,'14')));\r\n          result.push(createData('15:00', getCount(data,'15')));\r\n          result.push(createData('16:00', getCount(data,'16')));\r\n          result.push(createData('17:00', getCount(data,'17')));\r\n          result.push(createData('18:00', undefined));\r\n \r\n           setData(result);\r\n      }\r\n      catch(err){\r\n        setLoading(false)\r\n        console.error(err);\r\n      }\r\n\r\n    }\r\n  \r\n   fetchData();\r\n\r\n  }, [] );\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Today</Title>\r\n      <ResponsiveContainer>\r\n        <LineChart\r\n          data={data}\r\n          margin={{\r\n            top: 16,\r\n            right: 16,\r\n            bottom: 0,\r\n            left: 24,\r\n          }}\r\n        >\r\n          <XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n          <YAxis stroke={theme.palette.text.secondary}>\r\n            <Label\r\n              angle={270}\r\n              position=\"left\"\r\n              style={{ textAnchor: 'middle', fill: theme.palette.text.primary }}\r\n            >\r\n              Online Bookings\r\n            </Label>\r\n          </YAxis>\r\n          <Line type=\"monotone\" dataKey=\"amount\" stroke={theme.palette.primary.main} dot={false} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Title from './Title';\r\nimport { Grid, LinearProgress, Tooltip } from '@material-ui/core';\r\nimport * as dateformat from 'dateformat';\r\nimport BookService from './services/BookService';\r\nimport BookingDialog from './BookingDialog';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  bookingBox: {\r\n    display: \"flex\",\r\n    margin: \"5px\",\r\n    padding: \"5px\",\r\n    maxWidth : \"90px\",\r\n    minHeight: \"30px\",\r\n    border : \"1px solid #eee\",\r\n    fontSize: \"12px\",\r\n    fontWeight : \"500\",\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#ebedf7\",\r\n    color: \"#3f51b5\",\r\n    boxShadow: \"2px 4px #fafafa\",\r\n    borderRadius : \"5px\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n    align: \"center\",\r\n\r\n    \"&:hover\": {\r\n        background: \"#3f51b5\",\r\n        color: \"#ebedf7\"\r\n      },\r\n}\r\n\r\n\r\n});\r\n\r\nconst isWeekend = (date) =>\r\n{\r\n    return (date.getDay() === 0 || date.getDay() === 6) /// Weekend\r\n}\r\n\r\nconst getCurrentTimeSlot = (now) =>\r\n{\r\n    var min = now.getMinutes();\r\n    var hour = now.getHours();\r\n    var pm = (hour >= 12);\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n\r\n    if (min >= 0 && min < 15)\r\n    {\r\n      min = 0;\r\n    }else if (min >= 15 && min < 30)\r\n    {\r\n      min = 15;\r\n    }else if (min >= 30 && min < 45)\r\n    {\r\n      min = 30;\r\n    }else if (min >= 45)\r\n    {\r\n      min = 45;\r\n    }\r\n\r\n    const minStr = min < 10 ? `0${min}` : `${min}`;\r\n    const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n    const pmStr = pm ? 'PM' : 'AM';\r\n\r\n    const timeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n    if (isWeekend(now))\r\n    {\r\n      if (now.getHours() < 10 || now.getHours() >= 14)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n    }\r\n    else\r\n    {\r\n      if (now.getHours() < 9 || now.getHours() >= 18)\r\n      {\r\n        return null;\r\n      }\r\n      else\r\n      {\r\n        return timeStr;\r\n      }\r\n\r\n    }\r\n}\r\n\r\nconst getCurrentTimeSlotLabel = (timeStr) =>\r\n{\r\n  if (!timeStr)\r\n  {\r\n    return 'Closed';\r\n  }\r\n\r\n  var hour = parseInt(timeStr.substr(0,2));\r\n  var minute = parseInt(timeStr.substr(3,2)); \r\n  var pm = timeStr.indexOf('PM') > 0;\r\n  if (minute !== 45)\r\n  {\r\n    minute += 15;\r\n  }\r\n  else{\r\n    minute = 0;\r\n    hour += 1;\r\n    if (hour >= 12)\r\n    {\r\n      pm = true;\r\n    }\r\n    if (hour > 12)\r\n    {\r\n      hour = hour - 12;\r\n    }\r\n  }\r\n\r\n  const minStr = minute < 10 ? `0${minute}` : `${minute}`;\r\n  const hourStr = hour < 10 ? `0${hour}` : `${hour}`;\r\n  const pmStr = pm ? 'PM' : 'AM';\r\n\r\n  const endTimeStr = `${hourStr}:${minStr} ${pmStr}`;\r\n\r\n  return `${timeStr} - ${endTimeStr}`;\r\n\r\n}\r\n\r\nexport default function CurrentVisits() {\r\n  const classes = useStyles();\r\n\r\n  const[current, setCurrent] = React.useState(new Date());\r\n  const [bookings, setBookings] = React.useState([]);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  useEffect(() => \r\n  {\r\n    const interval = setInterval(() => {  \r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval);\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect(() => \r\n  {\r\n    const currentTimeSlot = getCurrentTimeSlot(current);\r\n    if (!currentTimeSlot)\r\n      return;\r\n    const todayStr = dateformat(current, 'yyyy-mm-dd');\r\n    setLoading(true)\r\n    BookService.getBookingsByDateStrandTime(todayStr,currentTimeSlot).then(res =>\r\n      {\r\n        setLoading(false)\r\n        if (res.data.status === 'OK')\r\n        {\r\n            setBookings([...res.data.bookings]);\r\n        }   \r\n\r\n      }).catch(err =>\r\n        {\r\n          setLoading(false)\r\n          console.log(err);\r\n        });\r\n\r\n  }, [current]);\r\n\r\n  const getBookingsBox = (_bookings) =>\r\n  {\r\n      if (_bookings && _bookings.length > 0)\r\n      {\r\n         return (\r\n\r\n          <div className={classes.root}>\r\n            <Grid container justify=\"flex-start\" alignItems=\"flex-start\" spacing={0}>\r\n\r\n                  { _bookings.map(booking => (\r\n\r\n                    <Grid item>\r\n\r\n                        <div className={classes.bookingBox} onClick={event => bookingCliked(event,booking)}>\r\n\r\n                            <span style={{textAlign:\"center\"}}> {`${booking.surnameCapital}`.substring(0,10)} </span>\r\n\r\n                        </div>\r\n\r\n                  </Grid>\r\n\r\n                  ))}\r\n\r\n              \r\n            </Grid>\r\n\r\n          </div>\r\n         )\r\n             \r\n        }                   \r\n  }\r\n\r\n  const bookingCliked = (event, booking) =>\r\n  {\r\n      setSelectedBooking(booking);\r\n      setOpenDialog(true);\r\n  }\r\n\r\n  const handleCloseDialog = () =>\r\n  {\r\n      setOpenDialog(false);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>Current Visits</Title>\r\n      <Typography component=\"p\" variant=\"h6\">\r\n        {getCurrentTimeSlotLabel(getCurrentTimeSlot(current))}\r\n      </Typography>\r\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\r\n        on {dateformat(current, 'dd mmmm, yyyy') } \r\n      </Typography>\r\n     \r\n        {getBookingsBox(bookings)}\r\n      \r\n\r\n      <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n      />\r\n\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Title from './Title';\r\nimport BookService from './services/BookService';\r\nimport * as dateformat from 'dateformat';\r\nimport GlobalState from './../GlobalState';\r\nimport { getMenuIndex } from './../MenuList';\r\nimport {FormatDateFromString, FormatDateFromStringShortYear} from './DateFormatter';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  seeMore: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function BookingView() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , isFetching : false});\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const seeMoreRecords = (event) => {\r\n    event.preventDefault();\r\n    setState(state=>({...state, currentMenuIndex:getMenuIndex('pcr',`recentBookings`)}));\r\n  }\r\n\r\n  const loadData = () => \r\n  {\r\n    setData({bookings: data.bookings, isFetching: true});\r\n    setLoading(true)\r\n    BookService.getRecentBookings().then( (res) =>{\r\n      setLoading(false)\r\n        setData({bookings: res.data, isFetching: false});\r\n\r\n    }).catch( (err) => {\r\n      setLoading(false)\r\n        console.log(err);\r\n        setData({bookings: data.bookings, isFetching: false});\r\n    });\r\n  }\r\n\r\n\r\n  useEffect( () => {\r\n          loadData();\r\n        },\r\n        [refresh]);   \r\n\r\n\r\n   useEffect( () => {\r\n     loadData();\r\n     setInterval(() => {\r\n       setRefresh(refresh => !refresh);\r\n     }, 30000);\r\n   }, []) ;    \r\n\r\n   const formatTimeStamp = (timeStamp) =>\r\n   {\r\n     const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n     const timeStampStr = dateformat(timeStamp, 'yyyy-mm-dd');\r\n     if (todayStr === timeStampStr)\r\n     {\r\n       return dateformat(timeStamp, \"'Today', h:MM:ss TT\");\r\n     }\r\n     else\r\n     {\r\n        return dateformat(timeStamp, \"mmm dS, h:MM:ss TT\");\r\n     }\r\n   }\r\n\r\n  return (\r\n    <React.Fragment>\r\n       {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n      <Title>Recent Bookings</Title>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>TimeStamp</TableCell>        \r\n            <TableCell>Name</TableCell>\r\n            <TableCell>Surname</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>D.O.B</TableCell>\r\n            <TableCell>Booked Date</TableCell>\r\n            <TableCell>Booked Time</TableCell> \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.bookings.map((row) => (\r\n            <TableRow key={row._id}>\r\n              <TableCell>{formatTimeStamp(row.timeStamp)}</TableCell>\r\n              <TableCell>{row.forename}</TableCell>\r\n              <TableCell>{row.surname}</TableCell>\r\n              <TableCell>{row.email}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.birthDate)}</TableCell>\r\n              <TableCell>{FormatDateFromString(row.bookingDate)}</TableCell>\r\n              <TableCell>{row.bookingTime}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      <div className={classes.seeMore}>\r\n        <Link color=\"primary\" href=\"#\" onClick={seeMoreRecords}>\r\n          See more records\r\n        </Link>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Title from './Title';\r\nimport { Dialog, DialogContent, DialogTitle, Grid, LinearProgress, Link, Table, TableBody, TableCell, TableHead, TableRow, Tooltip } from '@material-ui/core';\r\nimport BookService from './services/BookService';\r\n\r\nimport {\r\n    PieChart, Pie, Sector, Cell,\r\n  } from 'recharts';\r\n\r\n  const COLORS = ['#00b33e', '#0070e0', '#bb00c4'];\r\n\r\n  const RADIAN = Math.PI / 180;\r\n\r\n  const renderCustomizedLabel = ({\r\n    cx, cy, midAngle, innerRadius, outerRadius, value, index,\r\n  }) => {\r\n     const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n  \r\n    return (\r\n      <text x={x} y={y} fontSize=\"14px\" fontWeight=\"500\" fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n                {`${value} `}\r\n      </text>\r\n    );\r\n  };\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  depositContext: {\r\n    flex: 1,\r\n  },\r\n\r\n  ReportLabels: {\r\n      position: \"absolute\",\r\n      top : \"80px\",\r\n      left: \"0px\"\r\n  },\r\n\r\n  AverageLabel: {\r\n    position: \"absolute\",\r\n    top : \"190px\",\r\n    right: \"30px\",\r\n    fontSize : \"12px\",\r\n    color : \"#0070e0\",\r\n    fontWeight: \"600\",\r\n  },\r\n\r\n  less12Label: {\r\n      fontSize : \"12px\",\r\n      color : \"#00b33e\",\r\n      fontWeight: \"600\",\r\n      paddingLeft : \"5px\",\r\n      borderLeft: \"5px solid #00b33e\",\r\n      marginBottom : \"10px\",\r\n  },\r\n\r\n  less24Label: {\r\n    fontSize : \"12px\",\r\n    color : \"#0070e0\",\r\n    fontWeight: \"600\",\r\n    paddingLeft : \"5px\",\r\n    borderLeft: \"5px solid #0070e0\",\r\n    marginBottom : \"10px\",\r\n    },\r\n\r\nless36Label: {\r\n    fontSize : \"12px\",\r\n    color : \"#bb00c4\",\r\n    fontWeight: \"600\",\r\n    paddingLeft : \"5px\",\r\n    borderLeft: \"5px solid #bb00c4\",\r\n    marginBottom : \"10px\",\r\n    },\r\n\r\n    seeMore :{\r\n        position: \"absolute\",\r\n        top : \"191px\",\r\n        left : \"2px\"\r\n    }\r\n\r\n});\r\n\r\n\r\nexport default function ResultsTimeReport() {\r\n  const classes = useStyles();\r\n\r\n  const[current, setCurrent] = React.useState(new Date());\r\n  const [report, setReport] = React.useState({});\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const [data, setData] = React.useState(null);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n  const handleClose = () =>\r\n  {\r\n      setOpen(false);\r\n  }\r\n\r\n  useEffect(() => \r\n  {\r\n    const interval = setInterval(() => {  \r\n      setCurrent(new Date());\r\n    }, 30000);\r\n\r\n    return () =>\r\n    {\r\n      clearInterval(interval);\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect( () => \r\n  {\r\n    \r\n    setLoading(true)\r\n    BookService.getTestsTimeReport().then(res =>\r\n      {\r\n        const result = [];  \r\n        setLoading(false)\r\n        if (res.data.status === 'OK')\r\n        {\r\n            setReport(res.data.result);\r\n            // console.log(res.data.result);\r\n            result.push({name: 'lessThan12', value : res.data.result.lessThan12 });\r\n            result.push({name: 'lessThan24', value : res.data.result.lessThan24 });\r\n            result.push({name: 'lessThan36', value : res.data.result.lessThan36 });\r\n         \r\n           // result.push({name: 'lessThan48', value : res.data.result.lessThan48 });\r\n            setData(result);\r\n        }   \r\n\r\n      }).catch(err =>\r\n        {\r\n          setLoading(false)\r\n          console.error(err);\r\n        });\r\n\r\n\r\n    } , [] );\r\n\r\n    const getReportLabels = () =>\r\n    {\r\n           return (\r\n\r\n                <div className={classes.ReportLabels}>\r\n                    <div className={classes.less12Label}> {`12 Hours`} </div>\r\n                    <div className={classes.less24Label}> {`24 Hours`} </div>\r\n                    <div className={classes.less36Label}> {`36 Hours`} </div>\r\n                </div>\r\n    \r\n            );\r\n    }\r\n\r\n    const getAverageLabel = () =>\r\n    {\r\n           return (\r\n\r\n                <div className={classes.AverageLabel}>\r\n                   avg = <span style={{fontSize:\"14px\"}}> {`${report.avg}`} </span> hours\r\n                </div>\r\n    \r\n            );\r\n    }\r\n\r\n    const seeMoreClicked = (event) => {\r\n        event.preventDefault();\r\n        setOpen(true);\r\n      }\r\n\r\n  return (\r\n    <React.Fragment>\r\n    \r\n    <div style={{position: \"relative\"}}>\r\n    {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Title>PCR RESULTS SUMMARY</Title>\r\n\r\n      {data && (\r\n                <>\r\n\r\n                <PieChart width={250} height={150}>\r\n                    <Pie\r\n                        data={data}\r\n                        cx={170}\r\n                        cy={70}\r\n                        labelLine={false}\r\n                        label={renderCustomizedLabel}\r\n                        outerRadius={65}\r\n                        fill=\"#8884d8\"\r\n                        dataKey=\"value\"\r\n                        >\r\n                        {\r\n                            data.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)\r\n                        }\r\n                    </Pie>\r\n                </PieChart>\r\n                \r\n\r\n                {getReportLabels()}\r\n                {getAverageLabel()}\r\n\r\n                <div className={classes.seeMore}>\r\n                            <Link color=\"primary\" href=\"#\" onClick={seeMoreClicked}>\r\n                                  See Details\r\n                            </Link>\r\n                  </div>\r\n\r\n\r\n                  <Dialog style={{padding: \"50px\"}} onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>  \r\n                      <DialogTitle style={{textAlign: \"center\"}} id=\"simple-dialog-title\">PCR Results Time Report</DialogTitle>\r\n                            <DialogContent>\r\n                            <Table>\r\n                            <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Recieved in Less Than</TableCell>        \r\n                                <TableCell>Count</TableCell>\r\n                                <TableCell>Percent</TableCell>\r\n                            </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow key=\"row1\">\r\n                                    <TableCell>12 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan12}</TableCell>\r\n                                    <TableCell>{report.lessThan12Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row2\">\r\n                                    <TableCell>24 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan24}</TableCell>\r\n                                    <TableCell>{report.lessThan24Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row3\">\r\n                                    <TableCell>36 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan36}</TableCell>\r\n                                    <TableCell>{report.lessThan36Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row4\">\r\n                                    <TableCell>48 Hours</TableCell>\r\n                                    <TableCell>{report.lessThan48}</TableCell>\r\n                                    <TableCell>{report.lessThan48Percent} %</TableCell>\r\n                                </TableRow>\r\n                                <TableRow key=\"row4\">\r\n                                    <TableCell style={{fontWeight:\"800\"}}>Total Results Received : </TableCell>\r\n                                    <TableCell style={{fontWeight:\"600\"}}>{report.lessThan48 + report.lessThan36 + report.lessThan24 + report.lessThan12}</TableCell>\r\n                                    <TableCell></TableCell>\r\n                                </TableRow>\r\n\r\n\r\n\r\n                            \r\n                            </TableBody>\r\n                        </Table>\r\n                            </DialogContent>\r\n                </Dialog>\r\n    \r\n\r\n\r\n\r\n                </>\r\n      )}\r\n     \r\n     </div>\r\n\r\n\r\n\r\n    </React.Fragment>\r\n  );\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chart from './Chart';\r\nimport CurrentVisits from './CurrentVisits';\r\n\r\n\r\n\r\nimport { Tooltip } from '@material-ui/core';\r\nimport GlobalState from './../GlobalState';\r\nimport BookingView from './BookingView';\r\nimport ResultsTimeReport from './ResultsTimeReport';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n \r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function DashboardPreview() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  return (\r\n        <React.Fragment>\r\n\r\n<           Grid container spacing={3}>\r\n                    {/* Chart */}\r\n                    <Grid item xs={12} md={4} lg={6}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <Chart />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Tests Summary */}\r\n                    <Grid item xs={12} md={4} lg={3}>\r\n                     <Paper className={fixedHeightPaper}>\r\n                        <ResultsTimeReport />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Current Visits */}\r\n                    <Grid item xs={12} md={4} lg={3}>\r\n                    <Paper className={fixedHeightPaper}>\r\n                        <CurrentVisits />\r\n                    </Paper>\r\n                    </Grid>\r\n                    {/* Recent Bookings */}\r\n                    <Grid item xs={12}>\r\n                    <Paper className={classes.paper}>\r\n                        <BookingView/>\r\n                    </Paper>\r\n                    </Grid>\r\n          </Grid>\r\n        </React.Fragment>\r\n  );\r\n}","import React, {useEffect, useRef, useState} from 'react';\r\nimport { DataGrid, ROW_CLICK } from '@material-ui/data-grid';\r\nimport BookService from './services/BookService';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, Link, makeStyles, TextField, Tooltip } from '@material-ui/core';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { IconButton } from '@material-ui/core';\r\nimport LoaderSpinner from 'react-loader-spinner';\r\nimport GlobalState from './../GlobalState';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport WbIncandescentIcon from '@material-ui/icons/WbIncandescent';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport dateformat from 'dateformat';\r\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\r\nimport BookingDialog from './BookingDialog';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\n\r\nimport {FormatDateFromString, RevertFormatDateFromString} from './DateFormatter';\r\nimport PDFService from './services/PDFService';\r\n\r\nvar interval;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginTop: theme.spacing(0),\r\n    marginBottom: theme.spacing(1),\r\n\r\n  },\r\n  \r\n  refreshButton:{\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n\r\n  checkIcon:{\r\n    color: \"green\"\r\n  },\r\n\r\n  closeIcon:{\r\n    color: \"red\"\r\n  },\r\n\r\n  RefLink: {\r\n    cursor: \"pointer\"\r\n  },\r\n\r\n  BookedLabel:{\r\n    backgroundColor: \"#606060\",\r\n    color: \"#fff\",\r\n    paddingRight: \"10px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  PatientAttendedLabel:{\r\n    backgroundColor: \"#0066aa\",\r\n    color: \"#fff\",\r\n    paddingRight: \"15px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  SampleTakenLabel:{\r\n    backgroundColor: \"#0066cc\",\r\n    color: \"#fff\",\r\n    paddingRight: \"40px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"90px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  ReportCertSentLabel:{\r\n    backgroundColor: \"#009900\",\r\n    color: \"#fff\",\r\n    paddingRight: \"68px\",\r\n    paddingLeft: \"10px\"\r\n  },\r\n\r\n  archiveButton: {\r\n\r\n  },\r\n\r\n  smartMatchButton: {\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    marginRight : \"10px\"\r\n    // padding: \"10px\"  \r\n  },\r\n\r\n  infoTitle:  {\r\n    fontWeight: \"400\"\r\n  },\r\n\r\n  infoData: {\r\n    paddingLeft: \"10px\",\r\n    fontWeight: \"800\"\r\n  },\r\n\r\n  matchButton:\r\n  {\r\n    marginTop: \"30px\",\r\n    marginBottom : \"20px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendButton:\r\n  {\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#2f942e\",\r\n    \"&:hover\": {\r\n      background: \"green\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  resendFilesButton:{\r\n    marginTop: \"5px\",\r\n    marginBottom : \"5px\",\r\n    backgroundColor : \"#3792ad\",\r\n    \"&:hover\": {\r\n      background: \"#2f798f\",\r\n      color: \"#fff\"\r\n    },\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"50px\",\r\n    paddingRight: \"50px\"   \r\n  },\r\n\r\n  cancelButton:\r\n  {\r\n    marginBottom : \"10px\",\r\n    textDecoration : \"none !important\",\r\n    padding: \"10px\",\r\n    paddingLeft : \"90px\",\r\n    paddingRight: \"90px\"   \r\n  },\r\n\r\n  downloadPDFButton:\r\n  {\r\n    marginLeft: \"50px\"\r\n  }\r\n  \r\n  \r\n}));\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: \"#cedbce\" //theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: '#2f942e',\r\n  },\r\n}))(LinearProgress);\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <BorderLinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography style={{fontWeight:\"800\", color :  \"#5e855e\"  }} variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value,\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  /**\r\n   * The value of the progress indicator for the determinate and buffer variants.\r\n   * Value between 0 and 100.\r\n   */\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nexport default function UnmatchedRecords() {\r\n  \r\n  const classes = useStyles();\r\n\r\n  const columns = [\r\n    { field: 'id', headerName: '#', width: 50 },\r\n\r\n    { field: 'testDate', headerName: 'Test Date', width: 120, valueFormatter : (params) =>\r\n      {\r\n        return FormatDateFromString(params.value);\r\n      }\r\n     },\r\n    { field: 'forename', headerName: 'Forename', width: 200 },\r\n    { field: 'surname', headerName: 'Surname', width: 200 },\r\n    { field: 'birthDate', headerName: 'D.O.B', width: 120 , valueFormatter : (params) =>\r\n    {\r\n      return FormatDateFromString(params.value);\r\n    }},\r\n    { field: '_id' , headerName:'Action', width: 500 , renderCell: (params) => {\r\n        if (selectedTab === 'unresolved')\r\n        {\r\n            return (\r\n              <React.Fragment>\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<WbIncandescentIcon />}\r\n                    onClick = { event => smartMatchClicked(event,params.value)}\r\n                    className={classes.smartMatchButton}\r\n                    >\r\n                    smart match\r\n              </Button>\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = { event => archiveRecord(event,params.value)}\r\n                    className={classes.archiveButton}\r\n                  >\r\n                    archive\r\n              </Button>\r\n\r\n\r\n              <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"                   \r\n                    color=\"primary\"\r\n                    onClick = { event => downloadLabReport(params.value)}\r\n                    className={classes.downloadPDFButton}\r\n                  >\r\n                    view pdf\r\n              </Button>\r\n\r\n\r\n              </React.Fragment>\r\n\r\n            );\r\n        }else\r\n        {\r\n            return (\r\n\r\n              <React.Fragment>\r\n\r\n                  <Button\r\n                        disabled = {params.value === disableId}\r\n                        type=\"button\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        startIcon={<WbIncandescentIcon />}\r\n                        onClick = { event => smartMatchClicked(event,params.value)}\r\n                        className={classes.smartMatchButton}\r\n                        >\r\n                        smart match\r\n                  </Button>\r\n\r\n                    <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick = { event => unArchiveRecord(event,params.value)}\r\n                    className={classes.archiveButton}\r\n                  >\r\n                    Undo\r\n                  </Button>\r\n\r\n                  <Button\r\n                    disabled = {params.value === disableId}\r\n                    type=\"button\"                   \r\n                    color=\"primary\"\r\n                    onClick = { event => downloadLabReport(params.value)}\r\n                    className={classes.downloadPDFButton}\r\n                  >\r\n                    view pdf\r\n                  </Button>\r\n\r\n              </React.Fragment>\r\n            );\r\n        }\r\n        \r\n    } },\r\n   \r\n  ];\r\n\r\n  const [state, setState] = React.useContext(GlobalState);  \r\n\r\n  const [data, setData] = React.useState({bookings: [] , cachedBookings: [], isFetching : false});\r\n\r\n  const [selectedRow, setSelectedRow] = React.useState(null);\r\n\r\n  const [filter,setFilter] = React.useState('');\r\n\r\n  const [refresh, setRefresh] = React.useState(false);\r\n\r\n  const [disableId, setDisableId] = React.useState(null);\r\n\r\n  const [selectedTab, setSeletedTab] = React.useState('unresolved');\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [seeDetailsDialogOpen, setSeeDetailsDialogOpen] = React.useState(false);\r\n\r\n  const [smartLinkId, setSmartLinkId] = React.useState(null);\r\n\r\n  const [smartLinkDetails, setSmartLinkDetails] = React.useState(null);\r\n\r\n  const [likelyBookings, setLikelyBookings] = React.useState(null);\r\n\r\n  const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n  const [seeDetailsBooking, setSeeDetailsBooking] = React.useState(null);\r\n\r\n  const [matching, setMatching] = React.useState(false);\r\n\r\n  const [matched, setMatched] = React.useState(false);\r\n\r\n  const [sending, setSending] = React.useState(false);\r\n  const [sent, setSent] = React.useState(false);\r\n\r\n  const [sendJustToPCR, setSendJustToPCR] = React.useState(false);\r\n\r\n  const [sendingStatus, setSendingStatus] = React.useState('');\r\n\r\n  const [sendingProgress, setSendingProgress] = React.useState(10);\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n\r\n\r\n  const handleTabChanged = (event, value) => {\r\n      if (value && value.length)\r\n      {\r\n        setSeletedTab(value);\r\n      }\r\n   \r\n  };\r\n\r\n  const handleCloseDialog = () =>\r\n  {\r\n    setOpenDialog(false);\r\n    setTimeout(() => {\r\n      setSmartLinkId(null);\r\n      setSmartLinkDetails(null);\r\n      setLikelyBookings(null);\r\n      setSelectedBooking(null);\r\n      setMatched(false);\r\n      setMatching(false);\r\n      setSendingStatus(null);\r\n      setSending(false);\r\n      setSent(false);\r\n      clearInterval(interval);\r\n      setSendJustToPCR(false);\r\n    }, 100);\r\n  }\r\n\r\n  const handleCloseSeeDetaisDialog = () =>\r\n  {\r\n    setSeeDetailsDialogOpen(false);\r\n    setTimeout(() => {\r\n      setSeeDetailsBooking(null);\r\n    }, 500);\r\n  }\r\n\r\n  const seeDetailsClicked = (event, row) =>\r\n  {\r\n    setSeeDetailsBooking(row);\r\n    setSeeDetailsDialogOpen(true);\r\n  }\r\n\r\n  const smartMatchClicked = (event, id) =>\r\n  {\r\n    setSmartLinkId(id);\r\n    setOpenDialog(true);\r\n    findBestMatches(id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (smartLinkId)\r\n    {\r\n      findBestMatches(smartLinkId);\r\n      // console.log('refrshing....');\r\n\r\n    }\r\n\r\n\r\n  }, [state.bookingDialogDataChanged]);\r\n\r\n  const findBestMatches = (id) =>\r\n  {\r\n    BookService.getLinkDetails(id).then( res => {\r\n      setSmartLinkDetails(res.data);\r\n      console.log(res.data);\r\n    }).catch( err =>\r\n      {\r\n        console.log(err);\r\n      });\r\n\r\n    BookService.findBestMatches(id).then( res => {\r\n      setLikelyBookings(res.data.matchedBookings);\r\n    }).catch( err => {\r\n      console.log(err);\r\n      setLikelyBookings([]);\r\n    })\r\n  }\r\n\r\n  const archiveRecord = (event, id) =>\r\n  {\r\n      if (disableId)\r\n      {\r\n        return;\r\n      }\r\n        setDisableId(id);\r\n        \r\n        BookService.archiveRecord(id).then(\r\n            (res) => {\r\n                setDisableId(null);\r\n                setRefresh(!refresh);\r\n            }\r\n        ).catch( (err) => {\r\n            setDisableId(null);\r\n        })\r\n  }\r\n\r\n  const unArchiveRecord = (event, id) =>\r\n  {\r\n      if (disableId)\r\n      {\r\n        return;\r\n      }\r\n        setDisableId(id);\r\n        \r\n        BookService.unArchiveRecord(id).then(\r\n            (res) => {\r\n                setDisableId(null);\r\n                setRefresh(!refresh);\r\n            }\r\n        ).catch( (err) => {\r\n            setDisableId(null);\r\n        })\r\n  }\r\n\r\n\r\n  const lastPromise = useRef();\r\n\r\n  useEffect( () => {\r\n\r\n            var api = BookService.getUnmatchedRecords;\r\n            if (selectedTab === 'archived')\r\n            {\r\n                api = BookService.getUnmatchedRecordsArchived;\r\n            }\r\n            \r\n            setLoading(true)\r\n            \r\n            setData({bookings: [], cachedBookings: [], isFetching: true});\r\n            const currentPromise = api().then( (res) =>{\r\n              \r\n              for (var i=0; i < res.data.length; i++)\r\n              {\r\n                res.data[i] = {...res.data[i], id : i + 1}\r\n              }  \r\n              \r\n              return res.data;\r\n            })\r\n\r\n            lastPromise.current = currentPromise;\r\n\r\n            currentPromise.then(\r\n              result => {\r\n                if (currentPromise === lastPromise.current) {\r\n                  setLoading(false)\r\n                  setData({bookings: result, cachedBookings: [...result], isFetching: false});\r\n                }\r\n              },\r\n              e => {\r\n                if (currentPromise === lastPromise.current) {\r\n                    setLoading(false)\r\n                    console.log(e);\r\n                    setData({bookings: data.bookings, cachedBookings: data.cachedBookings, isFetching: false});\r\n                }\r\n              });\r\n        },\r\n        [refresh, selectedTab]);\r\n\r\n\r\n\r\n  useEffect( () => {\r\n\r\n        if (filter && filter.trim().length > 0)\r\n        {\r\n          var filteredData = data.cachedBookings.filter( (element) => {\r\n\r\n            return (element.forename.toLowerCase().indexOf(filter.toLowerCase()) >= 0) ||\r\n                   (element.surname.toLowerCase().indexOf(filter.toLowerCase()) >= 0) \r\n            ;\r\n  \r\n          });\r\n  \r\n  \r\n          setData({bookings: filteredData, cachedBookings: data.cachedBookings, isFetching: false});\r\n        }else\r\n        {\r\n          setData({bookings: [...data.cachedBookings], cachedBookings: data.cachedBookings, isFetching: false});\r\n        }\r\n      },\r\n      [filter]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const refreshClicked = (event) =>{\r\n    setFilter('');\r\n    setRefresh(!refresh);\r\n\r\n  }\r\n\r\n  const filterChanged = (event) =>{\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSelectionChanged = (newSelection) =>\r\n  {\r\n    if (newSelection.length > 0){\r\n      setSelectedRow(newSelection.rows[0]);\r\n    }\r\n  }\r\n\r\n  const handleCheckChanged = (event, row) =>\r\n  {\r\n    if (event.target.checked)\r\n    {\r\n      setSelectedBooking(row);\r\n    }\r\n    else\r\n    {\r\n      setSelectedBooking(null);\r\n    }\r\n  }\r\n\r\n  const matchRecords = (event) => {\r\n\r\n    setMatching(true);\r\n\r\n    BookService.getBookingById(selectedBooking._id).then(res => {\r\n      setSelectedBooking(res.data);\r\n    });\r\n\r\n    BookService.matchRecords(selectedBooking._id, smartLinkId).then (res => {\r\n\r\n      if (res.data.status === 'OK'){\r\n        setMatching(false);\r\n        setMatched(true);\r\n      }\r\n\r\n    }).catch(err =>\r\n      {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  const getProgress = (status) =>\r\n  {\r\n    console.log(`status : ${status}`);\r\n\r\n    if (status === 'downloadFailed')\r\n      return 10 ;\r\n    else if (status === 'downloading') \r\n      return 30 ;  \r\n    else if (status === 'downloadSuccess') \r\n      return 70 ;\r\n    else if (status === 'sent')\r\n      return 100;   \r\n    else\r\n      return 0;\r\n\r\n  }\r\n\r\n  useEffect( () => {\r\n\r\n    setSendingProgress((prevProgress) => (prevProgress >= 100 ? 100 : getProgress(sendingStatus)));\r\n\r\n  }, [sendingStatus]);\r\n\r\n  const resendFilesClicked = (event) =>\r\n  {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus('downloadFailed');\r\n    setSendJustToPCR(true);\r\n\r\n\r\n    BookService.regenerateFiles(smartLinkId).then( res => {\r\n\r\n      interval = setInterval(() => {\r\n             \r\n       // setProgress(sendingCounter);\r\n\r\n       // setProgress(getProgress(sendingStatus));\r\n\r\n       BookService.getLinkDetails(smartLinkId).then( res => {\r\n \r\n         setSendingStatus(res.data.status);\r\n \r\n         if (res.data.status === 'sent')\r\n         {\r\n           setSending(false);\r\n           setSent(true);\r\n           setRefresh(!refresh);\r\n           clearInterval(interval);\r\n         }\r\n       });\r\n \r\n     }, 1000);\r\n\r\n   }).catch(err => {\r\n     console.log(err);\r\n     setSending(false);\r\n   });\r\n\r\n\r\n  }\r\n \r\n  const resendEmailsClicked = (event) => {\r\n    setSending(true);\r\n    setSendingProgress(0);\r\n    setSendingStatus('downloadFailed');\r\n \r\n\r\n    BookService.resendEmails(smartLinkId).then( res => {\r\n\r\n       interval = setInterval(() => {\r\n        \r\n       \r\n\r\n        // setProgress(sendingCounter);\r\n\r\n        // setProgress(getProgress(sendingStatus));\r\n\r\n        BookService.getLinkDetails(smartLinkId).then( res => {\r\n  \r\n          setSendingStatus(res.data.status);\r\n  \r\n          if (res.data.status === 'sent')\r\n          {\r\n            setSending(false);\r\n            setSent(true);\r\n            setRefresh(!refresh);\r\n            clearInterval(interval);\r\n          }\r\n        });\r\n  \r\n      }, 1000);\r\n\r\n    }).catch(err => {\r\n      console.log(err);\r\n      setSending(false);\r\n    });\r\n\r\n  \r\n\r\n  }\r\n\r\n  const cancelResendEmailsClicked = (event) => {\r\n    setMatched(false);\r\n  }\r\n\r\n  const downloadLabReport = (id) =>\r\n  {\r\n       PDFService.downloadPdfLabReport(id).then( (res) => \r\n       {       \r\n         const file = new Blob(\r\n           [res.data], \r\n           {type: 'application/pdf'});\r\n\r\n         const fileURL = URL.createObjectURL(file);   \r\n         window.open(fileURL, \"_blank\");\r\n\r\n       \r\n\r\n       }).catch( (err) =>\r\n       {\r\n           console.log(err);\r\n       });\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      {loading && (\r\n        <div style={{ width: \"100%\", paddingTop: \"3px\" }}>\r\n          <LinearProgress color=\"primary\" />\r\n        </div>\r\n      )}\r\n\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item md={5}>\r\n            <div style={{textAlign:\"left\", paddingLeft:\"10px\"}}>\r\n                <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\">\r\n                        <Grid item>\r\n                                <span style={{paddingRight: \"15px\", color: \"#555\"}}> <WarningIcon style={{fontSize:\"2.2rem\"}}/> </span>\r\n                        </Grid>\r\n                        <Grid item>\r\n                              <span style={{fontSize: '1.4rem', fontWeight:\"600\", color: \"#444\"}}> Unmatched Records </span>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Tooltip title=\"Refresh\" placement=\"right\">\r\n                                <IconButton\r\n                                  color=\"primary\"\r\n                                  className={classes.refreshButton}\r\n                                  onClick={refreshClicked}\r\n                                >\r\n                                  <RefreshIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                  </Grid>\r\n                </div>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          <ToggleButtonGroup\r\n            value={selectedTab}\r\n            style={{ marginBottom: \"10px\" }}\r\n            exclusive\r\n            onChange={handleTabChanged}\r\n            aria-label=\"text alignment\"\r\n          >\r\n            <ToggleButton value=\"unresolved\" aria-label=\"left aligned\">\r\n              UnResolved\r\n            </ToggleButton>\r\n            <ToggleButton value=\"archived\" aria-label=\"centered\">\r\n              Archived\r\n            </ToggleButton>\r\n          </ToggleButtonGroup>\r\n        </Grid>\r\n\r\n        <Grid item md={3}>\r\n          <TextField\r\n            variant=\"standard\"\r\n            value={filter}\r\n            onChange={filterChanged}\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n            id=\"filter\"\r\n            label=\"Filter\"\r\n            name=\"filter\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <div style={{ height: 700, width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={data.bookings}\r\n          columns={columns}\r\n          autoPageSize\r\n          onSelectionChange={handleSelectionChanged}\r\n        />\r\n      </div>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={openDialog}\r\n        onClose={handleCloseDialog}\r\n        PaperComponent={PaperComponent}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"draggable-dialog-title\">\r\n          <Grid\r\n            container\r\n            spacing={2}\r\n            direction=\"row\"\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <WbIncandescentIcon\r\n                style={{ color: \"#2f942e\", fontSize: \"2rem\" }}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item>\r\n              <div\r\n                style={{\r\n                  color: \"#2f942e\",\r\n                  paddingBottom: \"12px\",\r\n                  fontWeight: \"800\",\r\n                }}\r\n              >\r\n                {\" \"}\r\n                SMART MATCH{\" \"}\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Divider />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div\r\n            style={{\r\n              height: \"600px\",\r\n              // width: \"1200px\",\r\n            }}\r\n          >\r\n            {(!likelyBookings || !smartLinkDetails) && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  alignItems=\"center\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <LoaderSpinner\r\n                      style={{ marginTop: \"170px\" }}\r\n                      type=\"Grid\"\r\n                      color=\"#2f942e\"\r\n                      height={100}\r\n                      width={100}\r\n                      timeout={0} //3 secs\r\n                    />\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        color: \"#2f942e\",\r\n                        paddingBottom: \"12px\",\r\n                        fontWeight: \"800\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      SEARCHING ...{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {likelyBookings && likelyBookings.length === 0 && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  alignItems=\"center\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        color: \"#2f942e\",\r\n                        paddingBottom: \"12px\",\r\n                        fontWeight: \"800\",\r\n                        marginTop: \"230px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      SORRY, NO RECORDS FOUND !{\" \"}\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {likelyBookings && smartLinkDetails && likelyBookings.length > 0 && (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"flex-start\"\r\n                  alignItems=\"stretch\"\r\n                  spacing={2}\r\n                >\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"1.1rem\",\r\n                        fontWeight: \"600\",\r\n                        color: \"#2f942e\",\r\n                        marginBottom: \"15px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      LAB RECORD :\r\n                    </div>\r\n\r\n                    <Grid\r\n                      style={{ paddingLeft: \"20px\", paddingBottom: \"20px\" }}\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"flex-start\"\r\n                      alignItems=\"flex-start\"\r\n                      spacing={4}\r\n                    >\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Forename:</span>\r\n                        <span className={classes.infoData}>\r\n                          {smartLinkDetails.forename}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Surname:</span>\r\n                        <span className={classes.infoData}>\r\n                          {smartLinkDetails.surname}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>D.O.B:</span>\r\n                        <span className={classes.infoData}>\r\n                          {FormatDateFromString(smartLinkDetails.birthDate)}\r\n                        </span>\r\n                      </Grid>\r\n\r\n                      <Grid item>\r\n                        <span className={classes.infoTitle}>Test Date:</span>\r\n                        <span className={classes.infoData}>\r\n                          {FormatDateFromString(smartLinkDetails.testDate)}\r\n                        </span>\r\n                      </Grid>\r\n                    </Grid>\r\n\r\n                    <Divider />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"1.1rem\",\r\n                        fontWeight: \"600\",\r\n                        color: \"#2f942e\",\r\n                        marginBottom: \"15px\",\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      BEST MATCHES :\r\n                    </div>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Table size=\"small\">\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>Select</TableCell>\r\n                          <TableCell>Match</TableCell>\r\n                          <TableCell>Forename</TableCell>\r\n                          <TableCell>Surname</TableCell>\r\n                          <TableCell>D.O.B</TableCell>\r\n                          <TableCell>Email</TableCell>\r\n                          <TableCell>Test Date</TableCell>\r\n                          <TableCell></TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {likelyBookings.map((row) => (\r\n                          <TableRow key={row._id}>\r\n                            <TableCell>\r\n                              <Tooltip\r\n                                title={\r\n                                  row.birthDate !== smartLinkDetails.birthDate\r\n                                    ? '\"D.O.B\" DOES NOT MATCH THE LAB REPORT ! PLEASE MAKE SURE \"D.O.B\" OF THE SELECTED BOOKING IS CORRECT !'\r\n                                    : \"\"\r\n                                }\r\n                              >\r\n                                <FormControlLabel\r\n                                  control={\r\n                                    <Checkbox\r\n                                      checked={\r\n                                        selectedBooking &&\r\n                                        selectedBooking._id === row._id\r\n                                      }\r\n                                      disabled={\r\n                                        matched || matching\r\n                                      }\r\n                                      onChange={(event) =>\r\n                                        handleCheckChanged(event, row)\r\n                                      }\r\n                                      name=\"checkedA\"\r\n                                    />\r\n                                  }\r\n                                  label=\"\"\r\n                                />\r\n                              </Tooltip>\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={{\r\n                                fontWeight: \"800\",\r\n                                color: \"#2f942e\",\r\n                                fontSize: \"1.1rem\",\r\n                              }}\r\n                            >{`${row.likelihood} %`}</TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.forenameCapital ===\r\n                                smartLinkDetails.forename\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"#ff871f\" }\r\n                              }\r\n                            >\r\n                              {row.forenameCapital}\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.surnameCapital === smartLinkDetails.surname\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"#ff871f\" }\r\n                              }\r\n                            >\r\n                              {row.surnameCapital}\r\n                            </TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                row.birthDate === smartLinkDetails.birthDate\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"red\" }\r\n                              }\r\n                            >\r\n                              <Grid\r\n                                container\r\n                                direction=\"column\"\r\n                                justify=\"center\"\r\n                                alignItems=\"center\"\r\n                                spacing={1}\r\n                              >\r\n                                <Grid item>\r\n                                  {row.birthDate !==\r\n                                    smartLinkDetails.birthDate && (\r\n                                    <span style={{ textAlign: \"center\" }}>\r\n                                      <ReportProblemIcon />\r\n                                    </span>\r\n                                  )}\r\n                                </Grid>\r\n                                {FormatDateFromString(row.birthDate)}\r\n                                <Grid item></Grid>\r\n                              </Grid>\r\n                            </TableCell>\r\n                            <TableCell>{row.email?.toUpperCase()}</TableCell>\r\n                            <TableCell\r\n                              style={\r\n                                dateformat(\r\n                                  row.samplingTimeStamp,\r\n                                  \"yyyy-mm-dd\"\r\n                                ) === smartLinkDetails.testDate\r\n                                  ? { fontWeight: \"800\", color: \"#2f942e\" }\r\n                                  : { fontWeight: \"800\", color: \"red\" }\r\n                              }\r\n                            >\r\n                              {FormatDateFromString(dateformat(row.samplingTimeStamp, \"yyyy-mm-dd\"))}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Button\r\n                                color=\"primary\"\r\n                                disabled = {sending}\r\n                                onClick={(event) =>\r\n                                  seeDetailsClicked(event, row)\r\n                                }\r\n                              >\r\n                                See Details\r\n                              </Button>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid\r\n                  container\r\n                  direction=\"column\"\r\n                  justify=\"center\"\r\n                  spacing = {1}\r\n                  alignItems=\"center\"\r\n                >\r\n\r\n                {!matched && (\r\n                  <React.Fragment>\r\n                        <Grid item>\r\n                          <Button\r\n                            disabled = {!selectedBooking || matching}\r\n                            className={classes.matchButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {matchRecords}\r\n                          >\r\n                            GO Match THE Records\r\n                          </Button>\r\n                        </Grid>\r\n\r\n                        {!selectedBooking && (\r\n                            <Grid item>\r\n                              <Alert severity=\"warning\">No Record is Selected !  Please select a record you think it is a match.</Alert>\r\n                          </Grid>\r\n                        )}\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n                {matched && !sent && !sending && (\r\n                  <React.Fragment>\r\n\r\n                    <Grid item>\r\n            \r\n                         <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\"> Success  The Records are Matched Now !</Alert>\r\n                    \r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n\r\n                      <div style={{paddingTop:\"5px\", fontSize:\"1rem\", fontWeight: \"500\", color: \"#555\"}}>\r\n                         Do you want to Resend the LAB Report {selectedBooking.certificate ? ' and Certificate' : ''}  Now?\r\n                      </div>\r\n\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.resendButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {resendEmailsClicked}\r\n                          >\r\n                            YES ! RESEND THE EMAILS\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.cancelButton}\r\n                            variant=\"contained\"\r\n                            color=\"default\"\r\n                            onClick = {cancelResendEmailsClicked}\r\n                          >\r\n                            NO ! NOT NOW\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    \r\n                    <Grid item>\r\n                          <Button\r\n                            disabled = {sending || sent}\r\n                            className={classes.resendFilesButton}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick = {resendFilesClicked}\r\n                          >\r\n                            Just Generate The Files and send to pcrresults@medicalexpressclinic.co.uk\r\n                          </Button>\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n            \r\n                         <Alert style={{marginTop:\"10px\",  paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"warning\">\r\n                            Caution!  The LAB Report and Certificate will be Sent According to the Record you have Selected !\r\n                          </Alert>\r\n       \r\n                   </Grid>\r\n\r\n\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n                        {matched && (sending || sent) && ( \r\n                          <Grid item>\r\n\r\n                            <div style={{paddingTop: \"50px\", color: \"#2f942e\" , fontWeight:\"600\", fontSize: \"1rem\"}}>\r\n                                 {sending && !sent && (\r\n                                   'Sending ...'\r\n                                 )}\r\n\r\n                                 {sent && !sendJustToPCR && (\r\n                                     <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\">\r\n                                          Success!  The LAB Report {selectedBooking.certificate? ' and Certificate ': ' ' }  Successfully Sent.\r\n                                     </Alert>\r\n                                 )}\r\n\r\n                                {sent && sendJustToPCR && (\r\n                                     <Alert style={{marginTop:\"10px\", paddingLeft:\"50px\", paddingRight:\"50px\"}} severity=\"success\">\r\n                                          Success!  The LAB Report {selectedBooking.certificate? ' and Certificate ': ' ' }  Successfully Sent Just to pcrresults@medicalexpressclinic.co.uk .\r\n                                     </Alert>\r\n                                 )}\r\n\r\n\r\n\r\n                                 \r\n                            </div>\r\n                            \r\n                          </Grid>\r\n                          \r\n                        )}\r\n\r\n                </Grid>\r\n              </React.Fragment>\r\n            )}\r\n\r\n\r\n              {matched && (sending || sent) && (\r\n                  <React.Fragment>\r\n\r\n                      <div style={{marginTop:\"10px\", width:\"50%\", marginLeft: \"27%\"}}>\r\n                        \r\n                           <LinearProgressWithLabel variant=\"determinate\" color=\"primary\"  value={sendingProgress} />     \r\n\r\n                      </div>\r\n\r\n                      <div style={{paddingTop: \"30px\", color: \"#2f942e\" , fontWeight:\"600\", fontSize: \"1rem\",  marginLeft: \"45%\"}}>\r\n                            {sending && !sent && (\r\n                                   'PLEASE WAIT ...'\r\n                                 )}     \r\n                                  \r\n                    </div>\r\n\r\n                  </React.Fragment>\r\n                )}\r\n\r\n\r\n          </div>\r\n\r\n          <BookingDialog\r\n            booking={seeDetailsBooking}\r\n            open={seeDetailsDialogOpen}\r\n            onClose={handleCloseSeeDetaisDialog}\r\n            deleteButtonDisabled={true}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 100;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (isPast || disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.calendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, calendarCache : [...state.calendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled || isPast) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 && !disableDay)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 && !disableDay)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}>\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport { Badge } from '@material-ui/core';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 5;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        if (isPast)\r\n        {\r\n            setBookingsCount(-2);\r\n            return;\r\n        }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.calendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, calendarCache : [...state.calendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 && !isPast)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div  onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div  onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 && !isPast)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}>\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                            dayClicked = {dayClicked}\r\n                                            key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                            date={dateformat(day,'yyyy-mm-dd')}\r\n                                            time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\nimport BookingDialog from '../BookingDialog';\r\nimport { setRef } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        height : \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        display: \"flex\",\r\n        alignItems : \"flex-start\",\r\n        justifyItems: \"flex-start\",\r\n        paddingLeft : \"10px\"\r\n\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"10%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n    bookingBox: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#ebedf7\",\r\n        color: \"#3f51b5\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#3f51b5\",\r\n            color: \"#ebedf7\"\r\n          },\r\n    }\r\n\r\n  }));\r\n\r\n\r\n\r\nconst DayViewCell = ({key, date, time}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookings, setBookings] = React.useState(null);\r\n    const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [refresh, setRefresh] = React.useState(true); \r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n    }, [date]);\r\n\r\n    useEffect( () => \r\n    {\r\n        if (bookings) {\r\n\r\n\r\n            if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0)\r\n            {\r\n                const search = state.dayViewCalFilter.trim().toUpperCase();\r\n                setFilteredBookings( bookings.filter(booking => booking.forenameCapital.indexOf(search) >= 0\r\n                                                            ||  booking.surnameCapital.indexOf(search) >= 0\r\n                                                            ||  `${booking.forenameCapital} ${booking.surnameCapital}`.indexOf(search) >= 0\r\n                    \r\n                    ));\r\n            }\r\n            else\r\n            {\r\n                setFilteredBookings([...bookings]);\r\n            }\r\n        }\r\n\r\n    }, [state.dayViewCalFilter, bookings]);\r\n\r\n\r\n    useEffect ( () => {\r\n       \r\n        const fetchData = async () =>\r\n        {\r\n            if (!date || date.length <= 0 || !time || time.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n         \r\n            if (isPast)\r\n            {\r\n                setBookings([]);\r\n                return;\r\n            }\r\n    \r\n            setBookings(null);\r\n    \r\n            var res = state.calendarCache?.find(record => record.method === 'getBookingsByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n            if (!res || openDialog)\r\n            {\r\n                res = await BookService.getBookingsByDateStrandTime(date, time);\r\n                setState(state => ({...state, calendarCache : [...state.calendarCache, {method: 'getBookingsByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }\r\n          \r\n          \r\n            if (res.data.status === 'OK')\r\n            {\r\n                setBookings(res.data.bookings);\r\n            }   \r\n        }\r\n\r\n        if (openDialog)\r\n        {\r\n            setState(state => ({...state, calendarCache : state.calendarCache.filter(record => !(record.method === 'getBookingsByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, calendarCache : state.calendarCache.filter(record => !(record.method === 'getBookingsCountByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, calendarCache : state.calendarCache.filter(record => !(record.method === 'getBookingsCountByDateStr' && record.query ===  date))}));\r\n        }\r\n\r\n         fetchData();\r\n     \r\n    }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n    const bookingCliked = (event, booking) =>\r\n    {\r\n        setSelectedBooking(booking);\r\n        setOpenDialog(true);\r\n    }\r\n\r\n\r\n    const getBookingsBox = (_bookings) =>\r\n    {\r\n        if (_bookings === null) \r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookings.length > 0 && !isPast)\r\n        {\r\n           return (\r\n                _bookings.map(booking => (\r\n\r\n                    <div style={booking.tr ? {borderTop: \"5px solid #d00fd6\"} : {} } className={classes.bookingBox} onClick={event => bookingCliked(event,booking)}>\r\n\r\n                        {`${booking.forenameCapital}-${booking.surnameCapital}`.substring(0,15)}\r\n\r\n                    </div>\r\n\r\n                ))\r\n\r\n           );\r\n        }\r\n    }\r\n\r\n\r\n    const handleCloseDialog = () =>\r\n    {\r\n        setOpenDialog(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}>\r\n\r\n              {getBookingsBox(filteredBookings)}\r\n\r\n            </div>\r\n\r\n            <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n            />\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n  };\r\n\r\n \r\n  \r\nexport default DayViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, calendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, calendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n            <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport GlobalState from '../../GlobalState';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"70%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelToday: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        backgroundColor: \"#1a73e8\",\r\n        color: \"#fff\",\r\n        fontSize: \"1rem\",\r\n        borderRadius: \"50%\",\r\n        padding: \"5px\",\r\n        lineHight: \"35px\",\r\n        minWidth: \"35px\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        lineHight: \"40px\",\r\n        cursor: \"pointer\",\r\n        textAlign: \"center\"\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n        left: \"40%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        padding: \"10px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"40px\",\r\n        cursor: \"pointer\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"8%\",\r\n        height: \"85%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 100;  \r\n\r\nconst MonthViewCell = ({key, cellIndex, month, daysInMonth, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [dateStr, setDateStr] = React.useState('');\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n\r\n    const [disableDay, setDisableDay] = React.useState(false);\r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    useEffect( () => {\r\n\r\n        if (cellIndex <= daysInMonth.length)\r\n        {\r\n            const date = daysInMonth[cellIndex - 1];\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(date.getMonth() !== month - 1);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n        else\r\n        {\r\n            const day = cellIndex - daysInMonth.length;\r\n            const date = new Date((daysInMonth[daysInMonth.length - 1].getTime() + ( day * 86400000)));\r\n            const dateStr = dateformat(date, 'yyyy-mm-dd');\r\n            setDateStr(dateStr);\r\n            setCellDate(date);\r\n            setDisableDay(true);\r\n            const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n            setIsPast(dateStr < todayStr);\r\n        }\r\n\r\n    }, [cellIndex, month, daysInMonth]);\r\n\r\n    useEffect ( () => {\r\n\r\n        const fecthData = async () =>\r\n        {\r\n            if (!dateStr || dateStr.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            if (disableDay)\r\n            {\r\n                setBookingsCount(-2);\r\n                return;\r\n            }\r\n\r\n            setBookingsCount(-1);\r\n\r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStr' && record.query === dateStr)?.res;\r\n\r\n            if (!res)\r\n            {\r\n                res = await BookService.getAllBookingsCountByDateStr(dateStr);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStr' , query : dateStr, res: res}]}));\r\n            }\r\n        \r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }\r\n\r\n        }\r\n\r\n      fecthData();\r\n\r\n    }, [dateStr]);\r\n\r\n    const getDayLabel = (_cellIndex , _month , _daysInMonth) =>\r\n    {\r\n        var date = null;\r\n        var disabled = false;\r\n        var day = -1;\r\n\r\n    \r\n\r\n        if (_cellIndex <= _daysInMonth.length)\r\n        {\r\n            date = _daysInMonth[_cellIndex - 1];\r\n            day = date.getDate();\r\n            if (date.getMonth() !== _month - 1)\r\n            {\r\n                disabled = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const _day = _cellIndex - _daysInMonth.length;\r\n            const date = new Date((_daysInMonth[_daysInMonth.length - 1].getTime() + ( _day * 86400000)));\r\n            day = date.getDate();\r\n            disabled = true;\r\n        }\r\n\r\n        const isToday = dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd');\r\n\r\n        return (\r\n            <span className={(disabled) ? classes.DayLabelDisabled : isToday ? classes.DayLabelToday : classes.DayLabel}>\r\n                 {day > 0 ? `${day}` : ''}\r\n             </span>\r\n        );\r\n    }\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0 )\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT / 2)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                          {_bookingsCount < 10 ?  ` ${_bookingsCount}` : `${_bookingsCount}`}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0)\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#3f51b5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", width:\"100%\", height:`${percent}%`, backgroundColor: \"#fafafa\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}>\r\n\r\n              {getDayLabel(cellIndex, month, daysInMonth)}\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    cellIndex: PropTypes.number.isRequired,\r\n    month: PropTypes.number.isRequired,\r\n    daysInMonth: PropTypes.arrayOf(PropTypes.date),\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default MonthViewCell;","import calendar from 'node-calendar';\r\n\r\n\r\nexport default class CalendarUtil {\r\n\r\n    static getMonthRange = (month , year) =>\r\n    {\r\n        return new calendar.Calendar(calendar.SUNDAY).itermonthdates(year, month);\r\n    } \r\n\r\n} ","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport MonthViewCell from './MonthViewCell';\r\nimport CalendarUtil from './calendar-util';\r\n\r\nconst dayLables = ['Sun', 'Mon', 'Tue', 'Wed' , 'Thu', 'Fri', 'Sat'];\r\nconst days = [1,2,3,4,5,6,7]; \r\nconst rows = [1,2,3,4,5,6];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"14%\"\r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n    }\r\n\r\n  }));\r\n\r\nconst MonthView = ({month, year, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const daysInMonth = CalendarUtil.getMonthRange(month,year);\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        {dayLables.map(label => (\r\n                            <th key={`th-${label}`} className={classes.th}>\r\n                                {label}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.map(row => (\r\n                        <tr>\r\n                            {days.map(day => (\r\n                                <td className={classes.td}>\r\n                                    <MonthViewCell \r\n                                        key={`${month}${year}${(row-1) * days.length + day}`} \r\n                                        cellIndex={(row-1) * days.length + day} \r\n                                        month={month} \r\n                                        daysInMonth={daysInMonth}\r\n                                        dayClicked = {dayClicked}\r\n                                        />\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}            \r\n                </tbody>\r\n\r\n            </table>\r\n\r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nMonthView.propTypes = {\r\n    month: PropTypes.number.isRequired,\r\n    year: PropTypes.number.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default MonthView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\"\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"40%\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    BookingCountLabel: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#3f51b5\",\r\n        backgroundColor: \"#ebedf7\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    BookingCountLabelBusy: {\r\n        position: \"absolute\",\r\n        top: \"25%\",\r\n        left: \"38%\",\r\n        color: \"#b00000\",\r\n        backgroundColor: \"#fce6e6\",\r\n        fontSize: \"14px\",\r\n        fontWeight: \"600\",\r\n        padding: \"5px\",\r\n        borderRadius: \"50%\",\r\n        minWidth: \"30px\",\r\n        cursor : \"pointer\",\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n  }));\r\n\r\nconst MAX_BOOKING_COUNT = 5;  \r\n\r\nconst WeekViewCell = ({key, date, time, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookingsCount, setBookingsCount] = React.useState(-1);\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [cellDate, setCellDate] = React.useState(new Date());\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n        setCellDate(new Date(date));\r\n\r\n    }, [date]);\r\n\r\n    useEffect ( () => {\r\n      \r\n      \r\n      \r\n        if (!date || date.length <= 0 || !time || time.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        // if (isPast)\r\n        // {\r\n        //     setBookingsCount(-2);\r\n        //     return;\r\n        // }\r\n\r\n        setBookingsCount(-1);\r\n\r\n       \r\n\r\n        var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsCountByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n        if (res)\r\n        {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n            }  \r\n            return;\r\n        }\r\n\r\n        let source = axios.CancelToken.source();\r\n        BookService.getAllBookingsCountByDateStrandTime(date, time, source).then( res => {\r\n            if (res.data.count >= 0)\r\n            {\r\n                setBookingsCount(res.data.count);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsCountByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }  \r\n        }).catch( err => \r\n            {\r\n                //do nothing\r\n            });\r\n     \r\n        return () => {\r\n           if (source)\r\n              source.cancel('Cancelling in cleanup');\r\n        }\r\n     \r\n    }, [date, time]);\r\n\r\n\r\n    const getBookingsCountLabel = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount === -1)\r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookingsCount > 0)\r\n        {\r\n            if (_bookingsCount >= MAX_BOOKING_COUNT)\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabelBusy}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n            else\r\n            {\r\n                return (\r\n                    <div onClick={(event => dayClicked(event,cellDate))} className={classes.BookingCountLabel}>\r\n                        {_bookingsCount}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const getBookingsCountGauge = (_bookingsCount) =>\r\n    {\r\n        if (_bookingsCount > 0 )\r\n        {\r\n            let percent = (_bookingsCount / MAX_BOOKING_COUNT) * 100;\r\n            if (percent > 100)\r\n            {\r\n                percent = 100;\r\n            }\r\n\r\n            // percent = 100 - percent;\r\n\r\n            return (\r\n\r\n                <div className={classes.BookingCountGauge}>\r\n                  <div style={{padding:\"0\", margin:\"0\", width:\"100%\", height:\"100%\", backgroundColor: \"#f5f5f5\"}} >\r\n                        <div  style={{padding:\"0\", margin:\"0\", height:\"100%\", width:`${percent}%`, backgroundColor: \"#3f51b5\"}} >\r\n\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={isPast ? classes.ContainerPast : classes.Container}>\r\n\r\n              {getBookingsCountLabel(bookingsCount)}\r\n\r\n              {getBookingsCountGauge(bookingsCount)}\r\n\r\n            </div>\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n \r\n  \r\nexport default WeekViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport WeekViewCell from './WeekViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"12%\", \r\n    }\r\n\r\n  }));\r\n\r\nconst WeekView = ({dates, dayClicked}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                            {dates.map(date => (\r\n                                <th className={classes.th}>\r\n                                    <div style={{paddingBottom: \"5px\", color: \"#aaa\"}}>\r\n                                         {dateformat(date, 'ddd')}\r\n                                    </div>\r\n                                    <div>\r\n                                        <span style={{color: \"#aaa\"}}>\r\n                                            {dateformat(date, 'mmm ')}\r\n                                        </span> \r\n                                        <span  style={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? { backgroundColor: \"#1a73e8\", color: \"#fff\", borderRadius: \"50%\",  padding: \"5px\",} : {color: \"#333\", fontWeight:\"500\"}}>\r\n                                             {dateformat(date, ' d')}\r\n                                        </span>\r\n                                       \r\n                                    </div>\r\n                                </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                                {dates.map(day => (\r\n                                    <td className={classes.td}>\r\n                                        <WeekViewCell \r\n                                                dayClicked = {dayClicked}\r\n                                                key={`${dateformat(day,'yyyy-mm-dd')}-${row.replace(':','-')}`} \r\n                                                date={dateformat(day,'yyyy-mm-dd')} \r\n                                                time={row}/>\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nWeekView.propTypes = {\r\n    dates: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n    dayClicked: PropTypes.func\r\n  };\r\n\r\n\r\nexport default WeekView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport dateformat from 'dateformat';\r\nimport BookService from '../services/BookService';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GlobalState from '../../GlobalState';\r\nimport BookingDialog from '../BookingDialog';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    Container: {\r\n        width: \"100%\",\r\n        height : \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fff\",\r\n        display: \"flex\",\r\n        alignItems : \"flex-start\",\r\n        justifyItems: \"flex-start\",\r\n        paddingLeft : \"10px\"\r\n\r\n    },\r\n\r\n    ContainerPast: {\r\n        width: \"100%\",\r\n        paddingTop: \"50px\",\r\n        position: \"relative\",\r\n        backgroundColor: \"#fafafa\"\r\n    },\r\n    \r\n    DayLabel: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#555\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    DayLabelDisabled: {\r\n        position: \"absolute\",\r\n        top: \"5px\",\r\n        right: \"5px\",\r\n        color: \"#ddd\",\r\n        fontSize: \"1rem\"\r\n    },\r\n\r\n    LoadingProgress: {\r\n        position: \"absolute\",\r\n        top: \"10%\",\r\n        left: \"40%\",\r\n      },\r\n\r\n      BookingCountGauge: {\r\n        position: \"absolute\",\r\n        bottom: \"5%\",\r\n        left: \"8%\",\r\n        width : \"85%\",\r\n        height: \"8%\"\r\n    },\r\n\r\n    bookingBox: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#ebedf7\",\r\n        color: \"#3f51b5\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#3f51b5\",\r\n            color: \"#ebedf7\"\r\n          },\r\n    },\r\n\r\n    bookingBoxSampleTaken: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#0066cc\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#0059b3\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n    bookingBoxPositive: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#d40b0b\",\r\n        color: \"#fff2f2\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#bf0000\",\r\n            color: \"#fff\"\r\n          },\r\n    },\r\n\r\n    bookingBoxReportSent: {\r\n        display: \"flex\",\r\n        marginRight: \"10px\",\r\n        marginTop: \"5px\",\r\n        padding: \"10px\",\r\n        maxWidth : \"150px\",\r\n        overflowX: \"hidden\",\r\n        border : \"1px solid #eee\",\r\n        fontSize: \"12px\",\r\n        fontWeight : \"500\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#009900\",\r\n        color: \"#eee\",\r\n        boxShadow: \"2px 4px #fafafa\",\r\n\r\n        \"&:hover\": {\r\n            background: \"#006e00\",\r\n            color: \"#fafafa\"\r\n          },\r\n    },\r\n\r\n  \r\n\r\n  }));\r\n\r\n\r\n\r\nconst DayViewCell = ({key, date, time}) => {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n    const [bookings, setBookings] = React.useState(null);\r\n    const [filteredBookings, setFilteredBookings] = React.useState(null);\r\n    const [selectedBooking, setSelectedBooking] = React.useState(null);\r\n\r\n    const [refresh, setRefresh] = React.useState(true); \r\n\r\n    const [isPast, setIsPast] = React.useState(false);\r\n\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n\r\n    useEffect( () => {\r\n        const todayStr = dateformat(new Date(), 'yyyy-mm-dd');\r\n        setIsPast(date < todayStr);\r\n\r\n    }, [date]);\r\n\r\n    useEffect( () => \r\n    {\r\n        if (bookings) {\r\n\r\n\r\n            if (state.dayViewCalFilter && state.dayViewCalFilter.trim().length > 0)\r\n            {\r\n                const search = state.dayViewCalFilter.trim().toUpperCase();\r\n                setFilteredBookings( bookings.filter(booking => booking.forenameCapital.indexOf(search) >= 0\r\n                                                            ||  booking.surnameCapital.indexOf(search) >= 0\r\n                                                            ||  `${booking.forenameCapital} ${booking.surnameCapital}`.indexOf(search) >= 0\r\n                    \r\n                    ));\r\n            }\r\n            else\r\n            {\r\n                setFilteredBookings([...bookings]);\r\n            }\r\n        }\r\n\r\n    }, [state.dayViewCalFilter, bookings]);\r\n \r\n\r\n\r\n    useEffect ( () => {\r\n       \r\n        const fetchData = async () =>\r\n        {\r\n            if (!date || date.length <= 0 || !time || time.length <= 0)\r\n            {\r\n                return;\r\n            }\r\n         \r\n            // if (isPast)\r\n            // {\r\n            //     setBookings([]);\r\n            //     return;\r\n            // }\r\n    \r\n            setBookings(null);\r\n    \r\n            var res = state.AdminCalendarCache?.find(record => record.method === 'getBookingsByDateStrandTime' && record.query === `${date}${time}`)?.res;\r\n            if (!res || openDialog)\r\n            {\r\n                res = await BookService.getAllBookingsByDateStrandTime(date, time);\r\n                setState(state => ({...state, AdminCalendarCache : [...state.AdminCalendarCache, {method: 'getBookingsByDateStrandTime' , query : `${date}${time}`, res: res}]}));\r\n            }\r\n          \r\n          \r\n            if (res.data.status === 'OK')\r\n            {\r\n                setBookings(res.data.bookings);\r\n            }   \r\n        }\r\n\r\n        if (openDialog)\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStrandTime' && record.query ===  `${date}${time}`))}));\r\n            setState(state => ({...state, AdminCalendarCache : state.AdminCalendarCache.filter(record => !(record.method === 'getBookingsCountByDateStr' && record.query ===  date))}));\r\n        }\r\n\r\n         fetchData();\r\n     \r\n    }, [date, time, state.bookingDialogDataChanged]);\r\n\r\n    const bookingCliked = (event, booking) =>\r\n    {\r\n        setSelectedBooking(booking);\r\n        setOpenDialog(true);\r\n    }\r\n\r\n    \r\n\r\n    const getBookingClass = (status) =>\r\n    {\r\n        switch (status) {\r\n\r\n            case 'sample_taken':\r\n                return classes.bookingBoxSampleTaken;\r\n            case 'positive':\r\n                return classes.bookingBoxPositive;\r\n            case 'report_sent':\r\n            case 'report_cert_sent':\r\n                return classes.bookingBoxReportSent;     \r\n\r\n            default : \r\n                return classes.bookingBox;\r\n        }\r\n    }\r\n\r\n    const getBookingsBox = (_bookings) =>\r\n    {\r\n        if (_bookings === null) \r\n        {\r\n            return (\r\n                <div className={classes.LoadingProgress}>\r\n                      <CircularProgress disableShrink  />\r\n                </div>\r\n            );  \r\n        }\r\n        else if (_bookings.length > 0)\r\n        {\r\n           return (\r\n                _bookings.map(booking => (\r\n\r\n                    <div style={booking.tr ? {borderTop: \"5px solid #d00fd6\"} : {} } className={getBookingClass(booking.status)} onClick={event => bookingCliked(event,booking)}>\r\n\r\n                        {`${booking.forenameCapital}-${booking.surnameCapital}`.substring(0,15)}\r\n\r\n                    </div>\r\n\r\n                ))\r\n\r\n           );\r\n        }\r\n    }\r\n\r\n\r\n    const handleCloseDialog = () =>\r\n    {\r\n        setOpenDialog(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <div className={classes.Container}>\r\n\r\n              {getBookingsBox(filteredBookings)}\r\n\r\n            </div>\r\n\r\n            <BookingDialog\r\n                booking={selectedBooking}\r\n                open={openDialog}\r\n                onClose={handleCloseDialog}\r\n            />\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayViewCell.propTypes = {\r\n    key: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired,\r\n    time: PropTypes.string.isRequired,\r\n  };\r\n\r\n \r\n  \r\nexport default DayViewCell;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport DayViewCell from './DayViewCell';\r\nimport dateformat from 'dateformat';\r\n\r\nconst rows = [\r\n    '09:00 AM',\r\n    '09:15 AM', \r\n    '09:30 AM', \r\n    '09:45 AM',\r\n    '10:00 AM',\r\n    '10:15 AM',\r\n    '10:30 AM',\r\n    '10:45 AM',\r\n    '11:00 AM',\r\n    '11:15 AM',\r\n    '11:30 AM',\r\n    '11:45 AM',\r\n    '12:00 PM',\r\n    '12:15 PM',\r\n    '12:30 PM',\r\n    '12:45 PM',\r\n    '01:00 PM',\r\n    '01:15 PM',\r\n    '01:30 PM',\r\n    '01:45 PM',\r\n    '02:00 PM',\r\n    '02:15 PM',\r\n    '02:30 PM',\r\n    '02:45 PM',\r\n    '03:00 PM',\r\n    '03:15 PM',\r\n    '03:30 PM',\r\n    '03:45 PM',\r\n    '04:00 PM',\r\n    '04:15 PM',\r\n    '04:30 PM',\r\n    '04:45 PM',\r\n    '05:00 PM',\r\n    '05:15 PM',\r\n    '05:30 PM',\r\n    '05:45 PM',\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    table: {\r\n        width: \"100%\",\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        overflowY: \"auto\"\r\n    },\r\n\r\n    th: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        fontcolor: \"#555\",\r\n        fontWeight: \"400\",\r\n        fontSize: \"15px\",\r\n        paddingTop: \"5px\",\r\n        paddingBottom: \"5px\",\r\n        width: \"12%\", \r\n    },\r\n\r\n    td: {\r\n        border: \"1px solid #ddd\",\r\n        borderCollapse: \"collapse\",\r\n        verticalAlign: \"middle\",\r\n        height : \"50px\",\r\n        width: \"84%\", \r\n    },\r\n\r\n    titleLabel: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#777\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n    titleLabelToday: {\r\n        paddingBottom: \"17px\",\r\n        paddingTop: \"17px\",\r\n        color: \"#fff\",\r\n        backgroundColor: \"#1a73e8\",\r\n        fontSize: \"16px\"\r\n    },\r\n\r\n  }));\r\n\r\nconst DayView = ({date}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n        <div style={{overflowY: \"scroll\" , height: \"60px\"}}>\r\n            <table className={classes.table}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{width: \"7%\"}}>\r\n                        \r\n                        </th>\r\n                        <th style={{width: \"84%\"}}>\r\n                                <div className={(dateformat(new Date(),'yyyy-mm-dd') === dateformat(date, 'yyyy-mm-dd')) ? classes.titleLabelToday : classes.titleLabel }>\r\n                                        {dateformat(date,'dddd')}\r\n                                </div>                                \r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n             </table>\r\n\r\n        </div>\r\n\r\n            <div style={{overflowY: \"scroll\" , height: \"70vh\"}}>\r\n                <table className={classes.table}>   \r\n                    <tbody>\r\n                        {rows.map(row => (\r\n                            <tr>\r\n                                <td style={{width: \"7%\"}}>\r\n                                    {row}\r\n                                </td>\r\n                               \r\n                                <td className={classes.td}>\r\n                                     <DayViewCell key={`${dateformat(date,'yyyy-mm-dd')}-${row}`} date={dateformat(date,'yyyy-mm-dd')} time={row}/>  \r\n                                </td>\r\n                            \r\n                            </tr>\r\n                        ))}            \r\n                    </tbody>\r\n                </table>\r\n            </div>                    \r\n      \r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n}\r\n\r\nDayView.propTypes = {\r\n    date: PropTypes.any.isRequired\r\n  };\r\n\r\n\r\nexport default DayView;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MonthView from './MonthView';\r\nimport { Button, Grid, IconButton, InputAdornment, TextField, Tooltip } from '@material-ui/core';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport WeekView from './WeekView';\r\nimport dateformat from 'dateformat';\r\nimport DayView from './DayView';\r\nimport GlobalState from '../../GlobalState';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: \"24px\",\r\n        fontColor: \"#333\"\r\n    },\r\n\r\n  }));\r\n\r\nexport default function CalendarView() {\r\n    const classes = useStyles();\r\n\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = React.useState(new Date().getFullYear());\r\n\r\n    const [day, setDay] = React.useState(new Date());\r\n\r\n    const [firstDayofWeek, setFirstDayofWeek] = React.useState(new Date());\r\n\r\n    const [weekDates, setWeekDates] = React.useState([]);\r\n\r\n    const [mode, setMode] = React.useState('month');\r\n    const [selectedTab, setSeletedTab] = React.useState('month');\r\n\r\n    const [filter,setFilter] = React.useState('');\r\n\r\n    const filterChanged = (event) =>{\r\n        setFilter(event.target.value);\r\n        setState(state => ({...state, dayViewCalFilter : event.target.value?.trim()?.toUpperCase()}))\r\n      }\r\n\r\n      const removeFilter = () =>\r\n      {\r\n        setFilter('');\r\n        setState(state => ({...state, dayViewCalFilter : ''}));\r\n      }\r\n\r\n\r\n    useEffect( () => {\r\n        const today = new Date();\r\n        const dayofWeek = today.getDay();\r\n        const firstdayofweek = new Date(today.getTime() - ( dayofWeek * 86400000));\r\n        setFirstDayofWeek(firstdayofweek);\r\n        setState(state => ({...state, AdminCalendarCache : []}));\r\n\r\n        return () =>\r\n        {\r\n            setState(state => ({...state, AdminCalendarCache : []}));\r\n            removeFilter();\r\n        }\r\n       \r\n    }, []);\r\n\r\n\r\n    useEffect( () => {\r\n        const dates = [];\r\n        for (var i = 0; i < 7 ; i++)\r\n        {\r\n            dates.push(new Date(firstDayofWeek.getTime() + ( i * 86400000)));\r\n        }\r\n        setWeekDates(dates);\r\n\r\n    }, [firstDayofWeek]);\r\n\r\n    const handlePrevButton = (event) =>\r\n    {\r\n       if (mode === 'month')\r\n       {\r\n            if (month === 1)\r\n            {\r\n                setYear(year - 1);\r\n            } \r\n\r\n            const newMonth = month === 1 ? 12 : month - 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n       } \r\n       else if (mode === 'week')\r\n       {\r\n           const newFirstDayofWeek = new Date(firstDayofWeek.getTime() - ( 7 * 86400000));\r\n           setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n           setDay(newFirstDayofWeek);\r\n           setMonth(newFirstDayofWeek.getMonth() + 1);\r\n           setYear(newFirstDayofWeek.getFullYear());\r\n\r\n       }\r\n       else if (mode === 'day')\r\n       {\r\n           const newDay = new Date(day.getTime() - ( 1 * 86400000));\r\n           setDay(newDay);\r\n\r\n           const dayofWeek = newDay.getDay();\r\n           setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n\r\n           setMonth(newDay.getMonth() + 1);\r\n           setYear(newDay.getFullYear());\r\n       }\r\n    }\r\n\r\n    const handleNextButton = (event) =>\r\n    {\r\n        if (mode === 'month')\r\n        {\r\n            if (month === 12)\r\n            {\r\n                setYear(year + 1);\r\n            } \r\n       \r\n            const newMonth = month === 12 ? 1 : month + 1;\r\n            setMonth(newMonth);\r\n\r\n            const newDay = new Date(year, newMonth - 1 , 1, 0 ,0 ,0 ,0);\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        }\r\n        else if (mode === 'week')\r\n        {\r\n            const newFirstDayofWeek = new Date(firstDayofWeek.getTime() + ( 7 * 86400000));\r\n            setFirstDayofWeek(newFirstDayofWeek);\r\n\r\n            setDay(newFirstDayofWeek);\r\n            setMonth(newFirstDayofWeek.getMonth() + 1);\r\n            setYear(newFirstDayofWeek.getFullYear());\r\n\r\n        }\r\n        else if (mode === 'day')\r\n        {\r\n            const newDay = new Date(day.getTime() + ( 1 * 86400000));\r\n            setDay(newDay);\r\n\r\n            const dayofWeek = newDay.getDay();\r\n            setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n \r\n            setMonth(newDay.getMonth() + 1);\r\n            setYear(newDay.getFullYear());\r\n        }\r\n    }\r\n\r\n    const goToday = (event) => {\r\n        const newDay = new Date();\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n    }\r\n\r\n    const dayClicked = (event, date) =>\r\n    {\r\n        const newDay = new Date(date);\r\n        const dayofWeek = newDay.getDay();\r\n        setFirstDayofWeek(new Date(newDay.getTime() - ( dayofWeek * 86400000)));\r\n        setDay(newDay);\r\n        setMonth(newDay.getMonth() + 1);\r\n        setYear(newDay.getFullYear());\r\n        setSeletedTab('day');\r\n        setMode('day');\r\n    }\r\n\r\n    const getContentFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <MonthView dayClicked={dayClicked} month={month} year={year}/>    \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            return (\r\n                    <WeekView dayClicked={dayClicked} dates={weekDates}/>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <DayView date={day}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getCalendarTitleFromMode = (_mode) => {\r\n        if (_mode === 'month')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${monthNames[month - 1]} ${year}`} </span>   \r\n            );\r\n        }    \r\n        else if (_mode === 'week')\r\n        {\r\n            const endOfWeek = new Date(firstDayofWeek.getTime() + ( 6 * 86400000));\r\n            let endofWeekStr = '';\r\n            if (endOfWeek.getMonth() === firstDayofWeek.getMonth())\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'d');\r\n            }else\r\n            {\r\n                endofWeekStr = dateformat(endOfWeek,'mmm d');\r\n            }\r\n\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(firstDayofWeek,'mmm d')} - ${endofWeekStr}, ${year}`} </span>\r\n            );\r\n            \r\n        }\r\n        else if (_mode === 'day')\r\n        {\r\n            return (\r\n                <span className={classes.title}> {`${dateformat(day,'mmmm d, yyyy')}`} </span>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    const handleTabChanged = (event, value) => {\r\n        if (value && value.length)\r\n        {\r\n          setSeletedTab(value);\r\n          setMode(value);\r\n        }\r\n    };\r\n\r\n    const getPrevButtonTitle = (_mode) =>\r\n    {\r\n        return `Previuos ${mode}`;\r\n    }\r\n\r\n    const getNextButtonTitle = (_mode) =>\r\n    {\r\n        return `Next ${mode}`;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            style= {{marginBottom: \"10px\", marginTop: \"0px\"}}\r\n            >  \r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-start\", justifyContent: \"flex-start\" , paddingLeft: \"10px\"}}>\r\n                    <Tooltip title={getPrevButtonTitle(mode)} placement=\"bottom-start\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"prev\"\r\n                                onClick = {handlePrevButton}\r\n                                >\r\n                            <NavigateBeforeIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={getNextButtonTitle(mode)} placement=\"bottom-end\">\r\n                        <IconButton \r\n                                color=\"default\" \r\n                                aria-label=\"next\"\r\n                                onClick = {handleNextButton}\r\n                                >\r\n                            <NavigateNextIcon style={{fontSize: '2rem'}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Button style={{marginTop: \"11px\", marginLeft: \"10px\"}} onClick={goToday} variant=\"outlined\"> Today </Button>\r\n                </div>\r\n\r\n            </Grid>\r\n\r\n            <Grid item md={6}>\r\n\r\n                    <Grid\r\n                        container\r\n                        direction=\"row\"\r\n                        justify=\"center\"\r\n                        alignItems=\"flex-end\"\r\n                        spacing = {3}\r\n                        >\r\n                            <Grid item>\r\n                                    {getCalendarTitleFromMode(mode)}\r\n                            </Grid>\r\n                            {mode === 'day' && (\r\n                                        <Grid item>\r\n                                                <TextField\r\n                                                    variant=\"standard\"\r\n                                                    style={{marginBottom : \"5px\"}}\r\n                                                    value={filter}\r\n                                                    onChange={filterChanged}\r\n                                                    margin=\"normal\"\r\n                                                    size=\"small\"\r\n                                                    id=\"filter\"\r\n                                                    label=\"Filter\"\r\n                                                    name=\"filter\"\r\n                                                    autoComplete=\"off\"\r\n                                                    InputProps={{\r\n                                                        endAdornment : \r\n                                                            <InputAdornment position=\"end\">\r\n                                                                <Tooltip title=\"Clear\">\r\n                                                                            <IconButton\r\n                                                                            aria-label=\"remove filter\"\r\n                                                                            onClick={() => removeFilter()}\r\n                                                                            onMouseDown={() => removeFilter()}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                </Tooltip>\r\n                                                            \r\n                                                            </InputAdornment>\r\n                                                          \r\n                                                    }}\r\n                                                   \r\n                                                />\r\n                                        </Grid>\r\n                            )}\r\n                           \r\n                    </Grid>\r\n                \r\n            </Grid>\r\n\r\n            <Grid item md={3}>\r\n                <div  style={{display:\"flex\", alignItems: \"flex-end\", justifyContent: \"flex-end\", paddingRight: \"10px\" }}>\r\n                    <ToggleButtonGroup\r\n                        value={selectedTab}\r\n                        exclusive\r\n                        onChange={handleTabChanged}\r\n                        aria-label=\"select view mode\"\r\n                    >\r\n                        <ToggleButton style={selectedTab === 'month' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\" } : {width: \"80px\"}} value=\"month\" aria-label=\"month view\">\r\n                                month\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'week' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}}  value=\"week\" aria-label=\"week view\">\r\n                                week\r\n                        </ToggleButton>\r\n                        <ToggleButton style={selectedTab === 'day' ? {width: \"80px\", color: \"#3f51b5\", backgroundColor: \"#ebedf7\"} : {width: \"80px\"}} value=\"day\" aria-label=\"day view\">\r\n                                day\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n            </Grid>\r\n\r\n           </Grid> \r\n\r\n             {getContentFromMode(mode)}\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    );\r\n\r\n}","import DashboardIcon from \"@material-ui/icons/Dashboard\";\r\nimport NewReleasesIcon from \"@material-ui/icons/NewReleases\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\nimport LiveTvIcon from \"@material-ui/icons/LiveTv\";\r\nimport PlaylistAddCheckIcon from \"@material-ui/icons/PlaylistAddCheck\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\r\n\r\n/// PCR ------------------\r\nimport FindByRef from './PCR/FindByRef';\r\nimport BookingTable from './PCR/BookingTable';\r\nimport DashboardPreview from './PCR/DashboardPreview';\r\nimport UnmatchedRecords from './PCR/UnmatchedRecords';\r\nimport CalendarView from './PCR/calendar/CalendarView';\r\nimport AdminCalendarView from './PCR/calendar-admin/CalendarView';\r\n\r\n//-----------------------\r\n\r\nexport const MenuList_Admin = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n];\r\n\r\nexport const MenuList_Gynae = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n];\r\n\r\nexport const MenuList_PCR = [\r\n  { index: 0, id: `dashboard`, title: `Dashboard`, icon: <DashboardIcon /> },\r\n  {\r\n    index: 1,\r\n    id: `recentBookings`,\r\n    title: `Recent Bookings`,\r\n    icon: <AutorenewIcon />,\r\n  },\r\n  {\r\n    index: 2,\r\n    id: `todayBookings`,\r\n    title: `Today's Bookings`,\r\n    icon: <NewReleasesIcon />,\r\n  },\r\n  {\r\n    index: 3,\r\n    id: `liveBookings`,\r\n    title: `Live Bookings`,\r\n    icon: <LiveTvIcon />,\r\n  },\r\n  { index: 4, id: `oldBookings`, title: `Old Bookings`, icon: <HistoryIcon /> },\r\n  {\r\n    index: 5,\r\n    id: `futureBookings`,\r\n    title: `Future Bookings`,\r\n    icon: <TimelineIcon />,\r\n  },\r\n  {\r\n    index: 6,\r\n    id: `allBookings`,\r\n    title: `All Bookings`,\r\n    icon: <DescriptionIcon />,\r\n  },\r\n  {\r\n    index: 7,\r\n    id: `completedBookings`,\r\n    title: `Completed Bookings`,\r\n    icon: <PlaylistAddCheckIcon />,\r\n  },\r\n  {\r\n    index: 8,\r\n    id: `positiveBookings`,\r\n    title: `Positive Results`,\r\n    icon: <AddCircleOutlineIcon />,\r\n  },\r\n  {\r\n    index: 9,\r\n    id: `latebookings`,\r\n    title: `40 Hours Late`,\r\n    icon: <HourglassEmptyIcon />,\r\n  },\r\n  {\r\n    index: 10,\r\n    id: `deletedBookings`,\r\n    title: `Deleted Records`,\r\n    icon: <DeleteIcon />,\r\n  },\r\n  {\r\n    index: 11,\r\n    id: `unmatchedRecords`,\r\n    title: `Unmatched Records`,\r\n    icon: <WarningIcon />,\r\n  },\r\n  {\r\n    index: 12,\r\n    id: `calendarView`,\r\n    title: `Calendar View`,\r\n    icon: <DateRangeIcon />,\r\n  },\r\n  {\r\n    index: 13,\r\n    id: `adminCalendarView`,\r\n    title: `Admin Calendar`,\r\n    icon: <EventNoteIcon />,\r\n  },\r\n  { index: 14, id: `findByRef`, title: `Find By Ref No`, icon: <SearchIcon /> },\r\n];\r\n\r\nexport const getMenuContent = (role, index) => {\r\n  if (role === \"pcr\") {\r\n    switch (index) {\r\n      case 0:\r\n        return <DashboardPreview/>;\r\n      case 1:\r\n        return <BookingTable date=\"recent\"/>;\r\n      case 2:\r\n        return <BookingTable date=\"today\"/>;\r\n      case 3:\r\n        return <BookingTable date=\"live\"/>;\r\n      case 4:\r\n        return  <BookingTable date=\"old\"/>;\r\n      case 5:\r\n        return  <BookingTable date=\"future\"/>;\r\n      case 6:\r\n        return  <BookingTable date=\"all\"/>;\r\n      case 7:\r\n        return <BookingTable date=\"completed\"/>;\r\n      case 8:\r\n        return <BookingTable date=\"positive\"/>;\r\n      case 9:\r\n        return <BookingTable date=\"late\"/>;\r\n      case 10:\r\n        return  <BookingTable date=\"deleted\"/>;\r\n      case 11:\r\n        return <UnmatchedRecords/>;\r\n      case 12:\r\n        return <CalendarView/>;\r\n      case 13:\r\n        return <AdminCalendarView/>;\r\n      case 14:\r\n        return <FindByRef/>;\r\n\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"gynae\") {\r\n    switch (index) {\r\n      case 0:\r\n        return `Dashboard Gynae`;\r\n      case 1:\r\n        return `Recent Bookings Gyane`;\r\n      case 2:\r\n        return `Today's Bookings Gynae`;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else if (role === \"admin\") {\r\n    switch (index) {\r\n      case 0:\r\n        return `Dashboard Admin`;\r\n      case 1:\r\n        return `Recent Bookings Admin`;\r\n      default:\r\n        return `Page Not Found!`;\r\n    }\r\n  } else {\r\n    return `Page Not Found!`;\r\n  }\r\n};\r\n\r\nexport const getMenuRole = (role) => {\r\n  switch (role) {\r\n    case \"admin\":\r\n      return MenuList_Admin;\r\n    case \"pcr\":\r\n      return MenuList_PCR;\r\n    case \"gynae\":\r\n      return MenuList_Gynae;\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nexport const getMenuId = (role, index) => {\r\n  const MenuList = getMenuRole(role);\r\n  for (var i = 0; i < MenuList.length; i++) {\r\n    if (MenuList[i].index === index) {\r\n      return MenuList[i].id;\r\n    }\r\n  }\r\n\r\n  return `Page Not Found!`;\r\n};\r\n\r\nexport const getMenuIndex = (role, id) => {\r\n  const MenuList = getMenuRole(role);\r\n  for (var i = 0; i < MenuList.length; i++) {\r\n    if (MenuList[i].id === id) {\r\n      return MenuList[i].index;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n};\r\n","export const getRole = () => {\r\n    return sessionStorage.getItem('medexadmin-role')\r\n}\r\n\r\nexport const setRole = (role) => {\r\n    return sessionStorage.setItem('medexadmin-role', role)\r\n}\r\n\r\nexport const clearRole = (role) => {\r\n    return sessionStorage.removeItem('medexadmin-role')\r\n}","import React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport {\r\n  Grid,\r\n  AppBar,\r\n  Checkbox,\r\n  FormControl,\r\n  FormControlLabel,\r\n  InputAdornment,\r\n  InputLabel,\r\n  OutlinedInput,\r\n  Paper,\r\n  Backdrop,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { IconButton, Toolbar } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport Copyright from \"./CopyRight\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserService from \"./services/UserService\";\r\nimport { getMenuId } from \"./MenuList\";\r\n\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { borderRadius } from \"@material-ui/system\";\r\nimport { setRole } from \"./Role\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  image: {\r\n    backgroundImage: \"url(/images/bg.jpg)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundColor:\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[50]\r\n        : theme.palette.grey[900],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  paper: {\r\n    // margin: theme.spacing(15, 2),\r\n    padding: theme.spacing(4,4),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    // border: `2px solid ${theme.palette.primary.main}`,\r\n    // borderRadius: \"8px\"\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n    color: \"#f5f5f5\",\r\n  },\r\n\r\n  margin: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n\r\n  alert: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n\r\n  pageBg:{\r\n    paddingTop: theme.spacing(15),\r\n   \r\n    background: \"linear-gradient(3deg, rgba(2,0,36,1) 0%, rgba(9,77,121,1) 35%, rgba(0,212,255,1) 100%)\",\r\n    height: \"100vh\",\r\n    margin: 0,\r\n    padding:0,\r\n  },\r\n\r\n  appbarCenter: {\r\n    position: \"fixed\",\r\n    // width: \"260px\",\r\n    top: theme.spacing(9.5),\r\n    left: \"50%\",\r\n    marginLeft: \"-145px\",\r\n    alignItems: \"center\",\r\n    justify: \"center\",\r\n    display: \"flex\",\r\n    backgroundColor: \"#fff\",\r\n    padding: \"5px 20px 15px 20px\",\r\n    borderRadius: \"8px\"\r\n  },\r\n\r\n  logoImage: {\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  appbarTitle: {\r\n    color: \"#00a1c5\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    marginRight: \"15px\",\r\n  },\r\n\r\n  adminPanelLabel: {\r\n    color: theme.palette.primary.main, \r\n    marginBottom:\"20px\"\r\n  }\r\n\r\n\r\n\r\n\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const isMobile = useMediaQuery({ maxWidth: 1224 })\r\n\r\n\r\n  let history = useHistory();\r\n\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const [username, setUsername] = React.useState(\"\");\r\n\r\n  const [saveChecked, setSaveChecked] = React.useState(false);\r\n\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n\r\n  const [error, setError] = React.useState(null);\r\n  const [submiting, setSubmiting] = React.useState(false);\r\n\r\n  const signIn = () => {\r\n    setSubmiting(true);\r\n\r\n    UserService.signIn({\r\n      username: username,\r\n      password: password,\r\n    })\r\n      .then((res) => {\r\n        setSubmiting(false);\r\n        if (res.data.status === \"OK\") {\r\n          setError(null);\r\n          const token = res.data.token;\r\n          if (saveChecked) {\r\n            localStorage.setItem(\"medexadmin-auth-token\", token);\r\n          } else {\r\n            sessionStorage.setItem(\"medexadmin-auth-token\", token);\r\n          }\r\n\r\n          setState((state) => ({ ...state, signedIn: true }));\r\n          setRole(res.data.roles[0])\r\n          setState((state) => ({ ...state, currentMenuIndex: 0 }));\r\n          history.push(`/${getMenuId(res.data.roles[0], 0)}`);\r\n        } else if (res.data.status === \"FAILED\") {\r\n          setError(res.data.error);\r\n        } else {\r\n          setError(\"Sorry, something went wrong, please try again.\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setSubmiting(false);\r\n        console.error(err);\r\n        setError(\"Sorry, something went wrong, please try again.\");\r\n      });\r\n  };\r\n\r\n  const usernameChanged = (event) => {\r\n    setUsername(event.target.value);\r\n    setError(null);\r\n  };\r\n\r\n  const passwordChanged = (event) => {\r\n    setPassword(event.target.value);\r\n    setError(null);\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const saveCheckedChanged = (event) => {\r\n    setSaveChecked(event.target.checked);\r\n  };\r\n\r\n  return (\r\n\r\n    <div className={classes.pageBg}>\r\n\r\n\r\n<div className={classes.appbarCenter}>\r\n\r\n\r\n    <span className={classes.appbarTitle}>\r\n      Medical Express Clinic\r\n    </span>\r\n\r\n  <img\r\n    className={classes.logoImage}\r\n    src=\"/images/logo.png\"\r\n    alt=\"logo image\"\r\n  />\r\n\r\n</div>\r\n\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\r\n      <Paper elevation={20}>\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h6\" className={classes.adminPanelLabel}>\r\n            Admin Panel\r\n          </Typography>\r\n\r\n          {error && (\r\n            <div className={classes.alert}>\r\n              <Alert severity=\"error\">\r\n                {\" \"}\r\n                <div style={{ lineHeight: \"1.5rem\", textAlign: \"justify\" }}>\r\n                  {error}\r\n                </div>\r\n              </Alert>\r\n            </div>\r\n          )}\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            name=\"email\"\r\n            autoComplete=\"username\"\r\n            value={username}\r\n            onChange={usernameChanged}\r\n            on\r\n            autoFocus\r\n          />\r\n          <FormControl\r\n            fullWidth\r\n            required\r\n            className={clsx(classes.margin, classes.textField)}\r\n            variant=\"outlined\"\r\n            onKeyPress={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                signIn();\r\n              }\r\n            }}\r\n          >\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">\r\n              {\" \"}\r\n              Password{\" \"}\r\n            </InputLabel>\r\n            <OutlinedInput\r\n              id=\"outlined-adornment-password\"\r\n              name=\"outlined-adornment-password\"\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              value={password}\r\n              onChange={passwordChanged}\r\n              autoComplete=\"current-password\"\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    tabindex=\"-1\"\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                  >\r\n                    {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              }\r\n              labelWidth={100}\r\n            />\r\n          </FormControl>\r\n\r\n          <FormControlLabel\r\n            style={{ textAlign: \"left\", width: \"100%\" }}\r\n            control={\r\n              <Checkbox\r\n                value=\"remember\"\r\n                color=\"secondary\"\r\n                checked={saveChecked}\r\n                onChange={saveCheckedChanged}\r\n              />\r\n            }\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={signIn}\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n        </div>\r\n      </Paper>\r\n\r\n      <Backdrop className={classes.backdrop} open={submiting}>\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          justify=\"center\"\r\n          alignItems=\"center\"\r\n          spacing={2}\r\n        >\r\n          <Grid item>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Grid>\r\n          <Grid item>\r\n            <span style={{ textAlign: \"center\", color: \"#fff\" }}>\r\n              {\" \"}\r\n              {/* Please wait ...{\" \"} */}\r\n            </span>\r\n          </Grid>\r\n        </Grid>\r\n      </Backdrop>\r\n\r\n      <Box mt={5} style={{color:\"#eee\"}}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  IconButton,\r\n  ListItemIcon,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport { List, ListItem } from \"@material-ui/core\";\r\n\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { getMenuRole, getMenuId } from \"./MenuList\";\r\nimport { border, borderBottom } from \"@material-ui/system\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n\r\n  icon: {\r\n    fontSize: \"1rem\",\r\n    color: \"#777\",\r\n    cursor: \"pointer\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"8px\",\r\n    borderBottom: \"1px solid #eee\",\r\n  },\r\n\r\n  iconSelected: {\r\n    color: \"#fff\",\r\n    backgroundColor:  theme.palette.primary.main,\r\n    transition: \"all 0.1s ease-in-out\"\r\n  },\r\n\r\n  menuText: {\r\n    fontSize: \"1rem\",\r\n    fontWeight: \"500\"\r\n  },\r\n}));\r\n\r\nexport default function MyMenu() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n\r\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n\r\n  let history = useHistory();\r\n\r\n  useEffect(() => {\r\n    setSelectedIndex(state.currentMenuIndex);\r\n  }, [state.currentMenuIndex]);\r\n\r\n  const handleListItemClick = (event, index) => {\r\n    setSelectedIndex(index);\r\n    history.push(`/${getMenuId(state.role,index)}`);\r\n    setState((state) => ({ ...state, currentMenuIndex: index }));\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List>\r\n        {state.role &&\r\n          getMenuRole(state.role).map(\r\n            (item) =>\r\n              !item.hidden && (\r\n                // <ListItem button selected={selectedIndex === item.index} onClick={(event) => handleListItemClick(event, item.index)}>\r\n                // <ListItemIcon>\r\n                //     {item.icon}\r\n                // </ListItemIcon>\r\n                // <ListItemText primary={`${item.title}`} />\r\n                // </ListItem>\r\n                <React.Fragment key={`${item.id}`}>\r\n                  <div\r\n                    key={`${item.id}`}\r\n                    className={clsx(\r\n                      classes.icon,\r\n                      selectedIndex === item.index && classes.iconSelected\r\n                    )}\r\n                    onClick={(event) => handleListItemClick(event, item.index)}\r\n                  >\r\n                    <Grid\r\n                      container\r\n                      direction=\"row\"\r\n                      justify=\"flex-start\"\r\n                      alignItems=\"flex-start\"\r\n                      spacing={3}\r\n                      style={{paddingLeft:\"15px\"}}\r\n                    >\r\n                      <Grid item>{item.icon}</Grid>\r\n\r\n                      <Grid item style={{textAlign:\"left\"}}>\r\n                        <span\r\n                          className={classes.menuText}\r\n                        >{`${item.title}`}</span>{\" \"}\r\n                      </Grid>\r\n                    </Grid>\r\n                  </div>\r\n                </React.Fragment>\r\n              )\r\n          )}\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\n\r\nimport { Avatar, Button, Grid, Tooltip, withStyles } from \"@material-ui/core\";\r\nimport GlobalState from \"./GlobalState\";\r\nimport MyMenu from \"./Menu\";\r\nimport { getMenuContent, getMenuId, getMenuIndex } from \"./MenuList\";\r\n\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport Copyright from \"./CopyRight\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport PersonOutlineIcon from \"@material-ui/icons/PersonOutline\";\r\nimport AppsIcon from \"@material-ui/icons/Apps\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport dateformat from \"dateformat\";\r\nimport { getRole, setRole, clearRole } from \"./Role\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst StyledMenu = withStyles((theme) => ({\r\n  paper: {\r\n    marginTop: \"10px\",\r\n    // marginRight: \"5px\",\r\n    width: \"270px\",\r\n    height: \"240px\",\r\n    border: `1px solid #ddd`,\r\n    borderRadius: \"10px\",\r\n    paddingTop: \"10px\",\r\n  },\r\n}))((props) => (\r\n  <Menu\r\n    elevation={4}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuApps = withStyles((theme) => ({\r\n  paper: {\r\n    marginTop: \"5px\",\r\n    // marginRight: \"5px\",\r\n    width: \"275px\",\r\n    height: \"240px\",\r\n    border: `1px solid #ddd`,\r\n    borderRadius: \"10px\",\r\n    padding: \"10px\",\r\n  },\r\n}))((props) => (\r\n  <Menu\r\n    elevation={4}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 8px\",\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    // marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    overflowX: \"hidden\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      opacity: 0.9,\r\n    },\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    height: \"100vh\",\r\n    overflow: \"auto\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n\r\n  appbarTitle: {\r\n    color: \"#00a1c5\",\r\n    fontSize: \"1.2rem\",\r\n    fontWeight: \"500\",\r\n    marginRight: \"15px\",\r\n  },\r\n\r\n  appbarCenter: {\r\n    position: \"fixed\",\r\n    width: \"260px\",\r\n    top: \"10px\",\r\n    left: \"50%\",\r\n    marginLeft: \"-130px\",\r\n    alignItems: \"center\",\r\n    justify: \"center\",\r\n    display: \"flex\",\r\n  },\r\n\r\n  logoImage: {\r\n    width: \"36px\",\r\n    height: \"36px\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  userAvatar: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: \"#aaa\",\r\n    border: \"1px solid\",\r\n    color: \"#aaa\",\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  userAvatarSelected: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: theme.palette.primary.main,\r\n    border: \"1px solid\",\r\n    color: theme.palette.primary.main,\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  userAvatarBig: {\r\n    backgroundColor: \"#fff\",\r\n    borderColor: theme.palette.primary.main,\r\n    border: \"1px solid\",\r\n    color: theme.palette.primary.main,\r\n    width: \"60px\",\r\n    height: \"60px\",\r\n  },\r\n\r\n  appBarText: {\r\n    color: \"#888\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n\r\n  appBarAppsIcon: {\r\n    // color: \"#888\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"1.8rem\",\r\n  },\r\n\r\n  appBarAppsIconSelected: {\r\n    cursor: \"pointer\",\r\n    fontSize: \"1.8rem\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n\r\n  usernameLabel: {\r\n    fontSize: \"1.2rem\",\r\n    color: theme.palette.primary.main,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n\r\n  lastLoginLabel: {\r\n    color: \"#777\",\r\n    paddingTop: \"5px\",\r\n  },\r\n\r\n  appsLogo: {\r\n    width: \"70px\",\r\n    height: \"70px\",\r\n  },\r\n\r\n  appsBox: {\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.1s ease-in-out\",\r\n    padding: \"2px\",\r\n    borderBottom: `5px solid #fff`,\r\n    borderRadius: \"5px\",\r\n    // border: \"2px solid #fff\",\r\n    \"&:hover\": {\r\n      //      border: `2px solid ${theme.palette.primary.main}`,\r\n      //      borderRadius: \"10px\",\r\n      borderBottom: `5px solid ${theme.palette.primary.main}`,\r\n      transition: \"all 0.1s ease-in-out\",\r\n    },\r\n  },\r\n\r\n  appsBoxSelected: {\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.1s ease-in-out\",\r\n    padding: \"2px\",\r\n    borderBottom: `5px solid${theme.palette.primary.light}`,\r\n    borderRadius: \"5px\",\r\n    // border: \"2px solid #fff\",\r\n    \"&:hover\": {\r\n      //      border: `2px solid ${theme.palette.primary.main}`,\r\n      //      borderRadius: \"10px\",\r\n      borderBottom: `5px solid ${theme.palette.primary.light}`,\r\n      transition: \"all 0.1s ease-in-out\",\r\n    },\r\n  },\r\n\r\n  appsAdminLabel: {\r\n    color: \"#0264d4\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsPCRLabel: {\r\n    color: \"#4faef7\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsGynaeLabel: {\r\n    color: \"#e83caf\",\r\n    fontWeight: \"600\",\r\n    fontSize: \"0.95rem\",\r\n    marginTop: \"-10px\",\r\n  },\r\n\r\n  appsInToolbar:{\r\n    position: \"fixed\",\r\n    left: \"60px\",\r\n    top: \"-5px\",\r\n    height: \"65px\",\r\n    width: \"200px\",\r\n    overflow: \"hidden\"\r\n  }\r\n}));\r\n\r\nexport default function Dashboard() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useContext(GlobalState);\r\n  const isMobile = useMediaQuery({ maxWidth: 768 });\r\n\r\n  const [open, setOpen] = React.useState(isMobile ? false : true);\r\n\r\n  const [currentMenuIndex, setCurrentMenuIndex] = React.useState(0);\r\n\r\n  const [anchorUserAvatar, setAnchorUserAvatar] = React.useState(null);\r\n  const handleUserAvatarClick = (event) => {\r\n    setAnchorUserAvatar(event.currentTarget);\r\n  };\r\n  const handleUserAvatarClose = () => {\r\n    setAnchorUserAvatar(null);\r\n  };\r\n\r\n  const [anchorApps, setAnchorApps] = React.useState(null);\r\n  const handleAppsClick = (event) => {\r\n    setAnchorApps(event.currentTarget);\r\n  };\r\n  const handleAppsClose = () => {\r\n    setAnchorApps(null);\r\n  };\r\n\r\n  const history = useHistory();\r\n\r\n  let location = useLocation();\r\n  React.useEffect(() => {\r\n    if (!state.role) return;\r\n    const index = getMenuIndex(state.role, location.pathname.substr(1));\r\n    setState((state) => ({ ...state, currentMenuIndex: index }));\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrentMenuIndex(state.currentMenuIndex);\r\n    if (isMobile) {\r\n      setOpen(false);\r\n    }\r\n  }, [state.currentMenuIndex]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"medexadmin-auth-token\");\r\n    sessionStorage.removeItem(\"medexadmin-auth-token\");\r\n    clearRole();\r\n\r\n    setState((state) => ({ signedIn: false }));\r\n    history.replace(\"./login\");\r\n  };\r\n\r\n  const appsClicked = (role) => {\r\n    setRole(role);\r\n    setState((state) => ({ ...state, role: role }));\r\n    history.push(`/${getMenuId(role, 0)}`);\r\n  };\r\n\r\n  const getAppsLogo = (role) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return <img src=\"/images/admin.png\" className={classes.appsLogo} />;\r\n      case \"pcr\":\r\n        return <img src=\"/images/corona.png\" className={classes.appsLogo} />;\r\n\r\n      case \"gynae\":\r\n        return <img src=\"/images/woman.png\" className={classes.appsLogo} />;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getAppsLabel = (role) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return (<div className={classes.appsAdminLabel}> {\"Admin\"} </div>);\r\n      case \"pcr\":\r\n        return (<div className={classes.appsPCRLabel}> {\"PCR\"} </div>);\r\n      case \"gynae\":\r\n        return (<div className={classes.appsGynaeLabel}> {\"Gynae\"} </div>);\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {state.userId && state.role && (\r\n        <React.Fragment>\r\n          <div className={classes.root}>\r\n            <CssBaseline />\r\n            <AppBar\r\n              style={{ backgroundColor: \"#fff\", color: \"#555\", height: \"60px\"}}\r\n              position=\"absolute\"\r\n              className={clsx(\r\n                classes.appBar,\r\n                false && open && classes.appBarShift\r\n              )}\r\n            >\r\n              <Toolbar className={classes.toolbar}>\r\n                <IconButton\r\n                  edge=\"start\"\r\n                  color=\"inherit\"\r\n                  aria-label=\"open drawer\"\r\n                  onClick={handleDrawerOpen}\r\n                  className={clsx(classes.menuButton)}\r\n                >\r\n                  <MenuIcon />\r\n                </IconButton>\r\n\r\n                <div className={classes.appsInToolbar}>\r\n                    <Grid container direction=\"row\" alignItems=\"center\">\r\n                      <Grid item>\r\n                         {getAppsLogo(state.role)}\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <div style={{paddingTop:\"8px\"}}>\r\n                            {getAppsLabel(state.role)}\r\n                        </div>\r\n                      </Grid>\r\n                    </Grid>\r\n                \r\n\r\n                </div>\r\n              \r\n\r\n                <div className={classes.appbarCenter}>\r\n                  {!isMobile && (\r\n                    <React.Fragment>\r\n                      <span className={classes.appbarTitle}>\r\n                        Medical Express Clinic\r\n                      </span>\r\n\r\n                      <img\r\n                        className={classes.logoImage}\r\n                        src=\"/images/logo.png\"\r\n                        alt=\"logo image\"\r\n                      />\r\n                    </React.Fragment>\r\n                  )}\r\n                </div>\r\n\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"flex-end\",\r\n                    width: \"100%\",\r\n                    paddingLeft: \"2%\",\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    container\r\n                    spacing={2}\r\n                    direction=\"row-reverse\"\r\n                    justify=\"flex-start\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Grid item>\r\n                      <Avatar\r\n                        className={\r\n                          anchorUserAvatar\r\n                            ? classes.userAvatarSelected\r\n                            : classes.userAvatar\r\n                        }\r\n                        onClick={handleUserAvatarClick}\r\n                      >\r\n                        <IconButton>\r\n                          <PersonOutlineIcon />\r\n                        </IconButton>\r\n                      </Avatar>\r\n                    </Grid>\r\n\r\n                    {state.userId?.roles.find((e) => e === \"admin\") && (\r\n                      <Grid item>\r\n                        <IconButton onClick={handleAppsClick}>\r\n                          <AppsIcon\r\n                            className={\r\n                              anchorApps\r\n                                ? classes.appBarAppsIconSelected\r\n                                : classes.appBarAppsIcon\r\n                            }\r\n                          />\r\n                        </IconButton>\r\n                      </Grid>\r\n                    )}\r\n                  </Grid>\r\n                </div>\r\n              </Toolbar>\r\n            </AppBar>\r\n\r\n            <StyledMenu\r\n              id=\"user-avatar-menu\"\r\n              anchorEl={anchorUserAvatar}\r\n              keepMounted\r\n              open={Boolean(anchorUserAvatar)}\r\n              onClose={handleUserAvatarClose}\r\n            >\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <Avatar className={classes.userAvatarBig}>\r\n                    <PersonOutlineIcon style={{ fontSize: \"2.5rem\" }} />\r\n                  </Avatar>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div className={classes.usernameLabel}>\r\n                    {\" \"}\r\n                    {state.userId?.username}{\" \"}\r\n                  </div>\r\n                </Grid>\r\n                <Grid item>\r\n                  <span style={{ color: \"#999\", fontSize: \"0.85rem\" }}>\r\n                    Logged in at :\r\n                  </span>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div className={classes.lastLoginLabel}>\r\n                    {dateformat(state.userId?.lastLoginTimeStamp)}\r\n                  </div>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Button\r\n                    onClick={handleLogout}\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    style={{\r\n                      marginTop: \"30px\",\r\n                      width: \"150px\",\r\n                      borderRadius: \"30px\",\r\n                    }}\r\n                  >\r\n                    Logout\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </StyledMenu>\r\n\r\n            <StyledMenuApps\r\n              id=\"apps-menu\"\r\n              anchorEl={anchorApps}\r\n              keepMounted\r\n              open={Boolean(anchorApps)}\r\n              onClose={handleAppsClose}\r\n            >\r\n              <Grid container spacing={1}>\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"admin\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"admin\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"admin\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"admin\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"pcr\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"pcr\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"pcr\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"pcr\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <Grid\r\n                    container\r\n                    direction=\"column\"\r\n                    justify=\"center\"\r\n                    alignItems=\"center\"\r\n                    className={\r\n                      state.role === \"gynae\"\r\n                        ? classes.appsBoxSelected\r\n                        : classes.appsBox\r\n                    }\r\n                    onClick={() => appsClicked(\"gynae\")}\r\n                  >\r\n                    <Grid item>{getAppsLogo(\"gynae\")}</Grid>\r\n                    <Grid item>{getAppsLabel(\"gynae\")}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </StyledMenuApps>\r\n\r\n            <Drawer\r\n              variant={isMobile ? \"temporary\" : \"persistent\"}\r\n              classes={{\r\n                paper: clsx(\r\n                  classes.drawerPaper,\r\n                  !open && classes.drawerPaperClose\r\n                ),\r\n              }}\r\n              open={open}\r\n            >\r\n              <div className={classes.toolbarIcon}>\r\n                    <React.Fragment>\r\n                      <img\r\n                        className={classes.logoImage}\r\n                        src=\"/images/logo.png\"\r\n                        alt=\"logo image\"\r\n                        style={{marginRight: \"10px\"}}\r\n                      />\r\n                      <span className={classes.appbarTitle}>\r\n                        <span style={{fontSize:\"0.9rem\"}}>\r\n                           Medical Express \r\n                        </span>\r\n                      </span>\r\n\r\n\r\n                    </React.Fragment>\r\n                <IconButton onClick={handleDrawerClose}>\r\n                  <ChevronLeftIcon />\r\n                </IconButton>\r\n              </div>\r\n              <Divider />\r\n\r\n              <MyMenu />\r\n            </Drawer>\r\n\r\n            <main className={classes.content}>\r\n              <div className={classes.appBarSpacer} />\r\n              <Container\r\n                maxWidth={isMobile ? \"xs\" : \"xl\"}\r\n                className={classes.container}\r\n              >\r\n                {getMenuContent(state.role, currentMenuIndex)}\r\n\r\n              </Container>\r\n            </main>\r\n          </div>\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import UserService from \"./services/UserService\";\r\n\r\nexport async function getUserIdFromToken(token)\r\n{\r\n    try{\r\n       const res  = await UserService.checkToken({token: token})\r\n       if (res.data.status === 'OK')\r\n        {\r\n            return {username: res.data.userId, forename: res.data.forename, surname: res.data.surname, roles:res.data.roles, lastLoginTimeStamp: res.data.lastLoginTimeStamp}\r\n        }\r\n       else\r\n        {\r\n            return null\r\n        }\r\n    }\r\n    catch(err)\r\n    {\r\n        return null\r\n    }\r\n  \r\n}","import React from 'react';\r\n\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport GlobalState from './GlobalState';\r\n\r\n\r\n\r\n\r\nimport SignIn from './SignIn';\r\nimport Dashboard from './Dashboard';\r\n\r\nimport { useLocation, useHistory} from \"react-router-dom\";\r\nimport { getUserIdFromToken } from './TokenVerifier';\r\nimport UserService from './services/UserService';\r\nimport { getMenuId } from './MenuList';\r\nimport { getRole, setRole } from './Role';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    appBar: {\r\n        position: 'static',\r\n        backgroundColor: \"#333\",\r\n        color: \"#fff\",\r\n        //alignItems: 'center'\r\n    \r\n      },\r\n\r\n      signOutButton:{\r\n        color: \"#fff\",\r\n        marginRight : \"20px\",\r\n        fontWeight: \"500\"\r\n      },\r\n\r\n      title: {\r\n        flexGrow : 1\r\n      }\r\n\r\n\r\n}));\r\n\r\nexport default function Navigator() {\r\n\r\n    const classes = useStyles();\r\n    const [state, setState] = React.useContext(GlobalState);\r\n\r\n    const [loaded, setLoaded] = React.useState(false)\r\n\r\n    let history = useHistory();\r\n\r\n    const handleSignOut = () =>\r\n    {\r\n      setState(state => ({...state, signedIn: false}));\r\n\r\n    }\r\n\r\n    let location = useLocation();\r\n\r\n    React.useEffect(() => {\r\n\r\n      const checkToken = async () =>\r\n      {\r\n        const authToken = localStorage.getItem('medexadmin-auth-token') || sessionStorage.getItem('medexadmin-auth-token');\r\n        UserService.setToken(authToken)\r\n\r\n         if (!authToken)\r\n        {\r\n          setState(state => ({...state, signedIn: false, signedUp: false, forgotPassword: false}));\r\n          setLoaded(true)\r\n          history.push('/login');\r\n        }\r\n        else\r\n        {\r\n           const userId = await getUserIdFromToken(authToken);\r\n           if (!userId)\r\n           {\r\n              setState(state => ({...state, signedIn: false, signedUp: false, forgotPassword: false}));\r\n              history.push('/login');\r\n           }\r\n           else if (location.pathname === '/' || location.pathname === '/#' || location.pathname.startsWith('/login'))\r\n           {\r\n            if (!getRole())\r\n            {\r\n             setRole(userId.roles[0])\r\n            }\r\n             setState(state => ({...state, signedIn: true, signedUp: false, forgotPassword: false, userId: userId, role: getRole()}));\r\n            \r\n             history.push(`/${getMenuId(getRole(),0)}`);\r\n           }\r\n           else\r\n           {\r\n              if (!getRole())\r\n              {\r\n               setRole(userId.roles[0])\r\n              }\r\n             setState(state => ({...state, signedIn: true, userId: userId, role: getRole()}));\r\n           }\r\n\r\n           setLoaded(true)\r\n        }\r\n      }\r\n\r\n      checkToken();\r\n   \r\n    }, [location.pathname]);\r\n\r\n    const getComponentFromState = () =>\r\n    {\r\n\r\n      if (state.signedIn)\r\n      {\r\n        return <Dashboard/>\r\n      }\r\n      else\r\n      {\r\n          return <SignIn/>    \r\n      }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n\r\n            {\r\n              loaded && (\r\n                getComponentFromState()\r\n              )\r\n            }\r\n        \r\n        </React.Fragment>\r\n    );\r\n}","import React, { Fragment, Suspense, lazy } from \"react\";\r\nimport { MuiThemeProvider, CssBaseline } from \"@material-ui/core\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport theme from \"./theme\";\r\nimport GlobalStyles from \"./GlobalStyles\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport GlobalState from \"./GlobalState\";\r\nimport Navigator from './Navigator';\r\n\r\n\r\n\r\n\r\n// Configure JSS\r\n\r\n\r\nfunction App() {\r\n  const [state, setState] = React.useState({currentMenuIndex:0});\r\n\r\n  return (\r\n    <GlobalState.Provider value={[state, setState]}>\r\n      <BrowserRouter>\r\n        <MuiThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          <GlobalStyles />\r\n\r\n       \r\n\r\n              <Navigator/>\r\n\r\n       \r\n\r\n\r\n        </MuiThemeProvider>\r\n      </BrowserRouter>\r\n    </GlobalState.Provider>\r\n  );\r\n}\r\n\r\nserviceWorker.register();\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}