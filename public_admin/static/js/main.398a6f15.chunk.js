(this["webpackJsonppcr-booking-ui"]=this["webpackJsonppcr-booking-ui"]||[]).push([[0],{178:function(e,t,n){n(94).TouchApp;var a=function(e){var t=199;return e.certificate&&(t+=50),e.antiBodyTest&&(t+=99),t};e.exports={calculatePrice:a,calculateTotalPrice:function(e){for(var t=0,n=0;n<e.length;n++)t+=a(e[n]);return t}}},332:function(e,t,n){},333:function(e,t,n){},553:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n(0),o=n.n(i),c=n(19),r=n.n(c),s=(n(332),n(8)),d=(n(333),o.a.createContext([{},function(){}])),l=n(9),j=n(621),u=n(605),p=n(66),b=n(554),h=n(639),f=n(617),g=n(640),m=n(632),x=n(119),O=n.n(x),v=n(608),k=n(635),N=n(606),C=n(611),B=n(642),y=n(641),R=n(615),w=n(616),T=n(279),S=n(607),_=n(181),D=n(192),I=n(193),L=n(5);function P(){return Object(a.jsxs)(p.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(u.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var F=Object(b.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},display:"flex",flexWrap:"wrap"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",flexWrap:"wrap"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},RememberMe:{textAlign:"left"},appBar:{position:"static",alignItems:"center"}}}));function A(){var e=F(),t=o.a.useContext(d),n=Object(s.a)(t,2),i=n[0],c=n[1],r=o.a.useState(localStorage.getItem("pcr-admin-password")||""),j=Object(s.a)(r,2),u=j[0],b=j[1],x=o.a.useState(localStorage.getItem("pcr-admin-username")||""),A=Object(s.a)(x,2),E=A[0],U=A[1],M=o.a.useState(!!localStorage.getItem("pcr-admin-username")),W=Object(s.a)(M,2),z=W[0],V=W[1],H=function(){E&&u&&"admin"===E.toLowerCase()&&"pcr$321"===u?(c((function(e){return Object(l.a)(Object(l.a)({},e),{},{signedIn:!0})})),z?(localStorage.setItem("pcr-admin-username",E),localStorage.setItem("pcr-admin-password",u)):(localStorage.removeItem("pcr-admin-username"),localStorage.removeItem("pcr-admin-password"))):c((function(e){return Object(l.a)(Object(l.a)({},e),{},{signedInError:!0})}))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(N.a,{position:"absolute",color:"primary",className:e.appBar,children:Object(a.jsx)(S.a,{children:Object(a.jsx)(p.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"PCR Booking Admin Console"})})}),Object(a.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(h.a,{className:e.avatar,children:Object(a.jsx)(O.a,{})}),Object(a.jsx)(p.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(a.jsx)(g.a,{variant:"outlined",value:E,onChange:function(e){U(e.target.value),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{signedInError:!1})}))},margin:"normal",required:!0,fullWidth:!0,id:"usrname",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),Object(a.jsxs)(C.a,{fullWidth:!0,required:!0,className:Object(L.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&H()},children:[Object(a.jsx)(B.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(a.jsx)(y.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:i.showPassword?"text":"password",value:u,onChange:function(e){b(e.target.value),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{signedInError:!1})}))},endAdornment:Object(a.jsx)(R.a,{position:"end",children:Object(a.jsx)(_.a,{"aria-label":"toggle password visibility",onClick:function(){c((function(e){return Object(l.a)(Object(l.a)({},e),{},{showPassword:!e.showPassword})}))},onMouseDown:function(e){e.preventDefault()},children:i.showPassword?Object(a.jsx)(D.a,{}):Object(a.jsx)(I.a,{})})}),labelWidth:100})]}),Object(a.jsx)("div",{align:"left",children:Object(a.jsx)(w.a,{className:e.RememberMe,control:Object(a.jsx)(T.a,{value:"remember",color:"primary",checked:z,onChange:function(e){V(e.target.checked)}}),label:"Save password on this device"})}),Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:H,onTouchTap:H,className:e.submit,children:"Sign In"})]})]}),i.signedInError&&Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(k.a,{fullWidth:!0,severity:"error",children:"Invalid Username or Password. Please try again."})}),Object(a.jsx)(m.a,{mt:8,children:Object(a.jsx)(P,{})})]})]})}var E=n(277),U=n(250),M=n.n(U),W=n(618),z=n(76),V=n(251),H=n.n(V).a.create({baseURL:"https://www.travelpcrtest.com",headers:{Authorization:"Basic QXp1cmXEaWFtb45kOmh1bnRlcjO="}}),G=function e(){Object(z.a)(this,e)};G.updateBooking=function(e){return H.post("/api/book/updatebookappointment",e)},G.deleteBooking=function(e){return H.post("/api/book/deletebookappointment?id=".concat(e))},G.unDeleteBooking=function(e){return H.post("/api/book/undeletebookappointment?id=".concat(e))},G.getBookingsByRef=function(e){return H.get("/api/book/getbookingsbyref?ref=".concat(e))},G.getAllBookings=function(){return H.get("/api/book/getallbookings")},G.getDeletedBookings=function(){return H.get("/api/book/getdeletedbookings")},G.getLiveBookings=function(){return H.get("/api/book/getlivebookings")},G.getCompletedBookings=function(){return H.get("/api/book/getcompletedbookings")},G.getPositiveBookings=function(){return H.get("/api/book/getpositivebookings")},G.getTodayBookings=function(){return H.get("/api/book/gettodaybookings")},G.getOldBookings=function(){return H.get("/api/book/getoldbookings")},G.getFutureBookings=function(){return H.get("/api/book/getfuturebookings")},G.getRecentBookings=function(){return H.get("/api/book/getrecentbookings")},G.getRecentBookingsAll=function(){return H.get("/api/book/getrecentbookingsall")},G.getUnmatchedRecords=function(){return H.get("/api/book/getunmatchedrecords")},G.getUnmatchedRecordsArchived=function(){return H.get("/api/book/getunmatchedrecordsarchived")},G.archiveRecord=function(e){return H.post("/api/book/archiverecord?id=".concat(e))},G.unArchiveRecord=function(e){return H.post("/api/book/unarchiverecord?id=".concat(e))};var K=n(638),Y=n(620),J=n(619),X=n(252),$=n.n(X),Q=n(95),q=n(560),Z=function e(){Object(z.a)(this,e)};Z.downloadCovidForm1=function(e){return H.get("/api/pdf/downloadcovidform1?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},Z.downloadCovidForm2=function(e){return H.get("/api/pdf/downloadcovidform2?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},Z.downloadPdfResult=function(e){return H.get("/api/pdf/downloadpdfresult?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})},Z.downloadPdfCert=function(e){return H.get("/api/pdf/downloadpdfcert?id=".concat(e),{responseType:"arraybuffer",headers:{Accept:"application/pdf"}})};var ee=n(178),te=n(101),ne=n.n(te),ae=n(85),ie=n.n(ae),oe=n(86),ce=n.n(oe),re=n(136),se=n.n(re),de=Object(b.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px"},infoData:{fontWeight:"400"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},PositiveLabel:{backgroundColor:"red",color:"#fff",paddingRight:"90px",paddingLeft:"10px",fontWeight:"800"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},RestoreButton:{marginBottom:"20px",backgroundColor:"#fafafa",color:"#555","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#d90015","&:hover":{background:"#b80012",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",backgroundColor:"#d1175e","&:hover":{background:"#bd0d50",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"}}}));function le(){var e=de(),t=o.a.useContext(d),n=Object(s.a)(t,2),i=n[0],c=n[1],r=o.a.useState("panel0"),j=Object(s.a)(r,2),u=j[0],b=j[1],h=o.a.useState({edit:!1,person:null}),m=Object(s.a)(h,2),x=m[0],O=m[1],v=o.a.useState({delete:!1,person:null}),k=Object(s.a)(v,2),N=k[0],C=k[1],B=o.a.useState({restore:!1,person:null}),y=Object(s.a)(B,2),R=y[0],S=y[1],_=o.a.useState(!1),D=Object(s.a)(_,2),I=D[0],L=D[1],P=o.a.useState(!1),F=Object(s.a)(P,2),A=F[0],E=F[1],U=o.a.useState(!1),M=Object(s.a)(U,2),z=M[0],V=M[1],H=o.a.useState({}),X=Object(s.a)(H,2),Q=X[0],te=X[1],ae=o.a.useState(""),oe=Object(s.a)(ae,2),re=oe[0],le=oe[1],je=o.a.useState(""),ue=Object(s.a)(je,2),pe=ue[0],be=ue[1],he=o.a.useState(""),fe=Object(s.a)(he,2),ge=fe[0],me=fe[1],xe=o.a.useState(""),Oe=Object(s.a)(xe,2),ve=Oe[0],ke=Oe[1],Ne=o.a.useState(""),Ce=Object(s.a)(Ne,2),Be=Ce[0],ye=Ce[1],Re=o.a.useState(""),we=Object(s.a)(Re,2),Te=we[0],Se=we[1],_e=o.a.useState(""),De=Object(s.a)(_e,2),Ie=De[0],Le=De[1],Pe=o.a.useState(""),Fe=Object(s.a)(Pe,2),Ae=Fe[0],Ee=Fe[1],Ue=o.a.useState(""),Me=Object(s.a)(Ue,2),We=Me[0],ze=Me[1],Ve=o.a.useState(""),He=Object(s.a)(Ve,2),Ge=He[0],Ke=He[1],Ye=o.a.useState(""),Je=Object(s.a)(Ye,2),Xe=Je[0],$e=Je[1],Qe=o.a.useState(""),qe=Object(s.a)(Qe,2),Ze=qe[0],et=qe[1],tt=o.a.useState(""),nt=Object(s.a)(tt,2),at=nt[0],it=nt[1],ot=o.a.useState(""),ct=Object(s.a)(ot,2),rt=ct[0],st=ct[1],dt=o.a.useState(!1),lt=Object(s.a)(dt,2),jt=lt[0],ut=lt[1],pt=o.a.useState(!1),bt=Object(s.a)(pt,2),ht=bt[0],ft=bt[1],gt=function(e){le(e.target.value),te(Object(l.a)(Object(l.a)({},Q),{},{bookingDateError:!1}))},mt=function(e){be(e.target.value),te(Object(l.a)(Object(l.a)({},Q),{},{bookingTimeError:!1}))},xt=function(e){me(e.target.value)},Ot=function(e){ke(e.target.value)},vt=function(e){ye(e.target.value)},kt=function(e){Se(e.target.value)},Nt=function(e){Le(e.target.value)},Ct=function(e){Ee(e.target.value),te(Object(l.a)(Object(l.a)({},Q),{},{dobError:!1}))},Bt=function(e){ze(e.target.value)},yt=function(e){Ke(e.target.value)},Rt=function(e){$e(e.target.value)},wt=function(e){et(e.target.value)},Tt=function(e){it(e.target.value)},St=function(e){st(e.target.value)},_t=function(e){ut(e.target.checked)},Dt=function(e){ft(e.target.checked)},It=function(e,t){if(e)ye(t.forenameCapital),Se(t.surnameCapital),le(t.bookingDate),be(t.bookingTime.toUpperCase()),me(t.gender.toUpperCase()),ke(t.title.toUpperCase()),Le(t.email.toUpperCase()),Ee(t.birthDate),ze(t.phone.toUpperCase()),Ke(t.postCode.toUpperCase()),$e(t.address.toUpperCase()),t.notes&&et(t.notes.toUpperCase()),t.passportNumber&&it(t.passportNumber.toUpperCase()),t.passportNumber2&&st(t.passportNumber2.toUpperCase()),ut(t.certificate),ft(t.antiBodyTest),O({edit:e,person:t});else if(e||t){if(!e&&t){var n={},a=t._id;n.certificate=jt,n.antiBodyTest=ht,n.gender=ge,n.title=ve,n.birthDate=Ae,n.email=Ie,n.phone=We,n.postCode=Ge,n.address=Xe,n.passportNumber=at,n.passportNumber2=rt,n.forename=Be,n.surname=Te,n.notes=Ze,n.bookingDate=re,n.bookingTime=pe,n.bookingRef=t.bookingRef,Pt(n)&&Ft({bookingId:a,person:n})}}else O({edit:e,person:t})},Lt=function(e){var t=!1;e&&10===e.length||(t=!0),"-"===e.charAt(4)&&"-"===e.charAt(7)||(t=!0);try{/^\d{4}-\d{2}-\d{2}$/.test(e)||(t=!0);var n=parseInt(e.substr(0,4)),a=parseInt(e.substr(5,2)),i=parseInt(e.substr(8,2));n<1900&&(t=!0),(a<1||a>12)&&(t=!0),i>31&&(t=!0)}catch(o){t=!0}return!t},Pt=function(e){var t=!1;return Lt(e.bookingDate)||(t=!0,te(Object(l.a)(Object(l.a)({},Q),{},{bookingDateError:!0}))),Lt(e.birthDate)||(t=!0,te(Object(l.a)(Object(l.a)({},Q),{},{dobError:!0}))),function(e){var t=!1;/^\d{2}:\d{2} AM$|^\d{2}:\d{2} PM$/.test(e)||(t=!0);try{var n=parseInt(e.substr(0,2)),a=parseInt(e.substr(3,2));(n<0||n>12)&&(t=!0),(a<0||a>59)&&(t=!0)}catch(i){t=!0}return!t}(e.bookingTime)||(t=!0,te(Object(l.a)(Object(l.a)({},Q),{},{bookingTimeError:!0}))),!t},Ft=function(e){L(!0),G.updateBooking(e).then((function(e){L(!1),O({edit:!1,person:null}),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){L(!1),O({edit:!1,person:null}),console.log(e)}))},At=function(e,t){var n;e?C({delete:e,person:t}):e||t?!e&&t&&(n=t._id,E(!0),G.deleteBooking(n).then((function(e){E(!1),C({delete:!1,person:null}),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){E(!1),C({delete:!1,person:null}),console.log(e)}))):C({delete:e,person:t})},Et=function(e,t){var n;e?S({restore:e,person:t}):e||t?!e&&t&&(n=t._id,V(!0),G.unDeleteBooking(n).then((function(e){V(!1),S({restore:!1,person:null}),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{RefreshPersonInfo:!e.RefreshPersonInfo})}))})).catch((function(e){V(!1),S({restore:!1,person:null}),console.log(e)}))):S({restore:e,person:t})};return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(W.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"stretch",children:[Object(a.jsx)("div",{className:e.title,children:" Following Records Found :"}),i.foundRecords.map((function(t,n){var i,o,c,r,s,d,l,j,h,m,O;return Object(a.jsx)(W.a,{item:!0,xs:12,md:12,children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(K.a,{className:t.deleted?e.AccordionDeleted:e.Accordion,expanded:u==="panel".concat(n),onChange:(O="panel".concat(n),function(e,t){b(!!t&&O)}),children:[Object(a.jsxs)(J.a,{className:t.deleted?e.lineThrough:"",expandIcon:Object(a.jsx)($.a,{}),"aria-controls":"panel1bh-content",id:"panel".concat(n,"bh-header"),children:[t.deleted&&Object(a.jsx)(q.a,{title:"This record has been deleted.",children:Object(a.jsx)(se.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})}),Object(a.jsxs)(p.a,{className:e.heading,children:[" ","#".concat(n+1)," "]}),Object(a.jsx)(p.a,{className:e.secondaryHeading,children:"".concat(t.forenameCapital," ").concat(t.surnameCapital)})]}),Object(a.jsx)(Y.a,{className:e.infoDetails,children:Object(a.jsxs)("ul",{className:e.ul,children:[Object(a.jsx)("li",{hidden:!(R.restore&&R.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"500",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px",color:"#fff"},children:"Are you sure you want to restore this record?"})}),Object(a.jsx)("li",{hidden:!t.deleted||R.restore&&R.person._id===t._id,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Et(!0,t)},className:e.RestoreButton,children:"Restore This Record"})}),Object(a.jsx)("li",{hidden:!(R.restore&&R.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:z,onClick:function(){Et(!1,t)},className:e.SaveButton,children:"YES, Restore this!"})}),Object(a.jsx)("li",{hidden:!(R.restore&&R.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:z,onClick:function(){Et(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:t.deleted||N.delete||x.edit&&x.person._id===t._id,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){It(!0,t)},className:e.EditButton,children:"Edit Booking Info"})}),Object(a.jsx)("li",{hidden:!(x.edit&&x.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:I,onClick:function(){It(!1,t)},className:e.SaveButton,children:"Save Changes"})}),Object(a.jsx)("li",{hidden:!(x.edit&&x.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:I,onClick:function(){It(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsx)("li",{hidden:!(N.delete&&N.person._id===t._id),children:Object(a.jsx)("div",{style:{fontWeight:"600",paddingBottom:"5px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to delete this record?"})}),Object(a.jsx)("li",{hidden:t.deleted||x.edit||N.delete&&N.person._id===t._id,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){At(!0,t)},className:e.DeleteButton,children:"Delete This Record"})}),Object(a.jsx)("li",{hidden:!(N.delete&&N.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:A,onClick:function(){At(!1,t)},className:e.SaveButton,children:"YES, Delete this!"})}),Object(a.jsx)("li",{hidden:!(N.delete&&N.person._id===t._id),children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:A,onClick:function(){At(!1,null)},className:e.CancelButton,children:"Cancel"})}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED DATE"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.bookingDate}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{error:Q.bookingDateError,className:e.TextBox,value:re,onChange:gt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"BOOKED TIME"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.bookingTime.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{error:Q.bookingTimeError,className:e.TextBox,value:pe,onChange:mt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"GENDER"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(i=t.gender)||void 0===i?void 0:i.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:ge,onChange:xt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TITLE"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(o=t.title)||void 0===o?void 0:o.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:ve,onChange:Ot,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"FORENAME"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.forenameCapital}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Be,onChange:vt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SURNAME"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.surnameCapital}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Te,onChange:kt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"EMAIL"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(c=t.email)||void 0===c?void 0:c.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Ie,onChange:Nt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"D.O.B"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.birthDate}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{error:Q.dobError,className:e.TextBox,value:Ae,onChange:Ct,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TEL"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(r=t.phone)||void 0===r?void 0:r.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:We,onChange:Bt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"POST CODE"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(s=t.postCode)||void 0===s?void 0:s.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Ge,onChange:yt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"ADDRESS"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(d=t.address)||void 0===d?void 0:d.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Xe,onChange:Rt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"NOTES"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(l=t.notes)||void 0===l?void 0:l.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:Ze,onChange:wt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"PASSPORT NO."}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(j=t.passportNumber)||void 0===j?void 0:j.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:at,onChange:Tt,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"SECOND PASSPORT NO."}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:null===(h=t.passportNumber2)||void 0===h?void 0:h.toUpperCase()}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(g.a,{className:e.TextBox,value:rt,onChange:St,inputProps:{style:{padding:0}}})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR CERTIFICATE"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.certificate?Object(a.jsx)(ie.a,{className:e.checkIcon}):Object(a.jsx)(ce.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(w.a,{className:e.formControl,control:Object(a.jsx)(T.a,{className:e.formControl,color:"secondary",name:"certificate",checked:jt,onChange:_t}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"REQUEST FOR ANTIBODY TEST"}),Object(a.jsx)("span",{hidden:x.edit&&x.person._id===t._id,className:e.infoData,children:t.antiBodyTest?Object(a.jsx)(ie.a,{className:e.checkIcon}):Object(a.jsx)(ce.a,{className:e.closeIcon})}),Object(a.jsx)("span",{hidden:!(x.edit&&x.person._id===t._id),className:e.infoData,children:Object(a.jsx)(w.a,{className:e.formControl,control:Object(a.jsx)(T.a,{className:e.formControl,color:"secondary",name:"certificate",checked:ht,onChange:Dt}),label:""})})]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"STATUS"})," ",(m=t.status,"booked"===m?Object(a.jsx)("span",{className:e.BookedLabel,children:" Booking Made "}):"patient_attended"===m?Object(a.jsx)("span",{className:e.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===m?Object(a.jsx)("span",{className:e.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===m?Object(a.jsx)("span",{className:e.ReportSentLabel,children:" Report Sent "}):"positive"===m?Object(a.jsxs)("span",{className:e.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown")]}),Object(a.jsxs)("li",{className:e.li,children:[Object(a.jsx)("span",{className:e.infoTitle,children:"TOTAL CHARGES"})," ",Object(a.jsx)("span",{className:Object(ee.calculatePrice)(t)<=199?e.infoDataCharges:e.infoDataChargesHigher,children:"\xa3".concat(Object(ee.calculatePrice)(t))})]}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,Z.downloadCovidForm1(e).then((function(t){ne.a.saveAs(new Blob([t.data],{type:"application/pdf"}),"pcr-reg-form-".concat(e,".pdf"))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Registration Form"})}),Object(a.jsx)("li",{hidden:t.deleted,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,Z.downloadCovidForm2(e).then((function(t){ne.a.saveAs(new Blob([t.data],{type:"application/pdf"}),"pcr-clinic-form-".concat(e,".pdf"))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Form"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_sent"!==t.status&&"report_cert_sent"!==t.status,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,Z.downloadPdfResult(e).then((function(t){ne.a.saveAs(new Blob([t.data],{type:"application/pdf"}),"lab-result-".concat(e,".pdf"))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Lab Results"})}),Object(a.jsx)("li",{hidden:t.deleted||"report_cert_sent"!==t.status,children:Object(a.jsx)(f.a,{type:"button",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){var e;e=t._id,Z.downloadPdfCert(e).then((function(t){ne.a.saveAs(new Blob([t.data],{type:"application/pdf"}),"certificate-".concat(e,".pdf"))})).catch((function(e){console.log(e)}))},className:e.DownloadForm,children:"Download Certificate"})})]})})]})})},"panel".concat(n))}))]})})}var je=function(e){return"boolean"===typeof e};function ue(e){var t=e.inputRef,n=Object(E.a)(e,["inputRef"]);return Object(a.jsx)(M.a,Object(l.a)(Object(l.a)({},n),{},{ref:function(e){t(e?e.inputElement:null)},mask:[/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/],showMask:!0}))}var pe=Object(b.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},marginTop:"20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},Find:{width:"80px"},Clear:{marginRight:"20px"},title:{marginTop:"20px"},TextBox:{marginTop:"30px","& > *":{textAlign:"center"}},TextField:{},NoRecordsFound:{marginTop:"20px",color:"red",fontWeight:"600",fontSize:"14px"},PersonsBox:{marginTop:"20px",marginBottom:"50px"}}}));function be(){var e=pe(),t=o.a.useContext(d),n=Object(s.a)(t,2),c=n[0],r=n[1],u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.a.useState(e),a=Object(s.a)(n,2),i=a[0],c=a[1];return[function(e){return c(!je(e)||e)},{autoFocus:i,key:"".concat(t).concat(i),onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}]}(!0),b=Object(s.a)(u,2),h=b[0],m=b[1];Object(i.useEffect)((function(){O()}),[c.findRecords]),Object(i.useEffect)((function(){G.getBookingsByRef(c.ref).then((function(e){e.data.length>0&&r((function(t){return Object(l.a)(Object(l.a)({},t),{},{foundRecords:e.data})}))}))}),[c.RefreshPersonInfo]);var x=function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{refError:!1})})),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{ref:"___-___-___"})})),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{foundRecords:[]})})),h()},O=function(){!c.ref||c.ref.indexOf("_")>=0?r((function(e){return Object(l.a)(Object(l.a)({},e),{},{refError:!0})})):(r((function(e){return Object(l.a)(Object(l.a)({},e),{},{submiting:!0})})),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{foundRecords:[]})})),G.getBookingsByRef(c.ref).then((function(e){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{submiting:!1})})),e.data.length>0?r((function(t){return Object(l.a)(Object(l.a)({},t),{},{foundRecords:e.data})})):r((function(e){return Object(l.a)(Object(l.a)({},e),{},{foundRecords:null})})),console.log(e.data)})).catch((function(e){console.log(e),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{submiting:!1})}))})))};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(j.a,{}),Object(a.jsx)("div",{className:e.title,children:Object(a.jsx)(p.a,{component:"h6",variant:"h6",align:"center",children:"Find Booking Appoinments"})}),Object(a.jsxs)(W.a,{container:!0,direction:"column",spacing:1,justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(W.a,{item:!0,xs:12,md:12,children:Object(a.jsx)(C.a,{className:e.TextBox,children:Object(a.jsx)(g.a,Object(l.a)(Object(l.a)({},m),{},{pattern:"[0-9]*",error:!!c.refError,value:c.ref,className:e.TextField,width:"50px",onChange:function(e){r((function(t){return Object(l.a)(Object(l.a)({},t),{},{ref:e.target.value})})),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{refError:!1})}))},label:"Reference No.",helperText:"Enter Your 9-digits Reference No.",name:"refNo",id:"refNo",variant:"outlined",size:"medium",margin:"normal",fullWidth:!0,InputProps:{inputComponent:ue,style:{textAlign:"center",fontSize:"24px",width:"210px",paddingLeft:"20px"}},onKeyPress:function(e){"Enter"===e.key&&O()}}))})}),Object(a.jsxs)(W.a,{item:!0,xs:12,md:12,children:[Object(a.jsx)(f.a,{disabled:c.submiting,color:"default",onClick:x,onTouchTap:x,className:e.Clear,children:"Clear"}),Object(a.jsx)(f.a,{type:"button",disabled:c.submiting,variant:"contained",color:"primary",onClick:O,onTouchTap:O,className:e.Find,children:"Find"})]}),Object(a.jsxs)(W.a,{item:!0,xs:12,md:12,children:[c.foundRecords&&c.foundRecords.length>0&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.PersonsBox,children:Object(a.jsx)(le,{})})}),!c.foundRecords&&Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(k.a,{severity:"error",children:[" ",Object(a.jsx)("strong",{children:"No Records Found !"})," ",Object(a.jsx)("br",{})," Please check you reference number again."]})})})]})]})]})}var he=n(23),fe=n(137),ge=n(141),me=n.n(ge),xe=n(176),Oe=n.n(xe),ve=n(263),ke=n.n(ve),Ne=n(555),Ce=n(25),Be=n(65);function ye(e){return Object(a.jsx)(p.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function Re(e,t){return{time:e,amount:t}}var we=[Re("00:00",0),Re("03:00",3),Re("06:00",6),Re("09:00",8),Re("12:00",15),Re("15:00",20),Re("18:00",24),Re("21:00",24),Re("24:00",void 0)];function Te(){var e=Object(Ce.a)();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(ye,{children:"Today"}),Object(a.jsx)(Be.d,{children:Object(a.jsxs)(Be.c,{data:we,margin:{top:16,right:16,bottom:0,left:24},children:[Object(a.jsx)(Be.e,{dataKey:"time",stroke:e.palette.text.secondary}),Object(a.jsx)(Be.f,{stroke:e.palette.text.secondary,children:Object(a.jsx)(Be.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Online Bookings"})}),Object(a.jsx)(Be.b,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1})]})})]})}function Se(e){e.preventDefault()}var _e=Object(b.a)({depositContext:{flex:1}});function De(){var e=_e();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(ye,{children:"Current Visits"}),Object(a.jsx)(p.a,{component:"p",variant:"h6",children:"9:00 AM - 9:15 AM"}),Object(a.jsxs)(p.a,{color:"textSecondary",className:e.depositContext,children:["on ",Q(new Date,"dd mmmm, yyyy")]}),Object(a.jsx)("div",{children:Object(a.jsx)(u.a,{color:"primary",href:"#",onClick:Se,children:"View Visitors"})})]})}var Ie=n(624),Le=n(627),Pe=n(622),Fe=n(625),Ae=n(626);function Ee(e,t,n,a,i,o){return{id:e,date:t,name:n,shipTo:a,paymentMethod:i,amount:o}}Ee(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),Ee(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),Ee(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),Ee(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),Ee(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79);Object(b.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));var Ue=Object(b.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function Me(){var e=Ue(),t=o.a.useContext(d),n=Object(s.a)(t,2),c=(n[0],n[1]),r=o.a.useState({bookings:[],isFetching:!1}),j=Object(s.a)(r,2),p=j[0],b=j[1];return Object(i.useEffect)((function(){b({bookings:p.bookings,isFetching:!0}),G.getRecentBookings().then((function(e){b({bookings:e.data,isFetching:!1})})).catch((function(e){console.log(e),b({bookings:p.bookings,isFetching:!1})}))}),[]),Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(ye,{children:"Recent Bookings"}),Object(a.jsxs)(Ie.a,{size:"small",children:[Object(a.jsx)(Fe.a,{children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Pe.a,{children:"TimeStamp"}),Object(a.jsx)(Pe.a,{children:"Name"}),Object(a.jsx)(Pe.a,{children:"Surname"}),Object(a.jsx)(Pe.a,{children:"Email"}),Object(a.jsx)(Pe.a,{children:"D.O.B"}),Object(a.jsx)(Pe.a,{children:"Booked Date"}),Object(a.jsx)(Pe.a,{children:"Booked Time"})]})}),Object(a.jsx)(Le.a,{children:p.bookings.map((function(e){return Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Pe.a,{children:Q(e.timeStamp,"mmm dS, h:MM:ss TT")}),Object(a.jsx)(Pe.a,{children:e.forename}),Object(a.jsx)(Pe.a,{children:e.surname}),Object(a.jsx)(Pe.a,{children:e.email}),Object(a.jsx)(Pe.a,{children:e.birthDate}),Object(a.jsx)(Pe.a,{children:e.bookingDate}),Object(a.jsx)(Pe.a,{children:e.bookingTime})]},e._id)}))})]}),Object(a.jsx)("div",{className:e.seeMore,children:Object(a.jsx)(u.a,{color:"primary",href:"#",onClick:function(e){e.preventDefault(),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{currentMenuIndex:ht("recentBookings")})}))},children:"See more records"})})]})}var We=Object(b.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function ze(){var e=We(),t=o.a.useContext(d),n=Object(s.a)(t,2),i=(n[0],n[1],Object(L.a)(e.paper,e.fixedHeight));return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsxs)(W.a,{container:!0,spacing:3,children:[Object(a.jsx)(W.a,{item:!0,xs:12,md:8,lg:9,children:Object(a.jsx)(Ne.a,{className:i,children:Object(a.jsx)(Te,{})})}),Object(a.jsx)(W.a,{item:!0,xs:12,md:4,lg:3,children:Object(a.jsx)(Ne.a,{className:i,children:Object(a.jsx)(De,{})})}),Object(a.jsx)(W.a,{item:!0,xs:12,children:Object(a.jsx)(Ne.a,{className:e.paper,children:Object(a.jsx)(Me,{})})})]})})}var Ve=n(628),He=n(643),Ge=Object(b.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"}}}));function Ke(){var e=Ge(),t=[{field:"id",headerName:"#",width:50},{field:"testDate",headerName:"Test Date",width:150},{field:"forename",headerName:"Forename",width:300},{field:"surname",headerName:"Surname",width:300},{field:"birthDate",headerName:"D.O.B",width:150},{field:"_id",headerName:"Action",width:150,renderCell:function(t){return"unresolved"===P?Object(a.jsx)(f.a,{disabled:t.value===S,type:"button",variant:"contained",color:"primary",onClick:function(e){return A(e,t.value)},className:e.archiveButton,children:"archive"}):Object(a.jsx)(f.a,{disabled:t.value===S,type:"button",variant:"contained",color:"primary",onClick:function(e){return E(e,t.value)},className:e.archiveButton,children:"Undo"})}}],n=o.a.useContext(d),c=Object(s.a)(n,2),r=(c[0],c[1],o.a.useState({bookings:[],cachedBookings:[],isFetching:!1})),j=Object(s.a)(r,2),u=j[0],b=j[1],h=o.a.useState(null),m=Object(s.a)(h,2),x=(m[0],m[1]),O=o.a.useState(""),v=Object(s.a)(O,2),k=v[0],N=v[1],C=o.a.useState(!1),B=Object(s.a)(C,2),y=B[0],R=B[1],w=o.a.useState(null),T=Object(s.a)(w,2),S=T[0],D=T[1],I=o.a.useState("unresolved"),L=Object(s.a)(I,2),P=L[0],F=L[1],A=function(e,t){S||(console.log(t),D(t),G.archiveRecord(t).then((function(e){D(null),R(!y)})).catch((function(e){D(null)})))},E=function(e,t){S||(console.log(t),D(t),G.unArchiveRecord(t).then((function(e){D(null),R(!y)})).catch((function(e){D(null)})))},U=Object(i.useRef)();Object(i.useEffect)((function(){var e=G.getUnmatchedRecords;"archived"===P&&(e=G.getUnmatchedRecordsArchived),b({bookings:[],cachedBookings:[],isFetching:!0});var t=e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(l.a)(Object(l.a)({},e.data[t]),{},{id:t+1});return e.data}));U.current=t,t.then((function(e){t===U.current&&b({bookings:e,cachedBookings:Object(he.a)(e),isFetching:!1})}),(function(e){t===U.current&&(console.log(e),b({bookings:u.bookings,cachedBookings:u.cachedBookings,isFetching:!1}))}))}),[y,P]),Object(i.useEffect)((function(){if(k&&k.trim().length>0){var e=u.bookings.filter((function(e){return e.forename.toLowerCase().indexOf(k.toLowerCase())>=0||e.surname.toLowerCase().indexOf(k.toLowerCase())>=0}));b({bookings:e,cachedBookings:u.cachedBookings,isFetching:!1})}else b({bookings:Object(he.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[k]);return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(W.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(W.a,{item:!0,md:3,children:Object(a.jsxs)(p.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:["Unmatched Records",Object(a.jsx)(q.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(_.a,{color:"primary",className:e.refreshButton,onClick:function(e){N(""),R(!y)},children:Object(a.jsx)(me.a,{})})})]})}),Object(a.jsx)(W.a,{item:!0,md:3,children:Object(a.jsxs)(He.a,{value:P,style:{marginBottom:"10px"},exclusive:!0,onChange:function(e,t){t&&t.length&&F(t)},"aria-label":"text alignment",children:[Object(a.jsx)(Ve.a,{value:"unresolved","aria-label":"left aligned",children:"UnResolved"}),Object(a.jsx)(Ve.a,{value:"archived","aria-label":"centered",children:"Archived"})]})}),Object(a.jsx)(W.a,{item:!0,md:3,children:Object(a.jsx)(g.a,{variant:"standard",value:k,onChange:function(e){N(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(fe.a,{rows:u.bookings,columns:t,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&x(e.rows[0])}})})]})}var Ye=n(265),Je=n.n(Ye),Xe=n(267),$e=n.n(Xe),Qe=n(268),qe=n.n(Qe),Ze=n(269),et=n.n(Ze),tt=n(273),nt=n.n(tt),at=n(264),it=n.n(at),ot=n(266),ct=n.n(ot),rt=n(270),st=n.n(rt),dt=n(272),lt=n.n(dt),jt=n(271),ut=n.n(jt),pt=[{index:0,id:"dashboard",title:"Dashboard",icon:Object(a.jsx)(ke.a,{}),content:Object(a.jsx)(ze,{})},{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(a.jsx)(it.a,{}),content:Object(a.jsx)(gt,{date:"recent"}),hidden:!1},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(a.jsx)(Je.a,{}),content:Object(a.jsx)(gt,{date:"today"})},{index:3,id:"liveBookings",title:"Live Bookings",icon:Object(a.jsx)(ct.a,{}),content:Object(a.jsx)(gt,{date:"live"})},{index:4,id:"oldBookings",title:"Old Bookings",icon:Object(a.jsx)($e.a,{}),content:Object(a.jsx)(gt,{date:"old"})},{index:5,id:"futureBookings",title:"Future Bookings",icon:Object(a.jsx)(qe.a,{}),content:Object(a.jsx)(gt,{date:"future"})},{index:6,id:"allBookings",title:"All Bookings",icon:Object(a.jsx)(et.a,{}),content:Object(a.jsx)(gt,{date:"all"})},{index:7,id:"completedBookings",title:"Completed Bookings",icon:Object(a.jsx)(st.a,{}),content:Object(a.jsx)(gt,{date:"completed"})},{index:8,id:"positiveBookings",title:"Positive Results",icon:Object(a.jsx)(ut.a,{}),content:Object(a.jsx)(gt,{date:"positive"})},{index:9,id:"deletedBookings",title:"Deleted Records",icon:Object(a.jsx)(se.a,{}),content:Object(a.jsx)(gt,{date:"deleted"})},{index:10,id:"unmatchedRecords",title:"Unmatched Records",icon:Object(a.jsx)(lt.a,{}),content:Object(a.jsx)(Ke,{})},{index:11,id:"findByRef",title:"Find By Ref No",icon:Object(a.jsx)(nt.a,{}),content:Object(a.jsx)(be,{})}],bt=function(e){for(var t=0;t<pt.length;t++)if(pt[t].index===e)return pt[t].content;return"Page Not Found!"},ht=function(e){for(var t=0;t<pt.length;t++)if(pt[t].id===e)return pt[t].index;return-1},ft=Object(b.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},PositiveLabel:{backgroundColor:"red",color:"#fff",paddingRight:"90px",paddingLeft:"10px",fontWeight:"800"}}}));function gt(e){var t=ft(),n=[{field:"id",headerName:"#",width:50},{field:"bookingDate",headerName:"Booked Date",width:120},{field:"bookingTimeNormalized",headerName:"Booked Time",width:120,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"status",headerName:"Status",width:200,renderCell:function(e){return"booked"===e.value?Object(a.jsx)("span",{className:t.BookedLabel,children:" Booking Made "}):"patient_attended"===e.value?Object(a.jsx)("span",{className:t.PatientAttendedLabel,children:" Patient Attended "}):"sample_taken"===e.value?Object(a.jsx)("span",{className:t.SampleTakenLabel,children:" Sample Taken "}):"report_sent"===e.value?Object(a.jsx)("span",{className:t.ReportSentLabel,children:" Report Sent "}):"report_cert_sent"===e.value?Object(a.jsxs)("span",{className:t.ReportCertSentLabel,children:[" ","Rpt & Cert Sent"," "]}):"positive"===e.value?Object(a.jsxs)("span",{className:t.PositiveLabel,children:[" ","POSITIVE"," "]}):"Unknown"}},{field:"bookingRef",headerName:"Ref No.",width:120,renderCell:function(e){return Object(a.jsx)(q.a,{title:"Go Find By Ref",placement:"right",children:Object(a.jsx)(u.a,{className:t.RefLink,onClick:function(){j((function(e){return Object(l.a)(Object(l.a)({},e),{},{currentMenuIndex:ht("findByRef")})})),j((function(t){return Object(l.a)(Object(l.a)({},t),{},{ref:e.value})})),j((function(e){return Object(l.a)(Object(l.a)({},e),{},{refError:!1})})),j((function(e){return Object(l.a)(Object(l.a)({},e),{},{foundRecords:[]})})),j((function(e){return Object(l.a)(Object(l.a)({},e),{},{findRecords:!e.findRecords})}))},children:e.value})})}},{field:"forenameCapital",headerName:"Forename",width:150},{field:"surnameCapital",headerName:"Surname",width:150},{field:"birthDate",headerName:"D.O.B",width:120},{field:"email",headerName:"email",width:300,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"phone",headerName:"Tel",width:150},{field:"passportNumber",headerName:"Passport No.",width:250,valueGetter:function(e){var t,n,a,i=e.getValue("passportNumber2");return i&&i.length>0&&i.trim().length>0?"".concat(null===(t=e.getValue("passportNumber"))||void 0===t?void 0:t.toUpperCase()," - ").concat(null===(n=e.getValue("passportNumber2"))||void 0===n?void 0:n.toUpperCase()):null===(a=e.getValue("passportNumber"))||void 0===a?void 0:a.toUpperCase()}},{field:"certificate",headerName:"Certificate",width:120,renderCell:function(e){return e.value?Object(a.jsx)(ie.a,{className:t.checkIcon}):Object(a.jsx)(ce.a,{className:t.closeIcon})}},{field:"antiBodyTest",headerName:"Antibody Test",width:120,renderCell:function(e){return e.value?Object(a.jsx)(ie.a,{className:t.checkIcon}):Object(a.jsx)(ce.a,{className:t.closeIcon})}},{field:"postCode",headerName:"Post Code",width:150,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"address",headerName:"Address",width:500,valueFormatter:function(e){return e.value.toUpperCase()}},{field:"notes",headerName:"Notes",width:500}],c=o.a.useContext(d),r=Object(s.a)(c,2),j=(r[0],r[1]),b=o.a.useState({bookings:[],cachedBookings:[],isFetching:!1}),h=Object(s.a)(b,2),f=h[0],m=h[1],x=o.a.useState(null),O=Object(s.a)(x,2),v=(O[0],O[1]),k=o.a.useState(""),N=Object(s.a)(k,2),C=N[0],B=N[1],y=o.a.useState(!1),R=Object(s.a)(y,2),w=R[0],T=R[1],S=Object(i.useRef)();Object(i.useEffect)((function(){var t=G.getAllBookings;"today"===e.date?t=G.getTodayBookings:"old"===e.date?t=G.getOldBookings:"future"===e.date?t=G.getFutureBookings:"recent"===e.date?t=G.getRecentBookingsAll:"live"===e.date?t=G.getLiveBookings:"completed"===e.date?t=G.getCompletedBookings:"positive"===e.date?t=G.getPositiveBookings:"deleted"===e.date&&(t=G.getDeletedBookings),m({bookings:[],cachedBookings:[],isFetching:!0});var n=t().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(l.a)(Object(l.a)({},e.data[t]),{},{id:t+1});return e.data}));S.current=n,n.then((function(e){n===S.current&&m({bookings:e,cachedBookings:Object(he.a)(e),isFetching:!1})}),(function(e){n===S.current&&(console.log(e),m({bookings:f.bookings,cachedBookings:f.cachedBookings,isFetching:!1}))}))}),[e.date,w]),Object(i.useEffect)((function(){if(C&&C.trim().length>0){var e=f.bookings.filter((function(e){return e.forename.toLowerCase().indexOf(C.toLowerCase())>=0||e.surname.toLowerCase().indexOf(C.toLowerCase())>=0||e.email.toLowerCase().indexOf(C.toLowerCase())>=0}));m({bookings:e,cachedBookings:f.cachedBookings,isFetching:!1})}else m({bookings:Object(he.a)(f.cachedBookings),cachedBookings:f.cachedBookings,isFetching:!1})}),[C]);var D;return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(W.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(a.jsx)(W.a,{item:!0,md:3,children:Object(a.jsxs)(p.a,{variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:[(D=e.date,"today"===D?"Today's Bookings":"old"===D?"Old Bookings":"future"===D?"Future Bookings":"recent"===D?"Recent Bookings":"live"===D?"Live Bookings":"completed"===D?"Completed Bookings":"positive"===D?"Positive Results":"deleted"===D?"Deleted Records":"All Bookings"),Object(a.jsx)(q.a,{title:"Refresh",placement:"right",children:Object(a.jsx)(_.a,{color:"primary",className:t.refreshButton,onClick:function(e){B(""),T(!w)},children:Object(a.jsx)(me.a,{})})})]})}),Object(a.jsx)(W.a,{item:!0,md:3,children:f.isFetching&&Object(a.jsx)(Oe.a,{type:"ThreeDots",color:"#3f51b5",height:50,width:50,timeout:0})}),Object(a.jsx)(W.a,{item:!0,md:3,children:Object(a.jsx)(g.a,{variant:"standard",value:C,onChange:function(e){B(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(a.jsx)("div",{style:{height:700,width:"100%"},children:Object(a.jsx)(fe.a,{rows:f.bookings,columns:n,autoPageSize:!0,onSelectionChange:function(e){e.length>0&&v(e.rows[0])}})})]})}Object(b.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));n(551);var mt=n(73),xt=n(637),Ot=n(631),vt=n(274),kt=n.n(vt),Nt=n(275),Ct=n.n(Nt),Bt=n(203),yt=n(629),Rt=n(614),wt=n(623),Tt=n(630),St=Object(b.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function _t(){St();var e=o.a.useContext(d),t=Object(s.a)(e,2),n=t[0],c=t[1],r=o.a.useState(0),j=Object(s.a)(r,2),u=j[0],p=j[1];Object(i.useEffect)((function(){p(n.currentMenuIndex)}),[n.currentMenuIndex]);return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(Rt.a,{children:pt.map((function(e){return!e.hidden&&Object(a.jsxs)(wt.a,{button:!0,selected:u===e.index,onClick:function(t){return n=e.index,p(n),void c((function(e){return Object(l.a)(Object(l.a)({},e),{},{currentMenuIndex:n})}));var n},children:[Object(a.jsx)(yt.a,{children:e.icon}),Object(a.jsx)(Tt.a,{primary:"".concat(e.title)})]})}))})})}function Dt(){return Object(a.jsxs)(p.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(u.a,{color:"inherit",href:"#",children:"Medical Express Clinic"})," ",(new Date).getFullYear(),"."]})}var It=Object(b.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(mt.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Lt(){var e=It(),t=o.a.useContext(d),n=Object(s.a)(t,2),c=n[0],r=n[1],u=o.a.useState(!0),b=Object(s.a)(u,2),h=b[0],f=b[1],g=o.a.useState(0),x=Object(s.a)(g,2),O=x[0],k=x[1];Object(i.useEffect)((function(){k(c.currentMenuIndex)}),[c.currentMenuIndex]);Object(L.a)(e.paper,e.fixedHeight);return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(N.a,{position:"absolute",className:Object(L.a)(e.appBar,h&&e.appBarShift),children:Object(a.jsxs)(S.a,{className:e.toolbar,children:[Object(a.jsx)(_.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!0)},className:Object(L.a)(e.menuButton,h&&e.menuButtonHidden),children:Object(a.jsx)(kt.a,{})}),Object(a.jsx)(p.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"PCR Booking Admin Console"}),c.signedIn&&Object(a.jsx)(_.a,{onClick:function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{signedIn:!1})}))},color:"inherit",children:Object(a.jsx)(q.a,{title:"Logout",children:Object(a.jsx)(Bt.a,{})})})]})}),Object(a.jsxs)(xt.a,{variant:"permanent",classes:{paper:Object(L.a)(e.drawerPaper,!h&&e.drawerPaperClose)},open:h,children:[Object(a.jsx)("div",{className:e.toolbarIcon,children:Object(a.jsx)(_.a,{onClick:function(){f(!1)},children:Object(a.jsx)(Ct.a,{})})}),Object(a.jsx)(Ot.a,{}),Object(a.jsx)(_t,{})]}),Object(a.jsxs)("main",{className:e.content,children:[Object(a.jsx)("div",{className:e.appBarSpacer}),Object(a.jsxs)(v.a,{maxWidth:"lg",className:e.container,children:[bt(O),Object(a.jsx)(m.a,{pt:4,children:Object(a.jsx)(Dt,{})})]})]})]})}var Pt=Object(b.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function Ft(){Pt();var e=o.a.useContext(d),t=Object(s.a)(e,2),n=t[0];t[1];return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(j.a,{}),!n.signedIn&&Object(a.jsx)(A,{}),n.signedIn&&Object(a.jsx)(Lt,{})]})}var At=function(){var e=o.a.useState({foundRecords:[],currentMenuIndex:0}),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.jsx)(d.Provider,{value:[n,i],children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(Ft,{})})})};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(At,{})}),document.getElementById("root"))}},[[553,1,2]]]);
//# sourceMappingURL=main.398a6f15.chunk.js.map