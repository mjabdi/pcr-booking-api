(this["webpackJsonpmedex-booking-admin"]=this["webpackJsonpmedex-booking-admin"]||[]).push([[0],{124:function(e,t){var a=function(e){var t=199;return e.tr&&(t=250),e.certificate&&(t+=50),e.antiBodyTest&&(t+=149),t};e.exports={calculatePrice:a,calculateTotalPrice:function(e){for(var t=0,n=0;n<e.length;n++)t+=a(e[n]);return t}}},309:function(e,t,a){},517:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(0),i=a.n(o),r=a(24),c=a.n(r),l=a(4),d=a(593),s=a(589),p=a(125),u=a(27),b=a(329),j=a(601),g=a(314),f="rgb(36, 40, 44)",x="rgba(0, 0, 0, 0.13)",h=Object(b.a)({palette:{primary:{main:"#03b5f2",light:"#86d5f0",contrastText:"#fff"},secondary:{main:"#005eab",contrastText:"#fff"},common:{black:"#212121",darkBlack:f},warning:{light:"rgba(253, 200, 69, .3)",main:"rgba(253, 200, 69, .5)",dark:"rgba(253, 200, 69, .7)"},tonalOffset:.2,background:{default:"#f9f9f9"},spacing:8},breakpoints:{values:{xl:1920,lg:1280,md:960,sm:600,xs:0}},border:{borderColor:x,borderWidth:2},overrides:{MuiExpansionPanel:{root:{position:"static"}},MuiTableCell:{root:Object(u.a)({paddingLeft:16,paddingRight:16,borderBottom:"".concat(2,"px solid ").concat(x)},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})},MuiDivider:{root:{backgroundColor:x,height:2}},MuiPrivateNotchedOutline:{root:{borderWidth:2}},MuiListItem:{divider:{borderBottom:"".concat(2,"px solid ").concat(x)}},MuiDialog:{paper:{width:"100%",maxWidth:430,marginLeft:8,marginRight:8}},MuiTooltip:{tooltip:{backgroundColor:f,fontSize:"0.7rem"}},MuiExpansionPanelDetails:{root:Object(u.a)({},"@media (max-width:  ".concat(600,"px)"),{paddingLeft:8,paddingRight:8})}}},g.enGB),m=Object(j.a)(h),O=a(8);var v=Object(O.a)((function(e){var t,a,n,o,i;return{"@global":{"*:focus":{outline:0},".text-white":{color:e.palette.common.white},".listItemLeftPadding":(t={paddingTop:"".concat(e.spacing(1.75),"px !important"),paddingBottom:"".concat(e.spacing(1.75),"px !important"),paddingLeft:"".concat(e.spacing(4),"px !important")},Object(u.a)(t,e.breakpoints.down("sm"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),Object(u.a)(t,"@media (max-width:  420px)",{paddingLeft:"".concat(e.spacing(1),"px !important")}),t),".container":(a={width:"100%",paddingRight:e.spacing(4),paddingLeft:e.spacing(4),marginRight:"auto",marginLeft:"auto"},Object(u.a)(a,e.breakpoints.up("sm"),{maxWidth:540}),Object(u.a)(a,e.breakpoints.up("md"),{maxWidth:720}),Object(u.a)(a,e.breakpoints.up("lg"),{maxWidth:1170}),a),".row":{display:"flex",flexWrap:"wrap",marginRight:-e.spacing(2),marginLeft:-e.spacing(2)},".container-fluid":{width:"100%",paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginRight:"auto",marginLeft:"auto",maxWidth:1370},".lg-mg-top":(n={marginTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(n,e.breakpoints.down("md"),{marginTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(n,e.breakpoints.down("sm"),{marginTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(n,e.breakpoints.down("xs"),{marginTop:"".concat(e.spacing(14),"px !important")}),n),".lg-mg-bottom":(o={marginBottom:"".concat(e.spacing(20),"px !important")},Object(u.a)(o,e.breakpoints.down("md"),{marginBottom:"".concat(e.spacing(18),"px !important")}),Object(u.a)(o,e.breakpoints.down("sm"),{marginBottom:"".concat(e.spacing(16),"px !important")}),Object(u.a)(o,e.breakpoints.down("xs"),{marginBottom:"".concat(e.spacing(14),"px !important")}),o),".lg-p-top":(i={paddingTop:"".concat(e.spacing(20),"px !important")},Object(u.a)(i,e.breakpoints.down("md"),{paddingTop:"".concat(e.spacing(18),"px !important")}),Object(u.a)(i,e.breakpoints.down("sm"),{paddingTop:"".concat(e.spacing(16),"px !important")}),Object(u.a)(i,e.breakpoints.down("xs"),{paddingTop:"".concat(e.spacing(14),"px !important")}),i)}}}),{withTheme:!0})((function(){return null})),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var y=i.a.createContext([{},function(){}]),w=a(10),S=a.n(w),B=a(18),T=a(3),D=a(157),L=a(605),P=a(137),I=a(341),N=a(595),R=a(325),W=a.n(R),A=a(155),M=a(588),F=a(597),z=a.p+"static/media/optimal-vision-logo.ba03ccd6.png",E=a(136),V=a(156),_=a(232),G=a(603),H=a(581),q=a(521),Y=a(339),U=a(338),K=a(578),X=a(523),J=a(120),$=a(590),Q=a(591),Z=a(5);a(571);var ee=a(38),te=a(40),ae=a(130),ne=a.n(ae),oe="Basic QXp1cmXEaWFtb45kOmh1bnRlcjO=",ie="https://www.travelpcrtest.com/";function re(e){return"/optimalvision/admin"+e}var ce=ne.a.create({baseURL:ie,headers:{Authorization:oe}}),le=function e(){Object(te.a)(this,e)};le.setToken=function(e){le.token=e},le.signIn=function(e){return ce.post("/api/optimalvision/user/signin",e)},le.checkToken=function(e){return ce.post("/api/optimalvision/user/checktoken",e)};var de=a(135),se=a.n(de),pe=a(51),ue=a.n(pe),be=a(47),je=a.n(be),ge=a(52),fe=a.n(ge),xe=a(75),he=a.n(xe),me=a(44),Oe=a.n(me),ve=a(53),ke=a.n(ve),Ce=a(87),ye=a.n(Ce),we=a(88),Se=a.n(we),Be=a(324),Te=a.n(Be),De=a(89),Le=a.n(De),Pe=a(36),Ie=a.n(Pe),Ne=a(90),Re=a.n(Ne),We=a(59),Ae=a.n(We),Me=a(323),Fe=a.n(Me),ze=a(128),Ee=a.n(ze),Ve=a(132),_e=a.n(Ve),Ge=a(190),He=a.n(Ge),qe=a(147),Ye=a.n(qe),Ue=a(14),Ke=a(107),Xe=ne.a.create({baseURL:ie,headers:{Authorization:oe,"Content-Type":"application/json"}}),Je=(a(160),function e(){Object(te.a)(this,e)});Je.addNewBooking=function(e){return Xe.post("/api/optimalvision/book/bookappointment",e)},Je.sendRegFormEmail=function(e){return Xe.post("/api/optimalvision/book/sendregformemail?id=".concat(e))},Je.payBooking=function(e,t,a,n){return Xe.post("/api/optimalvision/book/paybooking?id=".concat(e,"&paymentmethod=").concat(a,"&corporate=").concat(n,"&price=").concat(t))},Je.unPayBooking=function(e){return Xe.post("/api/optimalvision/book/unpaybooking?id=".concat(e))},Je.getShouldRefundsCount=function(){return Xe.get("/api/optimalvision/book/getshouldrefundscount?")},Je.refundBooking=function(e){return Xe.post("/api/optimalvision/payment/refundpayment",{bookingId:e})},Je.getBookingsStatsByDateStr=function(e){return Xe.get("/api/optimalvision/book/getbookingsstatsbydatestr?date=".concat(e))},Je.getBookingsCountByDateStr=function(e){return Xe.get("/api/optimalvision/book/getbookingscountbydatestr?date=".concat(e))},Je.getAllBookingsCountAll=function(){return Xe.get("/api/optimalvision/book/getallbookingscountall")},Je.getBookingsCountByDateStrandTime=function(e,t,a){return Xe.get("/api/optimalvision/book/getbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:a.token})},Je.getBookingsByDateStrandTime=function(e,t){return Xe.get("/api/optimalvision/book/getbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Je.getAllBookingsCountByDateStr=function(e){return Xe.get("/api/optimalvision/book/getallbookingscountbydatestr?date=".concat(e))},Je.getAllBookingsCountByDateStrandTime=function(e,t,a){return Xe.get("/api/optimalvision/book/getallbookingscountbydatestrandtime?date=".concat(e,"&time=").concat(t),{cancelToken:a.token})},Je.getAllBookingsByDateStrandTime=function(e,t){return Xe.get("/api/optimalvision/book/getallbookingsbydatestrandtime?date=".concat(e,"&time=").concat(t))},Je.changeBackToBookingMade=function(e){return Xe.post("/api/optimalvision/book/changebacktobookingmade?id=".concat(e))},Je.changeToPatientAttended=function(e){return Xe.post("/api/optimalvision/book/changetopatientattended?id=".concat(e))},Je.updateBooking=function(e){return Xe.post("/api/optimalvision/book/updatebookappointment",e)},Je.updateBookingTime=function(e){return Xe.post("/api/optimalvision/book/updatebookappointmenttime",e)},Je.deleteBooking=function(e){return Xe.post("/api/optimalvision/book/deletebookappointment?id=".concat(e))},Je.unDeleteBooking=function(e){return Xe.post("/api/optimalvision/book/undeletebookappointment?id=".concat(e))},Je.moveToTraceFolderBooking=function(e){return Xe.post("/api/optimalvision/book/movetotracebookappointment?id=".concat(e))},Je.undoMoveToTraceFolderBooking=function(e){return Xe.post("/api/optimalvision/book/undomovetotracebookappointment?id=".concat(e))},Je.getBookingsByRef=function(e){return Xe.get("/api/optimalvision/book/getbookingsbyref?ref=".concat(e))},Je.getBookingById=function(e){return Xe.get("/api/optimalvision/book/getbookingbyid?id=".concat(e))},Je.getAllBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/getallbookings?limit=".concat(e))},Je.getTraceFolderBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/gettracefolderdbookings?limit=".concat(e))},Je.getDeletedBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/getdeletedbookings?limit=".concat(e))},Je.getTraceFolderBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/gettracefolderbookings?limit=".concat(e))},Je.getTodayBookings=function(){return Xe.get("/api/optimalvision/book/gettodaybookings")},Je.getOldBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/getoldbookings?limit=".concat(e))},Je.getFutureBookings=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/getfuturebookings?limit=".concat(e))},Je.getRecentBookings=function(){return Xe.get("/api/optimalvision/book/getrecentbookings")},Je.getRecentBookingsAll=function(e){return e||(e=25),Xe.get("/api/optimalvision/book/getrecentbookingsall?limit=".concat(e))};var $e=a(575),Qe=a(228),Ze=a(230),et=a(121),tt=a(576),at=a(577),nt=a(579),ot=a(580),it=a(522),rt=a(109),ct=a.n(rt),lt=a(74),dt=a(583),st=function e(){Object(te.a)(this,e)};st.downloadGPRegForm=function(e){return Xe.get("/api/pdf/downloadgpregform?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})};var pt=a(124),ut=a.n(pt),bt=a(28),jt=a.n(bt),gt=a(525),ft=a(41),xt=(a(71),a(599),a(602),["Visa Medical"]);a(45),Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);var ht=function e(){Object(te.a)(this,e)};ht.createInvoice=function(e){return ce.post("/api/medex/invoice/createinvoice",e)},ht.updateInvoice=function(e,t){return ce.post("/api/medex/invoice/updateinvoice?invoiceNumber=".concat(e),t)},ht.deleteinvoice=function(e){return ce.post("/api/medex/invoice/deleteinvoice?invoiceNumber=".concat(e))},ht.getInvoiceByBookingId=function(e){return ce.get("/api/medex/invoice/getinvoicebybookingid?bookingId=".concat(e))},ht.getInvoiceByInvoiceNumber=function(e){return ce.get("/api/medex/invoice/getinvoicebyinvoicenumber?invoiceNumber=".concat(e))},ht.getCodeDetails=function(e){return ce.post("/api/medex/invoice/getcodedetails",{code:e})},ht.getAllCodes=function(){return ce.get("/api/medex/invoice/getallcodes")},ht.downloadInvoice=function(e){return ce.get("/api/pdf/downloadinvoice?id=".concat(e),{responseType:"arraybuffer",id:e,headers:{Accept:"application/pdf"}})},ht.emailInvoice=function(e,t){return ce.post("/api/pdf/emailinvoice?id=".concat(e,"&email=").concat(t))};var mt=a(598);a(317),Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);var Ot=Object(D.a)((function(e){return{box:{backgroundColor:"#373737",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxRed:{backgroundColor:"#dc2626",color:"#fff",padding:"1px",borderRadius:"4px",textAlign:"justify",paddingRight:"40px"},boxInfo:{textAlign:"justify",backgroundColor:"#fafafa",color:"#333",padding:"1px",borderRadius:"4px",paddingRight:"40px",border:"1px solid #eee"},ul:{listStyle:"none",padding:"0",margin:"0"},li:{marginBottom:"15px"},icon:{marginRight:"8px"},root:{width:"100%"},lineThrough:{textDecoration:"line-through"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15)},infoDetails:{textAlign:"left"},infoTitle:{fontWeight:"800",marginRight:"10px",color:e.palette.secondary.main,fontSize:"0.9rem"},infoData:{fontWeight:"500",fontSize:"1rem"},title:{textAlign:"center",fontWeight:"600",marginLeft:"10px",marginBottom:"5px"},Accordion:{backgroundColor:"#f5f5f5",color:"#222"},AccordionDeleted:{backgroundColor:"#aaa",color:"#555"},DownloadForm:{marginTop:"10px",marginBottom:"10px"},infoDataCharges:{fontSize:"18px",color:"green",fontWeight:"600"},infoDataChargesHigher:{fontSize:"18px",color:"red",fontWeight:"600"},BookedLabel:{color:"#606060",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#606060",width:"150px",display:"inline-block"},PatientAttendedLabel:{color:"#0066aa",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066aa",width:"150px",display:"inline-block"},SampleTakenLabel:{color:"#0066cc",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#0066cc"},ReportSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},ReportCertSentLabel:{color:"#009900",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"#009900"},PositiveLabel:{color:"red",paddingRight:"10px",paddingLeft:"5px",paddingBottom:"3px",paddingTop:"3px",fontWeight:"800",borderLeft:"5px solid",borderColor:"red"},EditButton:{marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px"},ResendEmailsButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",paddingLeft:"50px",paddingRight:"50px"},PayButton:{marginLeft:"70px",width:"300px"},printInvoiceButton:{marginLeft:"70px",fontSize:"0.8rem"},editInvoiceButton:{marginLeft:"10px",fontSize:"0.8rem"},PayLabel:{marginLeft:"20px",color:"#2f942e",fontWeight:"500",textAlign:"center"},RestoreButton:{marginBottom:"20px",backgroundColor:"#eee",color:"#333","&:hover":{background:"#f1f1f1",color:"#111"},textDecoration:"none !important",padding:"10px"},UndoTraceButton:{marginBottom:"20px",backgroundColor:"#266900",color:"#fff","&:hover":{background:"#319400",color:"#fff"},textDecoration:"none !important",padding:"10px"},DeleteButton:{marginBottom:"20px",backgroundColor:"#b80012",color:"#fff","&:hover":{background:"#d90015",color:"#fff"},padding:"10px"},MoveToTraceButton:{marginBottom:"20px",backgroundColor:"#de3800",color:"#fff","&:hover":{background:"#f73e00",color:"#fff"},padding:"10px"},SaveButton:{marginBottom:"10px",padding:"10px",color:"#fff",backgroundColor:"#bd0d50","&:hover":{background:"#d1175e",color:"#fff"}},CancelButton:{marginBottom:"20px"},TextBox:{padding:"0px"},checkIcon:{color:"green"},checkIconSmall:{color:"green",paddingTop:"5px"},closeIcon:{color:"red"},centeredLabel:{display:"flex",alignItems:"center"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},invoiceNumber:{display:"inline-block",fontWeight:"500",width:"72px",fontSize:"1rem",color:e.palette.primary.main},dialogTitle:{backgroundColor:e.palette.secondary.main,color:"#fff"},question:{fontSize:"1.3rem",fontWeight:"400",color:e.palette.secondary.main,marginTop:"30px"},answer:{fontSize:"1.3rem",fontWeight:"500",color:e.palette.primary.main}}})),vt=i.a.forwardRef((function(e,t){return Object(n.jsx)(gt.a,Object(T.a)({direction:"up",ref:t},e))}));function kt(e){return Object(n.jsx)(jt.a,{handle:"#alert-dialog-slide-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function Ct(e){var t,a=Ot(),r=i.a.useContext(y),c=Object(l.a)(r,2),d=c[0],s=c[1],p=Object(o.useState)(!1),u=Object(l.a)(p,2),b=(u[0],u[1],i.a.useState(!1)),j=Object(l.a)(b,2),g=(j[0],j[1]),f=i.a.useState(!1),x=Object(l.a)(f,2),h=(x[0],x[1]),m=i.a.useState(!1),O=Object(l.a)(m,2),v=(O[0],O[1],i.a.useState(!1)),k=Object(l.a)(v,2),C=(k[0],k[1],i.a.useState(!1)),w=Object(l.a)(C,2),S=(w[0],w[1],i.a.useState(!1)),B=Object(l.a)(S,2),D=(B[0],B[1],i.a.useState(null)),L=Object(l.a)(D,2),N=(L[0],L[1],i.a.useState({edit:!1,person:null})),R=Object(l.a)(N,2),W=R[0],A=R[1],M=i.a.useState({delete:!1,person:null}),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState({restore:!1,person:null}),_=Object(l.a)(V,2),G=_[0],H=_[1],q=i.a.useState({trace:!1,person:null}),Y=Object(l.a)(q,2),J=Y[0],$=Y[1],Q=i.a.useState({untrace:!1,person:null}),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=i.a.useState(!1),ne=Object(l.a)(ae,2),oe=ne[0],ie=(ne[1],i.a.useState(!1)),re=Object(l.a)(ie,2),ce=re[0],le=re[1],de=i.a.useState(!1),se=Object(l.a)(de,2),pe=se[0],ue=se[1],be=i.a.useState({}),je=Object(l.a)(be,2),ge=je[0],fe=je[1],xe=i.a.useState(""),he=Object(l.a)(xe,2),me=he[0],Oe=he[1],ve=i.a.useState(""),ke=Object(l.a)(ve,2),Ce=ke[0],ye=ke[1],we=i.a.useState(""),Se=Object(l.a)(we,2),Be=Se[0],Te=Se[1],De=i.a.useState(""),Le=Object(l.a)(De,2),Pe=Le[0],Ne=Le[1],Re=i.a.useState(""),We=Object(l.a)(Re,2),Ae=We[0],Me=We[1],Fe=i.a.useState(""),ze=Object(l.a)(Fe,2),Ee=(ze[0],ze[1],i.a.useState("")),Ve=Object(l.a)(Ee,2),Ge=(Ve[0],Ve[1],i.a.useState(!1)),He=Object(l.a)(Ge,2),qe=He[0],Ye=He[1],Ue=i.a.useState(null),Ke=Object(l.a)(Ue,2),Xe=Ke[0],$e=Ke[1],Ze=i.a.useState(!1),et=Object(l.a)(Ze,2),it=(et[0],et[1]),rt=i.a.useState(!1),ct=Object(l.a)(rt,2),st=ct[0],pt=ct[1],ut=i.a.useState(!1),bt=Object(l.a)(ut,2),jt=(bt[0],bt[1],i.a.useState(!1)),gt=Object(l.a)(jt,2),ft=(gt[0],gt[1],i.a.useState(null)),xt=Object(l.a)(ft,2),ht=(xt[0],xt[1]),mt=i.a.useState(!1),Ct=Object(l.a)(mt,2);Ct[0],Ct[1];Object(o.useEffect)((function(){e.open||setTimeout((function(){A({edit:!1,person:null}),it(!1)}),500)}),[e.open]);var yt=function(e){Te(e.target.value),pt(!st)},wt=function(e,t){var a;e?E({delete:e,person:t}):e||t?!e&&t&&(a=t._id,le(!0),Je.deleteBooking(a).then((function(e){le(!1),E({delete:!1,person:null}),Ye(!qe)})).catch((function(e){le(!1),E({delete:!1,person:null}),console.log(e)}))):E({delete:e,person:t})},St=function(e,t){var a;e?H({restore:e,person:t}):e||t?!e&&t&&(a=t._id,ue(!0),Je.unDeleteBooking(a).then((function(e){ue(!1),H({restore:!1,person:null}),Ye(!qe)})).catch((function(e){ue(!1),H({restore:!1,person:null}),console.log(e)}))):H({restore:e,person:t})},Bt=function(e,t){var a;e?$({trace:e,person:t}):e||t?!e&&t&&(a=t._id,le(!0),Je.moveToTraceFolderBooking(a).then((function(e){le(!1),$({trace:!1,person:null}),Ye(!qe)})).catch((function(e){le(!1),$({trace:!1,person:null}),console.log(e)}))):$({trace:e,person:t})},Tt=function(e,t){var a;e?te({untrace:e,person:t}):e||t?!e&&t&&(a=t._id,ue(!0),Je.undoMoveToTraceFolderBooking(a).then((function(e){ue(!1),te({untrace:!1,person:null}),Ye(!qe)})).catch((function(e){ue(!1),te({untrace:!1,person:null}),console.log(e)}))):te({untrace:e,person:t})};Object(o.useEffect)((function(){e.booking&&(Je.getBookingById(e.booking._id).then((function(e){$e(e.data)})).catch((function(e){console.log(e)})),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})))}),[qe,d.bookingPayChanged]),Object(o.useEffect)((function(){e.booking&&$e(e.booking)}),[e.booking]);var Dt=i.a.useState(!1),Lt=Object(l.a)(Dt,2),Pt=Lt[0],It=Lt[1],Nt=function(e){var t=e.replace("*","");return t.trim().endsWith("?")||(t+="?"),t};return Object(n.jsx)(i.a.Fragment,{children:Xe&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsxs)(tt.a,{maxWidth:"xs",open:e.open,TransitionComponent:vt,keepMounted:!0,onClose:function(){g(!1),h(!1),ht(null),e.onClose()},PaperComponent:kt,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(n.jsxs)(at.a,{id:"alert-dialog-slide-title",className:a.dialogTitle,style:!Xe.deleted&&Xe.traceFolder?{backgroundColor:"#de3800",position:"relative"}:{position:"relative"},children:[Xe.questions&&Object(n.jsx)("div",{style:{position:"absolute",right:"10px",top:"12px",backgroundColor:"#069c00",fontSize:"0.85rem",padding:"8px",borderRadius:"10px"},children:"Self-Test"}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:Xe.deleted?{paddingBottom:"5px",textDecoration:"line-through"}:Xe.traceFolder?{paddingBottom:"5px"}:{},children:"".concat(Xe.fullname)})}),Xe.deleted&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"This record has been deleted.",children:Object(n.jsx)(Ie.a,{style:{padding:0,margin:0,color:"#fff",fontSize:25}})})}),!Xe.deleted&&Xe.traceFolder&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"This record is in the TRACE folder.",children:Object(n.jsx)(_e.a,{style:{padding:0,margin:0,color:"#fff",fontSize:"2rem"}})})})]})]}),Object(n.jsxs)(ot.a,{children:[Object(n.jsx)("div",{style:{paddingTop:"0px"},children:Object(n.jsx)(K.a,{item:!0,xs:12,md:12,children:Object(n.jsx)("div",{className:a.infoDetails,children:Object(n.jsxs)("ul",{className:a.ul,children:[Object(n.jsx)("li",{className:a.li,style:{marginTop:"20px"},children:Object(n.jsxs)(K.a,{container:!0,spacing:2,children:[Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsx)("span",{className:a.infoTitle,children:"BOOKED DATE :"}),Object(n.jsx)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:Object(lt.FormatDateFromString)(Xe.bookingDate)}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,error:ge.bookingDateError,className:a.TextBox,value:me,onChange:function(e){Oe(e.target.value),fe(Object(T.a)(Object(T.a)({},ge),{},{bookingDateError:!1})),pt(!st)},inputProps:{style:{padding:0}}})})]}),Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsx)("span",{className:a.infoTitle,children:"BOOKED TIME :"}),Object(n.jsx)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:Xe.bookingTime}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,error:ge.bookingTimeError,className:a.TextBox,value:Ce,onChange:function(e){ye(e.target.value),fe(Object(T.a)(Object(T.a)({},ge),{},{bookingTimeError:!1})),pt(!st)},inputProps:{style:{padding:0}}})})]})]})}),Object(n.jsx)(nt.a,{}),Object(n.jsx)("li",{className:a.li,style:{marginTop:"20px"},children:Object(n.jsxs)(K.a,{container:!0,spacing:2,children:[Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsxs)("span",{className:a.infoTitle,children:["FULLNAME :"," "]}),Object(n.jsx)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:Xe.fullname}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,className:a.TextBox,value:Be,onChange:yt,inputProps:{style:{padding:0}}})})]}),Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsx)("span",{className:a.infoTitle,children:"EMAIL : "}),Object(n.jsx)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:Xe.email}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,className:a.TextBox,value:Pe,onChange:function(e){Ne(e.target.value),pt(!st)},inputProps:{style:{padding:0}}})})]}),Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsx)("span",{className:a.infoTitle,children:"TEL : "}),Object(n.jsx)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:null===(t=Xe.phone)||void 0===t?void 0:t.toUpperCase()}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,className:a.TextBox,value:Ae,onChange:function(e){Me(e.target.value),pt(!st)},inputProps:{style:{padding:0}}})})]})]})}),Object(n.jsx)(nt.a,{}),Object(n.jsx)("li",{className:a.li,style:{marginTop:"20px"},children:Object(n.jsx)(K.a,{container:!0,spacing:2,children:Object(n.jsxs)(K.a,{item:!0,xs:12,children:[Object(n.jsxs)("span",{className:a.infoTitle,children:["Consultation :"," "]}),Object(n.jsxs)("span",{hidden:W.edit&&W.person._id===Xe._id,className:a.infoData,children:[Xe.faceToFaceConsultation&&Object(n.jsx)("span",{children:" Face to Face "}),(Xe.faceToFaceConsultation&&Xe.telephoneConsultation||!Xe.faceToFaceConsultation&&!Xe.telephoneConsultation)&&Object(n.jsxs)("span",{style:{paddingLeft:"5px",paddingRight:"5px"},children:[" ","-"," "]}),Xe.telephoneConsultation&&Object(n.jsx)("span",{children:" Telephone "})]}),Object(n.jsx)("span",{hidden:!(W.edit&&W.person._id===Xe._id),className:a.infoData,children:Object(n.jsx)(I.a,{fullWidth:!0,className:a.TextBox,value:Be,onChange:yt,inputProps:{style:{padding:0}}})})]})})}),Object(n.jsx)(nt.a,{}),Xe.questions&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(P.a,{fullWidth:!0,variant:"contained",color:"primary",style:{color:"#fff",margin:"10px"},onClick:function(){return It(!0)},children:"Show questionnaire"})}),Object(n.jsx)(nt.a,{})]}),Object(n.jsx)("div",{style:{marginTop:"20px"}}),Object(n.jsx)("li",{hidden:!(G.restore&&G.person._id===Xe._id),children:Object(n.jsx)("div",{style:{fontWeight:"500",paddingBottom:"10px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to restore this record?"})}),Object(n.jsx)("li",{hidden:!Xe.deleted||G.restore&&G.person._id===Xe._id,children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){St(!0,Xe)},className:a.RestoreButton,children:"Restore This Record"})}),Object(n.jsx)("li",{hidden:!(G.restore&&G.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:pe,onClick:function(){St(!1,Xe)},className:a.SaveButton,children:"YES, Restore this!"})}),Object(n.jsx)("li",{hidden:!(G.restore&&G.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:pe,onClick:function(){St(!1,null)},className:a.CancelButton,children:"Cancel"})}),Object(n.jsx)("li",{hidden:!(z.delete&&z.person._id===Xe._id),children:Object(n.jsx)("div",{style:{fontWeight:"600",paddingBottom:"10px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to archive this record?"})}),Object(n.jsxs)("li",{hidden:e.deleteButtonDisabled||ee.untrace||J.trace||Xe.deleted||W.edit||z.delete&&z.person._id===Xe._id,children:[Xe.OTCCharges>0&&Object(n.jsx)(Qe.a,{title:"Paid Records Cannot be Deleted!",children:Object(n.jsx)("div",{children:Object(n.jsx)(P.a,{disabled:Xe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){wt(!0,Xe)},className:a.DeleteButton,children:"Archive This Record"})})}),Object(n.jsx)(P.a,{disabled:Xe.OTCCharges>0,type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){wt(!0,Xe)},className:a.DeleteButton,children:"Archive This Record"})]}),Object(n.jsx)("li",{hidden:!(z.delete&&z.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ce,onClick:function(){wt(!1,Xe)},className:a.SaveButton,children:"YES, Archive this!"})}),Object(n.jsx)("li",{hidden:!(z.delete&&z.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ce,onClick:function(){wt(!1,null)},className:a.CancelButton,children:"Cancel"})}),Object(n.jsx)("li",{hidden:!(ee.untrace&&ee.person._id===Xe._id),children:Object(n.jsx)("div",{style:{fontWeight:"500",paddingBottom:"10px",paddingLeft:"5px",fontSize:"16px",color:"#333"},children:"Are you sure you want to take this record out of TRACE folder?"})}),Object(n.jsx)("li",{hidden:z.delete||!Xe.traceFolder||Xe.deleted||ee.untrace&&ee.person._id===Xe._id,children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Tt(!0,Xe)},className:a.UndoTraceButton,children:"Take This out of Trace Folder"})}),Object(n.jsx)("li",{hidden:!(ee.untrace&&ee.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:pe,onClick:function(){Tt(!1,Xe)},className:a.SaveButton,children:"YES, Take this record out of TRACE Folder!"})}),Object(n.jsx)("li",{hidden:!(ee.untrace&&ee.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:pe,onClick:function(){Tt(!1,null)},className:a.CancelButton,children:"Cancel"})}),Object(n.jsx)("li",{hidden:!(J.trace&&J.person._id===Xe._id),children:Object(n.jsx)("div",{style:{fontWeight:"600",paddingBottom:"10px",paddingLeft:"5px",fontSize:"16px"},children:"Are you sure you want to move this record to TRACE folder?"})}),Object(n.jsx)("li",{hidden:Xe.deleted||Xe.traceFolder||z.delete||W.edit||J.trace&&J.person._id===Xe._id,children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Bt(!0,Xe)},className:a.MoveToTraceButton,children:"Move To Trace Folder"})}),Object(n.jsx)("li",{hidden:!(J.trace&&J.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:ce,onClick:function(){Bt(!1,Xe)},className:a.SaveButton,children:"YES, Move To TRACE Folder!"})}),Object(n.jsx)("li",{hidden:!(J.trace&&J.person._id===Xe._id),children:Object(n.jsx)(P.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",disabled:ce,onClick:function(){Bt(!1,null)},className:a.CancelButton,children:"Cancel"})})]})})},"panel0")}),Object(n.jsx)(U.a,{className:a.backdrop,open:oe||ce||pe,children:Object(n.jsx)(X.a,{color:"inherit"})})]})]}),Object(n.jsxs)(tt.a,{open:Pt,onClose:function(){It(!1)},maxWidth:"sm",children:[Object(n.jsx)(ot.a,{children:Xe.questions&&JSON.parse(Xe.questions).map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:a.question,children:Nt(e.question)}),Object(n.jsx)("div",{className:a.answer,children:e.answer})]})}))}),Object(n.jsx)(dt.a,{children:Object(n.jsx)(P.a,{onClick:function(){return It(!1)},children:"Close"})})]})]})})}var yt=a(126),wt=a(127),St=a(12),Bt=a.n(St),Tt=a(146),Dt=a(48),Lt=a(594),Pt=a(144),It=a.n(Pt),Nt=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Rt=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"trace"===e?"Patients to Trace":"deleted"===e?"Archived Records":"late"===e?"40 Hours Late":"All Bookings"};function Wt(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function At(e){var t=Nt(),a=i.a.useState(25),r=Object(l.a)(a,2),c=r[0],d=r[1],s=Object(o.useState)(!1),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(new Date((new Date).getTime()-6048e5)),g=Object(l.a)(j,2),f=g[0],x=g[1],h=i.a.useState(new Date((new Date).getTime()-864e5)),m=Object(l.a)(h,2),O=m[0],v=m[1],k=Object(o.useState)(St(new Date((new Date).getTime()-6048e5),"yyyy-mm-dd")),C=Object(l.a)(k,2),w=C[0],S=C[1],B=Object(o.useState)(St(new Date((new Date).getTime()-864e5),"yyyy-mm-dd")),D=Object(l.a)(B,2),L=D[0],N=D[1],R=Object(o.useState)(!1),W=Object(l.a)(R,2),A=W[0],M=W[1],F=Object(o.useState)(!0),z=Object(l.a)(F,2),E=z[0],G=z[1],H=Object(o.useState)(!0),U=Object(l.a)(H,2),X=U[0],$=U[1],Q=Object(o.useState)(!0),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(o.useState)(!0),ne=Object(l.a)(ae,2),oe=ne[0],ie=ne[1],re=Object(o.useState)(!0),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=Object(o.useState)(!0),pe=Object(l.a)(se,2),be=pe[0],ge=pe[1],xe=Object(o.useState)(!0),me=Object(l.a)(xe,2),ve=me[0],Ce=me[1],we=Object(o.useState)(!0),Be=Object(l.a)(we,2),Te=Be[0],De=Be[1],Pe=Object(o.useState)(!0),Ne=Object(l.a)(Pe,2),We=Ne[0],Ae=Ne[1],Me=Object(o.useState)(!0),Fe=Object(l.a)(Me,2),ze=Fe[0],Ee=Fe[1],Ve=[];Ve="recent"===e.date?[{field:"_id",headerName:" ",width:120,renderCell:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(J.a,{color:"primary",onClick:function(t){return Yt(t,e.value)},children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)("span",{style:{color:"#058700",fontWeight:"500",fontSize:"0.8rem"},children:e.getValue("questions")&&"Self-Test"})]})}},{field:"timeStamp",headerName:"TimeStamp",width:200,valueFormatter:function(e){return _t(e.value)}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(lt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:200,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Telephone",width:150},{field:"faceToFaceConsultation",headerName:"Consultation",width:250,renderCell:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[e.getValue("faceToFaceConsultation")&&Object(n.jsx)("span",{children:" Face to Face "}),e.getValue("faceToFaceConsultation")&&Object(n.jsxs)("span",{style:{paddingLeft:"5px",paddingRight:"5px"},children:[" ","-"," "]}),e.getValue("telephoneConsultation")&&Object(n.jsx)("span",{children:" Telephone "})]})}}]:[{field:"_id",headerName:" ",width:120,renderCell:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(J.a,{color:"primary",onClick:function(t){return Yt(t,e.value)},children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)("span",{style:{color:"#058700",fontWeight:"500",fontSize:"0.8rem"},children:e.getValue("questions")&&"Self-Test"})]})}},{field:"bookingDate",headerName:"B Date",width:110,valueFormatter:function(e){return Object(lt.FormatDateFromString)(e.value)}},{field:"bookingTimeNormalized",headerName:"B Time",width:200,valueGetter:function(e){return e.getValue("bookingTime")}},{field:"fullname",headerName:"Fullname",width:250},{field:"email",headerName:"Email",width:200},{field:"phone",headerName:"Telephone",width:150},{field:"faceToFaceConsultation",headerName:"Consultation",width:250,renderCell:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[e.getValue("faceToFaceConsultation")&&Object(n.jsx)("span",{children:" Face to Face "}),e.getValue("faceToFaceConsultation")&&Object(n.jsx)("span",{style:{paddingLeft:"5px",paddingRight:"5px"},children:" - "}),e.getValue("telephoneConsultation")&&Object(n.jsx)("span",{children:" Telephone "})]})}}];var Ge=i.a.useContext(y),He=Object(l.a)(Ge,2),qe=He[0],Ye=(He[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),Xe=Object(l.a)(Ye,2),rt=Xe[0],dt=Xe[1],st=i.a.useState(null),pt=Object(l.a)(st,2),bt=(pt[0],pt[1]),jt=i.a.useState(null),gt=Object(l.a)(jt,2),ft=gt[0],ht=gt[1],mt=i.a.useState(!1),Ot=Object(l.a)(mt,2),vt=Ot[0],kt=Ot[1],Bt=Object(o.useState)(xt[0]),Pt=Object(l.a)(Bt,2),At=Pt[0],Mt=Pt[1],Ft=i.a.useState(""),zt=Object(l.a)(Ft,2),Et=zt[0],Vt=zt[1],_t=(Object(o.useRef)(),function(e){var t=St(new Date,"yyyy-mm-dd"),a=St(e,"yyyy-mm-dd");return St(e,t===a?"'Today', h:MM:ss TT":"mmm dS, h:MM:ss TT")}),Gt=function(t){var a=Je.getAllBookings;"today"===e.date?a=Je.getTodayBookings:"old"===e.date?a=Je.getOldBookings:"future"===e.date?a=Je.getFutureBookings:"recent"===e.date?a=Je.getRecentBookingsAll:"deleted"===e.date?a=Je.getDeletedBookings:"trace"===e.date&&(a=Je.getTraceFolderBookings),dt({bookings:[],cachedBookings:[],isFetching:!0});a(t).then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});dt({bookings:Object(Ue.a)(e.data),cachedBookings:Object(Ue.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))};Object(o.useEffect)((function(){d(25),Gt(25)}),[e.date]),Object(o.useEffect)((function(){if(Et&&Et.trim().length>0){var e=rt.cachedBookings.filter((function(e){var t;return(null===(t=e.fullname)||void 0===t?void 0:t.toLowerCase().indexOf(Et.toLowerCase()))>=0}));dt({bookings:Object(Ue.a)(e),cachedBookings:rt.cachedBookings,isFetching:!1})}else dt({bookings:Object(Ue.a)(rt.cachedBookings),cachedBookings:rt.cachedBookings,isFetching:!1})}),[Et]),Object(o.useEffect)((function(){Gt(c)}),[qe.bookingDialogDataChanged]);var Ht,qt,Yt=function(e,t){var a=rt.bookings.find((function(e){return e._id===t}));ht(a),kt(!0)},Ut=i.a.useState(1),Kt=Object(l.a)(Ut,2),Xt=Kt[0],Jt=Kt[1];return Object(n.jsxs)(i.a.Fragment,{children:[rt.isFetching&&Object(n.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(n.jsx)($e.a,{color:"primary"})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(n.jsx)(K.a,{item:!0,md:4,children:Object(n.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(qt=e.date,"today"===qt?Object(n.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===qt?Object(n.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"future"===qt?Object(n.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===qt?Object(n.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===qt?Object(n.jsx)(ye.a,{style:{fontSize:"2.2rem"}}):"completed"===qt?Object(n.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"positive"===qt?Object(n.jsx)(Le.a,{style:{fontSize:"2.2rem"}}):"trace"===qt?Object(n.jsx)(_e.a,{style:{fontSize:"2.2rem"}}):"deleted"===qt?Object(n.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===qt?Object(n.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):Object(n.jsx)(he.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Rt(e.date)," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"Refresh",placement:"right",children:Object(n.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){Vt(""),Gt(c)},children:Object(n.jsx)(ct.a,{})})})})]})})}),Object(n.jsx)(K.a,{item:!0,md:3,children:"completed"===e.date&&qe.showCreateExcel&&Object(n.jsx)("div",{style:{paddingBottom:"5px"},children:Object(n.jsx)(P.a,{className:t.ExportToExcelButton,variant:"outlined",color:"default",onClick:function(e){b(!0)},startIcon:Object(n.jsx)(yt.a,{style:{color:"#009900"},icon:wt.a}),children:"export to excel"})})}),rt.isFetching&&Object(n.jsx)("div",{className:t.HideNowRows}),Object(n.jsx)(K.a,{item:!0,md:3,children:Object(n.jsx)(I.a,{variant:"standard",value:Et,onChange:function(e){Vt(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})}),Object(n.jsx)(K.a,{item:!0,hidden:(Ht=e.date,"live"===Ht||"positive"===Ht||"late"===Ht||"today"===Ht),children:Object(n.jsxs)(V.a,{className:t.topSelect,children:[Object(n.jsx)(_.a,{id:"top-select-label",children:"Limit"}),Object(n.jsxs)(Ze.a,{labelId:"top-select-label",id:"top-simple-select",value:c,onChange:function(e){d(e.target.value),Gt(e.target.value)},children:[Object(n.jsx)(et.a,{value:25,children:"25"}),Object(n.jsx)(et.a,{value:50,children:"50"}),Object(n.jsx)(et.a,{value:100,children:"100"}),Object(n.jsx)(et.a,{value:500,children:"500"}),Object(n.jsx)(et.a,{value:1e3,children:"1000"}),Object(n.jsx)(et.a,{value:1e4,children:"ALL"})]})]})})]}),Object(n.jsx)("div",{style:{height:700,width:"100%"},children:Object(n.jsx)(Ke.a,{rows:rt.bookings,columns:Ve,autoPageSize:!0,page:Xt,onPageChange:function(e){Jt(e.page)},onSelectionChange:function(e){e.length>0&&bt(e.rows[0])}})}),Object(n.jsx)(Ct,{booking:ft,open:vt&&ft&&ft.fullname,onClose:function(){ht(null),kt(!1)}}),rt.bookings&&rt.bookings.length>0&&Object(n.jsxs)(tt.a,{maxWidth:"lg",open:u,onClose:function(){Mt(xt[0]),M(!1),b(!1)},PaperComponent:Wt,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(at.a,{id:"draggable-dialog-title",children:[Object(n.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(yt.a,{style:{color:"#2f942e",fontSize:"2rem"},icon:wt.a})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("div",{style:{color:"#2f942e",paddingBottom:"5px",fontWeight:"800"},children:[" ","Export to EXCEL"," "]})})]}),Object(n.jsx)(nt.a,{})]}),Object(n.jsx)(ot.a,{children:Object(n.jsxs)("div",{style:{minHeight:"600px",maxHeight:"600px",minWidth:"1200px",maxWidth:"1200px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(it.a,{checked:A,onChange:function(e){M(e.target.checked)},name:"justCorporate"}),label:"Just Corporate Records"})}),A&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(V.a,{style:{marginTop:"0px"},className:t.formControl,children:Object(n.jsx)(Ze.a,{labelId:"select-corporate",id:"select-corporate-id",value:At,onChange:function(e){Mt(e.target.value)},children:xt.map((function(e){return Object(n.jsx)(et.a,{value:e,children:"".concat(e)})}))})})})]}),Object(n.jsx)(Dt.a,{utils:Tt.a,children:Object(n.jsxs)(K.a,{row:!0,container:!0,justify:"center",spacing:3,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Lt.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-from",label:"From",value:f,onChange:function(e){x(e),S(St(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Lt.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-until",label:"Until",value:O,onChange:function(e){v(e),N(St(e,"yyyy-mm-dd"))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{paddingTop:"30px",marginLeft:"20px"},children:Object(n.jsx)(It.a,{id:"test-table-xls-button",className:t.ExportToExcelButtonInline,table:"table-to-xls",filename:"PCR.Report.".concat(w,".").concat(L),sheet:"PCR-Report",buttonText:"Download as XLS"})})})]})})]}),Object(n.jsx)("div",{children:Object(n.jsxs)(K.a,{container:!0,spacing:3,children:[Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:E,onChange:function(e){G(e.target.checked)},name:"chkDate"}),label:"Date"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:X,onChange:function(e){$(e.target.checked)},name:"chkForename"}),label:"Forename"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:ee,onChange:function(e){te(e.target.checked)},name:"chkSurname"}),label:"Surname"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:oe,onChange:function(e){ie(e.target.checked)},name:"chkDOB"}),label:"D.O.B"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:le,onChange:function(e){de(e.target.checked)},name:"chkEmail"}),label:"Email"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:be,onChange:function(e){ge(e.target.checked)},name:"chkTel"}),label:"Tel"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:ve,onChange:function(e){Ce(e.target.checked)},name:"chkCertificate"}),label:"Certificate"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:Te,onChange:function(e){De(e.target.checked)},name:"chkAntiBodyTest"}),label:"AntiBodyTest"})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:We,onChange:function(e){Ae(e.target.checked)},name:"chkextRef"}),label:"Lab No."})}),Object(n.jsx)(K.a,{item:!0,xs:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(Y.a,{checked:ze,onChange:function(e){Ee(e.target.checked)},name:"chkPrice"}),label:"Price"})})]})}),Object(n.jsx)("div",{style:{width:"100%",paddingTop:"20px"},children:Object(n.jsxs)("table",{className:t.table,id:"table-to-xls",children:[Object(n.jsxs)("tr",{children:[E&&Object(n.jsx)("th",{className:t.th,children:"Date"}),X&&Object(n.jsx)("th",{className:t.th,children:"Forename"}),ee&&Object(n.jsx)("th",{className:t.th,children:"Surename"}),oe&&Object(n.jsx)("th",{className:t.th,children:"D.O.B"}),le&&Object(n.jsx)("th",{className:t.th,children:"Email"}),be&&Object(n.jsx)("th",{className:t.th,children:"Tel"}),ve&&Object(n.jsx)("th",{className:t.th,children:"Certificate"}),Te&&Object(n.jsx)("th",{className:t.th,children:"AntiBodyTest"}),We&&Object(n.jsx)("th",{className:t.th,children:"Lab No."}),ze&&Object(n.jsx)("th",{className:t.th,children:"Price (\xa3) "})]}),rt.bookings.filter((function(e){return A?e.bookingDate>=w&&e.bookingDate<=L&&e.paid&&"corporate"===e.paidBy&&e.corporate===At:e.bookingDate>=w&&e.bookingDate<=L})).map((function(e){return Object(n.jsxs)("tr",{children:[E&&Object(n.jsx)("td",{className:t.td,children:Object(lt.FormatDateFromString)(e.bookingDate)}),X&&Object(n.jsx)("td",{className:t.td,children:e.forenameCapital}),ee&&Object(n.jsx)("td",{className:t.td,children:e.surnameCapital}),oe&&Object(n.jsx)("th",{className:t.th}),le&&Object(n.jsx)("td",{className:t.td,children:e.email}),be&&Object(n.jsx)("td",{className:t.td,children:e.phone}),ve&&Object(n.jsx)("td",{className:t.td,children:e.certificate?"YES":"NO"}),Te&&Object(n.jsx)("td",{className:t.td,children:e.antiBodyTest?"YES":"NO"}),We&&Object(n.jsx)("td",{className:t.td,children:e.extRef}),ze&&Object(n.jsx)("td",{className:t.td,children:ut.a.calculatePrice(e)})]})}))]})})]})})]})]})}var Mt="#4faef7",Ft="#e83caf",zt="#ff4f14",Et="#d6733a",Vt="#dc2626",_t="#0c7acf",Gt="#8600d4",Ht="#d1005e",qt="#00919e",Yt="#9e6c00",Ut="#007d0c",Kt=Object(D.a)((function(e){return{Container:{width:"100%",minWidth:"200px",paddingTop:"70%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",paddingTop:"70%",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelToday:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#1a73e8",color:"#fff",fontSize:"1rem",borderRadius:"50%",padding:"5px",lineHight:"35px",minWidth:"35px",textAlign:"center"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"35%",left:"40%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",lineHight:"40px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"35%",left:"40%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"16px",fontWeight:"600",padding:"10px",borderRadius:"50%",minWidth:"40px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"8%",height:"85%"},PCRGauge:{position:"absolute",bottom:"-20px",left:"0",width:"30px",height:"120%"},GynaeGauge:{position:"absolute",bottom:"-20px",left:"31px",width:"20px",height:"120%"},GPGauge:{position:"absolute",bottom:"-20px",left:"52px",width:"20px",height:"120%"},STDGauge:{position:"absolute",bottom:"-20px",left:"73px",width:"20px",height:"120%"},BloodGauge:{position:"absolute",bottom:"-20px",left:"94px",width:"20px",height:"120%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",paddingTop:"45%"}}})),Xt=function(e){e.key;var t=e.cellIndex,a=e.month,r=e.daysInMonth,c=e.dayClicked,d=Kt(),s=i.a.useContext(y),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(""),g=Object(l.a)(j,2),f=g[0],x=g[1],h=i.a.useState(new Date),m=Object(l.a)(h,2),O=m[0],v=m[1],k=i.a.useState(null),C=Object(l.a)(k,2),w=C[0],D=C[1],L=i.a.useState(!1),P=Object(l.a)(L,2),I=P[0],N=P[1],R=i.a.useState(!1),W=Object(l.a)(R,2),A=(W[0],W[1]);Object(o.useEffect)((function(){if(t<=r.length){var e=r[t-1],n=Bt()(e,"yyyy-mm-dd");x(n),v(e),N(e.getMonth()!==a-1);var o=Bt()(new Date,"yyyy-mm-dd");A(n<o)}else{var i=t-r.length,c=new Date(r[r.length-1].getTime()+864e5*i),l=Bt()(c,"yyyy-mm-dd");x(l),v(c),N(!0);var d=Bt()(new Date,"yyyy-mm-dd");A(l<d)}}),[t,a,r]),Object(o.useEffect)((function(){(function(){var e=Object(B.a)(S.a.mark((function e(){var t,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&!(f.length<=0)){e.next=2;break}return e.abrupt("return");case 2:if(!I){e.next=5;break}return D(-2),e.abrupt("return");case 5:if(D(null),n=null===(t=u.AdminCalendarCache)||void 0===t||null===(a=t.find((function(e){return"getBookingsCountByDateStr"===e.method&&e.query===f})))||void 0===a?void 0:a.res){e.next=12;break}return e.next=10,Je.getAllBookingsCountByDateStr(f);case 10:n=e.sent,b((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ue.a)(e.AdminCalendarCache),[{method:"getBookingsCountByDateStr",query:f,res:n}])})}));case 12:n.data.count&&D(n.data.count);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[f]);var M,F=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:d.PCRGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:_t,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},z=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:d.GynaeGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Gt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},E=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:d.GPGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Ht,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},V=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:d.STDGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:qt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},_=function(e){var t=e/10*100+5;t>100&&(t=100),t<20&&(t=20),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:d.BloodGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Yt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{className:d.Container,onClick:function(e){return c(e,O)},children:[function(e,t,a){var o=null,i=!1,r=-1;if(e<=a.length)r=(o=a[e-1]).getDate(),o.getMonth()!==t-1&&(i=!0);else{var c=e-a.length;r=new Date(a[a.length-1].getTime()+864e5*c).getDate(),i=!0}var l=Bt()(new Date,"yyyy-mm-dd")===Bt()(o,"yyyy-mm-dd");return Object(n.jsx)("span",{className:i?d.DayLabelDisabled:l?d.DayLabelToday:d.DayLabel,children:r>0?"".concat(r):""})}(t,a,r),(M=w,M?-2!==M?Object(n.jsx)("div",{className:d.DayLabelContainer,children:Object(n.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:M.map((function(e){return Object(n.jsx)(K.a,{item:!0,children:(t=e.clinic,a=e.count,Object(n.jsxs)(i.a.Fragment,{children:["Virtual Consultation"===t&&u.selectedClinics.findIndex((function(e){return"Virtual Consultation"===e}))>=0&&F(a),"F2F Clinic"===t&&u.selectedClinics.findIndex((function(e){return"F2F Clinic"===e}))>=0&&z(a),"Laser Theatre"===t&&u.selectedClinics.findIndex((function(e){return"Laser Theatre"===e}))>=0&&E(a),"Lens Theatre"===t&&u.selectedClinics.findIndex((function(e){return"Lens Theatre"===e}))>=0&&V(a),"Post OP"===t&&u.selectedClinics.findIndex((function(e){return"Post OP"===e}))>=0&&_(a)]}))});var t,a}))})}):void 0:Object(n.jsx)("div",{className:d.LoadingProgress,children:Object(n.jsx)(X.a,{disableShrink:!0})}))]})})},Jt=a(220),$t=a.n(Jt),Qt=function e(){Object(te.a)(this,e)};Qt.getMonthRange=function(e,t){return new $t.a.Calendar($t.a.SUNDAY).itermonthdates(t,e)};var Zt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ea=[1,2,3,4,5,6,7],ta=[1,2,3,4,5,6],aa=Object(D.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle"}}})),na=function(e){var t=e.month,a=e.year,o=e.dayClicked,r=aa(),c=Qt.getMonthRange(t,a);return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("table",{className:r.table,children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Zt.map((function(e){return Object(n.jsx)("th",{className:r.th,children:e},"th-".concat(e))}))})}),Object(n.jsx)("tbody",{children:ta.map((function(e){return Object(n.jsx)("tr",{children:ea.map((function(i){return Object(n.jsx)("td",{className:r.td,children:Object(n.jsx)(Xt,{cellIndex:(e-1)*ea.length+i,month:t,daysInMonth:c,dayClicked:o},"".concat(t).concat(a).concat((e-1)*ea.length+i))})}))})}))})]})})},oa=a(587),ia=a(600),ra=a(321),ca=a.n(ra),la=a(322),da=a.n(la),sa=Object(D.a)((function(e){return{Container:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fff",cursor:"pointer"},ContainerPast:{width:"100%",minHeight:"100px",paddingTop:"40%",position:"relative",backgroundColor:"#fafafa",cursor:"pointer"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},BookingCountLabel:{position:"absolute",top:"25%",left:"38%",color:"#3f51b5",backgroundColor:"#ebedf7",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},BookingCountLabelBusy:{position:"absolute",top:"25%",left:"38%",color:"#b00000",backgroundColor:"#fce6e6",fontSize:"14px",fontWeight:"600",padding:"5px",borderRadius:"50%",minWidth:"30px",cursor:"pointer",textAlign:"center"},LoadingProgress:{position:"absolute",top:"40%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},PCRGauge:{position:"absolute",bottom:"15px",left:"0",width:"20px",height:"90%"},GynaeGauge:{position:"absolute",bottom:"15px",left:"21px",width:"20px",height:"90%"},GPGauge:{position:"absolute",bottom:"15px",left:"42px",width:"20px",height:"90%"},STDGauge:{position:"absolute",bottom:"15px",left:"63px",width:"20px",height:"90%"},BloodGauge:{position:"absolute",bottom:"15px",left:"84px",width:"20px",height:"90%"},DayLabelContainer:{position:"absolute",top:"15%",left:"5px",width:"100%",height:"100%"}}})),pa=function(e){e.key;var t=e.date,a=e.time,r=e.dayClicked,c=sa(),d=i.a.useContext(y),s=Object(l.a)(d,2),p=s[0],u=s[1],b=i.a.useState(null),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(!1),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(new Date),k=Object(l.a)(v,2),C=k[0],w=k[1];Object(o.useEffect)((function(){var e=Bt()(new Date,"yyyy-mm-dd");O(t<e),w(new Date(t))}),[t]),Object(o.useEffect)((function(){var e,n;if(!(!t||t.length<=0||!a||a.length<=0)){f(null);var o=null===(e=p.AdminCalendarCache)||void 0===e||null===(n=e.find((function(e){return"getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(a)})))||void 0===n?void 0:n.res;if(!o){var i=ne.a.CancelToken.source();return Je.getAllBookingsCountByDateStrandTime(t,a,i).then((function(e){e.data.count&&(f(e.data.count),u((function(n){return Object(T.a)(Object(T.a)({},n),{},{AdminCalendarCache:[].concat(Object(Ue.a)(n.AdminCalendarCache),[{method:"getBookingsCountByDateStrandTime",query:"".concat(t).concat(a),res:e}])})})))})).catch((function(e){})),function(){i&&i.cancel("Cancelling in cleanup")}}o.data.count&&f(o.data.count)}}),[t,a]);var S,B=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:c.PCRGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:_t,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},D=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:c.GynaeGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Gt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},L=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:c.GPGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Ht,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},P=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:c.STDGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:qt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},I=function(e){var t=e/1*100+5;t>100&&(t=100),t<30&&(t=30),0===e&&(t=1);var a=100-t;return Object(n.jsx)("div",{className:c.BloodGauge,children:Object(n.jsxs)("div",{style:{padding:"0",margin:"0",width:"100%",height:"100%",backgroundColor:Yt,position:"relative"},children:[Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",color:"#fff",fontWeight:"500",fontSize:"0.8rem",textAlign:"center",width:"100%"},children:e>0&&e}),Object(n.jsx)("div",{style:{padding:"0",margin:"0",width:"100%",height:"".concat(a,"%"),backgroundColor:"#fafafa"}})]})})},N=function(e,t){return Object(n.jsxs)(i.a.Fragment,{children:["Virtual Consultation"===e&&p.selectedClinics.findIndex((function(e){return"Virtual Consultation"===e}))>=0&&B(t),"F2F Clinic"===e&&p.selectedClinics.findIndex((function(e){return"F2F Clinic"===e}))>=0&&D(t),"Laser Theatre"===e&&p.selectedClinics.findIndex((function(e){return"Laser Theatre"===e}))>=0&&L(t),"Cataract Theatre"===e&&p.selectedClinics.findIndex((function(e){return"Cataract Theatre"===e}))>=0&&P(t),"Post OP"===e&&p.selectedClinics.findIndex((function(e){return"Post OP"===e}))>=0&&I(t)]})};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("div",{className:m?c.ContainerPast:c.Container,onClick:function(e){return r(e,C)},children:(S=g,S?-2!==S?Object(n.jsx)("div",{className:c.DayLabelContainer,children:Object(n.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-end",style:{width:"100%",height:"100%"},children:S.map((function(e){return Object(n.jsx)(K.a,{item:!0,children:N(e.clinic,e.count)})}))})}):void 0:Object(n.jsx)("div",{className:c.LoadingProgress,children:Object(n.jsx)(X.a,{disableShrink:!0})}))})})},ua=["08:00 AM","08:15 AM","08:30 AM","08:45 AM","09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM","06:00 PM","06:15 PM","06:30 PM","06:45 PM","07:00 PM","07:15 PM","07:30 PM","07:45 PM"],ba=Object(D.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"12%"}}})),ja=function(e){var t=e.dates,a=e.dayClicked,o=ba();return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(n.jsx)("table",{className:o.table,children:Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{style:{width:"7%"}}),t.map((function(e){return Object(n.jsxs)("th",{className:o.th,children:[Object(n.jsx)("div",{style:{paddingBottom:"5px",color:"#aaa"},children:Bt()(e,"ddd")}),Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{style:{color:"#aaa"},children:Bt()(e,"mmm ")}),Object(n.jsx)("span",{style:Bt()(new Date,"yyyy-mm-dd")===Bt()(e,"yyyy-mm-dd")?{backgroundColor:"#1a73e8",color:"#fff",borderRadius:"50%",padding:"5px"}:{color:"#333",fontWeight:"500"},children:Bt()(e," d")})]})]})}))]})})})}),Object(n.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(n.jsx)("table",{className:o.table,children:Object(n.jsx)("tbody",{children:ua.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{width:"7%"},children:e}),t.map((function(t){return Object(n.jsx)("td",{className:o.td,children:Object(n.jsx)(pa,{dayClicked:a,date:Bt()(t,"yyyy-mm-dd"),time:e},"".concat(Bt()(t,"yyyy-mm-dd"),"-").concat(e.replace(":","-")))})}))]})}))})})})]})},ga=a(46),fa=a.n(ga),xa=(a(163),Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"600",fontSize:"1.2rem",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},BoxDisabled:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",borderColor:"#ddd",cursor:"not-allowed",color:"#ddd",transition:"all 0.2s ease"},BoxVC:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:_t,color:_t,transition:"all 0.2s ease","&:hover":{backgroundColor:_t,color:"#fff"}},BoxF2F:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Gt,color:Gt,transition:"all 0.2s ease","&:hover":{backgroundColor:Gt,color:"#fff"}},BoxLaser:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ht,color:Ht,transition:"all 0.2s ease","&:hover":{backgroundColor:Ht,color:"#fff"}},BoxCataract:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:qt,color:qt,transition:"all 0.2s ease","&:hover":{backgroundColor:qt,color:"#fff"}},BoxPostOP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Yt,color:Yt,transition:"all 0.2s ease","&:hover":{backgroundColor:Yt,color:"#fff"}},BoxOptometry:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ut,color:Ut,transition:"all 0.2s ease","&:hover":{backgroundColor:Ut,color:"#fff"}},BoxGynae:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ft,color:Ft,transition:"all 0.2s ease","&:hover":{backgroundColor:Ft,color:"#fff"}},BoxGP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:zt,color:zt,transition:"all 0.2s ease","&:hover":{backgroundColor:zt,color:"#fff"}},BoxSTD:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Et,color:Et,transition:"all 0.2s ease","&:hover":{backgroundColor:Et,color:"#fff"}}}})));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);function ha(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function ma(e){var t=xa(),a=i.a.useContext(y),o=Object(l.a)(a,2),r=(o[0],o[1],function(){e.handleClose()}),c=function(t){e.clinicClicked(t)};return Object(n.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{maxWidth:"xs",open:e.open,onClose:r,PaperComponent:ha,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(at.a,{id:"draggable-dialog-title",children:[Object(n.jsxs)(K.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(fa.a,{style:{color:"#f50057",fontSize:"3rem"}})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","ADD New Booking"," "]})})]}),Object(n.jsx)(nt.a,{})]}),Object(n.jsx)(ot.a,{children:Object(n.jsxs)("div",{style:{height:"480px"},children:[Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:0,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Ae.a,{className:t.CalendarIcon})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"0px"},children:Object(n.jsx)("div",{className:t.BoxVC,onClick:function(){return c("Virtual Consultation")},children:"Virtual Consultation"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxF2F,onClick:function(){return c("F2F Clinic")},children:"F2F Clinic"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxLaser,onClick:function(){return c("Laser Theatre")},children:"Laser Theatre"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxCataract,onClick:function(){return c("Lens Theatre")},children:"Lens Theatre"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxPostOP,onClick:function(){return c("Post OP")},children:"Post OP"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxOptometry,onClick:function(){return c("Optometry")},children:"Optometry"})})]}),Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",right:"5px"},children:Object(n.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:r,style:{width:"100px"},children:"close"})})})})]})})]})})})}var Oa=a(49),va=a.n(Oa),ka=a(318),Ca=a.n(ka),ya=(Object(D.a)((function(e){return{loadingBox:{}}})),function(e){var t=e.title,a=e.value,r=e.dateChanged,c=e.error,d=e.todayButton,s=e.children,p=i.a.useState(""),u=Object(l.a)(p,2),b=u[0],j=u[1],g=i.a.useState(""),f=Object(l.a)(g,2),x=f[0],h=f[1],m=i.a.useState(""),O=Object(l.a)(m,2),v=O[0],k=O[1],C=i.a.useState([]),y=Object(l.a)(C,2),w=y[0],S=y[1],B=i.a.useState([]),T=Object(l.a)(B,2),D=T[0],L=T[1],P=i.a.useState([]),I=Object(l.a)(P,2),N=I[0],R=I[1],W=function(e,t,a){var n="".concat(e),o="".concat(t+1);1===n.length&&(n="0".concat(n)),1===o.length&&(o="0".concat(o)),r("".concat(a,"-").concat(o,"-").concat(n))},A=function(){j(""),k(""),h(""),r("")};return Object(o.useEffect)((function(){if(a&&10===a.length){var e=parseInt(a.substr(8,2)),t=parseInt(a.substr(5,2)),n=parseInt(a.substr(0,4));j(e),h(t-1),k(n)}else a||A()}),[a]),Object(o.useEffect)((function(){for(var e=[],t=[],a=[],n=1;n<=31;n++)e.push(n);for(n=0;n<12;n++)t.push(Bt()(new Date(2020,n,5),"mmmm"));for(n=1900;n<=(new Date).getFullYear()+1;n++)a.push(n);S(e),L(t),R(a)}),[]),Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{style:{position:"relative",border:"1px solid ".concat(c?"red":"#ddd"),borderRadius:"10px",padding:"20px",paddingBottom:"20px",marginTop:"20px"},children:[Object(n.jsx)("div",{style:{position:"absolute",top:"-15px",left:"15px",backgroundColor:"#fff",color:"".concat(c?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:t}),Object(n.jsx)("div",{style:{position:"absolute",top:"-25px",right:"10px",backgroundColor:"#fff",color:"".concat(c?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:Object(n.jsx)(Qe.a,{title:"Clear Date",children:Object(n.jsx)(J.a,{onClick:A,children:Object(n.jsx)(va.a,{})})})}),d&&Object(n.jsx)("div",{style:{position:"absolute",top:"-25px",right:"70px",backgroundColor:"#fff",color:"".concat(c?"red":"#555"),padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:Object(n.jsx)(Qe.a,{title:"Today",children:Object(n.jsx)(J.a,{onClick:function(){var e=new Date;W(e.getDate(),e.getMonth(),e.getFullYear())},children:Object(n.jsx)(Ca.a,{})})})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2,children:[Object(n.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(n.jsxs)(V.a,{fullWidth:!0,children:[Object(n.jsx)(_.a,{id:"day-label",children:"Day"}),Object(n.jsx)(Ze.a,{labelId:"day-label",id:"day-select",value:b,onChange:function(e){j(e.target.value),W(e.target.value,x,v)},children:w.map((function(e){return Object(n.jsx)(et.a,{value:e,children:e})}))})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(n.jsxs)(V.a,{fullWidth:!0,children:[Object(n.jsx)(_.a,{id:"month-label",children:"Month"}),Object(n.jsx)(Ze.a,{labelId:"month-label",id:"month-select",value:x,onChange:function(e){h(e.target.value),W(b,e.target.value,v)},children:D.map((function(e,t){return Object(n.jsx)(et.a,{value:t,children:e})}))})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:4,children:Object(n.jsxs)(V.a,{fullWidth:!0,children:[Object(n.jsx)(_.a,{id:"day-label",children:"Year"}),Object(n.jsx)(Ze.a,{labelId:"year-label",id:"year-select",value:v,onChange:function(e){k(e.target.value),W(b,x,e.target.value)},children:N.map((function(e){return Object(n.jsx)(et.a,{value:e,children:e})}))})]})})]}),Object(n.jsx)("div",{children:s})]})})}),wa=a(582),Sa=function e(){Object(te.a)(this,e)};Sa.registerNewPatient=function(e){return Xe.post("/api/optimalvision/patient/registernewpatient",e)},Sa.updatePatient=function(e){return Xe.post("/api/optimalvision/patient/updatepatient",e)},Sa.deletePatient=function(e){return Xe.post("/api/optimalvision/patient/deletepatient?id=".concat(e))},Sa.unDeletePatient=function(e){return Xe.post("/api/optimalvision/patient/undeletepatient?id=".concat(e))},Sa.getPatientById=function(e){return Xe.get("/api/optimalvision/patient/getpatientbyid?id=".concat(e))},Sa.getPatientByPatientId=function(e){return Xe.get("/api/optimalvision/patient/getpatientbypatientid?patientID=".concat(e))},Sa.getAllPatients=function(){return Xe.get("/api/optimalvision/patient/getallpatients")},Sa.getDeletedPatients=function(e){return e||(e=25),Xe.get("/api/optimalvision/patiant/getdeletedpatients")};var Ba=a(224),Ta=a(584),Da=a(574),La=a(586),Pa=a(596),Ia=a(585),Na=a(133),Ra=a.n(Na),Wa=function e(){Object(te.a)(this,e)};Wa.getEmailPreview=function(e,t,a){return Xe.post("/api/optimalvision/emailtemplate/getemailpreview",{templateId:e,bookingId:t,patientId:a})},Wa.sendManualEmail=function(e,t,a,n){return Xe.post("/api/optimalvision/emailtemplate/sendmanualemail",{templateId:e,sendTo:t,bookingId:a,patientId:n})},Wa.registerNewTemplate=function(e){return Xe.post("/api/optimalvision/emailtemplate/registernewtemplate",e)},Wa.updateTemplate=function(e){return Xe.post("/api/optimalvision/emailtemplate/updatetemplate",e)},Wa.deleteTemplate=function(e){return Xe.post("/api/optimalvision/emailtemplate/deletetemplate?id=".concat(e))},Wa.getTemplateById=function(e){return Xe.get("/api/optimalvision/emailtemplate/gettemplatebyid?id=".concat(e))},Wa.getTemplateBytemplateId=function(e){return Xe.get("/api/optimalvision/emailtemplate/gettemplatebytemplateid?templateID=".concat(e))},Wa.getAllTemplates=function(){return Xe.get("/api/optimalvision/emailtemplate/getalltemplates")};var Aa=function e(){Object(te.a)(this,e)};Aa.getSMSPreview=function(e,t,a){return Xe.post("/api/optimalvision/smstemplate/getsmspreview",{templateId:e,bookingId:t,patientId:a})},Aa.sendManualSMS=function(e,t,a,n){return Xe.post("/api/optimalvision/smstemplate/sendmanualsms",{templateId:e,sendTo:t,bookingId:a,patientId:n})},Aa.registerNewTemplate=function(e){return Xe.post("/api/optimalvision/smstemplate/registernewtemplate",e)},Aa.updateTemplate=function(e){return Xe.post("/api/optimalvision/smstemplate/updatetemplate",e)},Aa.deleteTemplate=function(e){return Xe.post("/api/optimalvision/smstemplate/deletetemplate?id=".concat(e))},Aa.getTemplateById=function(e){return Xe.get("/api/optimalvision/smstemplate/gettemplatebyid?id=".concat(e))},Aa.getTemplateBytemplateId=function(e){return Xe.get("/api/optimalvision/smstemplate/gettemplatebytemplateid?templateID=".concat(e))},Aa.getAllTemplates=function(){return Xe.get("/api/optimalvision/smstemplate/getalltemplates")};var Ma=a(187),Fa=a.n(Ma),za=a(103),Ea=a.n(za);function Va(e){var t=e.children,a=e.value,o=e.index,i=Object(ft.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(T.a)(Object(T.a)({role:"tabpanel",hidden:a!==o,id:"vertical-tabpanel-".concat(o),"aria-labelledby":"vertical-tab-".concat(o)},i),{},{style:{width:"100%"},children:a===o&&Object(n.jsx)("div",{style:{padding:"20px",width:"100%"},children:t})}))}function _a(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Ga=Object(D.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},root:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},titleCenter:{width:"100%",textAlign:"center",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",borderBottom:"2px dashed ".concat(e.palette.primary.main)},eyeText:{width:"100%",textAlign:"left",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",paddingTop:"15px"},multilineColor:{color:"#333",lineHeight:"1.5rem"}}})),Ha=i.a.forwardRef((function(e,t){return Object(n.jsx)(gt.a,Object(T.a)({direction:"up",ref:t},e))}));function qa(e){var t=Ga(),a=i.a.useContext(y),r=Object(l.a)(a,2),c=(r[0],r[1]),d=i.a.useState({formData:{}}),s=Object(l.a)(d,2),p=s[0],u=s[1],b=i.a.useState(!1),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(!1),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],D=i.a.useState(!1),L=Object(l.a)(D,2),N=L[0],R=L[1],W=i.a.useState(!1),M=Object(l.a)(W,2),z=M[0],G=M[1],H=i.a.useState(!1),q=Object(l.a)(H,2),Y=q[0],$=q[1],Q=i.a.useState(!1),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=i.a.useState(!1),ne=Object(l.a)(ae,2),oe=ne[0],ie=ne[1],re=i.a.useState(!1),ce=Object(l.a)(re,2),le=ce[0],de=ce[1],se=i.a.useState(!1),pe=Object(l.a)(se,2),ue=pe[0],be=pe[1],je=i.a.useState(0),ge=Object(l.a)(je,2),fe=ge[0],xe=ge[1],he=i.a.useState([]),me=Object(l.a)(he,2),Oe=me[0],ve=me[1],ke=i.a.useState(null),Ce=Object(l.a)(ke,2),ye=Ce[0],we=Ce[1],Se=i.a.useState(!1),Be=Object(l.a)(Se,2),Te=Be[0],De=Be[1],Le=i.a.useState(null),Pe=Object(l.a)(Le,2),Ie=Pe[0],Ne=Pe[1],Re=i.a.useState(null),We=Object(l.a)(Re,2),Ae=We[0],Me=We[1],Fe=i.a.useState([]),ze=Object(l.a)(Fe,2),Ee=ze[0],Ve=ze[1],_e=i.a.useState(null),Ge=Object(l.a)(_e,2),He=Ge[0],qe=Ge[1],Ye=i.a.useState(null),Ue=Object(l.a)(Ye,2),Ke=Ue[0],Xe=Ue[1],Je=i.a.useState([]),$e=Object(l.a)(Je,2),Qe=$e[0],nt=$e[1],it=function(){De(!1)},rt=function(){var e=Object(B.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wa.getEmailPreview(t.templateID,null,p.patientID);case 3:(a=e.sent)&&a.data&&a.data.result&&Me(Object(T.a)(Object(T.a)({},t),{},{html:a.data.result.content,subject:a.data.result.newSubject})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(B.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Aa.getSMSPreview(t.templateID,null,p.patientID);case 3:(a=e.sent)&&a.data&&a.data.result&&Xe(Object(T.a)(Object(T.a)({},t),{},{rawText:a.data.result.content})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){if(e.open){var t=[];e.patient?(u(Object(T.a)(Object(T.a)({},e.patient),{},{formData:e.patient.formData?JSON.parse(e.patient.formData):{}})),we(e.patient.formData?JSON.parse(e.patient.formData):{}),e.patient.history&&(e.patient.history.forEach((function(e){t.push(JSON.parse(e))})),mt(0))):u({formData:{},name:e.name||"",surname:e.surname||""}),ve(t.reverse()),lt(),st()}}),[e.patient,e.open]);var lt=function(){var e=Object(B.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wa.getAllTemplates();case 3:(t=e.sent)&&Ve(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=Object(B.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Aa.getAllTemplates();case 3:(t=e.sent)&&nt(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),pt=function(){e.handleClose(),xe(0),u({formData:{}}),$(!1),te(!1),ie(!1),be(!1),Me(null),Ne(null),Xe(null),qe(null),R(!1),O(!1),G(!1),w(!1)},ut=function(){var t=Object(B.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt()){t.next=3;break}return xe(0),t.abrupt("return");case 3:if(t.prev=3,be(!1),f(!0),p.formData=JSON.stringify(p.formData),!e.patient){t.next=15;break}return t.next=10,Sa.updatePatient({id:p._id,patient:p});case 10:a=t.sent,f(!1),"OK"===a.data.status&&(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{patientDialogDataChanged:!e.patientDialogDataChanged})})),pt()),t.next=20;break;case 15:return t.next=17,Sa.registerNewPatient({patient:p});case 17:n=t.sent,f(!1),"OK"===n.data.status?(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{patientDialogDataChanged:!e.patientDialogDataChanged})})),pt()):"FAILED"===n.data.status&&"Repeated Patient!"===n.data.error&&($(!0),be(!0),xe(0));case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),f(!1),console.error(t.t0);case 26:case"end":return t.stop()}}),t,null,[[3,22]])})));return function(){return t.apply(this,arguments)}}(),bt=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return De(!1),f(!0),t.prev=2,t.next=5,Sa.deletePatient(e.patient._id);case 5:f(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{patientDialogDataChanged:!e.patientDialogDataChanged})})),pt(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error(t.t0),f(!1);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),jt=function(){var e=!1;return p.patientID&&0!==p.patientID.trim().length||(e=!0,$(!0)),p.name&&0!==p.name.trim().length||(e=!0,te(!0)),p.surname&&0!==p.surname.trim().length||(e=!0,ie(!0)),p.birthDate&&10!==p.birthDate.length&&(de(!0),e=!0),!e},gt=function(e){return Bt()(e,"dd-mm-yyyy , HH:MM:ss")},ft=i.a.useState(0),xt=Object(l.a)(ft,2),ht=xt[0],mt=xt[1],Ot=function(){var e=Object(B.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),f(!0),e.next=5,Wa.sendManualEmail(Ae.templateID,p.email,null,p.patientID);case 5:w(!1),O(!0),f(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),w(!1),f(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),vt=function(){var e=Object(B.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),f(!0),e.next=5,Aa.sendManualSMS(Ke.templateID,p.mobileTel,null,p.patientID);case 5:G(!1),R(!0),f(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),G(!1),f(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{fullScreen:!0,open:e.open,onClose:pt,TransitionComponent:Ha,children:[Object(n.jsxs)(Ta.a,{className:t.appBar,style:ht>0&&Oe&&Oe.length>0?{backgroundColor:"#777"}:{},color:"secondary",children:[Object(n.jsxs)(Da.a,{children:[Object(n.jsx)(J.a,{edge:"start",color:"inherit",onClick:pt,"aria-label":"close",children:Object(n.jsx)(va.a,{})}),Object(n.jsx)(A.a,{variant:"h6",className:t.title,children:e.title}),Object(n.jsx)(P.a,{startIcon:Object(n.jsx)(Ra.a,{}),variant:"contained",color:"primary",onClick:ut,disabled:ht>0&&Oe&&Oe.length>0,children:e.saveButtonText})]}),Object(n.jsx)(K.a,{container:!0,direction:"column",alignItems:"center",justify:"center",children:Oe&&Oe.length>0&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{style:{marginTop:"-10px"},children:[Object(n.jsx)("span",{style:{color:"#fff",fontWeight:"500",fontSize:"1rem",marginRight:"10px"},children:"Version :"}),Object(n.jsxs)(Ze.a,{label:"Version",labelId:"version-label",id:"version-label",style:{color:"#fff",padding:"0px 10px"},value:ht,onChange:function(e){mt(e.target.value),0===e.target.value?u(Object(T.a)(Object(T.a)({},p),{},{formData:ye})):u(Object(T.a)(Object(T.a)({},p),{},{formData:Oe[e.target.value-1]}))},children:[Object(n.jsx)(et.a,{value:0,children:"".concat(gt(p.formData.timeStamp)," ( Current )")}),Oe.map((function(e,t){return Object(n.jsx)(et.a,{value:t+1,children:"".concat(gt(e.timeStamp)," ( History )")})}))]})]})})})})]}),Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(Pa.a,{orientation:"vertical",variant:"scrollable",value:fe,onChange:function(e,t){xe(t)},"aria-label":"Vertical tabs example",indicatorColor:"secondary",textColor:"secondary",className:t.tabs,children:[Object(n.jsx)(Ia.a,Object(T.a)({label:"Personal Details"},_a(0))),Object(n.jsx)(Ia.a,Object(T.a)({label:"History & Symptoms"},_a(1))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Notes From Consultation"},_a(2))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Recommendation"},_a(3))),e.patient&&Object(n.jsx)(Ia.a,Object(T.a)({label:"Send Emails (Manually)"},_a(4))),e.patient&&Object(n.jsx)(Ia.a,Object(T.a)({label:"Send SMS (Manually)"},_a(5)))]}),Object(n.jsx)(Va,{value:fe,index:0,children:Object(n.jsxs)(K.a,{container:!0,spacing:4,children:[Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{disabled:e.patient,name:"patientid",id:"patientid",label:"Patient ID",fullWidth:!0,required:!0,helperText:ue?"This PatientID is already assigned to another patient":"",error:Y,value:p.patientID||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{patientID:e.target.value})),$(!1)},autoComplete:"none",variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"firstname",id:"firstname",label:"First Name",fullWidth:!0,required:!0,error:ee,value:p.name||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{name:e.target.value})),te(!1)},autoComplete:"none",variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"surname",id:"surname",label:"Surname",fullWidth:!0,required:!0,error:oe,value:p.surname||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{surname:e.target.value})),ie(!1)},autoComplete:"none",variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsxs)(V.a,{fullWidth:!0,variant:"outlined",children:[Object(n.jsx)(_.a,{id:"gender-label",children:"Gender"}),Object(n.jsxs)(Ze.a,{label:"Gender",labelId:"gender-label",id:"gender-label",fullWidth:!0,style:{height:"90px"},value:p.gender||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{gender:e.target.value}))},children:[Object(n.jsx)(et.a,{value:"Male",children:"Male"}),Object(n.jsx)(et.a,{value:"Female",children:"Female"})]})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:8,style:{marginTop:"-20px"},children:Object(n.jsx)(ya,{error:le,value:p.birthDate||"",title:"DOB",dateChanged:function(e){u(Object(T.a)(Object(T.a)({},p),{},{birthDate:e})),de(!1)}})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"postcode",id:"postcode",label:"Postcode",fullWidth:!0,autoComplete:"none",value:p.postCode||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{postCode:e.target.value}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:8,children:Object(n.jsx)(I.a,{name:"address",id:"address",label:"Address",fullWidth:!0,autoComplete:"none",value:p.address||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{address:e.target.value}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"hometel",id:"hometel",label:"Home Tel",fullWidth:!0,autoComplete:"none",value:p.homeTel||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{homeTel:e.target.value}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"mobiletel",id:"mobiletel",label:"Mobile Tel",fullWidth:!0,autoComplete:"none",value:p.mobileTel||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{mobileTel:e.target.value}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(I.a,{name:"email",id:"email",label:"Email",fullWidth:!0,autoComplete:"none",value:p.email||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{email:e.target.value}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(I.a,{name:"occupation",id:"occupation",label:"Occupation",fullWidth:!0,autoComplete:"none",value:p.formData.occupation||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{occupation:e.target.value})}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(I.a,{name:"gpname",id:"gpname",label:"GP Name & Address",fullWidth:!0,autoComplete:"none",value:p.formData.gpname||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{gpname:e.target.value})}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(I.a,{name:"kincontact",id:"kincontact",label:"Next of Kin Contact",fullWidth:!0,autoComplete:"none",value:p.formData.kincontact||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{kincontact:e.target.value})}))},variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(I.a,{name:"prevsighttest",id:"prevsignttest",label:"Previous Sight Test",fullWidth:!0,autoComplete:"none",value:p.formData.prevsighttest||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{prevsighttest:e.target.value})}))},variant:"outlined"})}),e.patient&&Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(n.jsx)(P.a,{onClick:function(){return De(!0)},variant:"contained",fullWidth:!0,color:"primary",style:{backgroundColor:"#c70000",color:"#fff"},disabled:g,children:"Delete This Patient"})})]})}),Object(n.jsx)(Va,{value:fe,index:1,children:Object(n.jsxs)(K.a,{container:!0,spacing:2,children:[Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"cc",id:"cc",label:"C.C",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.cc||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{cc:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"prevmedicalhistory",id:"prevmedicalhistory",label:"Previous Medical History",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.prevmedicalhistory||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{prevmedicalhistory:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"prevocularhistory",id:"prevocularhistory",label:"Previous Ocular History",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.prevocularhistory||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{prevocularhistory:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"familyhistory",id:"familyhistory",label:"Family History",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.familyhistory||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{familyhistory:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"medications",id:"medications",label:"Medications",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.medications||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{medications:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"grafth",id:"grafth",label:"Graft H",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.grafth||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{grafth:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"allergies",id:"allregies",label:"Allergies",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.allergies||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{allergies:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"contactlenswearer",id:"contactlenswearer",label:"Contact Lens Wearer",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",placeholder:" Yes/No \n Soft/RGP/EW",value:p.formData.contactlenswearer||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{contactlenswearer:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"hobbies",id:"hobbies",label:"Lifestyle / Hobbies",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.hobbies||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{hobbies:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"vdu",id:"vdu",label:"VDU",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.vdu||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{vdu:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"othernotes",id:"othernotes",label:"Other Notes",fullWidth:!0,multiline:!0,rows:10,variant:"outlined",autoComplete:"none",value:p.formData.othernotes||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{othernotes:e.target.value})}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{name:"driver",id:"driver",label:"Driver",fullWidth:!0,multiline:!0,rows:3,variant:"outlined",autoComplete:"none",value:p.formData.driver||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{driver:e.target.value})}))}})})]})}),Object(n.jsx)(Va,{value:fe,index:2,children:Object(n.jsx)(K.a,{container:!0,spacing:2,children:Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{name:"notesfromconsultation",id:"notesfromconsultation",label:"Notes From Consultation",fullWidth:!0,multiline:!0,rows:25,variant:"outlined",autoComplete:"none",value:p.formData.notesfromconsultation||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{notesfromconsultation:e.target.value})}))}})})})}),Object(n.jsx)(Va,{value:fe,index:3,children:Object(n.jsx)(K.a,{container:!0,spacing:2,children:Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{name:"recommendation",id:"recommendation",label:"Recommendation",fullWidth:!0,multiline:!0,rows:25,variant:"outlined",autoComplete:"none",value:p.formData.recommendation||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{formData:Object(T.a)(Object(T.a)({},p.formData),{},{recommendation:e.target.value})}))}})})})}),e.patient&&Object(n.jsx)(Va,{value:fe,index:4,children:Object(n.jsxs)(K.a,{container:!0,spacing:2,direction:"column",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{fontSize:"1.2rem",color:"#777",fontWeight:"500",marginBottom:"0px"},children:"Here you can manually send emails (from templates) to the patients:"})}),Object(n.jsx)(K.a,{item:!0,style:{marginBottom:"10px"},children:Object(n.jsxs)(F.a,{severity:"info",children:["Emails will be sent to  ",Object(n.jsxs)("span",{style:{fontWeight:"500"},children:['"',p.email,'"']})]})}),Object(n.jsx)(K.a,{item:!0,xs:6,children:Object(n.jsxs)(V.a,{fullWidth:!0,variant:"outlined",className:t.formControl,children:[Object(n.jsx)(_.a,{id:"template-label-id",children:"Choose Your Template"}),Object(n.jsx)(Ze.a,{fullWidth:!0,label:"Choose Your Template",labelId:"template-label-id",id:"template-label",value:Ie,onChange:function(e){!function(e){Ne(e);var t=Ee.find((function(t){return t.templateID===e}));Me(t),rt(t),O(!1)}(e.target.value)},children:Ee.map((function(e,t){return Object(n.jsx)(et.a,{value:e.templateID,children:"".concat(e.templateID)})}))})]})}),Object(n.jsx)(K.a,{item:!0,children:Ae&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{fontWeight:"500",color:"#777",fontSize:"1rem",width:"100%",padding:"5px"},children:"Email Preview :"}),Object(n.jsx)(E.a,{elevation:4,style:{padding:"20px",marginBottom:"1px",backgroundColor:"#0083ba"},children:Object(n.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#fff",position:"relative"},children:["To: ",p.email,Object(n.jsxs)("div",{style:{position:"absolute",right:"5px",top:"-5px"},children:[!m&&Object(n.jsx)(P.a,{disabled:C||!p.email||p.email.length<3,onClick:Ot,startIcon:Object(n.jsx)(Fa.a,{}),variant:"contained",color:"primary",children:"Send Email"}),m&&Object(n.jsx)("div",{style:{fontWeight:"500",fontSize:"1rem",color:"#fff"},children:Object(n.jsxs)(K.a,{container:!0,spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:"Email Sent Successfully"}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Ea.a,{})})]})})]})]})}),Object(n.jsx)(E.a,{elevation:4,style:{padding:"10px",marginBottom:"1px",backgroundColor:"#e6f8ff"},children:Object(n.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#006b94",position:"relative"},children:[Object(n.jsx)("span",{children:"Subject:"})," ",Ae.subject]})}),Object(n.jsx)(E.a,{elevation:4,style:{padding:"20px"},children:Object(n.jsx)("div",{dangerouslySetInnerHTML:{__html:Ae.html}})})]})})]})}),e.patient&&Object(n.jsx)(Va,{value:fe,index:5,children:Object(n.jsxs)(K.a,{container:!0,spacing:2,direction:"column",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{fontSize:"1.2rem",color:"#777",fontWeight:"500",marginBottom:"0px"},children:"Here you can manually send sms (from templates) to the patients:"})}),Object(n.jsx)(K.a,{item:!0,style:{marginBottom:"10px"},children:Object(n.jsxs)(F.a,{severity:"info",children:["SMS will be sent to ",Object(n.jsxs)("span",{style:{fontWeight:"500"},children:['"',p.mobileTel,'"']})]})}),Object(n.jsx)(K.a,{item:!0,xs:6,children:Object(n.jsxs)(V.a,{fullWidth:!0,variant:"outlined",className:t.formControl,children:[Object(n.jsx)(_.a,{id:"template-label-id",children:"Choose Your Template"}),Object(n.jsx)(Ze.a,{fullWidth:!0,label:"Choose Your Template",labelId:"template-label-id",id:"template-label",value:He,onChange:function(e){!function(e){qe(e);var t=Qe.find((function(t){return t.templateID===e}));Xe(t),ct(t),R(!1)}(e.target.value)},children:Qe.map((function(e,t){return Object(n.jsx)(et.a,{value:e.templateID,children:"".concat(e.templateID)})}))})]})}),Object(n.jsx)(K.a,{item:!0,children:Ke&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{fontWeight:"500",color:"#777",fontSize:"1rem",width:"100%",padding:"5px"},children:"SMS Preview :"}),Object(n.jsx)(E.a,{elevation:4,style:{padding:"20px",marginBottom:"1px",backgroundColor:"#0083ba"},children:Object(n.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#fff",position:"relative"},children:["To:  ",p.mobileTel,Object(n.jsxs)("div",{style:{position:"absolute",right:"5px",top:"-5px"},children:[!N&&Object(n.jsx)(P.a,{disabled:z||!p.mobileTel||p.mobileTel.length<3,onClick:vt,startIcon:Object(n.jsx)(Fa.a,{}),variant:"contained",color:"primary",children:"Send SMS"}),N&&Object(n.jsx)("div",{style:{fontWeight:"500",fontSize:"1rem",color:"#fff"},children:Object(n.jsxs)(K.a,{container:!0,spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:"SMS Sent Successfully"}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Ea.a,{})})]})})]})]})}),Object(n.jsx)(E.a,{elevation:4,style:{padding:"20px"},children:Object(n.jsx)("div",{children:Object(n.jsx)(I.a,{name:"smspreview",id:"smspreview",disabled:!0,fullWidth:!0,multiline:!0,rows:20,value:Ke.rawText,InputProps:{classes:{input:t.multilineColor}}})})})]})})]})})]}),Object(n.jsx)(U.a,{className:t.backdrop,open:g,children:Object(n.jsx)(X.a,{color:"inherit"})}),Object(n.jsxs)(tt.a,{open:Te,onClose:it,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(at.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete Patient"}),Object(n.jsx)(ot.a,{children:Object(n.jsx)(La.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:"Are you sure you want to delete this patient?"})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(P.a,{onClick:it,color:"default",children:"Back"}),Object(n.jsx)(P.a,{onClick:bt,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this patient"})]})]})]})})})}Object(wa.a)();var Ya=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"600",fontSize:"1.2rem",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);function Ua(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function Ka(e){var t=Ya(),a=i.a.useContext(y),r=Object(l.a)(a,2),c=r[0],d=r[1],s=Object(o.useState)(!1),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(""),g=Object(l.a)(j,2),f=g[0],x=g[1],h=i.a.useState(!1),m=Object(l.a)(h,2),O=m[0],v=m[1],k=i.a.useState(null),C=Object(l.a)(k,2),w=C[0],D=C[1],L=i.a.useState([]),N=Object(l.a)(L,2),R=N[0],W=N[1],A=i.a.useState(""),M=Object(l.a)(A,2),F=M[0],z=M[1],E=i.a.useState(""),V=Object(l.a)(E,2),_=V[0],G=V[1],H=i.a.useState(""),q=Object(l.a)(H,2),Y=q[0],J=q[1],$=i.a.useState(""),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(""),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1],ie=i.a.useState(""),re=Object(l.a)(ie,2),ce=re[0],le=re[1],de=i.a.useState(""),se=Object(l.a)(de,2),pe=se[0],ue=se[1],be=i.a.useState(!1),je=Object(l.a)(be,2),ge=je[0],fe=je[1];Object(o.useEffect)((function(){e.open&&xe()}),[e.open,c.patientDialogDataChanged]);var xe=function(){var e=Object(B.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sa.getAllPatients();case 3:t=e.sent,W(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),he=function(){u||(x(""),v(!1),fe(!1),z(""),G(""),J(""),ue(""),ee(""),oe(""),le(""),D(null),e.handleClose(),b(!1))},me=function(){var e=!1;return(!f||f.trim().length<1)&&(v(!0),e=!0),pe&&pe.length>=1&&pe.length<10&&(fe(!0),e=!0),!e},Oe=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(me()){t.next=2;break}return t.abrupt("return");case 2:return b(!0),t.prev=3,t.next=6,Je.addNewBooking({bookingDate:e.date,bookingTime:e.time,fullname:f,phone:F,email:_,birthDate:pe,notes:Y,clinic:e.clinic,patientID:Z,prescriptionLeft:ne,prescriptionRight:ce});case 6:b(!1),d((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),he(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),b(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),ve=i.a.useState(!1),ke=Object(l.a)(ve,2),Ce=ke[0],ye=ke[1],we=i.a.useState(""),Se=Object(l.a)(we,2),Be=Se[0],Te=Se[1],De=i.a.useState(""),Le=Object(l.a)(De,2),Pe=Le[0],Ie=Le[1];return Object(o.useEffect)((function(){w?(x(w.fullname||""),ee(w.patientID||""),G(w.email||""),z(w.mobileTel||w.homeTel||""),ue(w.birthDate||null)):(x(""),ee(""),G(""),z(""),ue(null))}),[w]),Object(n.jsx)(i.a.Fragment,{children:e.date&&e.time&&Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{maxWidth:"md",open:e.open,onClose:he,PaperComponent:Ua,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(at.a,{id:"draggable-dialog-title",children:Object(n.jsx)("div",{style:{position:"absolute",left:"0px",top:"0px",width:"100%",backgroundColor:function(e){switch(e){case"Virtual Consultation":return _t;case"F2F Clinic":return Gt;case"Laser Theatre":return Ht;case"Lens Theatre":return qt;case"Post OP":return Yt;case"Optometry":return Ut;default:return"#777"}}(e.clinic),color:"#fff",padding:"15px 5px",textAlign:"center",fontSize:"1.5rem"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(fa.a,{style:{fontSize:"2.5rem"}})}),Object(n.jsx)(K.a,{item:!0,style:{marginTop:"-12px"},children:e.clinic})]})})}),Object(n.jsxs)(ot.a,{children:[Object(n.jsxs)("div",{style:{paddingTop:"50px",paddingBottom:"20px"},children:[Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Ae.a,{className:t.CalendarIcon})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{className:t.DateTimeLabel,children:[e.date," , ",e.time]})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(mt.a,{fullWidth:!0,autoComplete:"none",value:w,onChange:function(e,t){if("string"===typeof t)setTimeout((function(){var e=t.split(" ");console.log(e),e.length>=1&&Te(e[0]),e.length>=2&&Ie(e[1]),ye(!0)}));else if(t&&t.inputValue){var a=t.inputValue.split(" ");console.log(a),a.length>=1&&Te(a[0]),a.length>=2&&Ie(a[1]),ye(!0)}else D(t)},filterOptions:function(e,t){var a=function(e,t){var a=t.inputValue;return a&&a.length>=1?Object(Ba.a)(e,a,{keys:["fullname"]}):Object(Ba.a)(e,"$$$$",{keys:["fullname"]})}(e,t);return""!==t.inputValue&&a.push({inputValue:t.inputValue,fullname:'Add "'.concat(t.inputValue,'"')}),a},id:"fullname",options:R,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.fullname},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,renderOption:function(e){return e.fullname},freeSolo:!0,renderInput:function(e){return Object(n.jsx)(I.a,Object(T.a)(Object(T.a)({},e),{},{onBlur:function(e){D(Object(T.a)(Object(T.a)({},w),{},{fullname:e.target.value}))},autoComplete:"none",autoFocus:!0,error:O,fullWidth:!0,label:"Full Name",required:!0}))}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Patient ID",value:Z,onChange:function(e){ee(e.target.value)},name:"patientid",id:"patientid-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Telephone",value:F,onChange:function(e){z(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Email",value:_,onChange:function(e){G(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(ya,{error:ge,title:"Date of Birth",value:pe,dateChanged:function(e){ue(e)}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Prescription (LEFT)",value:ne,onChange:function(e){oe(e.target.value)},name:"pleft",id:"pleft-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Prescription (RIGHT)",value:ce,onChange:function(e){le(e.target.value)},name:"pright",id:"pright-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Notes",value:Y,onChange:function(e){J(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})})]}),Object(n.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"}})]}),Object(n.jsx)(U.a,{className:t.backdrop,open:u,children:Object(n.jsx)(X.a,{color:"inherit"})})]}),Object(n.jsx)(dt.a,{children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:he,style:{width:"100px"},disabled:u,children:"back"})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:Oe,variant:"contained",color:"secondary",disabled:u,children:"Book Appointment"})})]})}),Object(n.jsx)(qa,{patient:null,open:Ce,handleClose:function(){ye(!1),Te(""),Ie("")},title:"Add New Patient",saveButtonText:"Save",name:Be,surname:Pe})]})})})}var Xa=a(320),Ja=a.n(Xa),$a=a(145),Qa=a.n($a),Za=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},timeControl:{marginTop:"20px"}}}));function en(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}var tn=["08:00 AM","08:15 AM","08:30 AM","08:45 AM","09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM","06:00 PM","06:15 PM","06:30 PM","06:45 PM","07:00 PM","07:15 PM","07:30 PM","07:45 PM"];function an(e){Za();var t=i.a.useContext(y),a=Object(l.a)(t,2),r=(a[0],a[1],i.a.useState("")),c=Object(l.a)(r,2),d=c[0],s=c[1],p=i.a.useState(""),u=Object(l.a)(p,2),b=u[0],j=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],h=f[1];Object(o.useEffect)((function(){s(e.date),j(e.time)}),[e.date,e.time,e.open]);var m=function(){h(!1),e.handleClose()};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{maxWidth:"sm",open:e.open,onClose:m,PaperComponent:en,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(at.a,{id:"draggable-dialog-title",children:[Object(n.jsxs)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qa.a,{style:{color:"#03b5f2",fontSize:"3rem"}})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("div",{style:{color:"#03b5f2",paddingBottom:"10px",fontWeight:"800"},children:[" ","Change Date and Time"," "]})})]}),Object(n.jsx)(nt.a,{})]}),Object(n.jsx)(ot.a,{children:Object(n.jsxs)(K.a,{container:!0,spacing:1,children:[Object(n.jsx)(K.a,{item:!0,xs:8,children:Object(n.jsx)(ya,{error:x,title:"Appointment Date",value:d,dateChanged:function(e){s(e),h(!1)}})}),Object(n.jsx)(K.a,{item:!0,xs:4,children:Object(n.jsxs)("div",{style:{position:"relative",border:"1px solid ".concat("#ddd"),borderRadius:"10px",padding:"20px",paddingBottom:"20px",marginTop:"20px"},children:[Object(n.jsx)("div",{style:{position:"absolute",top:"-15px",left:"15px",backgroundColor:"#fff",color:"#555",padding:"5px",paddingLeft:"10px",paddingRight:"10px"},children:"Appointment Time"}),Object(n.jsx)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2,children:Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsxs)(V.a,{fullWidth:!0,children:[Object(n.jsx)(_.a,{id:"time-label",children:"Time"}),Object(n.jsx)(Ze.a,{labelId:"time-label",id:"time-select",value:b,onChange:function(e){j(e.target.value)},children:tn.map((function(e){return Object(n.jsx)(et.a,{value:e,children:e})}))})]})})})]})})]})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(P.a,{onClick:m,children:"cancel"}),Object(n.jsx)(P.a,{color:"primary",onClick:function(){!d||d.length<10?h(!0):e.handleOK(d,b)},variant:"contained",style:{width:"100px"},children:"OK"})]})]})})})}var nn=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"600",fontSize:"1.2rem",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},BoxDisabled:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",borderColor:"#ddd",cursor:"not-allowed",color:"#ddd",transition:"all 0.2s ease"},BoxVC:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:_t,color:_t,transition:"all 0.2s ease","&:hover":{backgroundColor:_t,color:"#fff"}},BoxF2F:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Gt,color:Gt,transition:"all 0.2s ease","&:hover":{backgroundColor:Gt,color:"#fff"}},BoxLaser:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ht,color:Ht,transition:"all 0.2s ease","&:hover":{backgroundColor:Ht,color:"#fff"}},BoxCataract:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:qt,color:qt,transition:"all 0.2s ease","&:hover":{backgroundColor:qt,color:"#fff"}},BoxPostOP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Yt,color:Yt,transition:"all 0.2s ease","&:hover":{backgroundColor:Yt,color:"#fff"}},BoxOptometry:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ut,color:Ut,transition:"all 0.2s ease","&:hover":{backgroundColor:Ut,color:"#fff"}},BoxGynae:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Ft,color:Ft,transition:"all 0.2s ease","&:hover":{backgroundColor:Ft,color:"#fff"}},BoxGP:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:zt,color:zt,transition:"all 0.2s ease","&:hover":{backgroundColor:zt,color:"#fff"}},BoxSTD:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid",fontSize:"1.2rem",fontWeight:"500",textAlign:"center",cursor:"pointer",borderColor:Et,color:Et,transition:"all 0.2s ease","&:hover":{backgroundColor:Et,color:"#fff"}}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);function on(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function rn(e){var t=nn(),a=i.a.useContext(y),o=Object(l.a)(a,2),r=(o[0],o[1],function(){e.handleClose()}),c=function(t){e.clinicClicked(t)};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{maxWidth:"xs",open:e.open,onClose:r,PaperComponent:on,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(at.a,{id:"draggable-dialog-title",children:[Object(n.jsx)(K.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",children:Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("div",{style:{color:"#f50057",paddingBottom:"10px",fontWeight:"800"},children:[" ","Change Clinic"," "]})})}),Object(n.jsx)(nt.a,{})]}),Object(n.jsx)(ot.a,{children:Object(n.jsxs)("div",{style:{height:"420px"},children:[Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"0px"},children:Object(n.jsx)("div",{className:t.BoxVC,onClick:function(){return c("Virtual Consultation")},children:"Virtual Consultation"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxF2F,onClick:function(){return c("F2F Clinic")},children:"F2F Clinic"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxLaser,onClick:function(){return c("Laser Theatre")},children:"Laser Theatre"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxCataract,onClick:function(){return c("Lens Theatre")},children:"Lens Theatre"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxPostOP,onClick:function(){return c("Post OP")},children:"Post OP"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.BoxOptometry,onClick:function(){return c("Optometry")},children:"Optometry"})})]}),Object(n.jsx)("div",{style:{position:"absolute",bottom:"0px",right:"5px"},children:Object(n.jsx)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1,children:Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:r,style:{width:"100px"},children:"close"})})})})]})})]})})})}var cn=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",paddingRight:"10px",paddingLeft:"10px"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",paddingRight:"15px",paddingLeft:"10px"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",paddingRight:"40px",paddingLeft:"10px"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"90px",paddingLeft:"10px"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",paddingRight:"68px",paddingLeft:"10px"},archiveButton:{},smartMatchButton:{backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",marginRight:"10px"},infoTitle:{fontWeight:"400"},infoData:{paddingLeft:"10px",fontWeight:"800"},matchButton:{marginTop:"30px",marginBottom:"20px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#2f942e","&:hover":{background:"green",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},resendFilesButton:{marginTop:"5px",marginBottom:"5px",backgroundColor:"#3792ad","&:hover":{background:"#2f798f",color:"#fff"},textDecoration:"none !important",padding:"10px",paddingLeft:"50px",paddingRight:"50px"},cancelButton:{marginBottom:"10px",textDecoration:"none !important",padding:"10px",paddingLeft:"90px",paddingRight:"90px"},CalendarIcon:{color:e.palette.primary.main},DateTimeLabel:{fontWeight:"600",fontSize:"1.2rem",color:e.palette.primary.main},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},PriceLabelPaid:{color:e.palette.primary.main,fontWeight:"600"},PriceLabelNotPaid:{color:e.palette.secondary.main,fontWeight:"600"},SearchIcon:{fontSize:"2rem",color:e.palette.primary.main}}}));Object(O.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#cedbce"},bar:{borderRadius:5,backgroundColor:"#2f942e"}}}))($e.a);function ln(e){return Object(n.jsx)(jt.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(E.a,Object(T.a)({},e))})}function dn(e){var t,a,r=cn(),c=i.a.useContext(y),d=Object(l.a)(c,2),s=(d[0],d[1]),p=Object(o.useState)(!1),u=Object(l.a)(p,2),b=u[0],j=u[1],g=i.a.useState(!1),f=Object(l.a)(g,2),x=f[0],h=f[1],m=i.a.useState(""),O=Object(l.a)(m,2),v=O[0],k=O[1],C=i.a.useState(""),w=Object(l.a)(C,2),D=w[0],L=w[1],N=i.a.useState(!1),R=Object(l.a)(N,2),W=R[0],A=R[1],M=i.a.useState(""),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState(""),_=Object(l.a)(V,2),G=_[0],H=_[1],q=i.a.useState(""),Y=Object(l.a)(q,2),$=Y[0],Q=Y[1],Z=i.a.useState(""),ee=Object(l.a)(Z,2),te=ee[0],ae=ee[1],ne=i.a.useState(""),oe=Object(l.a)(ne,2),ie=oe[0],re=oe[1],ce=i.a.useState(""),le=Object(l.a)(ce,2),de=le[0],se=le[1],pe=i.a.useState(""),ue=Object(l.a)(pe,2),be=ue[0],je=ue[1],ge=i.a.useState(!1),fe=Object(l.a)(ge,2),xe=fe[0],he=fe[1],me=i.a.useState(!1),ve=Object(l.a)(me,2),ke=ve[0],Ce=ve[1],ye=i.a.useState(!1),we=Object(l.a)(ye,2),Se=we[0],Be=we[1],Te=i.a.useState(""),De=Object(l.a)(Te,2),Le=De[0],Pe=De[1],Ie=i.a.useState(""),Ne=Object(l.a)(Ie,2),Re=Ne[0],We=Ne[1],Me=i.a.useState(null),Fe=Object(l.a)(Me,2),ze=Fe[0],Ee=Fe[1],Ve=i.a.useState(!1),_e=Object(l.a)(Ve,2),Ge=_e[0],He=_e[1],qe=function(){Ce(!1)};i.a.useEffect((function(){e.booking&&e.open&&(L(e.booking.fullname),E(e.booking.phone),H(e.booking.email),je(e.booking.birthDate),Q(e.booking.notes),Pe(e.date),We(e.time),ae(e.booking.patientID),re(e.booking.prescriptionLeft),se(e.booking.prescriptionRight),k(e.clinic),Ye())}),[e.open,e.booking]);var Ye=function(){var t=Object(B.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Ee(null),!(e.booking.patientID&&e.booking.patientID.length>0)){t.next=7;break}return t.next=5,Sa.getPatientByPatientId(e.booking.patientID);case 5:(a=t.sent)&&a.data&&(n=a.data,Ee(n));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),Ue=function(){b||(L(""),A(!1),he(!1),E(""),H(""),Q(""),je(""),ae(""),re(""),se(""),k(""),Ee(null),e.handleClose(),j(!1))},Ke=function(){var e=!1;return(!D||D.trim().length<1)&&(A(!0),e=!0),be&&be.length>=1&&be.length<10&&(he(!0),e=!0),!e},Xe=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ce(!1),j(!0),t.prev=2,t.next=5,Je.deleteBooking(e.booking._id);case 5:j(!1),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ue(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error(t.t0),j(!1);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),$e=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ke()){t.next=2;break}return t.abrupt("return");case 2:return j(!0),t.prev=3,t.next=6,Je.updateBooking({bookingId:e.booking._id,bookingDate:Le,bookingTime:Re,fullname:D,phone:z,email:G,birthDate:be,notes:$,clinic:v,patientID:te,prescriptionLeft:ie,prescriptionRight:de});case 6:j(!1),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ue(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),Ze=function(){var e=Object(B.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ke()){e.next=2;break}return e.abrupt("return");case 2:return j(!0),e.prev=3,e.next=6,Je.addNewBooking({bookingDate:Le,bookingTime:Re,fullname:D,phone:z,email:G,birthDate:be,notes:$,clinic:v,patientID:te,prescriptionLeft:ie,prescriptionRight:de});case 6:j(!1),s((function(e){return Object(T.a)(Object(T.a)({},e),{},{bookingDialogDataChanged:!e.bookingDialogDataChanged})})),Ue(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),j(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(i.a.Fragment,{children:[e.date&&e.time&&Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsxs)(tt.a,{maxWidth:"md",open:e.open,onClose:Ue,PaperComponent:ln,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(at.a,{id:"draggable-dialog-title",children:Object(n.jsx)("div",{style:{position:"absolute",left:"0px",top:"0px",width:"100%",backgroundColor:function(e){switch(e){case"Virtual Consultation":return _t;case"F2F Clinic":return Gt;case"Laser Theatre":return Ht;case"Lens Theatre":return qt;case"Post OP":return Yt;case"Optometry":return Ut;default:return"#777"}}(v),color:"#fff",padding:"15px 5px",textAlign:"center",fontSize:"1.5rem"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"Change Clinic",children:Object(n.jsx)(Ja.a,{style:{fontSize:"2rem",cursor:"pointer"},onClick:function(){h(!0)}})})}),Object(n.jsx)(K.a,{item:!0,style:{marginTop:"-10px"},children:v})]})})}),Object(n.jsxs)(ot.a,{children:[Object(n.jsxs)("div",{style:{paddingTop:"50px",paddingBottom:"20px"},children:[Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"stretch",spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,style:{cursor:"pointer"},onClick:function(){return Be(!0)},children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Ae.a,{className:r.CalendarIcon})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{className:r.DateTimeLabel,children:[Le," , ",Re]})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,autoFocus:!0,error:W,label:"Full Name",value:D,required:!0,onChange:function(e){L(e.target.value),A(!1)},name:"fullname",id:"fullname-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsxs)(K.a,{container:!0,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:10,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Patient ID",value:te,onChange:function(e){ae(e.target.value)},name:"patientid",id:"patientid-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:2,children:ze&&Object(n.jsx)(Qe.a,{title:"Show Patient Detail",children:Object(n.jsx)(J.a,{onClick:function(){He(!0)},children:Object(n.jsx)(Oe.a,{className:r.SearchIcon})})})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Telephone",value:z,onChange:function(e){E(e.target.value)},name:"phone",id:"phone-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Email",value:G,onChange:function(e){H(e.target.value)},name:"email",id:"email-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(ya,{error:xe,title:"Date of Birth",value:be,dateChanged:function(e){je(e)}})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Prescription (LEFT)",value:ie,onChange:function(e){re(e.target.value)},name:"pleft",id:"pleft-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Prescription (RIGHT)",value:de,onChange:function(e){se(e.target.value)},name:"pright",id:"pright-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{fullWidth:!0,label:"Notes",value:$,onChange:function(e){Q(e.target.value)},name:"notes",id:"notes-id",autoComplete:"none"})}),Object(n.jsx)(K.a,{item:!0,xs:12,style:{marginTop:"20px"},children:Object(n.jsx)(P.a,{onClick:function(){return Ce(!0)},variant:"contained",fullWidth:!0,color:"primary",style:{backgroundColor:"#c70000",color:"#fff"},disabled:b,children:"Delete Appointment"})})]}),Object(n.jsx)("div",{style:{position:"absolute",bottom:"20px",right:"20px"}})]}),Object(n.jsx)(U.a,{className:r.backdrop,open:b,children:Object(n.jsx)(X.a,{color:"inherit"})})]}),Object(n.jsx)(dt.a,{children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:Ue,style:{width:"100px"},disabled:b,children:"back"})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:$e,variant:"contained",color:"primary",style:{backgroundColor:"#ff7200",color:"#fff"},disabled:b,children:"Save Changes"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(n.jsx)(P.a,{onClick:Ze,variant:"contained",color:"secondary",style:{width:"400px"},disabled:b,children:"Save As a new booking"})})})]})}),Object(n.jsxs)(tt.a,{open:ke,onClose:qe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(at.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete Appointment"}),Object(n.jsx)(ot.a,{children:Object(n.jsx)(La.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:"Are you sure you want to delete this appointment?"})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(P.a,{onClick:qe,color:"default",children:"Back"}),Object(n.jsx)(P.a,{onClick:Xe,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this appointment"})]})]})]}),Object(n.jsx)(an,{open:Se,handleClose:function(){Be(!1)},handleOK:function(e,t){Pe(e),We(t),Be(!1)},date:Le,time:Re})]}),Object(n.jsx)(rn,{open:x,handleClose:function(){h(!1)},clinicClicked:function(e){k(e),h(!1)}}),ze&&Object(n.jsx)(qa,{patient:ze,open:Ge,handleClose:function(){He(!1)},title:"".concat(null===(t=ze.name)||void 0===t?void 0:t.toUpperCase()," ").concat(null===(a=ze.surname)||void 0===a?void 0:a.toUpperCase()),saveButtonText:"Save Changes"})]})}var sn=Object(D.a)((function(e){return{Container:{width:"100%",height:"50px",position:"relative",backgroundColor:"#fff",display:"flex",alignItems:"flex-start",justifyItems:"flex-start",paddingLeft:"10px"},ContainerPast:{width:"100%",paddingTop:"50px",position:"relative",backgroundColor:"#fafafa"},DayLabel:{position:"absolute",top:"5px",right:"5px",color:"#555",fontSize:"1rem"},DayLabelDisabled:{position:"absolute",top:"5px",right:"5px",color:"#ddd",fontSize:"1rem"},LoadingProgress:{position:"absolute",top:"10%",left:"40%"},BookingCountGauge:{position:"absolute",bottom:"5%",left:"8%",width:"85%",height:"8%"},bookingBox:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#ebedf7",color:"#3f51b5",boxShadow:"2px 4px #fafafa","&:hover":{background:"#3f51b5",color:"#ebedf7"}},bookingBoxNew:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"6px 10px",maxWidth:"150px",overflowX:"hidden",border:"1px solid #ddd",color:"#ccc",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",boxShadow:"2px 4px #fafafa",transition:"all 0.5s ease",borderRadius:"4px","&:hover":{background:"#fff",color:e.palette.secondary.main,borderColor:e.palette.secondary.main}},bookingBoxVC:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:_t,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxF2F:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:Gt,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxLaser:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:Ht,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxCataract:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:qt,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxPostOP:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:Yt,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxOptometry:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"200px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:Ut,color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxHidden:{display:"none",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#fff",color:"#fff",boxShadow:"2px 4px #fafafa","&:hover":{color:"#fafafa"}},bookingBoxPositive:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#d40b0b",color:"#fff2f2",boxShadow:"2px 4px #fafafa","&:hover":{background:"#bf0000",color:"#fff"}},bookingBoxReportSent:{display:"flex",marginRight:"10px",marginTop:"5px",padding:"7px",maxWidth:"150px",overflowX:"hidden",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:"#009900",color:"#eee",boxShadow:"2px 4px #fafafa","&:hover":{background:"#006e00",color:"#fafafa"}},BookingBorderPCR:{border:"4px solid",borderColor:Mt},BookingBorderGynae:{border:"4px solid",borderColor:Ft},BookingBorderGP:{border:"4px solid",borderColor:zt},BookingBorderSTD:{border:"4px solid",borderColor:Et},BookingBorderBlood:{border:"4px solid",borderColor:Vt}}})),pn=function(e){e.key;var t=e.date,a=e.time,r=sn(),c=i.a.useContext(y),d=Object(l.a)(c,2),s=d[0],p=d[1],u=i.a.useState(null),b=Object(l.a)(u,2),j=b[0],g=b[1],f=i.a.useState(null),x=Object(l.a)(f,2),h=x[0],m=x[1],O=i.a.useState(null),v=Object(l.a)(O,2),k=v[0],C=v[1],w=i.a.useState(!0),D=Object(l.a)(w,2),L=(D[0],D[1],i.a.useState(!1)),P=Object(l.a)(L,2),I=(P[0],P[1]),N=i.a.useState(!1),R=Object(l.a)(N,2),W=R[0],A=R[1],M=i.a.useState(!1),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState(!1),_=Object(l.a)(V,2),G=_[0],H=_[1],q=i.a.useState(""),Y=Object(l.a)(q,2),U=Y[0],K=Y[1];Object(o.useEffect)((function(){var e=Bt()(new Date,"yyyy-mm-dd");I(t<e)}),[t]),Object(o.useEffect)((function(){if(j)if(s.dayViewCalFilter&&s.dayViewCalFilter.trim().length>0){var e=s.dayViewCalFilter.trim().toUpperCase();m(j.filter((function(t){var a;return(null===(a=t.fullname)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))>=0})))}else m(Object(Ue.a)(j))}),[s.dayViewCalFilter,j]),Object(o.useEffect)((function(){var e=function(){var e=Object(B.a)(S.a.mark((function e(){var n,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.length<=0||!a||a.length<=0)){e.next=2;break}return e.abrupt("return");case 2:return g(null),i=null===(n=s.AdminCalendarCache)||void 0===n||null===(o=n.find((function(e){return"getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(a)})))||void 0===o?void 0:o.res,e.next=7,Je.getAllBookingsByDateStrandTime(t,a);case 7:i=e.sent,p((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[].concat(Object(Ue.a)(e.AdminCalendarCache),[{method:"getBookingsByDateStrandTime",query:"".concat(t).concat(a),res:i}])})}));case 9:"OK"===i.data.status&&g(i.data.bookings);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(W||z)&&(p((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsByDateStrandTime"===e.method&&e.query==="".concat(t).concat(a))}))})})),p((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStrandTime"===e.method&&e.query==="".concat(t).concat(a))}))})})),p((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:e.AdminCalendarCache.filter((function(e){return!("getBookingsCountByDateStr"===e.method&&e.query===t)}))})}))),e()}),[t,a,s.bookingDialogDataChanged]);var J,$=function(e){switch(e){case"Virtual Consultation":return r.bookingBoxVC;case"F2F Clinic":return r.bookingBoxF2F;case"Laser Theatre":return r.bookingBoxLaser;case"Lens Theatre":return r.bookingBoxCataract;case"Post OP":return r.bookingBoxPostOP;case"Optometry":return r.bookingBoxOptometry;default:return r.bookingBoxHidden}},Q=function(){E(!0)};return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{className:r.Container,children:(J=h,null===J?Object(n.jsx)("div",{className:r.LoadingProgress,children:Object(n.jsx)(X.a,{disableShrink:!0})}):J.length>=0?Object(n.jsxs)(i.a.Fragment,{children:[J.map((function(e){return s.selectedClinics.findIndex((function(t){return t===e.clinic}))>=0&&Object(n.jsx)("div",{style:e.tr?{borderTop:"5px solid #d00fd6"}:{},className:Object(Z.a)($(e.clinic)),onClick:function(t){return function(e,t){C(t),A(!0)}(0,e)},children:"".concat(e.fullname).substring(0,30)})})),Object(n.jsxs)("div",{className:r.bookingBoxNew,onClick:Q,children:[" ","+ Add New Booking"]})]}):void 0)}),Object(n.jsx)(dn,{booking:k,open:W,date:t,time:a,clinic:null===k||void 0===k?void 0:k.clinic,handleClose:function(){A(!1)}}),Object(n.jsx)(ma,{date:t,time:a,open:z,handleClose:function(){E(!1)},clinicClicked:function(e){K(e),H(!0)}}),Object(n.jsx)(Ka,{date:t,time:a,open:G,clinic:U,handleClose:function(){H(!1),E(!1)}})]})},un=["08:00 AM","08:15 AM","08:30 AM","08:45 AM","09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM","06:00 PM","06:15 PM","06:30 PM","06:45 PM","07:00 PM","07:15 PM","07:30 PM","07:45 PM"],bn=Object(D.a)((function(e){return{table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse",overflowY:"auto"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"12%"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",height:"50px",width:"84%"},titleLabel:{paddingBottom:"17px",paddingTop:"17px",color:"#777",fontSize:"16px"},titleLabelToday:{paddingBottom:"17px",paddingTop:"17px",color:"#fff",backgroundColor:"#1a73e8",fontSize:"16px"}}})),jn=function(e){var t=e.date,a=bn();return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{overflowY:"scroll",height:"60px"},children:Object(n.jsx)("table",{className:a.table,children:Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{style:{width:"7%"}}),Object(n.jsx)("th",{style:{width:"84%"},children:Object(n.jsx)("div",{className:Bt()(new Date,"yyyy-mm-dd")===Bt()(t,"yyyy-mm-dd")?a.titleLabelToday:a.titleLabel,children:Bt()(t,"dddd")})})]})})})}),Object(n.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object(n.jsx)("table",{className:a.table,children:Object(n.jsx)("tbody",{children:un.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{width:"7%"},children:e}),Object(n.jsx)("td",{className:a.td,children:Object(n.jsx)(pn,{date:Bt()(t,"yyyy-mm-dd"),time:e},"".concat(Bt()(t,"yyyy-mm-dd"),"-").concat(e))})]})}))})})})]})},gn=[{clinic:"Virtual Consultation",color:_t},{clinic:"F2F Clinic",color:Gt},{clinic:"Laser Theatre",color:Ht},{clinic:"Lens Theatre",color:qt},{clinic:"Post OP",color:Yt},{clinic:"Optometry",color:Ut}],fn=["January","February","March","April","May","June","July","August","September","October","November","December"],xn=Object(D.a)((function(e){return{title:{textAlign:"center",fontSize:"24px",fontColor:"#333"}}}));function hn(){var e=xn(),t=i.a.useContext(y),a=Object(l.a)(t,2),r=a[0],c=a[1],d=i.a.useState((new Date).getMonth()+1),s=Object(l.a)(d,2),p=s[0],u=s[1],b=i.a.useState((new Date).getFullYear()),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(new Date),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(new Date),k=Object(l.a)(v,2),C=k[0],w=k[1],S=i.a.useState([]),B=Object(l.a)(S,2),D=B[0],L=B[1],N=i.a.useState("month"),R=Object(l.a)(N,2),W=R[0],A=R[1],M=i.a.useState("month"),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState(""),_=Object(l.a)(V,2),G=_[0],q=_[1],Y=function(){q(""),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{dayViewCalFilter:""})}))};Object(o.useEffect)((function(){var e=new Date,t=e.getDay(),a=new Date(e.getTime()-864e5*t);return w(a),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{selectedClinics:gn.map((function(e){return e.clinic}))})})),function(){c((function(e){return Object(T.a)(Object(T.a)({},e),{},{AdminCalendarCache:[]})})),Y()}}),[]),Object(o.useEffect)((function(){for(var e=[],t=0;t<7;t++)e.push(new Date(C.getTime()+864e5*t));L(e)}),[C]);var U,X=function(e,t){var a=new Date(t),n=a.getDay();w(new Date(a.getTime()-864e5*n)),O(a),u(a.getMonth()+1),f(a.getFullYear()),E("day"),A("day")};return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("div",{style:{marginBottom:"10px"},children:Object(n.jsx)(K.a,{container:!0,spacing:1,children:gn.map((function(e){var t;return Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:(null===(t=r.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e.clinic})))>=0?{border:"1px solid ".concat(e.color),backgroundColor:"".concat(e.color),color:"#fff",fontSize:"0.85rem",fontWeight:"500",padding:"5px",width:"150px",textAlign:"center",cursor:"pointer",borderRadius:"4px"}:{border:"1px solid ".concat(e.color),color:"".concat(e.color),fontSize:"0.85rem",fontWeight:"500",padding:"5px",width:"150px",textAlign:"center",cursor:"pointer",borderRadius:"4px"},onClick:function(){return function(e){var t;(null===(t=r.selectedClinics)||void 0===t?void 0:t.findIndex((function(t){return t===e})))>=0?c((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:t.selectedClinics.filter((function(t){return t!==e}))})})):c((function(t){return Object(T.a)(Object(T.a)({},t),{},{selectedClinics:[].concat(Object(Ue.a)(t.selectedClinics),[e])})}))}(e.clinic)},children:e.clinic})})}))})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:"10px",marginTop:"0px"},children:[Object(n.jsx)(K.a,{item:!0,md:3,children:Object(n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:"10px"},children:[Object(n.jsx)(Qe.a,{title:"Previuos ".concat(W),placement:"bottom-start",children:Object(n.jsx)(J.a,{color:"default","aria-label":"prev",onClick:function(e){if("month"===W){1===p&&f(g-1);var t=1===p?12:p-1;u(t);var a=new Date(g,t-1,1,0,0,0,0);O(a);var n=a.getDay();w(new Date(a.getTime()-864e5*n))}else if("week"===W){var o=new Date(C.getTime()-6048e5);w(o),O(o),u(o.getMonth()+1),f(o.getFullYear())}else if("day"===W){var i=new Date(m.getTime()-864e5);O(i);var r=i.getDay();w(new Date(i.getTime()-864e5*r)),u(i.getMonth()+1),f(i.getFullYear())}},children:Object(n.jsx)(ca.a,{style:{fontSize:"2rem"}})})}),Object(n.jsx)(Qe.a,{title:"Next ".concat(W),placement:"bottom-end",children:Object(n.jsx)(J.a,{color:"default","aria-label":"next",onClick:function(e){if("month"===W){12===p&&f(g+1);var t=12===p?1:p+1;u(t);var a=new Date(g,t-1,1,0,0,0,0);O(a);var n=a.getDay();w(new Date(a.getTime()-864e5*n))}else if("week"===W){var o=new Date(C.getTime()+6048e5);w(o),O(o),u(o.getMonth()+1),f(o.getFullYear())}else if("day"===W){var i=new Date(m.getTime()+864e5);O(i);var r=i.getDay();w(new Date(i.getTime()-864e5*r)),u(i.getMonth()+1),f(i.getFullYear())}},children:Object(n.jsx)(da.a,{style:{fontSize:"2rem"}})})}),Object(n.jsx)(P.a,{style:{marginTop:"11px",marginLeft:"10px"},onClick:function(e){var t=new Date,a=t.getDay();w(new Date(t.getTime()-864e5*a)),O(t),u(t.getMonth()+1),f(t.getFullYear())},variant:"outlined",children:" Today "})]})}),Object(n.jsx)(K.a,{item:!0,md:6,children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-end",spacing:3,children:[Object(n.jsx)(K.a,{item:!0,children:function(t){if("month"===t)return Object(n.jsxs)("span",{className:e.title,children:[" ","".concat(fn[p-1]," ").concat(g)," "]});if("week"===t){var a=new Date(C.getTime()+5184e5),o="";return o=a.getMonth()===C.getMonth()?Bt()(a,"d"):Bt()(a,"mmm d"),Object(n.jsxs)("span",{className:e.title,children:[" ","".concat(Bt()(C,"mmm d")," - ").concat(o,", ").concat(g)," "]})}return"day"===t?Object(n.jsxs)("span",{className:e.title,children:[" ","".concat(Bt()(m,"mmmm d, yyyy"))," "]}):void 0}(W)}),"day"===W&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(I.a,{variant:"standard",style:{marginBottom:"5px"},value:G,onChange:function(e){q(e.target.value),c((function(t){var a,n;return Object(T.a)(Object(T.a)({},t),{},{dayViewCalFilter:null===(a=e.target.value)||void 0===a||null===(n=a.trim())||void 0===n?void 0:n.toUpperCase()})}))},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off",InputProps:{endAdornment:Object(n.jsx)(H.a,{position:"end",children:Object(n.jsx)(Qe.a,{title:"Clear",children:Object(n.jsx)(J.a,{"aria-label":"remove filter",onClick:function(){return Y()},onMouseDown:function(){return Y()},children:Object(n.jsx)(va.a,{})})})})}})})]})}),Object(n.jsx)(K.a,{item:!0,md:3,children:Object(n.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",paddingRight:"10px"},children:Object(n.jsxs)(ia.a,{value:z,exclusive:!0,onChange:function(e,t){t&&t.length&&(E(t),A(t))},"aria-label":"select view mode",children:[Object(n.jsx)(oa.a,{style:"month"===z?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"month","aria-label":"month view",children:"month"}),Object(n.jsx)(oa.a,{style:"week"===z?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"week","aria-label":"week view",children:"week"}),Object(n.jsx)(oa.a,{style:"day"===z?{width:"80px",color:"#3f51b5",backgroundColor:"#ebedf7"}:{width:"80px"},value:"day","aria-label":"day view",children:"day"})]})})})]}),(U=W,"month"===U?Object(n.jsx)(na,{dayClicked:X,month:p,year:g}):"week"===U?Object(n.jsx)(ja,{dayClicked:X,dates:D}):"day"===U?Object(n.jsx)(jn,{date:m}):void 0)]})}var mn=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},PatientAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),On=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Archived Records":"late"===e?"40 Hours Late":"Patients"};function vn(e){var t=mn(),a=[{field:"_id",headerName:"Patient ID",width:150,renderCell:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(J.a,{color:"primary",onClick:function(t){return M(t,e.value)},children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)("span",{style:{color:"#333",fontWeight:"600",fontSize:"0.8rem"},children:e.getValue("patientID")})]})}},{field:"name",headerName:"Name",width:150},{field:"surname",headerName:"Surname",width:150},{field:"birthDate",headerName:"DOB",width:150,valueFormatter:function(e){return Object(lt.FormatDateFromString)(e.value)}},{field:"email",headerName:"Email",width:200},{field:"homeTel",headerName:"Home Tel",width:150},{field:"mobileTel",headerName:"Mobile Tel",width:150},{field:"postCode",headerName:"Postcode",width:300},{field:"address",headerName:"Address",width:300}],r=i.a.useContext(y),c=Object(l.a)(r,2),d=c[0],s=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(null),g=Object(l.a)(j,2),f=(g[0],g[1]),x=i.a.useState(null),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],S=Object(o.useState)(xt[0]),B=Object(l.a)(S,2),D=(B[0],B[1],i.a.useState("")),L=Object(l.a)(D,2),N=L[0],R=L[1],W=(Object(o.useRef)(),function(){var t=Sa.getAllPatients;"deleted"===e.date&&(t=Sa.getDeletedPatients),b({bookings:[],cachedBookings:[],isFetching:!0});t().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});b({bookings:Object(Ue.a)(e.data),cachedBookings:Object(Ue.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))});Object(o.useEffect)((function(){W()}),[e.date]),Object(o.useEffect)((function(){if(N&&N.trim().length>0){var e=u.cachedBookings.filter((function(e){var t,a,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().indexOf(N.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(N.toLowerCase()))>=0||(null===(n=e.name+" "+e.surname)||void 0===n?void 0:n.toLowerCase().indexOf(N.toLowerCase()))>=0}));b({bookings:Object(Ue.a)(e),cachedBookings:u.cachedBookings,isFetching:!1})}else b({bookings:Object(Ue.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[N]),Object(o.useEffect)((function(){W()}),[d.patientDialogDataChanged]);var A,M=function(e,t){var a=u.bookings.find((function(e){return e._id===t}));a&&(q(a),te("".concat(a.name.toUpperCase()," ").concat(a.surname.toUpperCase())),ie("Save Changes"),$(!0))},F=i.a.useState(1),z=Object(l.a)(F,2),E=z[0],V=z[1],_=i.a.useState(null),G=Object(l.a)(_,2),H=G[0],q=G[1],Y=i.a.useState(!1),U=Object(l.a)(Y,2),X=U[0],$=U[1],Q=i.a.useState(""),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=i.a.useState(""),ne=Object(l.a)(ae,2),oe=ne[0],ie=ne[1];return Object(n.jsxs)(i.a.Fragment,{children:[u.isFetching&&Object(n.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(n.jsx)($e.a,{color:"primary"})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(n.jsx)(K.a,{item:!0,md:4,children:Object(n.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(A=e.date,"today"===A?Object(n.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===A?Object(n.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"future"===A?Object(n.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===A?Object(n.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===A?Object(n.jsx)(ye.a,{style:{fontSize:"2.2rem"}}):"completed"===A?Object(n.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"positive"===A?Object(n.jsx)(Le.a,{style:{fontSize:"2.2rem"}}):"deleted"===A?Object(n.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===A?Object(n.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):Object(n.jsx)(Ee.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",On(e.date)," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"Refresh",placement:"right",children:Object(n.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){R(""),W()},children:Object(n.jsx)(ct.a,{})})})})]})})}),Object(n.jsx)(K.a,{item:!0,md:3,children:Object(n.jsx)("div",{style:{paddingBottom:"10px"},children:Object(n.jsx)(P.a,{variant:"contained",color:"primary",onClick:function(){q(null),te("Register New Patient"),ie("Save"),$(!0)},startIcon:Object(n.jsx)(fa.a,{}),children:"Register new Patient"})})}),u.isFetching&&Object(n.jsx)("div",{className:t.HideNowRows}),Object(n.jsx)(K.a,{item:!0,md:3,children:Object(n.jsx)(I.a,{variant:"standard",value:N,onChange:function(e){R(e.target.value)},margin:"normal",size:"small",id:"filter",label:"Filter",name:"filter",autoComplete:"off"})})]}),Object(n.jsx)("div",{style:{height:700,width:"100%"},children:Object(n.jsx)(Ke.a,{rows:u.bookings,columns:a,autoPageSize:!0,page:E,onPageChange:function(e){V(e.page)},onSelectionChange:function(e){e.length>0&&f(e.rows[0])}})}),Object(n.jsx)(Ct,{booking:m,open:C&&m&&m.fullname,onClose:function(){O(null),w(!1)}}),Object(n.jsx)(qa,{patient:H,open:X,handleClose:function(){$(!1)},title:ee,saveButtonText:oe})]})}var kn=a(37),Cn=a(218),yn=a(188),wn=a.n(yn),Sn=a(189),Bn=a.n(Sn),Tn=a(152);a(310),a(309);function Dn(e){var t=e.children,a=e.value,o=e.index,i=Object(ft.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(T.a)(Object(T.a)({role:"tabpanel",hidden:a!==o,id:"vertical-tabpanel-".concat(o),"aria-labelledby":"vertical-tab-".concat(o)},i),{},{style:{width:"100%"},children:a===o&&Object(n.jsx)("div",{style:{padding:"20px",width:"100%"},children:t})}))}function Ln(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Pn=Object(D.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},root:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},titleCenter:{width:"100%",textAlign:"center",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",borderBottom:"2px dashed ".concat(e.palette.primary.main)},eyeText:{width:"100%",textAlign:"left",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",paddingTop:"15px"}}})),In=i.a.forwardRef((function(e,t){return Object(n.jsx)(gt.a,Object(T.a)({direction:"up",ref:t},e))}));function Nn(e){var t=Pn(),a=i.a.useContext(y),r=Object(l.a)(a,2),c=(r[0],r[1]),d=i.a.useState({formData:{}}),s=Object(l.a)(d,2),p=s[0],u=s[1],b=i.a.useState(!1),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(!1),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],D=i.a.useState(!1),L=Object(l.a)(D,2),N=(L[0],L[1]),R=i.a.useState(!1),W=Object(l.a)(R,2),M=(W[0],W[1]),F=i.a.useState(!1),z=Object(l.a)(F,2),G=(z[0],z[1],i.a.useState(!1)),H=Object(l.a)(G,2),Y=H[0],$=H[1],Q=i.a.useState(0),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=i.a.useState([]),ne=Object(l.a)(ae,2),oe=ne[0],ie=(ne[1],i.a.useState(null)),re=Object(l.a)(ie,2),ce=(re[0],re[1],i.a.useState(!1)),le=Object(l.a)(ce,2),de=le[0],se=le[1],pe=i.a.useState({}),ue=Object(l.a)(pe,2),be=ue[0],je=ue[1],ge=i.a.useState({}),fe=Object(l.a)(ge,2),xe=fe[0],he=fe[1],me=i.a.useState(kn.EditorState.createEmpty()),Oe=Object(l.a)(me,2),ve=Oe[0],ke=Oe[1],Ce=function(){se(!1)};Object(o.useEffect)((function(){if(e.open)if(e.template){var t=[];try{t=JSON.parse(e.template.parameters)}catch(s){}u(Object(T.a)(Object(T.a)({},e.template),{},{parameters:t}));var a=e.template.html,n=Bn()(a);if(n){var o=kn.ContentState.createFromBlockArray(n.contentBlocks),i=kn.EditorState.createWithContent(o);ke(i)}}else{var r='<p style="font-size:16px">Please delete this and write your <strong>Text</strong> here ... \ud83d\ude00</p>',c=Bn()(r);if(c){var l=kn.ContentState.createFromBlockArray(c.contentBlocks),d=kn.EditorState.createWithContent(l);ke(d),u(Object(T.a)(Object(T.a)({},p),{},{parameters:[],html:r,rawText:Object(Tn.htmlToText)(r)}))}}}),[e.template,e.open]);var ye=function(){e.handleClose(),te(0),u({}),O(!1),N(!1),M(!1),$(!1),We(""),ze(!1),je({}),he({}),w(!1)},we=function(){var t=Object(B.a)(S.a.mark((function t(){var a,n,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Be()){t.next=3;break}return te(0),t.abrupt("return");case 3:if(t.prev=3,$(!1),f(!0),a=JSON.stringify(p.parameters),!e.template){t.next=15;break}return t.next=10,Wa.updateTemplate({id:p._id,template:Object(T.a)(Object(T.a)({},p),{},{parameters:a})});case 10:n=t.sent,f(!1),"OK"===n.data.status&&(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),ye()),t.next=20;break;case 15:return t.next=17,Wa.registerNewTemplate({template:Object(T.a)(Object(T.a)({},p),{},{parameters:a})});case 17:o=t.sent,f(!1),"OK"===o.data.status?(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),ye()):"FAILED"===o.data.status&&"Repeated template!"===o.data.error&&(O(!0),$(!0),te(0));case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),f(!1),console.error(t.t0);case 26:case"end":return t.stop()}}),t,null,[[3,22]])})));return function(){return t.apply(this,arguments)}}(),Se=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Re===e.template.templateID){t.next=3;break}return ze(!0),t.abrupt("return");case 3:return se(!1),f(!0),t.prev=5,t.next=8,Wa.deleteTemplate(e.template._id);case 8:f(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),ye(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),f(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}(),Be=function(){var e=!1;return p.templateID&&0!==p.templateID.trim().length||(e=!0,O(!0)),p.html&&0!==p.html.length||(e=!0,N(!0)),p.rawText&&0!==p.rawText.length||(e=!0,N(!0)),p.subject&&0!==p.subject.length||(e=!0,w(!0)),!e},Te=i.a.useState(0),De=Object(l.a)(Te,2),Le=De[0],Pe=(De[1],i.a.useState("")),Ne=Object(l.a)(Pe,2),Re=Ne[0],We=Ne[1],Ae=i.a.useState(!1),Me=Object(l.a)(Ae,2),Fe=Me[0],ze=Me[1],Ee=function(){var e=!1;return be.keyword||(he((function(e){return Object(T.a)(Object(T.a)({},e),{},{keywordError:!0})})),e=!0),be.keyword&&p.parameters.find((function(e){return e.keyword===be.keyword}))&&(he((function(e){return Object(T.a)(Object(T.a)({},e),{},{keywordError:!0})})),e=!0),be.builtinValue||(he((function(e){return Object(T.a)(Object(T.a)({},e),{},{builtinValueError:!0})})),e=!0),!e};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{fullScreen:!0,open:e.open,onClose:ye,TransitionComponent:In,children:[Object(n.jsx)(Ta.a,{className:t.appBar,style:Le>0&&oe&&oe.length>0?{backgroundColor:"#777"}:{},color:"primary",children:Object(n.jsxs)(Da.a,{children:[Object(n.jsx)(J.a,{edge:"start",color:"inherit",onClick:ye,"aria-label":"close",children:Object(n.jsx)(va.a,{})}),Object(n.jsx)(A.a,{variant:"h6",className:t.title,children:e.title}),Object(n.jsx)(P.a,{startIcon:Object(n.jsx)(Ra.a,{}),variant:"contained",color:"secondary",onClick:we,disabled:Le>0&&oe&&oe.length>0,children:e.saveButtonText})]})}),Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(Pa.a,{orientation:"vertical",variant:"scrollable",value:ee,onChange:function(e,t){te(t)},"aria-label":"Vertical tabs example",indicatorColor:"secondary",textColor:"secondary",className:t.tabs,children:[Object(n.jsx)(Ia.a,Object(T.a)({label:"Email Text"},Ln(0))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Parameters"},Ln(1))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Settings"},Ln(2)))]}),Object(n.jsx)(Dn,{value:ee,index:0,children:Object(n.jsxs)(K.a,{container:!0,spacing:1,children:[Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:8,children:Object(n.jsx)(I.a,{name:"templatename",id:"templatename",label:"Template Name",fullWidth:!0,required:!0,helperText:Y?"* This Name is already assigned to another template! Please choose a different name.":"* Please give a unique name to each templete.",error:m,value:p.templateID||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{templateID:e.target.value})),O(!1)},autoComplete:"none",variant:"outlined"})}),e.template&&Object(n.jsx)(K.a,{item:!0,xs:4,children:Object(n.jsx)(P.a,{onClick:function(){return se(!0)},variant:"contained",style:{backgroundColor:"#d10202",color:"#fff",marginBottom:"5px"},children:"Delete This Template"})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{name:"subject",id:"subject",label:"Email Subject",fullWidth:!0,required:!0,error:C,value:p.subject||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{subject:e.target.value})),w(!1)},autoComplete:"none",variant:"outlined"})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(Cn.Editor,{autoFocus:!0,editorState:ve,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:function(e){ke(e);var t=wn()(Object(kn.convertToRaw)(ve.getCurrentContent()));u(Object(T.a)(Object(T.a)({},p),{},{html:t,rawText:Object(Tn.htmlToText)(t)}))}})})]})}),Object(n.jsx)(Dn,{value:ee,index:1,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",spacing:2,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"bottom",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(I.a,{name:"keyword",id:"keyword",label:"Keyword",fullWidth:!0,required:!0,error:xe.keywordError,helperText:"This is the TEXT within your email that you want to be replaced by a value",autoComplete:"none",variant:"outlined",value:be.keyword||"",onChange:function(e){return je(Object(T.a)(Object(T.a)({},be),{},{keyword:e.target.value}))}})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsxs)(V.a,{error:xe.builtinValueError,fullWidth:!0,required:!0,variant:"outlined",className:t.formControl,children:[Object(n.jsx)(_.a,{id:"builtinvalueid",children:" Value"}),Object(n.jsxs)(Ze.a,{labelId:"builtinvalueid",id:"builtinvalue",value:be.builtinValue||null,onChange:function(e){return je(Object(T.a)(Object(T.a)({},be),{},{builtinValue:e.target.value}))},label:"Built-in Value",children:[Object(n.jsx)(et.a,{value:"Patient Name",children:"Patient Name"}),Object(n.jsx)(et.a,{value:"Patient Surname",children:"Patient Surname"}),Object(n.jsx)(et.a,{value:"Patient Fullname",children:"Patient Fullname"}),Object(n.jsx)(et.a,{value:"Today Date",children:"Today Date"}),Object(n.jsx)(et.a,{value:"Appointment DateTime",children:"Appointment DateTime"})]})]})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(I.a,{name:"defaultvalue",id:"defaultvalue",label:"Default Value",fullWidth:!0,autoComplete:"none",helperText:"* This value is used if the variable is empty.",variant:"outlined",value:be.defaultValue||"",onChange:function(e){return je(Object(T.a)(Object(T.a)({},be),{},{defaultValue:e.target.value}))}})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(P.a,{onClick:function(){if(he({}),Ee()){var e={keyword:be.keyword,builtinValue:be.builtinValue,defaultValue:be.defaultValue};u(Object(T.a)(Object(T.a)({},p),{},{parameters:[].concat(Object(Ue.a)(p.parameters),[e])})),je({})}},startIcon:Object(n.jsx)(fa.a,{}),variant:"contained",color:"primary",fullWidth:!0,style:{height:"55px"},children:"Add Variable"})})]})}),Object(n.jsxs)(K.a,{item:!0,style:{marginTop:"20px",fontWeight:"500",height:"20px"},children:[Object(n.jsx)(nt.a,{}),Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:"Keyword"}),Object(n.jsx)(K.a,{item:!0,xs:3,children:"Value"}),Object(n.jsx)(K.a,{item:!0,xs:3,children:"Default Value"}),Object(n.jsx)(K.a,{item:!0,xs:3})]}),Object(n.jsx)(nt.a,{})]}),(!p.parameters||0===p.parameters.length)&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{width:"80%",textAlign:"center",color:"#777",marginTop:"50px",fontSize:"1rem"},children:"No Parameters Defined"})}),p.parameters&&p.parameters.length>0&&p.parameters.map((function(e){return Object(n.jsx)(K.a,{item:!0,style:{marginTop:"10px",fontWeight:"500",height:"30px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:e.keyword}),Object(n.jsx)(K.a,{item:!0,xs:3,children:e.builtinValue}),Object(n.jsx)(K.a,{item:!0,xs:3,children:e.defaultValue}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(Qe.a,{title:"Delete Parameter",children:Object(n.jsx)(J.a,{onClick:function(){return t=e.keyword,void u(Object(T.a)(Object(T.a)({},p),{},{parameters:p.parameters.filter((function(e){return e.keyword!==t}))}));var t},children:Object(n.jsx)(Ie.a,{color:"primary"})})})})]})})}))]})}),Object(n.jsxs)(Dn,{value:ee,index:2,children:[Object(n.jsx)("div",{style:{fontSize:"1.2rem",color:"#777",fontWeight:"500",marginBottom:"50px"},children:"Here you can set which emails (and when) should be sent to the patients automatically by the system :"}),Object(n.jsx)(E.a,{elevation:3,children:Object(n.jsx)(K.a,{container:!0,direction:"column",spacing:2,style:{minHeight:"300px",padding:"10px 15px"},children:Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(it.a,{checked:p.sendWhenBookedCalendar,onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{sendWhenBookedCalendar:e.target.checked}))},name:"check-whenbooked",color:"primary"}),label:Object(n.jsx)("span",{style:p.sendWhenBookedCalendar?{fontWeight:"500",color:"#333"}:{color:"#777"},children:"Automatically send this email to the patients when an appointment is booked on the calendar."})})})})})]})]}),Object(n.jsx)(U.a,{className:t.backdrop,open:g,children:Object(n.jsx)(X.a,{color:"inherit"})}),Object(n.jsxs)(tt.a,{open:de,onClose:Ce,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(at.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete template"}),Object(n.jsx)(ot.a,{children:Object(n.jsx)(La.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:Object(n.jsxs)(K.a,{container:!0,spacing:4,children:[Object(n.jsx)(K.a,{item:!0,xs:12,children:"Are you sure you want to delete this template?"}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{autoFocus:!0,name:"templatenameuser",id:"templatenameuser",label:"Template Name",placeholder:"Please Retype The Template Name",fullWidth:!0,required:!0,error:Fe,helperText:"* Please retype the template name you want to be deleted.",value:Re,onChange:function(e){We(e.target.value)},autoComplete:"none",variant:"outlined"})})]})})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(P.a,{onClick:Ce,color:"default",children:"Back"}),Object(n.jsx)(P.a,{onClick:Se,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this template"})]})]})]})})})}var Rn=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},templateAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"}}})),Wn=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Archived Records":"late"===e?"40 Hours Late":"Email Templates"};function An(e){var t=Rn(),a=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(J.a,{color:"primary",onClick:function(t){return A(t,e.value)},children:Object(n.jsx)(Oe.a,{})})})}},{field:"templateID",headerName:"Template Name",width:200},{field:"subject",headerName:"Subject",width:400},{field:"rawText",headerName:"Email Body",width:700}],r=i.a.useContext(y),c=Object(l.a)(r,2),d=c[0],s=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(null),g=Object(l.a)(j,2),f=(g[0],g[1]),x=i.a.useState(null),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],S=Object(o.useState)(xt[0]),B=Object(l.a)(S,2),D=(B[0],B[1],i.a.useState("")),L=Object(l.a)(D,2),I=L[0],N=L[1],R=(Object(o.useRef)(),function(){var e=Wa.getAllTemplates;b({bookings:[],cachedBookings:[],isFetching:!0});e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});b({bookings:Object(Ue.a)(e.data),cachedBookings:Object(Ue.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))});Object(o.useEffect)((function(){R()}),[e.date]),Object(o.useEffect)((function(){if(I&&I.trim().length>0){var e=u.cachedBookings.filter((function(e){var t,a,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().indexOf(I.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(I.toLowerCase()))>=0||(null===(n=e.name+" "+e.surname)||void 0===n?void 0:n.toLowerCase().indexOf(I.toLowerCase()))>=0}));b({bookings:Object(Ue.a)(e),cachedBookings:u.cachedBookings,isFetching:!1})}else b({bookings:Object(Ue.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[I]),Object(o.useEffect)((function(){R()}),[d.templateDialogDataChanged]);var W,A=function(e,t){var a=u.bookings.find((function(e){return e._id===t}));a&&(H(a),ee("".concat(a.templateID.toUpperCase())),oe("Save Changes"),X(!0))},M=i.a.useState(1),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState(null),_=Object(l.a)(V,2),G=_[0],H=_[1],q=i.a.useState(!1),Y=Object(l.a)(q,2),U=Y[0],X=Y[1],$=i.a.useState(""),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(""),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1];return Object(n.jsxs)(i.a.Fragment,{children:[u.isFetching&&Object(n.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(n.jsx)($e.a,{color:"primary"})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(n.jsx)(K.a,{item:!0,md:4,children:Object(n.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(W=e.date,"today"===W?Object(n.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===W?Object(n.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"future"===W?Object(n.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===W?Object(n.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===W?Object(n.jsx)(ye.a,{style:{fontSize:"2.2rem"}}):"completed"===W?Object(n.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"positive"===W?Object(n.jsx)(Le.a,{style:{fontSize:"2.2rem"}}):"deleted"===W?Object(n.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===W?Object(n.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):Object(n.jsx)(Ye.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Wn(e.date)," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"Refresh",placement:"right",children:Object(n.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){N(""),R()},children:Object(n.jsx)(ct.a,{})})})})]})})}),Object(n.jsx)(K.a,{item:!0,md:6,children:Object(n.jsx)("div",{style:{paddingBottom:"10px"},children:Object(n.jsx)(P.a,{variant:"contained",color:"primary",onClick:function(){H(null),ee("Create New Email Template"),oe("Save"),X(!0)},startIcon:Object(n.jsx)(fa.a,{}),children:"Create New Email Template"})})}),u.isFetching&&Object(n.jsx)("div",{className:t.HideNowRows})]}),Object(n.jsx)("div",{style:{height:700,width:"100%"},children:Object(n.jsx)(Ke.a,{rows:u.bookings,columns:a,autoPageSize:!0,page:z,onPageChange:function(e){E(e.page)},onSelectionChange:function(e){e.length>0&&f(e.rows[0])}})}),Object(n.jsx)(Ct,{booking:m,open:C&&m&&m.fullname,onClose:function(){O(null),w(!1)}}),Object(n.jsx)(Nn,{template:G,open:U,handleClose:function(){X(!1)},title:Z,saveButtonText:ne})]})}function Mn(e){var t=e.children,a=e.value,o=e.index,i=Object(ft.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(T.a)(Object(T.a)({role:"tabpanel",hidden:a!==o,id:"vertical-tabpanel-".concat(o),"aria-labelledby":"vertical-tab-".concat(o)},i),{},{style:{width:"100%"},children:a===o&&Object(n.jsx)("div",{style:{padding:"20px",width:"100%"},children:t})}))}function Fn(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var zn=Object(D.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#009e28"},title:{marginLeft:e.spacing(2),flex:1},root:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},titleCenter:{width:"100%",textAlign:"center",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",borderBottom:"2px dashed ".concat(e.palette.primary.main)},eyeText:{width:"100%",textAlign:"left",fontSize:"1.1rem",color:e.palette.primary.main,fontWeight:"500",paddingTop:"15px"},createSMSButton:{backgroundColor:"#009e28",color:"#fff","&:hover":{backgroundColor:"#00751e"}}}})),En=i.a.forwardRef((function(e,t){return Object(n.jsx)(gt.a,Object(T.a)({direction:"up",ref:t},e))}));function Vn(e){var t=zn(),a=i.a.useContext(y),r=Object(l.a)(a,2),c=(r[0],r[1]),d=i.a.useState({formData:{}}),s=Object(l.a)(d,2),p=s[0],u=s[1],b=i.a.useState(!1),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(!1),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],D=i.a.useState(!1),L=Object(l.a)(D,2),N=(L[0],L[1]),R=i.a.useState(!1),W=Object(l.a)(R,2),M=(W[0],W[1]),F=i.a.useState(!1),z=Object(l.a)(F,2),G=(z[0],z[1]),H=i.a.useState(!1),Y=Object(l.a)(H,2),$=(Y[0],Y[1],i.a.useState(!1)),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(0),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1],ie=i.a.useState([]),re=Object(l.a)(ie,2),ce=re[0],le=(re[1],i.a.useState(null)),de=Object(l.a)(le,2),se=(de[0],de[1],i.a.useState(!1)),pe=Object(l.a)(se,2),ue=pe[0],be=pe[1],je=i.a.useState({}),ge=Object(l.a)(je,2),fe=ge[0],xe=ge[1],he=i.a.useState({}),me=Object(l.a)(he,2),Oe=me[0],ve=me[1],ke=i.a.useState(kn.EditorState.createEmpty()),Ce=Object(l.a)(ke,2),ye=(Ce[0],Ce[1],function(){be(!1)});Object(o.useEffect)((function(){if(e.open)if(e.template){var t=[];try{t=JSON.parse(e.template.parameters)}catch(a){}u(Object(T.a)(Object(T.a)({},e.template),{},{parameters:t}))}else u({parameters:[]})}),[e.template,e.open]);var we=function(){e.handleClose(),oe(0),u({}),O(!1),M(!1),G(!1),ee(!1),Ae(""),Ee(!1),xe({}),ve({}),N(!1),w(!1)},Se=function(){var t=Object(B.a)(S.a.mark((function t(){var a,n,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Te()){t.next=3;break}return oe(0),t.abrupt("return");case 3:if(t.prev=3,ee(!1),f(!0),a=JSON.stringify(p.parameters),!e.template){t.next=15;break}return t.next=10,Aa.updateTemplate({id:p._id,template:Object(T.a)(Object(T.a)({},p),{},{parameters:a})});case 10:n=t.sent,f(!1),"OK"===n.data.status&&(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),we()),t.next=20;break;case 15:return t.next=17,Aa.registerNewTemplate({template:Object(T.a)(Object(T.a)({},p),{},{parameters:a})});case 17:o=t.sent,f(!1),"OK"===o.data.status?(c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),we()):"FAILED"===o.data.status&&"Repeated template!"===o.data.error&&(O(!0),ee(!0),oe(0));case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),f(!1),console.error(t.t0);case 26:case"end":return t.stop()}}),t,null,[[3,22]])})));return function(){return t.apply(this,arguments)}}(),Be=function(){var t=Object(B.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(We===e.template.templateID){t.next=3;break}return Ee(!0),t.abrupt("return");case 3:return be(!1),f(!0),t.prev=5,t.next=8,Aa.deleteTemplate(e.template._id);case 8:f(!1),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{templateDialogDataChanged:!e.templateDialogDataChanged})})),we(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),f(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}(),Te=function(){var e=!1;return p.templateID&&0!==p.templateID.trim().length||(e=!0,O(!0)),p.rawText&&0!==p.rawText.length||(e=!0,w(!0)),!e},De=i.a.useState(0),Le=Object(l.a)(De,2),Pe=Le[0],Ne=(Le[1],i.a.useState("")),Re=Object(l.a)(Ne,2),We=Re[0],Ae=Re[1],Me=i.a.useState(!1),Fe=Object(l.a)(Me,2),ze=Fe[0],Ee=Fe[1],Ve=function(){var e=!1;return fe.keyword||(ve((function(e){return Object(T.a)(Object(T.a)({},e),{},{keywordError:!0})})),e=!0),fe.keyword&&p.parameters.find((function(e){return e.keyword===fe.keyword}))&&(ve((function(e){return Object(T.a)(Object(T.a)({},e),{},{keywordError:!0})})),e=!0),fe.builtinValue||(ve((function(e){return Object(T.a)(Object(T.a)({},e),{},{builtinValueError:!0})})),e=!0),!e};return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(tt.a,{fullScreen:!0,open:e.open,onClose:we,TransitionComponent:En,children:[Object(n.jsx)(Ta.a,{className:t.appBar,style:Pe>0&&ce&&ce.length>0?{backgroundColor:"#777"}:{},color:"primary",children:Object(n.jsxs)(Da.a,{children:[Object(n.jsx)(J.a,{edge:"start",color:"inherit",onClick:we,"aria-label":"close",children:Object(n.jsx)(va.a,{})}),Object(n.jsx)(A.a,{variant:"h6",className:t.title,children:e.title}),Object(n.jsx)(P.a,{startIcon:Object(n.jsx)(Ra.a,{}),variant:"contained",onClick:Se,disabled:Pe>0&&ce&&ce.length>0,children:e.saveButtonText})]})}),Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(Pa.a,{orientation:"vertical",variant:"scrollable",value:ne,onChange:function(e,t){oe(t)},"aria-label":"Vertical tabs example",indicatorColor:"secondary",textColor:"secondary",className:t.tabs,children:[Object(n.jsx)(Ia.a,Object(T.a)({label:"Email Text"},Fn(0))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Parameters"},Fn(1))),Object(n.jsx)(Ia.a,Object(T.a)({label:"Settings"},Fn(2)))]}),Object(n.jsx)(Mn,{value:ne,index:0,children:Object(n.jsxs)(K.a,{container:!0,spacing:4,children:[Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsxs)(K.a,{container:!0,spacing:2,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:8,children:Object(n.jsx)(I.a,{name:"templatename",id:"templatename",label:"Template Name",fullWidth:!0,required:!0,helperText:Z?"* This Name is already assigned to another template! Please choose a different name.":"* Please give a unique name to each templete.",error:m,value:p.templateID||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{templateID:e.target.value})),O(!1)},autoComplete:"none",variant:"outlined"})}),e.template&&Object(n.jsx)(K.a,{item:!0,xs:4,children:Object(n.jsx)(P.a,{onClick:function(){return be(!0)},variant:"contained",style:{backgroundColor:"#d10202",color:"#fff",marginBottom:"5px"},children:"Delete This Template"})})]})}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{autoFocus:!0,name:"rawtext",id:"rawtext",label:"SMS Body",fullWidth:!0,multiline:!0,rows:20,required:!0,error:C,value:p.rawText||"",onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{rawText:e.target.value})),w(!1)},autoComplete:"none",variant:"outlined"})})]})}),Object(n.jsx)(Mn,{value:ne,index:1,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",spacing:2,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"bottom",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(I.a,{name:"keyword",id:"keyword",label:"Keyword",fullWidth:!0,required:!0,error:Oe.keywordError,helperText:"This is the TEXT within your SMS that you want to be replaced by a value",autoComplete:"none",variant:"outlined",value:fe.keyword||"",onChange:function(e){return xe(Object(T.a)(Object(T.a)({},fe),{},{keyword:e.target.value}))}})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsxs)(V.a,{error:Oe.builtinValueError,fullWidth:!0,required:!0,variant:"outlined",className:t.formControl,children:[Object(n.jsx)(_.a,{id:"builtinvalueid",children:" Value"}),Object(n.jsxs)(Ze.a,{labelId:"builtinvalueid",id:"builtinvalue",value:fe.builtinValue||null,onChange:function(e){return xe(Object(T.a)(Object(T.a)({},fe),{},{builtinValue:e.target.value}))},label:"Built-in Value",children:[Object(n.jsx)(et.a,{value:"Patient Name",children:"Patient Name"}),Object(n.jsx)(et.a,{value:"Patient Surname",children:"Patient Surname"}),Object(n.jsx)(et.a,{value:"Patient Fullname",children:"Patient Fullname"}),Object(n.jsx)(et.a,{value:"Today Date",children:"Today Date"}),Object(n.jsx)(et.a,{value:"Appointment DateTime",children:"Appointment DateTime"})]})]})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(I.a,{name:"defaultvalue",id:"defaultvalue",label:"Default Value",fullWidth:!0,autoComplete:"none",helperText:"* This value is used if the variable is empty.",variant:"outlined",value:fe.defaultValue||"",onChange:function(e){return xe(Object(T.a)(Object(T.a)({},fe),{},{defaultValue:e.target.value}))}})}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(P.a,{className:t.createSMSButton,onClick:function(){if(ve({}),Ve()){var e={keyword:fe.keyword,builtinValue:fe.builtinValue,defaultValue:fe.defaultValue};u(Object(T.a)(Object(T.a)({},p),{},{parameters:[].concat(Object(Ue.a)(p.parameters),[e])})),xe({})}},startIcon:Object(n.jsx)(fa.a,{}),variant:"contained",color:"primary",fullWidth:!0,style:{height:"55px"},children:"Add Variable"})})]})}),Object(n.jsxs)(K.a,{item:!0,style:{marginTop:"20px",fontWeight:"500",height:"20px"},children:[Object(n.jsx)(nt.a,{}),Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:"Keyword"}),Object(n.jsx)(K.a,{item:!0,xs:3,children:"Value"}),Object(n.jsx)(K.a,{item:!0,xs:3,children:"Default Value"}),Object(n.jsx)(K.a,{item:!0,xs:3})]}),Object(n.jsx)(nt.a,{})]}),(!p.parameters||0===p.parameters.length)&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{width:"80%",textAlign:"center",color:"#777",marginTop:"50px",fontSize:"1rem"},children:"No Parameters Defined"})}),p.parameters&&p.parameters.length>0&&p.parameters.map((function(e){return Object(n.jsx)(K.a,{item:!0,style:{marginTop:"10px",fontWeight:"500",height:"30px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,xs:3,children:e.keyword}),Object(n.jsx)(K.a,{item:!0,xs:3,children:e.builtinValue}),Object(n.jsx)(K.a,{item:!0,xs:3,children:e.defaultValue}),Object(n.jsx)(K.a,{item:!0,xs:3,children:Object(n.jsx)(Qe.a,{title:"Delete Parameter",children:Object(n.jsx)(J.a,{onClick:function(){return t=e.keyword,void u(Object(T.a)(Object(T.a)({},p),{},{parameters:p.parameters.filter((function(e){return e.keyword!==t}))}));var t},children:Object(n.jsx)(Ie.a,{color:"primary"})})})})]})})}))]})}),Object(n.jsxs)(Mn,{value:ne,index:2,children:[Object(n.jsx)("div",{style:{fontSize:"1.2rem",color:"#777",fontWeight:"500",marginBottom:"50px"},children:"Here you can set which SMSs (and when) should be sent to the patients automatically by the system :"}),Object(n.jsx)(E.a,{elevation:3,children:Object(n.jsx)(K.a,{container:!0,direction:"column",spacing:2,style:{minHeight:"300px",padding:"10px 15px"},children:Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(q.a,{control:Object(n.jsx)(it.a,{checked:p.sendWhenBookedCalendar,onChange:function(e){u(Object(T.a)(Object(T.a)({},p),{},{sendWhenBookedCalendar:e.target.checked}))},name:"check-whenbooked",color:"primary"}),label:Object(n.jsx)("span",{style:p.sendWhenBookedCalendar?{fontWeight:"500",color:"#333"}:{color:"#777"},children:"Automatically send this SMS to the patients when an appointment is booked on the calendar."})})})})})]})]}),Object(n.jsx)(U.a,{className:t.backdrop,open:g,children:Object(n.jsx)(X.a,{color:"inherit"})}),Object(n.jsxs)(tt.a,{open:ue,onClose:ye,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(at.a,{style:{color:"#d10202",fontWeight:"600"},id:"alert-dialog-title",children:"Delete template"}),Object(n.jsx)(ot.a,{children:Object(n.jsx)(La.a,{style:{color:"#000",fontWeight:"500"},id:"alert-dialog-description",children:Object(n.jsxs)(K.a,{container:!0,spacing:4,children:[Object(n.jsx)(K.a,{item:!0,xs:12,children:"Are you sure you want to delete this template?"}),Object(n.jsx)(K.a,{item:!0,xs:12,children:Object(n.jsx)(I.a,{autoFocus:!0,name:"templatenameuser",id:"templatenameuser",label:"Template Name",placeholder:"Please Retype The Template Name",fullWidth:!0,required:!0,error:ze,helperText:"* Please retype the template name you want to be deleted.",value:We,onChange:function(e){Ae(e.target.value)},autoComplete:"none",variant:"outlined"})})]})})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(P.a,{onClick:ye,color:"default",children:"Back"}),Object(n.jsx)(P.a,{onClick:Be,variant:"contained",style:{backgroundColor:"#d10202",color:"#fff"},children:"Yes, Delete this template"})]})]})]})})})}var _n=Object(D.a)((function(e){return{title:{marginTop:e.spacing(0),marginBottom:e.spacing(1)},refreshButton:{marginLeft:e.spacing(2)},checkIcon:{color:"green"},closeIcon:{color:"red"},RefLink:{cursor:"pointer"},BookedLabel:{backgroundColor:"#606060",color:"#fff",width:"70px",textAlign:"center"},templateAttendedLabel:{backgroundColor:"#0066aa",color:"#fff",width:"70px",textAlign:"center"},SampleTakenLabel:{backgroundColor:"#0066cc",color:"#fff",width:"70px",textAlign:"center"},ReportSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},ReportCertSentLabel:{backgroundColor:"#009900",color:"#fff",width:"70px",textAlign:"center"},PositiveLabel:{backgroundColor:"red",color:"#fff",width:"70px",textAlign:"center"},HideNowRows:{position:"absolute",top:"40%",left:"40%",width:"600px",height:"300px",backgroundColor:"#fafafa",color:"#111",zIndex:"1000",display:"flex",alignItems:"center",justifyItems:"center"},ExportToExcelButton:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important"},ExportToExcelButtonInline:{color:"#2f942e",borderColor:"#2f942e","&:hover":{background:"#fafffa",borderColor:"#2f942e"},textDecoration:"none !important",cursor:"pointer",padding:"10px"},table:{width:"100%",border:"1px solid #ddd",borderCollapse:"collapse"},th:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",fontcolor:"#555",fontWeight:"400",fontSize:"15px",paddingTop:"5px",paddingBottom:"5px",width:"14%",paddingLeft:"5px"},td:{border:"1px solid #ddd",borderCollapse:"collapse",verticalAlign:"middle",paddingLeft:"5px"},topSelect:{margin:e.spacing(1),minWidth:80},notifyIcon:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgb(220, 0, 78)",marginLeft:"10px"},createSMSButton:{backgroundColor:"#009e28",color:"#fff","&:hover":{backgroundColor:"#00751e"}}}})),Gn=function(e){return"today"===e?"Today's Bookings":"old"===e?"Old Bookings":"future"===e?"Future Bookings":"recent"===e?"Recent Bookings":"live"===e?"Live Bookings":"completed"===e?"Completed Bookings":"positive"===e?"Positive Results":"deleted"===e?"Archived Records":"late"===e?"40 Hours Late":"SMS Templates"};function Hn(e){var t=_n(),a=[{field:"_id",headerName:" ",width:70,renderCell:function(e){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(J.a,{color:"primary",onClick:function(t){return A(t,e.value)},children:Object(n.jsx)(Oe.a,{})})})}},{field:"templateID",headerName:"Template Name",width:200},{field:"rawText",headerName:"SMS Body",width:700}],r=i.a.useContext(y),c=Object(l.a)(r,2),d=c[0],s=(c[1],i.a.useState({bookings:[],cachedBookings:[],isFetching:!0})),p=Object(l.a)(s,2),u=p[0],b=p[1],j=i.a.useState(null),g=Object(l.a)(j,2),f=(g[0],g[1]),x=i.a.useState(null),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],S=Object(o.useState)(xt[0]),B=Object(l.a)(S,2),D=(B[0],B[1],i.a.useState("")),L=Object(l.a)(D,2),I=L[0],N=L[1],R=(Object(o.useRef)(),function(){var e=Aa.getAllTemplates;b({bookings:[],cachedBookings:[],isFetching:!0});e().then((function(e){for(var t=0;t<e.data.length;t++)e.data[t]=Object(T.a)(Object(T.a)({},e.data[t]),{},{id:t+1});b({bookings:Object(Ue.a)(e.data),cachedBookings:Object(Ue.a)(e.data),isFetching:!1})})).catch((function(e){console.error(e)}))});Object(o.useEffect)((function(){R()}),[e.date]),Object(o.useEffect)((function(){if(I&&I.trim().length>0){var e=u.cachedBookings.filter((function(e){var t,a,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().indexOf(I.toLowerCase()))>=0||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().indexOf(I.toLowerCase()))>=0||(null===(n=e.name+" "+e.surname)||void 0===n?void 0:n.toLowerCase().indexOf(I.toLowerCase()))>=0}));b({bookings:Object(Ue.a)(e),cachedBookings:u.cachedBookings,isFetching:!1})}else b({bookings:Object(Ue.a)(u.cachedBookings),cachedBookings:u.cachedBookings,isFetching:!1})}),[I]),Object(o.useEffect)((function(){R()}),[d.templateDialogDataChanged]);var W,A=function(e,t){var a=u.bookings.find((function(e){return e._id===t}));a&&(H(a),ee("".concat(a.templateID.toUpperCase())),oe("Save Changes"),X(!0))},M=i.a.useState(1),F=Object(l.a)(M,2),z=F[0],E=F[1],V=i.a.useState(null),_=Object(l.a)(V,2),G=_[0],H=_[1],q=i.a.useState(!1),Y=Object(l.a)(q,2),U=Y[0],X=Y[1],$=i.a.useState(""),Q=Object(l.a)($,2),Z=Q[0],ee=Q[1],te=i.a.useState(""),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1];return Object(n.jsxs)(i.a.Fragment,{children:[u.isFetching&&Object(n.jsx)("div",{style:{width:"100%",paddingTop:"3px"},children:Object(n.jsx)($e.a,{color:"primary"})}),Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end",children:[Object(n.jsx)(K.a,{item:!0,md:4,children:Object(n.jsx)("div",{style:{textAlign:"left",paddingLeft:"10px"},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{paddingRight:"15px",color:"#555"},children:[" ",(W=e.date,"today"===W?Object(n.jsx)(ue.a,{style:{fontSize:"2.2rem"}}):"old"===W?Object(n.jsx)(je.a,{style:{fontSize:"2.2rem"}}):"future"===W?Object(n.jsx)(fe.a,{style:{fontSize:"2.2rem"}}):"recent"===W?Object(n.jsx)(ke.a,{style:{fontSize:"2.2rem"}}):"live"===W?Object(n.jsx)(ye.a,{style:{fontSize:"2.2rem"}}):"completed"===W?Object(n.jsx)(Se.a,{style:{fontSize:"2.2rem"}}):"positive"===W?Object(n.jsx)(Le.a,{style:{fontSize:"2.2rem"}}):"deleted"===W?Object(n.jsx)(Ie.a,{style:{fontSize:"2.2rem"}}):"late"===W?Object(n.jsx)(Re.a,{style:{fontSize:"2.2rem"}}):Object(n.jsx)(He.a,{style:{fontSize:"2.2rem"}}))," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("span",{style:{fontSize:"1.4rem",fontWeight:"600",color:"#444"},children:[" ",Gn(e.date)," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(Qe.a,{title:"Refresh",placement:"right",children:Object(n.jsx)(J.a,{color:"primary",className:t.refreshButton,onClick:function(e){N(""),R()},children:Object(n.jsx)(ct.a,{})})})})]})})}),Object(n.jsx)(K.a,{item:!0,md:6,children:Object(n.jsx)("div",{style:{paddingBottom:"10px"},children:Object(n.jsx)(P.a,{variant:"contained",className:t.createSMSButton,color:"primary",onClick:function(){H(null),ee("Create New SMS Template"),oe("Save"),X(!0)},startIcon:Object(n.jsx)(fa.a,{}),children:"Create New SMS Template"})})}),u.isFetching&&Object(n.jsx)("div",{className:t.HideNowRows})]}),Object(n.jsx)("div",{style:{height:700,width:"100%"},children:Object(n.jsx)(Ke.a,{rows:u.bookings,columns:a,autoPageSize:!0,page:z,onPageChange:function(e){E(e.page)},onSelectionChange:function(e){e.length>0&&f(e.rows[0])}})}),Object(n.jsx)(Ct,{booking:m,open:C&&m&&m.fullname,onClose:function(){O(null),w(!1)}}),Object(n.jsx)(Vn,{template:G,open:U,handleClose:function(){X(!1)},title:Z,saveButtonText:ne})]})}var qn=[{index:1,id:"recentBookings",title:"Recent Bookings",icon:Object(n.jsx)(ke.a,{})},{index:2,id:"todayBookings",title:"Today's Bookings",icon:Object(n.jsx)(ue.a,{})},{index:3,id:"oldBookings",title:"Old Bookings",icon:Object(n.jsx)(je.a,{})},{index:4,id:"futureBookings",title:"Future Bookings",icon:Object(n.jsx)(fe.a,{})},{index:5,id:"allBookings",title:"All Bookings",icon:Object(n.jsx)(he.a,{})},{index:6,id:"traceBookings",title:"Patients to Trace",icon:Object(n.jsx)(_e.a,{})},{index:7,id:"deletedBookings",title:"Archived Records",icon:Object(n.jsx)(Ie.a,{})},{index:8,id:"calendarView",title:"Calendar View",icon:Object(n.jsx)(Ae.a,{})},{index:9,id:"patientsList",title:"Patients",icon:Object(n.jsx)(Ee.a,{})},{index:10,id:"emailTemplates",title:"Email Templates",icon:Object(n.jsx)(Ye.a,{})},{index:11,id:"smsTemplates",title:"SMS Templates",icon:Object(n.jsx)(He.a,{})}],Yn=(se.a,ke.a,ue.a,je.a,fe.a,he.a,Ie.a,Ae.a,Oe.a,se.a,ke.a,ue.a,je.a,fe.a,he.a,Ie.a,Ae.a,Oe.a,se.a,ke.a,ue.a,je.a,fe.a,he.a,Ie.a,Ae.a,Oe.a,se.a,ke.a,ue.a,je.a,fe.a,he.a,Ie.a,Ae.a,Oe.a,se.a,ke.a,ue.a,ye.a,je.a,fe.a,he.a,Se.a,Le.a,Re.a,Ie.a,Fe.a,Te.a,Ae.a,Oe.a,function(e,t){if("ovadmin"!==e)return"Page Not Found!";switch(t){case 1:return Object(n.jsx)(At,{date:"recent"});case 2:return Object(n.jsx)(At,{date:"today"});case 3:return Object(n.jsx)(At,{date:"old"});case 4:return Object(n.jsx)(At,{date:"future"});case 5:return Object(n.jsx)(At,{date:"all"});case 6:return Object(n.jsx)(At,{date:"trace"});case 7:return Object(n.jsx)(At,{date:"deleted"});case 8:return Object(n.jsx)(hn,{});case 9:return Object(n.jsx)(vn,{});case 10:return Object(n.jsx)(An,{});case 11:return Object(n.jsx)(Hn,{});default:return"Page Not Found!"}}),Un=function(e){switch(e){case"ovadmin":return qn;default:return[]}},Kn=function(e,t){for(var a=Un(e),n=0;n<a.length;n++)if(a[n].index===t)return a[n].id;return"Page Not Found!"},Xn=a(191),Jn=function(){return sessionStorage.getItem("medexadmin-role")},$n=function(e){return sessionStorage.setItem("medexadmin-role",e)},Qn=Object(D.a)((function(e){return{root:{minHeight:"100vh"},image:{backgroundImage:"url(/images/bg.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{padding:e.spacing(4,4),display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"#f5f5f5"},margin:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},alert:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},pageBg:{paddingTop:e.spacing(5),background:"linear-gradient(274deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 5%, rgba(210,210,210,1) 100%)",height:"100vh",margin:0,padding:0},appbarCenter:{position:"absolute",top:"-40px",right:"0",marginLeft:"-145px",alignItems:"center",justify:"center",display:"flex",backgroundColor:"#fff",padding:"5px 20px 15px 20px",borderRadius:"8px"},logoImage:{width:"30px",height:"30px",marginLeft:"0px"},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},adminPanelLabel:{color:e.palette.secondary.main,fontWeight:"600",marginBottom:"20px"}}}));function Zn(){var e=Qn(),t=i.a.useContext(y),a=Object(l.a)(t,2),o=(a[0],a[1]),r=(Object(Xn.useMediaQuery)({maxWidth:1224}),Object(ee.d)()),c=i.a.useState(""),d=Object(l.a)(c,2),p=d[0],u=d[1],b=i.a.useState(""),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(!1),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(!1),k=Object(l.a)(v,2),C=k[0],w=k[1],S=i.a.useState(null),B=Object(l.a)(S,2),D=B[0],R=B[1],te=i.a.useState(!1),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1],ie=function(){oe(!0),le.signIn({username:g,password:p}).then((function(e){if(oe(!1),"OK"===e.data.status){R(null);var t=e.data.token;m?localStorage.setItem("ovadmin-auth-token",t):sessionStorage.setItem("ovadmin-auth-token",t),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0})})),$n(e.data.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:1})})),r.push(re("/".concat(Kn(e.data.roles[0],1))))}else"FAILED"===e.data.status?R(e.data.error):R("Sorry, something went wrong, please try again.")})).catch((function(e){oe(!1),console.error(e),R("Sorry, something went wrong, please try again.")}))};return Object(n.jsx)("div",{className:e.pageBg,children:Object(n.jsxs)(M.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(s.a,{}),Object(n.jsx)(E.a,{elevation:20,children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)("img",{src:z,alt:"Optimal Vision",style:{marginBottom:"20px"}}),Object(n.jsx)(L.a,{className:e.avatar,children:Object(n.jsx)(W.a,{})}),Object(n.jsx)(A.a,{component:"h1",variant:"h6",className:e.adminPanelLabel,children:"Admin Panel"}),D&&Object(n.jsx)("div",{className:e.alert,children:Object(n.jsxs)(F.a,{severity:"error",children:[" ",Object(n.jsx)("div",{style:{lineHeight:"1.5rem",textAlign:"justify"},children:D})]})}),Object(n.jsx)(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"email",autoComplete:"username",value:g,onChange:function(e){f(e.target.value),R(null)},on:!0,autoFocus:!0}),Object(n.jsxs)(V.a,{fullWidth:!0,required:!0,className:Object(Z.a)(e.margin,e.textField),variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&ie()},children:[Object(n.jsxs)(_.a,{htmlFor:"outlined-adornment-password",children:[" ","Password"," "]}),Object(n.jsx)(G.a,{id:"outlined-adornment-password",name:"outlined-adornment-password",type:C?"text":"password",value:p,onChange:function(e){u(e.target.value),R(null)},autoComplete:"current-password",endAdornment:Object(n.jsx)(H.a,{position:"end",children:Object(n.jsx)(J.a,{tabindex:"-1","aria-label":"toggle password visibility",onClick:function(){w(!C)},onMouseDown:function(e){e.preventDefault()},children:C?Object(n.jsx)($.a,{}):Object(n.jsx)(Q.a,{})})}),labelWidth:100})]}),Object(n.jsx)(q.a,{style:{textAlign:"left",width:"100%"},control:Object(n.jsx)(Y.a,{value:"remember",color:"primary",checked:m,onChange:function(e){O(e.target.checked)}}),label:"Remember me"}),Object(n.jsx)(P.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:ie,className:e.submit,children:"Sign In"})]})}),Object(n.jsx)(U.a,{className:e.backdrop,open:ne,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(X.a,{color:"inherit"})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("span",{style:{textAlign:"center",color:"#fff"},children:" "})})]})}),Object(n.jsx)(N.a,{mt:5,style:{color:"#eee"}})]})})}var eo=a(592),to=a(326),ao=a.n(to),no=a(328),oo=a.n(no),io=a(520),ro=Object(D.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},icon:{fontSize:"1rem",color:"#777",cursor:"pointer",paddingTop:"10px",paddingBottom:"8px",borderBottom:"1px solid #eee"},iconSelected:{color:"#fff",backgroundColor:e.palette.primary.main,transition:"all 0.1s ease-in-out"},menuText:{fontSize:"1rem",fontWeight:"500"},Badge:{backgroundColor:"rgb(220, 0, 78)",color:"#fff",fontWeight:"600",textAlign:"center",borderRadius:"50%",fontSize:"0.85rem",lineHeight:"0.85rem",padding:"7px",marginTop:"9px",width:"28px"}}}));function co(){var e=ro(),t=i.a.useContext(y),a=Object(l.a)(t,2),r=a[0],c=a[1],d=i.a.useState(0),s=Object(l.a)(d,2),p=s[0],u=s[1],b=Object(ee.d)(),j=function(){var e=Object(B.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u(r.currentMenuIndex),j()}),[r.currentMenuIndex]);return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(io.a,{children:r.role&&Un(r.role).map((function(t){return!t.hidden&&Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("div",{className:Object(Z.a)(e.icon,p===t.index&&e.iconSelected),onClick:function(e){return a=t.index,u(a),c((function(e){return Object(T.a)(Object(T.a)({},e),{},{currentMenuIndex:a})})),void b.push(re("/".concat(Kn(r.role,a))));var a},children:Object(n.jsxs)(K.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,style:{paddingLeft:"15px"},children:[Object(n.jsx)(K.a,{item:!0,children:t.icon}),Object(n.jsxs)(K.a,{item:!0,style:{textAlign:"left"},children:[Object(n.jsx)("span",{className:e.menuText,children:"".concat(t.title)})," "]})]})},"".concat(t.id))},"".concat(t.id))}))})})}var lo=a(223),so=a.n(lo),po=a(327),uo=a.n(po),bo=a(315),jo=Object(O.a)((function(e){return{paper:{marginTop:"10px",width:"200px",height:"200px",border:"1px solid #ddd",borderRadius:"10px",paddingTop:"10px"}}}))((function(e){return Object(n.jsx)(bo.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),go=Object(O.a)((function(e){return{paper:{marginTop:"5px",width:"280px",height:"280px",border:"1px solid #ddd",borderRadius:"10px",padding:"10px"}}}))((function(e){return Object(n.jsx)(bo.a,Object(T.a)({elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),fo=Object(D.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(T.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:Object(u.a)({position:"relative",whiteSpace:"nowrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{opacity:.9}),drawerPaperClose:Object(u.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},appbarTitle:{color:"#00a1c5",fontSize:"1.2rem",fontWeight:"500",marginRight:"15px"},appbarCenter:{position:"fixed",width:"260px",top:"10px",left:"50%",marginLeft:"-130px",alignItems:"center",justify:"center",display:"flex"},logoImage:{width:"204px",height:"45px"},logoImageMenu:{width:"136px",height:"30px"},userAvatar:{backgroundColor:"#fff",borderColor:"#aaa",border:"1px solid",color:"#aaa",cursor:"pointer"},userAvatarSelected:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,cursor:"pointer"},userAvatarBig:{backgroundColor:"#fff",borderColor:e.palette.primary.main,border:"1px solid",color:e.palette.primary.main,width:"60px",height:"60px"},appBarText:Object(u.a)({color:"#888"},e.breakpoints.down("sm"),{display:"none"}),appBarAppsIcon:{cursor:"pointer",fontSize:"1.8rem"},appBarAppsIconSelected:{cursor:"pointer",fontSize:"1.8rem",color:e.palette.primary.main},usernameLabel:{fontSize:"1.2rem",color:e.palette.primary.main,marginTop:"5px",marginBottom:"5px"},lastLoginLabel:{color:"#777",paddingTop:"5px"},appsLogo:{width:"70px",height:"70px"},appsBox:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid #fff",borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.main),transition:"all 0.1s ease-in-out"}},appsBoxSelected:{cursor:"pointer",transition:"all 0.1s ease-in-out",padding:"2px",borderBottom:"5px solid".concat(e.palette.primary.light),borderRadius:"5px","&:hover":{borderBottom:"5px solid ".concat(e.palette.primary.light),transition:"all 0.1s ease-in-out"}},appsAdminLabel:{color:"#0264d4",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsPCRLabel:{color:"#4faef7",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGynaeLabel:{color:"#e83caf",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsGPLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsSTDLabel:{color:"#f68529",fontWeight:"600",fontSize:"0.95rem",marginTop:"-10px"},appsInToolbar:{position:"fixed",left:"60px",top:"-5px",height:"65px",width:"200px",overflow:"hidden"}}}));function xo(){var e,t,a=fo(),r=i.a.useContext(y),c=Object(l.a)(r,2),d=c[0],p=c[1],u=Object(Xn.useMediaQuery)({maxWidth:768}),b=i.a.useState(!u),j=Object(l.a)(b,2),g=j[0],f=j[1],x=i.a.useState(0),h=Object(l.a)(x,2),m=h[0],O=h[1],v=i.a.useState(null),k=Object(l.a)(v,2),C=k[0],w=k[1],S=i.a.useState(null),B=Object(l.a)(S,2),D=B[0],I=B[1],N=function(){I(null)},R=Object(ee.d)(),W=Object(ee.e)();i.a.useEffect((function(){if(d.role){var e=function(e,t){for(var a=Un(e),n=0;n<a.length;n++)if(a[n].id===t)return a[n].index;return-1}(d.role,function(e){try{var t=e.split("/");return t&&t.length>0?t[t.length-1].length>0?t[t.length-1]:t[t.length-2]:""}catch(a){return""}}(W.pathname));p((function(t){return Object(T.a)(Object(T.a)({},t),{},{currentMenuIndex:e})}))}}),[W]),Object(o.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(o.useEffect)((function(){O(d.currentMenuIndex),u&&f(!1)}),[d.currentMenuIndex]);Object(Z.a)(a.paper,a.fixedHeight);var A=function(e){$n(e),p((function(t){return Object(T.a)(Object(T.a)({},t),{},{role:e})})),R.push(re("/".concat(Kn(e,0)))),N()},F=function(e){switch(e){case"admin":return Object(n.jsx)("img",{src:re("/images/admin.png"),className:a.appsLogo});case"pcr":return Object(n.jsx)("img",{src:re("/images/corona.png"),className:a.appsLogo});case"gynae":return Object(n.jsx)("img",{src:re("/images/woman.png"),className:a.appsLogo});case"gp":return Object(n.jsx)("img",{src:re("/images/doctor.png"),className:a.appsLogo});case"std":return Object(n.jsx)("img",{src:re("/images/std-icon.png"),className:a.appsLogo});default:return null}},E=function(e){switch(e){case"admin":return Object(n.jsxs)("div",{className:a.appsAdminLabel,children:[" ","Admin"," "]});case"pcr":return Object(n.jsxs)("div",{className:a.appsPCRLabel,children:[" ","PCR"," "]});case"gynae":return Object(n.jsxs)("div",{className:a.appsGynaeLabel,children:[" ","Gynae"," "]});case"gp":return Object(n.jsxs)("div",{className:a.appsGPLabel,children:[" ","GP"," "]});case"std":return Object(n.jsxs)("div",{className:a.appsSTDLabel,children:[" ","STD"," "]});default:return null}};return Object(n.jsx)(i.a.Fragment,{children:d.userId&&d.role&&Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(s.a,{}),Object(n.jsx)(Ta.a,{style:{backgroundColor:"#fff",color:"#555",height:"60px"},position:"absolute",className:Object(Z.a)(a.appBar,!1),children:Object(n.jsxs)(Da.a,{className:a.toolbar,children:[Object(n.jsx)(J.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!g)},className:Object(Z.a)(a.menuButton),children:Object(n.jsx)(ao.a,{})}),Object(n.jsx)("div",{className:a.appsInToolbar,children:Object(n.jsxs)(K.a,{container:!0,direction:"row",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:F(d.role)}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)("div",{style:{paddingTop:"8px"},children:E(d.role)})})]})}),Object(n.jsx)("div",{className:a.appbarCenter,children:!u&&Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("img",{className:a.logoImage,src:z,alt:"logo image"})})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",paddingLeft:"2%"},children:Object(n.jsxs)(K.a,{container:!0,spacing:2,direction:"row-reverse",justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(L.a,{className:C?a.userAvatarSelected:a.userAvatar,onClick:function(e){w(e.currentTarget)},children:Object(n.jsx)(J.a,{children:Object(n.jsx)(so.a,{})})})}),(null===(e=d.userId)||void 0===e?void 0:e.roles.find((function(e){return"admin"===e})))&&Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(J.a,{onClick:function(e){I(e.currentTarget)},children:Object(n.jsx)(uo.a,{className:D?a.appBarAppsIconSelected:a.appBarAppsIcon})})})]})})]})}),Object(n.jsx)(jo,{id:"user-avatar-menu",anchorEl:C,keepMounted:!0,open:Boolean(C),onClose:function(){w(null)},children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(L.a,{className:a.userAvatarBig,children:Object(n.jsx)(so.a,{style:{fontSize:"2.5rem"}})})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)("div",{className:a.usernameLabel,children:[" ",null===(t=d.userId)||void 0===t?void 0:t.username," "]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsx)(P.a,{onClick:function(){localStorage.removeItem("ovadmin-auth-token"),sessionStorage.removeItem("ovadmin-auth-token"),sessionStorage.removeItem("medexadmin-role"),p((function(e){return{signedIn:!1}})),R.replace("./login")},variant:"outlined",color:"secondary",style:{marginTop:"30px",width:"150px",borderRadius:"30px"},children:"Logout"})})]})}),Object(n.jsx)(go,{id:"apps-menu",anchorEl:D,keepMounted:!0,open:Boolean(D),onClose:N,children:Object(n.jsxs)(K.a,{container:!0,spacing:1,children:[Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"admin"===d.role?a.appsBoxSelected:a.appsBox,onClick:function(){return A("admin")},children:[Object(n.jsx)(K.a,{item:!0,children:F("admin")}),Object(n.jsx)(K.a,{item:!0,children:E("admin")})]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"pcr"===d.role?a.appsBoxSelected:a.appsBox,onClick:function(){return A("pcr")},children:[Object(n.jsx)(K.a,{item:!0,children:F("pcr")}),Object(n.jsx)(K.a,{item:!0,children:E("pcr")})]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gynae"===d.role?a.appsBoxSelected:a.appsBox,onClick:function(){return A("gynae")},children:[Object(n.jsx)(K.a,{item:!0,children:F("gynae")}),Object(n.jsx)(K.a,{item:!0,children:E("gynae")})]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"gp"===d.role?a.appsBoxSelected:a.appsBox,onClick:function(){return A("gp")},children:[Object(n.jsx)(K.a,{item:!0,children:F("gp")}),Object(n.jsx)(K.a,{item:!0,children:E("gp")})]})}),Object(n.jsx)(K.a,{item:!0,children:Object(n.jsxs)(K.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:"std"===d.role?a.appsBoxSelected:a.appsBox,onClick:function(){return A("std")},children:[Object(n.jsx)(K.a,{item:!0,children:F("std")}),Object(n.jsx)(K.a,{item:!0,children:E("std")})]})})]})}),Object(n.jsxs)(eo.a,{variant:u?"temporary":"persistent",classes:{paper:Object(Z.a)(a.drawerPaper,!g&&a.drawerPaperClose)},open:g,children:[Object(n.jsxs)("div",{className:a.toolbarIcon,children:[Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("img",{className:a.logoImageMenu,src:z,alt:"logo image"})}),Object(n.jsx)(J.a,{onClick:function(){f(!1)},children:Object(n.jsx)(oo.a,{})})]}),Object(n.jsx)(nt.a,{}),Object(n.jsx)(co,{})]}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.appBarSpacer}),Object(n.jsx)(M.a,{maxWidth:u?"xs":"xl",className:a.container,children:m>0&&Yn(d.role,m)})]})]})})})}function ho(e){return mo.apply(this,arguments)}function mo(){return(mo=Object(B.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.checkToken({token:t});case 3:if("OK"!==(a=e.sent).data.status){e.next=8;break}return e.abrupt("return",{username:a.data.userId,forename:a.data.forename,surname:a.data.surname,roles:a.data.roles,lastLoginTimeStamp:a.data.lastLoginTimeStamp});case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Oo=Object(D.a)((function(e){return{appBar:{position:"static",backgroundColor:"#333",color:"#fff"},signOutButton:{color:"#fff",marginRight:"20px",fontWeight:"500"},title:{flexGrow:1}}}));function vo(){Oo();var e=i.a.useContext(y),t=Object(l.a)(e,2),a=t[0],o=t[1],r=i.a.useState(!1),c=Object(l.a)(r,2),d=c[0],p=c[1],u=Object(ee.d)(),b=Object(ee.e)();i.a.useEffect((function(){(function(){var e=Object(B.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("ovadmin-auth-token")||sessionStorage.getItem("ovadmin-auth-token"),le.setToken(t),t){e.next=8;break}o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),p(!0),u.push(re("/login")),e.next=13;break;case 8:return e.next=10,ho(t);case 10:(a=e.sent)?b.pathname===re("/")||b.pathname===re("/#")||b.pathname.startsWith(re("/login"))?(Jn()||$n(a.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,signedUp:!1,forgotPassword:!1,userId:a,role:Jn()})})),u.push(re("/".concat(Kn(Jn(),1))))):(Jn()||$n(a.roles[0]),o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!0,userId:a,role:Jn()})}))):(o((function(e){return Object(T.a)(Object(T.a)({},e),{},{signedIn:!1,signedUp:!1,forgotPassword:!1})})),u.push(re("/login"))),p(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b.pathname]);return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(s.a,{}),d&&(a.signedIn?Object(n.jsx)(xo,{}):Object(n.jsx)(Zn,{}))]})}!function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");k?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):C(t,e)}))}}();var ko=function(){var e=i.a.useState({currentMenuIndex:1}),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.jsx)(y.Provider,{value:[a,o],children:Object(n.jsx)(p.a,{children:Object(n.jsxs)(d.a,{theme:m,children:[Object(n.jsx)(s.a,{}),Object(n.jsx)(v,{}),Object(n.jsx)(vo,{})]})})})};c.a.render(Object(n.jsx)(ko,{}),document.getElementById("root"))},74:function(e,t){e.exports={FormatDateFromString:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(0,4)):""},FormatDateFromStringShortYear:function(e){return e?"".concat(e.substr(8,2),"-").concat(e.substr(5,2),"-").concat(e.substr(2,2)):""},RevertFormatDateFromString:function(e){return e?"".concat(e.substr(6,4),"-").concat(e.substr(3,2),"-").concat(e.substr(0,2)):""},FormatDateFromStringWithSlash:function(e){return"".concat(e.substr(8,2),"/").concat(e.substr(5,2),"/").concat(e.substr(0,4))}}}},[[517,1,2]]]);
//# sourceMappingURL=main.68fabfa0.chunk.js.map